import{r as x,j as e}from"./ui-vendor-JVI_EMCz.js";import{q as h,R as S,S as B,T as k,U as W,G as C,K as q}from"./index-B8qdfcdn.js";import"./react-vendor-Bzgz95E1.js";import"./firebase-vendor-mxbbJSnD.js";const L=()=>{const{addStock:i}=h(),[n,p]=x.useState(""),[l,s]=x.useState(""),[r,o]=x.useState("1"),[d,u]=x.useState("other"),f=()=>{if(!n||!l){alert("å“ç›®åã¨æ®‹ã‚Šæ—¥æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");return}i({name:n,daysRemaining:Number(l),quantity:Number(r),category:d}),p(""),s(""),o("1"),u("other"),alert("åœ¨åº«ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼")},m=[{value:"staple",label:"ğŸš ä¸»é£Ÿ"},{value:"protein",label:"ğŸ– ãŸã‚“ã±ãè³ª"},{value:"vegetable",label:"ğŸ¥¬ é‡èœ"},{value:"fruit",label:"ğŸ æœç‰©"},{value:"dairy",label:"ğŸ¥› ä¹³è£½å“"},{value:"seasoning",label:"ğŸ§‚ èª¿å‘³æ–™"},{value:"other",label:"ğŸ“¦ ãã®ä»–"}];return e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"æ‰‹å‹•ã§è¿½åŠ "}),e.jsx("label",{children:"å“ç›®"}),e.jsx("input",{value:n,onChange:a=>p(a.target.value),placeholder:"ä¾‹: ç‰›ä¹³"}),e.jsx("label",{children:"ã‚«ãƒ†ã‚´ãƒª"}),e.jsx("select",{value:d,onChange:a=>u(a.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid var(--border)",fontSize:"16px",marginBottom:"16px"},children:m.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),e.jsx("label",{children:"æ®‹ã‚Šæ—¥æ•°"}),e.jsx("input",{type:"number",value:l,onChange:a=>s(a.target.value),placeholder:"ä¾‹: 3"}),e.jsx("label",{children:"æ•°é‡"}),e.jsx("input",{type:"number",value:r,onChange:a=>o(a.target.value),placeholder:"1"}),e.jsx("button",{className:"submit",onClick:f,children:"åœ¨åº«ã«ç™»éŒ²"})]})},N=()=>{const{stocks:i,deleteStock:n,updateStock:p}=h(),{addItem:l}=S(),[s,r]=x.useState(""),[o,d]=x.useState("expiry"),[u,f]=x.useState("all"),m=t=>{confirm("ã“ã®åœ¨åº«ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")&&n(t)},a=(t,c)=>{l({name:t,quantity:c}),alert(`ã€Œ${t}ã€ã‚’è²·ã„ç‰©ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸï¼`)},j=(t,c,g)=>{const y=c+g;y<=0?confirm("æ•°é‡ãŒ0ã«ãªã‚Šã¾ã™ã€‚åœ¨åº«ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")&&n(t):p(t,{quantity:y})},w=t=>t<=0?"#ef4444":t<=1?"#f59e0b":t<=3?"#eab308":"#10b981",R=t=>t<=0?"æœŸé™åˆ‡ã‚Œï¼":t===1?"æ˜æ—¥æœŸé™":`æ®‹ã‚Š${t}æ—¥`,z=t=>{switch(t){case"staple":return"ğŸš";case"protein":return"ğŸ–";case"vegetable":return"ğŸ¥¬";case"fruit":return"ğŸ";case"dairy":return"ğŸ¥›";case"seasoning":return"ğŸ§‚";default:return"ğŸ“¦"}},I=t=>{switch(t){case"staple":return"ä¸»é£Ÿ";case"protein":return"ãŸã‚“ã±ãè³ª";case"vegetable":return"é‡èœ";case"fruit":return"æœç‰©";case"dairy":return"ä¹³è£½å“";case"seasoning":return"èª¿å‘³æ–™";default:return"ãã®ä»–"}},b=x.useMemo(()=>{let t=[...i];return u!=="all"&&(t=t.filter(c=>c.category===u)),s&&(t=t.filter(c=>c.name.toLowerCase().includes(s.toLowerCase()))),t.sort((c,g)=>{switch(o){case"expiry":return c.daysRemaining-g.daysRemaining;case"name":return c.name.localeCompare(g.name);case"category":const y=c.category||"other",v=g.category||"other";return y===v?c.daysRemaining-g.daysRemaining:y.localeCompare(v);default:return 0}}),t},[i,s,o,u]);return e.jsxs("div",{className:"card",children:[e.jsxs("h3",{children:["åœ¨åº«ä¸€è¦§ï¼ˆ",b.length,"å€‹ï¼‰"]}),e.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[e.jsx(B,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)",fontSize:"20px"}}),e.jsx("input",{type:"text",value:s,onChange:t=>r(t.target.value),placeholder:"åœ¨åº«ã‚’æ¤œç´¢...",style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"8px",border:"2px solid var(--border)",fontSize:"16px"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"4px",display:"block"},children:"ã‚«ãƒ†ã‚´ãƒª"}),e.jsxs("select",{value:u,onChange:t=>f(t.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"2px solid var(--border)",fontSize:"14px"},children:[e.jsx("option",{value:"all",children:"ã™ã¹ã¦"}),e.jsx("option",{value:"staple",children:"ğŸš ä¸»é£Ÿ"}),e.jsx("option",{value:"protein",children:"ğŸ– ãŸã‚“ã±ãè³ª"}),e.jsx("option",{value:"vegetable",children:"ğŸ¥¬ é‡èœ"}),e.jsx("option",{value:"fruit",children:"ğŸ æœç‰©"}),e.jsx("option",{value:"dairy",children:"ğŸ¥› ä¹³è£½å“"}),e.jsx("option",{value:"seasoning",children:"ğŸ§‚ èª¿å‘³æ–™"}),e.jsx("option",{value:"other",children:"ğŸ“¦ ãã®ä»–"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"4px",display:"block"},children:"ä¸¦ã³é †"}),e.jsxs("select",{value:o,onChange:t=>d(t.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"2px solid var(--border)",fontSize:"14px"},children:[e.jsx("option",{value:"expiry",children:"æœŸé™é †"}),e.jsx("option",{value:"name",children:"åå‰é †"}),e.jsx("option",{value:"category",children:"ã‚«ãƒ†ã‚´ãƒªé †"})]})]})]}),i.length===0?e.jsx("p",{style:{textAlign:"center",color:"var(--text-secondary)",padding:"20px"},children:"åœ¨åº«ãŒã‚ã‚Šã¾ã›ã‚“"}):b.length===0?e.jsx("p",{style:{textAlign:"center",color:"var(--text-secondary)",padding:"20px"},children:"è©²å½“ã™ã‚‹åœ¨åº«ãŒã‚ã‚Šã¾ã›ã‚“"}):e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:b.map(t=>e.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:"1px solid var(--border)",background:"var(--background)",borderRadius:"8px",marginBottom:"8px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"24px"},children:z(t.category)}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"16px"},children:t.name}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:I(t.category)})]})]}),e.jsx("div",{style:{fontSize:"0.9rem",color:w(t.daysRemaining),fontWeight:600,marginBottom:"8px"},children:R(t.daysRemaining)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("button",{onClick:()=>j(t.id,t.quantity,-1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(k,{size:16})}),e.jsxs("span",{style:{fontWeight:600,minWidth:"40px",textAlign:"center"},children:["x",t.quantity]}),e.jsx("button",{onClick:()=>j(t.id,t.quantity,1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(W,{size:16})})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginLeft:"12px"},children:[e.jsx("button",{onClick:()=>a(t.name,t.quantity),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"è²·ã„ç‰©ãƒªã‚¹ãƒˆã«è¿½åŠ ",children:e.jsx(C,{size:20})}),e.jsx("button",{onClick:()=>m(t.id),style:{background:"transparent",border:"2px solid #ef4444",borderRadius:"6px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ef4444"},title:"å‰Šé™¤",children:e.jsx(q,{size:20})})]})]},t.id))})]})},A=()=>{const{getExpiringStocks:i}=h(),{addItem:n}=S(),p=x.useMemo(()=>i(0),[i]),l=x.useMemo(()=>i(1),[i]),s=()=>{const r=[...p,...l];r.length!==0&&confirm(`æœŸé™åˆ‡ã‚Œé–“è¿‘ã®å•†å“ ${r.length}å€‹ã‚’è²·ã„ç‰©ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ`)&&(r.forEach(o=>{n({name:o.name,quantity:o.quantity})}),alert(`${r.length}å€‹ã®å•†å“ã‚’è²·ã„ç‰©ãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸï¼`))};return p.length===0&&l.length===0?null:e.jsxs(e.Fragment,{children:[p.length>0&&e.jsxs("div",{className:"card",style:{background:"#fee2e2",borderLeft:"4px solid #ef4444",color:"#991b1b"},children:[e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:"ğŸš¨ ä»Šæ—¥ä½¿ã†ã¹ãé£Ÿæ"}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:p.map(r=>e.jsx("li",{children:r.name},r.id))})]}),l.length>0&&e.jsxs("div",{className:"card",style:{background:"#fef3c7",borderLeft:"4px solid #f59e0b",color:"#92400e"},children:[e.jsx("h3",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:"â° æ˜æ—¥æœŸé™åˆ‡ã‚Œ"}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:l.map(r=>e.jsx("li",{children:r.name},r.id))})]}),e.jsx("div",{className:"card",style:{padding:"12px"},children:e.jsxs("button",{onClick:s,className:"submit",style:{background:"#3b82f6",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px"},children:[e.jsx(C,{size:20}),"æœŸé™åˆ‡ã‚Œé–“è¿‘ã®å•†å“ã‚’è²·ã„ç‰©ãƒªã‚¹ãƒˆã«è¿½åŠ "]})})]})},M=()=>{const{stocks:i}=h(),n=x.useMemo(()=>{const s={staple:0,protein:0,vegetable:0,fruit:0,dairy:0,seasoning:0,other:0},r={expired:0,today:0,tomorrow:0,soon:0,safe:0};let o=0;return i.forEach(d=>{const u=d.category||"other";s[u]+=d.quantity,o+=d.quantity,d.daysRemaining<=0?r.expired++:d.daysRemaining===0?r.today++:d.daysRemaining===1?r.tomorrow++:d.daysRemaining<=3?r.soon++:r.safe++}),{categoryCount:s,expiryStats:r,totalQuantity:o}},[i]),p=s=>{switch(s){case"staple":return"ğŸš";case"protein":return"ğŸ–";case"vegetable":return"ğŸ¥¬";case"fruit":return"ğŸ";case"dairy":return"ğŸ¥›";case"seasoning":return"ğŸ§‚";default:return"ğŸ“¦"}},l=s=>{switch(s){case"staple":return"ä¸»é£Ÿ";case"protein":return"ãŸã‚“ã±ãè³ª";case"vegetable":return"é‡èœ";case"fruit":return"æœç‰©";case"dairy":return"ä¹³è£½å“";case"seasoning":return"èª¿å‘³æ–™";default:return"ãã®ä»–"}};return i.length===0?null:e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"åœ¨åº«çµ±è¨ˆ"}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",padding:"20px",borderRadius:"12px",marginBottom:"16px",color:"white",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"8px",opacity:.9},children:"ç·åœ¨åº«æ•°"}),e.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"bold"},children:[n.totalQuantity,e.jsx("span",{style:{fontSize:"1.2rem",marginLeft:"8px"},children:"å€‹"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"4px"},children:[i.length,"ç¨®é¡ã®å•†å“"]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("h4",{style:{fontSize:"1rem",marginBottom:"12px"},children:"ã‚«ãƒ†ã‚´ãƒªåˆ¥"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:Object.keys(n.categoryCount).map(s=>{const r=n.categoryCount[s];return r===0?null:e.jsxs("div",{style:{background:"var(--background)",padding:"12px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"24px"},children:p(s)}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:l(s)}),e.jsxs("div",{style:{fontWeight:600,fontSize:"1.1rem"},children:[r,"å€‹"]})]})]},s)})})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"1rem",marginBottom:"12px"},children:"è³å‘³æœŸé™"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[n.expiryStats.expired>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#fef2f2",borderRadius:"6px",border:"2px solid #ef4444"},children:[e.jsx("span",{style:{color:"#ef4444",fontWeight:600},children:"âš ï¸ æœŸé™åˆ‡ã‚Œ"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#ef4444"},children:[n.expiryStats.expired,"å€‹"]})]}),n.expiryStats.today>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#fff7ed",borderRadius:"6px",border:"2px solid #f59e0b"},children:[e.jsx("span",{style:{color:"#f59e0b",fontWeight:600},children:"ğŸ”” ä»Šæ—¥æœŸé™"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#f59e0b"},children:[n.expiryStats.today,"å€‹"]})]}),n.expiryStats.tomorrow>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#fefce8",borderRadius:"6px",border:"2px solid #eab308"},children:[e.jsx("span",{style:{color:"#eab308",fontWeight:600},children:"ğŸ“… æ˜æ—¥æœŸé™"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#eab308"},children:[n.expiryStats.tomorrow,"å€‹"]})]}),n.expiryStats.soon>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"var(--background)",borderRadius:"6px"},children:[e.jsx("span",{style:{color:"var(--text-secondary)",fontWeight:600},children:"â° 3æ—¥ä»¥å†…"}),e.jsxs("span",{style:{fontWeight:"bold"},children:[n.expiryStats.soon,"å€‹"]})]}),n.expiryStats.safe>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#f0fdf4",borderRadius:"6px"},children:[e.jsx("span",{style:{color:"#10b981",fontWeight:600},children:"âœ… å®‰å…¨"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[n.expiryStats.safe,"å€‹"]})]})]})]})]})},$=()=>e.jsxs("section",{className:"screen active",children:[e.jsx("h2",{children:"åœ¨åº«ç®¡ç†"}),e.jsx(A,{}),e.jsx(M,{}),e.jsx(L,{}),e.jsx(N,{})]});export{$ as StockScreen};
