function sU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function ko(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v2={exports:{}},xh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gI;function lU(){if(gI)return xh;gI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:o,ref:i!==void 0?i:null,props:a}}return xh.Fragment=e,xh.jsx=r,xh.jsxs=r,xh}var vI;function cU(){return vI||(vI=1,v2.exports=lU()),v2.exports}var m=cU(),m2={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mI;function uU(){if(mI)return qe;mI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,A={};function S(G,Z,be){this.props=G,this.context=Z,this.refs=A,this.updater=be||w}S.prototype.isReactComponent={},S.prototype.setState=function(G,Z){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Z,"setState")},S.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function T(){}T.prototype=S.prototype;function R(G,Z,be){this.props=G,this.context=Z,this.refs=A,this.updater=be||w}var N=R.prototype=new T;N.constructor=R,_(N,S.prototype),N.isPureReactComponent=!0;var M=Array.isArray;function L(){}var O={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function j(G,Z,be){var Ee=be.ref;return{$$typeof:t,type:G,key:Z,ref:Ee!==void 0?Ee:null,props:be}}function B(G,Z){return j(G.type,Z,G.props)}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function V(G){var Z={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(be){return Z[be]})}var F=/\/+/g;function he(G,Z){return typeof G=="object"&&G!==null&&G.key!=null?V(""+G.key):Z.toString(36)}function _e(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(L,L):(G.status="pending",G.then(function(Z){G.status==="pending"&&(G.status="fulfilled",G.value=Z)},function(Z){G.status==="pending"&&(G.status="rejected",G.reason=Z)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Y(G,Z,be,Ee,De){var We=typeof G;(We==="undefined"||We==="boolean")&&(G=null);var at=!1;if(G===null)at=!0;else switch(We){case"bigint":case"string":case"number":at=!0;break;case"object":switch(G.$$typeof){case t:case e:at=!0;break;case d:return at=G._init,Y(at(G._payload),Z,be,Ee,De)}}if(at)return De=De(G),at=Ee===""?"."+he(G,0):Ee,M(De)?(be="",at!=null&&(be=at.replace(F,"$&/")+"/"),Y(De,Z,be,"",function($e){return $e})):De!=null&&(z(De)&&(De=B(De,be+(De.key==null||G&&G.key===De.key?"":(""+De.key).replace(F,"$&/")+"/")+at)),Z.push(De)),1;at=0;var br=Ee===""?".":Ee+":";if(M(G))for(var me=0;me<G.length;me++)Ee=G[me],We=br+he(Ee,me),at+=Y(Ee,Z,be,We,De);else if(me=y(G),typeof me=="function")for(G=me.call(G),me=0;!(Ee=G.next()).done;)Ee=Ee.value,We=br+he(Ee,me++),at+=Y(Ee,Z,be,We,De);else if(We==="object"){if(typeof G.then=="function")return Y(_e(G),Z,be,Ee,De);throw Z=String(G),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return at}function ie(G,Z,be){if(G==null)return G;var Ee=[],De=0;return Y(G,Ee,"","",function(We){return Z.call(be,We,De++)}),Ee}function K(G){if(G._status===-1){var Z=G._result;Z=Z(),Z.then(function(be){(G._status===0||G._status===-1)&&(G._status=1,G._result=be)},function(be){(G._status===0||G._status===-1)&&(G._status=2,G._result=be)}),G._status===-1&&(G._status=0,G._result=Z)}if(G._status===1)return G._result.default;throw G._result}var ve=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},Ie={map:ie,forEach:function(G,Z,be){ie(G,function(){Z.apply(this,arguments)},be)},count:function(G){var Z=0;return ie(G,function(){Z++}),Z},toArray:function(G){return ie(G,function(Z){return Z})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return qe.Activity=p,qe.Children=Ie,qe.Component=S,qe.Fragment=r,qe.Profiler=i,qe.PureComponent=R,qe.StrictMode=n,qe.Suspense=c,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,qe.__COMPILER_RUNTIME={__proto__:null,c:function(G){return O.H.useMemoCache(G)}},qe.cache=function(G){return function(){return G.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(G,Z,be){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var Ee=_({},G.props),De=G.key;if(Z!=null)for(We in Z.key!==void 0&&(De=""+Z.key),Z)!D.call(Z,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&Z.ref===void 0||(Ee[We]=Z[We]);var We=arguments.length-2;if(We===1)Ee.children=be;else if(1<We){for(var at=Array(We),br=0;br<We;br++)at[br]=arguments[br+2];Ee.children=at}return j(G.type,De,Ee)},qe.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},qe.createElement=function(G,Z,be){var Ee,De={},We=null;if(Z!=null)for(Ee in Z.key!==void 0&&(We=""+Z.key),Z)D.call(Z,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(De[Ee]=Z[Ee]);var at=arguments.length-2;if(at===1)De.children=be;else if(1<at){for(var br=Array(at),me=0;me<at;me++)br[me]=arguments[me+2];De.children=br}if(G&&G.defaultProps)for(Ee in at=G.defaultProps,at)De[Ee]===void 0&&(De[Ee]=at[Ee]);return j(G,We,De)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(G){return{$$typeof:s,render:G}},qe.isValidElement=z,qe.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:K}},qe.memo=function(G,Z){return{$$typeof:f,type:G,compare:Z===void 0?null:Z}},qe.startTransition=function(G){var Z=O.T,be={};O.T=be;try{var Ee=G(),De=O.S;De!==null&&De(be,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(L,ve)}catch(We){ve(We)}finally{Z!==null&&be.types!==null&&(Z.types=be.types),O.T=Z}},qe.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},qe.use=function(G){return O.H.use(G)},qe.useActionState=function(G,Z,be){return O.H.useActionState(G,Z,be)},qe.useCallback=function(G,Z){return O.H.useCallback(G,Z)},qe.useContext=function(G){return O.H.useContext(G)},qe.useDebugValue=function(){},qe.useDeferredValue=function(G,Z){return O.H.useDeferredValue(G,Z)},qe.useEffect=function(G,Z){return O.H.useEffect(G,Z)},qe.useEffectEvent=function(G){return O.H.useEffectEvent(G)},qe.useId=function(){return O.H.useId()},qe.useImperativeHandle=function(G,Z,be){return O.H.useImperativeHandle(G,Z,be)},qe.useInsertionEffect=function(G,Z){return O.H.useInsertionEffect(G,Z)},qe.useLayoutEffect=function(G,Z){return O.H.useLayoutEffect(G,Z)},qe.useMemo=function(G,Z){return O.H.useMemo(G,Z)},qe.useOptimistic=function(G,Z){return O.H.useOptimistic(G,Z)},qe.useReducer=function(G,Z,be){return O.H.useReducer(G,Z,be)},qe.useRef=function(G){return O.H.useRef(G)},qe.useState=function(G){return O.H.useState(G)},qe.useSyncExternalStore=function(G,Z,be){return O.H.useSyncExternalStore(G,Z,be)},qe.useTransition=function(){return O.H.useTransition()},qe.version="19.2.0",qe}var yI;function Zf(){return yI||(yI=1,m2.exports=uU()),m2.exports}var C=Zf();const Hn=ko(C),fU=sU({__proto__:null,default:Hn},[C]);var y2={exports:{}},bh={},x2={exports:{}},b2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI;function dU(){return xI||(xI=1,(function(t){function e(Y,ie){var K=Y.length;Y.push(ie);e:for(;0<K;){var ve=K-1>>>1,Ie=Y[ve];if(0<i(Ie,ie))Y[ve]=ie,Y[K]=Ie,K=ve;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ie=Y[0],K=Y.pop();if(K!==ie){Y[0]=K;e:for(var ve=0,Ie=Y.length,G=Ie>>>1;ve<G;){var Z=2*(ve+1)-1,be=Y[Z],Ee=Z+1,De=Y[Ee];if(0>i(be,K))Ee<Ie&&0>i(De,be)?(Y[ve]=De,Y[Ee]=K,ve=Ee):(Y[ve]=be,Y[Z]=K,ve=Z);else if(Ee<Ie&&0>i(De,K))Y[ve]=De,Y[Ee]=K,ve=Ee;else break e}}return ie}function i(Y,ie){var K=Y.sortIndex-ie.sortIndex;return K!==0?K:Y.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var c=[],f=[],d=1,p=null,g=3,y=!1,w=!1,_=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(Y){for(var ie=r(f);ie!==null;){if(ie.callback===null)n(f);else if(ie.startTime<=Y)n(f),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=r(f)}}function M(Y){if(_=!1,N(Y),!w)if(r(c)!==null)w=!0,L||(L=!0,V());else{var ie=r(f);ie!==null&&_e(M,ie.startTime-Y)}}var L=!1,O=-1,D=5,j=-1;function B(){return A?!0:!(t.unstable_now()-j<D)}function z(){if(A=!1,L){var Y=t.unstable_now();j=Y;var ie=!0;try{e:{w=!1,_&&(_=!1,T(O),O=-1),y=!0;var K=g;try{t:{for(N(Y),p=r(c);p!==null&&!(p.expirationTime>Y&&B());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,g=p.priorityLevel;var Ie=ve(p.expirationTime<=Y);if(Y=t.unstable_now(),typeof Ie=="function"){p.callback=Ie,N(Y),ie=!0;break t}p===r(c)&&n(c),N(Y)}else n(c);p=r(c)}if(p!==null)ie=!0;else{var G=r(f);G!==null&&_e(M,G.startTime-Y),ie=!1}}break e}finally{p=null,g=K,y=!1}ie=void 0}}finally{ie?V():L=!1}}}var V;if(typeof R=="function")V=function(){R(z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,he=F.port2;F.port1.onmessage=z,V=function(){he.postMessage(null)}}else V=function(){S(z,0)};function _e(Y,ie){O=S(function(){Y(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var K=g;g=ie;try{return Y()}finally{g=K}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var K=g;g=Y;try{return ie()}finally{g=K}},t.unstable_scheduleCallback=function(Y,ie,K){var ve=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ve+K:ve):K=ve,Y){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=K+Ie,Y={id:d++,callback:ie,priorityLevel:Y,startTime:K,expirationTime:Ie,sortIndex:-1},K>ve?(Y.sortIndex=K,e(f,Y),r(c)===null&&Y===r(f)&&(_?(T(O),O=-1):_=!0,_e(M,K-ve))):(Y.sortIndex=Ie,e(c,Y),w||y||(w=!0,L||(L=!0,V()))),Y},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(Y){var ie=g;return function(){var K=g;g=ie;try{return Y.apply(this,arguments)}finally{g=K}}}})(b2)),b2}var bI;function hU(){return bI||(bI=1,x2.exports=dU()),x2.exports}var w2={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wI;function pU(){if(wI)return jn;wI=1;var t=Zf();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},jn.flushSync=function(c){var f=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=f,n.p=d,n.d.f()}},jn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(c,f))},jn.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},jn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?n.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):d==="script"&&n.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=s(f.as,f.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(c)},jn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin);n.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=s(f.as,f.crossOrigin);n.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(c)},jn.requestFormReset=function(c){n.d.r(c)},jn.unstable_batchedUpdates=function(c,f){return c(f)},jn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},jn.useFormStatus=function(){return o.H.useHostTransitionStatus()},jn.version="19.2.0",jn}var _I;function cD(){if(_I)return w2.exports;_I=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),w2.exports=pU(),w2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AI;function gU(){if(AI)return bh;AI=1;var t=hU(),e=Zf(),r=cD();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function s(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(n(188))}function f(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(n(188));return u!==l?null:l}for(var h=l,v=u;;){var b=h.return;if(b===null)break;var E=b.alternate;if(E===null){if(v=b.return,v!==null){h=v;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===h)return c(b),l;if(E===v)return c(b),u;E=E.sibling}throw Error(n(188))}if(h.return!==v.return)h=b,v=E;else{for(var P=!1,U=b.child;U;){if(U===h){P=!0,h=b,v=E;break}if(U===v){P=!0,v=b,h=E;break}U=U.sibling}if(!P){for(U=E.child;U;){if(U===h){P=!0,h=E,v=b;break}if(U===v){P=!0,v=E,h=b;break}U=U.sibling}if(!P)throw Error(n(189))}}if(h.alternate!==v)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function V(l){return l===null||typeof l!="object"?null:(l=z&&l[z]||l["@@iterator"],typeof l=="function"?l:null)}var F=Symbol.for("react.client.reference");function he(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===F?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case L:return"SuspenseList";case j:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case R:return l.displayName||"Context";case T:return(l._context.displayName||"Context")+".Consumer";case N:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return u=l.displayName||null,u!==null?u:he(l.type)||"Memo";case D:u=l._payload,l=l._init;try{return he(l(u))}catch{}}return null}var _e=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ve=[],Ie=-1;function G(l){return{current:l}}function Z(l){0>Ie||(l.current=ve[Ie],ve[Ie]=null,Ie--)}function be(l,u){Ie++,ve[Ie]=l.current,l.current=u}var Ee=G(null),De=G(null),We=G(null),at=G(null);function br(l,u){switch(be(We,u),be(De,l),be(Ee,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?B3(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=B3(u),l=z3(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(Ee),be(Ee,l)}function me(){Z(Ee),Z(De),Z(We)}function $e(l){l.memoizedState!==null&&be(at,l);var u=Ee.current,h=z3(u,l.type);u!==h&&(be(De,l),be(Ee,h))}function Qe(l){De.current===l&&(Z(Ee),Z(De)),at.current===l&&(Z(at),gh._currentValue=K)}var ge,wr;function tt(l){if(ge===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);ge=u&&u[1]||"",wr=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ge+l+wr}var Gr=!1;function _r(l,u){if(!l||Gr)return"";Gr=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(oe){var re=oe}Reflect.construct(l,[],fe)}else{try{fe.call()}catch(oe){re=oe}l.call(fe.prototype)}}else{try{throw Error()}catch(oe){re=oe}(fe=l())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=v.DetermineComponentFrameRoot(),P=E[0],U=E[1];if(P&&U){var q=P.split(`
`),te=U.split(`
`);for(b=v=0;v<q.length&&!q[v].includes("DetermineComponentFrameRoot");)v++;for(;b<te.length&&!te[b].includes("DetermineComponentFrameRoot");)b++;if(v===q.length||b===te.length)for(v=q.length-1,b=te.length-1;1<=v&&0<=b&&q[v]!==te[b];)b--;for(;1<=v&&0<=b;v--,b--)if(q[v]!==te[b]){if(v!==1||b!==1)do if(v--,b--,0>b||q[v]!==te[b]){var le=`
`+q[v].replace(" at new "," at ");return l.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",l.displayName)),le}while(1<=v&&0<=b);break}}}finally{Gr=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?tt(h):""}function Ei(l,u){switch(l.tag){case 26:case 27:case 5:return tt(l.type);case 16:return tt("Lazy");case 13:return l.child!==u&&u!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return _r(l.type,!1);case 11:return _r(l.type.render,!1);case 1:return _r(l.type,!0);case 31:return tt("Activity");default:return""}}function Rs(l){try{var u="",h=null;do u+=Ei(l,h),h=l,l=l.return;while(l);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Dr=Object.prototype.hasOwnProperty,Wr=t.unstable_scheduleCallback,Ps=t.unstable_cancelCallback,yy=t.unstable_shouldYield,y0=t.unstable_requestPaint,Kn=t.unstable_now,nc=t.unstable_getCurrentPriorityLevel,yd=t.unstable_ImmediatePriority,xd=t.unstable_UserBlockingPriority,Ds=t.unstable_NormalPriority,xy=t.unstable_LowPriority,x0=t.unstable_IdlePriority,b0=t.log,w0=t.unstable_setDisableYieldValue,_a=null,xn=null;function Wi(l){if(typeof b0=="function"&&w0(l),xn&&typeof xn.setStrictMode=="function")try{xn.setStrictMode(_a,l)}catch{}}var Ar=Math.clz32?Math.clz32:A0,_0=Math.log,Eu=Math.LN2;function A0(l){return l>>>=0,l===0?32:31-(_0(l)/Eu|0)|0}var Qa=256,ic=262144,Nr=4194304;function Za(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ja(l,u,h){var v=l.pendingLanes;if(v===0)return 0;var b=0,E=l.suspendedLanes,P=l.pingedLanes;l=l.warmLanes;var U=v&134217727;return U!==0?(v=U&~E,v!==0?b=Za(v):(P&=U,P!==0?b=Za(P):h||(h=U&~l,h!==0&&(b=Za(h))))):(U=v&~E,U!==0?b=Za(U):P!==0?b=Za(P):h||(h=v&~l,h!==0&&(b=Za(h)))),b===0?0:u!==0&&u!==b&&(u&E)===0&&(E=b&-b,h=u&-u,E>=h||E===32&&(h&4194048)!==0)?u:b}function Aa(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function by(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E0(){var l=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),l}function eo(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function ac(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function wy(l,u,h,v,b,E){var P=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var U=l.entanglements,q=l.expirationTimes,te=l.hiddenUpdates;for(h=P&~h;0<h;){var le=31-Ar(h),fe=1<<le;U[le]=0,q[le]=-1;var re=te[le];if(re!==null)for(te[le]=null,le=0;le<re.length;le++){var oe=re[le];oe!==null&&(oe.lane&=-536870913)}h&=~fe}v!==0&&oc(l,v,0),E!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=E&~(P&~u))}function oc(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var v=31-Ar(u);l.entangledLanes|=u,l.entanglements[v]=l.entanglements[v]|1073741824|h&261930}function bd(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var v=31-Ar(h),b=1<<v;b&u|l[v]&u&&(l[v]|=u),h&=~b}}function wd(l,u){var h=u&-u;return h=(h&42)!==0?1:sc(h),(h&(l.suspendedLanes|u))!==0?0:h}function sc(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Lo(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function S0(){var l=ie.p;return l!==0?l:(l=window.event,l===void 0?32:lI(l.type))}function Ea(l,u){var h=ie.p;try{return ie.p=l,u()}finally{ie.p=h}}var Sa=Math.random().toString(36).slice(2),kr="__reactFiber$"+Sa,sn="__reactProps$"+Sa,to="__reactContainer$"+Sa,Su="__reactEvents$"+Sa,_y="__reactListeners$"+Sa,C0="__reactHandles$"+Sa,T0="__reactResources$"+Sa,ro="__reactMarker$"+Sa;function Cu(l){delete l[kr],delete l[sn],delete l[Su],delete l[_y],delete l[C0]}function no(l){var u=l[kr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[to]||h[kr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=G3(l);l!==null;){if(h=l[kr])return h;l=G3(l)}return u}l=h,h=l.parentNode}return null}function Ki(l){if(l=l[kr]||l[to]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function Si(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function io(l){var u=l[T0];return u||(u=l[T0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Mr(l){l[ro]=!0}var _d=new Set,Ad={};function ao(l,u){oo(l,u),oo(l+"Capture",u)}function oo(l,u){for(Ad[l]=u,l=0;l<u.length;l++)_d.add(u[l])}var Ed=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sd={},Cd={};function I0(l){return Dr.call(Cd,l)?!0:Dr.call(Sd,l)?!1:Ed.test(l)?Cd[l]=!0:(Sd[l]=!0,!1)}function Tu(l,u,h){if(I0(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function Ci(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function jr(l,u,h,v){if(v===null)l.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+v)}}function ln(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ns(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Td(l,u,h){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var b=v.get,E=v.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(P){h=""+P,E.call(this,P)}}),Object.defineProperty(l,u,{enumerable:v.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Pt(l){if(!l._valueTracker){var u=Ns(l)?"checked":"value";l._valueTracker=Td(l,u,""+l[u])}}function lc(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),v="";return l&&(v=Ns(l)?l.checked?"true":"false":l.value),l=v,l!==h?(u.setValue(l),!0):!1}function so(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var cc=/[\n"\\]/g;function si(l){return l.replace(cc,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Iu(l,u,h,v,b,E,P,U){l.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?l.type=P:l.removeAttribute("type"),u!=null?P==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+ln(u)):l.value!==""+ln(u)&&(l.value=""+ln(u)):P!=="submit"&&P!=="reset"||l.removeAttribute("value"),u!=null?Id(l,P,ln(u)):h!=null?Id(l,P,ln(h)):v!=null&&l.removeAttribute("value"),b==null&&E!=null&&(l.defaultChecked=!!E),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?l.name=""+ln(U):l.removeAttribute("name")}function O0(l,u,h,v,b,E,P,U){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(l.type=E),u!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||u!=null)){Pt(l);return}h=h!=null?""+ln(h):"",u=u!=null?""+ln(u):h,U||u===l.value||(l.value=u),l.defaultValue=u}v=v??b,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=U?l.checked:!!v,l.defaultChecked=!!v,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.name=P),Pt(l)}function Id(l,u,h){u==="number"&&so(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function ks(l,u,h,v){if(l=l.options,u){u={};for(var b=0;b<h.length;b++)u["$"+h[b]]=!0;for(h=0;h<l.length;h++)b=u.hasOwnProperty("$"+l[h].value),l[h].selected!==b&&(l[h].selected=b),b&&v&&(l[h].defaultSelected=!0)}else{for(h=""+ln(h),u=null,b=0;b<l.length;b++){if(l[b].value===h){l[b].selected=!0,v&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function R0(l,u,h){if(u!=null&&(u=""+ln(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+ln(h):""}function Ms(l,u,h,v){if(u==null){if(v!=null){if(h!=null)throw Error(n(92));if(_e(v)){if(1<v.length)throw Error(n(93));v=v[0]}h=v}h==null&&(h=""),u=h}h=ln(u),l.defaultValue=h,v=l.textContent,v===h&&v!==""&&v!==null&&(l.value=v),Pt(l)}function li(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var P0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Od(l,u,h){var v=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?v?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":v?l.setProperty(u,h):typeof h!="number"||h===0||P0.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function Rd(l,u,h){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,h!=null){for(var v in h)!h.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var b in u)v=u[b],u.hasOwnProperty(b)&&h[b]!==v&&Od(l,b,v)}else for(var E in u)u.hasOwnProperty(E)&&Od(l,E,u[E])}function Ou(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ru(l){return js.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Ca(){}var Pd=null;function Xi(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ls=null,lo=null;function uc(l){var u=Ki(l);if(u&&(l=u.stateNode)){var h=l[sn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Iu(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+si(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var v=h[u];if(v!==l&&v.form===l.form){var b=v[sn]||null;if(!b)throw Error(n(90));Iu(v,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<h.length;u++)v=h[u],v.form===l.form&&lc(v)}break e;case"textarea":R0(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&ks(l,!!h.multiple,u,!1)}}}var Pu=!1;function Bs(l,u,h){if(Pu)return l(u,h);Pu=!0;try{var v=l(u);return v}finally{if(Pu=!1,(Ls!==null||lo!==null)&&(Sg(),Ls&&(u=Ls,l=lo,lo=Ls=null,uc(u),l)))for(u=0;u<l.length;u++)uc(l[u])}}function Ta(l,u){var h=l.stateNode;if(h===null)return null;var v=h[sn]||null;if(v===null)return null;h=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(n(231,u,typeof h));return h}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(Yi)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){fc=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch{fc=!1}var co=null,Dd=null,dc=null;function Nd(){if(dc)return dc;var l,u=Dd,h=u.length,v,b="value"in co?co.value:co.textContent,E=b.length;for(l=0;l<h&&u[l]===b[l];l++);var P=h-l;for(v=1;v<=P&&u[h-v]===b[E-v];v++);return dc=b.slice(l,1<v?1-v:void 0)}function hc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Bo(){return!0}function Ia(){return!1}function bn(l){function u(h,v,b,E,P){this._reactName=h,this._targetInst=b,this.type=v,this.nativeEvent=E,this.target=P,this.currentTarget=null;for(var U in l)l.hasOwnProperty(U)&&(h=l[U],this[U]=h?h(E):E[U]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Bo:Ia,this.isPropagationStopped=Ia,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),u}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=bn(zo),zs=p({},zo,{view:0,detail:0}),kd=bn(zs),Us,Du,fo,Nu=p({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==fo&&(fo&&l.type==="mousemove"?(Us=l.screenX-fo.screenX,Du=l.screenY-fo.screenY):Du=Us=0,fo=l),Us)},movementY:function(l){return"movementY"in l?l.movementY:Du}}),Md=bn(Nu),pc=p({},Nu,{dataTransfer:0}),N0=bn(pc),k0=p({},zs,{relatedTarget:0}),gc=bn(k0),jd=p({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),M0=bn(jd),ku=p({},zo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),j0=bn(ku),L0=p({},zo,{data:0}),ho=bn(L0),B0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F0(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=U0[l])?!!u[l]:!1}function Fs(){return F0}var Xn=p({},zs,{key:function(l){if(l.key){var u=B0[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=hc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?z0[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(l){return l.type==="keypress"?hc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?hc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),V0=bn(Xn),H0=p({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uo=bn(H0),x=p({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),I=bn(x),k=p({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=bn(k),Q=p({},Nu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=bn(Q),ye=p({},zo,{newState:0,oldState:0}),Ke=bn(ye),Er=[9,13,27,32],At=Yi&&"CompositionEvent"in window,nr=null;Yi&&"documentMode"in document&&(nr=document.documentMode);var Qi=Yi&&"TextEvent"in window&&!nr,po=Yi&&(!At||nr&&8<nr&&11>=nr),Oa=" ",Ra=!1;function vc(l,u){switch(l){case"keyup":return Er.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mu(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ju=!1;function PB(l,u){switch(l){case"compositionend":return Mu(u);case"keypress":return u.which!==32?null:(Ra=!0,Oa);case"textInput":return l=u.data,l===Oa&&Ra?null:l;default:return null}}function DB(l,u){if(ju)return l==="compositionend"||!At&&vc(l,u)?(l=Nd(),dc=Dd=co=null,ju=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return po&&u.locale!=="ko"?null:u.data;default:return null}}var NB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XC(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!NB[l.type]:u==="textarea"}function YC(l,u,h,v){Ls?lo?lo.push(v):lo=[v]:Ls=v,u=Dg(u,"onChange"),0<u.length&&(h=new uo("onChange","change",null,h,v),l.push({event:h,listeners:u}))}var Ld=null,Bd=null;function kB(l){D3(l,0)}function $0(l){var u=Si(l);if(lc(u))return l}function QC(l,u){if(l==="change")return u}var ZC=!1;if(Yi){var Ay;if(Yi){var Ey="oninput"in document;if(!Ey){var JC=document.createElement("div");JC.setAttribute("oninput","return;"),Ey=typeof JC.oninput=="function"}Ay=Ey}else Ay=!1;ZC=Ay&&(!document.documentMode||9<document.documentMode)}function eT(){Ld&&(Ld.detachEvent("onpropertychange",tT),Bd=Ld=null)}function tT(l){if(l.propertyName==="value"&&$0(Bd)){var u=[];YC(u,Bd,l,Xi(l)),Bs(kB,u)}}function MB(l,u,h){l==="focusin"?(eT(),Ld=u,Bd=h,Ld.attachEvent("onpropertychange",tT)):l==="focusout"&&eT()}function jB(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return $0(Bd)}function LB(l,u){if(l==="click")return $0(u)}function BB(l,u){if(l==="input"||l==="change")return $0(u)}function zB(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ti=typeof Object.is=="function"?Object.is:zB;function zd(l,u){if(Ti(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),v=Object.keys(u);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var b=h[v];if(!Dr.call(u,b)||!Ti(l[b],u[b]))return!1}return!0}function rT(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function nT(l,u){var h=rT(l);l=0;for(var v;h;){if(h.nodeType===3){if(v=l+h.textContent.length,l<=u&&v>=u)return{node:h,offset:u-l};l=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=rT(h)}}function iT(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?iT(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function aT(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=so(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=so(l.document)}return u}function Sy(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var UB=Yi&&"documentMode"in document&&11>=document.documentMode,Lu=null,Cy=null,Ud=null,Ty=!1;function oT(l,u,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ty||Lu==null||Lu!==so(v)||(v=Lu,"selectionStart"in v&&Sy(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ud&&zd(Ud,v)||(Ud=v,v=Dg(Cy,"onSelect"),0<v.length&&(u=new uo("onSelect","select",null,u,h),l.push({event:u,listeners:v}),u.target=Lu)))}function mc(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var Bu={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionrun:mc("Transition","TransitionRun"),transitionstart:mc("Transition","TransitionStart"),transitioncancel:mc("Transition","TransitionCancel"),transitionend:mc("Transition","TransitionEnd")},Iy={},sT={};Yi&&(sT=document.createElement("div").style,"AnimationEvent"in window||(delete Bu.animationend.animation,delete Bu.animationiteration.animation,delete Bu.animationstart.animation),"TransitionEvent"in window||delete Bu.transitionend.transition);function yc(l){if(Iy[l])return Iy[l];if(!Bu[l])return l;var u=Bu[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in sT)return Iy[l]=u[h];return l}var lT=yc("animationend"),cT=yc("animationiteration"),uT=yc("animationstart"),FB=yc("transitionrun"),VB=yc("transitionstart"),HB=yc("transitioncancel"),fT=yc("transitionend"),dT=new Map,Oy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oy.push("scrollEnd");function Pa(l,u){dT.set(l,u),ao(u,[l])}var q0=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Zi=[],zu=0,Ry=0;function G0(){for(var l=zu,u=Ry=zu=0;u<l;){var h=Zi[u];Zi[u++]=null;var v=Zi[u];Zi[u++]=null;var b=Zi[u];Zi[u++]=null;var E=Zi[u];if(Zi[u++]=null,v!==null&&b!==null){var P=v.pending;P===null?b.next=b:(b.next=P.next,P.next=b),v.pending=b}E!==0&&hT(h,b,E)}}function W0(l,u,h,v){Zi[zu++]=l,Zi[zu++]=u,Zi[zu++]=h,Zi[zu++]=v,Ry|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function Py(l,u,h,v){return W0(l,u,h,v),K0(l)}function xc(l,u){return W0(l,null,null,u),K0(l)}function hT(l,u,h){l.lanes|=h;var v=l.alternate;v!==null&&(v.lanes|=h);for(var b=!1,E=l.return;E!==null;)E.childLanes|=h,v=E.alternate,v!==null&&(v.childLanes|=h),E.tag===22&&(l=E.stateNode,l===null||l._visibility&1||(b=!0)),l=E,E=E.return;return l.tag===3?(E=l.stateNode,b&&u!==null&&(b=31-Ar(h),l=E.hiddenUpdates,v=l[b],v===null?l[b]=[u]:v.push(u),u.lane=h|536870912),E):null}function K0(l){if(50<lh)throw lh=0,Ux=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Uu={};function $B(l,u,h,v){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(l,u,h,v){return new $B(l,u,h,v)}function Dy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Fo(l,u){var h=l.alternate;return h===null?(h=Ii(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function pT(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function X0(l,u,h,v,b,E){var P=0;if(v=l,typeof l=="function")Dy(l)&&(P=1);else if(typeof l=="string")P=Xz(l,h,Ee.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case j:return l=Ii(31,h,u,b),l.elementType=j,l.lanes=E,l;case _:return bc(h.children,b,E,u);case A:P=8,b|=24;break;case S:return l=Ii(12,h,u,b|2),l.elementType=S,l.lanes=E,l;case M:return l=Ii(13,h,u,b),l.elementType=M,l.lanes=E,l;case L:return l=Ii(19,h,u,b),l.elementType=L,l.lanes=E,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case R:P=10;break e;case T:P=9;break e;case N:P=11;break e;case O:P=14;break e;case D:P=16,v=null;break e}P=29,h=Error(n(130,l===null?"null":typeof l,"")),v=null}return u=Ii(P,h,u,b),u.elementType=l,u.type=v,u.lanes=E,u}function bc(l,u,h,v){return l=Ii(7,l,v,u),l.lanes=h,l}function Ny(l,u,h){return l=Ii(6,l,null,u),l.lanes=h,l}function gT(l){var u=Ii(18,null,null,0);return u.stateNode=l,u}function ky(l,u,h){return u=Ii(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var vT=new WeakMap;function Ji(l,u){if(typeof l=="object"&&l!==null){var h=vT.get(l);return h!==void 0?h:(u={value:l,source:u,stack:Rs(u)},vT.set(l,u),u)}return{value:l,source:u,stack:Rs(u)}}var Fu=[],Vu=0,Y0=null,Fd=0,ea=[],ta=0,Vs=null,go=1,vo="";function Vo(l,u){Fu[Vu++]=Fd,Fu[Vu++]=Y0,Y0=l,Fd=u}function mT(l,u,h){ea[ta++]=go,ea[ta++]=vo,ea[ta++]=Vs,Vs=l;var v=go;l=vo;var b=32-Ar(v)-1;v&=~(1<<b),h+=1;var E=32-Ar(u)+b;if(30<E){var P=b-b%5;E=(v&(1<<P)-1).toString(32),v>>=P,b-=P,go=1<<32-Ar(u)+b|h<<b|v,vo=E+l}else go=1<<E|h<<b|v,vo=l}function My(l){l.return!==null&&(Vo(l,1),mT(l,1,0))}function jy(l){for(;l===Y0;)Y0=Fu[--Vu],Fu[Vu]=null,Fd=Fu[--Vu],Fu[Vu]=null;for(;l===Vs;)Vs=ea[--ta],ea[ta]=null,vo=ea[--ta],ea[ta]=null,go=ea[--ta],ea[ta]=null}function yT(l,u){ea[ta++]=go,ea[ta++]=vo,ea[ta++]=Vs,go=u.id,vo=u.overflow,Vs=l}var wn=null,Zt=null,ft=!1,Hs=null,ra=!1,Ly=Error(n(519));function $s(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vd(Ji(u,l)),Ly}function xT(l){var u=l.stateNode,h=l.type,v=l.memoizedProps;switch(u[kr]=l,u[sn]=v,h){case"dialog":nt("cancel",u),nt("close",u);break;case"iframe":case"object":case"embed":nt("load",u);break;case"video":case"audio":for(h=0;h<uh.length;h++)nt(uh[h],u);break;case"source":nt("error",u);break;case"img":case"image":case"link":nt("error",u),nt("load",u);break;case"details":nt("toggle",u);break;case"input":nt("invalid",u),O0(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":nt("invalid",u);break;case"textarea":nt("invalid",u),Ms(u,v.value,v.defaultValue,v.children)}h=v.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||v.suppressHydrationWarning===!0||j3(u.textContent,h)?(v.popover!=null&&(nt("beforetoggle",u),nt("toggle",u)),v.onScroll!=null&&nt("scroll",u),v.onScrollEnd!=null&&nt("scrollend",u),v.onClick!=null&&(u.onclick=Ca),u=!0):u=!1,u||$s(l,!0)}function bT(l){for(wn=l.return;wn;)switch(wn.tag){case 5:case 31:case 13:ra=!1;return;case 27:case 3:ra=!0;return;default:wn=wn.return}}function Hu(l){if(l!==wn)return!1;if(!ft)return bT(l),ft=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||t2(l.type,l.memoizedProps)),h=!h),h&&Zt&&$s(l),bT(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Zt=q3(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Zt=q3(l)}else u===27?(u=Zt,il(l.type)?(l=o2,o2=null,Zt=l):Zt=u):Zt=wn?ia(l.stateNode.nextSibling):null;return!0}function wc(){Zt=wn=null,ft=!1}function By(){var l=Hs;return l!==null&&(di===null?di=l:di.push.apply(di,l),Hs=null),l}function Vd(l){Hs===null?Hs=[l]:Hs.push(l)}var zy=G(null),_c=null,Ho=null;function qs(l,u,h){be(zy,u._currentValue),u._currentValue=h}function $o(l){l._currentValue=zy.current,Z(zy)}function Uy(l,u,h){for(;l!==null;){var v=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),l===h)break;l=l.return}}function Fy(l,u,h,v){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var E=b.dependencies;if(E!==null){var P=b.child;E=E.firstContext;e:for(;E!==null;){var U=E;E=b;for(var q=0;q<u.length;q++)if(U.context===u[q]){E.lanes|=h,U=E.alternate,U!==null&&(U.lanes|=h),Uy(E.return,h,l),v||(P=null);break e}E=U.next}}else if(b.tag===18){if(P=b.return,P===null)throw Error(n(341));P.lanes|=h,E=P.alternate,E!==null&&(E.lanes|=h),Uy(P,h,l),P=null}else P=b.child;if(P!==null)P.return=b;else for(P=b;P!==null;){if(P===l){P=null;break}if(b=P.sibling,b!==null){b.return=P.return,P=b;break}P=P.return}b=P}}function $u(l,u,h,v){l=null;for(var b=u,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var P=b.alternate;if(P===null)throw Error(n(387));if(P=P.memoizedProps,P!==null){var U=b.type;Ti(b.pendingProps.value,P.value)||(l!==null?l.push(U):l=[U])}}else if(b===at.current){if(P=b.alternate,P===null)throw Error(n(387));P.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(gh):l=[gh])}b=b.return}l!==null&&Fy(u,l,h,v),u.flags|=262144}function Q0(l){for(l=l.firstContext;l!==null;){if(!Ti(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ac(l){_c=l,Ho=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function _n(l){return wT(_c,l)}function Z0(l,u){return _c===null&&Ac(l),wT(l,u)}function wT(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Ho===null){if(l===null)throw Error(n(308));Ho=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Ho=Ho.next=u;return h}var qB=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,v){l.push(v)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},GB=t.unstable_scheduleCallback,WB=t.unstable_NormalPriority,Lr={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vy(){return{controller:new qB,data:new Map,refCount:0}}function Hd(l){l.refCount--,l.refCount===0&&GB(WB,function(){l.controller.abort()})}var $d=null,Hy=0,qu=0,Gu=null;function KB(l,u){if($d===null){var h=$d=[];Hy=0,qu=Gx(),Gu={status:"pending",value:void 0,then:function(v){h.push(v)}}}return Hy++,u.then(_T,_T),u}function _T(){if(--Hy===0&&$d!==null){Gu!==null&&(Gu.status="fulfilled");var l=$d;$d=null,qu=0,Gu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function XB(l,u){var h=[],v={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return l.then(function(){v.status="fulfilled",v.value=u;for(var b=0;b<h.length;b++)(0,h[b])(u)},function(b){for(v.status="rejected",v.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),v}var AT=Y.S;Y.S=function(l,u){o3=Kn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&KB(l,u),AT!==null&&AT(l,u)};var Ec=G(null);function $y(){var l=Ec.current;return l!==null?l:qt.pooledCache}function J0(l,u){u===null?be(Ec,Ec.current):be(Ec,u.pool)}function ET(){var l=$y();return l===null?null:{parent:Lr._currentValue,pool:l}}var Wu=Error(n(460)),qy=Error(n(474)),eg=Error(n(542)),tg={then:function(){}};function ST(l){return l=l.status,l==="fulfilled"||l==="rejected"}function CT(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(Ca,Ca),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,IT(l),l;default:if(typeof u.status=="string")u.then(Ca,Ca);else{if(l=qt,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(v){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=v}},function(v){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,IT(l),l}throw Cc=u,Wu}}function Sc(l){try{var u=l._init;return u(l._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Cc=h,Wu):h}}var Cc=null;function TT(){if(Cc===null)throw Error(n(459));var l=Cc;return Cc=null,l}function IT(l){if(l===Wu||l===eg)throw Error(n(483))}var Ku=null,qd=0;function rg(l){var u=qd;return qd+=1,Ku===null&&(Ku=[]),CT(Ku,l,u)}function Gd(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function ng(l,u){throw u.$$typeof===g?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function OT(l){function u(X,W){if(l){var ee=X.deletions;ee===null?(X.deletions=[W],X.flags|=16):ee.push(W)}}function h(X,W){if(!l)return null;for(;W!==null;)u(X,W),W=W.sibling;return null}function v(X){for(var W=new Map;X!==null;)X.key!==null?W.set(X.key,X):W.set(X.index,X),X=X.sibling;return W}function b(X,W){return X=Fo(X,W),X.index=0,X.sibling=null,X}function E(X,W,ee){return X.index=ee,l?(ee=X.alternate,ee!==null?(ee=ee.index,ee<W?(X.flags|=67108866,W):ee):(X.flags|=67108866,W)):(X.flags|=1048576,W)}function P(X){return l&&X.alternate===null&&(X.flags|=67108866),X}function U(X,W,ee,ue){return W===null||W.tag!==6?(W=Ny(ee,X.mode,ue),W.return=X,W):(W=b(W,ee),W.return=X,W)}function q(X,W,ee,ue){var Me=ee.type;return Me===_?le(X,W,ee.props.children,ue,ee.key):W!==null&&(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===D&&Sc(Me)===W.type)?(W=b(W,ee.props),Gd(W,ee),W.return=X,W):(W=X0(ee.type,ee.key,ee.props,null,X.mode,ue),Gd(W,ee),W.return=X,W)}function te(X,W,ee,ue){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=ky(ee,X.mode,ue),W.return=X,W):(W=b(W,ee.children||[]),W.return=X,W)}function le(X,W,ee,ue,Me){return W===null||W.tag!==7?(W=bc(ee,X.mode,ue,Me),W.return=X,W):(W=b(W,ee),W.return=X,W)}function fe(X,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Ny(""+W,X.mode,ee),W.return=X,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return ee=X0(W.type,W.key,W.props,null,X.mode,ee),Gd(ee,W),ee.return=X,ee;case w:return W=ky(W,X.mode,ee),W.return=X,W;case D:return W=Sc(W),fe(X,W,ee)}if(_e(W)||V(W))return W=bc(W,X.mode,ee,null),W.return=X,W;if(typeof W.then=="function")return fe(X,rg(W),ee);if(W.$$typeof===R)return fe(X,Z0(X,W),ee);ng(X,W)}return null}function re(X,W,ee,ue){var Me=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Me!==null?null:U(X,W,""+ee,ue);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return ee.key===Me?q(X,W,ee,ue):null;case w:return ee.key===Me?te(X,W,ee,ue):null;case D:return ee=Sc(ee),re(X,W,ee,ue)}if(_e(ee)||V(ee))return Me!==null?null:le(X,W,ee,ue,null);if(typeof ee.then=="function")return re(X,W,rg(ee),ue);if(ee.$$typeof===R)return re(X,W,Z0(X,ee),ue);ng(X,ee)}return null}function oe(X,W,ee,ue,Me){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return X=X.get(ee)||null,U(W,X,""+ue,Me);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case y:return X=X.get(ue.key===null?ee:ue.key)||null,q(W,X,ue,Me);case w:return X=X.get(ue.key===null?ee:ue.key)||null,te(W,X,ue,Me);case D:return ue=Sc(ue),oe(X,W,ee,ue,Me)}if(_e(ue)||V(ue))return X=X.get(ee)||null,le(W,X,ue,Me,null);if(typeof ue.then=="function")return oe(X,W,ee,rg(ue),Me);if(ue.$$typeof===R)return oe(X,W,ee,Z0(W,ue),Me);ng(W,ue)}return null}function Te(X,W,ee,ue){for(var Me=null,yt=null,Pe=W,Ye=W=0,st=null;Pe!==null&&Ye<ee.length;Ye++){Pe.index>Ye?(st=Pe,Pe=null):st=Pe.sibling;var xt=re(X,Pe,ee[Ye],ue);if(xt===null){Pe===null&&(Pe=st);break}l&&Pe&&xt.alternate===null&&u(X,Pe),W=E(xt,W,Ye),yt===null?Me=xt:yt.sibling=xt,yt=xt,Pe=st}if(Ye===ee.length)return h(X,Pe),ft&&Vo(X,Ye),Me;if(Pe===null){for(;Ye<ee.length;Ye++)Pe=fe(X,ee[Ye],ue),Pe!==null&&(W=E(Pe,W,Ye),yt===null?Me=Pe:yt.sibling=Pe,yt=Pe);return ft&&Vo(X,Ye),Me}for(Pe=v(Pe);Ye<ee.length;Ye++)st=oe(Pe,X,Ye,ee[Ye],ue),st!==null&&(l&&st.alternate!==null&&Pe.delete(st.key===null?Ye:st.key),W=E(st,W,Ye),yt===null?Me=st:yt.sibling=st,yt=st);return l&&Pe.forEach(function(cl){return u(X,cl)}),ft&&Vo(X,Ye),Me}function Ue(X,W,ee,ue){if(ee==null)throw Error(n(151));for(var Me=null,yt=null,Pe=W,Ye=W=0,st=null,xt=ee.next();Pe!==null&&!xt.done;Ye++,xt=ee.next()){Pe.index>Ye?(st=Pe,Pe=null):st=Pe.sibling;var cl=re(X,Pe,xt.value,ue);if(cl===null){Pe===null&&(Pe=st);break}l&&Pe&&cl.alternate===null&&u(X,Pe),W=E(cl,W,Ye),yt===null?Me=cl:yt.sibling=cl,yt=cl,Pe=st}if(xt.done)return h(X,Pe),ft&&Vo(X,Ye),Me;if(Pe===null){for(;!xt.done;Ye++,xt=ee.next())xt=fe(X,xt.value,ue),xt!==null&&(W=E(xt,W,Ye),yt===null?Me=xt:yt.sibling=xt,yt=xt);return ft&&Vo(X,Ye),Me}for(Pe=v(Pe);!xt.done;Ye++,xt=ee.next())xt=oe(Pe,X,Ye,xt.value,ue),xt!==null&&(l&&xt.alternate!==null&&Pe.delete(xt.key===null?Ye:xt.key),W=E(xt,W,Ye),yt===null?Me=xt:yt.sibling=xt,yt=xt);return l&&Pe.forEach(function(oU){return u(X,oU)}),ft&&Vo(X,Ye),Me}function Vt(X,W,ee,ue){if(typeof ee=="object"&&ee!==null&&ee.type===_&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:e:{for(var Me=ee.key;W!==null;){if(W.key===Me){if(Me=ee.type,Me===_){if(W.tag===7){h(X,W.sibling),ue=b(W,ee.props.children),ue.return=X,X=ue;break e}}else if(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===D&&Sc(Me)===W.type){h(X,W.sibling),ue=b(W,ee.props),Gd(ue,ee),ue.return=X,X=ue;break e}h(X,W);break}else u(X,W);W=W.sibling}ee.type===_?(ue=bc(ee.props.children,X.mode,ue,ee.key),ue.return=X,X=ue):(ue=X0(ee.type,ee.key,ee.props,null,X.mode,ue),Gd(ue,ee),ue.return=X,X=ue)}return P(X);case w:e:{for(Me=ee.key;W!==null;){if(W.key===Me)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){h(X,W.sibling),ue=b(W,ee.children||[]),ue.return=X,X=ue;break e}else{h(X,W);break}else u(X,W);W=W.sibling}ue=ky(ee,X.mode,ue),ue.return=X,X=ue}return P(X);case D:return ee=Sc(ee),Vt(X,W,ee,ue)}if(_e(ee))return Te(X,W,ee,ue);if(V(ee)){if(Me=V(ee),typeof Me!="function")throw Error(n(150));return ee=Me.call(ee),Ue(X,W,ee,ue)}if(typeof ee.then=="function")return Vt(X,W,rg(ee),ue);if(ee.$$typeof===R)return Vt(X,W,Z0(X,ee),ue);ng(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(h(X,W.sibling),ue=b(W,ee),ue.return=X,X=ue):(h(X,W),ue=Ny(ee,X.mode,ue),ue.return=X,X=ue),P(X)):h(X,W)}return function(X,W,ee,ue){try{qd=0;var Me=Vt(X,W,ee,ue);return Ku=null,Me}catch(Pe){if(Pe===Wu||Pe===eg)throw Pe;var yt=Ii(29,Pe,null,X.mode);return yt.lanes=ue,yt.return=X,yt}finally{}}}var Tc=OT(!0),RT=OT(!1),Gs=!1;function Gy(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wy(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ws(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ks(l,u,h){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(Et&2)!==0){var b=v.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),v.pending=u,u=K0(l),hT(l,null,h),u}return W0(l,v,u,h),K0(l)}function Wd(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var v=u.lanes;v&=l.pendingLanes,h|=v,u.lanes=h,bd(l,h)}}function Ky(l,u){var h=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var b=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var P={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?b=E=P:E=E.next=P,h=h.next}while(h!==null);E===null?b=E=u:E=E.next=u}else b=E=u;h={baseState:v.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:v.shared,callbacks:v.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var Xy=!1;function Kd(){if(Xy){var l=Gu;if(l!==null)throw l}}function Xd(l,u,h,v){Xy=!1;var b=l.updateQueue;Gs=!1;var E=b.firstBaseUpdate,P=b.lastBaseUpdate,U=b.shared.pending;if(U!==null){b.shared.pending=null;var q=U,te=q.next;q.next=null,P===null?E=te:P.next=te,P=q;var le=l.alternate;le!==null&&(le=le.updateQueue,U=le.lastBaseUpdate,U!==P&&(U===null?le.firstBaseUpdate=te:U.next=te,le.lastBaseUpdate=q))}if(E!==null){var fe=b.baseState;P=0,le=te=q=null,U=E;do{var re=U.lane&-536870913,oe=re!==U.lane;if(oe?(ot&re)===re:(v&re)===re){re!==0&&re===qu&&(Xy=!0),le!==null&&(le=le.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Te=l,Ue=U;re=u;var Vt=h;switch(Ue.tag){case 1:if(Te=Ue.payload,typeof Te=="function"){fe=Te.call(Vt,fe,re);break e}fe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ue.payload,re=typeof Te=="function"?Te.call(Vt,fe,re):Te,re==null)break e;fe=p({},fe,re);break e;case 2:Gs=!0}}re=U.callback,re!==null&&(l.flags|=64,oe&&(l.flags|=8192),oe=b.callbacks,oe===null?b.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:U.tag,payload:U.payload,callback:U.callback,next:null},le===null?(te=le=oe,q=fe):le=le.next=oe,P|=re;if(U=U.next,U===null){if(U=b.shared.pending,U===null)break;oe=U,U=oe.next,oe.next=null,b.lastBaseUpdate=oe,b.shared.pending=null}}while(!0);le===null&&(q=fe),b.baseState=q,b.firstBaseUpdate=te,b.lastBaseUpdate=le,E===null&&(b.shared.lanes=0),Js|=P,l.lanes=P,l.memoizedState=fe}}function PT(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function DT(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)PT(h[l],u)}var Xu=G(null),ig=G(0);function NT(l,u){l=Jo,be(ig,l),be(Xu,u),Jo=l|u.baseLanes}function Yy(){be(ig,Jo),be(Xu,Xu.current)}function Qy(){Jo=ig.current,Z(Xu),Z(ig)}var Oi=G(null),na=null;function Xs(l){var u=l.alternate;be(Sr,Sr.current&1),be(Oi,l),na===null&&(u===null||Xu.current!==null||u.memoizedState!==null)&&(na=l)}function Zy(l){be(Sr,Sr.current),be(Oi,l),na===null&&(na=l)}function kT(l){l.tag===22?(be(Sr,Sr.current),be(Oi,l),na===null&&(na=l)):Ys()}function Ys(){be(Sr,Sr.current),be(Oi,Oi.current)}function Ri(l){Z(Oi),na===l&&(na=null),Z(Sr)}var Sr=G(0);function ag(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||i2(h)||a2(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var qo=0,Xe=null,Ut=null,Br=null,og=!1,Yu=!1,Ic=!1,sg=0,Yd=0,Qu=null,YB=0;function pr(){throw Error(n(321))}function Jy(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Ti(l[h],u[h]))return!1;return!0}function ex(l,u,h,v,b,E){return qo=E,Xe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Y.H=l===null||l.memoizedState===null?m4:gx,Ic=!1,E=h(v,b),Ic=!1,Yu&&(E=jT(u,h,v,b)),MT(l),E}function MT(l){Y.H=Jd;var u=Ut!==null&&Ut.next!==null;if(qo=0,Br=Ut=Xe=null,og=!1,Yd=0,Qu=null,u)throw Error(n(300));l===null||zr||(l=l.dependencies,l!==null&&Q0(l)&&(zr=!0))}function jT(l,u,h,v){Xe=l;var b=0;do{if(Yu&&(Qu=null),Yd=0,Yu=!1,25<=b)throw Error(n(301));if(b+=1,Br=Ut=null,l.updateQueue!=null){var E=l.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}Y.H=y4,E=u(h,v)}while(Yu);return E}function QB(){var l=Y.H,u=l.useState()[0];return u=typeof u.then=="function"?Qd(u):u,l=l.useState()[0],(Ut!==null?Ut.memoizedState:null)!==l&&(Xe.flags|=1024),u}function tx(){var l=sg!==0;return sg=0,l}function rx(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function nx(l){if(og){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}og=!1}qo=0,Br=Ut=Xe=null,Yu=!1,Yd=sg=0,Qu=null}function Yn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?Xe.memoizedState=Br=l:Br=Br.next=l,Br}function Cr(){if(Ut===null){var l=Xe.alternate;l=l!==null?l.memoizedState:null}else l=Ut.next;var u=Br===null?Xe.memoizedState:Br.next;if(u!==null)Br=u,Ut=l;else{if(l===null)throw Xe.alternate===null?Error(n(467)):Error(n(310));Ut=l,l={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Br===null?Xe.memoizedState=Br=l:Br=Br.next=l}return Br}function lg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qd(l){var u=Yd;return Yd+=1,Qu===null&&(Qu=[]),l=CT(Qu,l,u),u=Xe,(Br===null?u.memoizedState:Br.next)===null&&(u=u.alternate,Y.H=u===null||u.memoizedState===null?m4:gx),l}function cg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Qd(l);if(l.$$typeof===R)return _n(l)}throw Error(n(438,String(l)))}function ix(l){var u=null,h=Xe.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var v=Xe.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=lg(),Xe.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),v=0;v<l;v++)h[v]=B;return u.index++,h}function Go(l,u){return typeof u=="function"?u(l):u}function ug(l){var u=Cr();return ax(u,Ut,l)}function ax(l,u,h){var v=l.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=h;var b=l.baseQueue,E=v.pending;if(E!==null){if(b!==null){var P=b.next;b.next=E.next,E.next=P}u.baseQueue=b=E,v.pending=null}if(E=l.baseState,b===null)l.memoizedState=E;else{u=b.next;var U=P=null,q=null,te=u,le=!1;do{var fe=te.lane&-536870913;if(fe!==te.lane?(ot&fe)===fe:(qo&fe)===fe){var re=te.revertLane;if(re===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),fe===qu&&(le=!0);else if((qo&re)===re){te=te.next,re===qu&&(le=!0);continue}else fe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(U=q=fe,P=E):q=q.next=fe,Xe.lanes|=re,Js|=re;fe=te.action,Ic&&h(E,fe),E=te.hasEagerState?te.eagerState:h(E,fe)}else re={lane:fe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(U=q=re,P=E):q=q.next=re,Xe.lanes|=fe,Js|=fe;te=te.next}while(te!==null&&te!==u);if(q===null?P=E:q.next=U,!Ti(E,l.memoizedState)&&(zr=!0,le&&(h=Gu,h!==null)))throw h;l.memoizedState=E,l.baseState=P,l.baseQueue=q,v.lastRenderedState=E}return b===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function ox(l){var u=Cr(),h=u.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var v=h.dispatch,b=h.pending,E=u.memoizedState;if(b!==null){h.pending=null;var P=b=b.next;do E=l(E,P.action),P=P.next;while(P!==b);Ti(E,u.memoizedState)||(zr=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),h.lastRenderedState=E}return[E,v]}function LT(l,u,h){var v=Xe,b=Cr(),E=ft;if(E){if(h===void 0)throw Error(n(407));h=h()}else h=u();var P=!Ti((Ut||b).memoizedState,h);if(P&&(b.memoizedState=h,zr=!0),b=b.queue,cx(UT.bind(null,v,b,l),[l]),b.getSnapshot!==u||P||Br!==null&&Br.memoizedState.tag&1){if(v.flags|=2048,Zu(9,{destroy:void 0},zT.bind(null,v,b,h,u),null),qt===null)throw Error(n(349));E||(qo&127)!==0||BT(v,u,h)}return h}function BT(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=Xe.updateQueue,u===null?(u=lg(),Xe.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function zT(l,u,h,v){u.value=h,u.getSnapshot=v,FT(u)&&VT(l)}function UT(l,u,h){return h(function(){FT(u)&&VT(l)})}function FT(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Ti(l,h)}catch{return!0}}function VT(l){var u=xc(l,2);u!==null&&hi(u,l,2)}function sx(l){var u=Yn();if(typeof l=="function"){var h=l;if(l=h(),Ic){Wi(!0);try{h()}finally{Wi(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:l},u}function HT(l,u,h,v){return l.baseState=h,ax(l,Ut,typeof v=="function"?v:Go)}function ZB(l,u,h,v,b){if(hg(l))throw Error(n(485));if(l=u.action,l!==null){var E={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){E.listeners.push(P)}};Y.T!==null?h(!0):E.isTransition=!1,v(E),h=u.pending,h===null?(E.next=u.pending=E,$T(u,E)):(E.next=h.next,u.pending=h.next=E)}}function $T(l,u){var h=u.action,v=u.payload,b=l.state;if(u.isTransition){var E=Y.T,P={};Y.T=P;try{var U=h(b,v),q=Y.S;q!==null&&q(P,U),qT(l,u,U)}catch(te){lx(l,u,te)}finally{E!==null&&P.types!==null&&(E.types=P.types),Y.T=E}}else try{E=h(b,v),qT(l,u,E)}catch(te){lx(l,u,te)}}function qT(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(v){GT(l,u,v)},function(v){return lx(l,u,v)}):GT(l,u,h)}function GT(l,u,h){u.status="fulfilled",u.value=h,WT(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,$T(l,h)))}function lx(l,u,h){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=h,WT(u),u=u.next;while(u!==v)}l.action=null}function WT(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function KT(l,u){return u}function XT(l,u){if(ft){var h=qt.formState;if(h!==null){e:{var v=Xe;if(ft){if(Zt){t:{for(var b=Zt,E=ra;b.nodeType!==8;){if(!E){b=null;break t}if(b=ia(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){Zt=ia(b.nextSibling),v=b.data==="F!";break e}}$s(v)}v=!1}v&&(u=h[0])}}return h=Yn(),h.memoizedState=h.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:KT,lastRenderedState:u},h.queue=v,h=p4.bind(null,Xe,v),v.dispatch=h,v=sx(!1),E=px.bind(null,Xe,!1,v.queue),v=Yn(),b={state:u,dispatch:null,action:l,pending:null},v.queue=b,h=ZB.bind(null,Xe,b,E,h),b.dispatch=h,v.memoizedState=l,[u,h,!1]}function YT(l){var u=Cr();return QT(u,Ut,l)}function QT(l,u,h){if(u=ax(l,u,KT)[0],l=ug(Go)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=Qd(u)}catch(P){throw P===Wu?eg:P}else v=u;u=Cr();var b=u.queue,E=b.dispatch;return h!==u.memoizedState&&(Xe.flags|=2048,Zu(9,{destroy:void 0},JB.bind(null,b,h),null)),[v,E,l]}function JB(l,u){l.action=u}function ZT(l){var u=Cr(),h=Ut;if(h!==null)return QT(u,h,l);Cr(),u=u.memoizedState,h=Cr();var v=h.queue.dispatch;return h.memoizedState=l,[u,v,!1]}function Zu(l,u,h,v){return l={tag:l,create:h,deps:v,inst:u,next:null},u=Xe.updateQueue,u===null&&(u=lg(),Xe.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(v=h.next,h.next=l,l.next=v,u.lastEffect=l),l}function JT(){return Cr().memoizedState}function fg(l,u,h,v){var b=Yn();Xe.flags|=l,b.memoizedState=Zu(1|u,{destroy:void 0},h,v===void 0?null:v)}function dg(l,u,h,v){var b=Cr();v=v===void 0?null:v;var E=b.memoizedState.inst;Ut!==null&&v!==null&&Jy(v,Ut.memoizedState.deps)?b.memoizedState=Zu(u,E,h,v):(Xe.flags|=l,b.memoizedState=Zu(1|u,E,h,v))}function e4(l,u){fg(8390656,8,l,u)}function cx(l,u){dg(2048,8,l,u)}function ez(l){Xe.flags|=4;var u=Xe.updateQueue;if(u===null)u=lg(),Xe.updateQueue=u,u.events=[l];else{var h=u.events;h===null?u.events=[l]:h.push(l)}}function t4(l){var u=Cr().memoizedState;return ez({ref:u,nextImpl:l}),function(){if((Et&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function r4(l,u){return dg(4,2,l,u)}function n4(l,u){return dg(4,4,l,u)}function i4(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function a4(l,u,h){h=h!=null?h.concat([l]):null,dg(4,4,i4.bind(null,u,l),h)}function ux(){}function o4(l,u){var h=Cr();u=u===void 0?null:u;var v=h.memoizedState;return u!==null&&Jy(u,v[1])?v[0]:(h.memoizedState=[l,u],l)}function s4(l,u){var h=Cr();u=u===void 0?null:u;var v=h.memoizedState;if(u!==null&&Jy(u,v[1]))return v[0];if(v=l(),Ic){Wi(!0);try{l()}finally{Wi(!1)}}return h.memoizedState=[v,u],v}function fx(l,u,h){return h===void 0||(qo&1073741824)!==0&&(ot&261930)===0?l.memoizedState=u:(l.memoizedState=h,l=l3(),Xe.lanes|=l,Js|=l,h)}function l4(l,u,h,v){return Ti(h,u)?h:Xu.current!==null?(l=fx(l,h,v),Ti(l,u)||(zr=!0),l):(qo&42)===0||(qo&1073741824)!==0&&(ot&261930)===0?(zr=!0,l.memoizedState=h):(l=l3(),Xe.lanes|=l,Js|=l,u)}function c4(l,u,h,v,b){var E=ie.p;ie.p=E!==0&&8>E?E:8;var P=Y.T,U={};Y.T=U,px(l,!1,u,h);try{var q=b(),te=Y.S;if(te!==null&&te(U,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var le=XB(q,v);Zd(l,u,le,Ni(l))}else Zd(l,u,v,Ni(l))}catch(fe){Zd(l,u,{then:function(){},status:"rejected",reason:fe},Ni())}finally{ie.p=E,P!==null&&U.types!==null&&(P.types=U.types),Y.T=P}}function tz(){}function dx(l,u,h,v){if(l.tag!==5)throw Error(n(476));var b=u4(l).queue;c4(l,b,u,K,h===null?tz:function(){return f4(l),h(v)})}function u4(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:K},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function f4(l){var u=u4(l);u.next===null&&(u=l.alternate.memoizedState),Zd(l,u.next.queue,{},Ni())}function hx(){return _n(gh)}function d4(){return Cr().memoizedState}function h4(){return Cr().memoizedState}function rz(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ni();l=Ws(h);var v=Ks(u,l,h);v!==null&&(hi(v,u,h),Wd(v,u,h)),u={cache:Vy()},l.payload=u;return}u=u.return}}function nz(l,u,h){var v=Ni();h={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},hg(l)?g4(u,h):(h=Py(l,u,h,v),h!==null&&(hi(h,l,v),v4(h,u,v)))}function p4(l,u,h){var v=Ni();Zd(l,u,h,v)}function Zd(l,u,h,v){var b={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(hg(l))g4(u,b);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var P=u.lastRenderedState,U=E(P,h);if(b.hasEagerState=!0,b.eagerState=U,Ti(U,P))return W0(l,u,b,0),qt===null&&G0(),!1}catch{}finally{}if(h=Py(l,u,b,v),h!==null)return hi(h,l,v),v4(h,u,v),!0}return!1}function px(l,u,h,v){if(v={lane:2,revertLane:Gx(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},hg(l)){if(u)throw Error(n(479))}else u=Py(l,h,v,2),u!==null&&hi(u,l,2)}function hg(l){var u=l.alternate;return l===Xe||u!==null&&u===Xe}function g4(l,u){Yu=og=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function v4(l,u,h){if((h&4194048)!==0){var v=u.lanes;v&=l.pendingLanes,h|=v,u.lanes=h,bd(l,h)}}var Jd={readContext:_n,use:cg,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useLayoutEffect:pr,useInsertionEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useSyncExternalStore:pr,useId:pr,useHostTransitionStatus:pr,useFormState:pr,useActionState:pr,useOptimistic:pr,useMemoCache:pr,useCacheRefresh:pr};Jd.useEffectEvent=pr;var m4={readContext:_n,use:cg,useCallback:function(l,u){return Yn().memoizedState=[l,u===void 0?null:u],l},useContext:_n,useEffect:e4,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,fg(4194308,4,i4.bind(null,u,l),h)},useLayoutEffect:function(l,u){return fg(4194308,4,l,u)},useInsertionEffect:function(l,u){fg(4,2,l,u)},useMemo:function(l,u){var h=Yn();u=u===void 0?null:u;var v=l();if(Ic){Wi(!0);try{l()}finally{Wi(!1)}}return h.memoizedState=[v,u],v},useReducer:function(l,u,h){var v=Yn();if(h!==void 0){var b=h(u);if(Ic){Wi(!0);try{h(u)}finally{Wi(!1)}}}else b=u;return v.memoizedState=v.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},v.queue=l,l=l.dispatch=nz.bind(null,Xe,l),[v.memoizedState,l]},useRef:function(l){var u=Yn();return l={current:l},u.memoizedState=l},useState:function(l){l=sx(l);var u=l.queue,h=p4.bind(null,Xe,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:ux,useDeferredValue:function(l,u){var h=Yn();return fx(h,l,u)},useTransition:function(){var l=sx(!1);return l=c4.bind(null,Xe,l.queue,!0,!1),Yn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var v=Xe,b=Yn();if(ft){if(h===void 0)throw Error(n(407));h=h()}else{if(h=u(),qt===null)throw Error(n(349));(ot&127)!==0||BT(v,u,h)}b.memoizedState=h;var E={value:h,getSnapshot:u};return b.queue=E,e4(UT.bind(null,v,E,l),[l]),v.flags|=2048,Zu(9,{destroy:void 0},zT.bind(null,v,E,h,u),null),h},useId:function(){var l=Yn(),u=qt.identifierPrefix;if(ft){var h=vo,v=go;h=(v&~(1<<32-Ar(v)-1)).toString(32)+h,u="_"+u+"R_"+h,h=sg++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=YB++,u="_"+u+"r_"+h.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:hx,useFormState:XT,useActionState:XT,useOptimistic:function(l){var u=Yn();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=px.bind(null,Xe,!0,h),h.dispatch=u,[l,u]},useMemoCache:ix,useCacheRefresh:function(){return Yn().memoizedState=rz.bind(null,Xe)},useEffectEvent:function(l){var u=Yn(),h={impl:l};return u.memoizedState=h,function(){if((Et&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},gx={readContext:_n,use:cg,useCallback:o4,useContext:_n,useEffect:cx,useImperativeHandle:a4,useInsertionEffect:r4,useLayoutEffect:n4,useMemo:s4,useReducer:ug,useRef:JT,useState:function(){return ug(Go)},useDebugValue:ux,useDeferredValue:function(l,u){var h=Cr();return l4(h,Ut.memoizedState,l,u)},useTransition:function(){var l=ug(Go)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Qd(l),u]},useSyncExternalStore:LT,useId:d4,useHostTransitionStatus:hx,useFormState:YT,useActionState:YT,useOptimistic:function(l,u){var h=Cr();return HT(h,Ut,l,u)},useMemoCache:ix,useCacheRefresh:h4};gx.useEffectEvent=t4;var y4={readContext:_n,use:cg,useCallback:o4,useContext:_n,useEffect:cx,useImperativeHandle:a4,useInsertionEffect:r4,useLayoutEffect:n4,useMemo:s4,useReducer:ox,useRef:JT,useState:function(){return ox(Go)},useDebugValue:ux,useDeferredValue:function(l,u){var h=Cr();return Ut===null?fx(h,l,u):l4(h,Ut.memoizedState,l,u)},useTransition:function(){var l=ox(Go)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Qd(l),u]},useSyncExternalStore:LT,useId:d4,useHostTransitionStatus:hx,useFormState:ZT,useActionState:ZT,useOptimistic:function(l,u){var h=Cr();return Ut!==null?HT(h,Ut,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:ix,useCacheRefresh:h4};y4.useEffectEvent=t4;function vx(l,u,h,v){u=l.memoizedState,h=h(v,u),h=h==null?u:p({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var mx={enqueueSetState:function(l,u,h){l=l._reactInternals;var v=Ni(),b=Ws(v);b.payload=u,h!=null&&(b.callback=h),u=Ks(l,b,v),u!==null&&(hi(u,l,v),Wd(u,l,v))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var v=Ni(),b=Ws(v);b.tag=1,b.payload=u,h!=null&&(b.callback=h),u=Ks(l,b,v),u!==null&&(hi(u,l,v),Wd(u,l,v))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Ni(),v=Ws(h);v.tag=2,u!=null&&(v.callback=u),u=Ks(l,v,h),u!==null&&(hi(u,l,h),Wd(u,l,h))}};function x4(l,u,h,v,b,E,P){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,E,P):u.prototype&&u.prototype.isPureReactComponent?!zd(h,v)||!zd(b,E):!0}function b4(l,u,h,v){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,v),u.state!==l&&mx.enqueueReplaceState(u,u.state,null)}function Oc(l,u){var h=u;if("ref"in u){h={};for(var v in u)v!=="ref"&&(h[v]=u[v])}if(l=l.defaultProps){h===u&&(h=p({},h));for(var b in l)h[b]===void 0&&(h[b]=l[b])}return h}function w4(l){q0(l)}function _4(l){console.error(l)}function A4(l){q0(l)}function pg(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function E4(l,u,h){try{var v=l.onCaughtError;v(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function yx(l,u,h){return h=Ws(h),h.tag=3,h.payload={element:null},h.callback=function(){pg(l,u)},h}function S4(l){return l=Ws(l),l.tag=3,l}function C4(l,u,h,v){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var E=v.value;l.payload=function(){return b(E)},l.callback=function(){E4(u,h,v)}}var P=h.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(l.callback=function(){E4(u,h,v),typeof b!="function"&&(el===null?el=new Set([this]):el.add(this));var U=v.stack;this.componentDidCatch(v.value,{componentStack:U!==null?U:""})})}function iz(l,u,h,v,b){if(h.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=h.alternate,u!==null&&$u(u,h,b,!0),h=Oi.current,h!==null){switch(h.tag){case 31:case 13:return na===null?Cg():h.alternate===null&&gr===0&&(gr=3),h.flags&=-257,h.flags|=65536,h.lanes=b,v===tg?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([v]):u.add(v),Hx(l,v,b)),!1;case 22:return h.flags|=65536,v===tg?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([v]):h.add(v)),Hx(l,v,b)),!1}throw Error(n(435,h.tag))}return Hx(l,v,b),Cg(),!1}if(ft)return u=Oi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,v!==Ly&&(l=Error(n(422),{cause:v}),Vd(Ji(l,h)))):(v!==Ly&&(u=Error(n(423),{cause:v}),Vd(Ji(u,h))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,v=Ji(v,h),b=yx(l.stateNode,v,b),Ky(l,b),gr!==4&&(gr=2)),!1;var E=Error(n(520),{cause:v});if(E=Ji(E,h),sh===null?sh=[E]:sh.push(E),gr!==4&&(gr=2),u===null)return!0;v=Ji(v,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=b&-b,h.lanes|=l,l=yx(h.stateNode,v,l),Ky(h,l),!1;case 1:if(u=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(el===null||!el.has(E))))return h.flags|=65536,b&=-b,h.lanes|=b,b=S4(b),C4(b,l,h,v),Ky(h,b),!1}h=h.return}while(h!==null);return!1}var xx=Error(n(461)),zr=!1;function An(l,u,h,v){u.child=l===null?RT(u,null,h,v):Tc(u,l.child,h,v)}function T4(l,u,h,v,b){h=h.render;var E=u.ref;if("ref"in v){var P={};for(var U in v)U!=="ref"&&(P[U]=v[U])}else P=v;return Ac(u),v=ex(l,u,h,P,E,b),U=tx(),l!==null&&!zr?(rx(l,u,b),Wo(l,u,b)):(ft&&U&&My(u),u.flags|=1,An(l,u,v,b),u.child)}function I4(l,u,h,v,b){if(l===null){var E=h.type;return typeof E=="function"&&!Dy(E)&&E.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=E,O4(l,u,E,v,b)):(l=X0(h.type,null,v,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(E=l.child,!Tx(l,b)){var P=E.memoizedProps;if(h=h.compare,h=h!==null?h:zd,h(P,v)&&l.ref===u.ref)return Wo(l,u,b)}return u.flags|=1,l=Fo(E,v),l.ref=u.ref,l.return=u,u.child=l}function O4(l,u,h,v,b){if(l!==null){var E=l.memoizedProps;if(zd(E,v)&&l.ref===u.ref)if(zr=!1,u.pendingProps=v=E,Tx(l,b))(l.flags&131072)!==0&&(zr=!0);else return u.lanes=l.lanes,Wo(l,u,b)}return bx(l,u,h,v,b)}function R4(l,u,h,v){var b=v.children,E=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((u.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,l!==null){for(v=u.child=l.child,b=0;v!==null;)b=b|v.lanes|v.childLanes,v=v.sibling;v=b&~E}else v=0,u.child=null;return P4(l,u,E,h,v)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&J0(u,E!==null?E.cachePool:null),E!==null?NT(u,E):Yy(),kT(u);else return v=u.lanes=536870912,P4(l,u,E!==null?E.baseLanes|h:h,h,v)}else E!==null?(J0(u,E.cachePool),NT(u,E),Ys(),u.memoizedState=null):(l!==null&&J0(u,null),Yy(),Ys());return An(l,u,b,h),u.child}function eh(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function P4(l,u,h,v,b){var E=$y();return E=E===null?null:{parent:Lr._currentValue,pool:E},u.memoizedState={baseLanes:h,cachePool:E},l!==null&&J0(u,null),Yy(),kT(u),l!==null&&$u(l,u,v,!0),u.childLanes=b,null}function gg(l,u){return u=mg({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function D4(l,u,h){return Tc(u,l.child,null,h),l=gg(u,u.pendingProps),l.flags|=2,Ri(u),u.memoizedState=null,l}function az(l,u,h){var v=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(ft){if(v.mode==="hidden")return l=gg(u,v),u.lanes=536870912,eh(null,l);if(Zy(u),(l=Zt)?(l=$3(l,ra),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Vs!==null?{id:go,overflow:vo}:null,retryLane:536870912,hydrationErrors:null},h=gT(l),h.return=u,u.child=h,wn=u,Zt=null)):l=null,l===null)throw $s(u);return u.lanes=536870912,null}return gg(u,v)}var E=l.memoizedState;if(E!==null){var P=E.dehydrated;if(Zy(u),b)if(u.flags&256)u.flags&=-257,u=D4(l,u,h);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(zr||$u(l,u,h,!1),b=(h&l.childLanes)!==0,zr||b){if(v=qt,v!==null&&(P=wd(v,h),P!==0&&P!==E.retryLane))throw E.retryLane=P,xc(l,P),hi(v,l,P),xx;Cg(),u=D4(l,u,h)}else l=E.treeContext,Zt=ia(P.nextSibling),wn=u,ft=!0,Hs=null,ra=!1,l!==null&&yT(u,l),u=gg(u,v),u.flags|=4096;return u}return l=Fo(l.child,{mode:v.mode,children:v.children}),l.ref=u.ref,u.child=l,l.return=u,l}function vg(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function bx(l,u,h,v,b){return Ac(u),h=ex(l,u,h,v,void 0,b),v=tx(),l!==null&&!zr?(rx(l,u,b),Wo(l,u,b)):(ft&&v&&My(u),u.flags|=1,An(l,u,h,b),u.child)}function N4(l,u,h,v,b,E){return Ac(u),u.updateQueue=null,h=jT(u,v,h,b),MT(l),v=tx(),l!==null&&!zr?(rx(l,u,E),Wo(l,u,E)):(ft&&v&&My(u),u.flags|=1,An(l,u,h,E),u.child)}function k4(l,u,h,v,b){if(Ac(u),u.stateNode===null){var E=Uu,P=h.contextType;typeof P=="object"&&P!==null&&(E=_n(P)),E=new h(v,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=mx,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=v,E.state=u.memoizedState,E.refs={},Gy(u),P=h.contextType,E.context=typeof P=="object"&&P!==null?_n(P):Uu,E.state=u.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(vx(u,h,P,v),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(P=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),P!==E.state&&mx.enqueueReplaceState(E,E.state,null),Xd(u,v,E,b),Kd(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(l===null){E=u.stateNode;var U=u.memoizedProps,q=Oc(h,U);E.props=q;var te=E.context,le=h.contextType;P=Uu,typeof le=="object"&&le!==null&&(P=_n(le));var fe=h.getDerivedStateFromProps;le=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function",U=u.pendingProps!==U,le||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(U||te!==P)&&b4(u,E,v,P),Gs=!1;var re=u.memoizedState;E.state=re,Xd(u,v,E,b),Kd(),te=u.memoizedState,U||re!==te||Gs?(typeof fe=="function"&&(vx(u,h,fe,v),te=u.memoizedState),(q=Gs||x4(u,h,q,v,re,te,P))?(le||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=te),E.props=v,E.state=te,E.context=P,v=q):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{E=u.stateNode,Wy(l,u),P=u.memoizedProps,le=Oc(h,P),E.props=le,fe=u.pendingProps,re=E.context,te=h.contextType,q=Uu,typeof te=="object"&&te!==null&&(q=_n(te)),U=h.getDerivedStateFromProps,(te=typeof U=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==fe||re!==q)&&b4(u,E,v,q),Gs=!1,re=u.memoizedState,E.state=re,Xd(u,v,E,b),Kd();var oe=u.memoizedState;P!==fe||re!==oe||Gs||l!==null&&l.dependencies!==null&&Q0(l.dependencies)?(typeof U=="function"&&(vx(u,h,U,v),oe=u.memoizedState),(le=Gs||x4(u,h,le,v,re,oe,q)||l!==null&&l.dependencies!==null&&Q0(l.dependencies))?(te||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(v,oe,q),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(v,oe,q)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=oe),E.props=v,E.state=oe,E.context=q,v=le):(typeof E.componentDidUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),v=!1)}return E=v,vg(l,u),v=(u.flags&128)!==0,E||v?(E=u.stateNode,h=v&&typeof h.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,l!==null&&v?(u.child=Tc(u,l.child,null,b),u.child=Tc(u,null,h,b)):An(l,u,h,b),u.memoizedState=E.state,l=u.child):l=Wo(l,u,b),l}function M4(l,u,h,v){return wc(),u.flags|=256,An(l,u,h,v),u.child}var wx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _x(l){return{baseLanes:l,cachePool:ET()}}function Ax(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=Di),l}function j4(l,u,h){var v=u.pendingProps,b=!1,E=(u.flags&128)!==0,P;if((P=E)||(P=l!==null&&l.memoizedState===null?!1:(Sr.current&2)!==0),P&&(b=!0,u.flags&=-129),P=(u.flags&32)!==0,u.flags&=-33,l===null){if(ft){if(b?Xs(u):Ys(),(l=Zt)?(l=$3(l,ra),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Vs!==null?{id:go,overflow:vo}:null,retryLane:536870912,hydrationErrors:null},h=gT(l),h.return=u,u.child=h,wn=u,Zt=null)):l=null,l===null)throw $s(u);return a2(l)?u.lanes=32:u.lanes=536870912,null}var U=v.children;return v=v.fallback,b?(Ys(),b=u.mode,U=mg({mode:"hidden",children:U},b),v=bc(v,b,h,null),U.return=u,v.return=u,U.sibling=v,u.child=U,v=u.child,v.memoizedState=_x(h),v.childLanes=Ax(l,P,h),u.memoizedState=wx,eh(null,v)):(Xs(u),Ex(u,U))}var q=l.memoizedState;if(q!==null&&(U=q.dehydrated,U!==null)){if(E)u.flags&256?(Xs(u),u.flags&=-257,u=Sx(l,u,h)):u.memoizedState!==null?(Ys(),u.child=l.child,u.flags|=128,u=null):(Ys(),U=v.fallback,b=u.mode,v=mg({mode:"visible",children:v.children},b),U=bc(U,b,h,null),U.flags|=2,v.return=u,U.return=u,v.sibling=U,u.child=v,Tc(u,l.child,null,h),v=u.child,v.memoizedState=_x(h),v.childLanes=Ax(l,P,h),u.memoizedState=wx,u=eh(null,v));else if(Xs(u),a2(U)){if(P=U.nextSibling&&U.nextSibling.dataset,P)var te=P.dgst;P=te,v=Error(n(419)),v.stack="",v.digest=P,Vd({value:v,source:null,stack:null}),u=Sx(l,u,h)}else if(zr||$u(l,u,h,!1),P=(h&l.childLanes)!==0,zr||P){if(P=qt,P!==null&&(v=wd(P,h),v!==0&&v!==q.retryLane))throw q.retryLane=v,xc(l,v),hi(P,l,v),xx;i2(U)||Cg(),u=Sx(l,u,h)}else i2(U)?(u.flags|=192,u.child=l.child,u=null):(l=q.treeContext,Zt=ia(U.nextSibling),wn=u,ft=!0,Hs=null,ra=!1,l!==null&&yT(u,l),u=Ex(u,v.children),u.flags|=4096);return u}return b?(Ys(),U=v.fallback,b=u.mode,q=l.child,te=q.sibling,v=Fo(q,{mode:"hidden",children:v.children}),v.subtreeFlags=q.subtreeFlags&65011712,te!==null?U=Fo(te,U):(U=bc(U,b,h,null),U.flags|=2),U.return=u,v.return=u,v.sibling=U,u.child=v,eh(null,v),v=u.child,U=l.child.memoizedState,U===null?U=_x(h):(b=U.cachePool,b!==null?(q=Lr._currentValue,b=b.parent!==q?{parent:q,pool:q}:b):b=ET(),U={baseLanes:U.baseLanes|h,cachePool:b}),v.memoizedState=U,v.childLanes=Ax(l,P,h),u.memoizedState=wx,eh(l.child,v)):(Xs(u),h=l.child,l=h.sibling,h=Fo(h,{mode:"visible",children:v.children}),h.return=u,h.sibling=null,l!==null&&(P=u.deletions,P===null?(u.deletions=[l],u.flags|=16):P.push(l)),u.child=h,u.memoizedState=null,h)}function Ex(l,u){return u=mg({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function mg(l,u){return l=Ii(22,l,null,u),l.lanes=0,l}function Sx(l,u,h){return Tc(u,l.child,null,h),l=Ex(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function L4(l,u,h){l.lanes|=u;var v=l.alternate;v!==null&&(v.lanes|=u),Uy(l.return,u,h)}function Cx(l,u,h,v,b,E){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:b,treeForkCount:E}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=v,P.tail=h,P.tailMode=b,P.treeForkCount=E)}function B4(l,u,h){var v=u.pendingProps,b=v.revealOrder,E=v.tail;v=v.children;var P=Sr.current,U=(P&2)!==0;if(U?(P=P&1|2,u.flags|=128):P&=1,be(Sr,P),An(l,u,v,h),v=ft?Fd:0,!U&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&L4(l,h,u);else if(l.tag===19)L4(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(h=u.child,b=null;h!==null;)l=h.alternate,l!==null&&ag(l)===null&&(b=h),h=h.sibling;h=b,h===null?(b=u.child,u.child=null):(b=h.sibling,h.sibling=null),Cx(u,!1,b,h,E,v);break;case"backwards":case"unstable_legacy-backwards":for(h=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&ag(l)===null){u.child=b;break}l=b.sibling,b.sibling=h,h=b,b=l}Cx(u,!0,h,null,E,v);break;case"together":Cx(u,!1,null,null,void 0,v);break;default:u.memoizedState=null}return u.child}function Wo(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),Js|=u.lanes,(h&u.childLanes)===0)if(l!==null){if($u(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,h=Fo(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Fo(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Tx(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&Q0(l)))}function oz(l,u,h){switch(u.tag){case 3:br(u,u.stateNode.containerInfo),qs(u,Lr,l.memoizedState.cache),wc();break;case 27:case 5:$e(u);break;case 4:br(u,u.stateNode.containerInfo);break;case 10:qs(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Zy(u),null;break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(Xs(u),u.flags|=128,null):(h&u.child.childLanes)!==0?j4(l,u,h):(Xs(u),l=Wo(l,u,h),l!==null?l.sibling:null);Xs(u);break;case 19:var b=(l.flags&128)!==0;if(v=(h&u.childLanes)!==0,v||($u(l,u,h,!1),v=(h&u.childLanes)!==0),b){if(v)return B4(l,u,h);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),be(Sr,Sr.current),v)break;return null;case 22:return u.lanes=0,R4(l,u,h,u.pendingProps);case 24:qs(u,Lr,l.memoizedState.cache)}return Wo(l,u,h)}function z4(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)zr=!0;else{if(!Tx(l,h)&&(u.flags&128)===0)return zr=!1,oz(l,u,h);zr=(l.flags&131072)!==0}else zr=!1,ft&&(u.flags&1048576)!==0&&mT(u,Fd,u.index);switch(u.lanes=0,u.tag){case 16:e:{var v=u.pendingProps;if(l=Sc(u.elementType),u.type=l,typeof l=="function")Dy(l)?(v=Oc(l,v),u.tag=1,u=k4(null,u,l,v,h)):(u.tag=0,u=bx(null,u,l,v,h));else{if(l!=null){var b=l.$$typeof;if(b===N){u.tag=11,u=T4(null,u,l,v,h);break e}else if(b===O){u.tag=14,u=I4(null,u,l,v,h);break e}}throw u=he(l)||l,Error(n(306,u,""))}}return u;case 0:return bx(l,u,u.type,u.pendingProps,h);case 1:return v=u.type,b=Oc(v,u.pendingProps),k4(l,u,v,b,h);case 3:e:{if(br(u,u.stateNode.containerInfo),l===null)throw Error(n(387));v=u.pendingProps;var E=u.memoizedState;b=E.element,Wy(l,u),Xd(u,v,null,h);var P=u.memoizedState;if(v=P.cache,qs(u,Lr,v),v!==E.cache&&Fy(u,[Lr],h,!0),Kd(),v=P.element,E.isDehydrated)if(E={element:v,isDehydrated:!1,cache:P.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=M4(l,u,v,h);break e}else if(v!==b){b=Ji(Error(n(424)),u),Vd(b),u=M4(l,u,v,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Zt=ia(l.firstChild),wn=u,ft=!0,Hs=null,ra=!0,h=RT(u,null,v,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(wc(),v===b){u=Wo(l,u,h);break e}An(l,u,v,h)}u=u.child}return u;case 26:return vg(l,u),l===null?(h=Y3(u.type,null,u.pendingProps,null))?u.memoizedState=h:ft||(h=u.type,l=u.pendingProps,v=Ng(We.current).createElement(h),v[kr]=u,v[sn]=l,En(v,h,l),Mr(v),u.stateNode=v):u.memoizedState=Y3(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return $e(u),l===null&&ft&&(v=u.stateNode=W3(u.type,u.pendingProps,We.current),wn=u,ra=!0,b=Zt,il(u.type)?(o2=b,Zt=ia(v.firstChild)):Zt=b),An(l,u,u.pendingProps.children,h),vg(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&ft&&((b=v=Zt)&&(v=jz(v,u.type,u.pendingProps,ra),v!==null?(u.stateNode=v,wn=u,Zt=ia(v.firstChild),ra=!1,b=!0):b=!1),b||$s(u)),$e(u),b=u.type,E=u.pendingProps,P=l!==null?l.memoizedProps:null,v=E.children,t2(b,E)?v=null:P!==null&&t2(b,P)&&(u.flags|=32),u.memoizedState!==null&&(b=ex(l,u,QB,null,null,h),gh._currentValue=b),vg(l,u),An(l,u,v,h),u.child;case 6:return l===null&&ft&&((l=h=Zt)&&(h=Lz(h,u.pendingProps,ra),h!==null?(u.stateNode=h,wn=u,Zt=null,l=!0):l=!1),l||$s(u)),null;case 13:return j4(l,u,h);case 4:return br(u,u.stateNode.containerInfo),v=u.pendingProps,l===null?u.child=Tc(u,null,v,h):An(l,u,v,h),u.child;case 11:return T4(l,u,u.type,u.pendingProps,h);case 7:return An(l,u,u.pendingProps,h),u.child;case 8:return An(l,u,u.pendingProps.children,h),u.child;case 12:return An(l,u,u.pendingProps.children,h),u.child;case 10:return v=u.pendingProps,qs(u,u.type,v.value),An(l,u,v.children,h),u.child;case 9:return b=u.type._context,v=u.pendingProps.children,Ac(u),b=_n(b),v=v(b),u.flags|=1,An(l,u,v,h),u.child;case 14:return I4(l,u,u.type,u.pendingProps,h);case 15:return O4(l,u,u.type,u.pendingProps,h);case 19:return B4(l,u,h);case 31:return az(l,u,h);case 22:return R4(l,u,h,u.pendingProps);case 24:return Ac(u),v=_n(Lr),l===null?(b=$y(),b===null&&(b=qt,E=Vy(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=h),b=E),u.memoizedState={parent:v,cache:b},Gy(u),qs(u,Lr,b)):((l.lanes&h)!==0&&(Wy(l,u),Xd(u,null,null,h),Kd()),b=l.memoizedState,E=u.memoizedState,b.parent!==v?(b={parent:v,cache:v},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),qs(u,Lr,v)):(v=E.cache,qs(u,Lr,v),v!==b.cache&&Fy(u,[Lr],h,!0))),An(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Ko(l){l.flags|=4}function Ix(l,u,h,v,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(d3())l.flags|=8192;else throw Cc=tg,qy}else l.flags&=-16777217}function U4(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!tI(u))if(d3())l.flags|=8192;else throw Cc=tg,qy}function yg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?E0():536870912,l.lanes|=u,rf|=u)}function th(l,u){if(!ft)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Jt(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,v=0;if(u)for(var b=l.child;b!==null;)h|=b.lanes|b.childLanes,v|=b.subtreeFlags&65011712,v|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)h|=b.lanes|b.childLanes,v|=b.subtreeFlags,v|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=v,l.childLanes=h,u}function sz(l,u,h){var v=u.pendingProps;switch(jy(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(u),null;case 1:return Jt(u),null;case 3:return h=u.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),$o(Lr),me(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Hu(u)?Ko(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,By())),Jt(u),null;case 26:var b=u.type,E=u.memoizedState;return l===null?(Ko(u),E!==null?(Jt(u),U4(u,E)):(Jt(u),Ix(u,b,null,v,h))):E?E!==l.memoizedState?(Ko(u),Jt(u),U4(u,E)):(Jt(u),u.flags&=-16777217):(l=l.memoizedProps,l!==v&&Ko(u),Jt(u),Ix(u,b,l,v,h)),null;case 27:if(Qe(u),h=We.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&Ko(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Jt(u),null}l=Ee.current,Hu(u)?xT(u):(l=W3(b,v,h),u.stateNode=l,Ko(u))}return Jt(u),null;case 5:if(Qe(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&Ko(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Jt(u),null}if(E=Ee.current,Hu(u))xT(u);else{var P=Ng(We.current);switch(E){case 1:E=P.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:E=P.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":E=P.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":E=P.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":E=P.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof v.is=="string"?P.createElement("select",{is:v.is}):P.createElement("select"),v.multiple?E.multiple=!0:v.size&&(E.size=v.size);break;default:E=typeof v.is=="string"?P.createElement(b,{is:v.is}):P.createElement(b)}}E[kr]=u,E[sn]=v;e:for(P=u.child;P!==null;){if(P.tag===5||P.tag===6)E.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===u)break e;for(;P.sibling===null;){if(P.return===null||P.return===u)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}u.stateNode=E;e:switch(En(E,b,v),b){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Ko(u)}}return Jt(u),Ix(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,h),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==v&&Ko(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(n(166));if(l=We.current,Hu(u)){if(l=u.stateNode,h=u.memoizedProps,v=null,b=wn,b!==null)switch(b.tag){case 27:case 5:v=b.memoizedProps}l[kr]=u,l=!!(l.nodeValue===h||v!==null&&v.suppressHydrationWarning===!0||j3(l.nodeValue,h)),l||$s(u,!0)}else l=Ng(l).createTextNode(v),l[kr]=u,u.stateNode=l}return Jt(u),null;case 31:if(h=u.memoizedState,l===null||l.memoizedState!==null){if(v=Hu(u),h!==null){if(l===null){if(!v)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[kr]=u}else wc(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Jt(u),l=!1}else h=By(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=h),l=!0;if(!l)return u.flags&256?(Ri(u),u):(Ri(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Jt(u),null;case 13:if(v=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=Hu(u),v!==null&&v.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[kr]=u}else wc(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Jt(u),b=!1}else b=By(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(Ri(u),u):(Ri(u),null)}return Ri(u),(u.flags&128)!==0?(u.lanes=h,u):(h=v!==null,l=l!==null&&l.memoizedState!==null,h&&(v=u.child,b=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(b=v.alternate.memoizedState.cachePool.pool),E=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(E=v.memoizedState.cachePool.pool),E!==b&&(v.flags|=2048)),h!==l&&h&&(u.child.flags|=8192),yg(u,u.updateQueue),Jt(u),null);case 4:return me(),l===null&&Yx(u.stateNode.containerInfo),Jt(u),null;case 10:return $o(u.type),Jt(u),null;case 19:if(Z(Sr),v=u.memoizedState,v===null)return Jt(u),null;if(b=(u.flags&128)!==0,E=v.rendering,E===null)if(b)th(v,!1);else{if(gr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(E=ag(l),E!==null){for(u.flags|=128,th(v,!1),l=E.updateQueue,u.updateQueue=l,yg(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)pT(h,l),h=h.sibling;return be(Sr,Sr.current&1|2),ft&&Vo(u,v.treeForkCount),u.child}l=l.sibling}v.tail!==null&&Kn()>Ag&&(u.flags|=128,b=!0,th(v,!1),u.lanes=4194304)}else{if(!b)if(l=ag(E),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,yg(u,l),th(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!ft)return Jt(u),null}else 2*Kn()-v.renderingStartTime>Ag&&h!==536870912&&(u.flags|=128,b=!0,th(v,!1),u.lanes=4194304);v.isBackwards?(E.sibling=u.child,u.child=E):(l=v.last,l!==null?l.sibling=E:u.child=E,v.last=E)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=Kn(),l.sibling=null,h=Sr.current,be(Sr,b?h&1|2:h&1),ft&&Vo(u,v.treeForkCount),l):(Jt(u),null);case 22:case 23:return Ri(u),Qy(),v=u.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(h&536870912)!==0&&(u.flags&128)===0&&(Jt(u),u.subtreeFlags&6&&(u.flags|=8192)):Jt(u),h=u.updateQueue,h!==null&&yg(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==h&&(u.flags|=2048),l!==null&&Z(Ec),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),$o(Lr),Jt(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function lz(l,u){switch(jy(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return $o(Lr),me(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Qe(u),null;case 31:if(u.memoizedState!==null){if(Ri(u),u.alternate===null)throw Error(n(340));wc()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Ri(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));wc()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Z(Sr),null;case 4:return me(),null;case 10:return $o(u.type),null;case 22:case 23:return Ri(u),Qy(),l!==null&&Z(Ec),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return $o(Lr),null;case 25:return null;default:return null}}function F4(l,u){switch(jy(u),u.tag){case 3:$o(Lr),me();break;case 26:case 27:case 5:Qe(u);break;case 4:me();break;case 31:u.memoizedState!==null&&Ri(u);break;case 13:Ri(u);break;case 19:Z(Sr);break;case 10:$o(u.type);break;case 22:case 23:Ri(u),Qy(),l!==null&&Z(Ec);break;case 24:$o(Lr)}}function rh(l,u){try{var h=u.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var b=v.next;h=b;do{if((h.tag&l)===l){v=void 0;var E=h.create,P=h.inst;v=E(),P.destroy=v}h=h.next}while(h!==b)}}catch(U){Nt(u,u.return,U)}}function Qs(l,u,h){try{var v=u.updateQueue,b=v!==null?v.lastEffect:null;if(b!==null){var E=b.next;v=E;do{if((v.tag&l)===l){var P=v.inst,U=P.destroy;if(U!==void 0){P.destroy=void 0,b=u;var q=h,te=U;try{te()}catch(le){Nt(b,q,le)}}}v=v.next}while(v!==E)}}catch(le){Nt(u,u.return,le)}}function V4(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{DT(u,h)}catch(v){Nt(l,l.return,v)}}}function H4(l,u,h){h.props=Oc(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(v){Nt(l,u,v)}}function nh(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof h=="function"?l.refCleanup=h(v):h.current=v}}catch(b){Nt(l,u,b)}}function mo(l,u){var h=l.ref,v=l.refCleanup;if(h!==null)if(typeof v=="function")try{v()}catch(b){Nt(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Nt(l,u,b)}else h.current=null}function $4(l){var u=l.type,h=l.memoizedProps,v=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&v.focus();break e;case"img":h.src?v.src=h.src:h.srcSet&&(v.srcset=h.srcSet)}}catch(b){Nt(l,l.return,b)}}function Ox(l,u,h){try{var v=l.stateNode;Rz(v,l.type,h,u),v[sn]=u}catch(b){Nt(l,l.return,b)}}function q4(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&il(l.type)||l.tag===4}function Rx(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||q4(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&il(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Px(l,u,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=Ca));else if(v!==4&&(v===27&&il(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(Px(l,u,h),l=l.sibling;l!==null;)Px(l,u,h),l=l.sibling}function xg(l,u,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(v!==4&&(v===27&&il(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(xg(l,u,h),l=l.sibling;l!==null;)xg(l,u,h),l=l.sibling}function G4(l){var u=l.stateNode,h=l.memoizedProps;try{for(var v=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);En(u,v,h),u[kr]=l,u[sn]=h}catch(E){Nt(l,l.return,E)}}var Xo=!1,Ur=!1,Dx=!1,W4=typeof WeakSet=="function"?WeakSet:Set,cn=null;function cz(l,u){if(l=l.containerInfo,Jx=Ug,l=aT(l),Sy(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var b=v.anchorOffset,E=v.focusNode;v=v.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var P=0,U=-1,q=-1,te=0,le=0,fe=l,re=null;t:for(;;){for(var oe;fe!==h||b!==0&&fe.nodeType!==3||(U=P+b),fe!==E||v!==0&&fe.nodeType!==3||(q=P+v),fe.nodeType===3&&(P+=fe.nodeValue.length),(oe=fe.firstChild)!==null;)re=fe,fe=oe;for(;;){if(fe===l)break t;if(re===h&&++te===b&&(U=P),re===E&&++le===v&&(q=P),(oe=fe.nextSibling)!==null)break;fe=re,re=fe.parentNode}fe=oe}h=U===-1||q===-1?null:{start:U,end:q}}else h=null}h=h||{start:0,end:0}}else h=null;for(e2={focusedElem:l,selectionRange:h},Ug=!1,cn=u;cn!==null;)if(u=cn,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,cn=l;else for(;cn!==null;){switch(u=cn,E=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(h=0;h<l.length;h++)b=l[h],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&E!==null){l=void 0,h=u,b=E.memoizedProps,E=E.memoizedState,v=h.stateNode;try{var Te=Oc(h.type,b);l=v.getSnapshotBeforeUpdate(Te,E),v.__reactInternalSnapshotBeforeUpdate=l}catch(Ue){Nt(h,h.return,Ue)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)n2(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":n2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,cn=l;break}cn=u.return}}function K4(l,u,h){var v=h.flags;switch(h.tag){case 0:case 11:case 15:Qo(l,h),v&4&&rh(5,h);break;case 1:if(Qo(l,h),v&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(P){Nt(h,h.return,P)}else{var b=Oc(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(P){Nt(h,h.return,P)}}v&64&&V4(h),v&512&&nh(h,h.return);break;case 3:if(Qo(l,h),v&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{DT(l,u)}catch(P){Nt(h,h.return,P)}}break;case 27:u===null&&v&4&&G4(h);case 26:case 5:Qo(l,h),u===null&&v&4&&$4(h),v&512&&nh(h,h.return);break;case 12:Qo(l,h);break;case 31:Qo(l,h),v&4&&Q4(l,h);break;case 13:Qo(l,h),v&4&&Z4(l,h),v&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=yz.bind(null,h),Bz(l,h))));break;case 22:if(v=h.memoizedState!==null||Xo,!v){u=u!==null&&u.memoizedState!==null||Ur,b=Xo;var E=Ur;Xo=v,(Ur=u)&&!E?Zo(l,h,(h.subtreeFlags&8772)!==0):Qo(l,h),Xo=b,Ur=E}break;case 30:break;default:Qo(l,h)}}function X4(l){var u=l.alternate;u!==null&&(l.alternate=null,X4(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Cu(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ir=null,ci=!1;function Yo(l,u,h){for(h=h.child;h!==null;)Y4(l,u,h),h=h.sibling}function Y4(l,u,h){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(_a,h)}catch{}switch(h.tag){case 26:Ur||mo(h,u),Yo(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Ur||mo(h,u);var v=ir,b=ci;il(h.type)&&(ir=h.stateNode,ci=!1),Yo(l,u,h),dh(h.stateNode),ir=v,ci=b;break;case 5:Ur||mo(h,u);case 6:if(v=ir,b=ci,ir=null,Yo(l,u,h),ir=v,ci=b,ir!==null)if(ci)try{(ir.nodeType===9?ir.body:ir.nodeName==="HTML"?ir.ownerDocument.body:ir).removeChild(h.stateNode)}catch(E){Nt(h,u,E)}else try{ir.removeChild(h.stateNode)}catch(E){Nt(h,u,E)}break;case 18:ir!==null&&(ci?(l=ir,V3(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),ff(l)):V3(ir,h.stateNode));break;case 4:v=ir,b=ci,ir=h.stateNode.containerInfo,ci=!0,Yo(l,u,h),ir=v,ci=b;break;case 0:case 11:case 14:case 15:Qs(2,h,u),Ur||Qs(4,h,u),Yo(l,u,h);break;case 1:Ur||(mo(h,u),v=h.stateNode,typeof v.componentWillUnmount=="function"&&H4(h,u,v)),Yo(l,u,h);break;case 21:Yo(l,u,h);break;case 22:Ur=(v=Ur)||h.memoizedState!==null,Yo(l,u,h),Ur=v;break;default:Yo(l,u,h)}}function Q4(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{ff(l)}catch(h){Nt(u,u.return,h)}}}function Z4(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{ff(l)}catch(h){Nt(u,u.return,h)}}function uz(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new W4),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new W4),u;default:throw Error(n(435,l.tag))}}function bg(l,u){var h=uz(l);u.forEach(function(v){if(!h.has(v)){h.add(v);var b=xz.bind(null,l,v);v.then(b,b)}})}function ui(l,u){var h=u.deletions;if(h!==null)for(var v=0;v<h.length;v++){var b=h[v],E=l,P=u,U=P;e:for(;U!==null;){switch(U.tag){case 27:if(il(U.type)){ir=U.stateNode,ci=!1;break e}break;case 5:ir=U.stateNode,ci=!1;break e;case 3:case 4:ir=U.stateNode.containerInfo,ci=!0;break e}U=U.return}if(ir===null)throw Error(n(160));Y4(E,P,b),ir=null,ci=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)J4(u,l),u=u.sibling}var Da=null;function J4(l,u){var h=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ui(u,l),fi(l),v&4&&(Qs(3,l,l.return),rh(3,l),Qs(5,l,l.return));break;case 1:ui(u,l),fi(l),v&512&&(Ur||h===null||mo(h,h.return)),v&64&&Xo&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?v:h.concat(v))));break;case 26:var b=Da;if(ui(u,l),fi(l),v&512&&(Ur||h===null||mo(h,h.return)),v&4){var E=h!==null?h.memoizedState:null;if(v=l.memoizedState,h===null)if(v===null)if(l.stateNode===null){e:{v=l.type,h=l.memoizedProps,b=b.ownerDocument||b;t:switch(v){case"title":E=b.getElementsByTagName("title")[0],(!E||E[ro]||E[kr]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(v),b.head.insertBefore(E,b.querySelector("head > title"))),En(E,v,h),E[kr]=l,Mr(E),v=E;break e;case"link":var P=J3("link","href",b).get(v+(h.href||""));if(P){for(var U=0;U<P.length;U++)if(E=P[U],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){P.splice(U,1);break t}}E=b.createElement(v),En(E,v,h),b.head.appendChild(E);break;case"meta":if(P=J3("meta","content",b).get(v+(h.content||""))){for(U=0;U<P.length;U++)if(E=P[U],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){P.splice(U,1);break t}}E=b.createElement(v),En(E,v,h),b.head.appendChild(E);break;default:throw Error(n(468,v))}E[kr]=l,Mr(E),v=E}l.stateNode=v}else eI(b,l.type,l.stateNode);else l.stateNode=Z3(b,v,l.memoizedProps);else E!==v?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,v===null?eI(b,l.type,l.stateNode):Z3(b,v,l.memoizedProps)):v===null&&l.stateNode!==null&&Ox(l,l.memoizedProps,h.memoizedProps)}break;case 27:ui(u,l),fi(l),v&512&&(Ur||h===null||mo(h,h.return)),h!==null&&v&4&&Ox(l,l.memoizedProps,h.memoizedProps);break;case 5:if(ui(u,l),fi(l),v&512&&(Ur||h===null||mo(h,h.return)),l.flags&32){b=l.stateNode;try{li(b,"")}catch(Te){Nt(l,l.return,Te)}}v&4&&l.stateNode!=null&&(b=l.memoizedProps,Ox(l,b,h!==null?h.memoizedProps:b)),v&1024&&(Dx=!0);break;case 6:if(ui(u,l),fi(l),v&4){if(l.stateNode===null)throw Error(n(162));v=l.memoizedProps,h=l.stateNode;try{h.nodeValue=v}catch(Te){Nt(l,l.return,Te)}}break;case 3:if(jg=null,b=Da,Da=kg(u.containerInfo),ui(u,l),Da=b,fi(l),v&4&&h!==null&&h.memoizedState.isDehydrated)try{ff(u.containerInfo)}catch(Te){Nt(l,l.return,Te)}Dx&&(Dx=!1,e3(l));break;case 4:v=Da,Da=kg(l.stateNode.containerInfo),ui(u,l),fi(l),Da=v;break;case 12:ui(u,l),fi(l);break;case 31:ui(u,l),fi(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,bg(l,v)));break;case 13:ui(u,l),fi(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(_g=Kn()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,bg(l,v)));break;case 22:b=l.memoizedState!==null;var q=h!==null&&h.memoizedState!==null,te=Xo,le=Ur;if(Xo=te||b,Ur=le||q,ui(u,l),Ur=le,Xo=te,fi(l),v&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(h===null||q||Xo||Ur||Rc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){q=h=u;try{if(E=q.stateNode,b)P=E.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{U=q.stateNode;var fe=q.memoizedProps.style,re=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;U.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Te){Nt(q,q.return,Te)}}}else if(u.tag===6){if(h===null){q=u;try{q.stateNode.nodeValue=b?"":q.memoizedProps}catch(Te){Nt(q,q.return,Te)}}}else if(u.tag===18){if(h===null){q=u;try{var oe=q.stateNode;b?H3(oe,!0):H3(q.stateNode,!1)}catch(Te){Nt(q,q.return,Te)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=l.updateQueue,v!==null&&(h=v.retryQueue,h!==null&&(v.retryQueue=null,bg(l,h))));break;case 19:ui(u,l),fi(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,bg(l,v)));break;case 30:break;case 21:break;default:ui(u,l),fi(l)}}function fi(l){var u=l.flags;if(u&2){try{for(var h,v=l.return;v!==null;){if(q4(v)){h=v;break}v=v.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var b=h.stateNode,E=Rx(l);xg(l,E,b);break;case 5:var P=h.stateNode;h.flags&32&&(li(P,""),h.flags&=-33);var U=Rx(l);xg(l,U,P);break;case 3:case 4:var q=h.stateNode.containerInfo,te=Rx(l);Px(l,te,q);break;default:throw Error(n(161))}}catch(le){Nt(l,l.return,le)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function e3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;e3(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Qo(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)K4(l,u.alternate,u),u=u.sibling}function Rc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Qs(4,u,u.return),Rc(u);break;case 1:mo(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&H4(u,u.return,h),Rc(u);break;case 27:dh(u.stateNode);case 26:case 5:mo(u,u.return),Rc(u);break;case 22:u.memoizedState===null&&Rc(u);break;case 30:Rc(u);break;default:Rc(u)}l=l.sibling}}function Zo(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,b=l,E=u,P=E.flags;switch(E.tag){case 0:case 11:case 15:Zo(b,E,h),rh(4,E);break;case 1:if(Zo(b,E,h),v=E,b=v.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(te){Nt(v,v.return,te)}if(v=E,b=v.updateQueue,b!==null){var U=v.stateNode;try{var q=b.shared.hiddenCallbacks;if(q!==null)for(b.shared.hiddenCallbacks=null,b=0;b<q.length;b++)PT(q[b],U)}catch(te){Nt(v,v.return,te)}}h&&P&64&&V4(E),nh(E,E.return);break;case 27:G4(E);case 26:case 5:Zo(b,E,h),h&&v===null&&P&4&&$4(E),nh(E,E.return);break;case 12:Zo(b,E,h);break;case 31:Zo(b,E,h),h&&P&4&&Q4(b,E);break;case 13:Zo(b,E,h),h&&P&4&&Z4(b,E);break;case 22:E.memoizedState===null&&Zo(b,E,h),nh(E,E.return);break;case 30:break;default:Zo(b,E,h)}u=u.sibling}}function Nx(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Hd(h))}function kx(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Hd(l))}function Na(l,u,h,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)t3(l,u,h,v),u=u.sibling}function t3(l,u,h,v){var b=u.flags;switch(u.tag){case 0:case 11:case 15:Na(l,u,h,v),b&2048&&rh(9,u);break;case 1:Na(l,u,h,v);break;case 3:Na(l,u,h,v),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Hd(l)));break;case 12:if(b&2048){Na(l,u,h,v),l=u.stateNode;try{var E=u.memoizedProps,P=E.id,U=E.onPostCommit;typeof U=="function"&&U(P,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(q){Nt(u,u.return,q)}}else Na(l,u,h,v);break;case 31:Na(l,u,h,v);break;case 13:Na(l,u,h,v);break;case 23:break;case 22:E=u.stateNode,P=u.alternate,u.memoizedState!==null?E._visibility&2?Na(l,u,h,v):ih(l,u):E._visibility&2?Na(l,u,h,v):(E._visibility|=2,Ju(l,u,h,v,(u.subtreeFlags&10256)!==0||!1)),b&2048&&Nx(P,u);break;case 24:Na(l,u,h,v),b&2048&&kx(u.alternate,u);break;default:Na(l,u,h,v)}}function Ju(l,u,h,v,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var E=l,P=u,U=h,q=v,te=P.flags;switch(P.tag){case 0:case 11:case 15:Ju(E,P,U,q,b),rh(8,P);break;case 23:break;case 22:var le=P.stateNode;P.memoizedState!==null?le._visibility&2?Ju(E,P,U,q,b):ih(E,P):(le._visibility|=2,Ju(E,P,U,q,b)),b&&te&2048&&Nx(P.alternate,P);break;case 24:Ju(E,P,U,q,b),b&&te&2048&&kx(P.alternate,P);break;default:Ju(E,P,U,q,b)}u=u.sibling}}function ih(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,v=u,b=v.flags;switch(v.tag){case 22:ih(h,v),b&2048&&Nx(v.alternate,v);break;case 24:ih(h,v),b&2048&&kx(v.alternate,v);break;default:ih(h,v)}u=u.sibling}}var ah=8192;function ef(l,u,h){if(l.subtreeFlags&ah)for(l=l.child;l!==null;)r3(l,u,h),l=l.sibling}function r3(l,u,h){switch(l.tag){case 26:ef(l,u,h),l.flags&ah&&l.memoizedState!==null&&Yz(h,Da,l.memoizedState,l.memoizedProps);break;case 5:ef(l,u,h);break;case 3:case 4:var v=Da;Da=kg(l.stateNode.containerInfo),ef(l,u,h),Da=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=ah,ah=16777216,ef(l,u,h),ah=v):ef(l,u,h));break;default:ef(l,u,h)}}function n3(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function oh(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];cn=v,a3(v,l)}n3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)i3(l),l=l.sibling}function i3(l){switch(l.tag){case 0:case 11:case 15:oh(l),l.flags&2048&&Qs(9,l,l.return);break;case 3:oh(l);break;case 12:oh(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,wg(l)):oh(l);break;default:oh(l)}}function wg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];cn=v,a3(v,l)}n3(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Qs(8,u,u.return),wg(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,wg(u));break;default:wg(u)}l=l.sibling}}function a3(l,u){for(;cn!==null;){var h=cn;switch(h.tag){case 0:case 11:case 15:Qs(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var v=h.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Hd(h.memoizedState.cache)}if(v=h.child,v!==null)v.return=h,cn=v;else e:for(h=l;cn!==null;){v=cn;var b=v.sibling,E=v.return;if(X4(v),v===h){cn=null;break e}if(b!==null){b.return=E,cn=b;break e}cn=E}}}var fz={getCacheForType:function(l){var u=_n(Lr),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h},cacheSignal:function(){return _n(Lr).controller.signal}},dz=typeof WeakMap=="function"?WeakMap:Map,Et=0,qt=null,rt=null,ot=0,Dt=0,Pi=null,Zs=!1,tf=!1,Mx=!1,Jo=0,gr=0,Js=0,Pc=0,jx=0,Di=0,rf=0,sh=null,di=null,Lx=!1,_g=0,o3=0,Ag=1/0,Eg=null,el=null,Kr=0,tl=null,nf=null,es=0,Bx=0,zx=null,s3=null,lh=0,Ux=null;function Ni(){return(Et&2)!==0&&ot!==0?ot&-ot:Y.T!==null?Gx():S0()}function l3(){if(Di===0)if((ot&536870912)===0||ft){var l=ic;ic<<=1,(ic&3932160)===0&&(ic=262144),Di=l}else Di=536870912;return l=Oi.current,l!==null&&(l.flags|=32),Di}function hi(l,u,h){(l===qt&&(Dt===2||Dt===9)||l.cancelPendingCommit!==null)&&(af(l,0),rl(l,ot,Di,!1)),ac(l,h),((Et&2)===0||l!==qt)&&(l===qt&&((Et&2)===0&&(Pc|=h),gr===4&&rl(l,ot,Di,!1)),yo(l))}function c3(l,u,h){if((Et&6)!==0)throw Error(n(327));var v=!h&&(u&127)===0&&(u&l.expiredLanes)===0||Aa(l,u),b=v?gz(l,u):Vx(l,u,!0),E=v;do{if(b===0){tf&&!v&&rl(l,u,0,!1);break}else{if(h=l.current.alternate,E&&!hz(h)){b=Vx(l,u,!1),E=!1;continue}if(b===2){if(E=u,l.errorRecoveryDisabledLanes&E)var P=0;else P=l.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){u=P;e:{var U=l;b=sh;var q=U.current.memoizedState.isDehydrated;if(q&&(af(U,P).flags|=256),P=Vx(U,P,!1),P!==2){if(Mx&&!q){U.errorRecoveryDisabledLanes|=E,Pc|=E,b=4;break e}E=di,di=b,E!==null&&(di===null?di=E:di.push.apply(di,E))}b=P}if(E=!1,b!==2)continue}}if(b===1){af(l,0),rl(l,u,0,!0);break}e:{switch(v=l,E=b,E){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:rl(v,u,Di,!Zs);break e;case 2:di=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=_g+300-Kn(),10<b)){if(rl(v,u,Di,!Zs),Ja(v,0,!0)!==0)break e;es=u,v.timeoutHandle=U3(u3.bind(null,v,h,di,Eg,Lx,u,Di,Pc,rf,Zs,E,"Throttled",-0,0),b);break e}u3(v,h,di,Eg,Lx,u,Di,Pc,rf,Zs,E,null,-0,0)}}break}while(!0);yo(l)}function u3(l,u,h,v,b,E,P,U,q,te,le,fe,re,oe){if(l.timeoutHandle=-1,fe=u.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ca},r3(u,E,fe);var Te=(E&62914560)===E?_g-Kn():(E&4194048)===E?o3-Kn():0;if(Te=Qz(fe,Te),Te!==null){es=E,l.cancelPendingCommit=Te(y3.bind(null,l,u,E,h,v,b,P,U,q,le,fe,null,re,oe)),rl(l,E,P,!te);return}}y3(l,u,E,h,v,b,P,U,q)}function hz(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var v=0;v<h.length;v++){var b=h[v],E=b.getSnapshot;b=b.value;try{if(!Ti(E(),b))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function rl(l,u,h,v){u&=~jx,u&=~Pc,l.suspendedLanes|=u,l.pingedLanes&=~u,v&&(l.warmLanes|=u),v=l.expirationTimes;for(var b=u;0<b;){var E=31-Ar(b),P=1<<E;v[E]=-1,b&=~P}h!==0&&oc(l,h,u)}function Sg(){return(Et&6)===0?(ch(0),!1):!0}function Fx(){if(rt!==null){if(Dt===0)var l=rt.return;else l=rt,Ho=_c=null,nx(l),Ku=null,qd=0,l=rt;for(;l!==null;)F4(l.alternate,l),l=l.return;rt=null}}function af(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,Nz(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),es=0,Fx(),qt=l,rt=h=Fo(l.current,null),ot=u,Dt=0,Pi=null,Zs=!1,tf=Aa(l,u),Mx=!1,rf=Di=jx=Pc=Js=gr=0,di=sh=null,Lx=!1,(u&8)!==0&&(u|=u&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=u;0<v;){var b=31-Ar(v),E=1<<b;u|=l[b],v&=~E}return Jo=u,G0(),h}function f3(l,u){Xe=null,Y.H=Jd,u===Wu||u===eg?(u=TT(),Dt=3):u===qy?(u=TT(),Dt=4):Dt=u===xx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Pi=u,rt===null&&(gr=1,pg(l,Ji(u,l.current)))}function d3(){var l=Oi.current;return l===null?!0:(ot&4194048)===ot?na===null:(ot&62914560)===ot||(ot&536870912)!==0?l===na:!1}function h3(){var l=Y.H;return Y.H=Jd,l===null?Jd:l}function p3(){var l=Y.A;return Y.A=fz,l}function Cg(){gr=4,Zs||(ot&4194048)!==ot&&Oi.current!==null||(tf=!0),(Js&134217727)===0&&(Pc&134217727)===0||qt===null||rl(qt,ot,Di,!1)}function Vx(l,u,h){var v=Et;Et|=2;var b=h3(),E=p3();(qt!==l||ot!==u)&&(Eg=null,af(l,u)),u=!1;var P=gr;e:do try{if(Dt!==0&&rt!==null){var U=rt,q=Pi;switch(Dt){case 8:Fx(),P=6;break e;case 3:case 2:case 9:case 6:Oi.current===null&&(u=!0);var te=Dt;if(Dt=0,Pi=null,of(l,U,q,te),h&&tf){P=0;break e}break;default:te=Dt,Dt=0,Pi=null,of(l,U,q,te)}}pz(),P=gr;break}catch(le){f3(l,le)}while(!0);return u&&l.shellSuspendCounter++,Ho=_c=null,Et=v,Y.H=b,Y.A=E,rt===null&&(qt=null,ot=0,G0()),P}function pz(){for(;rt!==null;)g3(rt)}function gz(l,u){var h=Et;Et|=2;var v=h3(),b=p3();qt!==l||ot!==u?(Eg=null,Ag=Kn()+500,af(l,u)):tf=Aa(l,u);e:do try{if(Dt!==0&&rt!==null){u=rt;var E=Pi;t:switch(Dt){case 1:Dt=0,Pi=null,of(l,u,E,1);break;case 2:case 9:if(ST(E)){Dt=0,Pi=null,v3(u);break}u=function(){Dt!==2&&Dt!==9||qt!==l||(Dt=7),yo(l)},E.then(u,u);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:ST(E)?(Dt=0,Pi=null,v3(u)):(Dt=0,Pi=null,of(l,u,E,7));break;case 5:var P=null;switch(rt.tag){case 26:P=rt.memoizedState;case 5:case 27:var U=rt;if(P?tI(P):U.stateNode.complete){Dt=0,Pi=null;var q=U.sibling;if(q!==null)rt=q;else{var te=U.return;te!==null?(rt=te,Tg(te)):rt=null}break t}}Dt=0,Pi=null,of(l,u,E,5);break;case 6:Dt=0,Pi=null,of(l,u,E,6);break;case 8:Fx(),gr=6;break e;default:throw Error(n(462))}}vz();break}catch(le){f3(l,le)}while(!0);return Ho=_c=null,Y.H=v,Y.A=b,Et=h,rt!==null?0:(qt=null,ot=0,G0(),gr)}function vz(){for(;rt!==null&&!yy();)g3(rt)}function g3(l){var u=z4(l.alternate,l,Jo);l.memoizedProps=l.pendingProps,u===null?Tg(l):rt=u}function v3(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=N4(h,u,u.pendingProps,u.type,void 0,ot);break;case 11:u=N4(h,u,u.pendingProps,u.type.render,u.ref,ot);break;case 5:nx(u);default:F4(h,u),u=rt=pT(u,Jo),u=z4(h,u,Jo)}l.memoizedProps=l.pendingProps,u===null?Tg(l):rt=u}function of(l,u,h,v){Ho=_c=null,nx(u),Ku=null,qd=0;var b=u.return;try{if(iz(l,b,u,h,ot)){gr=1,pg(l,Ji(h,l.current)),rt=null;return}}catch(E){if(b!==null)throw rt=b,E;gr=1,pg(l,Ji(h,l.current)),rt=null;return}u.flags&32768?(ft||v===1?l=!0:tf||(ot&536870912)!==0?l=!1:(Zs=l=!0,(v===2||v===9||v===3||v===6)&&(v=Oi.current,v!==null&&v.tag===13&&(v.flags|=16384))),m3(u,l)):Tg(u)}function Tg(l){var u=l;do{if((u.flags&32768)!==0){m3(u,Zs);return}l=u.return;var h=sz(u.alternate,u,Jo);if(h!==null){rt=h;return}if(u=u.sibling,u!==null){rt=u;return}rt=u=l}while(u!==null);gr===0&&(gr=5)}function m3(l,u){do{var h=lz(l.alternate,l);if(h!==null){h.flags&=32767,rt=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){rt=l;return}rt=l=h}while(l!==null);gr=6,rt=null}function y3(l,u,h,v,b,E,P,U,q){l.cancelPendingCommit=null;do Ig();while(Kr!==0);if((Et&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(E=u.lanes|u.childLanes,E|=Ry,wy(l,h,E,P,U,q),l===qt&&(rt=qt=null,ot=0),nf=u,tl=l,es=h,Bx=E,zx=b,s3=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,bz(Ds,function(){return A3(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=Y.T,Y.T=null,b=ie.p,ie.p=2,P=Et,Et|=4;try{cz(l,u,h)}finally{Et=P,ie.p=b,Y.T=v}}Kr=1,x3(),b3(),w3()}}function x3(){if(Kr===1){Kr=0;var l=tl,u=nf,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null;var v=ie.p;ie.p=2;var b=Et;Et|=4;try{J4(u,l);var E=e2,P=aT(l.containerInfo),U=E.focusedElem,q=E.selectionRange;if(P!==U&&U&&U.ownerDocument&&iT(U.ownerDocument.documentElement,U)){if(q!==null&&Sy(U)){var te=q.start,le=q.end;if(le===void 0&&(le=te),"selectionStart"in U)U.selectionStart=te,U.selectionEnd=Math.min(le,U.value.length);else{var fe=U.ownerDocument||document,re=fe&&fe.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Te=U.textContent.length,Ue=Math.min(q.start,Te),Vt=q.end===void 0?Ue:Math.min(q.end,Te);!oe.extend&&Ue>Vt&&(P=Vt,Vt=Ue,Ue=P);var X=nT(U,Ue),W=nT(U,Vt);if(X&&W&&(oe.rangeCount!==1||oe.anchorNode!==X.node||oe.anchorOffset!==X.offset||oe.focusNode!==W.node||oe.focusOffset!==W.offset)){var ee=fe.createRange();ee.setStart(X.node,X.offset),oe.removeAllRanges(),Ue>Vt?(oe.addRange(ee),oe.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),oe.addRange(ee))}}}}for(fe=[],oe=U;oe=oe.parentNode;)oe.nodeType===1&&fe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<fe.length;U++){var ue=fe[U];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Ug=!!Jx,e2=Jx=null}finally{Et=b,ie.p=v,Y.T=h}}l.current=u,Kr=2}}function b3(){if(Kr===2){Kr=0;var l=tl,u=nf,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=Y.T,Y.T=null;var v=ie.p;ie.p=2;var b=Et;Et|=4;try{K4(l,u.alternate,u)}finally{Et=b,ie.p=v,Y.T=h}}Kr=3}}function w3(){if(Kr===4||Kr===3){Kr=0,y0();var l=tl,u=nf,h=es,v=s3;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Kr=5:(Kr=0,nf=tl=null,_3(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(el=null),Lo(h),u=u.stateNode,xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(_a,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=Y.T,b=ie.p,ie.p=2,Y.T=null;try{for(var E=l.onRecoverableError,P=0;P<v.length;P++){var U=v[P];E(U.value,{componentStack:U.stack})}}finally{Y.T=u,ie.p=b}}(es&3)!==0&&Ig(),yo(l),b=l.pendingLanes,(h&261930)!==0&&(b&42)!==0?l===Ux?lh++:(lh=0,Ux=l):lh=0,ch(0)}}function _3(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Hd(u)))}function Ig(){return x3(),b3(),w3(),A3()}function A3(){if(Kr!==5)return!1;var l=tl,u=Bx;Bx=0;var h=Lo(es),v=Y.T,b=ie.p;try{ie.p=32>h?32:h,Y.T=null,h=zx,zx=null;var E=tl,P=es;if(Kr=0,nf=tl=null,es=0,(Et&6)!==0)throw Error(n(331));var U=Et;if(Et|=4,i3(E.current),t3(E,E.current,P,h),Et=U,ch(0,!1),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(_a,E)}catch{}return!0}finally{ie.p=b,Y.T=v,_3(l,u)}}function E3(l,u,h){u=Ji(h,u),u=yx(l.stateNode,u,2),l=Ks(l,u,2),l!==null&&(ac(l,2),yo(l))}function Nt(l,u,h){if(l.tag===3)E3(l,l,h);else for(;u!==null;){if(u.tag===3){E3(u,l,h);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(el===null||!el.has(v))){l=Ji(h,l),h=S4(2),v=Ks(u,h,2),v!==null&&(C4(h,v,u,l),ac(v,2),yo(v));break}}u=u.return}}function Hx(l,u,h){var v=l.pingCache;if(v===null){v=l.pingCache=new dz;var b=new Set;v.set(u,b)}else b=v.get(u),b===void 0&&(b=new Set,v.set(u,b));b.has(h)||(Mx=!0,b.add(h),l=mz.bind(null,l,u,h),u.then(l,l))}function mz(l,u,h){var v=l.pingCache;v!==null&&v.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,qt===l&&(ot&h)===h&&(gr===4||gr===3&&(ot&62914560)===ot&&300>Kn()-_g?(Et&2)===0&&af(l,0):jx|=h,rf===ot&&(rf=0)),yo(l)}function S3(l,u){u===0&&(u=E0()),l=xc(l,u),l!==null&&(ac(l,u),yo(l))}function yz(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),S3(l,h)}function xz(l,u){var h=0;switch(l.tag){case 31:case 13:var v=l.stateNode,b=l.memoizedState;b!==null&&(h=b.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(u),S3(l,h)}function bz(l,u){return Wr(l,u)}var Og=null,sf=null,$x=!1,Rg=!1,qx=!1,nl=0;function yo(l){l!==sf&&l.next===null&&(sf===null?Og=sf=l:sf=sf.next=l),Rg=!0,$x||($x=!0,_z())}function ch(l,u){if(!qx&&Rg){qx=!0;do for(var h=!1,v=Og;v!==null;){if(l!==0){var b=v.pendingLanes;if(b===0)var E=0;else{var P=v.suspendedLanes,U=v.pingedLanes;E=(1<<31-Ar(42|l)+1)-1,E&=b&~(P&~U),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,O3(v,E))}else E=ot,E=Ja(v,v===qt?E:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(E&3)===0||Aa(v,E)||(h=!0,O3(v,E));v=v.next}while(h);qx=!1}}function wz(){C3()}function C3(){Rg=$x=!1;var l=0;nl!==0&&Dz()&&(l=nl);for(var u=Kn(),h=null,v=Og;v!==null;){var b=v.next,E=T3(v,u);E===0?(v.next=null,h===null?Og=b:h.next=b,b===null&&(sf=h)):(h=v,(l!==0||(E&3)!==0)&&(Rg=!0)),v=b}Kr!==0&&Kr!==5||ch(l),nl!==0&&(nl=0)}function T3(l,u){for(var h=l.suspendedLanes,v=l.pingedLanes,b=l.expirationTimes,E=l.pendingLanes&-62914561;0<E;){var P=31-Ar(E),U=1<<P,q=b[P];q===-1?((U&h)===0||(U&v)!==0)&&(b[P]=by(U,u)):q<=u&&(l.expiredLanes|=U),E&=~U}if(u=qt,h=ot,h=Ja(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,h===0||l===u&&(Dt===2||Dt===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&Ps(v),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||Aa(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(v!==null&&Ps(v),Lo(h)){case 2:case 8:h=xd;break;case 32:h=Ds;break;case 268435456:h=x0;break;default:h=Ds}return v=I3.bind(null,l),h=Wr(h,v),l.callbackPriority=u,l.callbackNode=h,u}return v!==null&&v!==null&&Ps(v),l.callbackPriority=2,l.callbackNode=null,2}function I3(l,u){if(Kr!==0&&Kr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(Ig()&&l.callbackNode!==h)return null;var v=ot;return v=Ja(l,l===qt?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(c3(l,v,u),T3(l,Kn()),l.callbackNode!=null&&l.callbackNode===h?I3.bind(null,l):null)}function O3(l,u){if(Ig())return null;c3(l,u,!0)}function _z(){kz(function(){(Et&6)!==0?Wr(yd,wz):C3()})}function Gx(){if(nl===0){var l=qu;l===0&&(l=Qa,Qa<<=1,(Qa&261888)===0&&(Qa=256)),nl=l}return nl}function R3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ru(""+l)}function P3(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function Az(l,u,h,v,b){if(u==="submit"&&h&&h.stateNode===b){var E=R3((b[sn]||null).action),P=v.submitter;P&&(u=(u=P[sn]||null)?R3(u.formAction):P.getAttribute("formAction"),u!==null&&(E=u,P=null));var U=new uo("action","action",null,v,b);l.push({event:U,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(nl!==0){var q=P?P3(b,P):new FormData(b);dx(h,{pending:!0,data:q,method:b.method,action:E},null,q)}}else typeof E=="function"&&(U.preventDefault(),q=P?P3(b,P):new FormData(b),dx(h,{pending:!0,data:q,method:b.method,action:E},E,q))},currentTarget:b}]})}}for(var Wx=0;Wx<Oy.length;Wx++){var Kx=Oy[Wx],Ez=Kx.toLowerCase(),Sz=Kx[0].toUpperCase()+Kx.slice(1);Pa(Ez,"on"+Sz)}Pa(lT,"onAnimationEnd"),Pa(cT,"onAnimationIteration"),Pa(uT,"onAnimationStart"),Pa("dblclick","onDoubleClick"),Pa("focusin","onFocus"),Pa("focusout","onBlur"),Pa(FB,"onTransitionRun"),Pa(VB,"onTransitionStart"),Pa(HB,"onTransitionCancel"),Pa(fT,"onTransitionEnd"),oo("onMouseEnter",["mouseout","mouseover"]),oo("onMouseLeave",["mouseout","mouseover"]),oo("onPointerEnter",["pointerout","pointerover"]),oo("onPointerLeave",["pointerout","pointerover"]),ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ao("onBeforeInput",["compositionend","keypress","textInput","paste"]),ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uh));function D3(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var v=l[h],b=v.event;v=v.listeners;e:{var E=void 0;if(u)for(var P=v.length-1;0<=P;P--){var U=v[P],q=U.instance,te=U.currentTarget;if(U=U.listener,q!==E&&b.isPropagationStopped())break e;E=U,b.currentTarget=te;try{E(b)}catch(le){q0(le)}b.currentTarget=null,E=q}else for(P=0;P<v.length;P++){if(U=v[P],q=U.instance,te=U.currentTarget,U=U.listener,q!==E&&b.isPropagationStopped())break e;E=U,b.currentTarget=te;try{E(b)}catch(le){q0(le)}b.currentTarget=null,E=q}}}}function nt(l,u){var h=u[Su];h===void 0&&(h=u[Su]=new Set);var v=l+"__bubble";h.has(v)||(N3(u,l,2,!1),h.add(v))}function Xx(l,u,h){var v=0;u&&(v|=4),N3(h,l,v,u)}var Pg="_reactListening"+Math.random().toString(36).slice(2);function Yx(l){if(!l[Pg]){l[Pg]=!0,_d.forEach(function(h){h!=="selectionchange"&&(Cz.has(h)||Xx(h,!1,l),Xx(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Pg]||(u[Pg]=!0,Xx("selectionchange",!1,u))}}function N3(l,u,h,v){switch(lI(u)){case 2:var b=eU;break;case 8:b=tU;break;default:b=f2}h=b.bind(null,u,h,l),b=void 0,!fc||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),v?b!==void 0?l.addEventListener(u,h,{capture:!0,passive:b}):l.addEventListener(u,h,!0):b!==void 0?l.addEventListener(u,h,{passive:b}):l.addEventListener(u,h,!1)}function Qx(l,u,h,v,b){var E=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var P=v.tag;if(P===3||P===4){var U=v.stateNode.containerInfo;if(U===b)break;if(P===4)for(P=v.return;P!==null;){var q=P.tag;if((q===3||q===4)&&P.stateNode.containerInfo===b)return;P=P.return}for(;U!==null;){if(P=no(U),P===null)return;if(q=P.tag,q===5||q===6||q===26||q===27){v=E=P;continue e}U=U.parentNode}}v=v.return}Bs(function(){var te=E,le=Xi(h),fe=[];e:{var re=dT.get(l);if(re!==void 0){var oe=uo,Te=l;switch(l){case"keypress":if(hc(h)===0)break e;case"keydown":case"keyup":oe=V0;break;case"focusin":Te="focus",oe=gc;break;case"focusout":Te="blur",oe=gc;break;case"beforeblur":case"afterblur":oe=gc;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=N0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=I;break;case lT:case cT:case uT:oe=M0;break;case fT:oe=H;break;case"scroll":case"scrollend":oe=kd;break;case"wheel":oe=ae;break;case"copy":case"cut":case"paste":oe=j0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Uo;break;case"toggle":case"beforetoggle":oe=Ke}var Ue=(u&4)!==0,Vt=!Ue&&(l==="scroll"||l==="scrollend"),X=Ue?re!==null?re+"Capture":null:re;Ue=[];for(var W=te,ee;W!==null;){var ue=W;if(ee=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||ee===null||X===null||(ue=Ta(W,X),ue!=null&&Ue.push(fh(W,ue,ee))),Vt)break;W=W.return}0<Ue.length&&(re=new oe(re,Te,null,h,le),fe.push({event:re,listeners:Ue}))}}if((u&7)===0){e:{if(re=l==="mouseover"||l==="pointerover",oe=l==="mouseout"||l==="pointerout",re&&h!==Pd&&(Te=h.relatedTarget||h.fromElement)&&(no(Te)||Te[to]))break e;if((oe||re)&&(re=le.window===le?le:(re=le.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Te=h.relatedTarget||h.toElement,oe=te,Te=Te?no(Te):null,Te!==null&&(Vt=a(Te),Ue=Te.tag,Te!==Vt||Ue!==5&&Ue!==27&&Ue!==6)&&(Te=null)):(oe=null,Te=te),oe!==Te)){if(Ue=Md,ue="onMouseLeave",X="onMouseEnter",W="mouse",(l==="pointerout"||l==="pointerover")&&(Ue=Uo,ue="onPointerLeave",X="onPointerEnter",W="pointer"),Vt=oe==null?re:Si(oe),ee=Te==null?re:Si(Te),re=new Ue(ue,W+"leave",oe,h,le),re.target=Vt,re.relatedTarget=ee,ue=null,no(le)===te&&(Ue=new Ue(X,W+"enter",Te,h,le),Ue.target=ee,Ue.relatedTarget=Vt,ue=Ue),Vt=ue,oe&&Te)t:{for(Ue=Tz,X=oe,W=Te,ee=0,ue=X;ue;ue=Ue(ue))ee++;ue=0;for(var Me=W;Me;Me=Ue(Me))ue++;for(;0<ee-ue;)X=Ue(X),ee--;for(;0<ue-ee;)W=Ue(W),ue--;for(;ee--;){if(X===W||W!==null&&X===W.alternate){Ue=X;break t}X=Ue(X),W=Ue(W)}Ue=null}else Ue=null;oe!==null&&k3(fe,re,oe,Ue,!1),Te!==null&&Vt!==null&&k3(fe,Vt,Te,Ue,!0)}}e:{if(re=te?Si(te):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var yt=QC;else if(XC(re))if(ZC)yt=BB;else{yt=jB;var Pe=MB}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?te&&Ou(te.elementType)&&(yt=QC):yt=LB;if(yt&&(yt=yt(l,te))){YC(fe,yt,h,le);break e}Pe&&Pe(l,re,te),l==="focusout"&&te&&re.type==="number"&&te.memoizedProps.value!=null&&Id(re,"number",re.value)}switch(Pe=te?Si(te):window,l){case"focusin":(XC(Pe)||Pe.contentEditable==="true")&&(Lu=Pe,Cy=te,Ud=null);break;case"focusout":Ud=Cy=Lu=null;break;case"mousedown":Ty=!0;break;case"contextmenu":case"mouseup":case"dragend":Ty=!1,oT(fe,h,le);break;case"selectionchange":if(UB)break;case"keydown":case"keyup":oT(fe,h,le)}var Ye;if(At)e:{switch(l){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else ju?vc(l,h)&&(st="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(st="onCompositionStart");st&&(po&&h.locale!=="ko"&&(ju||st!=="onCompositionStart"?st==="onCompositionEnd"&&ju&&(Ye=Nd()):(co=le,Dd="value"in co?co.value:co.textContent,ju=!0)),Pe=Dg(te,st),0<Pe.length&&(st=new ho(st,l,null,h,le),fe.push({event:st,listeners:Pe}),Ye?st.data=Ye:(Ye=Mu(h),Ye!==null&&(st.data=Ye)))),(Ye=Qi?PB(l,h):DB(l,h))&&(st=Dg(te,"onBeforeInput"),0<st.length&&(Pe=new ho("onBeforeInput","beforeinput",null,h,le),fe.push({event:Pe,listeners:st}),Pe.data=Ye)),Az(fe,l,te,h,le)}D3(fe,u)})}function fh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function Dg(l,u){for(var h=u+"Capture",v=[];l!==null;){var b=l,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=Ta(l,h),b!=null&&v.unshift(fh(l,b,E)),b=Ta(l,u),b!=null&&v.push(fh(l,b,E))),l.tag===3)return v;l=l.return}return[]}function Tz(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function k3(l,u,h,v,b){for(var E=u._reactName,P=[];h!==null&&h!==v;){var U=h,q=U.alternate,te=U.stateNode;if(U=U.tag,q!==null&&q===v)break;U!==5&&U!==26&&U!==27||te===null||(q=te,b?(te=Ta(h,E),te!=null&&P.unshift(fh(h,te,q))):b||(te=Ta(h,E),te!=null&&P.push(fh(h,te,q)))),h=h.return}P.length!==0&&l.push({event:u,listeners:P})}var Iz=/\r\n?/g,Oz=/\u0000|\uFFFD/g;function M3(l){return(typeof l=="string"?l:""+l).replace(Iz,`
`).replace(Oz,"")}function j3(l,u){return u=M3(u),M3(l)===u}function Ft(l,u,h,v,b,E){switch(h){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||li(l,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&li(l,""+v);break;case"className":Ci(l,"class",v);break;case"tabIndex":Ci(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(l,h,v);break;case"style":Rd(l,v,E);break;case"data":if(u!=="object"){Ci(l,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(h);break}v=Ru(""+v),l.setAttribute(h,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(u!=="input"&&Ft(l,u,"name",b.name,b,null),Ft(l,u,"formEncType",b.formEncType,b,null),Ft(l,u,"formMethod",b.formMethod,b,null),Ft(l,u,"formTarget",b.formTarget,b,null)):(Ft(l,u,"encType",b.encType,b,null),Ft(l,u,"method",b.method,b,null),Ft(l,u,"target",b.target,b,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(h);break}v=Ru(""+v),l.setAttribute(h,v);break;case"onClick":v!=null&&(l.onclick=Ca);break;case"onScroll":v!=null&&nt("scroll",l);break;case"onScrollEnd":v!=null&&nt("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(h=v.__html,h!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=h}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}h=Ru(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,""+v):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":v===!0?l.setAttribute(h,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,v):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(h,v):l.removeAttribute(h);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(h):l.setAttribute(h,v);break;case"popover":nt("beforetoggle",l),nt("toggle",l),Tu(l,"popover",v);break;case"xlinkActuate":jr(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":jr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":jr(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":jr(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":jr(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":jr(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":jr(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":jr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":jr(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Tu(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=D0.get(h)||h,Tu(l,h,v))}}function Zx(l,u,h,v,b,E){switch(h){case"style":Rd(l,v,E);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(h=v.__html,h!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=h}}break;case"children":typeof v=="string"?li(l,v):(typeof v=="number"||typeof v=="bigint")&&li(l,""+v);break;case"onScroll":v!=null&&nt("scroll",l);break;case"onScrollEnd":v!=null&&nt("scrollend",l);break;case"onClick":v!=null&&(l.onclick=Ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ad.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),u=h.slice(2,b?h.length-7:void 0),E=l[sn]||null,E=E!=null?E[h]:null,typeof E=="function"&&l.removeEventListener(u,E,b),typeof v=="function")){typeof E!="function"&&E!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,v,b);break e}h in l?l[h]=v:v===!0?l.setAttribute(h,""):Tu(l,h,v)}}}function En(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",l),nt("load",l);var v=!1,b=!1,E;for(E in h)if(h.hasOwnProperty(E)){var P=h[E];if(P!=null)switch(E){case"src":v=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Ft(l,u,E,P,h,null)}}b&&Ft(l,u,"srcSet",h.srcSet,h,null),v&&Ft(l,u,"src",h.src,h,null);return;case"input":nt("invalid",l);var U=E=P=b=null,q=null,te=null;for(v in h)if(h.hasOwnProperty(v)){var le=h[v];if(le!=null)switch(v){case"name":b=le;break;case"type":P=le;break;case"checked":q=le;break;case"defaultChecked":te=le;break;case"value":E=le;break;case"defaultValue":U=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(137,u));break;default:Ft(l,u,v,le,h,null)}}O0(l,E,U,q,te,P,b,!1);return;case"select":nt("invalid",l),v=P=E=null;for(b in h)if(h.hasOwnProperty(b)&&(U=h[b],U!=null))switch(b){case"value":E=U;break;case"defaultValue":P=U;break;case"multiple":v=U;default:Ft(l,u,b,U,h,null)}u=E,h=P,l.multiple=!!v,u!=null?ks(l,!!v,u,!1):h!=null&&ks(l,!!v,h,!0);return;case"textarea":nt("invalid",l),E=b=v=null;for(P in h)if(h.hasOwnProperty(P)&&(U=h[P],U!=null))switch(P){case"value":v=U;break;case"defaultValue":b=U;break;case"children":E=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:Ft(l,u,P,U,h,null)}Ms(l,v,b,E);return;case"option":for(q in h)if(h.hasOwnProperty(q)&&(v=h[q],v!=null))switch(q){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ft(l,u,q,v,h,null)}return;case"dialog":nt("beforetoggle",l),nt("toggle",l),nt("cancel",l),nt("close",l);break;case"iframe":case"object":nt("load",l);break;case"video":case"audio":for(v=0;v<uh.length;v++)nt(uh[v],l);break;case"image":nt("error",l),nt("load",l);break;case"details":nt("toggle",l);break;case"embed":case"source":case"link":nt("error",l),nt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in h)if(h.hasOwnProperty(te)&&(v=h[te],v!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Ft(l,u,te,v,h,null)}return;default:if(Ou(u)){for(le in h)h.hasOwnProperty(le)&&(v=h[le],v!==void 0&&Zx(l,u,le,v,h,void 0));return}}for(U in h)h.hasOwnProperty(U)&&(v=h[U],v!=null&&Ft(l,u,U,v,h,null))}function Rz(l,u,h,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,P=null,U=null,q=null,te=null,le=null;for(oe in h){var fe=h[oe];if(h.hasOwnProperty(oe)&&fe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":q=fe;default:v.hasOwnProperty(oe)||Ft(l,u,oe,null,v,fe)}}for(var re in v){var oe=v[re];if(fe=h[re],v.hasOwnProperty(re)&&(oe!=null||fe!=null))switch(re){case"type":E=oe;break;case"name":b=oe;break;case"checked":te=oe;break;case"defaultChecked":le=oe;break;case"value":P=oe;break;case"defaultValue":U=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,u));break;default:oe!==fe&&Ft(l,u,re,oe,v,fe)}}Iu(l,P,U,q,te,le,E,b);return;case"select":oe=P=U=re=null;for(E in h)if(q=h[E],h.hasOwnProperty(E)&&q!=null)switch(E){case"value":break;case"multiple":oe=q;default:v.hasOwnProperty(E)||Ft(l,u,E,null,v,q)}for(b in v)if(E=v[b],q=h[b],v.hasOwnProperty(b)&&(E!=null||q!=null))switch(b){case"value":re=E;break;case"defaultValue":U=E;break;case"multiple":P=E;default:E!==q&&Ft(l,u,b,E,v,q)}u=U,h=P,v=oe,re!=null?ks(l,!!h,re,!1):!!v!=!!h&&(u!=null?ks(l,!!h,u,!0):ks(l,!!h,h?[]:"",!1));return;case"textarea":oe=re=null;for(U in h)if(b=h[U],h.hasOwnProperty(U)&&b!=null&&!v.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Ft(l,u,U,null,v,b)}for(P in v)if(b=v[P],E=h[P],v.hasOwnProperty(P)&&(b!=null||E!=null))switch(P){case"value":re=b;break;case"defaultValue":oe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==E&&Ft(l,u,P,b,v,E)}R0(l,re,oe);return;case"option":for(var Te in h)if(re=h[Te],h.hasOwnProperty(Te)&&re!=null&&!v.hasOwnProperty(Te))switch(Te){case"selected":l.selected=!1;break;default:Ft(l,u,Te,null,v,re)}for(q in v)if(re=v[q],oe=h[q],v.hasOwnProperty(q)&&re!==oe&&(re!=null||oe!=null))switch(q){case"selected":l.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Ft(l,u,q,re,v,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in h)re=h[Ue],h.hasOwnProperty(Ue)&&re!=null&&!v.hasOwnProperty(Ue)&&Ft(l,u,Ue,null,v,re);for(te in v)if(re=v[te],oe=h[te],v.hasOwnProperty(te)&&re!==oe&&(re!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,u));break;default:Ft(l,u,te,re,v,oe)}return;default:if(Ou(u)){for(var Vt in h)re=h[Vt],h.hasOwnProperty(Vt)&&re!==void 0&&!v.hasOwnProperty(Vt)&&Zx(l,u,Vt,void 0,v,re);for(le in v)re=v[le],oe=h[le],!v.hasOwnProperty(le)||re===oe||re===void 0&&oe===void 0||Zx(l,u,le,re,v,oe);return}}for(var X in h)re=h[X],h.hasOwnProperty(X)&&re!=null&&!v.hasOwnProperty(X)&&Ft(l,u,X,null,v,re);for(fe in v)re=v[fe],oe=h[fe],!v.hasOwnProperty(fe)||re===oe||re==null&&oe==null||Ft(l,u,fe,re,v,oe)}function L3(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Pz(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,h=performance.getEntriesByType("resource"),v=0;v<h.length;v++){var b=h[v],E=b.transferSize,P=b.initiatorType,U=b.duration;if(E&&U&&L3(P)){for(P=0,U=b.responseEnd,v+=1;v<h.length;v++){var q=h[v],te=q.startTime;if(te>U)break;var le=q.transferSize,fe=q.initiatorType;le&&L3(fe)&&(q=q.responseEnd,P+=le*(q<U?1:(U-te)/(q-te)))}if(--v,u+=8*(E+P)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Jx=null,e2=null;function Ng(l){return l.nodeType===9?l:l.ownerDocument}function B3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function z3(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function t2(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var r2=null;function Dz(){var l=window.event;return l&&l.type==="popstate"?l===r2?!1:(r2=l,!0):(r2=null,!1)}var U3=typeof setTimeout=="function"?setTimeout:void 0,Nz=typeof clearTimeout=="function"?clearTimeout:void 0,F3=typeof Promise=="function"?Promise:void 0,kz=typeof queueMicrotask=="function"?queueMicrotask:typeof F3<"u"?function(l){return F3.resolve(null).then(l).catch(Mz)}:U3;function Mz(l){setTimeout(function(){throw l})}function il(l){return l==="head"}function V3(l,u){var h=u,v=0;do{var b=h.nextSibling;if(l.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"||h==="/&"){if(v===0){l.removeChild(b),ff(u);return}v--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")v++;else if(h==="html")dh(l.ownerDocument.documentElement);else if(h==="head"){h=l.ownerDocument.head,dh(h);for(var E=h.firstChild;E;){var P=E.nextSibling,U=E.nodeName;E[ro]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=P}}else h==="body"&&dh(l.ownerDocument.body);h=b}while(h);ff(u)}function H3(l,u){var h=l;l=0;do{var v=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(l===0)break;l--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||l++;h=v}while(h)}function n2(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":n2(h),Cu(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function jz(l,u,h,v){for(;l.nodeType===1;){var b=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[ro])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(E=l.getAttribute("rel"),E==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(E!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(E=l.getAttribute("src"),(E!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===E)return l}else return l;if(l=ia(l.nextSibling),l===null)break}return null}function Lz(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=ia(l.nextSibling),l===null))return null;return l}function $3(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=ia(l.nextSibling),l===null))return null;return l}function i2(l){return l.data==="$?"||l.data==="$~"}function a2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Bz(l,u){var h=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||h.readyState!=="loading")u();else{var v=function(){u(),h.removeEventListener("DOMContentLoaded",v)};h.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function ia(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var o2=null;function q3(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="/$"||h==="/&"){if(u===0)return ia(l.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}l=l.nextSibling}return null}function G3(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return l;u--}else h!=="/$"&&h!=="/&"||u++}l=l.previousSibling}return null}function W3(l,u,h){switch(u=Ng(h),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function dh(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Cu(l)}var aa=new Map,K3=new Set;function kg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ts=ie.d;ie.d={f:zz,r:Uz,D:Fz,C:Vz,L:Hz,m:$z,X:Gz,S:qz,M:Wz};function zz(){var l=ts.f(),u=Sg();return l||u}function Uz(l){var u=Ki(l);u!==null&&u.tag===5&&u.type==="form"?f4(u):ts.r(l)}var lf=typeof document>"u"?null:document;function X3(l,u,h){var v=lf;if(v&&typeof u=="string"&&u){var b=si(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),K3.has(b)||(K3.add(b),l={rel:l,crossOrigin:h,href:u},v.querySelector(b)===null&&(u=v.createElement("link"),En(u,"link",l),Mr(u),v.head.appendChild(u)))}}function Fz(l){ts.D(l),X3("dns-prefetch",l,null)}function Vz(l,u){ts.C(l,u),X3("preconnect",l,u)}function Hz(l,u,h){ts.L(l,u,h);var v=lf;if(v&&l&&u){var b='link[rel="preload"][as="'+si(u)+'"]';u==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+si(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+si(h.imageSizes)+'"]')):b+='[href="'+si(l)+'"]';var E=b;switch(u){case"style":E=cf(l);break;case"script":E=uf(l)}aa.has(E)||(l=p({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),aa.set(E,l),v.querySelector(b)!==null||u==="style"&&v.querySelector(hh(E))||u==="script"&&v.querySelector(ph(E))||(u=v.createElement("link"),En(u,"link",l),Mr(u),v.head.appendChild(u)))}}function $z(l,u){ts.m(l,u);var h=lf;if(h&&l){var v=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+si(v)+'"][href="'+si(l)+'"]',E=b;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=uf(l)}if(!aa.has(E)&&(l=p({rel:"modulepreload",href:l},u),aa.set(E,l),h.querySelector(b)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(ph(E)))return}v=h.createElement("link"),En(v,"link",l),Mr(v),h.head.appendChild(v)}}}function qz(l,u,h){ts.S(l,u,h);var v=lf;if(v&&l){var b=io(v).hoistableStyles,E=cf(l);u=u||"default";var P=b.get(E);if(!P){var U={loading:0,preload:null};if(P=v.querySelector(hh(E)))U.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":u},h),(h=aa.get(E))&&s2(l,h);var q=P=v.createElement("link");Mr(q),En(q,"link",l),q._p=new Promise(function(te,le){q.onload=te,q.onerror=le}),q.addEventListener("load",function(){U.loading|=1}),q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Mg(P,u,v)}P={type:"stylesheet",instance:P,count:1,state:U},b.set(E,P)}}}function Gz(l,u){ts.X(l,u);var h=lf;if(h&&l){var v=io(h).hoistableScripts,b=uf(l),E=v.get(b);E||(E=h.querySelector(ph(b)),E||(l=p({src:l,async:!0},u),(u=aa.get(b))&&l2(l,u),E=h.createElement("script"),Mr(E),En(E,"link",l),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},v.set(b,E))}}function Wz(l,u){ts.M(l,u);var h=lf;if(h&&l){var v=io(h).hoistableScripts,b=uf(l),E=v.get(b);E||(E=h.querySelector(ph(b)),E||(l=p({src:l,async:!0,type:"module"},u),(u=aa.get(b))&&l2(l,u),E=h.createElement("script"),Mr(E),En(E,"link",l),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},v.set(b,E))}}function Y3(l,u,h,v){var b=(b=We.current)?kg(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=cf(h.href),h=io(b).hoistableStyles,v=h.get(u),v||(v={type:"style",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=cf(h.href);var E=io(b).hoistableStyles,P=E.get(l);if(P||(b=b.ownerDocument||b,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(l,P),(E=b.querySelector(hh(l)))&&!E._p&&(P.instance=E,P.state.loading=5),aa.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},aa.set(l,h),E||Kz(b,l,h,P.state))),u&&v===null)throw Error(n(528,""));return P}if(u&&v!==null)throw Error(n(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=uf(h),h=io(b).hoistableScripts,v=h.get(u),v||(v={type:"script",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function cf(l){return'href="'+si(l)+'"'}function hh(l){return'link[rel="stylesheet"]['+l+"]"}function Q3(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function Kz(l,u,h,v){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=l.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),En(u,"link",h),Mr(u),l.head.appendChild(u))}function uf(l){return'[src="'+si(l)+'"]'}function ph(l){return"script[async]"+l}function Z3(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var v=l.querySelector('style[data-href~="'+si(h.href)+'"]');if(v)return u.instance=v,Mr(v),v;var b=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Mr(v),En(v,"style",b),Mg(v,h.precedence,l),u.instance=v;case"stylesheet":b=cf(h.href);var E=l.querySelector(hh(b));if(E)return u.state.loading|=4,u.instance=E,Mr(E),E;v=Q3(h),(b=aa.get(b))&&s2(v,b),E=(l.ownerDocument||l).createElement("link"),Mr(E);var P=E;return P._p=new Promise(function(U,q){P.onload=U,P.onerror=q}),En(E,"link",v),u.state.loading|=4,Mg(E,h.precedence,l),u.instance=E;case"script":return E=uf(h.src),(b=l.querySelector(ph(E)))?(u.instance=b,Mr(b),b):(v=h,(b=aa.get(E))&&(v=p({},h),l2(v,b)),l=l.ownerDocument||l,b=l.createElement("script"),Mr(b),En(b,"link",v),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,Mg(v,h.precedence,l));return u.instance}function Mg(l,u,h){for(var v=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=v.length?v[v.length-1]:null,E=b,P=0;P<v.length;P++){var U=v[P];if(U.dataset.precedence===u)E=U;else if(E!==b)break}E?E.parentNode.insertBefore(l,E.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function s2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function l2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var jg=null;function J3(l,u,h){if(jg===null){var v=new Map,b=jg=new Map;b.set(h,v)}else b=jg,v=b.get(h),v||(v=new Map,b.set(h,v));if(v.has(l))return v;for(v.set(l,null),h=h.getElementsByTagName(l),b=0;b<h.length;b++){var E=h[b];if(!(E[ro]||E[kr]||l==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var P=E.getAttribute(u)||"";P=l+P;var U=v.get(P);U?U.push(E):v.set(P,[E])}}return v}function eI(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function Xz(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function tI(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Yz(l,u,h,v){if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var b=cf(v.href),E=u.querySelector(hh(b));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=Lg.bind(l),u.then(l,l)),h.state.loading|=4,h.instance=E,Mr(E);return}E=u.ownerDocument||u,v=Q3(v),(b=aa.get(b))&&s2(v,b),E=E.createElement("link"),Mr(E);var P=E;P._p=new Promise(function(U,q){P.onload=U,P.onerror=q}),En(E,"link",v),h.instance=E}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(l.count++,h=Lg.bind(l),u.addEventListener("load",h),u.addEventListener("error",h))}}var c2=0;function Qz(l,u){return l.stylesheets&&l.count===0&&zg(l,l.stylesheets),0<l.count||0<l.imgCount?function(h){var v=setTimeout(function(){if(l.stylesheets&&zg(l,l.stylesheets),l.unsuspend){var E=l.unsuspend;l.unsuspend=null,E()}},6e4+u);0<l.imgBytes&&c2===0&&(c2=62500*Pz());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&zg(l,l.stylesheets),l.unsuspend)){var E=l.unsuspend;l.unsuspend=null,E()}},(l.imgBytes>c2?50:800)+u);return l.unsuspend=h,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(b)}}:null}function Lg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zg(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Bg=null;function zg(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Bg=new Map,u.forEach(Zz,l),Bg=null,Lg.call(l))}function Zz(l,u){if(!(u.state.loading&4)){var h=Bg.get(l);if(h)var v=h.get(null);else{h=new Map,Bg.set(l,h);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var P=b[E];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(h.set(P.dataset.precedence,P),v=P)}v&&h.set(null,v)}b=u.instance,P=b.getAttribute("data-precedence"),E=h.get(P)||v,E===v&&h.set(null,b),h.set(P,b),this.count++,v=Lg.bind(this),b.addEventListener("load",v),b.addEventListener("error",v),E?E.parentNode.insertBefore(b,E.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var gh={$$typeof:R,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Jz(l,u,h,v,b,E,P,U,q){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.hiddenUpdates=eo(null),this.identifierPrefix=v,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function rI(l,u,h,v,b,E,P,U,q,te,le,fe){return l=new Jz(l,u,h,P,q,te,le,fe,U),u=1,E===!0&&(u|=24),E=Ii(3,null,null,u),l.current=E,E.stateNode=l,u=Vy(),u.refCount++,l.pooledCache=u,u.refCount++,E.memoizedState={element:v,isDehydrated:h,cache:u},Gy(E),l}function nI(l){return l?(l=Uu,l):Uu}function iI(l,u,h,v,b,E){b=nI(b),v.context===null?v.context=b:v.pendingContext=b,v=Ws(u),v.payload={element:h},E=E===void 0?null:E,E!==null&&(v.callback=E),h=Ks(l,v,u),h!==null&&(hi(h,l,u),Wd(h,l,u))}function aI(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function u2(l,u){aI(l,u),(l=l.alternate)&&aI(l,u)}function oI(l){if(l.tag===13||l.tag===31){var u=xc(l,67108864);u!==null&&hi(u,l,67108864),u2(l,67108864)}}function sI(l){if(l.tag===13||l.tag===31){var u=Ni();u=sc(u);var h=xc(l,u);h!==null&&hi(h,l,u),u2(l,u)}}var Ug=!0;function eU(l,u,h,v){var b=Y.T;Y.T=null;var E=ie.p;try{ie.p=2,f2(l,u,h,v)}finally{ie.p=E,Y.T=b}}function tU(l,u,h,v){var b=Y.T;Y.T=null;var E=ie.p;try{ie.p=8,f2(l,u,h,v)}finally{ie.p=E,Y.T=b}}function f2(l,u,h,v){if(Ug){var b=d2(v);if(b===null)Qx(l,u,v,Fg,h),cI(l,v);else if(nU(b,l,u,h,v))v.stopPropagation();else if(cI(l,v),u&4&&-1<rU.indexOf(l)){for(;b!==null;){var E=Ki(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var P=Za(E.pendingLanes);if(P!==0){var U=E;for(U.pendingLanes|=2,U.entangledLanes|=2;P;){var q=1<<31-Ar(P);U.entanglements[1]|=q,P&=~q}yo(E),(Et&6)===0&&(Ag=Kn()+500,ch(0))}}break;case 31:case 13:U=xc(E,2),U!==null&&hi(U,E,2),Sg(),u2(E,2)}if(E=d2(v),E===null&&Qx(l,u,v,Fg,h),E===b)break;b=E}b!==null&&v.stopPropagation()}else Qx(l,u,v,null,h)}}function d2(l){return l=Xi(l),h2(l)}var Fg=null;function h2(l){if(Fg=null,l=no(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=o(u),l!==null)return l;l=null}else if(h===31){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Fg=l,null}function lI(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nc()){case yd:return 2;case xd:return 8;case Ds:case xy:return 32;case x0:return 268435456;default:return 32}default:return 32}}var p2=!1,al=null,ol=null,sl=null,vh=new Map,mh=new Map,ll=[],rU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cI(l,u){switch(l){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":ol=null;break;case"mouseover":case"mouseout":sl=null;break;case"pointerover":case"pointerout":vh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(u.pointerId)}}function yh(l,u,h,v,b,E){return l===null||l.nativeEvent!==E?(l={blockedOn:u,domEventName:h,eventSystemFlags:v,nativeEvent:E,targetContainers:[b]},u!==null&&(u=Ki(u),u!==null&&oI(u)),l):(l.eventSystemFlags|=v,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function nU(l,u,h,v,b){switch(u){case"focusin":return al=yh(al,l,u,h,v,b),!0;case"dragenter":return ol=yh(ol,l,u,h,v,b),!0;case"mouseover":return sl=yh(sl,l,u,h,v,b),!0;case"pointerover":var E=b.pointerId;return vh.set(E,yh(vh.get(E)||null,l,u,h,v,b)),!0;case"gotpointercapture":return E=b.pointerId,mh.set(E,yh(mh.get(E)||null,l,u,h,v,b)),!0}return!1}function uI(l){var u=no(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){l.blockedOn=u,Ea(l.priority,function(){sI(h)});return}}else if(u===31){if(u=s(h),u!==null){l.blockedOn=u,Ea(l.priority,function(){sI(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Vg(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=d2(l.nativeEvent);if(h===null){h=l.nativeEvent;var v=new h.constructor(h.type,h);Pd=v,h.target.dispatchEvent(v),Pd=null}else return u=Ki(h),u!==null&&oI(u),l.blockedOn=h,!1;u.shift()}return!0}function fI(l,u,h){Vg(l)&&h.delete(u)}function iU(){p2=!1,al!==null&&Vg(al)&&(al=null),ol!==null&&Vg(ol)&&(ol=null),sl!==null&&Vg(sl)&&(sl=null),vh.forEach(fI),mh.forEach(fI)}function Hg(l,u){l.blockedOn===u&&(l.blockedOn=null,p2||(p2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iU)))}var $g=null;function dI(l){$g!==l&&($g=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$g===l&&($g=null);for(var u=0;u<l.length;u+=3){var h=l[u],v=l[u+1],b=l[u+2];if(typeof v!="function"){if(h2(v||h)===null)continue;break}var E=Ki(h);E!==null&&(l.splice(u,3),u-=3,dx(E,{pending:!0,data:b,method:h.method,action:v},v,b))}}))}function ff(l){function u(q){return Hg(q,l)}al!==null&&Hg(al,l),ol!==null&&Hg(ol,l),sl!==null&&Hg(sl,l),vh.forEach(u),mh.forEach(u);for(var h=0;h<ll.length;h++){var v=ll[h];v.blockedOn===l&&(v.blockedOn=null)}for(;0<ll.length&&(h=ll[0],h.blockedOn===null);)uI(h),h.blockedOn===null&&ll.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(v=0;v<h.length;v+=3){var b=h[v],E=h[v+1],P=b[sn]||null;if(typeof E=="function")P||dI(h);else if(P){var U=null;if(E&&E.hasAttribute("formAction")){if(b=E,P=E[sn]||null)U=P.formAction;else if(h2(b)!==null)continue}else U=P.action;typeof U=="function"?h[v+1]=U:(h.splice(v,3),v-=3),dI(h)}}}function hI(){function l(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(P){return b=P})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),v||setTimeout(h,20)}function h(){if(!v&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function g2(l){this._internalRoot=l}qg.prototype.render=g2.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var h=u.current,v=Ni();iI(h,v,l,u,null,null)},qg.prototype.unmount=g2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;iI(l.current,2,null,l,null,null),Sg(),u[to]=null}};function qg(l){this._internalRoot=l}qg.prototype.unstable_scheduleHydration=function(l){if(l){var u=S0();l={blockedOn:null,target:l,priority:u};for(var h=0;h<ll.length&&u!==0&&u<ll[h].priority;h++);ll.splice(h,0,l),h===0&&uI(l)}};var pI=e.version;if(pI!=="19.2.0")throw Error(n(527,pI,"19.2.0"));ie.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=f(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var aU={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gg.isDisabled&&Gg.supportsFiber)try{_a=Gg.inject(aU),xn=Gg}catch{}}return bh.createRoot=function(l,u){if(!i(l))throw Error(n(299));var h=!1,v="",b=w4,E=_4,P=A4;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(P=u.onRecoverableError)),u=rI(l,1,!1,null,null,h,v,null,b,E,P,hI),l[to]=u.current,Yx(l),new g2(u)},bh.hydrateRoot=function(l,u,h){if(!i(l))throw Error(n(299));var v=!1,b="",E=w4,P=_4,U=A4,q=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&(U=h.onRecoverableError),h.formState!==void 0&&(q=h.formState)),u=rI(l,1,!0,u,h??null,v,b,q,E,P,U,hI),u.context=nI(null),h=u.current,v=Ni(),v=sc(v),b=Ws(v),b.callback=null,Ks(h,b,v),h=v,u.current.lanes=h,ac(u,h),yo(u),l[to]=u.current,Yx(l),new qg(u)},bh.version="19.2.0",bh}var EI;function vU(){if(EI)return y2.exports;EI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),y2.exports=gU(),y2.exports}var mU=vU();const yU=ko(mU),xU=({title:t,onNavigate:e})=>m.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t,m.jsx("button",{onClick:()=>e("admin"),style:{background:"none",border:"1px solid white",color:"white",padding:"5px 10px",borderRadius:"5px",cursor:"pointer"},children:"Admin"})]});var uD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SI=Hn.createContext&&Hn.createContext(uD),bU=["attr","size","title"];function wU(t,e){if(t==null)return{};var r=_U(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _U(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function V1(){return V1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},V1.apply(this,arguments)}function CI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function H1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CI(Object(r),!0).forEach(function(n){AU(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AU(t,e,r){return e=EU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EU(t){var e=SU(t,"string");return typeof e=="symbol"?e:e+""}function SU(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fD(t){return t&&t.map((e,r)=>Hn.createElement(e.tag,H1({key:r},e.attr),fD(e.child)))}function Ae(t){return e=>Hn.createElement(CU,V1({attr:H1({},t.attr)},e),fD(t.child))}function CU(t){var e=r=>{var{attr:n,size:i,title:a}=t,o=wU(t,bU),s=i||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Hn.createElement("svg",V1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:H1(H1({color:t.color||r.color},r.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Hn.createElement("title",null,a),t.children)};return SI!==void 0?Hn.createElement(SI.Consumer,null,r=>e(r)):e(uD)}function TU(t){return Ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function IU(t){return Ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function nm(t){return Ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function OU(t){return Ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function RU(t){return Ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function im(t){return Ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"},child:[]}]})(t)}function am(t){return Ae({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}function PU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"},child:[]}]})(t)}function DU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15-5-2.18L7 18V5h10v13z"},child:[]}]})(t)}function NU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function Tp(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(t)}function Ip(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function kU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function gu(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function MU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"},child:[]}]})(t)}function dD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"},child:[]}]})(t)}function hD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},child:[]}]})(t)}function jU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function LU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(t)}function BU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2 11.7V16h-4v-2.3C8.48 12.63 7 11.53 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.49-1.51 3.65-3 4.7z"},child:[]}]})(t)}function El(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function zU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"},child:[]}]})(t)}function UU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function pD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"},child:[]}]})(t)}function uA(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function FU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function Op(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function VU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"},child:[]}]})(t)}function fA(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(t)}function gD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function vD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function HU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"},child:[]}]})(t)}function $U(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function mD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function om(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(t)}function qU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(t)}function rp(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function Pf(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2zm-5 12H9v-2h6v2zm5-7H4V4l16-.02V7z"},child:[]}]})(t)}function yD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"},child:[]}]})(t)}function TI(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(t)}function GU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"},child:[]}]})(t)}function dA(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(t)}function WU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function KU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(t)}function XU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"},child:[]}]})(t)}function YU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"},child:[]}]})(t)}function QU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(t)}function $1(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function np(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m9.4 10.5 4.77-8.26a9.984 9.984 0 0 0-8.49 2.01l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25A9.91 9.91 0 0 0 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75A9.958 9.958 0 0 0 2.2 14h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35-.93 1.6z"},child:[]}]})(t)}function xD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function ZU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function JU(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3.2"},child:[]},{tag:"path",attr:{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},child:[]}]})(t)}function ip(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m8.1 13.34 2.83-2.83L3.91 3.5a4.008 4.008 0 0 0 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"},child:[]}]})(t)}function hA(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"},child:[]}]})(t)}function Rp(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(t)}function _2(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},child:[]}]})(t)}function eF(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function bD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"},child:[]}]})(t)}function pA(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"},child:[]}]})(t)}function ru(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function wD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function tF(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function rF(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94A5.01 5.01 0 0 0 11 15.9V19H7v2h10v-2h-4v-3.1a5.01 5.01 0 0 0 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"},child:[]}]})(t)}function _D(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function AD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function ED(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function SD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4zm3 2v2h6v-2h-6zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4z"},child:[]}]})(t)}function Df(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function CD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(t)}function TD(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"},child:[]}]})(t)}function nF(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"},child:[]}]})(t)}function Tw(t){return Ae({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const iF=({currentScreen:t,onNavigate:e})=>{const r=[{screen:"home",icon:m.jsx(OU,{size:24}),label:"ホーム"},{screen:"meals",icon:m.jsx(hA,{size:24}),label:"食事"},{screen:"barcode",icon:m.jsx(IU,{size:24}),label:"スキャン"},{screen:"report",icon:m.jsx(TU,{size:24}),label:"レポート"},{screen:"social",icon:m.jsx(AD,{size:24}),label:"ソーシャル"},{screen:"settings",icon:m.jsx(RU,{size:24}),label:"設定"}];return m.jsx("nav",{id:"bottomNav",children:r.map(n=>m.jsxs("button",{className:`nav-item ${t===n.screen?"active":""}`,onClick:()=>e(n.screen),children:[m.jsx("span",{children:n.icon}),m.jsx("span",{children:n.label})]},n.screen))})},II=t=>{let e;const r=new Set,n=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const g=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),r.forEach(y=>y(e,g))}},i=()=>e,s={setState:n,getState:i,getInitialState:()=>c,subscribe:f=>(r.add(f),()=>r.delete(f))},c=e=t(n,i,s);return s},aF=(t=>t?II(t):II),oF=t=>t;function sF(t,e=oF){const r=Hn.useSyncExternalStore(t.subscribe,Hn.useCallback(()=>e(t.getState()),[t,e]),Hn.useCallback(()=>e(t.getInitialState()),[t,e]));return Hn.useDebugValue(r),r}const OI=t=>{const e=aF(t),r=n=>sF(e,n);return Object.assign(r,e),r},vu=(t=>t?OI(t):OI);function Nl(t,e){try{const r=localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.error(`localStorage取得エラー (${t}):`,r),e}}function Lt(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`localStorage保存エラー (${t}):`,r)}}const it={INTAKES:"intakes",EXPENSES:"expenses",STOCKS:"stocks",SHOPPING:"shopping",RECIPE_HISTORY:"recipeHistory",FAVORITE_RECIPES:"favoriteRecipes",SETTINGS:"settings",BADGES:"app-badges"},Sn=[];for(let t=0;t<256;++t)Sn.push((t+256).toString(16).slice(1));function lF(t,e=0){return(Sn[t[e+0]]+Sn[t[e+1]]+Sn[t[e+2]]+Sn[t[e+3]]+"-"+Sn[t[e+4]]+Sn[t[e+5]]+"-"+Sn[t[e+6]]+Sn[t[e+7]]+"-"+Sn[t[e+8]]+Sn[t[e+9]]+"-"+Sn[t[e+10]]+Sn[t[e+11]]+Sn[t[e+12]]+Sn[t[e+13]]+Sn[t[e+14]]+Sn[t[e+15]]).toLowerCase()}let A2;const cF=new Uint8Array(16);function uF(){if(!A2){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");A2=crypto.getRandomValues.bind(crypto)}return A2(cF)}const fF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),RI={randomUUID:fF};function dF(t,e,r){t=t||{};const n=t.random??t.rng?.()??uF();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,lF(n)}function hF(t,e,r){return RI.randomUUID&&!t?RI.randomUUID():dF(t)}function Sl(){return hF()}const pF=()=>{};var PI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},gF=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],s=t[r++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},OD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,s=o?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,d=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,y=f&63;c||(y=64,o||(g=64)),n.push(r[d],r[p],r[g],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ID(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],s=i<t.length?r[t.charAt(i)]:0;++i;const f=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new vF;const g=a<<2|s>>4;if(n.push(g),f!==64){const y=s<<4&240|f>>2;if(n.push(y),p!==64){const w=f<<6&192|p;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mF=function(t){const e=ID(t);return OD.encodeByteArray(e,!0)},q1=function(t){return mF(t).replace(/\./g,"")},RD=function(t){try{return OD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=()=>yF().__FIREBASE_DEFAULTS__,bF=()=>{if(typeof process>"u"||typeof PI>"u")return;const t=PI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RD(t[1]);return e&&JSON.parse(e)},sm=()=>{try{return pF()||xF()||bF()||wF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PD=t=>sm()?.emulatorHosts?.[t],gA=t=>{const e=PD(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},DD=()=>sm()?.config,ND=t=>sm()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[q1(JSON.stringify(r)),q1(JSON.stringify(o)),""].join(".")}const Wh={};function AF(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wh))Wh[e]?t.emulator.push(e):t.prod.push(e);return t}function EF(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let DI=!1;function cm(t,e){if(typeof window>"u"||typeof document>"u"||!Mo(window.location.host)||Wh[t]===e||Wh[t]||DI)return;Wh[t]=e;function r(g){return`__firebase__banner__${g}`}const n="__firebase__banner",a=AF().prod.length>0;function o(){const g=document.getElementById(n);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{DI=!0,o()},g}function d(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=EF(n),y=r("text"),w=document.getElementById(y)||document.createElement("span"),_=r("learnmore"),A=document.getElementById(_)||document.createElement("a"),S=r("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const R=g.element;s(R),d(A,_);const N=f();c(T,S),R.append(T,w,A,N),document.body.appendChild(R)}a?(w.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function CF(){const t=sm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RF(){const t=Gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PF(){return!CF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DF(){try{return typeof indexedDB=="object"}catch{return!1}}function NF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="FirebaseError";class qa extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=kF,Object.setPrototypeOf(this,qa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pp.prototype.create)}}class Pp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?MF(a,n):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new qa(i,s,n)}}function MF(t,e){return t.replace(jF,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const jF=/\{\$([^}]+)}/g;function LF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nu(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(NI(a)&&NI(o)){if(!nu(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function NI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Mh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function jh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function BF(t,e){const r=new zF(t,e);return r.subscribe.bind(r)}class zF{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");UF(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=E2),i.error===void 0&&(i.error=E2),i.complete===void 0&&(i.complete=E2);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UF(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function E2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FF=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new _F;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HF(e))try{this.getOrInitializeService({instanceIdentifier:Mc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Mc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mc){return this.instances.has(e)}getOptions(e=Mc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);n===s&&o.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:VF(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Mc){return this.component?this.component.multipleInstances?e:Mc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function VF(t){return t===Mc?void 0:t}function HF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new FF(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const qF={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},GF=lt.INFO,WF={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},KF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=WF[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vA{constructor(e){this.name=e,this._logLevel=GF,this._logHandler=KF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const XF=(t,e)=>e.some(r=>t instanceof r);let kI,MI;function YF(){return kI||(kI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QF(){return MI||(MI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MD=new WeakMap,Iw=new WeakMap,jD=new WeakMap,S2=new WeakMap,mA=new WeakMap;function ZF(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Cl(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&MD.set(r,t)}).catch(()=>{}),mA.set(e,t),e}function JF(t){if(Iw.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Iw.set(t,e)}let Ow={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Iw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jD.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Cl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eV(t){Ow=t(Ow)}function tV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(C2(this),e,...r);return jD.set(n,e.sort?e.sort():[e]),Cl(n)}:QF().includes(t)?function(...e){return t.apply(C2(this),e),Cl(MD.get(this))}:function(...e){return Cl(t.apply(C2(this),e))}}function rV(t){return typeof t=="function"?tV(t):(t instanceof IDBTransaction&&JF(t),XF(t,YF())?new Proxy(t,Ow):t)}function Cl(t){if(t instanceof IDBRequest)return ZF(t);if(S2.has(t))return S2.get(t);const e=rV(t);return e!==t&&(S2.set(t,e),mA.set(e,t)),e}const C2=t=>mA.get(t);function nV(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=Cl(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Cl(o.result),c.oldVersion,c.newVersion,Cl(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),s.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const iV=["get","getKey","getAll","getAllKeys","count"],aV=["put","add","delete","clear"],T2=new Map;function jI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T2.get(e))return T2.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=aV.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||iV.includes(r)))return;const a=async function(o,...s){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return n&&(f=f.index(s.shift())),(await Promise.all([f[r](...s),i&&c.done]))[0]};return T2.set(e,a),a}eV(t=>({...t,get:(e,r,n)=>jI(e,r)||t.get(e,r,n),has:(e,r)=>!!jI(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(sV(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function sV(t){return t.getComponent()?.type==="VERSION"}const Rw="@firebase/app",LI="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new vA("@firebase/app"),lV="@firebase/app-compat",cV="@firebase/analytics-compat",uV="@firebase/analytics",fV="@firebase/app-check-compat",dV="@firebase/app-check",hV="@firebase/auth",pV="@firebase/auth-compat",gV="@firebase/database",vV="@firebase/data-connect",mV="@firebase/database-compat",yV="@firebase/functions",xV="@firebase/functions-compat",bV="@firebase/installations",wV="@firebase/installations-compat",_V="@firebase/messaging",AV="@firebase/messaging-compat",EV="@firebase/performance",SV="@firebase/performance-compat",CV="@firebase/remote-config",TV="@firebase/remote-config-compat",IV="@firebase/storage",OV="@firebase/storage-compat",RV="@firebase/firestore",PV="@firebase/ai",DV="@firebase/firestore-compat",NV="firebase",kV="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="[DEFAULT]",MV={[Rw]:"fire-core",[lV]:"fire-core-compat",[uV]:"fire-analytics",[cV]:"fire-analytics-compat",[dV]:"fire-app-check",[fV]:"fire-app-check-compat",[hV]:"fire-auth",[pV]:"fire-auth-compat",[gV]:"fire-rtdb",[vV]:"fire-data-connect",[mV]:"fire-rtdb-compat",[yV]:"fire-fn",[xV]:"fire-fn-compat",[bV]:"fire-iid",[wV]:"fire-iid-compat",[_V]:"fire-fcm",[AV]:"fire-fcm-compat",[EV]:"fire-perf",[SV]:"fire-perf-compat",[CV]:"fire-rc",[TV]:"fire-rc-compat",[IV]:"fire-gcs",[OV]:"fire-gcs-compat",[RV]:"fire-fst",[DV]:"fire-fst-compat",[PV]:"fire-vertex","fire-js":"fire-js",[NV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=new Map,jV=new Map,Dw=new Map;function BI(t,e){try{t.container.addComponent(e)}catch(r){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function kl(t){const e=t.name;if(Dw.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;Dw.set(e,t);for(const r of G1.values())BI(r,t);for(const r of jV.values())BI(r,t);return!0}function Np(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ri(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tl=new Pp("app","Firebase",LV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=kV;function LD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Pw,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Tl.create("bad-app-name",{appName:String(i)});if(r||(r=DD()),!r)throw Tl.create("no-options");const a=G1.get(i);if(a){if(nu(r,a.options)&&nu(n,a.config))return a;throw Tl.create("duplicate-app",{appName:i})}const o=new $F(i);for(const c of Dw.values())o.addComponent(c);const s=new BV(r,n,o);return G1.set(i,s),s}function um(t=Pw){const e=G1.get(t);if(!e&&t===Pw&&DD())return LD();if(!e)throw Tl.create("no-app",{appName:t});return e}function ga(t,e,r){let n=MV[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${n}" with version "${e}":`];i&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(o.join(" "));return}kl(new hs(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="firebase-heartbeat-database",UV=1,ap="firebase-heartbeat-store";let I2=null;function BD(){return I2||(I2=nV(zV,UV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ap)}catch(r){console.warn(r)}}}}).catch(t=>{throw Tl.create("idb-open",{originalErrorMessage:t.message})})),I2}async function FV(t){try{const r=(await BD()).transaction(ap),n=await r.objectStore(ap).get(zD(t));return await r.done,n}catch(e){if(e instanceof qa)ps.warn(e.message);else{const r=Tl.create("idb-get",{originalErrorMessage:e?.message});ps.warn(r.message)}}}async function zI(t,e){try{const n=(await BD()).transaction(ap,"readwrite");await n.objectStore(ap).put(e,zD(t)),await n.done}catch(r){if(r instanceof qa)ps.warn(r.message);else{const n=Tl.create("idb-set",{originalErrorMessage:r?.message});ps.warn(n.message)}}}function zD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=1024,HV=30;class $V{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new GV(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=UI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>HV){const i=WV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ps.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=UI(),{heartbeatsToSend:r,unsentEntries:n}=qV(this._heartbeatsCache.heartbeats),i=q1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ps.warn(e),""}}}function UI(){return new Date().toISOString().substring(0,10)}function qV(t,e=VV){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),FI(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),FI(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class GV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DF()?NF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await FV(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return zI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return zI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function FI(t){return q1(JSON.stringify({version:2,heartbeats:t})).length}function WV(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t){kl(new hs("platform-logger",e=>new oV(e),"PRIVATE")),kl(new hs("heartbeat",e=>new $V(e),"PRIVATE")),ga(Rw,LI,t),ga(Rw,LI,"esm2020"),ga("fire-js","")}KV("");var VI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Il,UD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,D){function j(){}j.prototype=D.prototype,O.F=D.prototype,O.prototype=new j,O.prototype.constructor=O,O.D=function(B,z,V){for(var F=Array(arguments.length-2),he=2;he<arguments.length;he++)F[he-2]=arguments[he];return D.prototype[z].apply(B,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,D,j){j||(j=0);const B=Array(16);if(typeof D=="string")for(var z=0;z<16;++z)B[z]=D.charCodeAt(j++)|D.charCodeAt(j++)<<8|D.charCodeAt(j++)<<16|D.charCodeAt(j++)<<24;else for(z=0;z<16;++z)B[z]=D[j++]|D[j++]<<8|D[j++]<<16|D[j++]<<24;D=O.g[0],j=O.g[1],z=O.g[2];let V=O.g[3],F;F=D+(V^j&(z^V))+B[0]+3614090360&4294967295,D=j+(F<<7&4294967295|F>>>25),F=V+(z^D&(j^z))+B[1]+3905402710&4294967295,V=D+(F<<12&4294967295|F>>>20),F=z+(j^V&(D^j))+B[2]+606105819&4294967295,z=V+(F<<17&4294967295|F>>>15),F=j+(D^z&(V^D))+B[3]+3250441966&4294967295,j=z+(F<<22&4294967295|F>>>10),F=D+(V^j&(z^V))+B[4]+4118548399&4294967295,D=j+(F<<7&4294967295|F>>>25),F=V+(z^D&(j^z))+B[5]+1200080426&4294967295,V=D+(F<<12&4294967295|F>>>20),F=z+(j^V&(D^j))+B[6]+2821735955&4294967295,z=V+(F<<17&4294967295|F>>>15),F=j+(D^z&(V^D))+B[7]+4249261313&4294967295,j=z+(F<<22&4294967295|F>>>10),F=D+(V^j&(z^V))+B[8]+1770035416&4294967295,D=j+(F<<7&4294967295|F>>>25),F=V+(z^D&(j^z))+B[9]+2336552879&4294967295,V=D+(F<<12&4294967295|F>>>20),F=z+(j^V&(D^j))+B[10]+4294925233&4294967295,z=V+(F<<17&4294967295|F>>>15),F=j+(D^z&(V^D))+B[11]+2304563134&4294967295,j=z+(F<<22&4294967295|F>>>10),F=D+(V^j&(z^V))+B[12]+1804603682&4294967295,D=j+(F<<7&4294967295|F>>>25),F=V+(z^D&(j^z))+B[13]+4254626195&4294967295,V=D+(F<<12&4294967295|F>>>20),F=z+(j^V&(D^j))+B[14]+2792965006&4294967295,z=V+(F<<17&4294967295|F>>>15),F=j+(D^z&(V^D))+B[15]+1236535329&4294967295,j=z+(F<<22&4294967295|F>>>10),F=D+(z^V&(j^z))+B[1]+4129170786&4294967295,D=j+(F<<5&4294967295|F>>>27),F=V+(j^z&(D^j))+B[6]+3225465664&4294967295,V=D+(F<<9&4294967295|F>>>23),F=z+(D^j&(V^D))+B[11]+643717713&4294967295,z=V+(F<<14&4294967295|F>>>18),F=j+(V^D&(z^V))+B[0]+3921069994&4294967295,j=z+(F<<20&4294967295|F>>>12),F=D+(z^V&(j^z))+B[5]+3593408605&4294967295,D=j+(F<<5&4294967295|F>>>27),F=V+(j^z&(D^j))+B[10]+38016083&4294967295,V=D+(F<<9&4294967295|F>>>23),F=z+(D^j&(V^D))+B[15]+3634488961&4294967295,z=V+(F<<14&4294967295|F>>>18),F=j+(V^D&(z^V))+B[4]+3889429448&4294967295,j=z+(F<<20&4294967295|F>>>12),F=D+(z^V&(j^z))+B[9]+568446438&4294967295,D=j+(F<<5&4294967295|F>>>27),F=V+(j^z&(D^j))+B[14]+3275163606&4294967295,V=D+(F<<9&4294967295|F>>>23),F=z+(D^j&(V^D))+B[3]+4107603335&4294967295,z=V+(F<<14&4294967295|F>>>18),F=j+(V^D&(z^V))+B[8]+1163531501&4294967295,j=z+(F<<20&4294967295|F>>>12),F=D+(z^V&(j^z))+B[13]+2850285829&4294967295,D=j+(F<<5&4294967295|F>>>27),F=V+(j^z&(D^j))+B[2]+4243563512&4294967295,V=D+(F<<9&4294967295|F>>>23),F=z+(D^j&(V^D))+B[7]+1735328473&4294967295,z=V+(F<<14&4294967295|F>>>18),F=j+(V^D&(z^V))+B[12]+2368359562&4294967295,j=z+(F<<20&4294967295|F>>>12),F=D+(j^z^V)+B[5]+4294588738&4294967295,D=j+(F<<4&4294967295|F>>>28),F=V+(D^j^z)+B[8]+2272392833&4294967295,V=D+(F<<11&4294967295|F>>>21),F=z+(V^D^j)+B[11]+1839030562&4294967295,z=V+(F<<16&4294967295|F>>>16),F=j+(z^V^D)+B[14]+4259657740&4294967295,j=z+(F<<23&4294967295|F>>>9),F=D+(j^z^V)+B[1]+2763975236&4294967295,D=j+(F<<4&4294967295|F>>>28),F=V+(D^j^z)+B[4]+1272893353&4294967295,V=D+(F<<11&4294967295|F>>>21),F=z+(V^D^j)+B[7]+4139469664&4294967295,z=V+(F<<16&4294967295|F>>>16),F=j+(z^V^D)+B[10]+3200236656&4294967295,j=z+(F<<23&4294967295|F>>>9),F=D+(j^z^V)+B[13]+681279174&4294967295,D=j+(F<<4&4294967295|F>>>28),F=V+(D^j^z)+B[0]+3936430074&4294967295,V=D+(F<<11&4294967295|F>>>21),F=z+(V^D^j)+B[3]+3572445317&4294967295,z=V+(F<<16&4294967295|F>>>16),F=j+(z^V^D)+B[6]+76029189&4294967295,j=z+(F<<23&4294967295|F>>>9),F=D+(j^z^V)+B[9]+3654602809&4294967295,D=j+(F<<4&4294967295|F>>>28),F=V+(D^j^z)+B[12]+3873151461&4294967295,V=D+(F<<11&4294967295|F>>>21),F=z+(V^D^j)+B[15]+530742520&4294967295,z=V+(F<<16&4294967295|F>>>16),F=j+(z^V^D)+B[2]+3299628645&4294967295,j=z+(F<<23&4294967295|F>>>9),F=D+(z^(j|~V))+B[0]+4096336452&4294967295,D=j+(F<<6&4294967295|F>>>26),F=V+(j^(D|~z))+B[7]+1126891415&4294967295,V=D+(F<<10&4294967295|F>>>22),F=z+(D^(V|~j))+B[14]+2878612391&4294967295,z=V+(F<<15&4294967295|F>>>17),F=j+(V^(z|~D))+B[5]+4237533241&4294967295,j=z+(F<<21&4294967295|F>>>11),F=D+(z^(j|~V))+B[12]+1700485571&4294967295,D=j+(F<<6&4294967295|F>>>26),F=V+(j^(D|~z))+B[3]+2399980690&4294967295,V=D+(F<<10&4294967295|F>>>22),F=z+(D^(V|~j))+B[10]+4293915773&4294967295,z=V+(F<<15&4294967295|F>>>17),F=j+(V^(z|~D))+B[1]+2240044497&4294967295,j=z+(F<<21&4294967295|F>>>11),F=D+(z^(j|~V))+B[8]+1873313359&4294967295,D=j+(F<<6&4294967295|F>>>26),F=V+(j^(D|~z))+B[15]+4264355552&4294967295,V=D+(F<<10&4294967295|F>>>22),F=z+(D^(V|~j))+B[6]+2734768916&4294967295,z=V+(F<<15&4294967295|F>>>17),F=j+(V^(z|~D))+B[13]+1309151649&4294967295,j=z+(F<<21&4294967295|F>>>11),F=D+(z^(j|~V))+B[4]+4149444226&4294967295,D=j+(F<<6&4294967295|F>>>26),F=V+(j^(D|~z))+B[11]+3174756917&4294967295,V=D+(F<<10&4294967295|F>>>22),F=z+(D^(V|~j))+B[2]+718787259&4294967295,z=V+(F<<15&4294967295|F>>>17),F=j+(V^(z|~D))+B[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(z+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+z&4294967295,O.g[3]=O.g[3]+V&4294967295}n.prototype.v=function(O,D){D===void 0&&(D=O.length);const j=D-this.blockSize,B=this.C;let z=this.h,V=0;for(;V<D;){if(z==0)for(;V<=j;)i(this,O,V),V+=this.blockSize;if(typeof O=="string"){for(;V<D;)if(B[z++]=O.charCodeAt(V++),z==this.blockSize){i(this,B),z=0;break}}else for(;V<D;)if(B[z++]=O[V++],z==this.blockSize){i(this,B),z=0;break}}this.h=z,this.o+=D},n.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;D=this.o*8;for(var j=O.length-8;j<O.length;++j)O[j]=D&255,D/=256;for(this.v(O),O=Array(16),D=0,j=0;j<4;++j)for(let B=0;B<32;B+=8)O[D++]=this.g[j]>>>B&255;return O};function a(O,D){var j=s;return Object.prototype.hasOwnProperty.call(j,O)?j[O]:j[O]=D(O)}function o(O,D){this.h=D;const j=[];let B=!0;for(let z=O.length-1;z>=0;z--){const V=O[z]|0;B&&V==D||(j[z]=V,B=!1)}this.g=j}var s={};function c(O){return-128<=O&&O<128?a(O,function(D){return new o([D|0],D<0?-1:0)}):new o([O|0],O<0?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return p;if(O<0)return A(f(-O));const D=[];let j=1;for(let B=0;O>=j;B++)D[B]=O/j|0,j*=4294967296;return new o(D,0)}function d(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return A(d(O.substring(1),D));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=f(Math.pow(D,8));let B=p;for(let V=0;V<O.length;V+=8){var z=Math.min(8,O.length-V);const F=parseInt(O.substring(V,V+z),D);z<8?(z=f(Math.pow(D,z)),B=B.j(z).add(f(F))):(B=B.j(j),B=B.add(f(F)))}return B}var p=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(_(this))return-A(this).m();let O=0,D=1;for(let j=0;j<this.g.length;j++){const B=this.i(j);O+=(B>=0?B:4294967296+B)*D,D*=4294967296}return O},t.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(w(this))return"0";if(_(this))return"-"+A(this).toString(O);const D=f(Math.pow(O,6));var j=this;let B="";for(;;){const z=N(j,D).g;j=S(j,z.j(D));let V=((j.g.length>0?j.g[0]:j.h)>>>0).toString(O);if(j=z,w(j))return V+B;for(;V.length<6;)V="0"+V;B=V+B}},t.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function w(O){if(O.h!=0)return!1;for(let D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function _(O){return O.h==-1}t.l=function(O){return O=S(this,O),_(O)?-1:w(O)?0:1};function A(O){const D=O.g.length,j=[];for(let B=0;B<D;B++)j[B]=~O.g[B];return new o(j,~O.h).add(g)}t.abs=function(){return _(this)?A(this):this},t.add=function(O){const D=Math.max(this.g.length,O.g.length),j=[];let B=0;for(let z=0;z<=D;z++){let V=B+(this.i(z)&65535)+(O.i(z)&65535),F=(V>>>16)+(this.i(z)>>>16)+(O.i(z)>>>16);B=F>>>16,V&=65535,F&=65535,j[z]=F<<16|V}return new o(j,j[j.length-1]&-2147483648?-1:0)};function S(O,D){return O.add(A(D))}t.j=function(O){if(w(this)||w(O))return p;if(_(this))return _(O)?A(this).j(A(O)):A(A(this).j(O));if(_(O))return A(this.j(A(O)));if(this.l(y)<0&&O.l(y)<0)return f(this.m()*O.m());const D=this.g.length+O.g.length,j=[];for(var B=0;B<2*D;B++)j[B]=0;for(B=0;B<this.g.length;B++)for(let z=0;z<O.g.length;z++){const V=this.i(B)>>>16,F=this.i(B)&65535,he=O.i(z)>>>16,_e=O.i(z)&65535;j[2*B+2*z]+=F*_e,T(j,2*B+2*z),j[2*B+2*z+1]+=V*_e,T(j,2*B+2*z+1),j[2*B+2*z+1]+=F*he,T(j,2*B+2*z+1),j[2*B+2*z+2]+=V*he,T(j,2*B+2*z+2)}for(O=0;O<D;O++)j[O]=j[2*O+1]<<16|j[2*O];for(O=D;O<2*D;O++)j[O]=0;return new o(j,0)};function T(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function R(O,D){this.g=O,this.h=D}function N(O,D){if(w(D))throw Error("division by zero");if(w(O))return new R(p,p);if(_(O))return D=N(A(O),D),new R(A(D.g),A(D.h));if(_(D))return D=N(O,A(D)),new R(A(D.g),D.h);if(O.g.length>30){if(_(O)||_(D))throw Error("slowDivide_ only works with positive integers.");for(var j=g,B=D;B.l(O)<=0;)j=M(j),B=M(B);var z=L(j,1),V=L(B,1);for(B=L(B,2),j=L(j,2);!w(B);){var F=V.add(B);F.l(O)<=0&&(z=z.add(j),V=F),B=L(B,1),j=L(j,1)}return D=S(O,z.j(D)),new R(z,D)}for(z=p;O.l(D)>=0;){for(j=Math.max(1,Math.floor(O.m()/D.m())),B=Math.ceil(Math.log(j)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),V=f(j),F=V.j(D);_(F)||F.l(O)>0;)j-=B,V=f(j),F=V.j(D);w(V)&&(V=g),z=z.add(V),O=S(O,F)}return new R(z,O)}t.B=function(O){return N(this,O).h},t.and=function(O){const D=Math.max(this.g.length,O.g.length),j=[];for(let B=0;B<D;B++)j[B]=this.i(B)&O.i(B);return new o(j,this.h&O.h)},t.or=function(O){const D=Math.max(this.g.length,O.g.length),j=[];for(let B=0;B<D;B++)j[B]=this.i(B)|O.i(B);return new o(j,this.h|O.h)},t.xor=function(O){const D=Math.max(this.g.length,O.g.length),j=[];for(let B=0;B<D;B++)j[B]=this.i(B)^O.i(B);return new o(j,this.h^O.h)};function M(O){const D=O.g.length+1,j=[];for(let B=0;B<D;B++)j[B]=O.i(B)<<1|O.i(B-1)>>>31;return new o(j,O.h)}function L(O,D){const j=D>>5;D%=32;const B=O.g.length-j,z=[];for(let V=0;V<B;V++)z[V]=D>0?O.i(V+j)>>>D|O.i(V+j+1)<<32-D:O.i(V+j);return new o(z,O.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,UD=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,Il=o}).apply(typeof VI<"u"?VI:typeof self<"u"?self:typeof window<"u"?window:{});var Wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FD,Lh,VD,T1,Nw,HD,$D,qD;(function(){var t,e=Object.defineProperty;function r(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wg=="object"&&Wg];for(var I=0;I<x.length;++I){var k=x[I];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var n=r(this);function i(x,I){if(I)e:{var k=n;x=x.split(".");for(var H=0;H<x.length-1;H++){var Q=x[H];if(!(Q in k))break e;k=k[Q]}x=x[x.length-1],H=k[x],I=I(H),I!=H&&I!=null&&e(k,x,{configurable:!0,writable:!0,value:I})}}i("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(x){return x||function(I){var k=[],H;for(H in I)Object.prototype.hasOwnProperty.call(I,H)&&k.push([H,I[H]]);return k}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function s(x){var I=typeof x;return I=="object"&&x!=null||I=="function"}function c(x,I,k){return x.call.apply(x.bind,arguments)}function f(x,I,k){return f=c,f.apply(null,arguments)}function d(x,I){var k=Array.prototype.slice.call(arguments,1);return function(){var H=k.slice();return H.push.apply(H,arguments),x.apply(this,H)}}function p(x,I){function k(){}k.prototype=I.prototype,x.Z=I.prototype,x.prototype=new k,x.prototype.constructor=x,x.Ob=function(H,Q,ae){for(var ye=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ye[Ke-2]=arguments[Ke];return I.prototype[Q].apply(H,ye)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function y(x){const I=x.length;if(I>0){const k=Array(I);for(let H=0;H<I;H++)k[H]=x[H];return k}return[]}function w(x,I){for(let H=1;H<arguments.length;H++){const Q=arguments[H];var k=typeof Q;if(k=k!="object"?k:Q?Array.isArray(Q)?"array":k:"null",k=="array"||k=="object"&&typeof Q.length=="number"){k=x.length||0;const ae=Q.length||0;x.length=k+ae;for(let ye=0;ye<ae;ye++)x[k+ye]=Q[ye]}else x.push(Q)}}class _{constructor(I,k){this.i=I,this.j=k,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function A(x){o.setTimeout(()=>{throw x},0)}function S(){var x=O;let I=null;return x.g&&(I=x.g,x.g=x.g.next,x.g||(x.h=null),I.next=null),I}class T{constructor(){this.h=this.g=null}add(I,k){const H=R.get();H.set(I,k),this.h?this.h.next=H:this.g=H,this.h=H}}var R=new _(()=>new N,x=>x.reset());class N{constructor(){this.next=this.g=this.h=null}set(I,k){this.h=I,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let M,L=!1,O=new T,D=()=>{const x=Promise.resolve(void 0);M=()=>{x.then(j)}};function j(){for(var x;x=S();){try{x.h.call(x.g)}catch(k){A(k)}var I=R;I.j(x),I.h<100&&(I.h++,x.next=I.g,I.g=x)}L=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(x,I){this.type=x,this.g=this.target=I,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var x=!1,I=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const k=()=>{};o.addEventListener("test",k,I),o.removeEventListener("test",k,I)}catch{}return x})();function F(x){return/^[\s\xa0]*$/.test(x)}function he(x,I){z.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,I)}p(he,z),he.prototype.init=function(x,I){const k=this.type=x.type,H=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=I,I=x.relatedTarget,I||(k=="mouseover"?I=x.fromElement:k=="mouseout"&&(I=x.toElement)),this.relatedTarget=I,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ie(x,I,k,H,Q){this.listener=x,this.proxy=null,this.src=I,this.type=k,this.capture=!!H,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function K(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function ve(x,I,k){for(const H in x)I.call(k,x[H],H,x)}function Ie(x,I){for(const k in x)I.call(void 0,x[k],k,x)}function G(x){const I={};for(const k in x)I[k]=x[k];return I}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(x,I){let k,H;for(let Q=1;Q<arguments.length;Q++){H=arguments[Q];for(k in H)x[k]=H[k];for(let ae=0;ae<Z.length;ae++)k=Z[ae],Object.prototype.hasOwnProperty.call(H,k)&&(x[k]=H[k])}}function Ee(x){this.src=x,this.g={},this.h=0}Ee.prototype.add=function(x,I,k,H,Q){const ae=x.toString();x=this.g[ae],x||(x=this.g[ae]=[],this.h++);const ye=We(x,I,H,Q);return ye>-1?(I=x[ye],k||(I.fa=!1)):(I=new ie(I,this.src,ae,!!H,Q),I.fa=k,x.push(I)),I};function De(x,I){const k=I.type;if(k in x.g){var H=x.g[k],Q=Array.prototype.indexOf.call(H,I,void 0),ae;(ae=Q>=0)&&Array.prototype.splice.call(H,Q,1),ae&&(K(I),x.g[k].length==0&&(delete x.g[k],x.h--))}}function We(x,I,k,H){for(let Q=0;Q<x.length;++Q){const ae=x[Q];if(!ae.da&&ae.listener==I&&ae.capture==!!k&&ae.ha==H)return Q}return-1}var at="closure_lm_"+(Math.random()*1e6|0),br={};function me(x,I,k,H,Q){if(Array.isArray(I)){for(let ae=0;ae<I.length;ae++)me(x,I[ae],k,H,Q);return null}return k=Rs(k),x&&x[_e]?x.J(I,k,s(H)?!!H.capture:!1,Q):$e(x,I,k,!1,H,Q)}function $e(x,I,k,H,Q,ae){if(!I)throw Error("Invalid event type");const ye=s(Q)?!!Q.capture:!!Q;let Ke=_r(x);if(Ke||(x[at]=Ke=new Ee(x)),k=Ke.add(I,k,H,ye,ae),k.proxy)return k;if(H=Qe(),k.proxy=H,H.src=x,H.listener=k,x.addEventListener)V||(Q=ye),Q===void 0&&(Q=!1),x.addEventListener(I.toString(),H,Q);else if(x.attachEvent)x.attachEvent(tt(I.toString()),H);else if(x.addListener&&x.removeListener)x.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Qe(){function x(k){return I.call(x.src,x.listener,k)}const I=Gr;return x}function ge(x,I,k,H,Q){if(Array.isArray(I))for(var ae=0;ae<I.length;ae++)ge(x,I[ae],k,H,Q);else H=s(H)?!!H.capture:!!H,k=Rs(k),x&&x[_e]?(x=x.i,ae=String(I).toString(),ae in x.g&&(I=x.g[ae],k=We(I,k,H,Q),k>-1&&(K(I[k]),Array.prototype.splice.call(I,k,1),I.length==0&&(delete x.g[ae],x.h--)))):x&&(x=_r(x))&&(I=x.g[I.toString()],x=-1,I&&(x=We(I,k,H,Q)),(k=x>-1?I[x]:null)&&wr(k))}function wr(x){if(typeof x!="number"&&x&&!x.da){var I=x.src;if(I&&I[_e])De(I.i,x);else{var k=x.type,H=x.proxy;I.removeEventListener?I.removeEventListener(k,H,x.capture):I.detachEvent?I.detachEvent(tt(k),H):I.addListener&&I.removeListener&&I.removeListener(H),(k=_r(I))?(De(k,x),k.h==0&&(k.src=null,I[at]=null)):K(x)}}}function tt(x){return x in br?br[x]:br[x]="on"+x}function Gr(x,I){if(x.da)x=!0;else{I=new he(I,this);const k=x.listener,H=x.ha||x.src;x.fa&&wr(x),x=k.call(H,I)}return x}function _r(x){return x=x[at],x instanceof Ee?x:null}var Ei="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rs(x){return typeof x=="function"?x:(x[Ei]||(x[Ei]=function(I){return x.handleEvent(I)}),x[Ei])}function Dr(){B.call(this),this.i=new Ee(this),this.M=this,this.G=null}p(Dr,B),Dr.prototype[_e]=!0,Dr.prototype.removeEventListener=function(x,I,k,H){ge(this,x,I,k,H)};function Wr(x,I){var k,H=x.G;if(H)for(k=[];H;H=H.G)k.push(H);if(x=x.M,H=I.type||I,typeof I=="string")I=new z(I,x);else if(I instanceof z)I.target=I.target||x;else{var Q=I;I=new z(H,x),be(I,Q)}Q=!0;let ae,ye;if(k)for(ye=k.length-1;ye>=0;ye--)ae=I.g=k[ye],Q=Ps(ae,H,!0,I)&&Q;if(ae=I.g=x,Q=Ps(ae,H,!0,I)&&Q,Q=Ps(ae,H,!1,I)&&Q,k)for(ye=0;ye<k.length;ye++)ae=I.g=k[ye],Q=Ps(ae,H,!1,I)&&Q}Dr.prototype.N=function(){if(Dr.Z.N.call(this),this.i){var x=this.i;for(const I in x.g){const k=x.g[I];for(let H=0;H<k.length;H++)K(k[H]);delete x.g[I],x.h--}}this.G=null},Dr.prototype.J=function(x,I,k,H){return this.i.add(String(x),I,!1,k,H)},Dr.prototype.K=function(x,I,k,H){return this.i.add(String(x),I,!0,k,H)};function Ps(x,I,k,H){if(I=x.i.g[String(I)],!I)return!0;I=I.concat();let Q=!0;for(let ae=0;ae<I.length;++ae){const ye=I[ae];if(ye&&!ye.da&&ye.capture==k){const Ke=ye.listener,Er=ye.ha||ye.src;ye.fa&&De(x.i,ye),Q=Ke.call(Er,H)!==!1&&Q}}return Q&&!H.defaultPrevented}function yy(x,I){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:o.setTimeout(x,I||0)}function y0(x){x.g=yy(()=>{x.g=null,x.i&&(x.i=!1,y0(x))},x.l);const I=x.h;x.h=null,x.m.apply(null,I)}class Kn extends B{constructor(I,k){super(),this.m=I,this.l=k,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:y0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nc(x){B.call(this),this.h=x,this.g={}}p(nc,B);var yd=[];function xd(x){ve(x.g,function(I,k){this.g.hasOwnProperty(k)&&wr(I)},x),x.g={}}nc.prototype.N=function(){nc.Z.N.call(this),xd(this)},nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=o.JSON.stringify,xy=o.JSON.parse,x0=class{stringify(x){return o.JSON.stringify(x,void 0)}parse(x){return o.JSON.parse(x,void 0)}};function b0(){}function w0(){}var _a={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xn(){z.call(this,"d")}p(xn,z);function Wi(){z.call(this,"c")}p(Wi,z);var Ar={},_0=null;function Eu(){return _0=_0||new Dr}Ar.Ia="serverreachability";function A0(x){z.call(this,Ar.Ia,x)}p(A0,z);function Qa(x){const I=Eu();Wr(I,new A0(I))}Ar.STAT_EVENT="statevent";function ic(x,I){z.call(this,Ar.STAT_EVENT,x),this.stat=I}p(ic,z);function Nr(x){const I=Eu();Wr(I,new ic(I,x))}Ar.Ja="timingevent";function Za(x,I){z.call(this,Ar.Ja,x),this.size=I}p(Za,z);function Ja(x,I){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){x()},I)}function Aa(){this.g=!0}Aa.prototype.ua=function(){this.g=!1};function by(x,I,k,H,Q,ae){x.info(function(){if(x.g)if(ae){var ye="",Ke=ae.split("&");for(let At=0;At<Ke.length;At++){var Er=Ke[At].split("=");if(Er.length>1){const nr=Er[0];Er=Er[1];const Qi=nr.split("_");ye=Qi.length>=2&&Qi[1]=="type"?ye+(nr+"="+Er+"&"):ye+(nr+"=redacted&")}}}else ye=null;else ye=ae;return"XMLHTTP REQ ("+H+") [attempt "+Q+"]: "+I+`
`+k+`
`+ye})}function E0(x,I,k,H,Q,ae,ye){x.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+Q+"]: "+I+`
`+k+`
`+ae+" "+ye})}function eo(x,I,k,H){x.info(function(){return"XMLHTTP TEXT ("+I+"): "+wy(x,k)+(H?" "+H:"")})}function ac(x,I){x.info(function(){return"TIMEOUT: "+I})}Aa.prototype.info=function(){};function wy(x,I){if(!x.g)return I;if(!I)return null;try{const ae=JSON.parse(I);if(ae){for(x=0;x<ae.length;x++)if(Array.isArray(ae[x])){var k=ae[x];if(!(k.length<2)){var H=k[1];if(Array.isArray(H)&&!(H.length<1)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ye=1;ye<H.length;ye++)H[ye]=""}}}}return Ds(ae)}catch{return I}}var oc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wd;function sc(){}p(sc,b0),sc.prototype.g=function(){return new XMLHttpRequest},wd=new sc;function Lo(x){return encodeURIComponent(String(x))}function S0(x){var I=1;x=x.split(":");const k=[];for(;I>0&&x.length;)k.push(x.shift()),I--;return x.length&&k.push(x.join(":")),k}function Ea(x,I,k,H){this.j=x,this.i=I,this.l=k,this.S=H||1,this.V=new nc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sa}function Sa(){this.i=null,this.g="",this.h=!1}var kr={},sn={};function to(x,I,k){x.M=1,x.A=lc(jr(I)),x.u=k,x.R=!0,Su(x,null)}function Su(x,I){x.F=Date.now(),ro(x),x.B=jr(x.A);var k=x.B,H=x.S;Array.isArray(H)||(H=[String(H)]),Ou(k.i,"t",H),x.C=0,k=x.j.L,x.h=new Sa,x.g=U0(x.j,k?I:null,!x.u),x.P>0&&(x.O=new Kn(f(x.Y,x,x.g),x.P)),I=x.V,k=x.g,H=x.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(yd[0]=Q.toString()),Q=yd);for(let ae=0;ae<Q.length;ae++){const ye=me(k,Q[ae],H||I.handleEvent,!1,I.h||I);if(!ye)break;I.g[ye.key]=ye}I=x.J?G(x.J):{},x.u?(x.v||(x.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,I)):(x.v="GET",x.g.ea(x.B,x.v,null,I)),Qa(),by(x.i,x.v,x.B,x.l,x.S,x.u)}Ea.prototype.ba=function(x){x=x.target;const I=this.O;I&&Ia(x)==3?I.j():this.Y(x)},Ea.prototype.Y=function(x){try{if(x==this.g)e:{const Ke=Ia(this.g),Er=this.g.ya(),At=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||bn(this.g)))){this.K||Ke!=4||Er==7||(Er==8||At<=0?Qa(3):Qa(2)),no(this);var I=this.g.ca();this.X=I;var k=_y(this);if(this.o=I==200,E0(this.i,this.v,this.B,this.l,this.S,Ke,I),this.o){if(this.U&&!this.L){t:{if(this.g){var H,Q=this.g;if((H=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(H)){var ae=H;break t}}ae=null}if(x=ae)eo(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,io(this,x);else{this.o=!1,this.m=3,Nr(12),Si(this),Ki(this);break e}}if(this.R){x=!0;let nr;for(;!this.K&&this.C<k.length;)if(nr=T0(this,k),nr==sn){Ke==4&&(this.m=4,Nr(14),x=!1),eo(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==kr){this.m=4,Nr(15),eo(this.i,this.l,k,"[Invalid Chunk]"),x=!1;break}else eo(this.i,this.l,nr,null),io(this,nr);if(C0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||k.length!=0||this.h.h||(this.m=1,Nr(16),x=!1),this.o=this.o&&x,!x)eo(this.i,this.l,k,"[Invalid Chunked Response]"),Si(this),Ki(this);else if(k.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),jd(ye),ye.P=!0,Nr(11))}}else eo(this.i,this.l,k,null),io(this,k);Ke==4&&Si(this),this.o&&!this.K&&(Ke==4?j0(this.j,this):(this.o=!1,ro(this)))}else zo(this.g),I==400&&k.indexOf("Unknown SID")>0?(this.m=3,Nr(12)):(this.m=0,Nr(13)),Si(this),Ki(this)}}}catch{}finally{}};function _y(x){if(!C0(x))return x.g.la();const I=bn(x.g);if(I==="")return"";let k="";const H=I.length,Q=Ia(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Si(x),Ki(x),"";x.h.i=new o.TextDecoder}for(let ae=0;ae<H;ae++)x.h.h=!0,k+=x.h.i.decode(I[ae],{stream:!(Q&&ae==H-1)});return I.length=0,x.h.g+=k,x.C=0,x.h.g}function C0(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function T0(x,I){var k=x.C,H=I.indexOf(`
`,k);return H==-1?sn:(k=Number(I.substring(k,H)),isNaN(k)?kr:(H+=1,H+k>I.length?sn:(I=I.slice(H,H+k),x.C=H+k,I)))}Ea.prototype.cancel=function(){this.K=!0,Si(this)};function ro(x){x.T=Date.now()+x.H,Cu(x,x.H)}function Cu(x,I){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Ja(f(x.aa,x),I)}function no(x){x.D&&(o.clearTimeout(x.D),x.D=null)}Ea.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(ac(this.i,this.B),this.M!=2&&(Qa(),Nr(17)),Si(this),this.m=2,Ki(this)):Cu(this,this.T-x)};function Ki(x){x.j.I==0||x.K||j0(x.j,x)}function Si(x){no(x);var I=x.O;I&&typeof I.dispose=="function"&&I.dispose(),x.O=null,xd(x.V),x.g&&(I=x.g,x.g=null,I.abort(),I.dispose())}function io(x,I){try{var k=x.j;if(k.I!=0&&(k.g==x||oo(k.h,x))){if(!x.L&&oo(k.h,x)&&k.I==3){try{var H=k.Ba.g.parse(I)}catch{H=null}if(Array.isArray(H)&&H.length==3){var Q=H;if(Q[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<x.F)ku(k),Us(k);else break e;gc(k),Nr(18)}}else k.xa=Q[1],0<k.xa-k.K&&Q[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Ja(f(k.Va,k),6e3));ao(k.h)<=1&&k.ta&&(k.ta=void 0)}else ho(k,11)}else if((x.L||k.g==x)&&ku(k),!F(I))for(Q=k.Ba.g.parse(I),I=0;I<Q.length;I++){let At=Q[I];const nr=At[0];if(!(nr<=k.K))if(k.K=nr,At=At[1],k.I==2)if(At[0]=="c"){k.M=At[1],k.ba=At[2];const Qi=At[3];Qi!=null&&(k.ka=Qi,k.j.info("VER="+k.ka));const po=At[4];po!=null&&(k.za=po,k.j.info("SVER="+k.za));const Oa=At[5];Oa!=null&&typeof Oa=="number"&&Oa>0&&(H=1.5*Oa,k.O=H,k.j.info("backChannelRequestTimeoutMs_="+H)),H=k;const Ra=x.g;if(Ra){const vc=Ra.g?Ra.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vc){var ae=H.h;ae.g||vc.indexOf("spdy")==-1&&vc.indexOf("quic")==-1&&vc.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Ed(ae,ae.h),ae.h=null))}if(H.G){const Mu=Ra.g?Ra.g.getResponseHeader("X-HTTP-Session-Id"):null;Mu&&(H.wa=Mu,Pt(H.J,H.G,Mu))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-x.F,k.j.info("Handshake RTT: "+k.T+"ms")),H=k;var ye=x;if(H.na=z0(H,H.L?H.ba:null,H.W),ye.L){Sd(H.h,ye);var Ke=ye,Er=H.O;Er&&(Ke.H=Er),Ke.D&&(no(Ke),ro(Ke)),H.g=ye}else k0(H);k.i.length>0&&fo(k)}else At[0]!="stop"&&At[0]!="close"||ho(k,7);else k.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?ho(k,7):kd(k):At[0]!="noop"&&k.l&&k.l.qa(At),k.A=0)}}Qa(4)}catch{}}var Mr=class{constructor(x,I){this.g=x,this.map=I}};function _d(x){this.l=x||10,o.PerformanceNavigationTiming?(x=o.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ad(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function ao(x){return x.h?1:x.g?x.g.size:0}function oo(x,I){return x.h?x.h==I:x.g?x.g.has(I):!1}function Ed(x,I){x.g?x.g.add(I):x.h=I}function Sd(x,I){x.h&&x.h==I?x.h=null:x.g&&x.g.has(I)&&x.g.delete(I)}_d.prototype.cancel=function(){if(this.i=Cd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Cd(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let I=x.i;for(const k of x.g.values())I=I.concat(k.G);return I}return y(x.i)}var I0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tu(x,I){if(x){x=x.split("&");for(let k=0;k<x.length;k++){const H=x[k].indexOf("=");let Q,ae=null;H>=0?(Q=x[k].substring(0,H),ae=x[k].substring(H+1)):Q=x[k],I(Q,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Ci(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;x instanceof Ci?(this.l=x.l,ln(this,x.j),this.o=x.o,this.g=x.g,Ns(this,x.u),this.h=x.h,Td(this,D0(x.i)),this.m=x.m):x&&(I=String(x).match(I0))?(this.l=!1,ln(this,I[1]||"",!0),this.o=so(I[2]||""),this.g=so(I[3]||"",!0),Ns(this,I[4]),this.h=so(I[5]||"",!0),Td(this,I[6]||"",!0),this.m=so(I[7]||"")):(this.l=!1,this.i=new Ms(null,this.l))}Ci.prototype.toString=function(){const x=[];var I=this.j;I&&x.push(cc(I,Iu,!0),":");var k=this.g;return(k||I=="file")&&(x.push("//"),(I=this.o)&&x.push(cc(I,Iu,!0),"@"),x.push(Lo(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&x.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&x.push("/"),x.push(cc(k,k.charAt(0)=="/"?Id:O0,!0))),(k=this.i.toString())&&x.push("?",k),(k=this.m)&&x.push("#",cc(k,R0)),x.join("")},Ci.prototype.resolve=function(x){const I=jr(this);let k=!!x.j;k?ln(I,x.j):k=!!x.o,k?I.o=x.o:k=!!x.g,k?I.g=x.g:k=x.u!=null;var H=x.h;if(k)Ns(I,x.u);else if(k=!!x.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var Q=I.h.lastIndexOf("/");Q!=-1&&(H=I.h.slice(0,Q+1)+H)}if(Q=H,Q==".."||Q==".")H="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){H=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ae=[];for(let ye=0;ye<Q.length;){const Ke=Q[ye++];Ke=="."?H&&ye==Q.length&&ae.push(""):Ke==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),H&&ye==Q.length&&ae.push("")):(ae.push(Ke),H=!0)}H=ae.join("/")}else H=Q}return k?I.h=H:k=x.i.toString()!=="",k?Td(I,D0(x.i)):k=!!x.m,k&&(I.m=x.m),I};function jr(x){return new Ci(x)}function ln(x,I,k){x.j=k?so(I,!0):I,x.j&&(x.j=x.j.replace(/:$/,""))}function Ns(x,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);x.u=I}else x.u=null}function Td(x,I,k){I instanceof Ms?(x.i=I,Ru(x.i,x.l)):(k||(I=cc(I,ks)),x.i=new Ms(I,x.l))}function Pt(x,I,k){x.i.set(I,k)}function lc(x){return Pt(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function so(x,I){return x?I?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function cc(x,I,k){return typeof x=="string"?(x=encodeURI(x).replace(I,si),k&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function si(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Iu=/[#\/\?@]/g,O0=/[#\?:]/g,Id=/[#\?]/g,ks=/[#\?@]/g,R0=/#/g;function Ms(x,I){this.h=this.g=null,this.i=x||null,this.j=!!I}function li(x){x.g||(x.g=new Map,x.h=0,x.i&&Tu(x.i,function(I,k){x.add(decodeURIComponent(I.replace(/\+/g," ")),k)}))}t=Ms.prototype,t.add=function(x,I){li(this),this.i=null,x=js(this,x);let k=this.g.get(x);return k||this.g.set(x,k=[]),k.push(I),this.h+=1,this};function P0(x,I){li(x),I=js(x,I),x.g.has(I)&&(x.i=null,x.h-=x.g.get(I).length,x.g.delete(I))}function Od(x,I){return li(x),I=js(x,I),x.g.has(I)}t.forEach=function(x,I){li(this),this.g.forEach(function(k,H){k.forEach(function(Q){x.call(I,Q,H,this)},this)},this)};function Rd(x,I){li(x);let k=[];if(typeof I=="string")Od(x,I)&&(k=k.concat(x.g.get(js(x,I))));else for(x=Array.from(x.g.values()),I=0;I<x.length;I++)k=k.concat(x[I]);return k}t.set=function(x,I){return li(this),this.i=null,x=js(this,x),Od(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[I]),this.h+=1,this},t.get=function(x,I){return x?(x=Rd(this,x),x.length>0?String(x[0]):I):I};function Ou(x,I,k){P0(x,I),k.length>0&&(x.i=null,x.g.set(js(x,I),y(k)),x.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],I=Array.from(this.g.keys());for(let H=0;H<I.length;H++){var k=I[H];const Q=Lo(k);k=Rd(this,k);for(let ae=0;ae<k.length;ae++){let ye=Q;k[ae]!==""&&(ye+="="+Lo(k[ae])),x.push(ye)}}return this.i=x.join("&")};function D0(x){const I=new Ms;return I.i=x.i,x.g&&(I.g=new Map(x.g),I.h=x.h),I}function js(x,I){return I=String(I),x.j&&(I=I.toLowerCase()),I}function Ru(x,I){I&&!x.j&&(li(x),x.i=null,x.g.forEach(function(k,H){const Q=H.toLowerCase();H!=Q&&(P0(this,H),Ou(this,Q,k))},x)),x.j=I}function Ca(x,I){const k=new Aa;if(o.Image){const H=new Image;H.onload=d(Xi,k,"TestLoadImage: loaded",!0,I,H),H.onerror=d(Xi,k,"TestLoadImage: error",!1,I,H),H.onabort=d(Xi,k,"TestLoadImage: abort",!1,I,H),H.ontimeout=d(Xi,k,"TestLoadImage: timeout",!1,I,H),o.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=x}else I(!1)}function Pd(x,I){const k=new Aa,H=new AbortController,Q=setTimeout(()=>{H.abort(),Xi(k,"TestPingServer: timeout",!1,I)},1e4);fetch(x,{signal:H.signal}).then(ae=>{clearTimeout(Q),ae.ok?Xi(k,"TestPingServer: ok",!0,I):Xi(k,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Q),Xi(k,"TestPingServer: error",!1,I)})}function Xi(x,I,k,H,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),H(k)}catch{}}function Ls(){this.g=new x0}function lo(x){this.i=x.Sb||null,this.h=x.ab||!1}p(lo,b0),lo.prototype.g=function(){return new uc(this.i,this.h)};function uc(x,I){Dr.call(this),this.H=x,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(uc,Dr),t=uc.prototype,t.open=function(x,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=I,this.readyState=1,Ta(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(I.body=x),(this.H||o).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},t.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pu(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pu(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}t.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var I=x.value?x.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!x.done}))&&(this.response=this.responseText+=I)}x.done?Bs(this):Ta(this),this.readyState==3&&Pu(this)}},t.Oa=function(x){this.g&&(this.response=this.responseText=x,Bs(this))},t.Na=function(x){this.g&&(this.response=x,Bs(this))},t.ga=function(){this.g&&Bs(this)};function Bs(x){x.readyState=4,x.l=null,x.j=null,x.B=null,Ta(x)}t.setRequestHeader=function(x,I){this.A.append(x,I)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],I=this.h.entries();for(var k=I.next();!k.done;)k=k.value,x.push(k[0]+": "+k[1]),k=I.next();return x.join(`\r
`)};function Ta(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Yi(x){let I="";return ve(x,function(k,H){I+=H,I+=":",I+=k,I+=`\r
`}),I}function fc(x,I,k){e:{for(H in k){var H=!1;break e}H=!0}H||(k=Yi(k),typeof x=="string"?k!=null&&Lo(k):Pt(x,I,k))}function zt(x){Dr.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(zt,Dr);var co=/^https?$/i,Dd=["POST","PUT"];t=zt.prototype,t.Fa=function(x){this.H=x},t.ea=function(x,I,k,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);I=I?I.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wd.g(),this.g.onreadystatechange=g(f(this.Ca,this));try{this.B=!0,this.g.open(I,String(x),!0),this.B=!1}catch(ae){dc(this,ae);return}if(x=k||"",k=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var Q in H)k.set(Q,H[Q]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ae of H.keys())k.set(ae,H.get(ae));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(k.keys()).find(ae=>ae.toLowerCase()=="content-type"),Q=o.FormData&&x instanceof o.FormData,!(Array.prototype.indexOf.call(Dd,I,void 0)>=0)||H||Q||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,ye]of k)this.g.setRequestHeader(ae,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(ae){dc(this,ae)}};function dc(x,I){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=I,x.o=5,Nd(x),Bo(x)}function Nd(x){x.A||(x.A=!0,Wr(x,"complete"),Wr(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Wr(this,"complete"),Wr(this,"abort"),Bo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bo(this,!0)),zt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?hc(this):this.Xa())},t.Xa=function(){hc(this)};function hc(x){if(x.h&&typeof a<"u"){if(x.v&&Ia(x)==4)setTimeout(x.Ca.bind(x),0);else if(Wr(x,"readystatechange"),Ia(x)==4){x.h=!1;try{const ae=x.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var k;if(!(k=I)){var H;if(H=ae===0){let ye=String(x.D).match(I0)[1]||null;!ye&&o.self&&o.self.location&&(ye=o.self.location.protocol.slice(0,-1)),H=!co.test(ye?ye.toLowerCase():"")}k=H}if(k)Wr(x,"complete"),Wr(x,"success");else{x.o=6;try{var Q=Ia(x)>2?x.g.statusText:""}catch{Q=""}x.l=Q+" ["+x.ca()+"]",Nd(x)}}finally{Bo(x)}}}}function Bo(x,I){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const k=x.g;x.g=null,I||Wr(x,"ready");try{k.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ia(x){return x.g?x.g.readyState:0}t.ca=function(){try{return Ia(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(x){if(this.g){var I=this.g.responseText;return x&&I.indexOf(x)==0&&(I=I.substring(x.length)),xy(I)}};function bn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function zo(x){const I={};x=(x.g&&Ia(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<x.length;H++){if(F(x[H]))continue;var k=S0(x[H]);const Q=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ae=I[Q]||[];I[Q]=ae,ae.push(k)}Ie(I,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(x,I,k){return k&&k.internalChannelParams&&k.internalChannelParams[x]||I}function zs(x){this.za=0,this.i=[],this.j=new Aa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=uo("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=uo("baseRetryDelayMs",5e3,x),this.Za=uo("retryDelaySeedMs",1e4,x),this.Ta=uo("forwardChannelMaxRetries",2,x),this.va=uo("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new _d(x&&x.concurrentRequestLimit),this.Ba=new Ls,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=zs.prototype,t.ka=8,t.I=1,t.connect=function(x,I,k,H){Nr(0),this.W=x,this.H=I||{},k&&H!==void 0&&(this.H.OSID=k,this.H.OAID=H),this.F=this.X,this.J=z0(this,null,this.W),fo(this)};function kd(x){if(Du(x),x.I==3){var I=x.V++,k=jr(x.J);if(Pt(k,"SID",x.M),Pt(k,"RID",I),Pt(k,"TYPE","terminate"),pc(x,k),I=new Ea(x,x.j,I),I.M=2,I.A=lc(jr(k)),k=!1,o.navigator&&o.navigator.sendBeacon)try{k=o.navigator.sendBeacon(I.A.toString(),"")}catch{}!k&&o.Image&&(new Image().src=I.A,k=!0),k||(I.g=U0(I.j,null),I.g.ea(I.A)),I.F=Date.now(),ro(I)}B0(x)}function Us(x){x.g&&(jd(x),x.g.cancel(),x.g=null)}function Du(x){Us(x),x.v&&(o.clearTimeout(x.v),x.v=null),ku(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&o.clearTimeout(x.m),x.m=null)}function fo(x){if(!Ad(x.h)&&!x.m){x.m=!0;var I=x.Ea;M||D(),L||(M(),L=!0),O.add(I,x),x.D=0}}function Nu(x,I){return ao(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=I.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Ja(f(x.Ea,x,I),L0(x,x.D)),x.D++,!0)}t.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const Q=new Ea(this,this.j,x);let ae=this.o;if(this.U&&(ae?(ae=G(ae),be(ae,this.U)):ae=this.U),this.u!==null||this.R||(Q.J=ae,ae=null),this.S)e:{for(var I=0,k=0;k<this.i.length;k++){t:{var H=this.i[k];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(I+=H,I>4096){I=k;break e}if(I===4096||k===this.i.length-1){I=k+1;break e}}I=1e3}else I=1e3;I=N0(this,Q,I),k=jr(this.J),Pt(k,"RID",x),Pt(k,"CVER",22),this.G&&Pt(k,"X-HTTP-Session-Id",this.G),pc(this,k),ae&&(this.R?I="headers="+Lo(Yi(ae))+"&"+I:this.u&&fc(k,this.u,ae)),Ed(this.h,Q),this.Ra&&Pt(k,"TYPE","init"),this.S?(Pt(k,"$req",I),Pt(k,"SID","null"),Q.U=!0,to(Q,k,null)):to(Q,k,I),this.I=2}}else this.I==3&&(x?Md(this,x):this.i.length==0||Ad(this.h)||Md(this))};function Md(x,I){var k;I?k=I.l:k=x.V++;const H=jr(x.J);Pt(H,"SID",x.M),Pt(H,"RID",k),Pt(H,"AID",x.K),pc(x,H),x.u&&x.o&&fc(H,x.u,x.o),k=new Ea(x,x.j,k,x.D+1),x.u===null&&(k.J=x.o),I&&(x.i=I.G.concat(x.i)),I=N0(x,k,1e3),k.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),Ed(x.h,k),to(k,H,I)}function pc(x,I){x.H&&ve(x.H,function(k,H){Pt(I,H,k)}),x.l&&ve({},function(k,H){Pt(I,H,k)})}function N0(x,I,k){k=Math.min(x.i.length,k);const H=x.l?f(x.l.Ka,x.l,x):null;e:{var Q=x.i;let Ke=-1;for(;;){const Er=["count="+k];Ke==-1?k>0?(Ke=Q[0].g,Er.push("ofs="+Ke)):Ke=0:Er.push("ofs="+Ke);let At=!0;for(let nr=0;nr<k;nr++){var ae=Q[nr].g;const Qi=Q[nr].map;if(ae-=Ke,ae<0)Ke=Math.max(0,Q[nr].g-100),At=!1;else try{ae="req"+ae+"_"||"";try{var ye=Qi instanceof Map?Qi:Object.entries(Qi);for(const[po,Oa]of ye){let Ra=Oa;s(Oa)&&(Ra=Ds(Oa)),Er.push(ae+po+"="+encodeURIComponent(Ra))}}catch(po){throw Er.push(ae+"type="+encodeURIComponent("_badmap")),po}}catch{H&&H(Qi)}}if(At){ye=Er.join("&");break e}}ye=void 0}return x=x.i.splice(0,k),I.G=x,ye}function k0(x){if(!x.g&&!x.v){x.Y=1;var I=x.Da;M||D(),L||(M(),L=!0),O.add(I,x),x.A=0}}function gc(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Ja(f(x.Da,x),L0(x,x.A)),x.A++,!0)}t.Da=function(){if(this.v=null,M0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Ja(f(this.Wa,this),x)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nr(10),Us(this),M0(this))};function jd(x){x.B!=null&&(o.clearTimeout(x.B),x.B=null)}function M0(x){x.g=new Ea(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var I=jr(x.na);Pt(I,"RID","rpc"),Pt(I,"SID",x.M),Pt(I,"AID",x.K),Pt(I,"CI",x.F?"0":"1"),!x.F&&x.ia&&Pt(I,"TO",x.ia),Pt(I,"TYPE","xmlhttp"),pc(x,I),x.u&&x.o&&fc(I,x.u,x.o),x.O&&(x.g.H=x.O);var k=x.g;x=x.ba,k.M=1,k.A=lc(jr(I)),k.u=null,k.R=!0,Su(k,x)}t.Va=function(){this.C!=null&&(this.C=null,Us(this),gc(this),Nr(19))};function ku(x){x.C!=null&&(o.clearTimeout(x.C),x.C=null)}function j0(x,I){var k=null;if(x.g==I){ku(x),jd(x),x.g=null;var H=2}else if(oo(x.h,I))k=I.G,Sd(x.h,I),H=1;else return;if(x.I!=0){if(I.o)if(H==1){k=I.u?I.u.length:0,I=Date.now()-I.F;var Q=x.D;H=Eu(),Wr(H,new Za(H,k)),fo(x)}else k0(x);else if(Q=I.m,Q==3||Q==0&&I.X>0||!(H==1&&Nu(x,I)||H==2&&gc(x)))switch(k&&k.length>0&&(I=x.h,I.i=I.i.concat(k)),Q){case 1:ho(x,5);break;case 4:ho(x,10);break;case 3:ho(x,6);break;default:ho(x,2)}}}function L0(x,I){let k=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(k*=2),k*I}function ho(x,I){if(x.j.info("Error code "+I),I==2){var k=f(x.bb,x),H=x.Ua;const Q=!H;H=new Ci(H||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ln(H,"https"),lc(H),Q?Ca(H.toString(),k):Pd(H.toString(),k)}else Nr(2);x.I=0,x.l&&x.l.pa(I),B0(x),Du(x)}t.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Nr(2)):(this.j.info("Failed to ping google.com"),Nr(1))};function B0(x){if(x.I=0,x.ja=[],x.l){const I=Cd(x.h);(I.length!=0||x.i.length!=0)&&(w(x.ja,I),w(x.ja,x.i),x.h.i.length=0,y(x.i),x.i.length=0),x.l.oa()}}function z0(x,I,k){var H=k instanceof Ci?jr(k):new Ci(k);if(H.g!="")I&&(H.g=I+"."+H.g),Ns(H,H.u);else{var Q=o.location;H=Q.protocol,I=I?I+"."+Q.hostname:Q.hostname,Q=+Q.port;const ae=new Ci(null);H&&ln(ae,H),I&&(ae.g=I),Q&&Ns(ae,Q),k&&(ae.h=k),H=ae}return k=x.G,I=x.wa,k&&I&&Pt(H,k,I),Pt(H,"VER",x.ka),pc(x,H),H}function U0(x,I,k){if(I&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=x.Aa&&!x.ma?new zt(new lo({ab:k})):new zt(x.ma),I.Fa(x.L),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function F0(){}t=F0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fs(){}Fs.prototype.g=function(x,I){return new Xn(x,I)};function Xn(x,I){Dr.call(this),this.g=new zs(I),this.l=x,this.h=I&&I.messageUrlParams||null,x=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(x?x["X-WebChannel-Content-Type"]=I.messageContentType:x={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(x?x["X-WebChannel-Client-Profile"]=I.sa:x={"X-WebChannel-Client-Profile":I.sa}),this.g.U=x,(x=I&&I.Qb)&&!F(x)&&(this.g.u=x),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!F(I)&&(this.g.G=I,x=this.h,x!==null&&I in x&&(x=this.h,I in x&&delete x[I])),this.j=new Uo(this)}p(Xn,Dr),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){kd(this.g)},Xn.prototype.o=function(x){var I=this.g;if(typeof x=="string"){var k={};k.__data__=x,x=k}else this.v&&(k={},k.__data__=Ds(x),x=k);I.i.push(new Mr(I.Ya++,x)),I.I==3&&fo(I)},Xn.prototype.N=function(){this.g.l=null,delete this.j,kd(this.g),delete this.g,Xn.Z.N.call(this)};function V0(x){xn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var I=x.__sm__;if(I){e:{for(const k in I){x=k;break e}x=void 0}(this.i=x)&&(x=this.i,I=I!==null&&x in I?I[x]:void 0),this.data=I}else this.data=x}p(V0,xn);function H0(){Wi.call(this),this.status=1}p(H0,Wi);function Uo(x){this.g=x}p(Uo,F0),Uo.prototype.ra=function(){Wr(this.g,"a")},Uo.prototype.qa=function(x){Wr(this.g,new V0(x))},Uo.prototype.pa=function(x){Wr(this.g,new H0)},Uo.prototype.oa=function(){Wr(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,qD=function(){return new Fs},$D=function(){return Eu()},HD=Ar,Nw={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oc.NO_ERROR=0,oc.TIMEOUT=8,oc.HTTP_ERROR=6,T1=oc,bd.COMPLETE="complete",VD=bd,w0.EventType=_a,_a.OPEN="a",_a.CLOSE="b",_a.ERROR="c",_a.MESSAGE="d",Dr.prototype.listen=Dr.prototype.J,Lh=w0,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,FD=zt}).apply(typeof Wg<"u"?Wg:typeof self<"u"?self:typeof window<"u"?window:{});const HI="@firebase/firestore",$I="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new vA("@firebase/firestore");function gf(){return iu.logLevel}function Se(t,...e){if(iu.logLevel<=lt.DEBUG){const r=e.map(yA);iu.debug(`Firestore (${Jf}): ${t}`,...r)}}function gs(t,...e){if(iu.logLevel<=lt.ERROR){const r=e.map(yA);iu.error(`Firestore (${Jf}): ${t}`,...r)}}function Nf(t,...e){if(iu.logLevel<=lt.WARN){const r=e.map(yA);iu.warn(`Firestore (${Jf}): ${t}`,...r)}}function yA(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,GD(t,n,r)}function GD(t,e,r){let n=`FIRESTORE (${Jf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw gs(n),new Error(n)}function Rt(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||GD(e,i,n)}function Ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends qa{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Un.UNAUTHENTICATED)))}shutdown(){}}class YV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class QV{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Rt(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new cs,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},s=c=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>s(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?s(c):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new cs)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Rt(typeof n.accessToken=="string",31837,{l:n}),new WD(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new Un(e)}}class ZV{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JV{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new ZV(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable((()=>r(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eH{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Rt(this.o===void 0,3512);const n=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Rt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new qI(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=tH(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function ct(t,e){return t<e?-1:t>e?1:0}function kw(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return O2(i)===O2(a)?ct(i,a):O2(i)?1:-1}return ct(t.length,e.length)}const rH=55296,nH=57343;function O2(t){const e=t.charCodeAt(0);return e>=rH&&e<=nH}function kf(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="__name__";class xo{constructor(e,r,n){r===void 0?r=0:r>e.length&&Ve(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Ve(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return xo.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof xo?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=xo.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return ct(e.length,r.length)}static compareSegments(e,r){const n=xo.isNumericId(e),i=xo.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?xo.extractNumericId(e).compare(xo.extractNumericId(r)):kw(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Il.fromString(e.substring(4,e.length-2))}}class Kt extends xo{construct(e,r,n){return new Kt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new Kt(r)}static emptyPath(){return new Kt([])}}const iH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends xo{construct(e,r,n){return new Pn(e,r,n)}static isValidIdentifier(e){return iH.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GI}static keyField(){return new Pn([GI])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(n+=s,i++):(a(),i++)}if(a(),o)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(r)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Kt.fromString(e))}static fromName(e){return new je(Kt.fromString(e).popFirst(5))}static empty(){return new je(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Kt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e,r){if(!r)throw new we(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aH(t,e,r,n){if(e===!0&&n===!0)throw new we(ce.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function WI(t){if(!je.isDocumentKey(t))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KI(t){if(je.isDocumentKey(t))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function XD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function ai(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=fm(t);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function oH(t,e){if(e<=0)throw new we(ce.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e){const r={typeString:t};return e&&(r.value=e),r}function kp(t,e){if(!XD(t))throw new we(ce.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(i&&typeof o!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new we(ce.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=-62135596800,YI=1e6;class Xt{static now(){return Xt.fromMillis(Date.now())}static fromDate(e){return Xt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*YI);return new Xt(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<XI)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YI}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kp(e,Xt._jsonSchema))return new Xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-XI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xt._jsonSchemaVersion="firestore/timestamp/1.0",Xt._jsonSchema={type:Hr("string",Xt._jsonSchemaVersion),seconds:Hr("number"),nanoseconds:Hr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Xt(0,0))}static max(){return new He(new Xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=-1;function sH(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=He.fromTimestamp(n===1e9?new Xt(r+1,0):new Xt(r,n));return new Ml(i,je.empty(),e)}function lH(t){return new Ml(t.readTime,t.key,op)}class Ml{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ml(He.min(),je.empty(),op)}static max(){return new Ml(He.max(),je.empty(),op)}}function cH(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=je.comparator(t.documentKey,e.documentKey),r!==0?r:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ed(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==uH)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new de(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof de?r:de.resolve(r)}catch(r){return de.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):de.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):de.reject(r)}static resolve(e){return new de(((r,n)=>{r(e)}))}static reject(e){return new de(((r,n)=>{n(e)}))}static waitFor(e){return new de(((r,n)=>{let i=0,a=0,o=!1;e.forEach((s=>{++i,s.next((()=>{++a,o&&a===i&&r()}),(c=>n(c)))})),o=!0,a===i&&r()}))}static or(e){let r=de.resolve(!1);for(const n of e)r=r.next((i=>i?de.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,a)=>{n.push(r.call(this,i,a))})),this.waitFor(n)}static mapArray(e,r){return new de(((n,i)=>{const a=e.length,o=new Array(a);let s=0;for(let c=0;c<a;c++){const f=c;r(e[f]).next((d=>{o[f]=d,++s,s===a&&n(o)}),(d=>i(d)))}}))}static doWhile(e,r){return new de(((n,i)=>{const a=()=>{e()===!0?r().next((()=>{a()}),i):n()};a()}))}}function dH(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function td(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=-1;function hm(t){return t==null}function W1(t){return t===0&&1/t==-1/0}function hH(t){return typeof t=="number"&&Number.isInteger(t)&&!W1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="";function pH(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=QI(e)),e=gH(t.get(r),e);return QI(e)}function gH(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case YD:r+="";break;default:r+=a}}return r}function QI(t){return t+YD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Gl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function QD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,r){this.comparator=e,this.root=r||On.EMPTY}insert(e,r){return new fr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kg(this.root,e,this.comparator,!0)}}class Kg{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??On.RED,this.left=i??On.EMPTY,this.right=a??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new On(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return On.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new On(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new JI(this.data.getIterator())}getIteratorFrom(e){return new JI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new rn(this.comparator);return r.data=e,r}}class JI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new zi([])}unionWith(e){let r=new rn(Pn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new zi(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return kf(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new ZD("Invalid base64 string: "+a):a}})(e);return new Nn(r)}static fromUint8Array(e){const r=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new Nn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const vH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jl(t){if(Rt(!!t,39018),typeof t=="string"){let e=0;const r=vH.exec(t);if(Rt(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ir(t.seconds),nanos:Ir(t.nanos)}}function Ir(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ll(t){return typeof t=="string"?Nn.fromBase64String(t):Nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="server_timestamp",eN="__type__",tN="__previous_value__",rN="__local_write_time__";function wA(t){return(t?.mapValue?.fields||{})[eN]?.stringValue===JD}function pm(t){const e=t.mapValue.fields[tN];return wA(e)?pm(e):e}function sp(t){const e=jl(t.mapValue.fields[rN].timestampValue);return new Xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,r,n,i,a,o,s,c,f,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const K1="(default)";class lp{constructor(e,r){this.projectId=e,this.database=r||K1}static empty(){return new lp("","")}get isDefaultDatabase(){return this.database===K1}isEqual(e){return e instanceof lp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="__type__",yH="__max__",Xg={mapValue:{}},iN="__vector__",X1="value";function Bl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wA(t)?4:bH(t)?9007199254740991:xH(t)?10:11:Ve(28295,{value:t})}function Oo(t,e){if(t===e)return!0;const r=Bl(t);if(r!==Bl(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sp(t).isEqual(sp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=jl(i.timestampValue),s=jl(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Ll(i.bytesValue).isEqual(Ll(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Ir(i.geoPointValue.latitude)===Ir(a.geoPointValue.latitude)&&Ir(i.geoPointValue.longitude)===Ir(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Ir(i.integerValue)===Ir(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Ir(i.doubleValue),s=Ir(a.doubleValue);return o===s?W1(o)===W1(s):isNaN(o)&&isNaN(s)}return!1})(t,e);case 9:return kf(t.arrayValue.values||[],e.arrayValue.values||[],Oo);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(ZI(o)!==ZI(s))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(s[c]===void 0||!Oo(o[c],s[c])))return!1;return!0})(t,e);default:return Ve(52216,{left:t})}}function cp(t,e){return(t.values||[]).find((r=>Oo(r,e)))!==void 0}function Mf(t,e){if(t===e)return 0;const r=Bl(t),n=Bl(e);if(r!==n)return ct(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const s=Ir(a.integerValue||a.doubleValue),c=Ir(o.integerValue||o.doubleValue);return s<c?-1:s>c?1:s===c?0:isNaN(s)?isNaN(c)?0:-1:1})(t,e);case 3:return eO(t.timestampValue,e.timestampValue);case 4:return eO(sp(t),sp(e));case 5:return kw(t.stringValue,e.stringValue);case 6:return(function(a,o){const s=Ll(a),c=Ll(o);return s.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const s=a.split("/"),c=o.split("/");for(let f=0;f<s.length&&f<c.length;f++){const d=ct(s[f],c[f]);if(d!==0)return d}return ct(s.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const s=ct(Ir(a.latitude),Ir(o.latitude));return s!==0?s:ct(Ir(a.longitude),Ir(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return tO(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const s=a.fields||{},c=o.fields||{},f=s[X1]?.arrayValue,d=c[X1]?.arrayValue,p=ct(f?.values?.length||0,d?.values?.length||0);return p!==0?p:tO(f,d)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===Xg.mapValue&&o===Xg.mapValue)return 0;if(a===Xg.mapValue)return 1;if(o===Xg.mapValue)return-1;const s=a.fields||{},c=Object.keys(s),f=o.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=kw(c[p],d[p]);if(g!==0)return g;const y=Mf(s[c[p]],f[d[p]]);if(y!==0)return y}return ct(c.length,d.length)})(t.mapValue,e.mapValue);default:throw Ve(23264,{he:r})}}function eO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const r=jl(t),n=jl(e),i=ct(r.seconds,n.seconds);return i!==0?i:ct(r.nanos,n.nanos)}function tO(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Mf(r[i],n[i]);if(a)return a}return ct(r.length,n.length)}function jf(t){return Mw(t)}function Mw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=jl(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Ll(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return je.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=Mw(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${Mw(r.fields[o])}`;return i+"}"})(t.mapValue):Ve(61005,{value:t})}function I1(t){switch(Bl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pm(t);return e?16+I1(e):16;case 5:return 2*t.stringValue.length;case 6:return Ll(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,a)=>i+I1(a)),0)})(t.arrayValue);case 10:case 11:return(function(n){let i=0;return Gl(n.fields,((a,o)=>{i+=a.length+I1(o)})),i})(t.mapValue);default:throw Ve(13486,{value:t})}}function rO(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jw(t){return!!t&&"integerValue"in t}function _A(t){return!!t&&"arrayValue"in t}function nO(t){return!!t&&"nullValue"in t}function iO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function O1(t){return!!t&&"mapValue"in t}function xH(t){return(t?.mapValue?.fields||{})[nN]?.stringValue===iN}function Kh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Gl(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Kh(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Kh(t.arrayValue.values[r]);return e}return{...t}}function bH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.value=e}static empty(){return new mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!O1(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kh(r)}setAll(e){let r=Pn.emptyPath(),n={},i=[];e.forEach(((o,s)=>{if(!r.isImmediateParentOf(s)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=s.popLast()}o?n[s.lastSegment()]=Kh(o):i.push(s.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());O1(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Oo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];O1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Gl(r,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new mi(Kh(this.value))}}function aN(t){const e=[];return Gl(t.fields,((r,n)=>{const i=new Pn([r]);if(O1(n)){const a=aN(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,r,n,i,a,o,s){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Fn(e,0,He.min(),He.min(),He.min(),mi.empty(),0)}static newFoundDocument(e,r,n,i){return new Fn(e,1,r,He.min(),n,i,0)}static newNoDocument(e,r){return new Fn(e,2,r,He.min(),He.min(),mi.empty(),0)}static newUnknownDocument(e,r){return new Fn(e,3,r,He.min(),He.min(),mi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,r){this.position=e,this.inclusive=r}}function aO(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=je.comparator(je.fromName(o.referenceValue),r.key):n=Mf(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function oO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Oo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,r="asc"){this.field=e,this.dir=r}}function wH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{}class Vr extends oN{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new AH(e,r,n):r==="array-contains"?new CH(e,n):r==="in"?new TH(e,n):r==="not-in"?new IH(e,n):r==="array-contains-any"?new OH(e,n):new Vr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new EH(e,n):new SH(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Mf(r,this.value)):r!==null&&Bl(this.value)===Bl(r)&&this.matchesComparison(Mf(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Va extends oN{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Va(e,r)}matches(e){return sN(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sN(t){return t.op==="and"}function lN(t){return _H(t)&&sN(t)}function _H(t){for(const e of t.filters)if(e instanceof Va)return!1;return!0}function Lw(t){if(t instanceof Vr)return t.field.canonicalString()+t.op.toString()+jf(t.value);if(lN(t))return t.filters.map((e=>Lw(e))).join(",");{const e=t.filters.map((r=>Lw(r))).join(",");return`${t.op}(${e})`}}function cN(t,e){return t instanceof Vr?(function(n,i){return i instanceof Vr&&n.op===i.op&&n.field.isEqual(i.field)&&Oo(n.value,i.value)})(t,e):t instanceof Va?(function(n,i){return i instanceof Va&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,o,s)=>a&&cN(o,i.filters[s])),!0):!1})(t,e):void Ve(19439)}function uN(t){return t instanceof Vr?(function(r){return`${r.field.canonicalString()} ${r.op} ${jf(r.value)}`})(t):t instanceof Va?(function(r){return r.op.toString()+" {"+r.getFilters().map(uN).join(" ,")+"}"})(t):"Filter"}class AH extends Vr{constructor(e,r,n){super(e,r,n),this.key=je.fromName(n.referenceValue)}matches(e){const r=je.comparator(e.key,this.key);return this.matchesComparison(r)}}class EH extends Vr{constructor(e,r){super(e,"in",r),this.keys=fN("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class SH extends Vr{constructor(e,r){super(e,"not-in",r),this.keys=fN("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function fN(t,e){return(e.arrayValue?.values||[]).map((r=>je.fromName(r.referenceValue)))}class CH extends Vr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return _A(r)&&cp(r.arrayValue,this.value)}}class TH extends Vr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&cp(this.value.arrayValue,r)}}class IH extends Vr{constructor(e,r){super(e,"not-in",r)}matches(e){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!cp(this.value.arrayValue,r)}}class OH extends Vr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!_A(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>cp(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e,r=null,n=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Te=null}}function sO(t,e=null,r=[],n=[],i=null,a=null,o=null){return new RH(t,e,r,n,i,a,o)}function AA(t){const e=Ge(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>Lw(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),hm(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>jf(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>jf(n))).join(",")),e.Te=r}return e.Te}function EA(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!wH(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!cN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oO(t.startAt,e.startAt)&&oO(t.endAt,e.endAt)}function Bw(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,r=null,n=[],i=[],a=null,o="F",s=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function PH(t,e,r,n,i,a,o,s){return new rd(t,e,r,n,i,a,o,s)}function gm(t){return new rd(t)}function lO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dN(t){return t.collectionGroup!==null}function Xh(t){const e=Ge(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new rn(Pn.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(s=s.add(f.field))}))})),s})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new up(a,n))})),r.has(Pn.keyField().canonicalString())||e.Ie.push(new up(Pn.keyField(),n))}return e.Ie}function Ao(t){const e=Ge(t);return e.Ee||(e.Ee=DH(e,Xh(t))),e.Ee}function DH(t,e){if(t.limitType==="F")return sO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new up(i.field,a)}));const r=t.endAt?new Y1(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Y1(t.startAt.position,t.startAt.inclusive):null;return sO(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function zw(t,e){const r=t.filters.concat([e]);return new rd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Q1(t,e,r){return new rd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function vm(t,e){return EA(Ao(t),Ao(e))&&t.limitType===e.limitType}function hN(t){return`${AA(Ao(t))}|lt:${t.limitType}`}function vf(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>uN(i))).join(", ")}]`),hm(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>jf(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>jf(i))).join(",")),`Target(${n})`})(Ao(t))}; limitType=${t.limitType})`}function mm(t,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):je.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,i){for(const a of Xh(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(o,s,c){const f=aO(o,s,c);return o.inclusive?f<=0:f<0})(n.startAt,Xh(n),i)||n.endAt&&!(function(o,s,c){const f=aO(o,s,c);return o.inclusive?f>=0:f>0})(n.endAt,Xh(n),i))})(t,e)}function NH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pN(t){return(e,r)=>{let n=!1;for(const i of Xh(t)){const a=kH(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function kH(t,e,r){const n=t.field.isKeyField()?je.comparator(e.key,r.key):(function(a,o,s){const c=o.data.field(a),f=s.data.field(a);return c!==null&&f!==null?Mf(c,f):Ve(42886)})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,((r,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return QD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=new fr(je.comparator);function vs(){return MH}const gN=new fr(je.comparator);function Bh(...t){let e=gN;for(const r of t)e=e.insert(r.key,r);return e}function vN(t){let e=gN;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Uc(){return Yh()}function mN(){return Yh()}function Yh(){return new yu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const jH=new fr(je.comparator),LH=new rn(je.comparator);function ut(...t){let e=LH;for(const r of t)e=e.add(r);return e}const BH=new rn(ct);function zH(){return BH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:W1(e)?"-0":e}}function yN(t){return{integerValue:""+t}}function xN(t,e){return hH(e)?yN(e):SA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this._=void 0}}function UH(t,e,r){return t instanceof fp?(function(i,a){const o={fields:{[eN]:{stringValue:JD},[rN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&wA(a)&&(a=pm(a)),a&&(o.fields[tN]=a),{mapValue:o}})(r,e):t instanceof dp?wN(t,e):t instanceof hp?_N(t,e):(function(i,a){const o=bN(i,a),s=cO(o)+cO(i.Ae);return jw(o)&&jw(i.Ae)?yN(s):SA(i.serializer,s)})(t,e)}function FH(t,e,r){return t instanceof dp?wN(t,e):t instanceof hp?_N(t,e):r}function bN(t,e){return t instanceof pp?(function(n){return jw(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class fp extends ym{}class dp extends ym{constructor(e){super(),this.elements=e}}function wN(t,e){const r=AN(e);for(const n of t.elements)r.some((i=>Oo(i,n)))||r.push(n);return{arrayValue:{values:r}}}class hp extends ym{constructor(e){super(),this.elements=e}}function _N(t,e){let r=AN(e);for(const n of t.elements)r=r.filter((i=>!Oo(i,n)));return{arrayValue:{values:r}}}class pp extends ym{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function cO(t){return Ir(t.integerValue||t.doubleValue)}function AN(t){return _A(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,r){this.field=e,this.transform=r}}function VH(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof dp&&i instanceof dp||n instanceof hp&&i instanceof hp?kf(n.elements,i.elements,Oo):n instanceof pp&&i instanceof pp?Oo(n.Ae,i.Ae):n instanceof fp&&i instanceof fp})(t.transform,e.transform)}class HH{constructor(e,r){this.version=e,this.transformResults=r}}class oi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function R1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xm{}function SN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bm(t.key,oi.none()):new Mp(t.key,t.data,oi.none());{const r=t.data,n=mi.empty();let i=new rn(Pn.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new Wl(t.key,n,new zi(i.toArray()),oi.none())}}function $H(t,e,r){t instanceof Mp?(function(i,a,o){const s=i.value.clone(),c=fO(i.fieldTransforms,a,o.transformResults);s.setAll(c),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()})(t,e,r):t instanceof Wl?(function(i,a,o){if(!R1(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=fO(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(CN(i)),c.setAll(s),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Qh(t,e,r,n){return t instanceof Mp?(function(a,o,s,c){if(!R1(a.precondition,o))return s;const f=a.value.clone(),d=dO(a.fieldTransforms,c,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(t,e,r,n):t instanceof Wl?(function(a,o,s,c){if(!R1(a.precondition,o))return s;const f=dO(a.fieldTransforms,c,o),d=o.data;return d.setAll(CN(a)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(a,o,s){return R1(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s})(t,e,r)}function qH(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=bN(n.transform,i||null);a!=null&&(r===null&&(r=mi.empty()),r.set(n.field,a))}return r||null}function uO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&kf(n,i,((a,o)=>VH(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mp extends xm{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wl extends xm{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CN(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function fO(t,e,r){const n=new Map;Rt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,s=e.data.field(a.field);n.set(a.field,FH(o,s,r[i]))}return n}function dO(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,UH(a,o,e))}return n}class bm extends xm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GH extends xm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&$H(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Qh(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Qh(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=mN();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=r.has(i.key)?null:s;const c=SN(o,s);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(He.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),ut())}isEqual(e){return this.batchId===e.batchId&&kf(this.mutations,e.mutations,((r,n)=>uO(r,n)))&&kf(this.baseMutations,e.baseMutations,((r,n)=>uO(r,n)))}}class CA{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Rt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return jH})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new CA(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr,ht;function YH(t){switch(t){case ce.OK:return Ve(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function TN(t){if(t===void 0)return gs("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Fr.OK:return ce.OK;case Fr.CANCELLED:return ce.CANCELLED;case Fr.UNKNOWN:return ce.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return ce.INTERNAL;case Fr.UNAVAILABLE:return ce.UNAVAILABLE;case Fr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Fr.NOT_FOUND:return ce.NOT_FOUND;case Fr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Fr.ABORTED:return ce.ABORTED;case Fr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Fr.DATA_LOSS:return ce.DATA_LOSS;default:return Ve(39323,{code:t})}}(ht=Fr||(Fr={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZH=new Il([4294967295,4294967295],0);function hO(t){const e=QH().encode(t),r=new UD;return r.update(e),new Uint8Array(r.digest())}function pO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Il([r,n],0),new Il([i,a],0)]}class TA{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new zh(`Invalid padding: ${r}`);if(n<0)throw new zh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new zh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new zh(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Il.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(Il.fromNumber(n)));return i.compare(ZH)===1&&(i=new Il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=hO(e),[n,i]=pO(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);if(!this.we(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new TA(a,i,r);return n.forEach((s=>o.insert(s))),o}insert(e){if(this.ge===0)return;const r=hO(e),[n,i]=pO(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class zh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,jp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new wm(He.min(),i,new fr(ct),vs(),ut())}}class jp{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new jp(n,r,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class IN{constructor(e,r){this.targetId=e,this.Ce=r}}class ON{constructor(e,r,n=Nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class gO{constructor(){this.ve=0,this.Fe=vO(),this.Me=Nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),r=ut(),n=ut();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Ve(38017,{changeType:a})}})),new jp(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=vO()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JH{constructor(e){this.Ge=e,this.ze=new Map,this.je=vs(),this.Je=Yg(),this.He=Yg(),this.Ye=new fr(ct)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,(r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach(((n,i)=>{this.rt(i)&&r(i)}))}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(Bw(a))if(n===0){const o=new je(a.path);this.et(r,o,Fn.newNoDocument(o,He.min()))}else Rt(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const s=this.ut(e),c=s?this.ct(s,e,o):1;if(c!==0){this.it(r);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,f)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,s;try{o=Ll(n).toUint8Array()}catch(c){if(c instanceof ZD)return Nf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{s=new TA(o,i,a)}catch(c){return Nf(c instanceof zh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return s.ge===0?null:s}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach((a=>{const o=this.Ge.ht(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.et(r,a,null),i++)})),i}Tt(e){const r=new Map;this.ze.forEach(((a,o)=>{const s=this.ot(o);if(s){if(a.current&&Bw(s.target)){const c=new je(s.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Fn.newNoDocument(c,e))}a.Be&&(r.set(o,a.ke()),a.qe())}}));let n=ut();this.He.forEach(((a,o)=>{let s=!0;o.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)})),s&&(n=n.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new wm(e,r,this.Ye,this.je,n);return this.je=vs(),this.Je=Yg(),this.He=Yg(),this.Ye=new fr(ct),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new gO,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new rn(ct),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new rn(ct),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Se("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gO),this.Ge.getRemoteKeysForTarget(e).forEach((r=>{this.et(e,r,null)}))}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Yg(){return new fr(je.comparator)}function vO(){return new fr(je.comparator)}const e$={asc:"ASCENDING",desc:"DESCENDING"},t$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r$={and:"AND",or:"OR"};class n${constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Uw(t,e){return t.useProto3Json||hm(e)?e:{value:e}}function Z1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i$(t,e){return Z1(t,e.toTimestamp())}function Eo(t){return Rt(!!t,49232),He.fromTimestamp((function(r){const n=jl(r);return new Xt(n.seconds,n.nanos)})(t))}function IA(t,e){return Fw(t,e).canonicalString()}function Fw(t,e){const r=(function(i){return new Kt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function PN(t){const e=Kt.fromString(t);return Rt(jN(e),10190,{key:e.toString()}),e}function Vw(t,e){return IA(t.databaseId,e.path)}function R2(t,e){const r=PN(e);if(r.get(1)!==t.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new je(NN(r))}function DN(t,e){return IA(t.databaseId,e)}function a$(t){const e=PN(t);return e.length===4?Kt.emptyPath():NN(e)}function Hw(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function NN(t){return Rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mO(t,e,r){return{name:Vw(t,e),fields:r.value.mapValue.fields}}function o$(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ve(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,d){return f.useProto3Json?(Rt(d===void 0||typeof d=="string",58123),Nn.fromBase64String(d||"")):(Rt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Nn.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&(function(f){const d=f.code===void 0?ce.UNKNOWN:TN(f.code);return new we(d,f.message||"")})(o);r=new ON(n,i,a,s||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=R2(t,n.document.name),a=Eo(n.document.updateTime),o=n.document.createTime?Eo(n.document.createTime):He.min(),s=new mi({mapValue:{fields:n.document.fields}}),c=Fn.newFoundDocument(i,a,o,s),f=n.targetIds||[],d=n.removedTargetIds||[];r=new P1(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=R2(t,n.document),a=n.readTime?Eo(n.readTime):He.min(),o=Fn.newNoDocument(i,a),s=n.removedTargetIds||[];r=new P1([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=R2(t,n.document),a=n.removedTargetIds||[];r=new P1([],a,i,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new XH(i,a),s=n.targetId;r=new IN(s,o)}}return r}function s$(t,e){let r;if(e instanceof Mp)r={update:mO(t,e.key,e.value)};else if(e instanceof bm)r={delete:Vw(t,e.key)};else if(e instanceof Wl)r={update:mO(t,e.key,e.data),updateMask:v$(e.fieldMask)};else{if(!(e instanceof GH))return Ve(16599,{Vt:e.type});r={verify:Vw(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,o){const s=o.transform;if(s instanceof fp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof dp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof hp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof pp)return{fieldPath:o.field.canonicalString(),increment:s.Ae};throw Ve(20930,{transform:o.transform})})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:i$(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ve(27497)})(t,e.precondition)),r}function l$(t,e){return t&&t.length>0?(Rt(e!==void 0,14353),t.map((r=>(function(i,a){let o=i.updateTime?Eo(i.updateTime):Eo(a);return o.isEqual(He.min())&&(o=Eo(a)),new HH(o,i.transformResults||[])})(r,e)))):[]}function c$(t,e){return{documents:[DN(t,e.path)]}}function u$(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=DN(t,i);const a=(function(f){if(f.length!==0)return MN(Va.create(f,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const o=(function(f){if(f.length!==0)return f.map((d=>(function(g){return{field:mf(g.field),direction:h$(g.dir)}})(d)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const s=Uw(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:r,parent:i}}function f$(t){let e=a$(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Rt(n===1,65062);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=(function(p){const g=kN(p);return g instanceof Va&&lN(g)?g.getFilters():[g]})(r.where));let o=[];r.orderBy&&(o=(function(p){return p.map((g=>(function(w){return new up(yf(w.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(g)))})(r.orderBy));let s=null;r.limit&&(s=(function(p){let g;return g=typeof p=="object"?p.value:p,hm(g)?null:g})(r.limit));let c=null;r.startAt&&(c=(function(p){const g=!!p.before,y=p.values||[];return new Y1(y,g)})(r.startAt));let f=null;return r.endAt&&(f=(function(p){const g=!p.before,y=p.values||[];return new Y1(y,g)})(r.endAt)),PH(e,i,o,a,s,"F",c,f)}function d$(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:i})}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function kN(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=yf(r.unaryFilter.field);return Vr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=yf(r.unaryFilter.field);return Vr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=yf(r.unaryFilter.field);return Vr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yf(r.unaryFilter.field);return Vr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(t):t.fieldFilter!==void 0?(function(r){return Vr.create(yf(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Va.create(r.compositeFilter.filters.map((n=>kN(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(r.compositeFilter.op))})(t):Ve(30097,{filter:t})}function h$(t){return e$[t]}function p$(t){return t$[t]}function g$(t){return r$[t]}function mf(t){return{fieldPath:t.canonicalString()}}function yf(t){return Pn.fromServerFormat(t.fieldPath)}function MN(t){return t instanceof Vr?(function(r){if(r.op==="=="){if(iO(r.value))return{unaryFilter:{field:mf(r.field),op:"IS_NAN"}};if(nO(r.value))return{unaryFilter:{field:mf(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(iO(r.value))return{unaryFilter:{field:mf(r.field),op:"IS_NOT_NAN"}};if(nO(r.value))return{unaryFilter:{field:mf(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mf(r.field),op:p$(r.op),value:r.value}}})(t):t instanceof Va?(function(r){const n=r.getFilters().map((i=>MN(i)));return n.length===1?n[0]:{compositeFilter:{op:g$(r.op),filters:n}}})(t):Ve(54877,{filter:t})}function v$(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function jN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,r,n,i,a=He.min(),o=He.min(),s=Nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e){this.yt=e}}function y$(t){const e=f$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Q1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(){this.Cn=new b$}addToCollectionParentIndex(e,r){return this.Cn.add(r),de.resolve()}getCollectionParents(e,r){return de.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return de.resolve()}deleteFieldIndex(e,r){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,r){return de.resolve()}getDocumentsMatchingTarget(e,r){return de.resolve(null)}getIndexType(e,r){return de.resolve(0)}getFieldIndexes(e,r){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,r){return de.resolve(Ml.min())}getMinOffsetFromCollectionGroup(e,r){return de.resolve(Ml.min())}updateCollectionGroup(e,r,n){return de.resolve()}updateIndexEntries(e,r){return de.resolve()}}class b${constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new rn(Kt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new rn(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LN=41943040;class vi{static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(LN,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lf(0)}static cr(){return new Lf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="LruGarbageCollector",w$=1048576;function bO([t,e],[r,n]){const i=ct(t,r);return i===0?ct(e,n):i}class _${constructor(e){this.Ir=e,this.buffer=new rn(bO),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();bO(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class A${constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(xO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){td(r)?Se(xO,"Ignoring IndexedDB error during garbage collection: ",r):await ed(r)}await this.Vr(3e5)}))}}class E${constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return de.resolve(dm.ce);const n=new _$(r);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(yO)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yO):this.yr(e,r)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,o,s,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,s=Date.now(),this.removeTargets(e,n,r)))).next((p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(f=Date.now(),gf()<=lt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(c-s)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function S$(t,e){return new E$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(){this.changes=new yu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?de.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&Qh(n.mutation,i,zi.empty(),Xt.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,ut()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=ut()){const i=Uc();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((a=>{let o=Bh();return a.forEach(((s,c)=>{o=o.insert(s,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=Uc();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,ut())))}populateOverlays(e,r,n){const i=[];return n.forEach((a=>{r.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,s)=>{r.set(o,s)}))}))}computeViews(e,r,n,i){let a=vs();const o=Yh(),s=(function(){return Yh()})();return r.forEach(((c,f)=>{const d=n.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Wl)?a=a.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),Qh(d.mutation,f,d.mutation.getFieldMask(),Xt.now())):o.set(f.key,zi.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((f,d)=>o.set(f,d))),r.forEach(((f,d)=>s.set(f,new T$(d,o.get(f)??null)))),s)))}recalculateAndSaveOverlays(e,r){const n=Yh();let i=new fr(((o,s)=>o-s)),a=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const s of o)s.keys().forEach((c=>{const f=r.get(c);if(f===null)return;let d=n.get(c)||zi.empty();d=s.applyToLocalView(f,d),n.set(c,d);const p=(i.get(s.batchId)||ut()).add(c);i=i.insert(s.batchId,p)}))})).next((()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const c=s.getNext(),f=c.key,d=c.value,p=mN();d.forEach((g=>{if(!a.has(g)){const y=SN(r.get(g),n.get(g));y!==null&&p.set(g,y),a=a.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return de.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(o){return je.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):dN(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):de.resolve(Uc());let s=op,c=a;return o.next((f=>de.forEach(f,((d,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(d)?de.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,c,f,ut()))).next((d=>({batchId:s,changes:vN(d)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new je(r)).next((n=>{let i=Bh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=Bh();return this.indexManager.getCollectionParents(e,a).next((s=>de.forEach(s,(c=>{const f=(function(p,g){return new rd(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,n,i).next((d=>{d.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i)))).next((o=>{a.forEach(((c,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,Fn.newInvalidDocument(d)))}));let s=Bh();return o.forEach(((c,f)=>{const d=a.get(c);d!==void 0&&Qh(d.mutation,f,zi.empty(),Xt.now()),mm(r,f)&&(s=s.insert(c,f))})),s}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return de.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:Eo(i.createTime)}})(r)),de.resolve()}getNamedQuery(e,r){return de.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,(function(i){return{name:i.name,query:y$(i.bundledQuery),readTime:Eo(i.readTime)}})(r)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.overlays=new fr(je.comparator),this.qr=new Map}getOverlay(e,r){return de.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Uc();return de.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,a)=>{this.St(e,r,a)})),de.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),de.resolve()}getOverlaysForCollection(e,r,n){const i=Uc(),a=r.length+1,o=new je(r.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const c=s.getNext().value,f=c.getKey();if(!r.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>n&&i.set(c.getKey(),c)}return de.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new fr(((f,d)=>f-d));const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===r&&f.largestBatchId>n){let d=a.get(f.largestBatchId);d===null&&(d=Uc(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const s=Uc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>s.set(f,d))),!(s.size()>=i)););return de.resolve(s)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new KH(r,n));let a=this.qr.get(r);a===void 0&&(a=ut(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.Qr=new rn(dn.$r),this.Ur=new rn(dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new dn(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Gr(new dn(e,r))}zr(e,r){e.forEach((n=>this.removeReference(n,r)))}jr(e){const r=new je(new Kt([])),n=new dn(r,e),i=new dn(r,e+1),a=[];return this.Ur.forEachInRange([n,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new je(new Kt([])),n=new dn(r,e),i=new dn(r,e+1);let a=ut();return this.Ur.forEachInRange([n,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const r=new dn(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class dn{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return je.comparator(e.key,r.key)||ct(e.Yr,r.Yr)}static Kr(e,r){return ct(e.Yr,r.Yr)||je.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new rn(dn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new WH(a,r,n,i);this.mutationQueue.push(o);for(const s of i)this.Zr=this.Zr.add(new dn(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,r){return de.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?bA:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new dn(r,0),i=new dn(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],(o=>{const s=this.Xr(o.Yr);a.push(s)})),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new rn(ct);return r.forEach((i=>{const a=new dn(i,0),o=new dn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(s=>{n=n.add(s.Yr)}))})),de.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;je.isDocumentKey(a)||(a=a.child(""));const o=new dn(new je(a),0);let s=new rn(ct);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!n.isPrefixOf(f)&&(f.length===i&&(s=s.add(c.Yr)),!0)}),o),de.resolve(this.ti(s))}ti(e){const r=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){Rt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return de.forEach(r.mutations,(i=>{const a=new dn(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,r){const n=new dn(r,0),i=this.Zr.firstAfterOrEqual(n);return de.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e){this.ri=e,this.docs=(function(){return new fr(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return de.resolve(n?n.document.mutableCopy():Fn.newInvalidDocument(r))}getEntries(e,r){let n=vs();return r.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Fn.newInvalidDocument(i))})),de.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=vs();const o=r.path,s=new je(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||cH(lH(d),n)<=0||(i.has(d.key)||mm(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,r,n,i){Ve(9500)}ii(e,r){return de.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new k$(this)}getSize(e){return de.resolve(this.size)}}class k$ extends C${constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),de.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this.persistence=e,this.si=new yu((r=>AA(r)),EA),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new OA,this.targetCount=0,this.ai=Lf.ur()}forEachTarget(e,r){return this.si.forEach(((n,i)=>r(i))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),de.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Lf(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,de.resolve()}updateTargetData(e,r){return this.Pr(r),de.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach(((o,s)=>{s.sequenceNumber<=r&&n.get(s.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),de.waitFor(a).next((()=>i))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return de.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),de.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),de.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),de.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return de.resolve(n)}containsKey(e,r){return de.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,r){this.ui={},this.overlays={},this.ci=new dm(0),this.li=!1,this.li=!0,this.hi=new P$,this.referenceDelegate=e(this),this.Pi=new M$(this),this.indexManager=new x$,this.remoteDocumentCache=(function(i){return new N$(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new m$(r),this.Ii=new O$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new R$,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new D$(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Se("MemoryPersistence","Starting transaction:",e);const i=new j$(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,r){return de.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,r))))}}class j$ extends fH{constructor(e){super(),this.currentSequenceNumber=e}}class RA{constructor(e){this.persistence=e,this.Ri=new OA,this.Vi=null}static mi(e){return new RA(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),de.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),de.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),de.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(n=>{const i=je.fromPath(n);return this.gi(e,i).next((a=>{a||r.removeEntry(i,He.min())}))})).next((()=>(this.Vi=null,r.apply(e))))}updateLimboDocument(e,r){return this.gi(e,r).next((n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(e){return 0}gi(e,r){return de.or([()=>de.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class J1{constructor(e,r){this.persistence=e,this.pi=new yu((n=>pH(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=S$(this,r)}static mi(e,r){return new J1(e,r)}Ei(){}di(e){return de.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}wr(e){let r=0;return this.pr(e,(n=>{r++})).next((()=>r))}pr(e,r){return de.forEach(this.pi,((n,i)=>this.br(e,n,i).next((a=>a?de.resolve():r(i)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,r).next((s=>{s||(n++,a.removeEntry(o,He.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=I1(e.data.value)),r}br(e,r,n){return de.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return de.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=ut(),i=ut();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new PA(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PF()?8:dH(Gn())>0?6:4})()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,r,i,n).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new L$;return this.Ss(e,r,o).next((s=>{if(a.result=s,this.Vs)return this.bs(e,r,o,s.size)}))})).next((()=>a.result))}bs(e,r,n,i){return n.documentReadCount<this.fs?(gf()<=lt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",vf(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(gf()<=lt.DEBUG&&Se("QueryEngine","Query:",vf(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(gf()<=lt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",vf(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ao(r))):de.resolve())}ys(e,r){if(lO(r))return de.resolve(null);let n=Ao(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=Q1(r,null,"F"),n=Ao(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const o=ut(...a);return this.ps.getDocuments(e,o).next((s=>this.indexManager.getMinOffset(e,n).next((c=>{const f=this.Ds(r,s);return this.Cs(r,f,o,c.readTime)?this.ys(e,Q1(r,null,"F")):this.vs(e,f,r,c)}))))})))))}ws(e,r,n,i){return lO(r)||i.isEqual(He.min())?de.resolve(null):this.ps.getDocuments(e,n).next((a=>{const o=this.Ds(r,a);return this.Cs(r,o,n,i)?de.resolve(null):(gf()<=lt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vf(r)),this.vs(e,o,r,sH(i,op)).next((s=>s)))}))}Ds(e,r){let n=new rn(pN(e));return r.forEach(((i,a)=>{mm(e,a)&&(n=n.add(a))})),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return gf()<=lt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",vf(r)),this.ps.getDocumentsMatchingQuery(e,r,Ml.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((a=>(r.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="LocalStore",z$=3e8;class U${constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new fr(ct),this.xs=new yu((a=>AA(a)),EA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.Ms)))}}function F$(t,e,r,n){return new U$(t,e,r,n)}async function zN(t,e){const r=Ge(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const o=[],s=[];let c=ut();for(const f of i){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next((f=>({Ls:f,removedBatchIds:o,addedBatchIds:s})))}))}))}function V$(t,e){const r=Ge(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(s,c,f,d){const p=f.batch,g=p.keys();let y=de.resolve();return g.forEach((w=>{y=y.next((()=>d.getEntry(c,w))).next((_=>{const A=f.docVersions.get(w);Rt(A!==null,48541),_.version.compareTo(A)<0&&(p.applyToRemoteDocument(_,f),_.isValidDocument()&&(_.setReadTime(f.commitVersion),d.addEntry(_)))}))})),y.next((()=>s.mutationQueue.removeMutationBatch(c,p)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(s){let c=ut();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(c=c.add(s.batch.mutations[f].key));return c})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function UN(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Pi.getLastRemoteSnapshotVersion(r)))}function H$(t,e){const r=Ge(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const s=[];e.targetChanges.forEach(((d,p)=>{const g=i.get(p);if(!g)return;s.push(r.Pi.removeMatchingKeys(a,d.removedDocuments,p).next((()=>r.Pi.addMatchingKeys(a,d.addedDocuments,p))));let y=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Nn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,n)),i=i.insert(p,y),(function(_,A,S){return _.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=z$?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,y,d)&&s.push(r.Pi.updateTargetData(a,y))}));let c=vs(),f=ut();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&s.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))})),s.push($$(a,o,e.documentUpdates).next((d=>{c=d.ks,f=d.qs}))),!n.isEqual(He.min())){const d=r.Pi.getLastRemoteSnapshotVersion(a).next((p=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));s.push(d)}return de.waitFor(s).next((()=>o.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,c,f))).next((()=>c))})).then((a=>(r.Ms=i,a)))}function $$(t,e,r){let n=ut(),i=ut();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let o=vs();return r.forEach(((s,c)=>{const f=a.get(s);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),c.isNoDocument()&&c.version.isEqual(He.min())?(e.removeEntry(s,c.readTime),o=o.insert(s,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(s,c)):Se(DA,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",c.version)})),{ks:o,qs:i}}))}function q$(t,e){const r=Ge(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=bA),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function G$(t,e){const r=Ge(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Pi.getTargetData(n,e).next((a=>a?(i=a,de.resolve(i)):r.Pi.allocateTargetId(n).next((o=>(i=new Al(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n}))}async function $w(t,e,r){const n=Ge(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(o=>n.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!td(o))throw o;Se(DA,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function wO(t,e,r){const n=Ge(t);let i=He.min(),a=ut();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,f,d){const p=Ge(c),g=p.xs.get(d);return g!==void 0?de.resolve(p.Ms.get(g)):p.Pi.getTargetData(f,d)})(n,o,Ao(e)).next((s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,s.targetId).next((c=>{a=c}))})).next((()=>n.Fs.getDocumentsMatchingQuery(o,e,r?i:He.min(),r?a:ut()))).next((s=>(W$(n,NH(e),s),{documents:s,Qs:a})))))}function W$(t,e,r){let n=t.Os.get(e)||He.min();r.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.Os.set(e,n)}class _O{constructor(){this.activeTargetIds=zH()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K${constructor(){this.Mo=new _O,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _O,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="ConnectivityMonitor";class EO{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(AO,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(AO,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg=null;function qw(){return Qg===null?Qg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qg++,"0x"+Qg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="RestConnection",Y$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Q${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===K1?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const o=qw(),s=this.zo(e,r.toUriEncodedString());Se(P2,`Sending RPC '${e}' ${o}:`,s,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:f}=new URL(s),d=Mo(f);return this.Jo(e,s,c,n,d).then((p=>(Se(P2,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Nf(P2,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",n),p}))}Ho(e,r,n,i,a,o){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jf})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((i,a)=>e[a]=i)),n&&n.headers.forEach(((i,a)=>e[a]=i))}zo(e,r){const n=Y$[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection";class J$ extends Q${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const o=qw();return new Promise(((s,c)=>{const f=new FD;f.setWithCredentials(!0),f.listenOnce(VD.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case T1.NO_ERROR:const p=f.getResponseJson();Se(Ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case T1.TIMEOUT:Se(Ln,`RPC '${e}' ${o} timed out`),c(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case T1.HTTP_ERROR:const g=f.getStatus();if(Se(Ln,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y?.error;if(w&&w.status&&w.message){const _=(function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(T)>=0?T:ce.UNKNOWN})(w.status);c(new we(_,w.message))}else c(new we(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:o,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Se(Ln,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(i);Se(Ln,`RPC '${e}' ${o} sending request:`,i),f.send(r,"POST",d,n,15)}))}T_(e,r,n){const i=qw(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qD(),s=$D(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=a.join("");Se(Ln,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);this.I_(p);let g=!1,y=!1;const w=new Z$({Yo:A=>{y?Se(Ln,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(Se(Ln,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Se(Ln,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),_=(A,S,T)=>{A.listen(S,(R=>{try{T(R)}catch(N){setTimeout((()=>{throw N}),0)}}))};return _(p,Lh.EventType.OPEN,(()=>{y||(Se(Ln,`RPC '${e}' stream ${i} transport opened.`),w.o_())})),_(p,Lh.EventType.CLOSE,(()=>{y||(y=!0,Se(Ln,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(p))})),_(p,Lh.EventType.ERROR,(A=>{y||(y=!0,Nf(Ln,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),w.a_(new we(ce.UNAVAILABLE,"The operation could not be completed")))})),_(p,Lh.EventType.MESSAGE,(A=>{if(!y){const S=A.data[0];Rt(!!S,16349);const T=S,R=T?.error||T[0]?.error;if(R){Se(Ln,`RPC '${e}' stream ${i} received error:`,R);const N=R.status;let M=(function(D){const j=Fr[D];if(j!==void 0)return TN(j)})(N),L=R.message;M===void 0&&(M=ce.INTERNAL,L="Unknown error status: "+N+" with message "+R.message),y=!0,w.a_(new we(M,L)),p.close()}else Se(Ln,`RPC '${e}' stream ${i} received:`,S),w.u_(S)}})),_(s,HD.STAT_EVENT,(A=>{A.stat===Nw.PROXY?Se(Ln,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Nw.NOPROXY&&Se(Ln,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((r=>r===e))}}function D2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){return new n$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="PersistentStream";class VN{constructor(e,r,n,i,a,o,s,c){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FN(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ce.RESOURCE_EXHAUSTED?(gs(r.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===r&&this.G_(n,i)}),(n=>{e((()=>{const i=new we(ce.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(SO,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget((()=>this.D_===e?r():(Se(SO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eq extends VN{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=o$(this.serializer,e),n=(function(a){if(!("targetChange"in a))return He.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?Eo(o.readTime):He.min()})(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=Hw(this.serializer),r.addTarget=(function(a,o){let s;const c=o.target;if(s=Bw(c)?{documents:c$(a,c)}:{query:u$(a,c).ft},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=RN(a,o.resumeToken);const f=Uw(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(He.min())>0){s.readTime=Z1(a,o.snapshotVersion.toTimestamp());const f=Uw(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s})(this.serializer,e);const n=d$(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=Hw(this.serializer),r.removeTarget=e,this.q_(r)}}class tq extends VN{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=l$(e.writeResults,e.commitTime),n=Eo(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Hw(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>s$(this.serializer,n)))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{}class nq extends rq{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,Fw(r,n),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new we(ce.UNKNOWN,a.toString())}))}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Ho(e,Fw(r,n),i,o,s,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(ce.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iq{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gs(r),this.aa=!1):Se("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="RemoteStore";class aq{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{n.enqueueAndForget((async()=>{xu(this)&&(Se(au,"Restarting streams for network reachability change."),await(async function(c){const f=Ge(c);f.Ea.add(4),await Lp(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Am(f)})(this))}))})),this.Ra=new iq(n,i)}}async function Am(t){if(xu(t))for(const e of t.da)await e(!0)}async function Lp(t){for(const e of t.da)await e(!1)}function HN(t,e){const r=Ge(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),jA(r)?MA(r):nd(r).O_()&&kA(r,e))}function NA(t,e){const r=Ge(t),n=nd(r);r.Ia.delete(e),n.O_()&&$N(r,e),r.Ia.size===0&&(n.O_()?n.L_():xu(r)&&r.Ra.set("Unknown"))}function kA(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}nd(t).Y_(e)}function $N(t,e){t.Va.Ue(e),nd(t).Z_(e)}function MA(t){t.Va=new JH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nd(t).start(),t.Ra.ua()}function jA(t){return xu(t)&&!nd(t).x_()&&t.Ia.size>0}function xu(t){return Ge(t).Ea.size===0}function qN(t){t.Va=void 0}async function oq(t){t.Ra.set("Online")}async function sq(t){t.Ia.forEach(((e,r)=>{kA(t,e)}))}async function lq(t,e){qN(t),jA(t)?(t.Ra.ha(e),MA(t)):t.Ra.set("Unknown")}async function cq(t,e,r){if(t.Ra.set("Online"),e instanceof ON&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ia.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ia.delete(s),i.Va.removeTarget(s))})(t,e)}catch(n){Se(au,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ev(t,n)}else if(e instanceof P1?t.Va.Ze(e):e instanceof IN?t.Va.st(e):t.Va.tt(e),!r.isEqual(He.min()))try{const n=await UN(t.localStore);r.compareTo(n)>=0&&await(function(a,o){const s=a.Va.Tt(o);return s.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(f);d&&a.Ia.set(f,d.withResumeToken(c.resumeToken,o))}})),s.targetMismatches.forEach(((c,f)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(Nn.EMPTY_BYTE_STRING,d.snapshotVersion)),$N(a,c);const p=new Al(d.target,c,f,d.sequenceNumber);kA(a,p)})),a.remoteSyncer.applyRemoteEvent(s)})(t,r)}catch(n){Se(au,"Failed to raise snapshot:",n),await ev(t,n)}}async function ev(t,e,r){if(!td(e))throw e;t.Ea.add(1),await Lp(t),t.Ra.set("Offline"),r||(r=()=>UN(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(au,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Am(t)}))}function GN(t,e){return e().catch((r=>ev(t,r,e)))}async function Em(t){const e=Ge(t),r=zl(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bA;for(;uq(e);)try{const i=await q$(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,fq(e,i)}catch(i){await ev(e,i)}WN(e)&&KN(e)}function uq(t){return xu(t)&&t.Ta.length<10}function fq(t,e){t.Ta.push(e);const r=zl(t);r.O_()&&r.X_&&r.ea(e.mutations)}function WN(t){return xu(t)&&!zl(t).x_()&&t.Ta.length>0}function KN(t){zl(t).start()}async function dq(t){zl(t).ra()}async function hq(t){const e=zl(t);for(const r of t.Ta)e.ea(r.mutations)}async function pq(t,e,r){const n=t.Ta.shift(),i=CA.from(n,e,r);await GN(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Em(t)}async function gq(t,e){e&&zl(t).X_&&await(async function(n,i){if((function(o){return YH(o)&&o!==ce.ABORTED})(i.code)){const a=n.Ta.shift();zl(n).B_(),await GN(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Em(n)}})(t,e),WN(t)&&KN(t)}async function CO(t,e){const r=Ge(t);r.asyncQueue.verifyOperationInProgress(),Se(au,"RemoteStore received new credentials");const n=xu(r);r.Ea.add(3),await Lp(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Am(r)}async function vq(t,e){const r=Ge(t);e?(r.Ea.delete(2),await Am(r)):e||(r.Ea.add(2),await Lp(r),r.Ra.set("Unknown"))}function nd(t){return t.ma||(t.ma=(function(r,n,i){const a=Ge(r);return a.sa(),new eq(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:oq.bind(null,t),t_:sq.bind(null,t),r_:lq.bind(null,t),H_:cq.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),jA(t)?MA(t):t.Ra.set("Unknown")):(await t.ma.stop(),qN(t))}))),t.ma}function zl(t){return t.fa||(t.fa=(function(r,n,i){const a=Ge(r);return a.sa(),new tq(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:dq.bind(null,t),r_:gq.bind(null,t),ta:hq.bind(null,t),na:pq.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Em(t)):(await t.fa.stop(),t.Ta.length>0&&(Se(au,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,s=new LA(e,r,o,i,a);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function BA(t,e){if(gs("AsyncQueue",`${e}: ${t}`),td(t))return new we(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{static emptySet(e){return new _f(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||je.comparator(r.key,n.key):(r,n)=>je.comparator(r.key,n.key),this.keyedMap=Bh(),this.sortedSet=new fr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof _f)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new _f;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.ga=new fr(je.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Bf{constructor(e,r,n,i,a,o,s,c,f){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach((s=>{o.push({type:0,doc:s})})),new Bf(e,r,_f.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yq{constructor(){this.queries=IO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Ge(r),a=i.queries;i.queries=IO(),a.forEach(((o,s)=>{for(const c of s.Sa)c.onError(n)}))})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function IO(){return new yu((t=>hN(t)),vm)}async function zA(t,e){const r=Ge(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new mq,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const s=BA(o,`Initialization of query '${vf(e.query)}' failed`);return void e.onError(s)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&FA(r)}async function UA(t,e){const r=Ge(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function xq(t,e){const r=Ge(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const s of o.Sa)s.Fa(i)&&(n=!0);o.wa=i}}n&&FA(r)}function bq(t,e,r){const n=Ge(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function FA(t){t.Ca.forEach((e=>{e.next()}))}var Gw,OO;(OO=Gw||(Gw={})).Ma="default",OO.Cache="cache";class VA{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Bf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Bf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.key=e}}class YN{constructor(e){this.key=e}}class wq{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=pN(e),this.tu=new _f(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new TO,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,s=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const g=i.get(d),y=mm(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let A=!1;g&&y?g.data.isEqual(y.data)?w!==_&&(n.track({type:3,doc:y}),A=!0):this.su(g,y)||(n.track({type:2,doc:y}),A=!0,(c&&this.eu(y,c)>0||f&&this.eu(y,f)<0)&&(s=!0)):!g&&y?(n.track({type:0,doc:y}),A=!0):g&&!y&&(n.track({type:1,doc:g}),A=!0,(c||f)&&(s=!0)),A&&(y?(o=o.add(y),a=_?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:s,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,p)=>(function(y,w){const _=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:A})}};return _(y)-_(w)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(n),i=i??!1;const s=r&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,o.length!==0||f?{snapshot:new Bf(this.query,e.tu,a,o,e.mutatedKeys,c===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ut(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const r=[];return e.forEach((n=>{this.Xa.has(n)||r.push(new YN(n))})),this.Xa.forEach((n=>{e.has(n)||r.push(new XN(n))})),r}cu(e){this.Ya=e.Qs,this.Xa=ut();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Bf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const HA="SyncEngine";class _q{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Aq{constructor(e){this.key=e,this.hu=!1}}class Eq{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new yu((s=>hN(s)),vm),this.Iu=new Map,this.Eu=new Set,this.du=new fr(je.comparator),this.Au=new Map,this.Ru=new OA,this.Vu={},this.mu=new Map,this.fu=Lf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Sq(t,e,r=!0){const n=rk(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await QN(n,e,r,!0),i}async function Cq(t,e){const r=rk(t);await QN(r,e,!0,!1)}async function QN(t,e,r,n){const i=await G$(t.localStore,Ao(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let s;return n&&(s=await Tq(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&HN(t.remoteStore,i),s}async function Tq(t,e,r,n,i){t.pu=(p,g,y)=>(async function(_,A,S,T){let R=A.view.ru(S);R.Cs&&(R=await wO(_.localStore,A.query,!1).then((({documents:O})=>A.view.ru(O,R))));const N=T&&T.targetChanges.get(A.targetId),M=T&&T.targetMismatches.get(A.targetId)!=null,L=A.view.applyChanges(R,_.isPrimaryClient,N,M);return PO(_,A.targetId,L.au),L.snapshot})(t,p,g,y);const a=await wO(t.localStore,e,!0),o=new wq(e,a.Qs),s=o.ru(a.documents),c=jp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),f=o.applyChanges(s,t.isPrimaryClient,c);PO(t,r,f.au);const d=new _q(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),f.snapshot}async function Iq(t,e,r){const n=Ge(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter((o=>!vm(o,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await $w(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&NA(n.remoteStore,i.targetId),Ww(n,i.targetId)})).catch(ed)):(Ww(n,i.targetId),await $w(n.localStore,i.targetId,!0))}async function Oq(t,e){const r=Ge(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),NA(r.remoteStore,n.targetId))}async function Rq(t,e,r){const n=Lq(t);try{const i=await(function(o,s){const c=Ge(o),f=Xt.now(),d=s.reduce(((y,w)=>y.add(w.key)),ut());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let w=vs(),_=ut();return c.Ns.getEntries(y,d).next((A=>{w=A,w.forEach(((S,T)=>{T.isValidDocument()||(_=_.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,w))).next((A=>{p=A;const S=[];for(const T of s){const R=qH(T,p.get(T.key).overlayedDocument);R!=null&&S.push(new Wl(T.key,R,aN(R.value.mapValue),oi.exists(!0)))}return c.mutationQueue.addMutationBatch(y,f,S,s)})).next((A=>{g=A;const S=A.applyToLocalDocumentSet(p,_);return c.documentOverlayCache.saveOverlays(y,A.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:vN(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(o,s,c){let f=o.Vu[o.currentUser.toKey()];f||(f=new fr(ct)),f=f.insert(s,c),o.Vu[o.currentUser.toKey()]=f})(n,i.batchId,r),await Bp(n,i.changes),await Em(n.remoteStore)}catch(i){const a=BA(i,"Failed to persist write");r.reject(a)}}async function ZN(t,e){const r=Ge(t);try{const n=await H$(r.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=r.Au.get(a);o&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Rt(o.hu,14607):i.removedDocuments.size>0&&(Rt(o.hu,42227),o.hu=!1))})),await Bp(r,n,e)}catch(n){await ed(n)}}function RO(t,e,r){const n=Ge(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach(((a,o)=>{const s=o.view.va(e);s.snapshot&&i.push(s.snapshot)})),(function(o,s){const c=Ge(o);c.onlineState=s;let f=!1;c.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(s)&&(f=!0)})),f&&FA(c)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Pq(t,e,r){const n=Ge(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let o=new fr(je.comparator);o=o.insert(a,Fn.newNoDocument(a,He.min()));const s=ut().add(a),c=new wm(He.min(),new Map,new fr(ct),o,s);await ZN(n,c),n.du=n.du.remove(a),n.Au.delete(e),$A(n)}else await $w(n.localStore,e,!1).then((()=>Ww(n,e,r))).catch(ed)}async function Dq(t,e){const r=Ge(t),n=e.batch.batchId;try{const i=await V$(r.localStore,e);ek(r,n,null),JN(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Bp(r,i)}catch(i){await ed(i)}}async function Nq(t,e,r){const n=Ge(t);try{const i=await(function(o,s){const c=Ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return c.mutationQueue.lookupMutationBatch(f,s).next((p=>(Rt(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,s))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>c.localDocuments.getDocuments(f,d)))}))})(n.localStore,e);ek(n,e,r),JN(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Bp(n,i)}catch(i){await ed(i)}}function JN(t,e){(t.mu.get(e)||[]).forEach((r=>{r.resolve()})),t.mu.delete(e)}function ek(t,e,r){const n=Ge(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function Ww(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((n=>{t.Ru.containsKey(n)||tk(t,n)}))}function tk(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(NA(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),$A(t))}function PO(t,e,r){for(const n of r)n instanceof XN?(t.Ru.addReference(n.key,e),kq(t,n)):n instanceof YN?(Se(HA,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||tk(t,n.key)):Ve(19791,{wu:n})}function kq(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Se(HA,"New document in limbo: "+r),t.Eu.add(n),$A(t))}function $A(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new je(Kt.fromString(e)),n=t.fu.next();t.Au.set(n,new Aq(r)),t.du=t.du.insert(r,n),HN(t.remoteStore,new Al(Ao(gm(r.path)),n,"TargetPurposeLimboResolution",dm.ce))}}async function Bp(t,e,r){const n=Ge(t),i=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach(((s,c)=>{o.push(n.pu(c,e,r).then((f=>{if((f||r)&&n.isPrimaryClient){const d=f?!f.fromCache:r?.targetChanges.get(c.targetId)?.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(f){i.push(f);const d=PA.As(c.targetId,f);a.push(d)}})))})),await Promise.all(o),n.Pu.H_(i),await(async function(c,f){const d=Ge(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>de.forEach(f,(g=>de.forEach(g.Es,(y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y))).next((()=>de.forEach(g.ds,(y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))))))}catch(p){if(!td(p))throw p;Se(DA,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const y=d.Ms.get(g),w=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(g,_)}}})(n.localStore,a))}async function Mq(t,e){const r=Ge(t);if(!r.currentUser.isEqual(e)){Se(HA,"User change. New user:",e.toKey());const n=await zN(r.localStore,e);r.currentUser=e,(function(a,o){a.mu.forEach((s=>{s.forEach((c=>{c.reject(new we(ce.CANCELLED,o))}))})),a.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Bp(r,n.Ls)}}function jq(t,e){const r=Ge(t),n=r.Au.get(e);if(n&&n.hu)return ut().add(n.key);{let i=ut();const a=r.Iu.get(e);if(!a)return i;for(const o of a){const s=r.Tu.get(o);i=i.unionWith(s.view.nu)}return i}}function rk(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pq.bind(null,e),e.Pu.H_=xq.bind(null,e.eventManager),e.Pu.yu=bq.bind(null,e.eventManager),e}function Lq(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nq.bind(null,e),e}class tv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_m(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return F$(this.persistence,new B$,e.initialUser,this.serializer)}Cu(e){return new BN(RA.mi,this.serializer)}Du(e){return new K$}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tv.provider={build:()=>new tv};class Bq extends tv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Rt(this.persistence.referenceDelegate instanceof J1,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new A$(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new BN((n=>J1.mi(n,r)),this.serializer)}}class Kw{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>RO(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mq.bind(null,this.syncEngine),await vq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yq})()}createDatastore(e){const r=_m(e.databaseInfo.databaseId),n=(function(a){return new J$(a)})(e.databaseInfo);return(function(a,o,s,c){return new nq(a,o,s,c)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,a,o,s){return new aq(n,i,a,o,s)})(this.localStore,this.datastore,e.asyncQueue,(r=>RO(this.syncEngine,r,0)),(function(){return EO.v()?new EO:new X$})())}createSyncEngine(e,r){return(function(i,a,o,s,c,f,d){const p=new Eq(i,a,o,s,c,f);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const n=Ge(r);Se(au,"RemoteStore shutting down."),n.Ea.add(5),await Lp(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Kw.provider={build:()=>new Kw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="FirestoreClient";class zq{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Un.UNAUTHENTICATED,this.clientId=xA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async o=>{Se(Ul,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Se(Ul,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=BA(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function N2(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Ul,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await zN(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function DO(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Uq(t);Se(Ul,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>CO(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>CO(e.remoteStore,i))),t._onlineComponents=e}async function Uq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Ul,"Using user provided OfflineComponentProvider");try{await N2(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ce.FAILED_PRECONDITION||i.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;Nf("Error using user provided cache. Falling back to memory cache: "+r),await N2(t,new tv)}}else Se(Ul,"Using default OfflineComponentProvider"),await N2(t,new Bq(void 0));return t._offlineComponents}async function nk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Ul,"Using user provided OnlineComponentProvider"),await DO(t,t._uninitializedComponentsProvider._online)):(Se(Ul,"Using default OnlineComponentProvider"),await DO(t,new Kw))),t._onlineComponents}function Fq(t){return nk(t).then((e=>e.syncEngine))}async function rv(t){const e=await nk(t),r=e.eventManager;return r.onListen=Sq.bind(null,e.syncEngine),r.onUnlisten=Iq.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Cq.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Oq.bind(null,e.syncEngine),r}function Vq(t,e,r={}){const n=new cs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,s,c,f){const d=new qA({next:g=>{d.Nu(),o.enqueueAndForget((()=>UA(a,p)));const y=g.docs.has(s);!y&&g.fromCache?f.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?f.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new VA(gm(s.path),d,{includeMetadataChanges:!0,qa:!0});return zA(a,p)})(await rv(t),t.asyncQueue,e,r,n))),n.promise}function Hq(t,e,r={}){const n=new cs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,s,c,f){const d=new qA({next:g=>{d.Nu(),o.enqueueAndForget((()=>UA(a,p))),g.fromCache&&c.source==="server"?f.reject(new we(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new VA(s,d,{includeMetadataChanges:!0,qa:!0});return zA(a,p)})(await rv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="firestore.googleapis.com",kO=!0;class MO{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ak,this.ssl=kO}else this.host=e.host,this.ssl=e.ssl??kO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<w$)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ik(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sm{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new XV;switch(n.type){case"firstParty":return new JV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=NO.get(r);n&&(Se("ComponentProvider","Removing Datastore"),NO.delete(r),n.terminate())})(this),Promise.resolve()}}function $q(t,e,r,n={}){t=ai(t,Sm);const i=Mo(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},s=`${e}:${r}`;i&&(lm(`https://${s}`),cm("Firestore",!0)),a.host!==ak&&a.host!==s&&Nf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:s,ssl:i,emulatorOptions:n};if(!nu(c,o)&&(t._setSettings(c),n.mockUserToken)){let f,d;if(typeof n.mockUserToken=="string")f=n.mockUserToken,d=Un.MOCK_USER;else{f=kD(n.mockUserToken,t._app?.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Un(p)}t._authCredentials=new YV(new WD(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class mr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}toJSON(){return{type:mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(kp(r,mr._jsonSchema))return new mr(e,n||null,new je(Kt.fromString(r.referencePath)))}}mr._jsonSchemaVersion="firestore/documentReference/1.0",mr._jsonSchema={type:Hr("string",mr._jsonSchemaVersion),referencePath:Hr("string")};class Ol extends _s{constructor(e,r,n){super(e,r,gm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new je(e))}withConverter(e){return new Ol(this.firestore,e,this._path)}}function ze(t,e,...r){if(t=Bt(t),KD("collection","path",e),t instanceof Sm){const n=Kt.fromString(e,...r);return KI(n),new Ol(t,null,n)}{if(!(t instanceof mr||t instanceof Ol))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kt.fromString(e,...r));return KI(n),new Ol(t.firestore,null,n)}}function ke(t,e,...r){if(t=Bt(t),arguments.length===1&&(e=xA.newId()),KD("doc","path",e),t instanceof Sm){const n=Kt.fromString(e,...r);return WI(n),new mr(t,null,new je(n))}{if(!(t instanceof mr||t instanceof Ol))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kt.fromString(e,...r));return WI(n),new mr(t.firestore,t instanceof Ol?t.converter:null,new je(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="AsyncQueue";class LO{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FN(this,"async_queue_retry"),this._c=()=>{const n=D2();n&&Se(jO,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=D2();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=D2();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!td(e))throw e;Se(jO,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const r=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,gs("INTERNAL UNHANDLED ERROR: ",BO(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=LA.createAndSchedule(this,e,r,n,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ve(47125,{Pc:BO(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function BO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Ro extends Sm{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new LO,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LO(e),this._firestoreClient=void 0,await e}}}function qq(t,e){const r=typeof t=="object"?t:um(),n=typeof t=="string"?t:K1,i=Np(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=gA("firestore");a&&$q(i,...a)}return i}function zp(t){if(t._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Gq(t),t._firestoreClient}function Gq(t){const e=t._freezeSettings(),r=(function(i,a,o,s){return new mH(i,a,o,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,ik(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zq(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(Nn.fromBase64String(e))}catch(r){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new da(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:da._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kp(e,da._jsonSchema))return da.fromBase64String(e.bytes)}}da._jsonSchemaVersion="firestore/bytes/1.0",da._jsonSchema={type:Hr("string",da._jsonSchemaVersion),bytes:Hr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:So._jsonSchemaVersion}}static fromJSON(e){if(kp(e,So._jsonSchema))return new So(e.latitude,e.longitude)}}So._jsonSchemaVersion="firestore/geoPoint/1.0",So._jsonSchema={type:Hr("string",So._jsonSchemaVersion),latitude:Hr("number"),longitude:Hr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Co._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kp(e,Co._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((r=>typeof r=="number")))return new Co(e.vectorValues);throw new we(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Co._jsonSchemaVersion="firestore/vectorValue/1.0",Co._jsonSchema={type:Hr("string",Co._jsonSchemaVersion),vectorValues:Hr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=/^__.*__$/;class Kq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Wl(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mp(e,this.data,r,this.fieldTransforms)}}class ok{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Wl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function sk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:t})}}class GA{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new GA({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sk(this.Ac)&&Wq.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xq{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||_m(e)}Cc(e,r,n,i=!1){return new GA({Ac:e,methodName:r,Dc:n,path:Pn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vp(t){const e=t._freezeSettings(),r=_m(t._databaseId);return new Xq(t._databaseId,!!e.ignoreUndefinedProperties,r)}function WA(t,e,r,n,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);YA("Data must be an object, but it was:",o,n);const s=uk(n,o);let c,f;if(a.merge)c=new zi(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const g=Xw(e,p,r);if(!o.contains(g))throw new we(ce.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);dk(d,g)||d.push(g)}c=new zi(d),f=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=o.fieldTransforms;return new Kq(new mi(s),c,f)}class Cm extends Fp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cm}}class KA extends Fp{_toFieldTransform(e){return new EN(e.path,new fp)}isEqual(e){return e instanceof KA}}class XA extends Fp{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new pp(e.serializer,xN(e.serializer,this.Fc));return new EN(e.path,r)}isEqual(e){return e instanceof XA&&this.Fc===e.Fc}}function lk(t,e,r,n){const i=t.Cc(1,e,r);YA("Data must be an object, but it was:",i,n);const a=[],o=mi.empty();Gl(n,((c,f)=>{const d=QA(e,c,r);f=Bt(f);const p=i.yc(d);if(f instanceof Cm)a.push(d);else{const g=Hp(f,p);g!=null&&(a.push(d),o.set(d,g))}}));const s=new zi(a);return new ok(o,s,i.fieldTransforms)}function ck(t,e,r,n,i,a){const o=t.Cc(1,e,r),s=[Xw(e,n,r)],c=[i];if(a.length%2!=0)throw new we(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(Xw(e,a[g])),c.push(a[g+1]);const f=[],d=mi.empty();for(let g=s.length-1;g>=0;--g)if(!dk(f,s[g])){const y=s[g];let w=c[g];w=Bt(w);const _=o.yc(y);if(w instanceof Cm)f.push(y);else{const A=Hp(w,_);A!=null&&(f.push(y),d.set(y,A))}}const p=new zi(f);return new ok(d,p,o.fieldTransforms)}function Yq(t,e,r,n=!1){return Hp(r,t.Cc(n?4:3,e))}function Hp(t,e){if(fk(t=Bt(t)))return YA("Unsupported field value:",e,t),uk(t,e);if(t instanceof Fp)return(function(n,i){if(!sk(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const a=[];let o=0;for(const s of n){let c=Hp(s,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}})(t,e)}return(function(n,i){if((n=Bt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return xN(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Xt.fromDate(n);return{timestampValue:Z1(i.serializer,a)}}if(n instanceof Xt){const a=new Xt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Z1(i.serializer,a)}}if(n instanceof So)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof da)return{bytesValue:RN(i.serializer,n._byteString)};if(n instanceof mr){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:IA(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Co)return(function(o,s){return{mapValue:{fields:{[nN]:{stringValue:iN},[X1]:{arrayValue:{values:o.toArray().map((f=>{if(typeof f!="number")throw s.Sc("VectorValues must only contain numeric values.");return SA(s.serializer,f)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${fm(n)}`)})(t,e)}function uk(t,e){const r={};return QD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(t,((n,i)=>{const a=Hp(i,e.mc(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function fk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xt||t instanceof So||t instanceof da||t instanceof mr||t instanceof Fp||t instanceof Co)}function YA(t,e,r){if(!fk(r)||!XD(r)){const n=fm(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Xw(t,e,r){if((e=Bt(e))instanceof Up)return e._internalPath;if(typeof e=="string")return QA(t,e);throw nv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Qq=new RegExp("[~\\*/\\[\\]]");function QA(t,e,r){if(e.search(Qq)>=0)throw nv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Up(...e.split("."))._internalPath}catch{throw nv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function nv(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new we(ce.INVALID_ARGUMENT,s+t+c)}function dk(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Zq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Zq extends hk{data(){return super.data()}}function Tm(t,e){return typeof e=="string"?QA(t,e):e instanceof Up?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZA{}class JA extends ZA{}function mt(t,e,...r){let n=[];e instanceof ZA&&n.push(e),n=n.concat(r),(function(a){const o=a.filter((c=>c instanceof eE)).length,s=a.filter((c=>c instanceof Im)).length;if(o>1||o>0&&s>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class Im extends JA{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Im(e,r,n)}_apply(e){const r=this._parse(e);return gk(e._query,r),new _s(e.firestore,e.converter,zw(e._query,r))}_parse(e){const r=Vp(e.firestore);return(function(a,o,s,c,f,d,p){let g;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){FO(p,d);const w=[];for(const _ of p)w.push(UO(c,a,_));g={arrayValue:{values:w}}}else g=UO(c,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||FO(p,d),g=Yq(s,o,p,d==="in"||d==="not-in");return Vr.create(f,d,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Or(t,e,r){const n=e,i=Tm("where",t);return Im._create(i,n,r)}class eE extends ZA{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new eE(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Va.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,a){let o=i;const s=a.getFlattenedFilters();for(const c of s)gk(o,c),o=zw(o,c)})(e._query,r),new _s(e.firestore,e.converter,zw(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tE extends JA{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new tE(e,r)}_apply(e){const r=(function(i,a,o){if(i.startAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new we(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new up(a,o)})(e._query,this._field,this._direction);return new _s(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new rd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function Rr(t,e="asc"){const r=e,n=Tm("orderBy",t);return tE._create(n,r)}class rE extends JA{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new rE(e,r,n)}_apply(e){return new _s(e.firestore,e.converter,Q1(e._query,this._limit,this._limitType))}}function Ha(t){return oH("limit",t),rE._create("limit",t,"F")}function UO(t,e,r){if(typeof(r=Bt(r))=="string"){if(r==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dN(e)&&r.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Kt.fromString(r));if(!je.isDocumentKey(n))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rO(t,new je(n))}if(r instanceof mr)return rO(t,r._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fm(r)}.`)}function FO(t,e){if(!Array.isArray(t)||t.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gk(t,e){const r=(function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Jq{convertValue(e,r="none"){switch(Bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Gl(e,((i,a)=>{n[i]=this.convertValue(a,r)})),n}convertVectorValue(e){const r=e.fields?.[X1].arrayValue?.values?.map((n=>Ir(n.doubleValue)));return new Co(r)}convertGeoPoint(e){return new So(Ir(e.latitude),Ir(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=pm(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(sp(e));default:return null}}convertTimestamp(e){const r=jl(e);return new Xt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Kt.fromString(e);Rt(jN(n),9688,{name:e});const i=new lp(n.get(1),n.get(3)),a=new je(n.popFirst(5));return i.isEqual(r)||gs(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Uh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kc extends hk{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new D1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Tm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Kc._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Kc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kc._jsonSchema={type:Hr("string",Kc._jsonSchemaVersion),bundleSource:Hr("string","DocumentSnapshot"),bundleName:Hr("string"),bundle:Hr("string")};class D1 extends Kc{data(e={}){return super.data(e)}}class Xc{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Uh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new D1(this._firestore,this._userDataWriter,n.key,n,new Uh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((s=>{const c=new D1(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Uh(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((s=>a||s.type!==3)).map((s=>{const c=new D1(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Uh(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),d=o.indexOf(s.doc.key)),{type:eG(s.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){t=ai(t,mr);const e=ai(t.firestore,Ro);return Vq(zp(e),t._key).then((r=>vk(e,t,r)))}Xc._jsonSchemaVersion="firestore/querySnapshot/1.0",Xc._jsonSchema={type:Hr("string",Xc._jsonSchemaVersion),bundleSource:Hr("string","QuerySnapshot"),bundleName:Hr("string"),bundle:Hr("string")};class iE extends Jq{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,r)}}function dt(t){t=ai(t,_s);const e=ai(t.firestore,Ro),r=zp(e),n=new iE(e);return pk(t._query),Hq(r,t._query).then((i=>new Xc(e,n,t,i)))}function Kl(t,e,r){t=ai(t,mr);const n=ai(t.firestore,Ro),i=nE(t.converter,e,r);return $p(n,[WA(Vp(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,oi.none())])}function lr(t,e,r,...n){t=ai(t,mr);const i=ai(t.firestore,Ro),a=Vp(i);let o;return o=typeof(e=Bt(e))=="string"||e instanceof Up?ck(a,"updateDoc",t._key,e,r,n):lk(a,"updateDoc",t._key,e),$p(i,[o.toMutation(t._key,oi.exists(!0))])}function Vi(t){return $p(ai(t.firestore,Ro),[new bm(t._key,oi.none())])}function id(t,e){const r=ai(t.firestore,Ro),n=ke(t),i=nE(t.converter,e);return $p(r,[WA(Vp(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,oi.exists(!1))]).then((()=>n))}function bu(t,...e){t=Bt(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||zO(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(zO(e[n])){const c=e[n];e[n]=c.next?.bind(c),e[n+1]=c.error?.bind(c),e[n+2]=c.complete?.bind(c)}let a,o,s;if(t instanceof mr)o=ai(t.firestore,Ro),s=gm(t._key.path),a={next:c=>{e[n]&&e[n](vk(o,t,c))},error:e[n+1],complete:e[n+2]};else{const c=ai(t,_s);o=ai(c.firestore,Ro),s=c._query;const f=new iE(o);a={next:d=>{e[n]&&e[n](new Xc(o,f,c,d))},error:e[n+1],complete:e[n+2]},pk(t._query)}return(function(f,d,p,g){const y=new qA(g),w=new VA(d,y,p);return f.asyncQueue.enqueueAndForget((async()=>zA(await rv(f),w))),()=>{y.Nu(),f.asyncQueue.enqueueAndForget((async()=>UA(await rv(f),w)))}})(zp(o),s,i,a)}function $p(t,e){return(function(n,i){const a=new cs;return n.asyncQueue.enqueueAndForget((async()=>Rq(await Fq(n),i,a))),a.promise})(zp(t),e)}function vk(t,e,r){const n=r.docs.get(e._key),i=new iE(t);return new Kc(t,i,e._key,n,new Uh(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Vp(e)}set(e,r,n){this._verifyNotCommitted();const i=k2(e,this._firestore),a=nE(i.converter,r,n),o=WA(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,n);return this._mutations.push(o.toMutation(i._key,oi.none())),this}update(e,r,n,...i){this._verifyNotCommitted();const a=k2(e,this._firestore);let o;return o=typeof(r=Bt(r))=="string"||r instanceof Up?ck(this._dataReader,"WriteBatch.update",a._key,r,n,i):lk(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(o.toMutation(a._key,oi.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=k2(e,this._firestore);return this._mutations=this._mutations.concat(new bm(r._key,oi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function k2(t,e){if((t=Bt(t)).firestore!==e)throw new we(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function rG(){return new KA("serverTimestamp")}function bi(t){return new XA("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){return zp(t=ai(t,Ro)),new tG(t,(e=>$p(t,e)))}(function(e,r=!0){(function(i){Jf=i})(mu),kl(new hs("firestore",((n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),s=new Ro(new QV(n.getProvider("auth-internal")),new eH(o,n.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lp(f.options.projectId,d)})(o,i),o);return a={useFetchStreams:r,...a},s._setSettings(a),s}),"PUBLIC").setMultipleInstances(!0)),ga(HI,$I,e),ga(HI,$I,"esm2020")})();var nG="firebase",iG="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ga(nG,iG,"app");function yk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aG=yk,xk=new Pp("auth","Firebase",yk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new vA("@firebase/auth");function oG(t,...e){iv.logLevel<=lt.WARN&&iv.warn(`Auth (${mu}): ${t}`,...e)}function N1(t,...e){iv.logLevel<=lt.ERROR&&iv.error(`Auth (${mu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t,...e){throw oE(t,...e)}function Fa(t,...e){return oE(t,...e)}function aE(t,e,r){const n={...aG(),[e]:r};return new Pp("auth","Firebase",n).create(e,{appName:t.name})}function us(t){return aE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sG(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ma(t,"argument-error"),aE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oE(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return xk.create(t,...e)}function Fe(t,e,...r){if(!t)throw oE(e,...r)}function as(t){const e="INTERNAL ASSERTION FAILED: "+t;throw N1(e),new Error(e)}function ms(t,e){t||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(){return typeof self<"u"&&self.location?.href||""}function lG(){return VO()==="http:"||VO()==="https:"}function VO(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lG()||IF()||"connection"in navigator)?navigator.onLine:!0}function uG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,r){this.shortDelay=e,this.longDelay=r,ms(r>e,"Short delay should be less than long delay!"),this.isMobile=SF()||OF()}get(){return cG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e){ms(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hG=new qp(3e4,6e4);function Xl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function As(t,e,r,n,i={}){return wk(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const s=Dp({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...a};return TF()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Mo(t.emulatorConfig.host)&&(f.credentials="include"),bk.fetch()(await _k(t,t.config.apiHost,r,s),f)})}async function wk(t,e,r){t._canInitEmulator=!1;const n={...fG,...e};try{const i=new gG(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Zg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[c,f]=s.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zg(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Zg(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Zg(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw aE(t,d,f);ma(t,d)}}catch(i){if(i instanceof qa)throw i;ma(t,"network-request-failed",{message:String(i)})}}async function Gp(t,e,r,n,i={}){const a=await As(t,e,r,n,i);return"mfaPendingCredential"in a&&ma(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function _k(t,e,r,n){const i=`${e}${r}?${n}`,a=t,o=a.config.emulator?sE(t.config,i):`${t.config.apiScheme}://${i}`;return dG.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function pG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Fa(this.auth,"network-request-failed")),hG.get())})}}function Zg(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Fa(t,e,n);return i.customData._tokenResponse=r,i}function HO(t){return t!==void 0&&t.enterprise!==void 0}class vG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return pG(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mG(t,e){return As(t,"GET","/v2/recaptchaConfig",Xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yG(t,e){return As(t,"POST","/v1/accounts:delete",e)}async function av(t,e){return As(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xG(t,e=!1){const r=Bt(t),n=await r.getIdToken(e),i=lE(n);Fe(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:n,authTime:Zh(M2(i.auth_time)),issuedAtTime:Zh(M2(i.iat)),expirationTime:Zh(M2(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function M2(t){return Number(t)*1e3}function lE(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return N1("JWT malformed, contained fewer than 3 sections"),null;try{const i=RD(r);return i?JSON.parse(i):(N1("Failed to decode base64 JWT payload"),null)}catch(i){return N1("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $O(t){const e=lE(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof qa&&bG(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function bG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov(t){const e=t.auth,r=await t.getIdToken(),n=await zf(t,av(e,{idToken:r}));Fe(n?.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?Ak(i.providerUserInfo):[],o=AG(t.providerData,a),s=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!o?.length,f=s?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qw(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,d)}async function _G(t){const e=Bt(t);await ov(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AG(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Ak(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EG(t,e){const r=await wk(t,{},async()=>{const n=Dp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await _k(t,i,"/v1/token",`key=${a}`),s=await t._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:s,body:n};return t.emulatorConfig&&Mo(t.emulatorConfig.host)&&(c.credentials="include"),bk.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function SG(t,e){return As(t,"POST","/v2/accounts:revokeToken",Xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$O(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const r=$O(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await EG(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new Af;return n&&(Fe(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(Fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Fe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Af,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ua{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new wG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qw(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await zf(this,this.stsTokenManager.getToken(this.auth,e));return Fe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return xG(this,e)}reload(){return _G(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ov(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await zf(this,yG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,s=r.tenantId??void 0,c=r._redirectEventId??void 0,f=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:w,stsTokenManager:_}=r;Fe(p&&_,e,"internal-error");const A=Af.fromJSON(this.name,_);Fe(typeof p=="string",e,"internal-error"),ul(n,e.name),ul(i,e.name),Fe(typeof g=="boolean",e,"internal-error"),Fe(typeof y=="boolean",e,"internal-error"),ul(a,e.name),ul(o,e.name),ul(s,e.name),ul(c,e.name),ul(f,e.name),ul(d,e.name);const S=new Ua({uid:p,auth:e,email:i,emailVerified:g,displayName:n,isAnonymous:y,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:A,createdAt:f,lastLoginAt:d});return w&&Array.isArray(w)&&(S.providerData=w.map(T=>({...T}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,r,n=!1){const i=new Af;i.updateFromServerResponse(r);const a=new Ua({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ov(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Fe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Ak(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,s=new Af;s.updateFromIdToken(n);const c=new Ua({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Qw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new Map;function os(t){ms(t instanceof Function,"Expected a class definition");let e=qO.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Ek.type="NONE";const GO=Ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t,e,r){return`firebase:${t}:${e}:${r}`}class Ef{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=k1(this.userKey,i.apiKey,a),this.fullPersistenceKey=k1("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await av(this.auth,{idToken:e}).catch(()=>{});return r?Ua._fromGetAccountInfoResponse(this.auth,r,e):null}return Ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ef(os(GO),e,n);const i=(await Promise.all(r.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||os(GO);const o=k1(n,e.config.apiKey,e.name);let s=null;for(const f of r)try{const d=await f._get(o);if(d){let p;if(typeof d=="string"){const g=await av(e,{idToken:d}).catch(()=>{});if(!g)break;p=await Ua._fromGetAccountInfoResponse(e,g,d)}else p=Ua._fromJSON(e,d);f!==a&&(s=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Ef(a,e,n):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(r.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new Ef(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ik(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rk(e))return"Blackberry";if(Pk(e))return"Webos";if(Ck(e))return"Safari";if((e.includes("chrome/")||Tk(e))&&!e.includes("edge/"))return"Chrome";if(Ok(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function Sk(t=Gn()){return/firefox\//i.test(t)}function Ck(t=Gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tk(t=Gn()){return/crios\//i.test(t)}function Ik(t=Gn()){return/iemobile/i.test(t)}function Ok(t=Gn()){return/android/i.test(t)}function Rk(t=Gn()){return/blackberry/i.test(t)}function Pk(t=Gn()){return/webos/i.test(t)}function cE(t=Gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CG(t=Gn()){return cE(t)&&!!window.navigator?.standalone}function TG(){return RF()&&document.documentMode===10}function Dk(t=Gn()){return cE(t)||Ok(t)||Pk(t)||Rk(t)||/windows phone/i.test(t)||Ik(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e=[]){let r;switch(t){case"Browser":r=WO(Gn());break;case"Worker":r=`${WO(Gn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${mu}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,s)=>{try{const c=e(a);o(c)}catch(c){s(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OG(t,e={}){return As(t,"GET","/v2/passwordPolicy",Xl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG=6;class PG{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??RG,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KO(this),this.idTokenSubscription=new KO(this),this.beforeStateQueue=new IG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=os(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ef.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await av(this,{idToken:e}),n=await Ua._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ri(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=n?._redirectEventId,s=await this.tryRedirectSignIn(e);(!a||a===o)&&s?.user&&(n=s.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ov(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(us(this));const r=e?Bt(e):null;return r&&Fe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OG(this),r=new PG(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await SG(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&os(e)||this._popupRedirectResolver;Fe(r,this,"argument-error"),this.redirectPersistenceManager=await Ef.create(this,[os(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&oG(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yl(t){return Bt(t)}class KO{constructor(e){this.auth=e,this.observer=null,this.addObserver=BF(r=>this.observer=r)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NG(t){Om=t}function kk(t){return Om.loadJS(t)}function kG(){return Om.recaptchaEnterpriseScript}function MG(){return Om.gapiScript}function jG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class LG{constructor(){this.enterprise=new BG}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class BG{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const zG="recaptcha-enterprise",Mk="NO_RECAPTCHA";class UG{constructor(e){this.type=zG,this.auth=Yl(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{mG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new vG(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(c=>{s(c)})})}function i(a,o,s){const c=window.grecaptcha;HO(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(Mk)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LG().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(s=>{if(!r&&HO(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=kG();c.length!==0&&(c+=s),kk(c).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function XO(t,e,r,n=!1,i=!1){const a=new UG(t);let o;if(i)o=Mk;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const s={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const c=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const c=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return n?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Zw(t,e,r,n,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await XO(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await XO(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FG(t,e){const r=Np(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(nu(a,e??{}))return i;ma(i,"already-initialized")}return r.initialize({options:e})}function VG(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(os);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function HG(t,e,r){const n=Yl(t);Fe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=jk(e),{host:o,port:s}=$G(e),c=s===null?"":`:${s}`,f={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Fe(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Fe(nu(f,n.config.emulator)&&nu(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Mo(o)?(lm(`${a}//${o}${c}`),cm("Auth",!0)):qG()}function jk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $G(t){const e=jk(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:YO(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:YO(o)}}}function YO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qG(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,r){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}async function GG(t,e){return As(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WG(t,e){return Gp(t,"POST","/v1/accounts:signInWithPassword",Xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KG(t,e){return Gp(t,"POST","/v1/accounts:signInWithEmailLink",Xl(t,e))}async function XG(t,e){return Gp(t,"POST","/v1/accounts:signInWithEmailLink",Xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp extends uE{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new gp(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new gp(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zw(e,r,"signInWithPassword",WG);case"emailLink":return KG(e,{email:this._email,oobCode:this._password});default:ma(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zw(e,n,"signUpPassword",GG);case"emailLink":return XG(e,{idToken:r,email:this._email,oobCode:this._password});default:ma(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(t,e){return Gp(t,"POST","/v1/accounts:signInWithIdp",Xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG="http://localhost";class ou extends uE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ou(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ma("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const o=new ou(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Sf(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Sf(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Sf(e,r)}buildRequest(){const e={requestUri:YG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Dp(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZG(t){const e=Mh(jh(t)).link,r=e?Mh(jh(e)).deep_link_id:null,n=Mh(jh(t)).deep_link_id;return(n?Mh(jh(n)).link:null)||n||r||e||t}class fE{constructor(e){const r=Mh(jh(e)),n=r.apiKey??null,i=r.oobCode??null,a=QG(r.mode??null);Fe(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=ZG(e);try{return new fE(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this.providerId=ad.PROVIDER_ID}static credential(e,r){return gp._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=fE.parseLink(r);return Fe(n,"argument-error"),gp._fromEmailAndCode(e,n.code,n.tenantId)}}ad.PROVIDER_ID="password";ad.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ad.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp extends dE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends Wp{constructor(){super("facebook.com")}static credential(e){return ou._fromParams({providerId:yl.PROVIDER_ID,signInMethod:yl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yl.credentialFromTaggedObject(e)}static credentialFromError(e){return yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yl.credential(e.oauthAccessToken)}catch{return null}}}yl.FACEBOOK_SIGN_IN_METHOD="facebook.com";yl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Wp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ou._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return rs.credential(r,n)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Wp{constructor(){super("github.com")}static credential(e){return ou._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xl.credential(e.oauthAccessToken)}catch{return null}}}xl.GITHUB_SIGN_IN_METHOD="github.com";xl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Wp{constructor(){super("twitter.com")}static credential(e,r){return ou._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return bl.credential(r,n)}catch{return null}}}bl.TWITTER_SIGN_IN_METHOD="twitter.com";bl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JG(t,e){return Gp(t,"POST","/v1/accounts:signUp",Xl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Ua._fromIdTokenResponse(e,n,i),o=QO(n);return new su({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=QO(n);return new su({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function QO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends qa{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,sv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new sv(e,r,n,i)}}function Lk(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?sv._fromErrorAndOperation(t,a,e,n):a})}async function eW(t,e,r=!1){const n=await zf(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return su._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tW(t,e,r=!1){const{auth:n}=t;if(ri(n.app))return Promise.reject(us(n));const i="reauthenticate";try{const a=await zf(t,Lk(n,i,e,t),r);Fe(a.idToken,n,"internal-error");const o=lE(a.idToken);Fe(o,n,"internal-error");const{sub:s}=o;return Fe(t.uid===s,n,"user-mismatch"),su._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ma(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e,r=!1){if(ri(t.app))return Promise.reject(us(t));const n="signIn",i=await Lk(t,n,e),a=await su._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function rW(t,e){return Bk(Yl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t){const e=Yl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nW(t,e,r){if(ri(t.app))return Promise.reject(us(t));const n=Yl(t),o=await Zw(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JG).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&zk(t),c}),s=await su._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(s.user),s}function iW(t,e,r){return ri(t.app)?Promise.reject(us(t)):rW(Bt(t),ad.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&zk(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t,e){return As(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Bt(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await zf(n,aW(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const s=n.providerData.find(({providerId:c})=>c==="password");s&&(s.displayName=n.displayName,s.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function oW(t,e,r,n){return Bt(t).onIdTokenChanged(e,r,n)}function sW(t,e,r){return Bt(t).beforeAuthStateChanged(e,r)}function lW(t,e,r,n){return Bt(t).onAuthStateChanged(e,r,n)}function cW(t){return Bt(t).signOut()}const lv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(lv,"1"),this.storage.removeItem(lv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=1e3,fW=10;class Vk extends Fk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,s,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);TG()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fW):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},uW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vk.type="LOCAL";const dW=Vk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk extends Fk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Hk.type="SESSION";const $k=Hk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Rm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(o).map(async f=>f(r.origin,a)),c=await hW(s);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,c)=>{const f=hE("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(){return window}function gW(t){To().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){return typeof To().WorkerGlobalScope<"u"&&typeof To().importScripts=="function"}async function vW(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mW(){return navigator?.serviceWorker?.controller||null}function yW(){return qk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="firebaseLocalStorageDb",xW=1,cv="firebaseLocalStorage",Wk="fbase_key";class Kp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Pm(t,e){return t.transaction([cv],e?"readwrite":"readonly").objectStore(cv)}function bW(){const t=indexedDB.deleteDatabase(Gk);return new Kp(t).toPromise()}function Jw(){const t=indexedDB.open(Gk,xW);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(cv,{keyPath:Wk})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(cv)?e(n):(n.close(),await bW(),e(await Jw()))})})}async function ZO(t,e,r){const n=Pm(t,!0).put({[Wk]:e,value:r});return new Kp(n).toPromise()}async function wW(t,e){const r=Pm(t,!1).get(e),n=await new Kp(r).toPromise();return n===void 0?null:n.value}function JO(t,e){const r=Pm(t,!0).delete(e);return new Kp(r).toPromise()}const _W=800,AW=3;class Kk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jw(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>AW)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rm._getInstance(yW()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vW(),!this.activeServiceWorker)return;this.sender=new pW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jw();return await ZO(e,lv,"1"),await JO(e,lv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>ZO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>wW(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>JO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Pm(i,!1).getAll();return new Kp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_W)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kk.type="LOCAL";const EW=Kk;new qp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e){return e?os(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE extends uE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sf(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Sf(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Sf(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function SW(t){return Bk(t.auth,new pE(t),t.bypassAuthState)}function CW(t){const{auth:e,user:r}=t;return Fe(r,e,"internal-error"),tW(r,new pE(t),t.bypassAuthState)}async function TW(t){const{auth:e,user:r}=t;return Fe(r,e,"internal-error"),eW(r,new pE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SW;case"linkViaPopup":case"linkViaRedirect":return TW;case"reauthViaPopup":case"reauthViaRedirect":return CW;default:ma(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=new qp(2e3,1e4);async function OW(t,e,r){if(ri(t.app))return Promise.reject(Fa(t,"operation-not-supported-in-this-environment"));const n=Yl(t);sG(t,e,dE);const i=Xk(n,r);return new Fc(n,"signInViaPopup",e,i).executeNotNull()}class Fc extends Yk{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Fc.currentPopupAction&&Fc.currentPopupAction.cancel(),Fc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=hE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Fa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IW.get())};e()}}Fc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW="pendingRedirect",M1=new Map;class PW extends Yk{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=M1.get(this.auth._key());if(!e){try{const n=await DW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}M1.set(this.auth._key(),e)}return this.bypassAuthState||M1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DW(t,e){const r=MW(e),n=kW(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function NW(t,e){M1.set(t._key(),e)}function kW(t){return os(t._redirectPersistence)}function MW(t){return k1(RW,t.config.apiKey,t.name)}async function jW(t,e,r=!1){if(ri(t.app))return Promise.reject(us(t));const n=Yl(t),i=Xk(n,e),o=await new PW(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LW=600*1e3;class BW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zW(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!Qk(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(Fa(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LW&&this.cachedEventUids.clear(),this.cachedEventUids.has(e6(e))}saveEventToCache(e){this.cachedEventUids.add(e6(e)),this.lastProcessedEventTime=Date.now()}}function e6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Qk({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function zW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UW(t,e={}){return As(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VW=/^https?/;async function HW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UW(t);for(const r of e)try{if($W(r))return}catch{}ma(t,"unauthorized-domain")}function $W(t){const e=Yw(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!VW.test(r))return!1;if(FW.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW=new qp(3e4,6e4);function t6(){const t=To().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function GW(t){return new Promise((e,r)=>{function n(){t6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t6(),r(Fa(t,"network-request-failed"))},timeout:qW.get()})}if(To().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(To().gapi?.load)n();else{const i=jG("iframefcb");return To()[i]=()=>{gapi.load?n():r(Fa(t,"network-request-failed"))},kk(`${MG()}?onload=${i}`).catch(a=>r(a))}}).catch(e=>{throw j1=null,e})}let j1=null;function WW(t){return j1=j1||GW(t),j1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KW=new qp(5e3,15e3),XW="__/auth/iframe",YW="emulator/auth/iframe",QW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JW(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?sE(e,YW):`https://${t.config.authDomain}/${XW}`,n={apiKey:e.apiKey,appName:t.name,v:mu},i=ZW.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Dp(n).slice(1)}`}async function eK(t){const e=await WW(t),r=To().gapi;return Fe(r,t,"internal-error"),e.open({where:document.body,url:JW(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QW,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=Fa(t,"network-request-failed"),s=To().setTimeout(()=>{a(o)},KW.get());function c(){To().clearTimeout(s),i(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rK=500,nK=600,iK="_blank",aK="http://localhost";class r6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oK(t,e,r,n=rK,i=nK){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const c={...tK,width:n.toString(),height:i.toString(),top:a,left:o},f=Gn().toLowerCase();r&&(s=Tk(f)?iK:r),Sk(f)&&(e=e||aK,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(CG(f)&&s!=="_self")return sK(e||"",s),new r6(null);const p=window.open(e||"",s,d);Fe(p,t,"popup-blocked");try{p.focus()}catch{}return new r6(p)}function sK(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK="__/auth/handler",cK="emulator/auth/handler",uK=encodeURIComponent("fac");async function n6(t,e,r,n,i,a){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:mu,eventId:i};if(e instanceof dE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Wp){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const s=o;for(const d of Object.keys(s))s[d]===void 0&&delete s[d];const c=await t._getAppCheckToken(),f=c?`#${uK}=${encodeURIComponent(c)}`:"";return`${fK(t)}?${Dp(s).slice(1)}${f}`}function fK({config:t}){return t.emulator?sE(t,cK):`https://${t.authDomain}/${lK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="webStorageSupport";class dK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$k,this._completeRedirectFn=jW,this._overrideRedirectResult=NW}async _openPopup(e,r,n,i){ms(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await n6(e,r,n,Yw(),i);return oK(e,a,hE())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await n6(e,r,n,Yw(),i);return gW(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(ms(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await eK(e),n=new BW(e);return r.register("authEvent",i=>(Fe(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(j2,{type:j2},i=>{const a=i?.[0]?.[j2];a!==void 0&&r(!!a),ma(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=HW(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Dk()||Ck()||cE()}}const hK=dK;var i6="@firebase/auth",a6="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vK(t){kl(new hs("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=n.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nk(t)},f=new DG(n,i,a,c);return VG(f,r),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),kl(new hs("auth-internal",e=>{const r=Yl(e.getProvider("auth").getImmediate());return(n=>new pK(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ga(i6,a6,gK(t)),ga(i6,a6,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=300,yK=ND("authIdTokenMaxAge")||mK;let o6=null;const xK=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>yK)return;const i=r?.token;o6!==i&&(o6=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bK(t=um()){const e=Np(t,"auth");if(e.isInitialized())return e.getImmediate();const r=FG(t,{popupRedirectResolver:hK,persistence:[EW,dW,$k]}),n=ND("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=xK(a.toString());sW(r,o,()=>o(r.currentUser)),oW(r,s=>o(s))}}const i=PD("auth");return i&&HG(r,`http://${i}`),r}function wK(){return document.getElementsByTagName("head")?.[0]??document}NG({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Fa("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",wK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vK("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K="type.googleapis.com/google.protobuf.Int64Value",AK="type.googleapis.com/google.protobuf.UInt64Value";function Zk(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function uv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>uv(e));if(typeof t=="function"||typeof t=="object")return Zk(t,e=>uv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Uf(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case _K:case AK:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Uf(e)):typeof t=="function"||typeof t=="object"?Zk(t,e=>Uf(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ni extends qa{constructor(e,r,n){super(`${gE}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,ni.prototype)}}function EK(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function fv(t,e){let r=EK(t),n=r,i;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!s6[o])return new ni("internal","internal");r=s6[o],n=o}const s=a.message;typeof s=="string"&&(n=s),i=a.details,i!==void 0&&(i=Uf(i))}}catch{}return r==="ok"?null:new ni(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(e,r,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ri(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="us-central1",CK=/^data: (.*?)(?:\n|$)/;function TK(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new ni("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class IK{constructor(e,r,n,i,a=e_,o=(...s)=>fetch(...s)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new SK(e,r,n,i),this.cancelAllRequests=new Promise(s=>{this.deleteService=()=>Promise.resolve(s())});try{const s=new URL(a);this.customDomain=s.origin+(s.pathname==="/"?"":s.pathname),this.region=e_}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function OK(t,e,r){const n=Mo(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(lm(t.emulatorOrigin+"/backends"),cm("Functions",!0))}function RK(t,e,r){const n=i=>DK(t,e,i,r||{});return n.stream=(i,a)=>kK(t,e,i,a),n}function Jk(t){return t.emulatorOrigin&&Mo(t.emulatorOrigin)?"include":void 0}async function PK(t,e,r,n,i){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r,credentials:Jk(i)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function eM(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function DK(t,e,r,n){const i=t._url(e);return NK(t,i,r,n)}async function NK(t,e,r,n){r=uv(r);const i={data:r},a=await eM(t,n),o=n.timeout||7e4,s=TK(o),c=await Promise.race([PK(e,i,a,t.fetchImpl,t),s.promise,t.cancelAllRequests]);if(s.cancel(),!c)throw new ni("cancelled","Firebase Functions instance was deleted.");const f=fv(c.status,c.json);if(f)throw f;if(!c.json)throw new ni("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ni("internal","Response is missing data field.");return{data:Uf(d)}}function kK(t,e,r,n){const i=t._url(e);return MK(t,i,r,n||{})}async function MK(t,e,r,n){r=uv(r);const i={data:r},a=await eM(t,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:n?.signal,credentials:Jk(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const w=new ni("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const y=fv(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let s,c;const f=new Promise((g,y)=>{s=g,c=y});n?.signal?.addEventListener("abort",()=>{const g=new ni("cancelled","Request was cancelled.");c(g)});const d=o.body.getReader(),p=jK(d,s,c,n?.signal);return{stream:{[Symbol.asyncIterator](){const g=p.getReader();return{async next(){const{value:y,done:w}=await g.read();return{value:y,done:w}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:f}}function jK(t,e,r,n){const i=(o,s)=>{const c=o.match(CK);if(!c)return;const f=c[1];try{const d=JSON.parse(f);if("result"in d){e(Uf(d.result));return}if("message"in d){s.enqueue(Uf(d.message));return}if("error"in d){const p=fv(0,d);s.error(p),r(p);return}}catch(d){if(d instanceof ni){s.error(d),r(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let s="";return c();async function c(){if(n?.aborted){const f=new ni("cancelled","Request was cancelled");return o.error(f),r(f),Promise.resolve()}try{const{value:f,done:d}=await t.read();if(d){s.trim()&&i(s.trim(),o),o.close();return}if(n?.aborted){const g=new ni("cancelled","Request was cancelled");o.error(g),r(g),await t.cancel();return}s+=a.decode(f,{stream:!0});const p=s.split(`
`);s=p.pop()||"";for(const g of p)g.trim()&&i(g.trim(),o);return c()}catch(f){const d=f instanceof ni?f:fv(0,null);o.error(d),r(d)}}},cancel(){return t.cancel()}})}const l6="@firebase/functions",c6="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK="auth-internal",BK="app-check-internal",zK="messaging-internal";function UK(t){const e=(r,{instanceIdentifier:n})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(LK),o=r.getProvider(zK),s=r.getProvider(BK);return new IK(i,a,o,s,n)};kl(new hs(gE,e,"PUBLIC").setMultipleInstances(!0)),ga(l6,c6,t),ga(l6,c6,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t=um(),e=e_){const n=Np(Bt(t),gE).getImmediate({identifier:e}),i=gA("functions");return i&&tM(n,...i),n}function tM(t,e,r){OK(Bt(t),e,r)}function t_(t,e,r){return RK(Bt(t),e,r)}UK();const mE=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:ni,connectFunctionsEmulator:tM,getFunctions:vE,httpsCallable:t_},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="firebasestorage.googleapis.com",nM="storageBucket",FK=120*1e3,VK=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends qa{constructor(e,r,n=0){super(L2(e),`Firebase Storage: ${r} (${L2(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return L2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yr||(yr={}));function L2(t){return"storage/"+t}function yE(){const t="An unknown error occurred, please check the error payload for server response.";return new xr(yr.UNKNOWN,t)}function HK(t){return new xr(yr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function $K(t){return new xr(yr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xr(yr.UNAUTHENTICATED,t)}function GK(){return new xr(yr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WK(t){return new xr(yr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function KK(){return new xr(yr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XK(){return new xr(yr.CANCELED,"User canceled the upload/download.")}function YK(t){return new xr(yr.INVALID_URL,"Invalid URL '"+t+"'.")}function QK(t){return new xr(yr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ZK(){return new xr(yr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nM+"' property when initializing the app?")}function JK(){return new xr(yr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eX(){return new xr(yr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tX(t){return new xr(yr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function r_(t){return new xr(yr.INVALID_ARGUMENT,t)}function iM(){return new xr(yr.APP_DELETED,"The Firebase app was deleted.")}function rX(t){return new xr(yr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jh(t,e){return new xr(yr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wh(t){throw new xr(yr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Ui.makeFromUrl(e,r)}catch{return new Ui(e,"")}if(n.path==="")return n;throw QK(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function f(N){N.path_=decodeURIComponent(N.path)}const d="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},_=r===rM?"(?:storage.googleapis.com|storage.cloud.google.com)":r,A="([^?#]*)",S=new RegExp(`^https?://${_}/${i}/${A}`,"i"),R=[{regex:s,indices:c,postModify:a},{regex:y,indices:w,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let N=0;N<R.length;N++){const M=R[N],L=M.regex.exec(e);if(L){const O=L[M.indices.bucket];let D=L[M.indices.path];D||(D=""),n=new Ui(O,D),M.postModify(n);break}}if(n==null)throw YK(e);return n}}class nX{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iX(t,e,r){let n=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let f=!1;function d(...A){f||(f=!0,e.apply(null,A))}function p(A){i=setTimeout(()=>{i=null,t(y,c())},A)}function g(){a&&clearTimeout(a)}function y(A,...S){if(f){g();return}if(A){g(),d.call(null,A,...S);return}if(c()||o){g(),d.call(null,A,...S);return}n<64&&(n*=2);let R;s===1?(s=2,R=0):R=(n+Math.random())*1e3,p(R)}let w=!1;function _(A){w||(w=!0,g(),!f&&(i!==null?(A||(s=2),clearTimeout(i),p(0)):A||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,_(!0)},r),_}function aX(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oX(t){return t!==void 0}function sX(t){return typeof t=="object"&&!Array.isArray(t)}function xE(t){return typeof t=="string"||t instanceof String}function u6(t){return bE()&&t instanceof Blob}function bE(){return typeof Blob<"u"}function f6(t,e,r,n){if(n<e)throw r_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw r_(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function aM(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var Yc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yc||(Yc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lX(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e,r,n,i,a,o,s,c,f,d,p,g=!0,y=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Jg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const c=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===Yc.NO_ERROR,c=a.getStatus();if(!s||lX(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Yc.ABORT;n(!1,new Jg(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;n(!0,new Jg(f,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(s,s.getResponse());oX(c)?a(c):a()}catch(c){o(c)}else if(s!==null){const c=yE();c.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,c)):o(c)}else if(i.canceled){const c=this.appDelete_?iM():XK();o(c)}else{const c=KK();o(c)}};this.canceled_?r(!1,new Jg(!1,null,!0)):this.backoffId_=iX(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&aX(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jg{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function uX(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fX(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dX(t,e){e&&(t["X-Firebase-GMPID"]=e)}function hX(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function pX(t,e,r,n,i,a,o=!0,s=!1){const c=aM(t.urlParams),f=t.url+c,d=Object.assign({},t.headers);return dX(d,e),uX(d,r),fX(d,a),hX(d,n),new cX(f,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gX(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vX(...t){const e=gX();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(bE())return new Blob(t);throw new xr(yr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mX(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(t){if(typeof atob>"u")throw tX("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class B2{constructor(e,r){this.data=e,this.contentType=r||null}}function xX(t,e){switch(t){case bo.RAW:return new B2(oM(e));case bo.BASE64:case bo.BASE64URL:return new B2(sM(t,e));case bo.DATA_URL:return new B2(wX(e),_X(e))}throw yE()}function oM(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function bX(t){let e;try{e=decodeURIComponent(t)}catch{throw Jh(bo.DATA_URL,"Malformed data URL.")}return oM(e)}function sM(t,e){switch(t){case bo.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Jh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case bo.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Jh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=yX(e)}catch(i){throw i.message.includes("polyfill")?i:Jh(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class lM{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Jh(bo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=AX(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function wX(t){const e=new lM(t);return e.base64?sM(bo.BASE64,e.rest):bX(e.rest)}function _X(t){return new lM(t).contentType}function AX(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,r){let n=0,i="";u6(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(u6(this.data_)){const n=this.data_,i=mX(n,e,r);return i===null?null:new wl(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new wl(n,!0)}}static getBlob(...e){if(bE()){const r=e.map(n=>n instanceof wl?n.data_:n);return new wl(vX.apply(null,r))}else{const r=e.map(o=>xE(o)?xX(bo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let s=0;s<o.length;s++)i[a++]=o[s]}),new wl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){let e;try{e=JSON.parse(t)}catch{return null}return sX(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EX(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function SX(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function uM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CX(t,e){return e}class Qn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||CX}}let e1=null;function TX(t){return!xE(t)||t.length<2?t:uM(t)}function fM(){if(e1)return e1;const t=[];t.push(new Qn("bucket")),t.push(new Qn("generation")),t.push(new Qn("metageneration")),t.push(new Qn("name","fullPath",!0));function e(a,o){return TX(o)}const r=new Qn("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const i=new Qn("size");return i.xform=n,t.push(i),t.push(new Qn("timeCreated")),t.push(new Qn("updated")),t.push(new Qn("md5Hash",null,!0)),t.push(new Qn("cacheControl",null,!0)),t.push(new Qn("contentDisposition",null,!0)),t.push(new Qn("contentEncoding",null,!0)),t.push(new Qn("contentLanguage",null,!0)),t.push(new Qn("contentType",null,!0)),t.push(new Qn("metadata","customMetadata",!0)),e1=t,e1}function IX(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new Ui(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function OX(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return IX(n,t),n}function dM(t,e,r){const n=cM(e);return n===null?null:OX(t,n,r)}function RX(t,e,r,n){const i=cM(e);if(i===null||!xE(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(f=>{const d=t.bucket,p=t.fullPath,g="/b/"+o(d)+"/o/"+o(p),y=wE(g,r,n),w=aM({alt:"media",token:f});return y+w})[0]}function PX(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class hM{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){if(!t)throw yE()}function DX(t,e){function r(n,i){const a=dM(t,i,e);return pM(a!==null),a}return r}function NX(t,e){function r(n,i){const a=dM(t,i,e);return pM(a!==null),RX(a,i,t.host,t._protocol)}return r}function gM(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=GK():i=qK():r.getStatus()===402?i=$K(t.bucket):r.getStatus()===403?i=WK(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function kX(t){const e=gM(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=HK(t.path)),a.serverResponse=i.serverResponse,a}return r}function MX(t,e,r){const n=e.fullServerUrl(),i=wE(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,s=new hM(i,a,NX(t,r),o);return s.errorHandler=kX(e),s}function jX(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function LX(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=jX(null,e)),n}function BX(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function s(){let R="";for(let N=0;N<2;N++)R=R+Math.random().toString().slice(2);return R}const c=s();o["Content-Type"]="multipart/related; boundary="+c;const f=LX(e,n,i),d=PX(f,r),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,g=`\r
--`+c+"--",y=wl.getBlob(p,n,g);if(y===null)throw JK();const w={name:f.fullPath},_=wE(a,t.host,t._protocol),A="POST",S=t.maxUploadRetryTime,T=new hM(_,A,DX(t,r),S);return T.urlParams=w,T.headers=o,T.body=y.uploadData(),T.errorHandler=gM(e),T}class zX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i,a){if(this.sent_)throw wh("cannot .send() more than once");if(Mo(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class UX extends zX{initXhr(){this.xhr_.responseType="text"}}function vM(){return new UX}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,r){this._service=e,r instanceof Ui?this._location=r:this._location=Ui.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new lu(e,r)}get root(){const e=new Ui(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uM(this._location.path)}get storage(){return this._service}get parent(){const e=EX(this._location.path);if(e===null)return null;const r=new Ui(this._location.bucket,e);return new lu(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw rX(e)}}function FX(t,e,r){t._throwIfRoot("uploadBytes");const n=BX(t.storage,t._location,fM(),new wl(e,!0),r);return t.storage.makeRequestWithTokens(n,vM).then(i=>({metadata:i,ref:t}))}function VX(t){t._throwIfRoot("getDownloadURL");const e=MX(t.storage,t._location,fM());return t.storage.makeRequestWithTokens(e,vM).then(r=>{if(r===null)throw eX();return r})}function HX(t,e){const r=SX(t._location.path,e),n=new Ui(t._location.bucket,r);return new lu(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $X(t){return/^[A-Za-z]+:\/\//.test(t)}function qX(t,e){return new lu(t,e)}function mM(t,e){if(t instanceof _E){const r=t;if(r._bucket==null)throw ZK();const n=new lu(r,r._bucket);return e!=null?mM(n,e):n}else return e!==void 0?HX(t,e):t}function GX(t,e){if(e&&$X(e)){if(t instanceof _E)return qX(t,e);throw r_("To use ref(service, url), the first argument must be a Storage instance.")}else return mM(t,e)}function d6(t,e){const r=e?.[nM];return r==null?null:Ui.makeFromBucketSpec(r,t)}function WX(t,e,r,n={}){t.host=`${e}:${r}`;const i=Mo(e);i&&(lm(`https://${t.host}/b`),cm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:kD(a,t.app.options.projectId))}class _E{constructor(e,r,n,i,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=rM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FK,this._maxUploadRetryTime=VK,this._requests=new Set,i!=null?this._bucket=Ui.makeFromBucketSpec(i,this._host):this._bucket=d6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ui.makeFromBucketSpec(this._url,e):this._bucket=d6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){f6("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){f6("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lu(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new nX(iM());{const o=pX(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const h6="@firebase/storage",p6="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="storage";function AE(t,e,r){return t=Bt(t),FX(t,e,r)}function EE(t){return t=Bt(t),VX(t)}function SE(t,e){return t=Bt(t),GX(t,e)}function KX(t=um(),e){t=Bt(t);const n=Np(t,yM).getImmediate({identifier:e}),i=gA("storage");return i&&XX(n,...i),n}function XX(t,e,r,n={}){WX(t,e,r,n)}function YX(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new _E(r,n,i,e,mu)}function QX(){kl(new hs(yM,YX,"PUBLIC").setMultipleInstances(!0)),ga(h6,p6,""),ga(h6,p6,"esm2020")}QX();const ZX={apiKey:"AIzaSyB_23qGagKyn6SqpNh1u7_EMqJWMN9MZuo",authDomain:"oshi-para.firebaseapp.com",projectId:"oshi-para",storageBucket:"oshi-para.firebasestorage.app",messagingSenderId:"123159056695",appId:"1:123159056695:web:b2226933dc6f6095220ab2"},Xp=LD(ZX),Je=bK(Xp),pe=qq(Xp);vE(Xp);const Dm=KX(Xp),CE=Object.freeze(Object.defineProperty({__proto__:null,auth:Je,db:pe,default:Xp,storage:Dm},Symbol.toStringTag,{value:"Module"})),It={INTAKES:"intakes",EXPENSES:"expenses",STOCKS:"stocks",SHOPPING:"shopping",RECIPES:"recipes",SETTINGS:"settings"},Ot=(t,e)=>`users/${t}/${e}`,_h={getAll:async t=>{const e=mt(ze(pe,Ot(t,It.INTAKES)),Rr("createdAt","desc"));return(await dt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await id(ze(pe,Ot(t,It.INTAKES)),e)).id,update:async(t,e,r)=>{const n=ke(pe,Ot(t,It.INTAKES),e);await lr(n,r)},delete:async(t,e)=>{const r=ke(pe,Ot(t,It.INTAKES),e);await Vi(r)},subscribe:(t,e)=>{const r=mt(ze(pe,Ot(t,It.INTAKES)),Rr("createdAt","desc"));return bu(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},z2={getAll:async t=>{const e=mt(ze(pe,Ot(t,It.EXPENSES)),Rr("createdAt","desc"));return(await dt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await id(ze(pe,Ot(t,It.EXPENSES)),e)).id,update:async(t,e,r)=>{const n=ke(pe,Ot(t,It.EXPENSES),e);await lr(n,r)},delete:async(t,e)=>{const r=ke(pe,Ot(t,It.EXPENSES),e);await Vi(r)},subscribe:(t,e)=>{const r=mt(ze(pe,Ot(t,It.EXPENSES)),Rr("createdAt","desc"));return bu(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},t1={getAll:async t=>{const e=mt(ze(pe,Ot(t,It.STOCKS)),Rr("createdAt","desc"));return(await dt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await id(ze(pe,Ot(t,It.STOCKS)),e)).id,update:async(t,e,r)=>{const n=ke(pe,Ot(t,It.STOCKS),e);await lr(n,r)},delete:async(t,e)=>{const r=ke(pe,Ot(t,It.STOCKS),e);await Vi(r)},subscribe:(t,e)=>{const r=mt(ze(pe,Ot(t,It.STOCKS)),Rr("createdAt","desc"));return bu(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},Ah={getAll:async t=>{const e=mt(ze(pe,Ot(t,It.SHOPPING)),Rr("createdAt","desc"));return(await dt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await id(ze(pe,Ot(t,It.SHOPPING)),e)).id,update:async(t,e,r)=>{const n=ke(pe,Ot(t,It.SHOPPING),e);await lr(n,r)},delete:async(t,e)=>{const r=ke(pe,Ot(t,It.SHOPPING),e);await Vi(r)},subscribe:(t,e)=>{const r=mt(ze(pe,Ot(t,It.SHOPPING)),Rr("createdAt","desc"));return bu(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},r1={getAll:async t=>{const e=mt(ze(pe,Ot(t,It.RECIPES)),Rr("createdAt","desc"));return(await dt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await id(ze(pe,Ot(t,It.RECIPES)),e)).id,update:async(t,e,r)=>{const n=ke(pe,Ot(t,It.RECIPES),e);await lr(n,r)},delete:async(t,e)=>{const r=ke(pe,Ot(t,It.RECIPES),e);await Vi(r)},subscribe:(t,e)=>{const r=mt(ze(pe,Ot(t,It.RECIPES)),Rr("createdAt","desc"));return bu(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},n1={get:async t=>{const e=mt(ze(pe,Ot(t,It.SETTINGS))),r=await dt(e);return r.empty?null:r.docs[0].data()},set:async(t,e)=>{const r=mt(ze(pe,Ot(t,It.SETTINGS))),n=await dt(r);if(n.empty)return(await id(ze(pe,Ot(t,It.SETTINGS)),e)).id;{const i=ke(pe,Ot(t,It.SETTINGS),n.docs[0].id);return await lr(i,e),n.docs[0].id}},subscribe:(t,e)=>{const r=mt(ze(pe,Ot(t,It.SETTINGS)));return bu(r,n=>{if(n.empty)e(null);else{const i=n.docs[0].data();e(i)}})}},Ga=vu((t,e)=>({intakes:Nl(it.INTAKES,[]),loading:!1,initialized:!1,unsubscribe:null,setIntakes:r=>t({intakes:r}),setLoading:r=>t({loading:r}),setInitialized:r=>t({initialized:r}),addIntake:async r=>{const n=Je.currentUser,i={id:Sl(),...r,date:new Date().toISOString(),createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.intakes,i];return Lt(it.INTAKES,o),{intakes:o}}),n)try{await _h.add(n.uid,i)}catch(a){console.error("Failed to add intake to Firestore:",a)}},updateIntake:async(r,n)=>{const i=Je.currentUser,a={...n,updatedAt:new Date().toISOString()};if(t(o=>{const s=o.intakes.map(c=>c.id===r?{...c,...a}:c);return Lt(it.INTAKES,s),{intakes:s}}),i)try{await _h.update(i.uid,r,a)}catch(o){console.error("Failed to update intake in Firestore:",o)}},deleteIntake:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.intakes.filter(o=>o.id!==r);return Lt(it.INTAKES,a),{intakes:a}}),n)try{await _h.delete(n.uid,r)}catch(i){console.error("Failed to delete intake from Firestore:",i)}},getIntakesByDate:r=>e().intakes.filter(i=>i.date.startsWith(r)),getTotalCaloriesByDate:r=>e().getIntakesByDate(r).reduce((i,a)=>i+a.calories,0),getTotalPriceByDate:r=>e().getIntakesByDate(r).reduce((i,a)=>i+a.price,0),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[IntakeStore] Syncing data for user: ${r.uid}`);const n=await _h.getAll(r.uid);console.log(`[IntakeStore] Loaded ${n.length} intakes from Firestore`),t({intakes:n,loading:!1,initialized:!0}),Lt(it.INTAKES,n)}catch(n){console.error("Failed to sync intakes with Firestore:",n),t({loading:!1})}},subscribeToFirestore:()=>{const r=Je.currentUser;if(!r)return;const n=e().unsubscribe;n&&n(),console.log(`[IntakeStore] Starting realtime sync for user: ${r.uid}`);const i=_h.subscribe(r.uid,a=>{console.log(`[IntakeStore] Realtime update: ${a.length} intakes`),t({intakes:a}),Lt(it.INTAKES,a)});t({unsubscribe:i})},unsubscribeFromFirestore:()=>{const r=e().unsubscribe;r&&(console.log("[IntakeStore] Stopping realtime sync"),r(),t({unsubscribe:null}))}})),Wa=vu((t,e)=>({expenses:Nl(it.EXPENSES,[]),loading:!1,initialized:!1,setExpenses:r=>t({expenses:r}),addExpense:async r=>{const n=Je.currentUser,i={id:Sl(),...r,date:r.date||new Date().toISOString(),createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.expenses,i];return Lt(it.EXPENSES,o),{expenses:o}}),n)try{await z2.add(n.uid,i)}catch(a){console.error("Failed to add expense to Firestore:",a)}},deleteExpense:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.expenses.filter(o=>o.id!==r);return Lt(it.EXPENSES,a),{expenses:a}}),n)try{await z2.delete(n.uid,r)}catch(i){console.error("Failed to delete expense from Firestore:",i)}},getExpensesByMonth:(r,n)=>e().expenses.filter(a=>{const o=new Date(a.date);return o.getFullYear()===r&&o.getMonth()+1===n}),getTotalByMonth:(r,n)=>e().getExpensesByMonth(r,n).reduce((a,o)=>a+o.amount,0),getTotalByCategory:(r,n,i)=>e().getExpensesByMonth(n,i).filter(o=>o.category===r).reduce((o,s)=>o+s.amount,0),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await z2.getAll(r.uid);t({expenses:n,loading:!1,initialized:!0}),Lt(it.EXPENSES,n)}catch(n){console.error("Failed to sync expenses with Firestore:",n),t({loading:!1})}}})),Ka=vu((t,e)=>({stocks:Nl(it.STOCKS,[]),loading:!1,initialized:!1,setStocks:r=>t({stocks:r}),addStock:async r=>{const n=Je.currentUser,i={id:Sl(),...r,createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.stocks,i];return Lt(it.STOCKS,o),{stocks:o}}),n)try{await t1.add(n.uid,i)}catch(a){console.error("Failed to add stock to Firestore:",a)}},updateStock:async(r,n)=>{const i=Je.currentUser,a={...n,updatedAt:new Date().toISOString()};if(t(o=>{const s=o.stocks.map(c=>c.id===r?{...c,...a}:c);return Lt(it.STOCKS,s),{stocks:s}}),i)try{await t1.update(i.uid,r,a)}catch(o){console.error("Failed to update stock in Firestore:",o)}},deleteStock:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.stocks.filter(o=>o.id!==r);return Lt(it.STOCKS,a),{stocks:a}}),n)try{await t1.delete(n.uid,r)}catch(i){console.error("Failed to delete stock from Firestore:",i)}},getExpiringStocks:r=>e().stocks.filter(i=>i.daysRemaining<=r),getStockIngredients:()=>e().stocks.map(n=>n.name),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await t1.getAll(r.uid);t({stocks:n,loading:!1,initialized:!0}),Lt(it.STOCKS,n)}catch(n){console.error("Failed to sync stocks with Firestore:",n),t({loading:!1})}}})),JX=[{name:"米",quantity:1,category:"staple"},{name:"卵",quantity:10,category:"protein"},{name:"牛乳",quantity:1,category:"dairy"},{name:"パン",quantity:1,category:"staple"},{name:"鶏肉",quantity:1,category:"protein"},{name:"豚肉",quantity:1,category:"protein"},{name:"玉ねぎ",quantity:3,category:"vegetable"},{name:"にんじん",quantity:3,category:"vegetable"},{name:"じゃがいも",quantity:3,category:"vegetable"},{name:"トマト",quantity:3,category:"vegetable"},{name:"バナナ",quantity:1,category:"fruit"},{name:"ヨーグルト",quantity:1,category:"dairy"},{name:"醤油",quantity:1,category:"seasoning"},{name:"塩",quantity:1,category:"seasoning"}],Ql=vu((t,e)=>({items:Nl(it.SHOPPING,[]),loading:!1,initialized:!1,setItems:r=>t({items:r}),addItem:async r=>{const n=Je.currentUser;if(e().items.find(o=>o.name===r.name&&!o.checked))return;const a={id:Sl(),...r,checked:!1,createdAt:new Date().toISOString()};if(t(o=>{const s=[...o.items,a];return Lt(it.SHOPPING,s),{items:s}}),n)try{await Ah.add(n.uid,a)}catch(o){console.error("Failed to add shopping item to Firestore:",o)}},toggleItem:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.items.map(o=>o.id===r?{...o,checked:!o.checked,updatedAt:new Date().toISOString()}:o);return Lt(it.SHOPPING,a),{items:a}}),n)try{const i=e().items.find(a=>a.id===r);i&&await Ah.update(n.uid,r,{checked:i.checked,updatedAt:new Date().toISOString()})}catch(i){console.error("Failed to toggle shopping item in Firestore:",i)}},deleteItem:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.items.filter(o=>o.id!==r);return Lt(it.SHOPPING,a),{items:a}}),n)try{await Ah.delete(n.uid,r)}catch(i){console.error("Failed to delete shopping item from Firestore:",i)}},clearCompleted:async()=>{const r=Je.currentUser,n=e().items.filter(i=>i.checked).map(i=>i.id);if(t(i=>{const a=i.items.filter(o=>!o.checked);return Lt(it.SHOPPING,a),{items:a}}),r)try{await Promise.all(n.map(i=>Ah.delete(r.uid,i)))}catch(i){console.error("Failed to clear completed items from Firestore:",i)}},addWeeklyEssentials:()=>{t(r=>{const n=r.items,i=[...n];return JX.forEach(a=>{n.find(s=>s.name===a.name&&!s.checked)||i.push({id:Sl(),name:a.name,quantity:a.quantity,category:a.category,checked:!1,createdAt:new Date().toISOString()})}),Lt(it.SHOPPING,i),{items:i}})},addLowStockItems:r=>{t(n=>{const i=n.items,a=[...i];return r.forEach(o=>{i.find(c=>c.name===o.name&&!c.checked)||a.push({id:Sl(),name:o.name,quantity:1,category:o.category,checked:!1,createdAt:new Date().toISOString()})}),Lt(it.SHOPPING,a),{items:a}})},syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await Ah.getAll(r.uid);t({items:n,loading:!1,initialized:!0}),Lt(it.SHOPPING,n)}catch(n){console.error("Failed to sync shopping items with Firestore:",n),t({loading:!1})}}})),eY=10,Yp=vu((t,e)=>({recipeHistory:Nl(it.RECIPE_HISTORY,[]),favoriteRecipes:Nl(it.FAVORITE_RECIPES,[]),loading:!1,initialized:!1,setRecipes:(r,n)=>t({recipeHistory:r,favoriteRecipes:n}),addToHistory:async r=>{const n=Je.currentUser,i={id:Sl(),recipe:r,generatedAt:new Date().toISOString()};if(t(a=>{const o=[i,...a.recipeHistory].slice(0,eY);return Lt(it.RECIPE_HISTORY,o),{recipeHistory:o}}),n)try{await r1.add(n.uid,i)}catch(a){console.error("Failed to add recipe history to Firestore:",a)}},addToFavorites:async r=>{const n=Je.currentUser;if(e().favoriteRecipes.find(o=>o.id===r.id))return;const a={...r,isFavorite:!0};if(t(o=>{const s=[a,...o.favoriteRecipes];return Lt(it.FAVORITE_RECIPES,s),{favoriteRecipes:s}}),n)try{await r1.add(n.uid,a)}catch(o){console.error("Failed to add favorite recipe to Firestore:",o)}},removeFromFavorites:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.favoriteRecipes.filter(o=>o.id!==r);return Lt(it.FAVORITE_RECIPES,a),{favoriteRecipes:a}}),n)try{await r1.delete(n.uid,r)}catch(i){console.error("Failed to delete favorite recipe from Firestore:",i)}},isFavorite:r=>e().favoriteRecipes.some(i=>i.id===r),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[RecipeStore] Syncing data for user: ${r.uid}`);const i=await r1.getAll(r.uid),a=[];console.log(`[RecipeStore] Loaded ${i.length} recipes from Firestore`),t({recipeHistory:a,favoriteRecipes:i,loading:!1,initialized:!0}),Lt(it.RECIPE_HISTORY,a),Lt(it.FAVORITE_RECIPES,i)}catch(n){console.error("Failed to sync recipes with Firestore:",n),t({loading:!1})}}})),g6={monthlyBudget:3e4,darkMode:!1,firstTime:!0},dv=vu((t,e)=>({settings:{...g6,...Nl(it.SETTINGS,g6)},loading:!1,initialized:!1,updateSettings:async r=>{const n=Je.currentUser;if(t(i=>{const a={...i.settings,...r};return Lt(it.SETTINGS,a),"darkMode"in r&&document.body.classList.toggle("dark-mode",r.darkMode),{settings:a}}),n)try{const i=e().settings;await n1.set(n.uid,i)}catch(i){console.error("Failed to update settings in Firestore:",i)}},toggleDarkMode:async()=>{const r=Je.currentUser,n=!e().settings.darkMode;if(t(i=>{const a={...i.settings,darkMode:n};return Lt(it.SETTINGS,a),document.body.classList.toggle("dark-mode",n),{settings:a}}),r)try{const i=e().settings;await n1.set(r.uid,i)}catch(i){console.error("Failed to toggle dark mode in Firestore:",i)}},setFirstTime:r=>t(n=>{const i={...n.settings,firstTime:r};return Lt(it.SETTINGS,i),{settings:i}}),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[SettingsStore] Syncing data for user: ${r.uid}`);const n=await n1.get(r.uid);if(n)console.log("[SettingsStore] Loaded settings from Firestore"),t({settings:n,loading:!1,initialized:!0}),Lt(it.SETTINGS,n),document.body.classList.toggle("dark-mode",n.darkMode);else{console.log("[SettingsStore] No settings found, using defaults");const i=e().settings;await n1.set(r.uid,i),t({loading:!1,initialized:!0})}}catch(n){console.error("Failed to sync settings with Firestore:",n),t({loading:!1})}}})),hv=[{id:"streak-3",name:"3日連続記録",description:"3日間連続で食事を記録しました",icon:"🔥",category:"streak",requirement:"3日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=3},{id:"streak-7",name:"1週間継続",description:"7日間連続で食事を記録しました",icon:"🎯",category:"streak",requirement:"7日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=7},{id:"streak-14",name:"2週間チャンピオン",description:"14日間連続で食事を記録しました",icon:"🏆",category:"streak",requirement:"14日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=14},{id:"streak-30",name:"1ヶ月マスター",description:"30日間連続で食事を記録しました",icon:"👑",category:"streak",requirement:"30日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=30},{id:"milestone-10-intakes",name:"記録の第一歩",description:"食事記録が10件に達しました",icon:"📝",category:"milestone",requirement:"食事記録10件",checkCondition:t=>t.intakesCount>=10},{id:"milestone-50-intakes",name:"記録マスター",description:"食事記録が50件に達しました",icon:"📚",category:"milestone",requirement:"食事記録50件",checkCondition:t=>t.intakesCount>=50},{id:"milestone-100-intakes",name:"記録の達人",description:"食事記録が100件に達しました",icon:"🎓",category:"milestone",requirement:"食事記録100件",checkCondition:t=>t.intakesCount>=100},{id:"goal-budget-first",name:"節約家デビュー",description:"先月の支出が予算内に収まりました！",icon:"💰",category:"goal",requirement:"月次予算達成（毎月1日に先月分を判定）",checkCondition:t=>t.budgetAchieved},{id:"feature-recipe-first",name:"AIシェフデビュー",description:"初めてAIレシピを生成しました",icon:"👨‍🍳",category:"feature",requirement:"AIレシピ生成1回",checkCondition:t=>t.recipesGenerated>=1},{id:"feature-recipe-10",name:"レシピマスター",description:"AIレシピを10回生成しました",icon:"🍳",category:"feature",requirement:"AIレシピ生成10回",checkCondition:t=>t.recipesGenerated>=10},{id:"feature-barcode-first",name:"スキャナーデビュー",description:"初めてバーコードをスキャンしました",icon:"📱",category:"feature",requirement:"バーコードスキャン1回",checkCondition:t=>t.barcodesScanned>=1},{id:"feature-barcode-10",name:"スキャンマスター",description:"バーコードを10回スキャンしました",icon:"🔍",category:"feature",requirement:"バーコードスキャン10回",checkCondition:t=>t.barcodesScanned>=10},{id:"milestone-all-features",name:"フル活用マスター",description:"すべての機能を使いこなしています",icon:"⭐",category:"milestone",requirement:"全機能の使用",checkCondition:t=>t.intakesCount>=5&&t.expensesCount>=5&&t.stocksCount>=3&&t.recipesGenerated>=1&&t.barcodesScanned>=1}];function tY(t){return hv.find(e=>e.id===t)}const TE=vu((t,e)=>({badges:Nl(it.BADGES,[]),newBadges:[],loading:!1,checkAndUnlockBadges:r=>{const n=e().badges,i=n.map(o=>o.id),a=[];return hv.forEach(o=>{if(!i.includes(o.id)&&o.checkCondition(r)){const s={id:o.id,name:o.name,description:o.description,icon:o.icon,category:o.category,requirement:o.requirement,unlockedAt:new Date().toISOString()};n.push(s),a.push(o.id)}}),a.length>0&&(t({badges:n,newBadges:a}),Lt(it.BADGES,n)),a},clearNewBadges:()=>{t({newBadges:[]})},getBadge:r=>e().badges.find(n=>n.id===r),isUnlocked:r=>e().badges.some(n=>n.id===r),getUnlockedCount:()=>e().badges.length,getTotalCount:()=>hv.length})),rY=()=>{const{getTotalCaloriesByDate:t}=Ga(),{getTotalByMonth:e}=Wa(),r=C.useMemo(()=>{const i=new Date().toISOString().split("T")[0];return t(i)},[t]),n=C.useMemo(()=>{const i=new Date;return e(i.getFullYear(),i.getMonth()+1)},[e]);return m.jsxs("div",{className:"summary-box",children:[m.jsxs("div",{className:"summary-row",children:[m.jsx("span",{className:"summary-label",children:"今日のカロリー"}),m.jsxs("span",{className:"summary-value",children:[r," kcal"]})]}),m.jsxs("div",{className:"summary-row",children:[m.jsx("span",{className:"summary-label",children:"今月の支出"}),m.jsxs("span",{className:"summary-value positive",children:["¥",n.toLocaleString()]})]})]})},nY=({onNavigate:t})=>{const e=[{screen:"meals",icon:m.jsx(hA,{size:32}),label:"食事記録",color:"#3b82f6"},{screen:"barcode",icon:m.jsx(np,{size:32}),label:"スキャン",color:"#8b5cf6"},{screen:"expense",icon:m.jsx(XU,{size:32}),label:"家計簿",color:"#10b981"},{screen:"stock",icon:m.jsx(Pf,{size:32}),label:"在庫管理",color:"#f59e0b"},{screen:"recipe",icon:m.jsx(ip,{size:32}),label:"AIレシピ",color:"#ef4444"},{screen:"shopping",icon:m.jsx(Op,{size:32}),label:"買い物",color:"#06b6d4"},{screen:"report",icon:m.jsx(YU,{size:32}),label:"レポート",color:"#6366f1"},{screen:"badges",icon:m.jsx(rF,{size:32}),label:"バッジ",color:"#f59e0b"},{screen:"settings",icon:m.jsx(FU,{size:32}),label:"設定",color:"#64748b"}],r=n=>{n.onClick?n.onClick():n.screen&&t(n.screen)};return m.jsx("div",{className:"function-grid",children:e.map((n,i)=>m.jsxs("button",{className:"function-card",style:{"--card-color":n.color},onClick:()=>r(n),children:[m.jsx("div",{className:"function-icon",style:{color:n.color},children:n.icon}),m.jsx("div",{className:"function-label",children:n.label})]},i))})},v6=({onNavigate:t})=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"ホーム"}),m.jsx(rY,{}),m.jsx(nY,{onNavigate:t})]}),iY=()=>{const{addIntake:t}=Ga(),[e,r]=C.useState(""),[n,i]=C.useState(""),[a,o]=C.useState(""),s=()=>{if(!e||!n||!a){alert("すべての項目を入力してください");return}t({name:e,calories:Number(n),price:Number(a)}),r(""),i(""),o(""),alert("食事を記録しました！")};return m.jsxs("div",{className:"card",children:[m.jsx("label",{children:"食品名"}),m.jsx("input",{value:e,onChange:c=>r(c.target.value),placeholder:"例: 牛乳"}),m.jsx("label",{children:"カロリー(kcal)"}),m.jsx("input",{type:"number",value:n,onChange:c=>i(c.target.value),placeholder:"200"}),m.jsx("label",{children:"金額(円)"}),m.jsx("input",{type:"number",value:a,onChange:c=>o(c.target.value),placeholder:"150"}),m.jsx("button",{className:"submit",onClick:s,children:"記録する"})]})},aY=()=>{const{intakes:t,deleteIntake:e,getTotalCaloriesByDate:r,getTotalPriceByDate:n}=Ga(),i=C.useMemo(()=>{const f=new Date().toISOString().split("T")[0];return t.filter(d=>d.date.startsWith(f))},[t]),a=new Date().toISOString().split("T")[0],o=r(a),s=n(a),c=f=>{confirm("この記録を削除しますか？")&&e(f)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"今日の記録"}),i.length===0?m.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"まだ記録がありません"}):m.jsxs(m.Fragment,{children:[m.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:i.map(f=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:f.name}),m.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[f.calories," kcal · ¥",f.price]})]}),m.jsx("button",{onClick:()=>c(f.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},children:m.jsx(gu,{size:20})})]},f.id))}),m.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--card)",borderRadius:"8px",display:"flex",justifyContent:"space-between"},children:[m.jsxs("span",{children:[m.jsx("strong",{children:"合計カロリー:"})," ",o," kcal"]}),m.jsxs("span",{children:[m.jsx("strong",{children:"合計金額:"})," ¥",s]})]})]})]})},oY=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"食事記録"}),m.jsx(iY,{}),m.jsx(aY,{})]}),sY=async(t,e)=>{try{return{user:(await iW(Je,t,e)).user,error:null}}catch(r){return{user:null,error:r.message}}},lY=async()=>{const t=new rs;try{return{user:(await OW(Je,t)).user,error:null}}catch(e){return{user:null,error:e.message}}},cY=async()=>{try{return await cW(Je),localStorage.clear(),{error:null}}catch(t){return{error:t.message}}},uY=t=>lW(Je,t),Xa=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!0);return C.useEffect(()=>{const i=uY(a=>{e(a),n(!1)});return()=>i()},[]),{user:t,loading:r}},Qp=async(t,e,r,n,i)=>{try{if(t===e)return;const a=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o=ke(pe,"users",t,"notifications",a),s={id:a,type:n,recipientId:t,actorId:e,actorName:r,isRead:!1,createdAt:new Date().toISOString()};i?.actorAvatar&&(s.actorAvatar=i.actorAvatar),i?.postId&&(s.postId=i.postId),i?.postContent&&(s.postContent=i.postContent),i?.commentId&&(s.commentId=i.commentId),i?.commentContent&&(s.commentContent=i.commentContent),await Kl(o,{...s,createdAt:Xt.now()}),console.log("Notification created:",a)}catch(a){throw console.error("Error creating notification:",a),a}},fY=t=>{const e=new Map;return t.forEach(r=>{const n=r.postId?`${r.type}_${r.postId}`:`${r.type}_${r.actorId}`;if(e.has(n)){const i=e.get(n);i.actors.find(a=>a.id===r.actorId)||(i.actors.push({id:r.actorId,name:r.actorName,avatar:r.actorAvatar}),i.count++,new Date(r.createdAt)>new Date(i.latestNotification.createdAt)&&(i.latestNotification=r),r.isRead||(i.isRead=!1))}else e.set(n,{type:r.type,postId:r.postId,actors:[{id:r.actorId,name:r.actorName,avatar:r.actorAvatar}],latestNotification:r,count:1,isRead:r.isRead})}),Array.from(e.values()).sort((r,n)=>new Date(n.latestNotification.createdAt).getTime()-new Date(r.latestNotification.createdAt).getTime())},dY=async(t,e)=>{try{const r=ke(pe,"users",t,"notifications",e);await lr(r,{isRead:!0})}catch(r){throw console.error("Error marking notification as read:",r),r}},hY=async t=>{try{const e=ze(pe,"users",t,"notifications"),r=mt(e,Or("isRead","==",!1)),i=(await dt(r)).docs.map(a=>lr(a.ref,{isRead:!0}));await Promise.all(i),console.log("All notifications marked as read")}catch(e){throw console.error("Error marking all notifications as read:",e),e}},pY=async t=>{try{const e=ze(pe,"users",t,"notifications"),n=(await dt(e)).docs.map(i=>Vi(i.ref));await Promise.all(n),console.log("All notifications deleted")}catch(e){throw console.error("Error deleting all notifications:",e),e}},gY=(t,e)=>{const r=ze(pe,"users",t,"notifications"),n=mt(r,Rr("createdAt","desc"),Ha(50));return bu(n,i=>{const a=[];i.forEach(o=>{const s=o.data();a.push({id:o.id,type:s.type,recipientId:s.recipientId,actorId:s.actorId,actorName:s.actorName,actorAvatar:s.actorAvatar,postId:s.postId,postContent:s.postContent,commentId:s.commentId,commentContent:s.commentContent,isRead:s.isRead||!1,createdAt:s.createdAt?.toDate?.()?.toISOString()||s.createdAt})}),e(a)},i=>{console.error("Error subscribing to notifications:",i),e([])})},vY=t=>{switch(t){case"like":return"❤️";case"comment":return"💬";case"repost":return"🔁";case"quote":return"💭";case"reply":return"↩️";case"follow":return"👤";case"mention":return"@";default:return"🔔"}},mY=t=>{const{type:e,actors:r,count:n}=t;if(n===1){const i=r[0];switch(e){case"like":return`${i.name}さんがあなたの投稿にいいねしました`;case"comment":return`${i.name}さんがあなたの投稿にコメントしました`;case"repost":return`${i.name}さんがあなたの投稿をリポストしました`;case"quote":return`${i.name}さんがあなたの投稿を引用しました`;case"reply":return`${i.name}さんがあなたの投稿に返信しました`;case"follow":return`${i.name}さんがあなたをフォローしました`;case"mention":return`${i.name}さんがあなたをメンションしました`;default:return`${i.name}さんから通知があります`}}else{const i=r[0],a=n-1;switch(e){case"like":return`${i.name}さんと他${a}人があなたの投稿にいいねしました`;case"comment":return`${i.name}さんと他${a}人があなたの投稿にコメントしました`;case"repost":return`${i.name}さんと他${a}人があなたの投稿をリポストしました`;case"quote":return`${i.name}さんと他${a}人があなたの投稿を引用しました`;case"reply":return`${i.name}さんと他${a}人があなたの投稿に返信しました`;case"follow":return`${i.name}さんと他${a}人があなたをフォローしました`;case"mention":return`${i.name}さんと他${a}人があなたをメンションしました`;default:return`${i.name}さんと他${a}人から通知があります`}}},IE=async(t,e,r)=>{try{const n={uid:t,displayName:r,username:`user${t.slice(0,8)}`,email:e,bio:"",avatarUrl:"",coverUrl:"",websiteUrl:"",isPublic:!0,createdAt:new Date().toISOString(),stats:{postCount:0,followerCount:0,followingCount:0,recipeCount:0,likeCount:0}};console.log("📝 Creating user profile for:",t),console.log("📝 Profile data:",n);const i=ke(pe,"users",t,"profile","data");console.log("📝 Profile document path:",i.path),await Kl(i,n),console.log("✅ User profile created successfully:",t)}catch(n){throw console.error("❌ Failed to create user profile:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),console.error("Error details:",JSON.stringify(n,null,2)),new Error(`プロフィール作成に失敗しました: ${n.message||n.code||"不明なエラー"}`)}},ya=async t=>{try{const e=await wi(ke(pe,"users",t,"profile","data"));return e.exists()?e.data():null}catch(e){throw console.error("Get profile error:",e),new Error("プロフィールの取得に失敗しました")}},yY=async(t,e)=>{try{await lr(ke(pe,"users",t,"profile","data"),e),e.displayName&&Je.currentUser&&await Uk(Je.currentUser,{displayName:e.displayName,photoURL:e.avatarUrl||Je.currentUser.photoURL}),console.log("✅ Profile updated:",t)}catch(r){throw console.error("Update profile error:",r),new Error("プロフィールの更新に失敗しました")}},xY=async(t,e)=>{try{const r=ze(pe,"users"),n=mt(r),i=await dt(n);for(const a of i.docs){if(a.id===e)continue;const o=ke(pe,"users",a.id,"profile","data");try{const s=await wi(o);if(s.exists()&&s.data().username===t)return!1}catch{console.log(`No profile for user ${a.id}`)}}return!0}catch(r){return console.error("Username check error:",r),!0}},bY=t=>t.length<3||t.length>20?{valid:!1,error:"ユーザー名は3〜20文字で入力してください"}:/^[a-zA-Z0-9_]+$/.test(t)?/^[a-zA-Z]/.test(t)?{valid:!0}:{valid:!1,error:"ユーザー名は英字で始める必要があります"}:{valid:!1,error:"ユーザー名は英数字とアンダースコア(_)のみ使用できます"},wY=async t=>{try{const e=ze(pe,"users"),r=await dt(e);for(const n of r.docs){const i=ke(pe,"users",n.id,"profile","data"),a=await wi(i);if(a.exists()){const o=a.data();if(o.username.toLowerCase()===t.toLowerCase())return o.uid}}return null}catch(e){return console.error("Get user ID by username error:",e),null}},OE=async(t,e,r,n,i,a)=>{console.log(`[followUser] Starting atomic follow: ${t} → ${n}`);try{const o=mk(pe),s=ke(pe,`users/${n}/followers/${t}`),c=ke(pe,`users/${t}/following/${n}`),f=ke(pe,`users/${t}/profile/data`),d=ke(pe,`users/${n}/profile/data`);if((await wi(c)).exists()){console.log(`⚠️ Already following: ${t} → ${n}`);return}const g=new Date().toISOString(),y={followerId:t,followerName:e,followerAvatar:r||"",createdAt:g};o.set(s,y);const w={followingId:n,followingName:i,followingAvatar:a||"",createdAt:g};o.set(c,w),o.update(f,{"stats.followingCount":bi(1)}),o.update(d,{"stats.followerCount":bi(1)}),await o.commit(),await Qp(n,t,e,"follow",{actorAvatar:r}),console.log(`✅ [followUser] Atomic follow complete: ${t} → ${n}`)}catch(o){throw console.error("❌ [followUser] Atomic follow failed:",o),new Error(`フォローに失敗しました: ${o.message||"不明なエラー"}`)}},RE=async(t,e)=>{console.log(`[unfollowUser] Starting atomic unfollow: ${t} X ${e}`);try{const r=mk(pe),n=ke(pe,`users/${e}/followers/${t}`),i=ke(pe,`users/${t}/following/${e}`),a=ke(pe,`users/${t}/profile/data`),o=ke(pe,`users/${e}/profile/data`);r.delete(n),r.delete(i),r.update(a,{"stats.followingCount":bi(-1)}),r.update(o,{"stats.followerCount":bi(-1)}),await r.commit(),console.log(`✅ [unfollowUser] Atomic unfollow complete: ${t} X ${e}`)}catch(r){throw console.error("❌ [unfollowUser] Atomic unfollow failed:",r),new Error(`アンフォローに失敗しました: ${r.message||"不明なエラー"}`)}},PE=async(t,e)=>{try{const r=ke(pe,`users/${t}/following/${e}`);return(await wi(r)).exists()}catch(r){return console.error("Check follow error:",r),!1}},_Y=async t=>{try{const e=ze(pe,`users/${t}/followers`),r=await dt(e),n=[],i=Je.currentUser;for(const a of r.docs){const o=a.data(),s=await ya(o.followerId);if(s){let c=!1;i&&(c=await PE(i.uid,o.followerId)),n.push({uid:s.uid,displayName:s.displayName,username:s.username,avatarUrl:s.avatarUrl,bio:s.bio,isFollowing:c})}}return n.sort((a,o)=>a.displayName.localeCompare(o.displayName))}catch(e){return console.error("Get followers error:",e),[]}},xM=async t=>{try{const e=ze(pe,`users/${t}/following`),r=await dt(e),n=[],i=Je.currentUser;for(const a of r.docs){const o=a.data(),s=await ya(o.followingId);if(s){let c=!0;i&&i.uid!==t&&(c=await PE(i.uid,s.uid)),n.push({uid:s.uid,displayName:s.displayName,username:s.username,avatarUrl:s.avatarUrl,bio:s.bio,isFollowing:c})}}return n.sort((a,o)=>a.displayName.localeCompare(o.displayName))}catch(e){return console.error("Get following error:",e),[]}},DE=(t,e,r)=>new Promise((n,i)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=o=>{const s=new Image;s.src=o.target?.result,s.onload=()=>{const c=document.createElement("canvas");let f=s.width,d=s.height;f>d?f>e&&(d=d*e/f,f=e):d>r&&(f=f*r/d,d=r),c.width=f,c.height=d,c.getContext("2d")?.drawImage(s,0,0,f,d),c.toBlob(g=>{g?n(g):i(new Error("画像のリサイズに失敗しました"))},t.type)},s.onerror=()=>i(new Error("画像の読み込みに失敗しました"))},a.onerror=()=>i(new Error("ファイルの読み込みに失敗しました"))}),AY=async(t,e)=>{try{const r=await DE(e,512,512),n=SE(Dm,`avatars/${t}/${Date.now()}_avatar.jpg`);await AE(n,r);const i=await EE(n);return console.log("✅ Avatar uploaded:",i),i}catch(r){throw console.error("Avatar upload error:",r),new Error("プロフィール画像のアップロードに失敗しました")}},EY=async(t,e)=>{try{const r=await DE(e,1200,400),n=SE(Dm,`covers/${t}/${Date.now()}_cover.jpg`);await AE(n,r);const i=await EE(n);return console.log("✅ Cover uploaded:",i),i}catch(r){throw console.error("Cover upload error:",r),new Error("カバー画像のアップロードに失敗しました")}},SY=async(t,e)=>{try{const r=await DE(e,1080,1080),n=SE(Dm,`posts/${t}/${Date.now()}_${e.name}`);await AE(n,r);const i=await EE(n);return console.log("✅ Post image uploaded:",i),i}catch(r){throw console.error("Post image upload error:",r),new Error("投稿画像のアップロードに失敗しました")}},m6=t=>t.size>10485760?{valid:!1,error:"画像サイズは10MB以下にしてください"}:["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)?{valid:!0}:{valid:!1,error:"対応している画像形式: JPEG, PNG, GIF, WebP"},CY=({onBack:t})=>{const[e,r]=C.useState(null),[n,i]=C.useState(""),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(!0),[y,w]=C.useState(""),[_,A]=C.useState(""),[S,T]=C.useState(!1),[R,N]=C.useState(!1),[M,L]=C.useState(!1),[O,D]=C.useState(""),[j,B]=C.useState(""),z=C.useRef(null),V=C.useRef(null);C.useEffect(()=>{F()},[]);const F=async()=>{try{const ie=Je.currentUser;if(!ie)return;const K=await ya(ie.uid);K&&(r(K),i(K.displayName),o(K.username),c(K.bio||""),d(K.websiteUrl||""),g(K.isPublic),w(K.avatarUrl||""),A(K.coverUrl||""))}catch(ie){console.error("Load profile error:",ie),D("プロフィールの読み込みに失敗しました")}},he=async ie=>{const K=ie.target.files?.[0];if(!K)return;const ve=m6(K);if(!ve.valid){D(ve.error||"");return}N(!0),D("");try{const Ie=Je.currentUser;if(!Ie)throw new Error("ログインが必要です");const G=await AY(Ie.uid,K);w(G),B("アイコン画像をアップロードしました")}catch(Ie){console.error("Avatar upload error:",Ie),D(Ie.message||"アイコン画像のアップロードに失敗しました")}finally{N(!1)}},_e=async ie=>{const K=ie.target.files?.[0];if(!K)return;const ve=m6(K);if(!ve.valid){D(ve.error||"");return}L(!0),D("");try{const Ie=Je.currentUser;if(!Ie)throw new Error("ログインが必要です");const G=await EY(Ie.uid,K);A(G),B("カバー画像をアップロードしました")}catch(Ie){console.error("Cover upload error:",Ie),D(Ie.message||"カバー画像のアップロードに失敗しました")}finally{L(!1)}},Y=async()=>{D(""),B(""),T(!0);try{const ie=Je.currentUser;if(!ie)throw new Error("ログインが必要です");if(!n.trim()){D("表示名を入力してください"),T(!1);return}const K=bY(a);if(!K.valid){D(K.error||""),T(!1);return}if(a!==e?.username&&!await xY(a,ie.uid)){D("このユーザー名は既に使用されています"),T(!1);return}await yY(ie.uid,{displayName:n.trim(),username:a,bio:s.trim(),websiteUrl:f.trim(),isPublic:p,avatarUrl:y,coverUrl:_}),B("プロフィールを更新しました！"),setTimeout(()=>B(""),3e3)}catch(ie){console.error("Save profile error:",ie),D(ie.message||"プロフィールの更新に失敗しました")}finally{T(!1)}};return m.jsxs("div",{className:"profile-edit-screen",children:[m.jsxs("div",{className:"profile-edit-header",children:[m.jsxs("button",{onClick:t,className:"back-button",children:[m.jsx(Rp,{})," 戻る"]}),m.jsx("h2",{children:"プロフィール編集"}),m.jsxs("button",{onClick:Y,className:"save-button",disabled:S,children:[m.jsx(dA,{})," ",S?"保存中...":"保存"]})]}),O&&m.jsx("div",{className:"error-message",children:O}),j&&m.jsx("div",{className:"success-message",children:j}),m.jsx("div",{className:"cover-section",children:m.jsxs("div",{className:"cover-image",style:{backgroundImage:_?`url(${_})`:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)"},children:[m.jsxs("button",{onClick:()=>V.current?.click(),className:"cover-upload-button",disabled:M,children:[m.jsx(np,{})," ",M?"アップロード中...":"カバー画像を変更"]}),m.jsx("input",{ref:V,type:"file",accept:"image/*",onChange:_e,style:{display:"none"}})]})}),m.jsx("div",{className:"avatar-section",children:m.jsxs("div",{className:"avatar-image",children:[y?m.jsx("img",{src:y,alt:"Avatar"}):m.jsx("div",{className:"avatar-placeholder",children:m.jsx(Df,{size:60})}),m.jsx("button",{onClick:()=>z.current?.click(),className:"avatar-upload-button",disabled:R,children:m.jsx(np,{})}),m.jsx("input",{ref:z,type:"file",accept:"image/*",onChange:he,style:{display:"none"}})]})}),m.jsxs("div",{className:"profile-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Df,{})," 表示名"]}),m.jsx("input",{type:"text",value:n,onChange:ie=>i(ie.target.value),placeholder:"山田太郎",maxLength:50}),m.jsxs("span",{className:"char-count",children:[n.length,"/50"]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(om,{})," ユーザー名"]}),m.jsxs("div",{className:"username-input",children:[m.jsx("span",{className:"username-prefix",children:"@"}),m.jsx("input",{type:"text",value:a,onChange:ie=>o(ie.target.value.toLowerCase()),placeholder:"yamada_taro",maxLength:20})]}),m.jsx("span",{className:"hint",children:"英数字とアンダースコア（_）のみ使用可能"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"自己紹介"}),m.jsx("textarea",{value:s,onChange:ie=>c(ie.target.value),placeholder:"あなたについて教えてください...",maxLength:200,rows:4}),m.jsxs("span",{className:"char-count",children:[s.length,"/200"]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(yD,{})," WebサイトURL"]}),m.jsx("input",{type:"url",value:f,onChange:ie=>d(ie.target.value),placeholder:"https://example.com"})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{className:"toggle-label",children:[p?m.jsx(CD,{}):m.jsx(El,{}),"プロフィールを公開する",m.jsx("input",{type:"checkbox",checked:p,onChange:ie=>g(ie.target.checked),className:"toggle-switch"})]}),m.jsx("span",{className:"hint",children:p?"誰でもあなたのプロフィールを閲覧できます":"フォロワーのみプロフィールを閲覧できます"})]})]}),m.jsx("style",{children:`
        .profile-edit-screen {
          min-height: 100vh;
          background: var(--background);
          padding-bottom: 80px;
        }

        .profile-edit-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 16px;
          background: var(--card);
          border-bottom: 1px solid var(--border);
          position: sticky;
          top: 0;
          z-index: 10;
        }

        .profile-edit-header h2 {
          color: var(--text);
          font-size: 20px;
          margin: 0;
        }

        .back-button,
        .save-button {
          padding: 8px 16px;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button {
          background: var(--background);
          color: var(--text);
        }

        .back-button:hover {
          background: var(--border);
        }

        .save-button {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
        }

        .save-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .save-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .error-message {
          margin: 16px;
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .success-message {
          margin: 16px;
          padding: 12px;
          background: #e8f5e9;
          color: #2e7d32;
          border-radius: 8px;
          font-size: 14px;
        }

        body.dark-mode .success-message {
          background: #1b5e20;
          color: #a5d6a7;
        }

        .cover-section {
          position: relative;
        }

        .cover-image {
          width: 100%;
          height: 200px;
          background-size: cover;
          background-position: center;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .cover-upload-button {
          padding: 10px 20px;
          background: rgba(0, 0, 0, 0.6);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .cover-upload-button:hover:not(:disabled) {
          background: rgba(0, 0, 0, 0.8);
        }

        .cover-upload-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .avatar-section {
          display: flex;
          justify-content: center;
          margin-top: -60px;
          padding: 0 16px;
        }

        .avatar-image {
          position: relative;
          width: 120px;
          height: 120px;
          border-radius: 50%;
          border: 4px solid var(--card);
          background: var(--background);
          overflow: hidden;
        }

        .avatar-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .avatar-placeholder {
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          background: var(--border);
        }

        .avatar-upload-button {
          position: absolute;
          bottom: 0;
          right: 0;
          width: 36px;
          height: 36px;
          border-radius: 50%;
          background: var(--primary);
          color: white;
          border: 2px solid var(--card);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all 0.3s;
        }

        .avatar-upload-button:hover:not(:disabled) {
          transform: scale(1.1);
        }

        .avatar-upload-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .profile-form {
          padding: 32px 16px;
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input,
        .form-group textarea {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .form-group textarea {
          resize: vertical;
          font-family: inherit;
        }

        .username-input {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .username-prefix {
          color: var(--text-secondary);
          font-size: 16px;
          font-weight: 500;
        }

        .username-input input {
          flex: 1;
        }

        .char-count,
        .hint {
          color: var(--text-secondary);
          font-size: 12px;
        }

        .toggle-label {
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
        }

        .toggle-switch {
          margin-left: auto;
          width: 50px;
          height: 26px;
          appearance: none;
          background: var(--border);
          border-radius: 13px;
          position: relative;
          cursor: pointer;
          transition: background 0.3s;
        }

        .toggle-switch:checked {
          background: var(--primary);
        }

        .toggle-switch::before {
          content: '';
          position: absolute;
          width: 22px;
          height: 22px;
          border-radius: 50%;
          background: white;
          top: 2px;
          left: 2px;
          transition: transform 0.3s;
        }

        .toggle-switch:checked::before {
          transform: translateX(24px);
        }

        @media (max-width: 480px) {
          .cover-image {
            height: 150px;
          }

          .avatar-image {
            width: 100px;
            height: 100px;
          }

          .profile-form {
            padding: 24px 12px;
          }
        }
      `})]})},TY=()=>{const{settings:t,updateSettings:e,toggleDarkMode:r}=dv(),{intakes:n}=Ga(),{expenses:i}=Wa(),{stocks:a}=Ka(),{user:o}=Xa(),[s,c]=C.useState((t.monthlyBudget??3e4).toString()),[f,d]=C.useState(!1),p=()=>{e({monthlyBudget:Number(s)}),alert("設定を保存しました！")},g=()=>{const _=["種類,名前,カロリー,金額,日付",...n.map(T=>`食事記録,${T.name},${T.calories},${T.price},${T.date}`)].join(`
`),A=new Blob([_],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(A),S.download=`健康家計アプリ_${new Date().toISOString().split("T")[0]}.csv`,S.click()},y=()=>{const _={intakes:n,expenses:i,stocks:a,settings:t,exportedAt:new Date().toISOString()},A=new Blob([JSON.stringify(_,null,2)],{type:"application/json"}),S=document.createElement("a");S.href=URL.createObjectURL(A),S.download=`健康家計アプリ_${new Date().toISOString().split("T")[0]}.json`,S.click()},w=async()=>{if(window.confirm("ログアウトしますか？")){const _=await cY();_.error&&alert("ログアウトに失敗しました: "+_.error)}};return f?m.jsx(CY,{onBack:()=>d(!1)}):m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"設定"}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"プロフィール"}),m.jsxs("button",{className:"profile-edit-button",onClick:()=>d(!0),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px 16px",background:"var(--background)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s",marginBottom:"12px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[m.jsx(Df,{size:24,color:"var(--primary)"}),m.jsx("span",{style:{color:"var(--text)",fontSize:"16px",fontWeight:"500"},children:"プロフィールを編集"})]}),m.jsx(pA,{size:24,color:"var(--text-secondary)"})]}),m.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",margin:"0"},children:"アイコン、名前、自己紹介などを編集"})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"月間予算"}),m.jsx("input",{type:"number",value:s,onChange:_=>c(_.target.value),placeholder:"30000"}),m.jsxs("button",{className:"submit",onClick:p,children:[m.jsx(dA,{size:18,style:{marginRight:"8px"}}),"保存"]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"外観"}),m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{className:"setting-item-left",children:[m.jsx("div",{className:"setting-icon",children:m.jsx(KU,{size:24})}),m.jsx("span",{className:"setting-label",children:"ダークモード"})]}),m.jsxs("label",{className:"toggle-switch",children:[m.jsx("input",{type:"checkbox",checked:t.darkMode,onChange:r}),m.jsx("span",{className:"toggle-slider"})]})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"データエクスポート"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsxs("button",{className:"submit",onClick:g,style:{flex:1},children:[m.jsx(MU,{size:18,style:{marginRight:"8px"}}),"CSV"]}),m.jsxs("button",{className:"submit",onClick:y,style:{flex:1},children:[m.jsx(kU,{size:18,style:{marginRight:"8px"}}),"JSON"]})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"データ統計"}),m.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)"},children:[m.jsxs("p",{children:["食事記録: ",n.length,"件"]}),m.jsxs("p",{children:["支出記録: ",i.length,"件"]}),m.jsxs("p",{children:["在庫アイテム: ",a.length,"件"]})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"アカウント"}),m.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)",marginBottom:"12px"},children:m.jsxs("p",{children:["ログイン: ",o?.email]})}),m.jsxs("button",{className:"submit",onClick:w,style:{background:"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)",width:"100%"},children:[m.jsx(UU,{size:18,style:{marginRight:"8px"}}),"ログアウト"]})]})]})},IY=()=>{const{addStock:t}=Ka(),[e,r]=C.useState(""),[n,i]=C.useState(""),[a,o]=C.useState("1"),[s,c]=C.useState("other"),f=()=>{if(!e||!n){alert("品目名と残り日数を入力してください");return}t({name:e,daysRemaining:Number(n),quantity:Number(a),category:s}),r(""),i(""),o("1"),c("other"),alert("在庫を追加しました！")},d=[{value:"staple",label:"🍚 主食"},{value:"protein",label:"🍖 たんぱく質"},{value:"vegetable",label:"🥬 野菜"},{value:"fruit",label:"🍎 果物"},{value:"dairy",label:"🥛 乳製品"},{value:"seasoning",label:"🧂 調味料"},{value:"other",label:"📦 その他"}];return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"手動で追加"}),m.jsx("label",{children:"品目"}),m.jsx("input",{value:e,onChange:p=>r(p.target.value),placeholder:"例: 牛乳"}),m.jsx("label",{children:"カテゴリ"}),m.jsx("select",{value:s,onChange:p=>c(p.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"2px solid var(--border)",fontSize:"16px",marginBottom:"16px"},children:d.map(p=>m.jsx("option",{value:p.value,children:p.label},p.value))}),m.jsx("label",{children:"残り日数"}),m.jsx("input",{type:"number",value:n,onChange:p=>i(p.target.value),placeholder:"例: 3"}),m.jsx("label",{children:"数量"}),m.jsx("input",{type:"number",value:a,onChange:p=>o(p.target.value),placeholder:"1"}),m.jsx("button",{className:"submit",onClick:f,children:"在庫に登録"})]})},OY=()=>{const{stocks:t,deleteStock:e,updateStock:r}=Ka(),{addItem:n}=Ql(),[i,a]=C.useState(""),[o,s]=C.useState("expiry"),[c,f]=C.useState("all"),d=T=>{confirm("この在庫を削除しますか？")&&e(T)},p=(T,R)=>{n({name:T,quantity:R}),alert(`「${T}」を買い物リストに追加しました！`)},g=(T,R,N)=>{const M=R+N;M<=0?confirm("数量が0になります。在庫を削除しますか？")&&e(T):r(T,{quantity:M})},y=T=>T<=0?"#ef4444":T<=1?"#f59e0b":T<=3?"#eab308":"#10b981",w=T=>T<=0?"期限切れ！":T===1?"明日期限":`残り${T}日`,_=T=>{switch(T){case"staple":return"🍚";case"protein":return"🍖";case"vegetable":return"🥬";case"fruit":return"🍎";case"dairy":return"🥛";case"seasoning":return"🧂";default:return"📦"}},A=T=>{switch(T){case"staple":return"主食";case"protein":return"たんぱく質";case"vegetable":return"野菜";case"fruit":return"果物";case"dairy":return"乳製品";case"seasoning":return"調味料";default:return"その他"}},S=C.useMemo(()=>{let T=[...t];return c!=="all"&&(T=T.filter(R=>R.category===c)),i&&(T=T.filter(R=>R.name.toLowerCase().includes(i.toLowerCase()))),T.sort((R,N)=>{switch(o){case"expiry":return R.daysRemaining-N.daysRemaining;case"name":return R.name.localeCompare(N.name);case"category":const M=R.category||"other",L=N.category||"other";return M===L?R.daysRemaining-N.daysRemaining:M.localeCompare(L);default:return 0}}),T},[t,i,o,c]);return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{children:["在庫一覧（",S.length,"個）"]}),m.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[m.jsx(uA,{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)",fontSize:"20px"}}),m.jsx("input",{type:"text",value:i,onChange:T=>a(T.target.value),placeholder:"在庫を検索...",style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"8px",border:"2px solid var(--border)",fontSize:"16px"}})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"16px"},children:[m.jsxs("div",{children:[m.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"4px",display:"block"},children:"カテゴリ"}),m.jsxs("select",{value:c,onChange:T=>f(T.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"2px solid var(--border)",fontSize:"14px"},children:[m.jsx("option",{value:"all",children:"すべて"}),m.jsx("option",{value:"staple",children:"🍚 主食"}),m.jsx("option",{value:"protein",children:"🍖 たんぱく質"}),m.jsx("option",{value:"vegetable",children:"🥬 野菜"}),m.jsx("option",{value:"fruit",children:"🍎 果物"}),m.jsx("option",{value:"dairy",children:"🥛 乳製品"}),m.jsx("option",{value:"seasoning",children:"🧂 調味料"}),m.jsx("option",{value:"other",children:"📦 その他"})]})]}),m.jsxs("div",{children:[m.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"4px",display:"block"},children:"並び順"}),m.jsxs("select",{value:o,onChange:T=>s(T.target.value),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"2px solid var(--border)",fontSize:"14px"},children:[m.jsx("option",{value:"expiry",children:"期限順"}),m.jsx("option",{value:"name",children:"名前順"}),m.jsx("option",{value:"category",children:"カテゴリ順"})]})]})]}),t.length===0?m.jsx("p",{style:{textAlign:"center",color:"var(--text-secondary)",padding:"20px"},children:"在庫がありません"}):S.length===0?m.jsx("p",{style:{textAlign:"center",color:"var(--text-secondary)",padding:"20px"},children:"該当する在庫がありません"}):m.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:S.map(T=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:"1px solid var(--border)",background:"var(--background)",borderRadius:"8px",marginBottom:"8px"},children:[m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[m.jsx("span",{style:{fontSize:"24px"},children:_(T.category)}),m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,fontSize:"16px"},children:T.name}),m.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:A(T.category)})]})]}),m.jsx("div",{style:{fontSize:"0.9rem",color:y(T.daysRemaining),fontWeight:600,marginBottom:"8px"},children:w(T.daysRemaining)}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("button",{onClick:()=>g(T.id,T.quantity,-1),style:{background:"#ef4444",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",display:"flex",alignItems:"center"},children:m.jsx(GU,{size:16})}),m.jsxs("span",{style:{fontWeight:600,minWidth:"40px",textAlign:"center"},children:["x",T.quantity]}),m.jsx("button",{onClick:()=>g(T.id,T.quantity,1),style:{background:"#10b981",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",cursor:"pointer",display:"flex",alignItems:"center"},children:m.jsx(rp,{size:16})})]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginLeft:"12px"},children:[m.jsx("button",{onClick:()=>p(T.name,T.quantity),style:{background:"#3b82f6",color:"white",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"買い物リストに追加",children:m.jsx(Op,{size:20})}),m.jsx("button",{onClick:()=>d(T.id),style:{background:"transparent",border:"2px solid #ef4444",borderRadius:"6px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"#ef4444"},title:"削除",children:m.jsx(gu,{size:20})})]})]},T.id))})]})},RY=()=>{const{getExpiringStocks:t}=Ka(),{addItem:e}=Ql(),r=C.useMemo(()=>t(0),[t]),n=C.useMemo(()=>t(1),[t]),i=()=>{const a=[...r,...n];a.length!==0&&confirm(`期限切れ間近の商品 ${a.length}個を買い物リストに追加しますか？`)&&(a.forEach(o=>{e({name:o.name,quantity:o.quantity})}),alert(`${a.length}個の商品を買い物リストに追加しました！`))};return r.length===0&&n.length===0?null:m.jsxs(m.Fragment,{children:[r.length>0&&m.jsxs("div",{className:"card",style:{background:"#fee2e2",borderLeft:"4px solid #ef4444",color:"#991b1b"},children:[m.jsx("h3",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:"🚨 今日使うべき食材"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:r.map(a=>m.jsx("li",{children:a.name},a.id))})]}),n.length>0&&m.jsxs("div",{className:"card",style:{background:"#fef3c7",borderLeft:"4px solid #f59e0b",color:"#92400e"},children:[m.jsx("h3",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:"⏰ 明日期限切れ"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:n.map(a=>m.jsx("li",{children:a.name},a.id))})]}),m.jsx("div",{className:"card",style:{padding:"12px"},children:m.jsxs("button",{onClick:i,className:"submit",style:{background:"#3b82f6",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px"},children:[m.jsx(Op,{size:20}),"期限切れ間近の商品を買い物リストに追加"]})})]})},PY=()=>{const{stocks:t}=Ka(),e=C.useMemo(()=>{const i={staple:0,protein:0,vegetable:0,fruit:0,dairy:0,seasoning:0,other:0},a={expired:0,today:0,tomorrow:0,soon:0,safe:0};let o=0;return t.forEach(s=>{const c=s.category||"other";i[c]+=s.quantity,o+=s.quantity,s.daysRemaining<=0?a.expired++:s.daysRemaining===0?a.today++:s.daysRemaining===1?a.tomorrow++:s.daysRemaining<=3?a.soon++:a.safe++}),{categoryCount:i,expiryStats:a,totalQuantity:o}},[t]),r=i=>{switch(i){case"staple":return"🍚";case"protein":return"🍖";case"vegetable":return"🥬";case"fruit":return"🍎";case"dairy":return"🥛";case"seasoning":return"🧂";default:return"📦"}},n=i=>{switch(i){case"staple":return"主食";case"protein":return"たんぱく質";case"vegetable":return"野菜";case"fruit":return"果物";case"dairy":return"乳製品";case"seasoning":return"調味料";default:return"その他"}};return t.length===0?null:m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"在庫統計"}),m.jsxs("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",padding:"20px",borderRadius:"12px",marginBottom:"16px",color:"white",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"8px",opacity:.9},children:"総在庫数"}),m.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"bold"},children:[e.totalQuantity,m.jsx("span",{style:{fontSize:"1.2rem",marginLeft:"8px"},children:"個"})]}),m.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"4px"},children:[t.length,"種類の商品"]})]}),m.jsxs("div",{style:{marginBottom:"16px"},children:[m.jsx("h4",{style:{fontSize:"1rem",marginBottom:"12px"},children:"カテゴリ別"}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:Object.keys(e.categoryCount).map(i=>{const a=e.categoryCount[i];return a===0?null:m.jsxs("div",{style:{background:"var(--background)",padding:"12px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("span",{style:{fontSize:"24px"},children:r(i)}),m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:n(i)}),m.jsxs("div",{style:{fontWeight:600,fontSize:"1.1rem"},children:[a,"個"]})]})]},i)})})]}),m.jsxs("div",{children:[m.jsx("h4",{style:{fontSize:"1rem",marginBottom:"12px"},children:"賞味期限"}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.expiryStats.expired>0&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#fef2f2",borderRadius:"6px",border:"2px solid #ef4444"},children:[m.jsx("span",{style:{color:"#ef4444",fontWeight:600},children:"⚠️ 期限切れ"}),m.jsxs("span",{style:{fontWeight:"bold",color:"#ef4444"},children:[e.expiryStats.expired,"個"]})]}),e.expiryStats.today>0&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#fff7ed",borderRadius:"6px",border:"2px solid #f59e0b"},children:[m.jsx("span",{style:{color:"#f59e0b",fontWeight:600},children:"🔔 今日期限"}),m.jsxs("span",{style:{fontWeight:"bold",color:"#f59e0b"},children:[e.expiryStats.today,"個"]})]}),e.expiryStats.tomorrow>0&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#fefce8",borderRadius:"6px",border:"2px solid #eab308"},children:[m.jsx("span",{style:{color:"#eab308",fontWeight:600},children:"📅 明日期限"}),m.jsxs("span",{style:{fontWeight:"bold",color:"#eab308"},children:[e.expiryStats.tomorrow,"個"]})]}),e.expiryStats.soon>0&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"var(--background)",borderRadius:"6px"},children:[m.jsx("span",{style:{color:"var(--text-secondary)",fontWeight:600},children:"⏰ 3日以内"}),m.jsxs("span",{style:{fontWeight:"bold"},children:[e.expiryStats.soon,"個"]})]}),e.expiryStats.safe>0&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"#f0fdf4",borderRadius:"6px"},children:[m.jsx("span",{style:{color:"#10b981",fontWeight:600},children:"✅ 安全"}),m.jsxs("span",{style:{fontWeight:"bold",color:"#10b981"},children:[e.expiryStats.safe,"個"]})]})]})]})]})},DY=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"在庫管理"}),m.jsx(RY,{}),m.jsx(PY,{}),m.jsx(IY,{}),m.jsx(OY,{})]}),NY=()=>{const{addWeeklyEssentials:t,addLowStockItems:e}=Ql(),{getExpiringStocks:r}=Ka(),n=()=>{t(),alert("1週間分の買い物リストを追加しました！")},i=()=>{const a=r(2);if(a.length===0){alert("在庫が少ない商品はありません");return}e(a.map(o=>({name:o.name,category:o.category}))),alert(`${a.length}件の商品を追加しました！`)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"🔰 初心者向けサポート"}),m.jsx("button",{className:"submit",onClick:n,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",marginBottom:"8px"},children:"📅 1週間分の買い物リストを生成"}),m.jsx("button",{className:"submit",onClick:i,style:{background:"linear-gradient(135deg, #f59e0b, #d97706)"},children:"⚠️ 在庫が少ない商品を追加"})]})},kY=[{keywords:["ポテトチップス","チップス","スナック菓子","かっぱえびせん","ドリトス"],category:"スナック菓子",reason:"高カロリー・高脂質で、塩分も多く含まれています。",alternatives:["素焼きアーモンド","無塩ミックスナッツ","焼き野菜チップス","ドライフルーツ"]},{keywords:["コーラ","サイダー","炭酸飲料","ファンタ","ペプシ","ソーダ"],category:"清涼飲料水",reason:"糖分が非常に多く、虫歯や肥満の原因になります。",alternatives:["炭酸水","無糖の紅茶","麦茶","フレーバーウォーター（無糖）"]},{keywords:["カップラーメン","カップ麺","インスタントラーメン","カップ焼きそば"],category:"インスタント食品",reason:"塩分・脂質が多く、栄養バランスが偏りがちです。",alternatives:["生麺","冷凍うどん","乾麺（そば・パスタ）","低塩分インスタント麺"]},{keywords:["チョコレート","チョコ","ポッキー","きのこの山","たけのこの里"],category:"チョコレート菓子",reason:"糖分・脂質が多く、カロリーが高めです。",alternatives:["高カカオチョコレート（カカオ70%以上）","ドライフルーツ","ナッツ"]},{keywords:["唐揚げ","フライドチキン","とんかつ","天ぷら","フライドポテト","コロッケ"],category:"揚げ物",reason:"高カロリー・高脂質で、酸化した油が健康に悪影響を及ぼす可能性があります。",alternatives:["グリルチキン","蒸し鶏","焼き魚","ノンフライ調理品"]},{keywords:["ハンバーガー","ピザ","フライドポテト","ドーナツ"],category:"ファストフード",reason:"高カロリー・高脂質・高塩分で、栄養バランスが偏ります。",alternatives:["サンドイッチ（全粒粉パン）","サラダラップ","手作りピザ（薄皮）"]},{keywords:["アイスクリーム","アイス","ジェラート","ソフトクリーム"],category:"アイスクリーム",reason:"糖分・脂質が多く、食べ過ぎは肥満の原因になります。",alternatives:["フローズンヨーグルト","シャーベット","果物（冷凍）","低脂肪アイス"]},{keywords:["ケーキ","シュークリーム","ドーナツ","タルト","パウンドケーキ"],category:"洋菓子",reason:"糖分・脂質が非常に多く、カロリーが高いです。",alternatives:["和菓子（どら焼き、大福）","フルーツ","ヨーグルト","低糖質スイーツ"]},{keywords:["ベーコン","ソーセージ","ハム","サラミ","ウインナー"],category:"加工肉",reason:"塩分・添加物が多く、WHO（世界保健機関）が発がん性を指摘しています。",alternatives:["生肉（鶏むね肉、豚ヒレ肉）","魚","豆腐","納豆"]},{keywords:["エナジードリンク","レッドブル","モンスター","リアルゴールド"],category:"エナジードリンク",reason:"カフェイン・糖分が多く、心臓への負担や不眠の原因になります。",alternatives:["ブラックコーヒー","緑茶","麦茶","スポーツドリンク（無糖）"]},{keywords:["缶詰","缶コーン","缶ピーチ","フルーツ缶"],category:"缶詰（シロップ漬け）",reason:"シロップに糖分が多く含まれています。",alternatives:["生のフルーツ","冷凍フルーツ","水煮缶","ドライフルーツ"]},{keywords:["マヨネーズ","マーガリン","バター","ラード"],category:"高脂質調味料",reason:"脂質・カロリーが非常に高く、使いすぎは肥満の原因になります。",alternatives:["オリーブオイル","ごま油（少量）","低脂肪マヨネーズ","酢","レモン汁"]}];function MY(t){const e=t.toLowerCase();for(const r of kY)for(const n of r.keywords)if(e.includes(n.toLowerCase()))return{type:"warning",category:r.category,reason:r.reason,alternatives:r.alternatives};return null}async function jY(t,e){try{const r=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`「${t}」という商品の健康面での懸念点を分析し、より健康的な代替案を3つ提案してください。

以下のJSON形式で回答してください：
{
  "category": "商品カテゴリ",
  "reason": "健康面での懸念点（簡潔に）",
  "alternatives": ["代替案1", "代替案2", "代替案3"]
}

懸念点がない場合は null を返してください。`}]}]})});if(!r.ok)throw new Error("AI分析に失敗しました");const i=(await r.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!i)return null;const a=i.match(/\{[\s\S]*\}/);if(!a)return null;const o=JSON.parse(a[0]);return!o||o===null?null:{type:"warning",category:o.category||"不明",reason:o.reason||"",alternatives:o.alternatives||[]}}catch(r){return console.error("AI健康分析エラー:",r),null}}const LY=({productName:t,warning:e,onClose:r,onAddAlternative:n,onContinueAnyway:i})=>{const[a,o]=C.useState(!1),[s,c]=C.useState(null),[f,d]=C.useState(!1),p=async()=>{d(!0);const w=await jY(t,"AIzaSyBSqmtDaNAqF09NTYYKQsTKm-3fLl1LMr0");c(w),o(!0),d(!1)},g=a&&s?s:e;return m.jsx("div",{className:"modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:r,children:m.jsxs("div",{className:"modal-content",style:{background:"var(--card)",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"100%",maxHeight:"80vh",overflowY:"auto",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},onClick:y=>y.stopPropagation(),children:[m.jsx("button",{onClick:r,style:{position:"absolute",top:"16px",right:"16px",background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text-secondary)"},children:m.jsx(ru,{size:24})}),m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[m.jsx(vD,{size:32,color:"#f59e0b"}),m.jsx("h3",{style:{margin:0,fontSize:"1.25rem"},children:"健康アドバイス"})]}),m.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-secondary)"},children:["「",m.jsx("strong",{children:t}),"」について"]})]}),m.jsxs("div",{style:{background:"#fef3c7",padding:"16px",borderRadius:"12px",marginBottom:"20px",borderLeft:"4px solid #f59e0b"},children:[m.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1rem",color:"#92400e"},children:["📊 カテゴリ: ",g.category]}),m.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#78350f",lineHeight:"1.6"},children:g.reason})]}),m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(BU,{size:20,color:"#10b981"}),"より健康的な代替案"]}),m.jsx("div",{style:{display:"grid",gap:"8px"},children:g.alternatives.map((y,w)=>m.jsxs("button",{onClick:()=>n(y),style:{background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"8px",padding:"12px",cursor:"pointer",textAlign:"left",fontSize:"0.9rem",color:"#15803d",fontWeight:500,transition:"all 0.2s"},onMouseEnter:_=>{_.currentTarget.style.background="#dcfce7",_.currentTarget.style.transform="translateX(4px)"},onMouseLeave:_=>{_.currentTarget.style.background="#f0fdf4",_.currentTarget.style.transform="translateX(0)"},children:["✓ ",y]},w))})]}),!a&&m.jsxs("button",{onClick:p,disabled:f,style:{width:"100%",padding:"12px",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"white",border:"none",borderRadius:"8px",cursor:f?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:600,marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:f?.6:1},children:[m.jsx($1,{size:20}),f?"AI分析中...":"AIで詳しく分析する"]}),m.jsxs("div",{style:{display:"grid",gap:"8px"},children:[m.jsx("button",{onClick:i,style:{padding:"12px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:"このまま追加する"}),m.jsx("button",{onClick:r,style:{padding:"12px",background:"transparent",color:"var(--text-secondary)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"キャンセル"})]})]})})},BY=()=>{const{addItem:t}=Ql(),[e,r]=C.useState(""),[n,i]=C.useState("1"),[a,o]=C.useState(""),[s,c]=C.useState(null),[f,d]=C.useState(null),p=()=>{if(!e){alert("商品名を入力してください");return}const A=MY(e);if(A){c(A),d({name:e,quantity:Number(n),price:a?Number(a):void 0});return}g(e,Number(n),a?Number(a):void 0)},g=(A,S,T)=>{t({name:A,quantity:S,price:T}),r(""),i("1"),o("")},y=()=>{c(null),d(null)},w=A=>{f&&g(A,f.quantity,f.price),y()},_=()=>{f&&g(f.name,f.quantity,f.price),y()};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"手動で追加"}),m.jsx("label",{children:"商品名"}),m.jsx("input",{value:e,onChange:A=>r(A.target.value),placeholder:"例: 牛乳",onKeyDown:A=>A.key==="Enter"&&p()}),m.jsx("label",{children:"数量"}),m.jsx("input",{type:"number",value:n,onChange:A=>i(A.target.value),placeholder:"1"}),m.jsx("label",{children:"価格（任意）"}),m.jsx("input",{type:"number",value:a,onChange:A=>o(A.target.value),placeholder:"例: 300"}),m.jsx("button",{className:"submit",onClick:p,children:"リストに追加"})]}),s&&f&&m.jsx(LY,{productName:f.name,warning:s,onClose:y,onAddAlternative:w,onContinueAnyway:_})]})},zY=()=>{const{items:t,toggleItem:e,deleteItem:r,clearCompleted:n}=Ql(),{addStock:i}=Ka(),{addExpense:a}=Wa(),[o,s]=C.useState(!1),c=t.filter(g=>!g.checked).reduce((g,y)=>g+(y.price||0)*y.quantity,0),f=t.filter(g=>g.checked).reduce((g,y)=>g+(y.price||0)*y.quantity,0),d=()=>{confirm("チェック済みのアイテムをすべて削除しますか？")&&n()},p=()=>{const g=t.filter(_=>_.checked);if(g.length===0){alert("チェック済みのアイテムがありません");return}const y=g.reduce((_,A)=>_+(A.price||0)*A.quantity,0),w=y>0?`
（合計金額: ¥${y.toLocaleString()}を家計簿に記録します）`:"";if(confirm(`チェック済みのアイテム ${g.length}個を在庫に追加しますか？
（賞味期限は7日後に設定されます）${w}`)){if(g.forEach(_=>{i({name:_.name,quantity:_.quantity,daysRemaining:7})}),y>0){const _=g.map(A=>A.name).join("、");a({category:"food",amount:y,memo:`買い物: ${_}`,date:new Date().toISOString()})}n(),s(!0),setTimeout(()=>{s(!1)},3e3)}};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"買い物リスト"}),t.length===0?m.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"リストが空です"}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"var(--background)",borderRadius:"8px",border:"2px solid var(--border)"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[m.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"未購入の合計"}),m.jsxs("span",{style:{fontWeight:"bold",color:"var(--primary)",fontSize:"1.1rem"},children:["¥",c.toLocaleString()]})]}),f>0&&m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"8px",borderTop:"1px solid var(--border)"},children:[m.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.9rem"},children:"購入済みの合計"}),m.jsxs("span",{style:{fontWeight:"bold",color:"#10b981",fontSize:"1.1rem"},children:["¥",f.toLocaleString()]})]})]}),m.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:t.map(g=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[m.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[m.jsx("input",{type:"checkbox",checked:g.checked,onChange:()=>e(g.id),style:{width:"18px",height:"18px"}}),m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{fontWeight:500,textDecoration:g.checked?"line-through":"none",color:g.checked?"#999":"inherit"},children:[g.name,g.quantity>1&&m.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"8px"},children:["x",g.quantity]})]}),g.price&&m.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"4px"},children:["¥",g.price.toLocaleString()," ",g.quantity>1&&`(小計: ¥${(g.price*g.quantity).toLocaleString()})`]})]})]}),m.jsx("button",{onClick:()=>r(g.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},children:m.jsx(gu,{size:20})})]},g.id))}),t.some(g=>g.checked)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"white",fontSize:"0.9rem",fontWeight:500},children:[m.jsx(Pf,{size:20}),m.jsx("span",{children:"買い物完了後はこちら！"})]}),m.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",margin:"0 0 12px 0",lineHeight:"1.5"},children:["チェックした商品を在庫に一括追加できます。",m.jsx("br",{}),"賞味期限は自動で7日後に設定されます。"]}),m.jsxs("button",{className:"submit",onClick:p,style:{background:"white",color:"#10b981",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1rem",fontWeight:600,padding:"14px",border:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[m.jsx(Pf,{size:22}),"在庫に追加（",t.filter(g=>g.checked).length,"個）"]})]}),m.jsx("button",{className:"submit",onClick:d,style:{background:"transparent",color:"#ef4444",border:"2px solid #ef4444",marginTop:"8px",width:"100%"},children:"チェック済みをクリア"})]}),o&&m.jsxs("div",{style:{position:"fixed",top:"80px",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.4)",display:"flex",alignItems:"center",gap:"12px",zIndex:1e3,animation:"slideDown 0.3s ease-out",fontSize:"1rem",fontWeight:600},children:[m.jsx(Ip,{size:28}),m.jsx("span",{children:"在庫に追加しました！"})]})]})]})},UY=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"買い物リスト"}),m.jsx(NY,{}),m.jsx(BY,{}),m.jsx(zY,{})]}),Cf="AIzaSyBSqmtDaNAqF09NTYYKQsTKm-3fLl1LMr0",bM=Cf!=="YOUR_GEMINI_API_KEY_HERE";let df=[];function NE(t){const e=Date.now();df.push({type:t,timestamp:e}),df=df.filter(a=>e-a.timestamp<6e4);const r=df.filter(a=>a.type==="recipe").length,n=df.filter(a=>a.type==="receipt").length,i=df.length;console.log(`[API Usage] 直近1分間の合計リクエスト数: ${i}回`),console.log(`  - レシピ生成: ${r}回`),console.log(`  - レシートOCR: ${n}回`),console.log(`  - 残り制限枠: ${15-i}回 (Free Tier: 15回/分)`)}async function FY(t,e="none",r="none",n=""){if(console.log("[Gemini] API呼び出し開始",{ingredients:t,dietaryRestriction:e,difficulty:r,customRequest:n,API_ENABLED:bM,apiKeyPrefix:Cf.substring(0,10)+"..."}),!t||t.length===0)throw new Error("材料を指定してください。");try{const i=e==="vegetarian"?"ベジタリアン":e==="vegan"?"ヴィーガン":"";let a="";r==="super_easy"?a=`

**重要**: 料理初心者でも絶対に失敗しない超簡単なレシピにしてください。調理工程は3ステップ以内、特別な道具や技術は不要にしてください。`:r==="under_5min"?a=`

**重要**: 調理時間5分以内で完成するレシピにしてください。`:r==="under_10min"?a=`

**重要**: 調理時間10分以内で完成するレシピにしてください。`:r==="no_fire"&&(a=`

**重要**: 火を使わずに作れるレシピにしてください（電子レンジやトースターは可）。`);const o=n?`

**追加のリクエスト**: ${n}`:"",s=`
あなたは日本語で答えるプロの料理アドバイザーです。
必ず日本語で回答してください。英語は使わないでください。

次の食材を使った${i}向けの家庭向けレシピを1つ提案してください。
料理名・材料・手順・ポイントを含めて出力してください。${a}${o}

食材: ${t.join("、")}

出力フォーマットは以下の形式でお願いします：

---
【料理名】
（料理名）

【材料】
（材料一覧）

【作り方】
1.
2.
3.

【ポイント】
（料理のコツやアドバイス）
---
`.trim(),c=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${Cf}`;NE("recipe"),console.log("[Gemini] APIリクエスト送信",{url:c.replace(Cf,"HIDDEN")});const f=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}})});if(console.log("[Gemini] APIレスポンス受信",{status:f.status,ok:f.ok}),console.log("[Gemini] Rate Limit Info:",{limit:f.headers.get("x-ratelimit-limit"),remaining:f.headers.get("x-ratelimit-remaining"),reset:f.headers.get("x-ratelimit-reset"),retryAfter:f.headers.get("retry-after")}),!f.ok){const p=await f.text();let g;try{g=JSON.parse(p)}catch{g={rawError:p}}console.error("[Gemini] APIエラー詳細",{status:f.status,statusText:f.statusText,errorData:g});let y=`Gemini API エラー (${f.status})`;throw g.error?.message&&(y+=`: ${g.error.message}`),new Error(y)}const d=await f.json();if(console.log("[Gemini] レスポンスデータ",d),d.candidates&&d.candidates.length>0){const p=d.candidates[0];if(p.content?.parts&&p.content.parts.length>0){const g=p.content.parts[0].text;return console.log("[Gemini] レシピ生成成功"),g.trim()}}throw console.error("[Gemini] レスポンス形式が不正",d),new Error("Gemini APIからレシピを取得できませんでした。")}catch(i){return console.error("[Gemini] エラー発生:",i),console.warn("[Gemini] モックデータを使用します。"),console.info("[Gemini] 新しいAPIキーが必要な場合: https://aistudio.google.com/app/apikey"),i instanceof Error&&i.message.includes("403")&&console.error("[Gemini] 403エラー: APIキーが無効または期限切れです。新しいキーを取得してください。"),$Y(t,e,r)}}async function VY(t){console.log("[Gemini Text] テキスト生成開始");try{const e=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${Cf}`;NE("recipe"),console.log("[Gemini Text] APIリクエスト送信");const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}})});if(console.log("[Gemini Text] APIレスポンス受信",{status:r.status}),!r.ok){const i=await r.text();throw console.error("[Gemini Text] APIエラー",i),new Error(`Gemini API エラー: ${r.status}`)}const n=await r.json();if(console.log("[Gemini Text] レスポンスデータ受信"),n.candidates&&n.candidates.length>0){const i=n.candidates[0];if(i.content?.parts&&i.content.parts.length>0){const a=i.content.parts[0].text.trim();return console.log("[Gemini Text] テキスト生成成功"),a}}throw new Error("テキストを生成できませんでした")}catch(e){throw console.error("[Gemini Text] エラー:",e),e}}const HY=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const a=n.result.split(",")[1];e(a)},n.onerror=r,n.readAsDataURL(t)});let y6=0;const x6=5e3;async function b6(t){console.log("[Gemini Receipt] OCR処理開始",{fileName:t.name,fileSize:t.size,API_ENABLED:bM});const e=Date.now(),r=e-y6;if(r<x6){const n=Math.ceil((x6-r)/1e3);throw new Error(`レート制限: ${n}秒後に再試行してください`)}try{y6=e;const n=await HY(t),i=`
あなたは日本語のレシート解析の専門家です。
このレシート画像から商品名と価格を正確に抽出してください。

以下のJSON形式で出力してください：
{
  "storeName": "店舗名（わかれば）",
  "date": "日付（YYYY-MM-DD形式、わかれば）",
  "total": 合計金額（数値、わかれば）,
  "items": [
    {
      "name": "商品名",
      "price": 価格（数値）,
      "quantity": 数量（数値、デフォルトは1）
    }
  ]
}

**重要な指示:**
1. 商品名と価格は必ず正確に抽出してください
2. 価格は数値のみ（円記号やカンマは除く）
3. 同じ商品が複数ある場合はquantityで表現
4. 合計金額や税金などの行は除外
5. 不明な項目は省略してOK
6. 必ずJSONのみを返してください（説明文は不要）
`.trim(),a=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=${Cf}`;NE("receipt"),console.log("[Gemini Receipt] APIリクエスト送信");const o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i},{inlineData:{mimeType:t.type||"image/jpeg",data:n}}]}],generationConfig:{temperature:.1,topK:32,topP:1,maxOutputTokens:2048}})});if(console.log("[Gemini Receipt] APIレスポンス受信",{status:o.status}),console.log("[Gemini Receipt] Rate Limit Info:",{limit:o.headers.get("x-ratelimit-limit"),remaining:o.headers.get("x-ratelimit-remaining"),reset:o.headers.get("x-ratelimit-reset"),retryAfter:o.headers.get("retry-after")}),!o.ok){const c=await o.text();throw console.error("[Gemini Receipt] APIエラー",c),o.status===429?new Error("レート制限に達しました。数秒後に再試行してください。"):new Error(`Gemini API エラー: ${o.status}`)}const s=await o.json();if(console.log("[Gemini Receipt] レスポンスデータ",s),s.candidates&&s.candidates.length>0){const c=s.candidates[0];if(c.content?.parts&&c.content.parts.length>0){const f=c.content.parts[0].text.trim();console.log("[Gemini Receipt] 抽出テキスト:",f);let d=f;const p=f.match(/```json\s*([\s\S]*?)\s*```/);if(p)d=p[1];else if(f.includes("```")){const w=f.match(/```\s*([\s\S]*?)\s*```/);w&&(d=w[1])}const g=JSON.parse(d),y={items:g.items||[],total:g.total,storeName:g.storeName,date:g.date,rawText:f};return console.log("[Gemini Receipt] OCR成功",y),y}}throw new Error("レシートからテキストを抽出できませんでした")}catch(n){throw console.error("[Gemini Receipt] エラー:",n),n}}function $Y(t,e,r="none"){const n=e==="vegetarian"?"ベジタリアン":e==="vegan"?"ヴィーガン":"",i=r==="super_easy"?"（超簡単）":r==="under_5min"?"（5分）":r==="under_10min"?"（10分）":r==="no_fire"?"（火を使わない）":"";return`
【料理名】
${t.join("と")}の${n}炒め${i}

【材料】
${t.map(a=>`・${a} 適量`).join(`
`)}
・塩、こしょう 少々
・サラダ油 大さじ1

【作り方】
1. ${t[0]||"材料"}を食べやすい大きさに切ります。
2. フライパンに油を熱し、材料を炒めます。
3. 塩、こしょうで味を調えて完成です。

【ポイント】
シンプルな炒め物なので、お好みで醤油やにんにくを加えても美味しいです。
野菜の食感を残すため、強火でサッと炒めるのがコツです。

※ このレシピはデモ用のモックデータです。実際のGemini APIキーを設定すると、AIが本格的なレシピを生成します。
※ 403エラーが発生しています。新しいAPIキーを https://aistudio.google.com/app/apikey で取得してください。
`.trim()}function Nm(t){return Ae({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a.5.5 0 0 1-.5-.5v-1.293l-.646.647a.5.5 0 0 1-.707-.708L7.5 12.793V8.866l-3.4 1.963-.496 1.85a.5.5 0 1 1-.966-.26l.237-.882-1.12.646a.5.5 0 0 1-.5-.866l1.12-.646-.884-.237a.5.5 0 1 1 .26-.966l1.848.495L7 8 3.6 6.037l-1.85.495a.5.5 0 0 1-.258-.966l.883-.237-1.12-.646a.5.5 0 1 1 .5-.866l1.12.646-.237-.883a.5.5 0 1 1 .966-.258l.495 1.849L7.5 7.134V3.207L6.147 1.854a.5.5 0 1 1 .707-.708l.646.647V.5a.5.5 0 1 1 1 0v1.293l.647-.647a.5.5 0 1 1 .707.708L8.5 3.207v3.927l3.4-1.963.496-1.85a.5.5 0 1 1 .966.26l-.236.882 1.12-.646a.5.5 0 0 1 .5.866l-1.12.646.883.237a.5.5 0 1 1-.26.966l-1.848-.495L9 8l3.4 1.963 1.849-.495a.5.5 0 0 1 .259.966l-.883.237 1.12.646a.5.5 0 0 1-.5.866l-1.12-.646.236.883a.5.5 0 1 1-.966.258l-.495-1.849-3.4-1.963v3.927l1.353 1.353a.5.5 0 0 1-.707.708l-.647-.647V15.5a.5.5 0 0 1-.5.5z"},child:[]}]})(t)}const qY=({onRecipeGenerated:t,isLoading:e,setIsLoading:r})=>{const{stocks:n}=Ka(),{addToHistory:i}=Yp(),[a,o]=C.useState(""),[s,c]=C.useState("none"),[f,d]=C.useState("none"),[p,g]=C.useState(""),y=[{value:"none",label:"指定なし",icon:m.jsx($1,{size:16})},{value:"super_easy",label:"超簡単",icon:m.jsx(im,{size:16})},{value:"under_5min",label:"5分以内",icon:m.jsx(am,{size:16})},{value:"under_10min",label:"10分以内",icon:m.jsx(nm,{size:16})},{value:"no_fire",label:"火を使わない",icon:m.jsx(Nm,{size:16})}],w=[{value:"none",label:"指定なし",icon:m.jsx(ip,{size:16})},{value:"vegetarian",label:"ベジタリアン",icon:m.jsx("span",{children:"🥗"})},{value:"vegan",label:"ヴィーガン",icon:m.jsx("span",{children:"🌱"})}],_=()=>{const S=n.filter(T=>T.quantity>0).map(T=>T.name).slice(0,10).join(", ");o(S)},A=async()=>{if(!a.trim()){alert("材料を入力してください");return}r(!0);try{const S=a.split(/[,、]/).map(N=>N.trim()).filter(N=>N.length>0),T=await FY(S,f,s,p),R={id:Sl(),title:`${S.slice(0,3).join("、")}を使ったレシピ`,content:T,ingredients:S,difficulty:s,dietaryRestriction:f,customRequest:p,isFavorite:!1,createdAt:new Date().toISOString()};i(R),t(R)}catch(S){console.error("レシピ生成エラー:",S),alert("レシピの生成に失敗しました。もう一度お試しください。")}finally{r(!1)}};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(ip,{size:20}),"レシピを生成"]}),m.jsx("label",{children:"材料（カンマ区切り）"}),m.jsx("input",{value:a,onChange:S=>o(S.target.value),placeholder:"例: 鶏肉, じゃがいも, 玉ねぎ",disabled:e}),m.jsxs("button",{onClick:_,style:{background:"#10b981",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",marginBottom:"16px"},disabled:e,children:[m.jsx(Pf,{size:18,style:{marginRight:"6px"}}),"在庫の材料を使う"]}),m.jsx("label",{children:"難易度"}),m.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:y.map(S=>m.jsx("button",{onClick:()=>c(S.value),style:{padding:"8px 16px",borderRadius:"20px",border:`2px solid ${s===S.value?"var(--primary)":"var(--border)"}`,background:s===S.value?"var(--primary)":"var(--card)",color:s===S.value?"white":"var(--text)",cursor:"pointer",fontSize:"0.85rem",fontWeight:s===S.value?600:400},disabled:e,children:m.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.icon," ",S.label]})},S.value))}),m.jsx("label",{children:"食事制限"}),m.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:w.map(S=>m.jsx("button",{onClick:()=>d(S.value),style:{padding:"8px 16px",borderRadius:"20px",border:`2px solid ${f===S.value?"var(--primary)":"var(--border)"}`,background:f===S.value?"var(--primary)":"var(--card)",color:f===S.value?"white":"var(--text)",cursor:"pointer",fontSize:"0.85rem",fontWeight:f===S.value?600:400},disabled:e,children:m.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.icon," ",S.label]})},S.value))}),m.jsx("label",{children:"カスタムリクエスト（任意）"}),m.jsx("textarea",{value:p,onChange:S=>g(S.target.value),placeholder:"例: 辛めに作りたい、子供向けに優しい味で",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--text)",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"},disabled:e}),m.jsxs("button",{className:"submit",onClick:A,disabled:e,children:[m.jsx($1,{size:18,style:{marginRight:"8px"}}),"レシピを生成する"]})]})},GY=({recipe:t,onAttachToPost:e})=>{const{addToHistory:r,addToFavorites:n,removeFromFavorites:i,favoriteRecipes:a}=Yp(),{addStock:o,stocks:s,updateStock:c,deleteStock:f}=Ka(),{addItem:d}=Ql(),{addIntake:p}=Ga(),g=a.some(S=>S.id===t.id),y=()=>{g?i(t.id):(n(t),r(t))},w=()=>{confirm(`材料 ${t.ingredients.length} 個を在庫に追加しますか？
（賞味期限は7日後に設定されます）`)&&(t.ingredients.forEach(S=>{o({name:S,quantity:1,daysRemaining:7})}),alert(`${t.ingredients.length}個の材料を在庫に追加しました！`))},_=()=>{confirm(`材料 ${t.ingredients.length} 個を買い物リストに追加しますか？`)&&(t.ingredients.forEach(S=>{d({name:S,quantity:1})}),alert(`${t.ingredients.length}個の材料を買い物リストに追加しました！`))},A=()=>{const S=[],T=[];t.ingredients.forEach(D=>{const j=s.find(B=>B.name===D);j?T.push({name:D,stockId:j.id,quantity:j.quantity}):S.push(D)});let R=`このレシピを作りますか？

`;if(T.length>0&&(R+=`在庫から使用する材料（${T.length}個）:
`,T.forEach(D=>{R+=`・${D.name} (残り: ${D.quantity}個)
`})),S.length>0&&(R+=`
⚠️ 在庫にない材料（${S.length}個）:
`,S.forEach(D=>{R+=`・${D}
`}),R+=`
※在庫にない材料は減らされません`),R+=`

食事記録にも追加されます。`,!confirm(R))return;T.forEach(D=>{D.quantity>1?c(D.stockId,{quantity:D.quantity-1}):f(D.stockId)});const M=new Date().getHours();let L;M>=5&&M<10?L="breakfast":M>=10&&M<15?L="lunch":M>=15&&M<21?L="dinner":L="snack",p({name:t.title,calories:500,price:0,category:L});let O=`レシピを作りました！

`;T.length>0&&(O+=`${T.length}個の材料を在庫から減らしました
`),O+=`食事記録に追加しました（${L==="breakfast"?"朝食":L==="lunch"?"昼食":L==="dinner"?"夕食":"間食"}）`,S.length>0&&(O+=`

買い物リストに追加してください:
`,S.forEach(D=>{O+=`・${D}
`})),alert(O)};return m.jsxs("div",{className:"card",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[m.jsx("h3",{children:t.title}),m.jsx("button",{onClick:y,style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px",color:g?"#fbbf24":"var(--text-secondary)"},title:g?"お気に入りから削除":"お気に入りに追加",children:g?m.jsx(Tw,{size:28}):m.jsx(nF,{size:28})})]}),m.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[t.difficulty&&t.difficulty!=="none"&&m.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",background:"#f0fdf4",color:"#15803d",fontSize:"0.85rem",fontWeight:500},children:m.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:{super_easy:m.jsxs(m.Fragment,{children:[m.jsx(im,{size:14})," 超簡単"]}),under_5min:m.jsxs(m.Fragment,{children:[m.jsx(am,{size:14})," 5分以内"]}),under_10min:m.jsxs(m.Fragment,{children:[m.jsx(nm,{size:14})," 10分以内"]}),no_fire:m.jsxs(m.Fragment,{children:[m.jsx(Nm,{size:14})," 火を使わない"]}),none:""}[t.difficulty]})}),t.dietaryRestriction&&t.dietaryRestriction!=="none"&&m.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",background:"#fef3c7",color:"#92400e",fontSize:"0.85rem",fontWeight:500},children:{vegetarian:"🥗 ベジタリアン",vegan:"🌱 ヴィーガン",none:""}[t.dietaryRestriction]})]}),m.jsx("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"12px",marginBottom:"16px",whiteSpace:"pre-wrap",fontSize:"0.95rem",lineHeight:"1.6"},children:t.content}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px"},children:[m.jsxs("button",{onClick:A,style:{background:"#f97316",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",gridColumn:"span 2"},children:[m.jsx(ip,{size:18})," このレシピを作る"]}),m.jsxs("button",{onClick:w,style:{background:"#10b981",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[m.jsx(Pf,{size:18})," 在庫に追加"]}),m.jsxs("button",{onClick:_,style:{background:"#3b82f6",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[m.jsx(Op,{size:18})," 買い物リストへ"]}),e&&m.jsxs("button",{onClick:()=>e(t),style:{background:"var(--primary)",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",gridColumn:"span 2"},children:[m.jsx(TD,{size:18})," 投稿に添付"]})]})]})},WY=({onRecipeSelect:t})=>{const{recipeHistory:e}=Yp();if(e.length===0)return null;const r=n=>{const i=new Date(n),o=new Date().getTime()-i.getTime(),s=Math.floor(o/6e4),c=Math.floor(o/36e5),f=Math.floor(o/864e5);return s<1?"たった今":s<60?`${s}分前`:c<24?`${c}時間前`:f<7?`${f}日前`:i.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(jU,{size:20}),"レシピ履歴"]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(n=>m.jsxs("div",{onClick:()=>t(n.recipe),style:{padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s ease",background:"var(--card)"},onMouseEnter:i=>{i.currentTarget.style.background="var(--background)",i.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:i=>{i.currentTarget.style.background="var(--card)",i.currentTarget.style.transform="translateY(0)"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[m.jsx("div",{style:{fontWeight:500,fontSize:"0.95rem",flex:1},children:n.recipe.title}),m.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary, #999)",whiteSpace:"nowrap",marginLeft:"8px"},children:r(n.generatedAt)})]}),m.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary, #666)",display:"flex",gap:"4px",flexWrap:"wrap"},children:[n.recipe.ingredients&&n.recipe.ingredients.slice(0,3).map((i,a)=>m.jsxs("span",{children:[i,a<Math.min((n.recipe.ingredients?.length||0)-1,2)?"、":""]},a)),n.recipe.ingredients&&n.recipe.ingredients.length>3&&m.jsxs("span",{style:{color:"var(--text-secondary, #999)"},children:["他",n.recipe.ingredients.length-3,"個"]})]}),(n.recipe.difficulty!=="none"||n.recipe.dietaryRestriction!=="none")&&m.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"6px",flexWrap:"wrap"},children:[n.recipe.difficulty&&n.recipe.difficulty!=="none"&&m.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",background:"#f0fdf4",color:"#15803d",fontSize:"0.75rem"},children:{super_easy:m.jsx(im,{size:12}),under_5min:m.jsx(am,{size:12}),under_10min:m.jsx(nm,{size:12}),no_fire:m.jsx(Nm,{size:12}),none:""}[n.recipe.difficulty]}),n.recipe.dietaryRestriction&&n.recipe.dietaryRestriction!=="none"&&m.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",background:"#fef3c7",color:"#92400e",fontSize:"0.75rem"},children:{vegetarian:"🥗",vegan:"🌱",none:""}[n.recipe.dietaryRestriction]})]})]},n.id))})]})},KY=({onRecipeSelect:t})=>{const{favoriteRecipes:e,removeFromFavorites:r}=Yp();if(e.length===0)return null;const n=(i,a)=>{i.stopPropagation(),confirm("お気に入りから削除しますか？")&&r(a)};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Tw,{size:20,color:"#fbbf24"}),"お気に入りレシピ"]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"},children:e.map(i=>m.jsxs("div",{onClick:()=>t(i),style:{padding:"16px",borderRadius:"12px",border:"2px solid var(--border)",cursor:"pointer",transition:"all 0.2s ease",background:"var(--card)",position:"relative"},onMouseEnter:a=>{a.currentTarget.style.background="var(--background)",a.currentTarget.style.borderColor="var(--primary)",a.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:a=>{a.currentTarget.style.background="var(--card)",a.currentTarget.style.borderColor="var(--border)",a.currentTarget.style.transform="translateY(0)"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"1rem",flex:1},children:i.title}),m.jsx("button",{onClick:a=>n(a,i.id),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",padding:"0 4px",color:"#fbbf24"},title:"お気に入りから削除",children:m.jsx(Tw,{size:24})})]}),m.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)",marginBottom:"8px",display:"flex",gap:"6px",flexWrap:"wrap"},children:[m.jsx("span",{style:{fontWeight:500},children:"材料:"}),i.ingredients&&i.ingredients.slice(0,4).map((a,o)=>m.jsxs("span",{children:[a,o<Math.min((i.ingredients?.length||0)-1,3)?"、":""]},o)),i.ingredients&&i.ingredients.length>4&&m.jsxs("span",{style:{color:"var(--text-secondary, #999)"},children:["他",i.ingredients.length-4,"個"]})]}),(i.difficulty&&i.difficulty!=="none"||i.dietaryRestriction&&i.dietaryRestriction!=="none")&&m.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",flexWrap:"wrap"},children:[i.difficulty&&i.difficulty!=="none"&&m.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",background:"#f0fdf4",color:"#15803d",fontSize:"0.8rem",fontWeight:500},children:m.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:{super_easy:m.jsxs(m.Fragment,{children:[m.jsx(im,{size:14})," 超簡単"]}),under_5min:m.jsxs(m.Fragment,{children:[m.jsx(am,{size:14})," 5分以内"]}),under_10min:m.jsxs(m.Fragment,{children:[m.jsx(nm,{size:14})," 10分以内"]}),no_fire:m.jsxs(m.Fragment,{children:[m.jsx(Nm,{size:14})," 火を使わない"]}),none:""}[i.difficulty]})}),i.dietaryRestriction&&i.dietaryRestriction!=="none"&&m.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",background:"#fef3c7",color:"#92400e",fontSize:"0.8rem",fontWeight:500},children:{vegetarian:"🥗 ベジタリアン",vegan:"🌱 ヴィーガン",none:""}[i.dietaryRestriction]})]}),i.customRequest&&m.jsxs("div",{style:{marginTop:"8px",fontSize:"0.85rem",color:"var(--text-secondary, #666)",fontStyle:"italic",padding:"6px 10px",background:"var(--background)",borderRadius:"6px",display:"flex",alignItems:"flex-start",gap:"6px"},children:[m.jsx($U,{size:14,style:{marginTop:"2px",flexShrink:0}}),i.customRequest]})]},i.id))})]})},Tf=t=>{if(t<1e3)return t.toString();if(t<1e6){const r=t/1e3;return r%1===0?`${Math.floor(r)}K`:`${r.toFixed(1)}K`}const e=t/1e6;return e%1===0?`${Math.floor(e)}M`:`${e.toFixed(1)}M`},If=t=>{const e=new Date(t),n=new Date().getTime()-e.getTime(),i=Math.floor(n/1e3),a=Math.floor(i/60),o=Math.floor(a/60),s=Math.floor(o/24);if(i<60)return"今";if(a<60)return`${a}分`;if(o<24)return`${o}時間`;if(s<7)return`${s}日`;const c=e.getMonth()+1,f=e.getDate();return`${c}月${f}日`},XY=t=>{const e=new Date(t),r=e.getFullYear(),n=e.getMonth()+1;return`${r}年${n}月から利用しています`},YY=t=>{const e=/#[\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]+/g,r=t.match(e);return r?r.map(n=>n.slice(1)):[]},QY=t=>{const e=/@([a-zA-Z0-9_]+)/g,r=t.match(e);return r?[...new Set(r.map(n=>n.substring(1)))]:[]},ZY=async t=>{try{const e=ze(pe,"users"),r=await dt(e);for(const n of r.docs){const i=ke(pe,"users",n.id,"profile","data"),a=await wi(i);if(a.exists()&&a.data().username===t)return n.id}return null}catch(e){return console.error("Error getting userId from username:",e),null}},$n=t=>t?typeof t=="string"?t:t.toDate().toISOString():new Date().toISOString(),JY=async(t,e)=>{try{const r=await ya(t);if(!r)throw new Error("プロフィールが見つかりません");const n=[];if(e.images&&e.images.length>0)for(const d of e.images){const p=await SY(t,d);n.push(p)}const i=YY(e.content),a=QY(e.content),o=ke(ze(pe,"posts")),s=o.id,c={id:s,content:e.content,images:n,authorId:t,authorName:r.displayName,authorAvatar:r.avatarUrl||"",likes:0,commentCount:0,repostCount:0,replyCount:0,hashtags:i,visibility:e.visibility,createdAt:rG()};if(a.length>0&&(c.mentions=a),e.quotedPostId&&(c.quotedPostId=e.quotedPostId),e.replyToPostId&&(c.replyToPostId=e.replyToPostId,c.replyToUserId=e.replyToUserId,c.replyToUserName=e.replyToUserName),e.recipeData&&(c.recipeData=e.recipeData),await Kl(o,c),e.replyToPostId){const d=ke(pe,"posts",e.replyToPostId);await lr(d,{replyCount:bi(1)})}const f=ke(pe,"users",t,"profile","data");if(await lr(f,{"stats.postCount":bi(1)}),a.length>0)for(const d of a){const p=await ZY(d);p&&p!==t&&await Qp(p,t,r.displayName,"mention",{actorAvatar:r.avatarUrl,postId:s,postContent:e.content})}return console.log("投稿を作成しました:",s),s}catch(r){throw console.error("投稿の作成に失敗しました:",r),r}},$a=async t=>{try{const e=ke(pe,"posts",t),r=await wi(e);if(!r.exists())return null;const n=r.data();let i;if(n.quotedPostId){const a=await $a(n.quotedPostId);a&&(i=a)}return{id:r.id,content:n.content,images:n.images||[],authorId:n.authorId,authorName:n.authorName,authorAvatar:n.authorAvatar||"",likes:n.likes||0,commentCount:n.commentCount||0,repostCount:n.repostCount||0,replyCount:n.replyCount||0,hashtags:n.hashtags||[],mentions:n.mentions||[],quotedPostId:n.quotedPostId,quotedPost:i,replyToPostId:n.replyToPostId,replyToUserId:n.replyToUserId,replyToUserName:n.replyToUserName,recipeData:n.recipeData,visibility:n.visibility,isPinned:n.isPinned||!1,createdAt:$n(n.createdAt),updatedAt:n.updatedAt?$n(n.updatedAt):void 0}}catch(e){return console.error("投稿の取得に失敗しました:",e),null}},wM=async(t,e=20)=>{try{console.log(`[getUserPosts] Fetching posts for user: ${t}`);const r=ze(pe,"posts");let n;try{const a=mt(r,Or("authorId","==",t),Rr("createdAt","desc"),Ha(e));console.log("[getUserPosts] Executing query with index..."),n=await dt(a)}catch{console.warn("[getUserPosts] Index not found, using fallback query...");const o=mt(r,Or("authorId","==",t)),c=(await dt(o)).docs.sort((f,d)=>{const p=f.data().createdAt,g=d.data().createdAt;return!p||!g?0:g.seconds-p.seconds});n={docs:c.slice(0,e),empty:c.length===0,size:Math.min(c.length,e)}}console.log(`[getUserPosts] Query returned ${n.docs.length} documents`);const i=[];for(const a of n.docs){const o=a.data();let s;if(o.quotedPostId){const c=await $a(o.quotedPostId);c&&(s={...c,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,replyCount:o.replyCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:s,replyToPostId:o.replyToPostId,replyToUserId:o.replyToUserId,replyToUserName:o.replyToUserName,recipeData:o.recipeData,visibility:o.visibility,isPinned:o.isPinned||!1,createdAt:$n(o.createdAt),updatedAt:o.updatedAt?$n(o.updatedAt):void 0})}return console.log(`[getUserPosts] Successfully processed ${i.length} posts`),i}catch(r){return console.error("[getUserPosts] ユーザーの投稿取得に失敗しました:",r),[]}},eQ=async(t=20)=>{console.log("🔍 getTimelinePosts: Starting to fetch timeline posts...");try{const e=ze(pe,"posts");console.log("📁 getTimelinePosts: Creating query with visibility=public, orderBy createdAt desc");const r=mt(e,Or("visibility","==","public"),Rr("createdAt","desc"),Ha(t));console.log("⚡ getTimelinePosts: Executing query...");const n=await dt(r);console.log(`📊 getTimelinePosts: Query returned ${n.size} documents`);const i=[];for(const a of n.docs){const o=a.data();console.log(`📄 Processing post ${a.id}:`,{authorId:o.authorId,authorName:o.authorName,visibility:o.visibility,createdAt:o.createdAt});let s;if(o.quotedPostId){const c=await $a(o.quotedPostId);c&&(s={...c,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,replyCount:o.replyCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:s,replyToPostId:o.replyToPostId,replyToUserId:o.replyToUserId,replyToUserName:o.replyToUserName,recipeData:o.recipeData,visibility:o.visibility,isPinned:o.isPinned||!1,createdAt:$n(o.createdAt),updatedAt:o.updatedAt?$n(o.updatedAt):void 0})}return console.log(`✅ getTimelinePosts: Successfully processed ${i.length} posts`),i}catch(e){if(console.error("❌ getTimelinePosts: Error occurred:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e.code==="failed-precondition"&&e.message?.includes("index")){console.warn("⚠️ Firestoreインデックスが未作成です。フォールバッククエリを使用します。"),console.warn("インデックス作成URL:",e.message);try{console.log("🔄 getTimelinePosts: Trying fallback query (orderBy createdAt only)...");const r=ze(pe,"posts"),n=mt(r,Rr("createdAt","desc"),Ha(t*3)),i=await dt(n);console.log(`📊 Fallback query returned ${i.size} documents`);const a=[];for(const s of i.docs){const c=s.data();let f;if(c.quotedPostId){const d=await $a(c.quotedPostId);d&&(f={...d,quotedPost:void 0})}a.push({id:s.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,hashtags:c.hashtags||[],mentions:c.mentions||[],quotedPostId:c.quotedPostId,quotedPost:f,recipeData:c.recipeData,visibility:c.visibility,createdAt:$n(c.createdAt),updatedAt:c.updatedAt?$n(c.updatedAt):void 0})}const o=a.filter(s=>s.visibility==="public").slice(0,t);return console.log(`✅ Fallback: Filtered to ${o.length} public posts`),o}catch(r){return console.error("❌ フォールバッククエリもエラー:",r),console.error("Fallback error code:",r.code),console.error("Fallback error message:",r.message),[]}}return console.error("❌ タイムラインの取得に失敗しました（詳細）:",e),[]}},tQ=async(t,e)=>{try{const r=await $a(t);if(!r)throw new Error("投稿が見つかりません");if(r.authorId!==e)throw new Error("自分の投稿のみ削除できます");if(r.replyToPostId){const a=ke(pe,"posts",r.replyToPostId);await lr(a,{replyCount:bi(-1)})}const n=ke(pe,"posts",t);await Vi(n);const i=ke(pe,"users",e,"profile","data");await lr(i,{"stats.postCount":bi(-1)}),console.log("投稿を削除しました:",t)}catch(r){throw console.error("投稿の削除に失敗しました:",r),r}},_M=async(t,e,r,n)=>{try{const i=ke(ze(pe,`posts/${t}/likes`)),o={id:i.id,postId:t,userId:e,userName:r,createdAt:new Date().toISOString()};n&&(o.userAvatar=n),await Kl(i,o);const s=ke(pe,"posts",t);await lr(s,{likes:bi(1)});const c=await wi(s);if(c.exists()){const f=c.data();await Qp(f.authorId,e,r,"like",{actorAvatar:n,postId:t,postContent:f.content})}console.log("いいねを追加しました")}catch(i){throw console.error("いいねの追加に失敗しました:",i),i}},AM=async(t,e)=>{try{const r=ze(pe,`posts/${t}/likes`),n=mt(r,Or("userId","==",e)),i=await dt(n);for(const o of i.docs)await Vi(o.ref);const a=ke(pe,"posts",t);await lr(a,{likes:bi(-1)}),console.log("いいねを削除しました")}catch(r){throw console.error("いいねの削除に失敗しました:",r),r}},EM=async(t,e)=>{try{const r=ze(pe,`posts/${t}/likes`),n=mt(r,Or("userId","==",e));return!(await dt(n)).empty}catch(r){return console.error("いいね確認に失敗しました:",r),!1}},rQ=async(t,e,r,n,i)=>{try{const a=ke(ze(pe,`posts/${t}/comments`)),s={id:a.id,postId:t,userId:e,userName:r,content:n,createdAt:new Date().toISOString()};i&&(s.userAvatar=i),await Kl(a,s);const c=ke(pe,"posts",t);await lr(c,{commentCount:bi(1)});const f=await wi(c);if(f.exists()){const d=f.data();await Qp(d.authorId,e,r,"comment",{actorAvatar:i,postId:t,postContent:d.content,commentContent:n})}console.log("コメントを追加しました")}catch(a){throw console.error("コメントの追加に失敗しました:",a),a}},nQ=async(t,e,r)=>{try{const n=ke(pe,`posts/${t}/comments/${e}`),i=await wi(n);if(!i.exists())throw new Error("コメントが見つかりません");if(i.data().userId!==r)throw new Error("自分のコメントのみ削除できます");await Vi(n);const a=ke(pe,"posts",t);await lr(a,{commentCount:bi(-1)}),console.log("コメントを削除しました")}catch(n){throw console.error("コメントの削除に失敗しました:",n),n}},U2=async t=>{try{const e=ze(pe,`posts/${t}/comments`),r=mt(e,Rr("createdAt","asc")),n=await dt(r),i=[];return n.forEach(a=>{const o=a.data();i.push({id:a.id,postId:t,userId:o.userId,userName:o.userName,userAvatar:o.userAvatar,content:o.content,createdAt:o.createdAt,updatedAt:o.updatedAt})}),i}catch(e){return console.error("コメント一覧の取得に失敗しました:",e),[]}},iQ=async(t,e)=>{try{const r=ke(pe,`users/${e}/bookmarks/${t}`),n={id:t,postId:t,userId:e,createdAt:new Date().toISOString()};await Kl(r,n),console.log("ブックマークを追加しました")}catch(r){throw console.error("ブックマークの追加に失敗しました:",r),r}},aQ=async(t,e)=>{try{const r=ke(pe,`users/${e}/bookmarks/${t}`);await Vi(r),console.log("ブックマークを削除しました")}catch(r){throw console.error("ブックマークの削除に失敗しました:",r),r}},oQ=async(t,e)=>{try{const r=ke(pe,`users/${e}/bookmarks/${t}`);return(await wi(r)).exists()}catch(r){return console.error("ブックマーク確認に失敗しました:",r),!1}},sQ=async(t,e,r,n)=>{try{const i=ke(ze(pe,`posts/${t}/reposts`)),o={id:i.id,postId:t,userId:e,userName:r,createdAt:new Date().toISOString()};n&&(o.userAvatar=n),await Kl(i,o);const s=ke(pe,"posts",t);await lr(s,{repostCount:bi(1)});const c=await wi(s);if(c.exists()){const f=c.data();await Qp(f.authorId,e,r,"repost",{actorAvatar:n,postId:t,postContent:f.content})}console.log("リポストを追加しました")}catch(i){throw console.error("リポストの追加に失敗しました:",i),i}},lQ=async(t,e)=>{try{const r=ze(pe,`posts/${t}/reposts`),n=mt(r,Or("userId","==",e)),i=await dt(n);for(const o of i.docs)await Vi(o.ref);const a=ke(pe,"posts",t);await lr(a,{repostCount:bi(-1)}),console.log("リポストを削除しました")}catch(r){throw console.error("リポストの削除に失敗しました:",r),r}},cQ=async(t,e)=>{try{const r=ze(pe,`posts/${t}/reposts`),n=mt(r,Or("userId","==",e));return!(await dt(n)).empty}catch(r){return console.error("リポスト確認に失敗しました:",r),!1}},uQ=async(t,e=20)=>{try{console.log(`[getFollowingPosts] Fetching following posts for user: ${t}`);const r=await xM(t);if(console.log(`[getFollowingPosts] Found ${r.length} following users`),r.length===0)return[];const n=r.map(s=>s.uid),i=ze(pe,"posts"),a=[];for(let s=0;s<n.length;s+=10){const c=n.slice(s,s+10),f=mt(i,Or("authorId","in",c),Or("visibility","in",["public","followers"])),d=await dt(f);for(const p of d.docs){const g=p.data();let y;if(g.quotedPostId){const w=await $a(g.quotedPostId);w&&(y={...w,quotedPost:void 0})}a.push({id:p.id,content:g.content,images:g.images||[],authorId:g.authorId,authorName:g.authorName,authorAvatar:g.authorAvatar||"",likes:g.likes||0,commentCount:g.commentCount||0,repostCount:g.repostCount||0,replyCount:g.replyCount||0,hashtags:g.hashtags||[],mentions:g.mentions||[],quotedPostId:g.quotedPostId,quotedPost:y,replyToPostId:g.replyToPostId,replyToUserId:g.replyToUserId,replyToUserName:g.replyToUserName,recipeData:g.recipeData,visibility:g.visibility,isPinned:g.isPinned||!1,createdAt:$n(g.createdAt),updatedAt:g.updatedAt?$n(g.updatedAt):void 0})}}a.sort((s,c)=>new Date(c.createdAt).getTime()-new Date(s.createdAt).getTime());const o=a.slice(0,e);return console.log(`[getFollowingPosts] Returning ${o.length} posts`),o}catch(r){return console.error("[getFollowingPosts] フォロー中の投稿取得に失敗しました:",r),[]}},fQ=async(t,e=20)=>{try{console.log(`[getUserMediaPosts] Fetching media posts for user: ${t}`);const n=(await wM(t,100)).filter(i=>i.images&&i.images.length>0);return console.log(`[getUserMediaPosts] Found ${n.length} media posts`),n.slice(0,e)}catch(r){return console.error("[getUserMediaPosts] メディア投稿の取得に失敗しました:",r),[]}},dQ=async(t,e=20)=>{try{console.log(`[getUserLikedPosts] Fetching liked posts for user: ${t}`);const r=ze(pe,"posts"),n=await dt(r),i=[];for(const a of n.docs){const o=a.data(),s=ze(pe,`posts/${a.id}/likes`),c=await dt(s);let f=!1;for(const d of c.docs)if(d.data().userId===t){f=!0;break}if(f){let d;if(o.quotedPostId){const p=await $a(o.quotedPostId);p&&(d={...p,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,replyCount:o.replyCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:d,replyToPostId:o.replyToPostId,replyToUserId:o.replyToUserId,replyToUserName:o.replyToUserName,recipeData:o.recipeData,visibility:o.visibility,isPinned:o.isPinned||!1,createdAt:$n(o.createdAt),updatedAt:o.updatedAt?$n(o.updatedAt):void 0})}if(i.length>=e)break}return i.sort((a,o)=>new Date(o.createdAt).getTime()-new Date(a.createdAt).getTime()),console.log(`[getUserLikedPosts] Found ${i.length} liked posts`),i.slice(0,e)}catch(r){return console.error("[getUserLikedPosts] いいねした投稿の取得に失敗しました:",r),[]}},hQ=async(t,e)=>{try{console.log(`[pinPost] Pinning post ${e} for user ${t}`);const r=await $a(e);if(!r)throw new Error("投稿が見つかりません");if(r.authorId!==t)throw new Error("自分の投稿のみピン留めできます");const n=ke(pe,`users/${t}/profile/data`),i=await wi(n);if(i.exists()){const s=i.data().pinnedPostId;if(s){const c=ke(pe,"posts",s);await lr(c,{isPinned:!1})}}await lr(n,{pinnedPostId:e});const a=ke(pe,"posts",e);await lr(a,{isPinned:!0}),console.log(`✅ [pinPost] Post ${e} pinned successfully`)}catch(r){throw console.error("❌ [pinPost] Error:",r),new Error(`ピン留めに失敗しました: ${r.message||"不明なエラー"}`)}},pQ=async(t,e)=>{try{console.log(`[unpinPost] Unpinning post ${e} for user ${t}`);const r=ke(pe,`users/${t}/profile/data`);await lr(r,{pinnedPostId:null});const n=ke(pe,"posts",e);await lr(n,{isPinned:!1}),console.log(`✅ [unpinPost] Post ${e} unpinned successfully`)}catch(r){throw console.error("❌ [unpinPost] Error:",r),new Error(`ピン留め解除に失敗しました: ${r.message||"不明なエラー"}`)}},gQ=async(t,e=20)=>{try{console.log(`[getUserReplies] Fetching replies for user: ${t}`);const r=ze(pe,"posts"),n=mt(r,Or("authorId","==",t),Or("replyToPostId","!=",null),Rr("replyToPostId"),Rr("createdAt","desc"),Ha(e)),i=await dt(n),a=[];for(const o of i.docs){const s=o.data(),c={id:o.id,content:s.content,images:s.images||[],authorId:s.authorId,authorName:s.authorName,authorAvatar:s.authorAvatar||"",likes:s.likes||0,commentCount:s.commentCount||0,repostCount:s.repostCount||0,replyCount:s.replyCount||0,hashtags:s.hashtags||[],mentions:s.mentions||[],quotedPostId:s.quotedPostId,replyToPostId:s.replyToPostId,replyToUserId:s.replyToUserId,replyToUserName:s.replyToUserName,recipeData:s.recipeData,visibility:s.visibility,isPinned:s.isPinned||!1,createdAt:$n(s.createdAt),updatedAt:s.updatedAt?$n(s.updatedAt):void 0};a.push(c)}return console.log(`[getUserReplies] Found ${a.length} replies`),a}catch(r){console.error("[getUserReplies] Error:",r);try{const n=ze(pe,"posts"),i=mt(n,Or("authorId","==",t),Rr("createdAt","desc"),Ha(e)),a=await dt(i),o=[];for(const s of a.docs){const c=s.data();if(c.replyToPostId){const f={id:s.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,replyCount:c.replyCount||0,hashtags:c.hashtags||[],mentions:c.mentions||[],quotedPostId:c.quotedPostId,replyToPostId:c.replyToPostId,replyToUserId:c.replyToUserId,replyToUserName:c.replyToUserName,recipeData:c.recipeData,visibility:c.visibility,isPinned:c.isPinned||!1,createdAt:$n(c.createdAt),updatedAt:c.updatedAt?$n(c.updatedAt):void 0};o.push(f)}}return console.log(`[getUserReplies] Fallback: Found ${o.length} replies`),o.slice(0,e)}catch(n){return console.error("[getUserReplies] Fallback also failed:",n),[]}}},fl=280,i1=4,SM=({onClose:t,onPostCreated:e,quotedPostId:r,recipeData:n})=>{const{user:i}=Xa(),[a,o]=C.useState(""),[s,c]=C.useState([]),[f,d]=C.useState([]),[p,g]=C.useState("public"),[y,w]=C.useState(!1),[_,A]=C.useState(""),[S,T]=C.useState(null);C.useEffect(()=>{(async()=>{if(r){const D=await $a(r);T(D)}})()},[r]);const R=O=>{const D=Array.from(O.target.files||[]);if(D.length===0)return;if(s.length+D.length>i1){A(`画像は最大${i1}枚まで添付できます`);return}const j=[];D.forEach(B=>{const z=new FileReader;z.onloadend=()=>{j.push(z.result),j.length===D.length&&d([...f,...j])},z.readAsDataURL(B)}),c([...s,...D]),A("")},N=O=>{c(s.filter((D,j)=>j!==O)),d(f.filter((D,j)=>j!==O))},M=async()=>{if(!i){A("ログインしてください");return}if(!a.trim()){A("投稿内容を入力してください");return}if(a.length>fl){A(`投稿は${fl}文字以内で入力してください`);return}w(!0),A("");try{console.log("📝 Checking user profile before posting...");let O=await ya(i.uid);if(!O){console.log("⚠️ プロフィールが存在しません。自動作成します...");try{await IE(i.uid,i.email||"",i.displayName||`User${i.uid.slice(0,8)}`),console.log("✅ プロフィールを作成しました"),O=await ya(i.uid)}catch(j){console.error("❌ プロフィール作成に失敗しました:",j),A("プロフィール作成に失敗しました。設定画面からプロフィールを作成してください。"),w(!1);return}}const D={content:a.trim(),images:s,visibility:p,quotedPostId:r,recipeData:n};await JY(i.uid,D),alert("投稿しました！"),e(),t()}catch(O){console.error("投稿の作成に失敗しました:",O),A("投稿の作成に失敗しました。もう一度お試しください。")}finally{w(!1)}},L=[{value:"public",label:"全体公開",icon:CD,description:"誰でも見られます"},{value:"followers",label:"フォロワー",icon:AD,description:"フォロワーのみ"},{value:"private",label:"非公開",icon:El,description:"自分のみ"}];return m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"16px"},onClick:t,children:m.jsxs("div",{style:{background:"var(--card)",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},onClick:O=>O.stopPropagation(),children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid var(--border)"},children:[m.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text)",margin:0},children:"投稿を作成"}),m.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:O=>{O.currentTarget.style.background="var(--border)"},onMouseLeave:O=>{O.currentTarget.style.background="none"},children:m.jsx(ru,{size:24})})]}),m.jsxs("div",{style:{padding:"20px"},children:[m.jsx("textarea",{value:a,onChange:O=>o(O.target.value),placeholder:"今何してる？",style:{width:"100%",minHeight:"120px",padding:"12px",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"16px",color:"var(--text)",background:"var(--background)",resize:"vertical",fontFamily:"inherit",marginBottom:"12px"}}),S&&m.jsxs("div",{style:{padding:"12px",background:"var(--background)",border:"1px solid var(--border)",borderRadius:"12px",marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"引用元:"}),m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:S.authorName}),m.jsxs("div",{style:{fontSize:"14px",color:"var(--text)",marginTop:"4px"},children:[S.content.substring(0,100),S.content.length>100?"...":""]})]}),n&&m.jsxs("div",{style:{padding:"12px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",border:"2px solid var(--primary)",borderRadius:"12px",marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"添付レシピ:"}),m.jsxs("div",{style:{fontWeight:700,fontSize:"16px",color:"var(--text)"},children:["👨‍🍳 ",n.title]}),m.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginTop:"4px"},children:n.description})]}),m.jsxs("div",{style:{textAlign:"right",fontSize:"14px",color:a.length>fl?"#f44336":"var(--text-secondary)",marginBottom:"16px"},children:[a.length," / ",fl]}),f.length>0&&m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:f.map((O,D)=>m.jsxs("div",{style:{position:"relative",paddingBottom:"100%",borderRadius:"12px",overflow:"hidden",background:"var(--border)"},children:[m.jsx("img",{src:O,alt:`プレビュー ${D+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}),m.jsx("button",{onClick:()=>N(D),style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0, 0, 0, 0.6)",border:"none",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:m.jsx(ru,{size:18})})]},D))}),s.length<i1&&m.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--background)",border:"2px solid var(--border)",borderRadius:"12px",cursor:"pointer",color:"var(--primary)",fontSize:"14px",fontWeight:500,marginBottom:"16px",transition:"background 0.2s"},onMouseEnter:O=>{O.currentTarget.style.background="var(--border)"},onMouseLeave:O=>{O.currentTarget.style.background="var(--background)"},children:[m.jsx(ZU,{size:20}),"画像を追加 (",s.length,"/",i1,")",m.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:R,style:{display:"none"}})]}),m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("label",{style:{display:"block",fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px",fontWeight:500},children:"公開範囲"}),m.jsx("select",{value:p,onChange:O=>g(O.target.value),style:{width:"100%",padding:"12px",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"15px",color:"var(--text)",background:"var(--background)",cursor:"pointer"},children:L.map(O=>m.jsxs("option",{value:O.value,children:[O.label," - ",O.description]},O.value))})]}),_&&m.jsx("div",{style:{padding:"12px",background:"#ffebee",color:"#c62828",borderRadius:"8px",fontSize:"14px",marginBottom:"16px"},children:_}),m.jsx("button",{onClick:M,disabled:y||!a.trim()||a.length>fl,style:{width:"100%",padding:"14px",background:y||!a.trim()||a.length>fl?"var(--border)":"linear-gradient(135deg, var(--primary), #81c784)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:600,cursor:y||!a.trim()||a.length>fl?"not-allowed":"pointer",transition:"transform 0.2s"},onMouseEnter:O=>{!y&&a.trim()&&a.length<=fl&&(O.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:O=>{O.currentTarget.style.transform="translateY(0)"},children:y?"投稿中...":"投稿する"})]})]})})},vQ=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!1),[i,a]=C.useState(!1),[o,s]=C.useState(null),c=p=>{let g="easy";p.difficulty==="super_easy"||p.difficulty==="under_5min"?g="easy":p.difficulty==="under_10min"?g="medium":p.difficulty==="no_fire"&&(g="easy");const y={title:p.title,description:p.content.substring(0,100),ingredients:p.ingredients,instructions:p.content.split(`

`).slice(1),difficulty:g,servings:2,preparationTime:15,cookingTime:30};s(y),a(!0)},f=()=>{a(!1),s(null)},d=()=>{a(!1),s(null),alert("レシピを投稿しました！")};return m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"AIレシピ生成"}),m.jsx(qY,{onRecipeGenerated:e,isLoading:r,setIsLoading:n}),r&&m.jsxs("div",{className:"card",style:{textAlign:"center",padding:"32px"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",color:"var(--primary)"},children:m.jsx(ip,{size:48})}),m.jsx("div",{style:{fontWeight:600,marginBottom:"8px"},children:"レシピを生成中..."}),m.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)"},children:"AIがレシピを考えています"})]}),t&&!r&&m.jsx(GY,{recipe:t,onAttachToPost:c}),m.jsx(WY,{onRecipeSelect:e}),m.jsx(KY,{onRecipeSelect:e}),i&&m.jsx(SM,{onClose:f,onPostCreated:d,recipeData:o||void 0})]})};function mQ(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function yQ(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var xQ=(function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bQ=(function(t){xQ(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),mQ(a,i.prototype),yQ(a),a}return e})(Error),wQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_i=(function(t){wQ(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e})(bQ),_Q=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ma=(function(t){_Q(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(_i),AQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Be=(function(t){AQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(_i),EQ=(function(){function t(e){if(this.binarizer=e,e===null)throw new Be("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var a=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),SQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pn=(function(t){SQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(_i),CQ=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),Yt=(function(){function t(){}return t.arraycopy=function(e,r,n,i,a){for(;a--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t})(),TQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),kE=(function(t){TQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(_i),IQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),w6=(function(t){IQ(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(kE),OQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},en=(function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new Be("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new w6(r);if(n>e)throw new w6(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var a=OQ(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,a=new Int32Array(i);return Yt.arraycopy(e,r,a,0,i),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=n(r,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},t.numberComparator=function(e,r){return e-r},t})(),et=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),gn=(function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Yt.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=n[i]}var s=i*32+et.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=~n[i]}var s=i*32+et.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Be;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),a=this.bits,o=n;o<=i;o++){var s=o>n?0:e&31,c=o<i?31:r&31,f=(2<<c)-(1<<s);a[o]|=f}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Be;if(r===e)return!0;r--;for(var i=Math.floor(e/32),a=Math.floor(r/32),o=this.bits,s=i;s<=a;s++){var c=s>i?0:e&31,f=s<a?31:r&31,d=(2<<f)-(1<<c)&4294967295;if((o[s]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Be("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Be("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;r[n+a]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,a=0;a<n;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-a]=o}if(this.size!==n*32){for(var s=n*32-this.size,c=e[0]>>>s,a=1;a<n;a++){var f=e[a];c|=f<<32-s,e[a-1]=c,c=f>>>s}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&en.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+en.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t})(),n_;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(n_||(n_={}));const or=n_;var RQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xe=(function(t){RQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(_i),PQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(kt||(kt={}));var Jr=(function(){function t(e,r,n){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var p=c[f];t.VALUES_TO_ECI.set(p,this)}try{for(var g=PQ(o),y=g.next();!y.done;y=g.next()){var w=y.value;t.NAME_TO_ECI.set(w,this)}}catch(_){i={error:_}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new xe("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new xe("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new xe("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(kt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(kt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(kt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(kt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(kt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(kt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(kt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(kt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(kt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(kt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(kt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(kt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(kt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(kt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(kt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(kt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(kt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(kt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(kt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(kt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(kt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(kt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(kt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(kt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(kt.Big5,28,"Big5"),t.GB18030=new t(kt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(kt.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),DQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),L1=(function(t){DQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(_i),va=(function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Jr?e:Jr.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(Jr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new L1("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Jr.UTF8)||e.equals(Jr.ISO8859_1)||e.equals(Jr.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},t})(),pt=(function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return va.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(or.CHARACTER_SET)!==void 0)return r.get(or.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,o=!0,s=0,c=0,f=0,d=0,p=0,g=0,y=0,w=0,_=0,A=0,S=0,T=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,R=0;R<n&&(i||a||o);R++){var N=e[R]&255;o&&(s>0?(N&128)===0?o=!1:s--:(N&128)!==0&&((N&64)===0?o=!1:(s++,(N&32)===0?c++:(s++,(N&16)===0?f++:(s++,(N&8)===0?d++:o=!1))))),i&&(N>127&&N<160?i=!1:N>159&&(N<192||N===215||N===247)&&S++),a&&(p>0?N<64||N===127||N>252?a=!1:p--:N===128||N===160||N>239?a=!1:N>160&&N<224?(g++,w=0,y++,y>_&&(_=y)):N>127?(p++,y=0,w++,w>A&&(A=w)):(y=0,w=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(T||c+f+d>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||_>=3||A>=3)?t.SHIFT_JIS:i&&a?_===2&&g===2||S*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function a(s,c,f,d,p,g){if(s==="%%")return"%";if(r[++i]!==void 0){s=d?parseInt(d.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,w;switch(g){case"s":w=r[i];break;case"c":w=r[i][0];break;case"f":w=parseFloat(r[i]).toFixed(s);break;case"p":w=parseFloat(r[i]).toPrecision(s);break;case"e":w=parseFloat(r[i]).toExponential(s);break;case"x":w=parseInt(r[i]).toString(y||16);break;case"d":w=parseFloat(parseInt(r[i],y||10).toPrecision(s)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(y);for(var _=parseInt(f),A=f&&f[0]+""=="0"?"0":" ";w.length<_;)w=c!==void 0?w+A:A+w;return w}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},t.getBytes=function(e,r){return va.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Jr.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Jr.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Jr.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),Ze=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=pt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t})(),Po=(function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new Be("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),a=0;a<r;a++)for(var o=e[a],s=0;s<n;s++)o[s]&&i.set(s,a);return i},t.parseFromString=function(e,r,n){if(e===null)throw new Be("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Be("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!0,a++;else if(e.substring(f,f+n.length)===n)f+=n.length,i[a]=!1,a++;else throw new Be("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Be("row lengths do not match");c++}for(var d=new t(s,c),p=0;p<a;p++)i[p]&&d.set(Math.floor(p%s),Math.floor(p/s));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Be("input matrix dimensions do not match");for(var r=new gn(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*n,c=e.getRow(a,r).getBitArray(),f=0;f<n;f++)i[s+f]^=c[f]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new Be("Left and top must be nonnegative");if(i<1||n<1)throw new Be("Height and width must be at least 1");var a=e+n,o=r+i;if(o>this.height||a>this.width)throw new Be("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=r;f<o;f++)for(var d=f*s,p=e;p<a;p++)c[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new gn(this.width):r.clear();for(var n=this.rowSize,i=this.bits,a=e*n,o=0;o<n;o++)r.setBulk(o*32,i[a+o]);return r},t.prototype.setRow=function(e,r){Yt.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new gn(e),i=new gn(e),a=0,o=Math.floor((r+1)/2);a<o;a++)n=this.getRow(a,n),i=this.getRow(r-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,a=e,o=r,s=-1,c=-1,f=0;f<r;f++)for(var d=0;d<n;d++){var p=i[f*n+d];if(p!==0){if(f<o&&(o=f),f>c&&(c=f),d*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;d*32+g<a&&(a=d*32+g)}if(d*32+31>s){for(var g=31;!(p>>>g);)g--;d*32+g>s&&(s=d*32+g)}}}return s<a||c<o?null:Int32Array.from([a,o,s-a+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,a=n%e*32,o=r[n],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,o=r[n],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&en.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+en.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new Ze,a=0,o=this.height;a<o;a++){for(var s=0,c=this.width;s<c;s++)i.append(this.get(s,a)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),NQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),se=(function(t){NQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(_i),kQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),MQ=(function(t){kQ(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new gn(a):n.clear(),this.initArrays(a);for(var o=i.getRow(r,this.luminances),s=this.buckets,c=0;c<a;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&n.set(c);else for(var d=o[0]&255,p=o[1]&255,c=1;c<a-1;c++){var g=o[c+1]&255;(p*4-d-g)/2<f&&n.set(c),d=p,p=g}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),a=new Po(n,i);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(i*s/5),f=r.getRow(c,this.luminances),d=Math.floor(n*4/5),p=Math.floor(n/5);p<d;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(o),w=r.getMatrix(),s=0;s<i;s++)for(var _=s*n,p=0;p<n;p++){var g=w[_+p]&255;g<y&&a.set(p,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,a=0,o=0,s=0;s<n;s++)r[s]>o&&(a=s,o=r[s]),r[s]>i&&(i=r[s]);for(var c=0,f=0,s=0;s<n;s++){var d=s-a,p=r[s]*d*d;p>f&&(c=s,f=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=n/16)throw new se;for(var y=c-1,w=-1,s=c-1;s>a;s--){var _=s-a,p=_*_*(c-s)*(i-r[s]);p>w&&(y=s,w=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(CQ),jQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),LQ=(function(t){jQ(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var c=e.calculateBlackPoints(a,o,s,n,i),f=new Po(n,i);e.calculateThresholdForBlock(a,o,s,n,i,c,f),this.matrix=f}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,a,o,s,c){for(var f=o-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var y=e.cap(p,2,i-3),w=0;w<n;w++){var _=w<<e.BLOCK_SIZE_POWER;_>d&&(_=d);for(var A=e.cap(w,2,n-3),S=0,T=-2;T<=2;T++){var R=s[y+T];S+=R[A-2]+R[A-1]+R[A]+R[A+1]+R[A+2]}var N=S/25;e.thresholdBlock(r,_,g,N,a,c)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,a,o,s){for(var c=0,f=i*o+n;c<e.BLOCK_SIZE;c++,f+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[f+d]&255)<=a&&s.set(n+d,i+c)},e.calculateBlackPoints=function(r,n,i,a,o){for(var s=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(n);var p=d<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<n;g++){var y=g<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var w=0,_=255,A=0,S=0,T=p*a+y;S<e.BLOCK_SIZE;S++,T+=a){for(var R=0;R<e.BLOCK_SIZE;R++){var N=r[T+R]&255;w+=N,N<_&&(_=N),N>A&&(A=N)}if(A-_>e.MIN_DYNAMIC_RANGE)for(S++,T+=a;S<e.BLOCK_SIZE;S++,T+=a)for(var R=0;R<e.BLOCK_SIZE;R++)w+=r[T+R]&255}var M=w>>e.BLOCK_SIZE_POWER*2;if(A-_<=e.MIN_DYNAMIC_RANGE&&(M=_/2,d>0&&g>0)){var L=(f[d-1][g]+2*f[d][g-1]+f[d-1][g-1])/4;_<L&&(M=L)}f[d][g]=M}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(MQ),km=(function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new L1("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new L1("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new L1("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Ze,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t})(),BQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ME=(function(t){BQ(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(r[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,a){return new e(this.delegate.crop(r,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(km),zQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),UQ=(function(t){zQ(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,c=0,f=r.length;s<f;s+=4,c++){var d=void 0,p=r[s+3];if(p===0)d=255;else{var g=r[s],y=r[s+1],w=r[s+2];d=306*g+601*y+117*w+512>>10}o[c]=d}else for(var s=0,c=0,_=r.length;s<_;s+=4,c++){var d=void 0,p=r[s+3];if(p===0)d=255;else{var g=r[s],y=r[s+1],w=r[s+2];d=306*g+601*y+117*w+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Be("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return n.width=c,n.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new ME(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(km),FQ=(function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Zn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(d){try{f(n.next(d))}catch(p){o(p)}}function c(d){try{f(n.throw(d))}catch(p){o(p)}}function f(d){d.done?a(d.value):i(d.value).then(s,c)}f((n=n.apply(t,e||[])).next())})},Jn=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(d){return c([f,d])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(d){f=[6,d],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},VQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},od=(function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Zn(this,void 0,void 0,function(){var e,r,n,i,a,o,s,c,f,d,p,g;return Jn(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),r=[];try{for(n=VQ(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device "+(r.length+1),f=a.groupId,d={deviceId:s,label:c,kind:o,groupId:f},r.push(d))}catch(w){p={error:w}}finally{try{i&&!i.done&&(g=n.return)&&g.call(n)}finally{if(p)throw p.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Zn(this,void 0,void 0,function(){var e;return Jn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new FQ(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Zn(this,void 0,void 0,function(){var r;return Jn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Zn(this,void 0,void 0,function(){return Jn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Zn(this,void 0,void 0,function(){var n,i;return Jn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Zn(this,void 0,void 0,function(){var n;return Jn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Zn(this,void 0,void 0,function(){var n,i;return Jn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Zn(this,void 0,void 0,function(){return Jn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Zn(this,void 0,void 0,function(){var i,a;return Jn(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Zn(this,void 0,void 0,function(){var i;return Jn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Zn(this,void 0,void 0,function(){var i;return Jn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Zn(this,void 0,void 0,function(){var n;return Jn(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ma("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ma("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ma("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ma("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ma("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ma("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ma("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ma("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Zn(this,void 0,void 0,function(){return Jn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new se("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(g){var f=r&&g instanceof se,d=g instanceof pn||g instanceof xe,p=d&&n;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof pn||c instanceof xe,s=c instanceof se;(o||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new UQ(n,r),a=new LQ(i);return new EQ(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),Wn=(function(){function t(e,r,n,i,a,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=Yt.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Yt.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Yt.arraycopy(r,0,n,0,r.length),Yt.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),i_;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(i_||(i_={}));const Le=i_;var a_;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(a_||(a_={}));const Dn=a_;var Mm=(function(){function t(e,r,n,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),Fh=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t})(),Rl=(function(){function t(e,r){if(r.length===0)throw new Be;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Yt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,a=r.length;i!==a;i++){var o=r[i];n=Fh.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,c=this.field,i=1;i<s;i++)n=Fh.addOrSubtract(c.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;Yt.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=Fh.addOrSubtract(r[s-o],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=this.field,c=0;c<n;c++)for(var f=r[c],d=0;d<a;d++)o[c+d]=Fh.addOrSubtract(o[c+d],s.multiply(f,i[d]));return new t(s,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),a=this.coefficients,o=0;o<r;o++)i[o]=n.multiply(a[o],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Be;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(n[s],r);return new t(o,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Be("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Be("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=r.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),c=r.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,c),d=r.buildMonomial(s,c);n=n.addOrSubtract(d),i=i.addOrSubtract(f)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t})(),HQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),CM=(function(t){HQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(_i),$Q=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yi=(function(t){$Q(e,t);function e(r,n,i){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=i;for(var o=new Int32Array(n),s=1,c=0;c<n;c++)o[c]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=o;for(var f=new Int32Array(n),c=0;c<n-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new Rl(a,Int32Array.from([0])),a.one=new Rl(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Be;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Rl(this,i)},e.prototype.inverse=function(r){if(r===0)throw new CM;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+et.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Fh),qQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),a1=(function(t){qQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(_i),GQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Zp=(function(t){GQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(_i),jm=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new Rl(n,e),a=new Int32Array(r),o=!0,s=0;s<r;s++){var c=i.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new Rl(n,a),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),f,r),p=d[0],g=d[1],y=this.findErrorLocations(p),w=this.findErrorMagnitudes(g,y),s=0;s<y.length;s++){var _=e.length-1-n.log(y[s]);if(_<0)throw new a1("Bad error location");e[_]=yi.addOrSubtract(e[_],w[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=this.field,o=e,s=r,c=a.getZero(),f=a.getOne();s.getDegree()>=(n/2|0);){var d=o,p=c;if(o=s,c=f,o.isZero())throw new a1("r_{i-1} was zero");s=d;for(var g=a.getZero(),y=o.getCoefficient(o.getDegree()),w=a.inverse(y);s.getDegree()>=o.getDegree()&&!s.isZero();){var _=s.getDegree()-o.getDegree(),A=a.multiply(s.getCoefficient(s.getDegree()),w);g=g.addOrSubtract(a.buildMonomial(_,A)),s=s.addOrSubtract(o.multiplyByMonomial(_,A))}if(f=g.multiply(c).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new Zp("Division algorithm failed to reduce polynomial?")}var S=f.getCoefficient(0);if(S===0)throw new a1("sigmaTilde(0) was zero");var T=a.inverse(S),R=f.multiplyScalar(T),N=s.multiplyScalar(T);return[R,N]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,a=this.field,o=1;o<a.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=a.inverse(o),i++);if(i!==r)throw new a1("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),a=this.field,o=0;o<n;o++){for(var s=a.inverse(r[o]),c=1,f=0;f<n;f++)if(o!==f){var d=a.multiply(r[f],s),p=(d&1)===0?d|1:d&-2;c=a.multiply(c,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},t})(),Cn;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Cn||(Cn={}));var _6=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),a=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),s=new Mm(a,o,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Cn.UPPER,i=Cn.UPPER,a="",o=0;o<r;)if(i===Cn.BINARY){if(r-o<5)break;var s=t.readCode(e,o,5);if(o+=5,s===0){if(r-o<11)break;s=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(r-o<8){o=r;break}var f=t.readCode(e,o,8);a+=pt.castAsNonUtf8Char(f),o+=8}i=n}else{var d=i===Cn.DIGIT?4:5;if(r-o<d)break;var f=t.readCode(e,o,d);o+=d;var p=t.getCharacter(i,f);p.startsWith("CTRL_")?(n=i,i=t.getTable(p.charAt(5)),p.charAt(6)==="L"&&(n=i)):(a+=p,i=n)}return a},t.getTable=function(e){switch(e){case"L":return Cn.LOWER;case"P":return Cn.PUNCT;case"M":return Cn.MIXED;case"D":return Cn.DIGIT;case"B":return Cn.BINARY;case"U":default:return Cn.UPPER}},t.getCharacter=function(e,r){switch(e){case Cn.UPPER:return t.UPPER_TABLE[r];case Cn.LOWER:return t.LOWER_TABLE[r];case Cn.MIXED:return t.MIXED_TABLE[r];case Cn.PUNCT:return t.PUNCT_TABLE[r];case Cn.DIGIT:return t.DIGIT_TABLE[r];default:throw new Zp("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=yi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=yi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=yi.AZTEC_DATA_10):(n=12,r=yi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new xe;for(var o=e.length%n,s=new Int32Array(a),c=0;c<a;c++,o+=n)s[c]=t.readCode(e,o,n);try{var f=new jm(r);f.decode(s,a-i)}catch(A){throw new xe(A)}for(var d=(1<<n)-1,p=0,c=0;c<i;c++){var g=s[c];if(g===0||g===d)throw new xe;(g===1||g===d-1)&&p++}for(var y=new Array(i*n-p),w=0,c=0;c<i;c++){var g=s[c];if(g===1||g===d-1)y.fill(g>1,w,w+n-1),w+=n-1;else for(var _=n-1;_>=0;--_)y[w++]=(g&1<<_)!==0}return y},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var c=i+1+2*et.truncDivision(et.truncDivision(i,2)-1,15),f=i/2,d=et.truncDivision(c,2),s=0;s<f;s++){var p=s+et.truncDivision(s,15);a[f-s-1]=d-p-1,a[f+s]=d+p+1}for(var s=0,g=0;s<n;s++){for(var y=(n-s)*4+(r?9:12),w=s*2,_=i-1-w,A=0;A<y;A++)for(var S=A*2,T=0;T<2;T++)o[g+S+T]=e.get(a[w+T],a[w+A]),o[g+2*y+S+T]=e.get(a[w+A],a[_-T]),o[g+4*y+S+T]=e.get(a[_-T],a[_-A]),o[g+6*y+S+T]=e.get(a[_-A],a[w+T]);g+=y*8}return o},t.readCode=function(e,r,n){for(var i=0,a=r;a<r+n;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),bt=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var a=e-n,o=r-i;return Math.sqrt(a*a+o*o)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var a=e[n];r+=a}return r},t})(),o_=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),Oe=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*o_.floatToIntBits(this.x)+o_.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(n>=r&&n>=i?(o=e[0],a=e[1],s=e[2]):i>=n&&i>=r?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var c=a;a=s,s=c}e[0]=a,e[1]=o,e[2]=s},t.distance=function(e,r){return bt.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,a=r.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},t})(),jE=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),WQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),KQ=(function(t){WQ(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(jE),s_=(function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,c=!1,f=!1,d=!1,p=!1,g=this.width,y=this.height;o;){o=!1;for(var w=!0;(w||!c)&&r<g;)w=this.containsBlackPoint(n,i,r,!1),w?(r++,o=!0,c=!0):c||r++;if(r>=g){a=!0;break}for(var _=!0;(_||!f)&&i<y;)_=this.containsBlackPoint(e,r,i,!0),_?(i++,o=!0,f=!0):f||i++;if(i>=y){a=!0;break}for(var A=!0;(A||!d)&&e>=0;)A=this.containsBlackPoint(n,i,e,!1),A?(e--,o=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var S=!0;(S||!p)&&n>=0;)S=this.containsBlackPoint(e,r,n,!0),S?(n--,o=!0,p=!0):p||n--;if(n<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var T=r-e,R=null,N=1;R===null&&N<T;N++)R=this.getBlackPointOnSegment(e,i-N,e+N,i);if(R==null)throw new se;for(var M=null,N=1;M===null&&N<T;N++)M=this.getBlackPointOnSegment(e,n+N,e+N,n);if(M==null)throw new se;for(var L=null,N=1;L===null&&N<T;N++)L=this.getBlackPointOnSegment(r,n+N,r-N,n);if(L==null)throw new se;for(var O=null,N=1;O===null&&N<T;N++)O=this.getBlackPointOnSegment(r,i-N,r-N,i);if(O==null)throw new se;return this.centerEdges(O,R,L,M)}else throw new se},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var a=bt.round(bt.distance(e,r,n,i)),o=(n-e)/a,s=(i-r)/a,c=this.image,f=0;f<a;f++){var d=bt.round(e+f*o),p=bt.round(r+f*s);if(c.get(d,p))return new Oe(d,p)}return null},t.prototype.centerEdges=function(e,r,n,i){var a=e.getX(),o=e.getY(),s=r.getX(),c=r.getY(),f=n.getX(),d=n.getY(),p=i.getX(),g=i.getY(),y=t.CORR;return a<this.width/2?[new Oe(p-y,g+y),new Oe(s+y,c+y),new Oe(f-y,d-y),new Oe(a+y,o-y)]:[new Oe(p+y,g+y),new Oe(s+y,c-y),new Oe(f-y,d+y),new Oe(a-y,o-y)]},t.prototype.containsBlackPoint=function(e,r,n,i){var a=this.image;if(i){for(var o=e;o<=r;o++)if(a.get(o,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),A6=(function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<r.length&&a;o+=2){var s=Math.floor(r[o]),c=Math.floor(r[o+1]);if(s<-1||s>n||c<-1||c>i)throw new se;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),c===-1?(r[o+1]=0,a=!0):c===i&&(r[o+1]=i-1,a=!0)}a=!0;for(var o=r.length-2;o>=0&&a;o-=2){var s=Math.floor(r[o]),c=Math.floor(r[o+1]);if(s<-1||s>n||c<-1||c>i)throw new se;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),c===-1?(r[o+1]=0,a=!0):c===i&&(r[o+1]=i-1,a=!0)}},t})(),TM=(function(){function t(e,r,n,i,a,o,s,c,f){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return t.quadrilateralToQuadrilateral=function(e,r,n,i,a,o,s,c,f,d,p,g,y,w,_,A){var S=t.quadrilateralToSquare(e,r,n,i,a,o,s,c),T=t.squareToQuadrilateral(f,d,p,g,y,w,_,A);return T.times(S)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=0;g<r;g+=2){var y=e[g],w=e[g+1],_=a*y+c*w+p;e[g]=(n*y+o*w+f)/_,e[g+1]=(i*y+s*w+d)/_}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=e.length,y=0;y<g;y++){var w=e[y],_=r[y],A=a*w+c*_+p;e[y]=(n*w+o*_+f)/A,r[y]=(i*w+s*_+d)/A}},t.squareToQuadrilateral=function(e,r,n,i,a,o,s,c){var f=e-n+a-s,d=r-i+o-c;if(f===0&&d===0)return new t(n-e,a-n,e,i-r,o-i,r,0,0,1);var p=n-a,g=s-a,y=i-o,w=c-o,_=p*w-g*y,A=(f*w-g*d)/_,S=(p*d-f*y)/_;return new t(n-e+A*n,s-e+S*s,e,i-r+A*i,c-r+S*c,r,A,S,1)},t.quadrilateralToSquare=function(e,r,n,i,a,o,s,c){return t.squareToQuadrilateral(e,r,n,i,a,o,s,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),XQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),YQ=(function(t){XQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,a,o,s,c,f,d,p,g,y,w,_,A,S,T,R,N){var M=TM.quadrilateralToQuadrilateral(a,o,s,c,f,d,p,g,y,w,_,A,S,T,R,N);return this.sampleGridWithTransform(r,n,i,M)},e.prototype.sampleGridWithTransform=function(r,n,i,a){if(n<=0||i<=0)throw new se;for(var o=new Po(n,i),s=new Float32Array(2*n),c=0;c<i;c++){for(var f=s.length,d=c+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=d;a.transformPoints(s),A6.checkAndNudgePoints(r,s);try{for(var p=0;p<f;p+=2)r.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,c)}catch{throw new se}}return o},e})(A6),LE=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new YQ,t})(),pi=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Oe(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),QQ=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new KQ(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new se;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,a=0;a<4;a++){var o=n[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,o,s){var c=(a>>r-2<<1)+(a&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(et.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new se},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var a=n-i,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new jm(yi.AZTEC_PARAM);c.decode(o,a)}catch{throw new se}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),f=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,c,f,d))break}r=s,n=c,i=f,a=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;var g=new Oe(r.getX()+.5,r.getY()-.5),y=new Oe(n.getX()+.5,n.getY()+.5),w=new Oe(i.getX()-.5,i.getY()+.5),_=new Oe(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,y,w,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var a=new s_(this.image).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new pi(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new pi(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pi(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new pi(o-7,s-7),!1,-1,-1).toResultPoint()}var c=bt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),f=bt.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var a=new s_(this.image,15,c,f).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new pi(c+7,f-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new pi(c+7,f+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pi(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new pi(c-7,f-7),!1,-1,-1).toResultPoint()}return c=bt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),f=bt.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new pi(c,f)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,a){var o=LE.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,a=this.distanceResultPoint(e,r),o=a/n,s=e.getX(),c=e.getY(),f=o*(r.getX()-e.getX())/a,d=o*(r.getY()-e.getY())/a,p=0;p<n;p++)this.image.get(bt.round(s+p*f),bt.round(c+p*d))&&(i|=1<<n-p-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var a=3;e=new pi(e.getX()-a,e.getY()+a),r=new pi(r.getX()-a,r.getY()-a),n=new pi(n.getX()+a,n.getY()-a),i=new pi(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,i),s===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),p=0;p<d;p++)s+=i,c+=a,this.image.get(bt.round(s),bt.round(c))!==f&&o++;var g=o/n;return g>.1&&g<.9?0:g<=.1===f?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var a=e.getX()+n,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n,o+=i;for(a-=n,o-=i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n;for(a-=n;this.isValid(a,o)&&this.image.get(a,o)===r;)o+=i;return o-=i,new pi(a,o)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Oe(s+i*a,c+i*o),d=new Oe(s-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Oe(s+i*a,c+i*o),g=new Oe(s-i*a,c-i*o),y=[f,p,d,g];return y},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=bt.round(e.getX()),n=bt.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return bt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return bt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(et.truncDivision(this.nbLayers-4,8)+1)+15},t})(),l_=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new QQ(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new _6().decode(s)}catch(p){n=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new _6().decode(s)}catch(p){throw n??p}var c=new Wn(o.getText(),o.getRawBytes(),o.getNumBits(),a,Le.AZTEC,Yt.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(Dn.BYTE_SEGMENTS,f);var d=o.getECLevel();return d!=null&&c.putMetadata(Dn.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(or.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,a,o){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t})(),ZQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){ZQ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new l_,r)||this}return e})(od);var tn=(function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(or.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,r),o=a.getResultMetadata(),s=270;o!==null&&o.get(Dn.ORIENTATION)===!0&&(s=s+o.get(Dn.ORIENTATION)%360),a.putMetadata(Dn.ORIENTATION,s);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Oe(f-c[d].getY()-1,c[d].getX());return a}else throw new se}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),a=new gn(n),o=r&&r.get(or.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var p=Math.trunc((d+1)/2),g=(d&1)===0,y=f+s*(g?p:-p);if(y<0||y>=i)break;try{a=e.getBlackRow(y,a)}catch{continue}for(var w=function(T){if(T===1&&(a.reverse(),r&&r.get(or.NEED_RESULT_POINT_CALLBACK)===!0)){var R=new Map;r.forEach(function(L,O){return R.set(O,L)}),R.delete(or.NEED_RESULT_POINT_CALLBACK),r=R}try{var N=_.decodeRow(y,a,r);if(T===1){N.putMetadata(Dn.ORIENTATION,180);var M=N.getResultPoints();M!==null&&(M[0]=new Oe(n-M[0].getX()-1,M[0].getY()),M[1]=new Oe(n-M[1].getX()-1,M[1].getY()))}return{value:N}}catch{}},_=this,A=0;A<2;A++){var S=w(A);if(typeof S=="object")return S.value}}throw new se},t.recordPattern=function(e,r,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var o=e.getSize();if(r>=o)throw new se;for(var s=!e.get(r),c=0,f=r;f<o;){if(e.get(f)!==s)n[c]++;else{if(++c===i)break;n[c]=1,s=!s}f++}if(!(c===i||c===i-1&&f===o))throw new se},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,a=e.get(r);r>0&&i>=0;)e.get(--r)!==a&&(i--,a=!a);if(i>=0)throw new se;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;n*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=r[d]*c,y=p>g?p-g:g-p;if(y>n)return Number.POSITIVE_INFINITY;f+=y}return f/a},t})(),JQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),E6=(function(t){JQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,c=!1,f=6,d=i;d<n;d++)if(r.get(d)!==c)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var w=tn.patternMatchVariance(o,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);w<p&&(p=w,g=y)}if(g>=0&&r.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new se},e.decodeCode=function(r,n,i){tn.recordPattern(r,i,n);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new se},e.prototype.decodeRow=function(r,n,i){var a=i&&i.get(or.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new xe}for(var p=!1,g=!1,y="",w=o[0],_=o[1],A=Int32Array.from([0,0,0,0,0,0]),S=0,T=0,R=s,N=0,M=!0,L=!1,O=!1;!p;){var D=g;switch(g=!1,S=T,T=e.decodeCode(n,A,_),f[c++]=T,T!==e.CODE_STOP&&(M=!0),T!==e.CODE_STOP&&(N++,R+=N*T),w=_,_+=A.reduce(function(ie,K){return ie+K},0),T){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new xe}switch(d){case e.CODE_CODE_A:if(T<64)O===L?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else if(T<96)O===L?y+=String.fromCharCode(T-64):y+=String.fromCharCode(T+64),O=!1;else switch(T!==e.CODE_STOP&&(M=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!L&&O?(L=!0,O=!1):L&&O?(L=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(T<96)O===L?y+=String.fromCharCode(32+T):y+=String.fromCharCode(32+T+128),O=!1;else switch(T!==e.CODE_STOP&&(M=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!L&&O?(L=!0,O=!1):L&&O?(L=!1,O=!1):O=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(T<100)T<10&&(y+="0"),y+=T;else switch(T!==e.CODE_STOP&&(M=!1),T){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}D&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var j=_-w;if(_=n.getNextUnset(_),!n.isRange(_,Math.min(n.getSize(),_+(_-w)/2),!1))throw new se;if(R-=N*S,R%103!==S)throw new pn;var B=y.length;if(B===0)throw new se;B>0&&M&&(d===e.CODE_CODE_C?y=y.substring(0,B-2):y=y.substring(0,B-1));for(var z=(o[1]+o[0])/2,V=w+j/2,F=f.length,he=new Uint8Array(F),_e=0;_e<F;_e++)he[_e]=f[_e];var Y=[new Oe(z,r),new Oe(V,r)];return new Wn(y,he,0,Y,Le.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(tn),eZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),F2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S6=(function(t){eZ(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var a,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,f),p=n.getNextSet(d[1]),g=n.getSize(),y,w;do{e.recordPattern(n,p,f);var _=e.toNarrowWidePattern(f);if(_<0)throw new se;y=e.patternToChar(_),this.decodeRowResult+=y,w=p;try{for(var A=(a=void 0,F2(f)),S=A.next();!S.done;S=A.next()){var T=S.value;p+=T}}catch(F){a={error:F}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}p=n.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var N=F2(f),M=N.next();!M.done;M=N.next()){var T=M.value;R+=T}}catch(F){s={error:F}}finally{try{M&&!M.done&&(c=N.return)&&c.call(N)}finally{if(s)throw s.error}}var L=p-w-R;if(p!==g&&L*2<R)throw new se;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,D=0,j=0;j<O;j++)D+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(j));if(this.decodeRowResult.charAt(O)!==e.ALPHABET_STRING.charAt(D%43))throw new pn;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new se;var B;this.extendedMode?B=e.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var z=(d[1]+d[0])/2,V=w+R/2;return new Wn(B,null,0,[new Oe(z,r),new Oe(V,r)],Le.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),a=r.getNextSet(0),o=0,s=a,c=!1,f=n.length,d=a;d<i;d++)if(r.get(d)!==c)n[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new se},e.toNarrowWidePattern=function(r){var n,i,a=r.length,o=0,s;do{var c=2147483647;try{for(var f=(n=void 0,F2(r)),d=f.next();!d.done;d=f.next()){var p=d.value;p<c&&p>o&&(c=p)}}catch(_){n={error:_}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}o=c,s=0;for(var g=0,y=0,w=0;w<a;w++){var p=r[w];p>o&&(y|=1<<a-1-w,s++,g+=p)}if(s===3){for(var w=0;w<a&&s>0;w++){var p=r[w];if(p>o&&(s--,p*2>=g))return-1}return y}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new se},e.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(a+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new xe;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new xe;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new xe;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new xe;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(tn),tZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),V2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C6=(function(t){tZ(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,c,f=this.findAsteriskPattern(n),d=n.getNextSet(f[1]),p=n.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var y,w;do{e.recordPattern(n,d,g);var _=this.toPattern(g);if(_<0)throw new se;y=this.patternToChar(_),this.decodeRowResult+=y,w=d;try{for(var A=(a=void 0,V2(g)),S=A.next();!S.done;S=A.next()){var T=S.value;d+=T}}catch(j){a={error:j}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}d=n.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var R=0;try{for(var N=V2(g),M=N.next();!M.done;M=N.next()){var T=M.value;R+=T}}catch(j){s={error:j}}finally{try{M&&!M.done&&(c=N.return)&&c.call(N)}finally{if(s)throw s.error}}if(d===p||!n.get(d))throw new se;if(this.decodeRowResult.length<2)throw new se;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var L=this.decodeExtended(this.decodeRowResult),O=(f[1]+f[0])/2,D=w+R/2;return new Wn(L,null,0,[new Oe(O,r),new Oe(D,r)],Le.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,c=a.length,f=0,d=i;d<n;d++)if(r.get(d)!==s)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new se},e.prototype.toPattern=function(r){var n,i,a=0;try{for(var o=V2(r),s=o.next();!s.done;s=o.next()){var c=s.value;a+=c}}catch(w){n={error:w}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var f=0,d=r.length,p=0;p<d;p++){var g=Math.round(r[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var y=0;y<g;y++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new se},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o>="a"&&o<="d"){if(a>=n-1)throw new xe;var s=r.charAt(a+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new xe;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new xe;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new xe;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new xe;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var a=1,o=0,s=n-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>i&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new pn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(tn),rZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),nZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T6=(function(t){rZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var a,o,s=this.decodeStart(n),c=this.decodeEnd(n),f=new Ze;e.decodeMiddle(n,s[1],c[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(or.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=d.length,y=!1,w=0;try{for(var _=nZ(p),A=_.next();!A.done;A=_.next()){var S=A.value;if(g===S){y=!0;break}S>w&&(w=S)}}catch(N){a={error:N}}finally{try{A&&!A.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}if(!y&&g>w&&(y=!0),!y)throw new xe;var T=[new Oe(s[1],r),new Oe(c[0],r)],R=new Wn(d,null,0,T,Le.ITF,new Date().getTime());return R},e.decodeMiddle=function(r,n,i,a){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);n<i;){tn.recordPattern(r,n,o);for(var f=0;f<5;f++){var d=2*f;s[f]=o[d],c[f]=o[d+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),o.forEach(function(g){n+=g})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!r.get(a);a--)i--;if(i!==0)throw new se},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new se;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof se&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var a=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-a,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var a=i.length,o=new Int32Array(a),s=r.getSize(),c=!1,f=0,d=n;o.fill(0);for(var p=n;p<s;p++)if(r.get(p)!==c)o[f]++;else{if(f===a-1){if(tn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=o[0]+o[1],Yt.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new se},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],c=tn.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,i=o):c===n&&(i=-1)}if(i>=0)return i%10;throw new se},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(tn),iZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ff=(function(t){iZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var c=s-(a-s);c>=0&&(n=r.isRange(c,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,a){return this.findGuardPattern(r,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,i,a,o){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var c=0,f=n,d=a.length,p=i,g=n;g<s;g++)if(r.get(g)!==p)o[c]++;else{if(c===d-1){if(tn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var y=o.slice(2,o.length),w=0;w<c-1;w++)o[w]=y[w];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new se},e.decodeDigit=function(r,n,i,a){this.recordPattern(r,i,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=a.length,f=0;f<c;f++){var d=a[f],p=tn.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new se},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(tn),aZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oZ=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),c=[new Oe((n[0]+n[1])/2,e),new Oe(a,e)],f=new Wn(o,null,0,c,Le.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=r[1],f=0,d=0;d<5&&c<s;d++){var p=Ff.decodeDigit(e,o,c,Ff.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,aZ(o)),y=g.next();!y.done;y=g.next()){var w=y.value;c+=w}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new se;var _=this.determineCheckDigit(f);if(t.extensionChecksum(n.toString())!==_)throw new se;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new se},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Dn.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,o=a<10?"0"+a:a.toString();return r+i+"."+o},t})(),sZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lZ=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),c=[new Oe((n[0]+n[1])/2,e),new Oe(a,e)],f=new Wn(o,null,0,c,Le.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=r[1],f=0,d=0;d<2&&c<s;d++){var p=Ff.decodeDigit(e,o,c,Ff.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,sZ(o)),y=g.next();!y.done;y=g.next()){var w=y.value;c+=w}}catch(_){i={error:_}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new se;if(parseInt(n.toString())%4!==f)throw new se;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Dn.ISSUE_NUMBER,parseInt(e)]])},t})(),cZ=(function(){function t(){}return t.decodeRow=function(e,r,n){var i=Ff.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new oZ;return a.decodeRow(e,r,i)}catch{var o=new lZ;return o.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),uZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Qr=(function(t){uZ(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,i){var a=e.findStartGuardPattern(n),o=i==null?null:i.get(or.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new Oe((a[0]+a[1])/2,r);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(n,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(o!=null){var p=new Oe(f,r);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(n,f);if(o!=null){var y=new Oe((g[0]+g[1])/2,r);o.foundPossibleResultPoint(y)}var w=g[1],_=w+(w-g[0]);if(_>=n.getSize()||!n.isRange(w,_,!1))throw new se;var A=d.toString();if(A.length<8)throw new xe;if(!e.checkChecksum(A))throw new pn;var S=(a[1]+a[0])/2,T=(g[1]+g[0])/2,R=this.getBarcodeFormat(),N=[new Oe(S,r),new Oe(T,r)],M=new Wn(A,null,0,N,R,new Date().getTime()),L=0;try{var O=cZ.decodeRow(r,n,g[1]);M.putMetadata(Dn.UPC_EAN_EXTENSION,O.getText()),M.putAllMetadata(O.getResultMetadata()),M.addResultPoints(O.getResultPoints()),L=O.getText().length}catch{}var D=i==null?null:i.get(or.ALLOWED_EAN_EXTENSIONS);if(D!=null){var j=!1;for(var B in D)if(L.toString()===B){j=!0;break}if(!j)throw new se}return R===Le.EAN_13||Le.UPC_A,M},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Ff),fZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),I6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c_=(function(t){fZ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=r.getSize(),p=n[1],g=0,y=0;y<6&&p<d;y++){var w=Qr.decodeDigit(r,f,p,Qr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);try{for(var _=(a=void 0,I6(f)),A=_.next();!A.done;A=_.next()){var S=A.value;p+=S}}catch(M){a={error:M}}finally{try{A&&!A.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}w>=10&&(g|=1<<5-y)}i=e.determineFirstDigit(i,g);var T=Qr.findGuardPattern(r,p,!0,Qr.MIDDLE_PATTERN,new Int32Array(Qr.MIDDLE_PATTERN.length).fill(0));p=T[1];for(var y=0;y<6&&p<d;y++){var w=Qr.decodeDigit(r,f,p,Qr.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var R=(s=void 0,I6(f)),N=R.next();!N.done;N=R.next()){var S=N.value;p+=S}}catch(O){s={error:O}}finally{try{N&&!N.done&&(c=R.return)&&c.call(R)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Le.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new se},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Qr),dZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),O6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R6=(function(t){dZ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=r.getSize(),p=n[1],g=0;g<4&&p<d;g++){var y=Qr.decodeDigit(r,f,p,Qr.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var w=(a=void 0,O6(f)),_=w.next();!_.done;_=w.next()){var A=_.value;p+=A}}catch(N){a={error:N}}finally{try{_&&!_.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}}var S=Qr.findGuardPattern(r,p,!0,Qr.MIDDLE_PATTERN,new Int32Array(Qr.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var g=0;g<4&&p<d;g++){var y=Qr.decodeDigit(r,f,p,Qr.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var T=(s=void 0,O6(f)),R=T.next();!R.done;R=T.next()){var A=R.value;p+=A}}catch(L){s={error:L}}finally{try{R&&!R.done&&(c=T.return)&&c.call(T)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return Le.EAN_8},e})(Qr),hZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),P6=(function(t){hZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new c_,r}return e.prototype.getBarcodeFormat=function(){return Le.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new Wn(n.substring(1),null,null,r.getResultPoints(),Le.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new se},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Qr),pZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D6=(function(t){pZ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s=this.decodeMiddleCounters.map(function(A){return A});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=r.getSize(),f=n[1],d=0,p=0;p<6&&f<c;p++){var g=e.decodeDigit(r,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var y=(a=void 0,gZ(s)),w=y.next();!w.done;w=y.next()){var _=w.value;f+=_}}catch(A){a={error:A}}finally{try{w&&!w.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}g>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Ze(i),d),f},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Qr.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){r.insert(0,"0"+i),r.append("0"+a);return}throw se.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Le.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new Ze;i.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Qr),vZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),N6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},H2=(function(t){vZ(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(or.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Le.EAN_13)>-1&&a.push(new c_),i.indexOf(Le.UPC_A)>-1&&a.push(new P6),i.indexOf(Le.EAN_8)>-1&&a.push(new R6),i.indexOf(Le.UPC_E)>-1&&a.push(new D6)),a.length===0&&(a.push(new c_),a.push(new P6),a.push(new R6),a.push(new D6)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,i){var a,o;try{for(var s=N6(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var d=f.decodeRow(r,n,i),p=d.getBarcodeFormat()===Le.EAN_13&&d.getText().charAt(0)==="0",g=i==null?null:i.get(or.POSSIBLE_FORMATS),y=g==null||g.includes(Le.UPC_A);if(p&&y){var w=d.getRawBytes(),_=new Wn(d.getText().substring(1),w,w?w.length:null,d.getResultPoints(),Le.UPC_A);return _.putAllMetadata(d.getResultMetadata()),_}return d}catch{}}}catch(A){a={error:A}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new se},e.prototype.reset=function(){var r,n;try{for(var i=N6(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e})(tn),mZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yZ=(function(t){mZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var a=this.getValidRowData(n);if(!a)throw new se;var o=this.codaBarDecodeRow(a.row);if(!o)throw new se;return new Wn(o,null,0,[new Oe(a.left,r),new Oe(a.right,r)],Le.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var o=[],s=n[0],c=1,f=1;f<n.length;f++)n[f]===s?c++:(s=n[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(c,f){return(c+f)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e})(tn),xZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jc=(function(t){xZ(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(tn.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new se},e.count=function(r){return bt.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]>a&&(a=n[o],i=o);r[i]++},e.decrement=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]<a&&(a=n[o],i=o);r[i]--},e.isFinderPattern=function(r){var n,i,a=r[0]+r[1],o=a+r[2]+r[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=bZ(r),p=d.next();!p.done;p=d.next()){var g=p.value;g>f&&(f=g),g<c&&(c=g)}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(tn),pv=(function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),IM=(function(){function t(e,r,n,i,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Oe(n,a)),this.resultPoints.push(new Oe(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t})(),wZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xf=(function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,a,o=0;try{for(var s=wZ(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(T){i={error:T}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var d=0,p=0,g=e.length,y=0;y<g-1;y++){var w=void 0;for(w=1,p|=1<<y;w<e[y];w++,p&=~(1<<y)){var _=t.combins(o-w-1,g-y-2);if(n&&p===0&&o-w-(g-y-1)>=g-y-1&&(_-=t.combins(o-w-(g-y),g-y-2)),g-y-1>1){for(var A=0,S=o-w-(g-y-2);S>r;S--)A+=t.combins(o-w-S-1,g-y-3);_-=A*(g-1-y)}else o-w>r&&_--;d+=_}o-=w}return d},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var a=1,o=1,s=e;s>n;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},t})(),_Z=(function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new gn(n),a=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)(s&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},t})(),Dc=(function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),BE=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),AZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ka=(function(t){AZ(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(BE),EZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Nc=(function(t){EZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(BE),SZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hf=(function(t){SZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new xe;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(BE),o1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CZ=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,a,o,s,c,f;if(!e)return null;if(e.length<2)throw new se;var d=e.substring(0,2);try{for(var p=o1(t.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var y=g.value;if(y[0]===d)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,y[2],e):t.processFixedAI(2,y[1],e)}}catch(L){r={error:L}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}if(e.length<3)throw new se;var w=e.substring(0,3);try{for(var _=o1(t.THREE_DIGIT_DATA_LENGTH),A=_.next();!A.done;A=_.next()){var y=A.value;if(y[0]===w)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,y[2],e):t.processFixedAI(3,y[1],e)}}catch(L){i={error:L}}finally{try{A&&!A.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var S=o1(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),T=S.next();!T.done;T=S.next()){var y=T.value;if(y[0]===w)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(L){o={error:L}}finally{try{T&&!T.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}if(e.length<4)throw new se;var R=e.substring(0,4);try{for(var N=o1(t.FOUR_DIGIT_DATA_LENGTH),M=N.next();!M.done;M=N.next()){var y=M.value;if(y[0]===R)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(L){c={error:L}}finally{try{M&&!M.done&&(f=N.return)&&f.call(N)}finally{if(c)throw c.error}}throw new se},t.processFixedAI=function(e,r,n){if(n.length<e)throw new se;var i=n.substring(0,e);if(n.length<e+r)throw new se;var a=n.substring(e,e+r),o=n.substring(e+r),s="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var o=n.substring(e,a),s=n.substring(a),c="("+i+")"+o,f=t.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),B1=(function(){function t(e){this.buffer=new Ze,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var a=this.decodeGeneralPurposeField(n,i),o=CZ.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new hf(this.information.getSize(),hf.FNC1,hf.FNC1):new hf(this.information.getSize(),r-1,hf.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new hf(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,a=0;a<n;++a)e.get(r+a)&&(i|=1<<n-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Nc(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Nc(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Nc(this.current.getPosition(),this.buffer.toString()):r=new Nc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Dc(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dc(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dc(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dc(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ka(e+5,ka.FNC1);if(r>=5&&r<15)return new ka(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ka(e+7,""+(n+1));if(n>=90&&n<116)return new ka(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new xe}return new ka(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ka(e+5,ka.FNC1);if(r>=5&&r<15)return new ka(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ka(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Zp("Decoding invalid alphanumeric value: "+n)}return new ka(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t})(),OM=(function(){function t(e){this.information=e,this.generalDecoder=new B1(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),TZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ja=(function(t){TZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,a=0;a<13;a++){var o=r.charAt(a+n).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e})(OM),IZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),OZ=(function(t){IZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ze;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ja),RZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),PZ=(function(t){RZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ze;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(OM),DZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),z1=(function(t){DZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,a);for(var o=this.checkWeight(a),s=1e5,c=0;c<5;++c)o/s===0&&r.append("0"),s/=10;r.append(o)},e})(ja),NZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),RM=(function(t){NZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+z1.GTIN_SIZE+e.WEIGHT_SIZE)throw new se;var r=new Ze;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+z1.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(z1),kZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),MZ=(function(t){kZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e})(RM),jZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),LZ=(function(t){jZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e})(RM),BZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),zZ=(function(t){BZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ja.GTIN_SIZE)throw new se;var r=new Ze;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ja.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ja.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ja),UZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),FZ=(function(t){UZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ja.GTIN_SIZE)throw new se;var r=new Ze;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ja.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ja.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ja.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ja),VZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dl=(function(t){VZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new se;var r=new Ze;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(z1);function HZ(t){try{if(t.get(1))return new OZ(t);if(!t.get(2))return new PZ(t);var e=B1.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new MZ(t);case 5:return new LZ(t)}var r=B1.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new zZ(t);case 13:return new FZ(t)}var n=B1.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new dl(t,"310","11");case 57:return new dl(t,"320","11");case 58:return new dl(t,"310","13");case 59:return new dl(t,"320","13");case 60:return new dl(t,"310","15");case 61:return new dl(t,"320","15");case 62:return new dl(t,"310","17");case 63:return new dl(t,"320","17")}}catch(i){throw console.log(i),new Zp("unknown decoder: "+t)}}var k6=(function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),$Z=(function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,a){r.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t})(),qZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GZ=(function(t){qZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof se){if(!this.pairs.length)throw new se;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new se},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,a,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,hl(r)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(r);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new se},e.isValidSequence=function(r){var n,i;try{for(var a=hl(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(r.length>s.length)){for(var c=!0,f=0;f<r.length;f++)if(r[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new $Z(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,a,o,s,c,f;try{for(var d=hl(n),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getPairs().length!==r.length){var y=!0;try{for(var w=(o=void 0,hl(g.getPairs())),_=w.next();!_.done;_=w.next()){var A=_.value,S=!1;try{for(var T=(c=void 0,hl(r)),R=T.next();!R.done;R=T.next()){var N=R.value;if(k6.equals(A,N)){S=!0;break}}}catch(M){c={error:M}}finally{try{R&&!R.done&&(f=T.return)&&f.call(T)}finally{if(c)throw c.error}}S||(y=!1)}}catch(M){o={error:M}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}}}}catch(M){i={error:M}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,a,o,s,c,f;try{for(var d=hl(n),p=d.next();!p.done;p=d.next()){var g=p.value,y=!0;try{for(var w=(o=void 0,hl(r)),_=w.next();!_.done;_=w.next()){var A=_.value,S=!1;try{for(var T=(c=void 0,hl(g.getPairs())),R=T.next();!R.done;R=T.next()){var N=R.value;if(A.equals(N)){S=!0;break}}}catch(M){c={error:M}}finally{try{R&&!R.done&&(f=T.return)&&f.call(T)}finally{if(c)throw c.error}}if(!S){y=!1;break}}}catch(M){o={error:M}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}if(y)return!0}}catch(M){i={error:M}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=_Z.buildBitArray(r),i=HZ(n),a=i.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new Wn(a,null,null,c,Le.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var d=211*(o-4)+a;return d===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,i,a),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(r,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new se;var d;try{d=this.decodeDataCharacter(r,o,a,!1)}catch(p){d=null,console.log(p)}return new k6(f,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var c=n[n.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=n.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;s<o&&(d=!r.get(s),!!d);)s++;for(var p=0,g=s,y=s;y<o;y++)if(r.get(y)!==d)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=y;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,d=!d}throw new se},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var a=r[i];r[i]=r[n-i-1],r[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,i){var a,o,s;if(i){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();Yt.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new IM(d,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var d=o[c];o[c]=o[f],o[f]=d}}var p=17,g=bt.sum(new Int32Array(o))/p,y=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new se;for(var w=this.getOddCounts(),_=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var T=1*o[c]/g,R=T+.5;if(R<1){if(T<.3)throw new se;R=1}else if(R>8){if(T>8.7)throw new se;R=8}var N=c/2;(c&1)===0?(w[N]=R,A[N]=T-R):(_[N]=R,S[N]=T-R)}this.adjustOddEvenCounts(p);for(var M=4*n.getValue()+(i?0:2)+(a?0:1)-1,L=0,O=0,c=w.length-1;c>=0;c--){if(e.isNotA1left(n,i,a)){var D=e.WEIGHTS[M][2*c];O+=w[c]*D}L+=w[c]}for(var j=0,c=_.length-1;c>=0;c--)if(e.isNotA1left(n,i,a)){var D=e.WEIGHTS[M][2*c+1];j+=_[c]*D}var B=O+j;if((L&1)!==0||L>13||L<4)throw new se;var z=(13-L)/2,V=e.SYMBOL_WIDEST[z],F=9-V,he=xf.getRSSvalue(w,V,!0),_e=xf.getRSSvalue(_,F,!1),Y=e.EVEN_TOTAL_SUBSET[z],ie=e.GSUM[z],K=he*Y+_e+ie;return new pv(K,B)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=bt.sum(new Int32Array(this.getOddCounts())),i=bt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;n>13?o=!0:n<4&&(a=!0);var s=!1,c=!1;i>13?c=!0:i<4&&(s=!0);var f=n+i-r,d=(n&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new se;o=!0}else{if(!p)throw new se;c=!0}else if(f===-1)if(d){if(p)throw new se;a=!0}else{if(!p)throw new se;s=!0}else if(f===0){if(d){if(!p)throw new se;n<i?(a=!0,c=!0):(o=!0,s=!0)}else if(p)throw new se}else throw new se;if(a){if(o)throw new se;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new se;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(jc),WZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),KZ=(function(t){WZ(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(pv),XZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),$2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M6=(function(t){XZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,c,f=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,f),n.reverse();var d=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var p=$2(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1)try{for(var w=(s=void 0,$2(this.possibleRightPairs)),_=w.next();!_.done;_=w.next()){var A=_.value;if(A.getCount()>1&&e.checkChecksum(y,A))return e.constructResult(y,A)}}catch(S){s={error:S}}finally{try{_&&!_.done&&(c=w.return)&&c.call(w)}finally{if(s)throw s.error}}}}catch(S){a={error:S}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new se},e.addOrTally=function(r,n){var i,a;if(n!=null){var o=!1;try{for(var s=$2(r),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===n.getValue()){f.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),a=new String(i).toString(),o=new Ze,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=(s&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),p=n.getFinderPattern().getResultPoints();return new Wn(o.toString(),null,0,[d[0],d[1],p[0],p[1]],Le.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(r,n,i,a){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,o),c=a==null?null:a.get(or.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;n&&(f=r.getSize()-1-f),c.foundPossibleResultPoint(new Oe(f,i))}var d=this.decodeDataCharacter(r,s,!0),p=this.decodeDataCharacter(r,s,!1);return new KZ(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)tn.recordPatternInReverse(r,n.getStartEnd()[0],a);else{tn.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,c=a.length-1;s<c;s++,c--){var f=a[s];a[s]=a[c],a[c]=f}}for(var d=i?16:15,p=bt.sum(new Int32Array(a))/d,g=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var A=a[s]/p,S=Math.floor(A+.5);S<1?S=1:S>8&&(S=8);var T=Math.floor(s/2);(s&1)===0?(g[T]=S,w[T]=A-S):(y[T]=S,_[T]=A-S)}this.adjustOddEvenCounts(i,d);for(var R=0,N=0,s=g.length-1;s>=0;s--)N*=9,N+=g[s],R+=g[s];for(var M=0,L=0,s=y.length-1;s>=0;s--)M*=9,M+=y[s],L+=y[s];var O=N+3*M;if(i){if((R&1)!==0||R>12||R<4)throw new se;var D=(12-R)/2,j=e.OUTSIDE_ODD_WIDEST[D],B=9-j,z=xf.getRSSvalue(g,j,!1),V=xf.getRSSvalue(y,B,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[D],he=e.OUTSIDE_GSUM[D];return new pv(z*F+V+he,O)}else{if((L&1)!==0||L>10||L<4)throw new se;var D=(10-L)/2,j=e.INSIDE_ODD_WIDEST[D],B=9-j,z=xf.getRSSvalue(g,j,!0),V=xf.getRSSvalue(y,B,!1),_e=e.INSIDE_ODD_TOTAL_SUBSET[D],he=e.INSIDE_GSUM[D];return new pv(V*_e+z+he,O)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=r.getSize(),o=!1,s=0;s<a&&(o=!r.get(s),n!==o);)s++;for(var c=0,f=s,d=s;d<a;d++)if(r.get(d)!==o)i[c]++;else{if(c===3){if(jc.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new se},e.prototype.parseFoundFinderPattern=function(r,n,i,a){for(var o=r.get(a[0]),s=a[0]-1;s>=0&&o!==r.get(s);)s--;s++;var c=a[0]-s,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);Yt.arraycopy(f,0,d,1,f.length-1),d[0]=c;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),g=s,y=a[1];return i&&(g=r.getSize()-1-g,y=r.getSize()-1-y),new IM(p,[s,a[1]],g,y,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=bt.sum(new Int32Array(this.getOddCounts())),a=bt.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;r?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-n,p=(i&1)===(r?1:0),g=(a&1)===1;if(d===1)if(p){if(g)throw new se;s=!0}else{if(!g)throw new se;f=!0}else if(d===-1)if(p){if(g)throw new se;o=!0}else{if(!g)throw new se;c=!0}else if(d===0){if(p){if(!g)throw new se;i<a?(o=!0,f=!0):(s=!0,c=!0)}else if(g)throw new se}else throw new se;if(o){if(s)throw new se;jc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&jc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new se;jc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&jc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(jc),YZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Vh=(function(t){YZ(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(or.POSSIBLE_FORMATS):null,a=r&&r.get(or.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(or.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Le.EAN_13)||i.includes(Le.UPC_A)||i.includes(Le.EAN_8)||i.includes(Le.UPC_E))&&n.readers.push(new H2(r)),i.includes(Le.CODE_39)&&n.readers.push(new S6(a,o)),i.includes(Le.CODE_93)&&n.readers.push(new C6),i.includes(Le.CODE_128)&&n.readers.push(new E6),i.includes(Le.ITF)&&n.readers.push(new T6),i.includes(Le.CODABAR)&&n.readers.push(new yZ),i.includes(Le.RSS_14)&&n.readers.push(new M6),i.includes(Le.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new GZ))),n.readers.length===0&&(n.readers.push(new H2(r)),n.readers.push(new S6),n.readers.push(new C6),n.readers.push(new H2(r)),n.readers.push(new E6),n.readers.push(new T6),n.readers.push(new M6)),n}return e.prototype.decodeRow=function(r,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,i)}catch{}throw new se},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e})(tn),QZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){QZ(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Vh(n),r,n)||this}return e})(od);var j6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tt=(function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),St=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),ZZ=(function(){function t(e,r,n,i,a,o){var s,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,d=o.getECCodewords(),p=o.getECBlocks();try{for(var g=j6(p),y=g.next();!y.done;y=g.next()){var w=y.value;f+=w.getCount()*(w.getDataCodewords()+d)}}catch(_){s={error:_}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if((e&1)!==0||(r&1)!==0)throw new xe;try{for(var a=j6(t.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new xe},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Tt(5,new St(1,3))),new t(2,12,12,10,10,new Tt(7,new St(1,5))),new t(3,14,14,12,12,new Tt(10,new St(1,8))),new t(4,16,16,14,14,new Tt(12,new St(1,12))),new t(5,18,18,16,16,new Tt(14,new St(1,18))),new t(6,20,20,18,18,new Tt(18,new St(1,22))),new t(7,22,22,20,20,new Tt(20,new St(1,30))),new t(8,24,24,22,22,new Tt(24,new St(1,36))),new t(9,26,26,24,24,new Tt(28,new St(1,44))),new t(10,32,32,14,14,new Tt(36,new St(1,62))),new t(11,36,36,16,16,new Tt(42,new St(1,86))),new t(12,40,40,18,18,new Tt(48,new St(1,114))),new t(13,44,44,20,20,new Tt(56,new St(1,144))),new t(14,48,48,22,22,new Tt(68,new St(1,174))),new t(15,52,52,24,24,new Tt(42,new St(2,102))),new t(16,64,64,14,14,new Tt(56,new St(2,140))),new t(17,72,72,16,16,new Tt(36,new St(4,92))),new t(18,80,80,18,18,new Tt(48,new St(4,114))),new t(19,88,88,20,20,new Tt(56,new St(4,144))),new t(20,96,96,22,22,new Tt(68,new St(4,174))),new t(21,104,104,24,24,new Tt(56,new St(6,136))),new t(22,120,120,18,18,new Tt(68,new St(6,175))),new t(23,132,132,20,20,new Tt(62,new St(8,163))),new t(24,144,144,22,22,new Tt(62,new St(8,156),new St(2,155))),new t(25,8,18,6,16,new Tt(7,new St(1,5))),new t(26,8,32,6,14,new Tt(11,new St(1,10))),new t(27,12,26,10,24,new Tt(14,new St(1,16))),new t(28,12,36,10,16,new Tt(18,new St(1,22))),new t(29,16,36,14,16,new Tt(24,new St(1,32))),new t(30,16,48,14,22,new Tt(28,new St(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),JZ=(function(){function t(e){var r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new xe;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Po(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return ZZ.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,d=!1;do if(n===a&&i===0&&!s)e[r++]=this.readCorner1(a,o)&255,n-=2,i+=2,s=!0;else if(n===a-2&&i===0&&(o&3)!==0&&!c)e[r++]=this.readCorner2(a,o)&255,n-=2,i+=2,c=!0;else if(n===a+4&&i===2&&(o&7)===0&&!f)e[r++]=this.readCorner3(a,o)&255,n-=2,i+=2,f=!0;else if(n===a-2&&i===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(a,o)&255,n-=2,i+=2,d=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<o);if(r!==this.version.getTotalCodewords())throw new xe;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var a=0;return this.readModule(e-2,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r,n,i)&&(a|=1),a<<=1,this.readModule(e,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e,r,n,i)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Be("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=r/i|0,s=n/a|0,c=o*i,f=s*a,d=new Po(f,c),p=0;p<o;++p)for(var g=p*i,y=0;y<s;++y)for(var w=y*a,_=0;_<i;++_)for(var A=p*(i+2)+1+_,S=g+_,T=0;T<a;++T){var R=y*(a+2)+1+T;if(e.get(R,A)){var N=w+T;d.set(N,S)}}return d},t})(),L6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eJ=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,a,o,s=r.getECBlocks(),c=0,f=s.getECBlocks();try{for(var d=L6(f),p=d.next();!p.done;p=d.next()){var g=p.value;c+=g.getCount()}}catch(he){n={error:he}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var y=new Array(c),w=0;try{for(var _=L6(f),A=_.next();!A.done;A=_.next())for(var g=A.value,S=0;S<g.getCount();S++){var T=g.getDataCodewords(),R=s.getECCodewords()+T;y[w++]=new t(T,new Uint8Array(R))}}catch(he){a={error:he}}finally{try{A&&!A.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}for(var N=y[0].codewords.length,M=N-s.getECCodewords(),L=M-1,O=0,S=0;S<L;S++)for(var D=0;D<w;D++)y[D].codewords[S]=e[O++];for(var j=r.getVersionNumber()===24,B=j?8:w,D=0;D<B;D++)y[D].codewords[M-1]=e[O++];for(var z=y[0].codewords.length,S=M;S<z;S++)for(var D=0;D<w;D++){var V=j?(D+8)%w:D,F=j&&V>7?S-1:S;y[V].codewords[F]=e[O++]}if(O!==e.length)throw new Be;return y},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),PM=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Be(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,c=o-s,f=255>>8-s<<c;r=(a[i]&f)>>c,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;r=r<<e|(a[i]&f)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),Xr;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xr||(Xr={}));var tJ=(function(){function t(){}return t.decode=function(e){var r=new PM(e),n=new Ze,i=new Ze,a=new Array,o=Xr.ASCII_ENCODE;do if(o===Xr.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,i);else{switch(o){case Xr.C40_ENCODE:this.decodeC40Segment(r,n);break;case Xr.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Xr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Xr.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Xr.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new xe}o=Xr.ASCII_ENCODE}while(o!==Xr.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new Mm(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new xe;if(a<=128)return i&&(a+=128),r.append(String.fromCharCode(a-1)),Xr.ASCII_ENCODE;if(a===129)return Xr.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&r.append("0"),r.append(""+o)}else switch(a){case 230:return Xr.C40_ENCODE;case 231:return Xr.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Xr.ANSIX12_ENCODE;case 239:return Xr.TEXT_ENCODE;case 240:return Xr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new xe;break}}while(e.available()>0);return Xr.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else throw new xe;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new xe}a=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),a=0;break;default:throw new xe}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else throw new xe;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new xe}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f),a=0}else throw new xe;break;default:throw new xe}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var o=n[a];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new xe;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new xe;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new xe;s[c]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(va.decode(s,pt.ISO88591))}catch(f){throw new Zp("Platform does not support required encoding: "+f.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),rJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nJ=(function(){function t(){this.rsDecoder=new jm(yi.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new JZ(e),a=i.getVersion(),o=i.readCodewords(),s=eJ.getDataBlocks(o,a),c=0;try{for(var f=rJ(s),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getNumDataCodewords()}}catch(R){r={error:R}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}for(var g=new Uint8Array(c),y=s.length,w=0;w<y;w++){var _=s[w],A=_.getCodewords(),S=_.getNumDataCodewords();this.correctErrors(A,S);for(var T=0;T<S;T++)g[T*y+w]=A[T]}return tJ.decode(g)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new pn}for(var i=0;i<r;i++)e[i]=n[i]},t})(),iJ=(function(){function t(e){this.image=e,this.rectangleDetector=new s_(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new se;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],a=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=t.sampleGrid(this.image,n,i,a,o,s,c);return new jE(f,[n,i,a,o])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new Oe(e.getX()+i,e.getY()+a)},t.moveAway=function(e,r,n){var i=e.getX(),a=e.getY();return i<r?i-=1:i+=1,a<n?a-=1:a+=1,new Oe(i,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],a=e[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,r),d=o,p=[a,r,n,i];return d>s&&(d=s,p[0]=r,p[1]=n,p[2]=i,p[3]=a),d>c&&(d=c,p[0]=n,p[1]=i,p[2]=a,p[3]=r),d>f&&(p[0]=i,p[1]=a,p[2]=r,p[3]=n),p},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=t.shiftPoint(n,i,(o+1)*4),c=t.shiftPoint(i,n,(o+1)*4),f=this.transitionsBetween(s,r),d=this.transitionsBetween(c,a);return f<d?(e[0]=r,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),c=t.shiftPoint(r,n,(s+1)*4),f=t.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(c,a),s=this.transitionsBetween(f,a);var d=new Oe(a.getX()+(i.getX()-n.getX())/(o+1),a.getY()+(i.getY()-n.getY())/(o+1)),p=new Oe(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var g=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),y=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return g>y?d:p},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(i,a)+1,c=t.shiftPoint(r,n,s*4),f=t.shiftPoint(i,n,o*4);o=this.transitionsBetween(c,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var d=(r.getX()+n.getX()+i.getX()+a.getX())/4,p=(r.getY()+n.getY()+i.getY()+a.getY())/4;r=t.moveAway(r,d,p),n=t.moveAway(n,d,p),i=t.moveAway(i,d,p),a=t.moveAway(a,d,p);var g,y;return c=t.shiftPoint(r,n,s*4),c=t.shiftPoint(c,a,o*4),g=t.shiftPoint(n,r,s*4),g=t.shiftPoint(g,i,o*4),f=t.shiftPoint(i,a,s*4),f=t.shiftPoint(f,n,o*4),y=t.shiftPoint(a,i,s*4),y=t.shiftPoint(y,r,o*4),[c,g,f,y]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,a,o,s){var c=LE.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-i)>Math.abs(a-n);if(s){var c=n;n=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-n),d=Math.abs(o-i),p=-f/2,g=i<o?1:-1,y=n<a?1:-1,w=0,_=this.image.get(s?i:n,s?n:i),A=n,S=i;A!==a;A+=y){var T=this.image.get(s?S:A,s?A:S);if(T!==_&&(w++,_=T),p+=d,p>0){if(S===o)break;S+=g,p-=f}}return w},t})(),u_=(function(){function t(){this.decoder=new nJ}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(or.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=t.NO_POINTS}else{var o=new iJ(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=n.getRawBytes(),c=new Wn(n.getText(),s,8*s.length,i,Le.DATA_MATRIX,Yt.currentTimeMillis()),f=n.getByteSegments();f!=null&&c.putMetadata(Dn.BYTE_SEGMENTS,f);var d=n.getECLevel();return d!=null&&c.putMetadata(Dn.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new se;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],c=n[0],f=(c-s+1)/i,d=(o-a+1)/i;if(f<=0||d<=0)throw new se;var p=i/2;a+=p,s+=p;for(var g=new Po(f,d),y=0;y<d;y++)for(var w=a+y*i,_=0;_<f;_++)e.get(s+_*i,w)&&g.set(_,y);return g},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],a=e[1];i<n&&r.get(i,a);)i++;if(i===n)throw new se;var o=i-e[0];if(o===0)throw new se;return o},t.NO_POINTS=[],t})(),aJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){aJ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new u_,r)||this}return e})(od);var bf;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(bf||(bf={}));var oJ=(function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ma(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Be;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(bf.L,"L",1),t.M=new t(bf.M,"M",0),t.Q=new t(bf.Q,"Q",3),t.H=new t(bf.H,"H",2),t})(),sJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DM=(function(){function t(e){this.errorCorrectionLevel=oJ.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return et.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=sJ(t.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,d=f[0];if(d===e||d===r)return new t(f[1]);var p=t.numBitsDiffering(e,d);p<a&&(o=f[1],a=p),e!==r&&(p=t.numBitsDiffering(r,d),p<a&&(o=f[1],a=p))}}catch(g){n={error:g}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),lJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=(function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var a=lJ(i),o=a.next();!o.done;o=a.next()){var s=o.value;n+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),$=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),cJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qc=(function(){function t(e,r){for(var n,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=cJ(f),p=d.next();!p.done;p=d.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+c)}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new xe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new xe}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Be;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var o=DM.numBitsDiffering(e,a);o<r&&(n=i+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Po(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new J(7,new $(1,19)),new J(10,new $(1,16)),new J(13,new $(1,13)),new J(17,new $(1,9))),new t(2,Int32Array.from([6,18]),new J(10,new $(1,34)),new J(16,new $(1,28)),new J(22,new $(1,22)),new J(28,new $(1,16))),new t(3,Int32Array.from([6,22]),new J(15,new $(1,55)),new J(26,new $(1,44)),new J(18,new $(2,17)),new J(22,new $(2,13))),new t(4,Int32Array.from([6,26]),new J(20,new $(1,80)),new J(18,new $(2,32)),new J(26,new $(2,24)),new J(16,new $(4,9))),new t(5,Int32Array.from([6,30]),new J(26,new $(1,108)),new J(24,new $(2,43)),new J(18,new $(2,15),new $(2,16)),new J(22,new $(2,11),new $(2,12))),new t(6,Int32Array.from([6,34]),new J(18,new $(2,68)),new J(16,new $(4,27)),new J(24,new $(4,19)),new J(28,new $(4,15))),new t(7,Int32Array.from([6,22,38]),new J(20,new $(2,78)),new J(18,new $(4,31)),new J(18,new $(2,14),new $(4,15)),new J(26,new $(4,13),new $(1,14))),new t(8,Int32Array.from([6,24,42]),new J(24,new $(2,97)),new J(22,new $(2,38),new $(2,39)),new J(22,new $(4,18),new $(2,19)),new J(26,new $(4,14),new $(2,15))),new t(9,Int32Array.from([6,26,46]),new J(30,new $(2,116)),new J(22,new $(3,36),new $(2,37)),new J(20,new $(4,16),new $(4,17)),new J(24,new $(4,12),new $(4,13))),new t(10,Int32Array.from([6,28,50]),new J(18,new $(2,68),new $(2,69)),new J(26,new $(4,43),new $(1,44)),new J(24,new $(6,19),new $(2,20)),new J(28,new $(6,15),new $(2,16))),new t(11,Int32Array.from([6,30,54]),new J(20,new $(4,81)),new J(30,new $(1,50),new $(4,51)),new J(28,new $(4,22),new $(4,23)),new J(24,new $(3,12),new $(8,13))),new t(12,Int32Array.from([6,32,58]),new J(24,new $(2,92),new $(2,93)),new J(22,new $(6,36),new $(2,37)),new J(26,new $(4,20),new $(6,21)),new J(28,new $(7,14),new $(4,15))),new t(13,Int32Array.from([6,34,62]),new J(26,new $(4,107)),new J(22,new $(8,37),new $(1,38)),new J(24,new $(8,20),new $(4,21)),new J(22,new $(12,11),new $(4,12))),new t(14,Int32Array.from([6,26,46,66]),new J(30,new $(3,115),new $(1,116)),new J(24,new $(4,40),new $(5,41)),new J(20,new $(11,16),new $(5,17)),new J(24,new $(11,12),new $(5,13))),new t(15,Int32Array.from([6,26,48,70]),new J(22,new $(5,87),new $(1,88)),new J(24,new $(5,41),new $(5,42)),new J(30,new $(5,24),new $(7,25)),new J(24,new $(11,12),new $(7,13))),new t(16,Int32Array.from([6,26,50,74]),new J(24,new $(5,98),new $(1,99)),new J(28,new $(7,45),new $(3,46)),new J(24,new $(15,19),new $(2,20)),new J(30,new $(3,15),new $(13,16))),new t(17,Int32Array.from([6,30,54,78]),new J(28,new $(1,107),new $(5,108)),new J(28,new $(10,46),new $(1,47)),new J(28,new $(1,22),new $(15,23)),new J(28,new $(2,14),new $(17,15))),new t(18,Int32Array.from([6,30,56,82]),new J(30,new $(5,120),new $(1,121)),new J(26,new $(9,43),new $(4,44)),new J(28,new $(17,22),new $(1,23)),new J(28,new $(2,14),new $(19,15))),new t(19,Int32Array.from([6,30,58,86]),new J(28,new $(3,113),new $(4,114)),new J(26,new $(3,44),new $(11,45)),new J(26,new $(17,21),new $(4,22)),new J(26,new $(9,13),new $(16,14))),new t(20,Int32Array.from([6,34,62,90]),new J(28,new $(3,107),new $(5,108)),new J(26,new $(3,41),new $(13,42)),new J(30,new $(15,24),new $(5,25)),new J(28,new $(15,15),new $(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new J(28,new $(4,116),new $(4,117)),new J(26,new $(17,42)),new J(28,new $(17,22),new $(6,23)),new J(30,new $(19,16),new $(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new J(28,new $(2,111),new $(7,112)),new J(28,new $(17,46)),new J(30,new $(7,24),new $(16,25)),new J(24,new $(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new J(30,new $(4,121),new $(5,122)),new J(28,new $(4,47),new $(14,48)),new J(30,new $(11,24),new $(14,25)),new J(30,new $(16,15),new $(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new J(30,new $(6,117),new $(4,118)),new J(28,new $(6,45),new $(14,46)),new J(30,new $(11,24),new $(16,25)),new J(30,new $(30,16),new $(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new J(26,new $(8,106),new $(4,107)),new J(28,new $(8,47),new $(13,48)),new J(30,new $(7,24),new $(22,25)),new J(30,new $(22,15),new $(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new J(28,new $(10,114),new $(2,115)),new J(28,new $(19,46),new $(4,47)),new J(28,new $(28,22),new $(6,23)),new J(30,new $(33,16),new $(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new J(30,new $(8,122),new $(4,123)),new J(28,new $(22,45),new $(3,46)),new J(30,new $(8,23),new $(26,24)),new J(30,new $(12,15),new $(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new $(3,117),new $(10,118)),new J(28,new $(3,45),new $(23,46)),new J(30,new $(4,24),new $(31,25)),new J(30,new $(11,15),new $(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new $(7,116),new $(7,117)),new J(28,new $(21,45),new $(7,46)),new J(30,new $(1,23),new $(37,24)),new J(30,new $(19,15),new $(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new $(5,115),new $(10,116)),new J(28,new $(19,47),new $(10,48)),new J(30,new $(15,24),new $(25,25)),new J(30,new $(23,15),new $(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new $(13,115),new $(3,116)),new J(28,new $(2,46),new $(29,47)),new J(30,new $(42,24),new $(1,25)),new J(30,new $(23,15),new $(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new $(17,115)),new J(28,new $(10,46),new $(23,47)),new J(30,new $(10,24),new $(35,25)),new J(30,new $(19,15),new $(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new $(17,115),new $(1,116)),new J(28,new $(14,46),new $(21,47)),new J(30,new $(29,24),new $(19,25)),new J(30,new $(11,15),new $(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new $(13,115),new $(6,116)),new J(28,new $(14,46),new $(23,47)),new J(30,new $(44,24),new $(7,25)),new J(30,new $(59,16),new $(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new $(12,121),new $(7,122)),new J(28,new $(12,47),new $(26,48)),new J(30,new $(39,24),new $(14,25)),new J(30,new $(22,15),new $(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new $(6,121),new $(14,122)),new J(28,new $(6,47),new $(34,48)),new J(30,new $(46,24),new $(10,25)),new J(30,new $(2,15),new $(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new $(17,122),new $(4,123)),new J(28,new $(29,46),new $(14,47)),new J(30,new $(49,24),new $(10,25)),new J(30,new $(24,15),new $(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new $(4,122),new $(18,123)),new J(28,new $(13,46),new $(32,47)),new J(30,new $(48,24),new $(14,25)),new J(30,new $(42,15),new $(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new $(20,117),new $(4,118)),new J(28,new $(40,47),new $(7,48)),new J(30,new $(43,24),new $(22,25)),new J(30,new $(10,15),new $(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new $(19,118),new $(6,119)),new J(28,new $(18,47),new $(31,48)),new J(30,new $(34,24),new $(34,25)),new J(30,new $(20,15),new $(61,16)))],t})(),un;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(un||(un={}));var B6=(function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[un.DATA_MASK_000,new t(un.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[un.DATA_MASK_001,new t(un.DATA_MASK_001,function(e,r){return(e&1)===0})],[un.DATA_MASK_010,new t(un.DATA_MASK_010,function(e,r){return r%3===0})],[un.DATA_MASK_011,new t(un.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[un.DATA_MASK_100,new t(un.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[un.DATA_MASK_101,new t(un.DATA_MASK_101,function(e,r){return e*r%6===0})],[un.DATA_MASK_110,new t(un.DATA_MASK_110,function(e,r){return e*r%6<3})],[un.DATA_MASK_111,new t(un.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t})(),uJ=(function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new xe;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,n=i-1;n>=o;n--)a=this.copyBit(8,n,a);for(var r=i-8;r<i;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=DM.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new xe},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Qc.getVersionForNumber(r);for(var n=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,a,n);var s=Qc.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(o,a,n);if(s=Qc.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new xe},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=B6.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),c=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var y=o?i-1-g:g,w=0;w<2;w++)a.get(p-w,y)||(d++,f<<=1,this.bitMatrix.get(p-w,y)&&(f|=1),d===8&&(s[c++]=f,d=0,f=0));o=!o}if(c!==r.getTotalCodewords())throw new xe;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=B6.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,a=e.getHeight();i<a;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t})(),z6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fJ=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,a,o,s;if(e.length!==r.getTotalCodewords())throw new Be;var c=r.getECBlocksForLevel(n),f=0,d=c.getECBlocks();try{for(var p=z6(d),g=p.next();!g.done;g=p.next()){var y=g.value;f+=y.getCount()}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var w=new Array(f),_=0;try{for(var A=z6(d),S=A.next();!S.done;S=A.next())for(var y=S.value,T=0;T<y.getCount();T++){var R=y.getDataCodewords(),N=c.getECCodewordsPerBlock()+R;w[_++]=new t(R,new Uint8Array(N))}}catch(F){o={error:F}}finally{try{S&&!S.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}for(var M=w[0].codewords.length,L=w.length-1;L>=0;){var O=w[L].codewords.length;if(O===M)break;L--}L++;for(var D=M-c.getECCodewordsPerBlock(),j=0,T=0;T<D;T++)for(var B=0;B<_;B++)w[B].codewords[T]=e[j++];for(var B=L;B<_;B++)w[B].codewords[D]=e[j++];for(var z=w[0].codewords.length,T=D;T<z;T++)for(var B=0;B<_;B++){var V=B<L?T:T+1;w[B].codewords[V]=e[j++]}return w},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),ua;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(ua||(ua={}));var tr=(function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Be;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(ua.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(ua.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(ua.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(ua.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(ua.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(ua.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(ua.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(ua.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(ua.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(ua.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),dJ=(function(){function t(){}return t.decode=function(e,r,n,i){var a=new PM(e),o=new Ze,s=new Array,c=-1,f=-1;try{var d=null,p=!1,g=void 0;do{if(a.available()<4)g=tr.TERMINATOR;else{var y=a.readBits(4);g=tr.forBits(y)}switch(g){case tr.TERMINATOR:break;case tr.FNC1_FIRST_POSITION:case tr.FNC1_SECOND_POSITION:p=!0;break;case tr.STRUCTURED_APPEND:if(a.available()<16)throw new xe;c=a.readBits(8),f=a.readBits(8);break;case tr.ECI:var w=t.parseECIValue(a);if(d=Jr.getCharacterSetECIByValue(w),d===null)throw new xe;break;case tr.HANZI:var _=a.readBits(4),A=a.readBits(g.getCharacterCountBits(r));_===t.GB2312_SUBSET&&t.decodeHanziSegment(a,o,A);break;default:var S=a.readBits(g.getCharacterCountBits(r));switch(g){case tr.NUMERIC:t.decodeNumericSegment(a,o,S);break;case tr.ALPHANUMERIC:t.decodeAlphanumericSegment(a,o,S,p);break;case tr.BYTE:t.decodeByteSegment(a,o,S,d,s,i);break;case tr.KANJI:t.decodeKanjiSegment(a,o,S);break;default:throw new xe}break}}while(g!==tr.TERMINATOR)}catch{throw new xe}return new Mm(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),c,f)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new xe;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,n--}try{r.append(va.decode(i,pt.GB2312))}catch(c){throw new xe(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new xe;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,n--}try{r.append(va.decode(i,pt.SHIFT_JIS))}catch(c){throw new xe(c)}},t.decodeByteSegment=function(e,r,n,i,a,o){if(8*n>e.available())throw new xe;for(var s=new Uint8Array(n),c=0;c<n;c++)s[c]=e.readBits(8);var f;i===null?f=pt.guessEncoding(s,o):f=i.getName();try{r.append(va.decode(s,f))}catch(d){throw new xe(d)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new xe;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var a=r.length();n>1;){if(e.available()<11)throw new xe;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new xe;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new xe;var i=e.readBits(10);if(i>=1e3)throw new xe;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new xe;var a=e.readBits(7);if(a>=100)throw new xe;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new xe;var o=e.readBits(4);if(o>=10)throw new xe;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new xe},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),NM=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t})(),U6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hJ=(function(){function t(){this.rsDecoder=new jm(yi.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Po.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new uJ(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new NM(!0)),a}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,a,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=fJ.getDataBlocks(f,s,c),p=0;try{for(var g=U6(d),y=g.next();!y.done;y=g.next()){var w=y.value;p+=w.getNumDataCodewords()}}catch(L){n={error:L}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}var _=new Uint8Array(p),A=0;try{for(var S=U6(d),T=S.next();!T.done;T=S.next()){var w=T.value,R=w.getCodewords(),N=w.getNumDataCodewords();this.correctErrors(R,N);for(var M=0;M<N;M++)_[A++]=R[M]}}catch(L){a={error:L}}finally{try{T&&!T.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}return dJ.decode(_,s,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new pn}for(var i=0;i<r;i++)e[i]=n[i]},t})(),pJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gJ=(function(t){pJ(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e})(Oe),vJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mJ=(function(){function t(e,r,n,i,a,o,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,a=this.startY+r/2,o=new Int32Array(3),s=this.image,c=0;c<r;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!s.get(d,f);)d++;for(var p=0;d<i;){if(s.get(d,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,d);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;d++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&a.get(r,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&!a.get(r,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(r,c)&&s[1]<=n;)s[1]++,c++;if(c===o||s[1]>n)return NaN;for(;c<o&&!a.get(r,c)&&s[2]<=n;)s[2]++,c++;if(s[2]>n)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,a,o=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=vJ(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.aboutEquals(f,c,s))return g.combineEstimate(c,s,f)}}catch(w){i={error:w}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var y=new gJ(s,c,f);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},t})(),yJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xJ=(function(t){yJ(e,t);function e(r,n,i,a){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=this.count+1,o=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,c,a)},e})(Oe),bJ=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),Eh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wJ=(function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(or.TRY_HARDER)!==void 0,n=e!=null&&e.get(or.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=s-1;d<a&&!c;d+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(t.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,g,n);if(y===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var w=this.findRowSkip();w>f[2]&&(d+=w-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(t.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,o,n);y===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var _=this.selectBestPatterns();return Oe.orderBestPatterns(_),new bJ(_)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var a=r/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&r>=o&&s.get(r-o,e-o);)a[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!s.get(r-o,e-o)&&a[1]<=n;)a[1]++,o++;if(e<o||r<o||a[1]>n)return!1;for(;e>=o&&r>=o&&s.get(r-o,e-o)&&a[0]<=n;)a[0]++,o++;if(a[0]>n)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&r+o<f&&s.get(r+o,e+o);)a[2]++,o++;if(e+o>=c||r+o>=f)return!1;for(;e+o<c&&r+o<f&&!s.get(r+o,e+o)&&a[3]<n;)a[3]++,o++;if(e+o>=c||r+o>=f||a[3]>=n)return!1;for(;e+o<c&&r+o<f&&s.get(r+o,e+o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(r,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(r,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&a.get(r,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(r,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(r,c)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&a.get(r,c)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,r);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,r)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&a.get(c,r)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(c,r);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,r)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&a.get(c,r)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,p=0,g=d.length;p<g;p++){var y=d[p];if(y.aboutEquals(c,s,o)){d[p]=y.combineEstimate(s,o,c),f=!0;break}}if(!f){var w=new xJ(o,s,c);d.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=Eh(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,a=0,o=0,s=this.possibleCenters.length;try{for(var c=Eh(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=t.CENTER_QUORUM&&(a++,o+=d.getEstimatedModuleSize())}}catch(_){e={error:_}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var y=Eh(this.possibleCenters),w=y.next();!w.done;w=y.next()){var d=w.value;g+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(_){n={error:_}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}return g<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,i,a=this.possibleCenters.length;if(a<3)throw new se;var o=this.possibleCenters,s;if(a>3){var c=0,f=0;try{for(var d=Eh(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value,y=g.getEstimatedModuleSize();c+=y,f+=y*y}}catch(M){e={error:M}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}s=c/a;var w=Math.sqrt(f/a-s*s);o.sort(function(M,L){var O=Math.abs(L.getEstimatedModuleSize()-s),D=Math.abs(M.getEstimatedModuleSize()-s);return O<D?-1:O>D?1:0});for(var _=Math.max(.2*s,w),A=0;A<o.length&&o.length>3;A++){var S=o[A];Math.abs(S.getEstimatedModuleSize()-s)>_&&(o.splice(A,1),A--)}}if(o.length>3){var c=0;try{for(var T=Eh(o),R=T.next();!R.done;R=T.next()){var N=R.value;c+=N.getEstimatedModuleSize()}}catch(L){n={error:L}}finally{try{R&&!R.done&&(i=T.return)&&i.call(T)}finally{if(n)throw n.error}}s=c/o.length,o.sort(function(L,O){if(O.getCount()===L.getCount()){var D=Math.abs(O.getEstimatedModuleSize()-s),j=Math.abs(L.getEstimatedModuleSize()-s);return D<j?1:D>j?-1:0}else return O.getCount()-L.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),_J=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(or.NEED_RESULT_POINT_CALLBACK);var r=new wJ(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(r,n,i);if(a<1)throw new se("No pattern found in proccess finder.");var o=t.computeDimension(r,n,i,a),s=Qc.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+i.getX(),p=n.getY()-r.getY()+i.getY(),g=1-3/c,y=Math.floor(r.getX()+g*(d-r.getX())),w=Math.floor(r.getY()+g*(p-r.getY())),_=4;_<=16;_<<=1)try{f=this.findAlignmentInRegion(a,y,w,_);break}catch(R){if(!(R instanceof se))throw R}var A=t.createTransform(r,n,i,f,o),S=t.sampleGrid(this.image,A,o),T;return f===null?T=[i,r,n]:T=[i,r,n,f],new jE(S,T)},t.createTransform=function(e,r,n,i,a){var o=a-3.5,s,c,f,d;return i!==null?(s=i.getX(),c=i.getY(),f=o-3,d=f):(s=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),f=o,d=o),TM.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),s,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=LE.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var a=bt.round(Oe.distance(e,r)/i),o=bt.round(Oe.distance(e,n)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new se("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,i),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(r-(i-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,c),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var a=Math.abs(i-r)>Math.abs(n-e);if(a){var o=e;e=r,r=o,o=n,n=i,i=o}for(var s=Math.abs(n-e),c=Math.abs(i-r),f=-s/2,d=e<n?1:-1,p=r<i?1:-1,g=0,y=n+d,w=e,_=r;w!==y;w+=d){var A=a?_:w,S=a?w:_;if(g===1===this.image.get(A,S)){if(g===2)return bt.distance(w,_,e,r);g++}if(f+=c,f>0){if(_===i)break;_+=p,f-=s}}return g===2?bt.distance(n+d,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var a=Math.floor(i*e),o=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-o<e*3)throw new se("Alignment top exceeds estimated module size.");var c=Math.max(0,n-a),f=Math.min(this.image.getHeight()-1,n+a);if(f-c<e*3)throw new se("Alignment bottom exceeds estimated module size.");var d=new mJ(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return d.find()},t})(),f_=(function(){function t(){this.decoder=new hJ}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(or.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),i=t.NO_POINTS}else{var o=new _J(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),i=o.getPoints()}n.getOther()instanceof NM&&n.getOther().applyMirroredCorrection(i);var s=new Wn(n.getText(),n.getRawBytes(),void 0,i,Le.QR_CODE,void 0),c=n.getByteSegments();c!==null&&s.putMetadata(Dn.BYTE_SEGMENTS,c);var f=n.getECLevel();return f!==null&&s.putMetadata(Dn.ERROR_CORRECTION_LEVEL,f),n.hasStructuredAppend()&&(s.putMetadata(Dn.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Dn.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new se;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],c=n[0];if(s>=c||a>=o)throw new se;if(o-a!==c-s&&(c=s+(o-a),c>=e.getWidth()))throw new se;var f=Math.round((c-s+1)/i),d=Math.round((o-a+1)/i);if(f<=0||d<=0)throw new se;if(d!==f)throw new se;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-c;if(g>0){if(g>p)throw new se;s-=g}var y=a+Math.floor((d-1)*i)-o;if(y>0){if(y>p)throw new se;a-=y}for(var w=new Po(f,d),_=0;_<d;_++)for(var A=a+Math.floor(_*i),S=0;S<f;S++)e.get(s+Math.floor(S*i),A)&&w.set(S,_);return w},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),a=e[0],o=e[1],s=!0,c=0;a<i&&o<n;){if(s!==r.get(a,o)){if(++c===5)break;s=!s}a++,o++}if(a===i||o===n)throw new se;return(a-e[0])/7},t.NO_POINTS=new Array,t})(),AJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vt=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return bt.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=AJ(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[a++]=c}}catch(f){r={error:f}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=en.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),EJ=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),SJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CJ=(function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),a=t.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(n,i)),new EJ(i,a)},t.detect=function(e,r){for(var n,i,a=new Array,o=0,s=0,c=!1;o<r.getHeight();){var f=t.findVertices(r,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var d=(n=void 0,SJ(a)),p=d.next();!p.done;p=d.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},t.findVertices=function(e,r,n){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,a,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);i<r;i+=t.ROW_STEP){var d=t.findGuardPattern(e,a,i,n,!1,o,f);if(d!=null){for(;i>0;){var p=t.findGuardPattern(e,a,--i,n,!1,o,f);if(p!=null)d=p;else{i++;break}}s[0]=new Oe(d[0],i),s[1]=new Oe(d[1],i),c=!0;break}}var g=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<r;g++){var d=t.findGuardPattern(e,p[0],g,n,!1,o,f);if(d!=null&&Math.abs(p[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<t.MAX_PATTERN_DRIFT)p=d,y=0;else{if(y>t.SKIPPED_ROW_COUNT_MAX)break;y++}}g-=y+1,s[2]=new Oe(p[0],g),s[3]=new Oe(p[1],g)}return g-i<t.BARCODE_MIN_HEIGHT&&en.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,a,o,s){en.fillWithin(s,0,s.length,0);for(var c=r,f=0;e.get(c,n)&&c>0&&f++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,p=0,g=o.length,y=a;d<i;d++){var w=e.get(d,n);if(w!==y)s[p]++;else{if(p===g-1){if(t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=s[0]+s[1],Yt.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,y=!y}}return p===g-1&&t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return 1/0;var c=a/o;n*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=r[d]*c,y=p>g?p-g:g-p;if(y>n)return 1/0;f+=y}return f/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),TJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vc=(function(){function t(e,r){if(r.length===0)throw new Be;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Yt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=TJ(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){r={error:p}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;Yt.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=this.field.add(r[s-o],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Be("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=0;s<n;s++)for(var c=r[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,i[f]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Be;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new Ze,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t})(),IJ=(function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Be;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new CM;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),OJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),RJ=(function(t){OJ(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var a=1,o=0;o<r;o++)i.expTable[o]=a,a=a*n%r;for(var o=0;o<r-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Vc(i,new Int32Array([0])),i.one=new Vc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Be;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Vc(this,i)},e.PDF417_GF=new e(vt.NUMBER_OF_CODEWORDS,3),e})(IJ),PJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DJ=(function(){function t(){this.field=RJ.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,a,o=new Vc(this.field,e),s=new Int32Array(r),c=!1,f=r;f>0;f--){var d=o.evaluateAt(this.field.exp(f));s[r-f]=d,d!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(n!=null)try{for(var g=PJ(n),y=g.next();!y.done;y=g.next()){var w=y.value,_=this.field.exp(e.length-1-w),A=new Vc(this.field,new Int32Array([this.field.subtract(0,_),1]));p=p.multiply(A)}}catch(D){i={error:D}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var S=new Vc(this.field,s),T=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),S,r),R=T[0],N=T[1],M=this.findErrorLocations(R),L=this.findErrorMagnitudes(N,R,M),f=0;f<M.length;f++){var O=e.length-1-this.field.log(M[f]);if(O<0)throw pn.getChecksumInstance();e[O]=this.field.subtract(e[O],L[f])}return M.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=e,o=r,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var f=a,d=s;if(a=o,s=c,a.isZero())throw pn.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),y=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var w=o.getDegree()-a.getDegree(),_=this.field.multiply(o.getCoefficient(o.getDegree()),y);p=p.add(this.field.buildMonomial(w,_)),o=o.subtract(a.multiplyByMonomial(w,_))}c=p.multiply(s).subtract(d).negative()}var A=c.getCoefficient(0);if(A===0)throw pn.getChecksumInstance();var S=this.field.inverse(A),T=c.multiply(S),R=o.multiply(S);return[T,R]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,a=1;a<this.field.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==r)throw pn.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new Vc(this.field,a),c=n.length,f=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),p=this.field.subtract(0,e.evaluateAt(d)),g=this.field.inverse(s.evaluateAt(d));f[o]=this.field.multiply(p,g)}return f},t})(),d_=(function(){function t(e,r,n,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,a)}return t.prototype.constructor_1=function(e,r,n,i,a){var o=r==null||n==null,s=i==null||a==null;if(o&&s)throw new se;o?(r=new Oe(0,i.getY()),n=new Oe(0,a.getY())):s&&(i=new Oe(e.getWidth()-1,r.getY()),a=new Oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var d=new Oe(c.getX(),f);n?i=d:o=d}if(r>0){var p=n?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+r);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var y=new Oe(p.getX(),g);n?a=y:s=y}return new t(this.image,i,a,o,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),NJ=(function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),zE=(function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(o,s,c,f,d,p){if(o==="%%")return"%";if(r[++n]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,y;switch(p){case"s":y=r[n];break;case"c":y=r[n][0];break;case"f":y=parseFloat(r[n]).toFixed(o);break;case"p":y=parseFloat(r[n]).toPrecision(o);break;case"e":y=parseFloat(r[n]).toExponential(o);break;case"x":y=parseInt(r[n]).toString(g||16);break;case"d":y=parseFloat(parseInt(r[n],g||10).toPrecision(o)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(g);for(var w=parseInt(c),_=c&&c[0]+""=="0"?"0":" ";y.length<w;)y=s!==void 0?y+_:_+y;return y}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t})(),kJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kM=(function(){function t(e){this.boundingBox=new d_(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new zE,i=0;try{for(var a=kJ(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),MJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jJ=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Hh=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,a=function(p,g){var y={getKey:function(){return p},getValue:function(){return g}};y.getValue()>n?(n=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===n&&i.push(y.getKey())};try{for(var o=MJ(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=jJ(s.value,2),f=c[0],d=c[1];a(f,d)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return vt.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),LJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),q2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},F6=(function(t){LJ(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=q2(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,d=1,p=0,g=s;g<c;g++)if(n[g]!=null){var y=n[g],w=y.getRowNumber()-f;if(w===0)p++;else if(w===1)d=Math.max(d,p),p=1,f=y.getRowNumber();else if(w<0||y.getRowNumber()>=r.getRowCount()||w>g)n[g]=null;else{var _=void 0;d>2?_=(d-2)*w:_=w;for(var A=_>=g,S=1;S<=_&&!A;S++)A=n[g-S]!=null;A?n[g]=null:(f=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=q2(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=o;d<s;d++)if(c[d]!=null){var p=c[d];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=r.getRowCount()?c[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),a=new Hh,o=new Hh,s=new Hh,c=new Hh;try{for(var f=q2(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(_){r={error:_}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<vt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>vt.MAX_ROWS_IN_BARCODE)return null;var w=new NJ(a.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,w),w},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(r[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:o+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(kM),BJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zJ=(function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=vt.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=n[r],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[r],f[3]=c[r],r>0&&(f[0]=n[r-1],f[4]=s[r-1],f[5]=c[r-1]),r>1&&(f[8]=n[r-2],f[10]=s[r-2],f[11]=c[r-2]),r<n.length-1&&(f[1]=n[r+1],f[6]=s[r+1],f[7]=c[r+1]),r<n.length-2&&(f[9]=n[r+2],f[12]=s[r+2],f[13]=c[r+2]);try{for(var d=BJ(f),p=d.next();!p.done;p=d.next()){var g=p.value;if(t.adjustRowNumber(o,g))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new zE,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t})(),UJ=(function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),FJ=(function(){function t(){}return t.initialize=function(){for(var e=0;e<vt.SYMBOL_TABLE.length;e++)for(var r=vt.SYMBOL_TABLE[e],n=r&1,i=0;i<vt.BARS_IN_MODULE;i++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(vt.BARS_IN_MODULE)),t.RATIOS_TABLE[e][vt.BARS_IN_MODULE-i-1]=Math.fround(a/vt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=bt.sum(e),n=new Int32Array(vt.BARS_IN_MODULE),i=0,a=0,o=0;o<vt.MODULES_IN_CODEWORD;o++){var s=r/(2*vt.MODULES_IN_CODEWORD)+o*r/vt.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return vt.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=bt.sum(e),n=new Array(vt.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var a=o_.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var c=0,f=t.RATIOS_TABLE[s],d=0;d<vt.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-n[d]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,o=vt.SYMBOL_TABLE[s])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(vt.SYMBOL_TABLE.length).map(function(e){return new Array(vt.BARS_IN_MODULE)}),t})(),VJ=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),V6=(function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t})(),HJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),$J=(function(t){HJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(_i),qJ=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new $J;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new kE;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),GJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),WJ=(function(t){GJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(_i),KJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),XJ=(function(t){KJ(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Be("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new WJ;i=et.MAX_VALUE}this.buf=en.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new kE;this.ensureCapacity(this.count+i),Yt.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return en.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e})(qJ),$t;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function MM(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var s1;function gl(t){if(typeof s1>"u"&&(s1=MM()),s1===null)throw new Error("BigInt is not supported!");return s1(t)}function YJ(){var t=[];t[0]=gl(1);var e=gl(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var QJ=(function(){function t(){}return t.decode=function(e,r){var n=new Ze(""),i=Jr.ISO8859_1;n.enableDecoding(i);for(var a=1,o=e[a++],s=new VJ;a<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(o,e,i,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:Jr.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new xe;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)o=e[a++];else throw xe.getFormatInstance()}if(n.length()===0)throw xe.getFormatInstance();var c=new Mm(null,n.toString(),null,r);return c.setOther(s),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw xe.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)i[a]=e[r];n.setSegmentIndex(et.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Ze;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ze;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new Ze;r=t.textCompaction(e,r+1,f),n.setSender(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Ze;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Ze;r=t.numericCompaction(e,r+1,p),n.setSegmentCount(et.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new Ze;r=t.numericCompaction(e,r+1,g),n.setTimestamp(V6.parseLong(g.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new Ze;r=t.numericCompaction(e,r+1,y),n.setChecksum(et.parseInt(y.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var w=new Ze;r=t.numericCompaction(e,r+1,w),n.setFileSize(V6.parseLong(w.toString()));break;default:throw xe.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw xe.getFormatInstance()}if(s!==-1){var _=r-s;n.isLastSegment()&&_--,n.setOptionalData(en.copyOfRange(e,s,s+_))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),o=0,s=!1;r<e[0]&&!s;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],a[o]=c,o++;break}}return t.decodeTextCompaction(i,a,o,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var a=$t.ALPHA,o=$t.ALPHA,s=0;s<n;){var c=e[s],f="";switch(a){case $t.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case t.LL:a=$t.LOWER;break;case t.ML:a=$t.MIXED;break;case t.PS:o=a,a=$t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case t.AS:o=a,a=$t.ALPHA_SHIFT;break;case t.ML:a=$t.MIXED;break;case t.PS:o=a,a=$t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.MIXED:if(c<t.PL)f=t.MIXED_CHARS[c];else switch(c){case t.PL:a=$t.PUNCT;break;case 26:f=" ";break;case t.LL:a=$t.LOWER;break;case t.AL:a=$t.ALPHA;break;case t.PS:o=a,a=$t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.PUNCT:if(c<t.PAL)f=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=$t.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(a=o,c<t.PAL)f=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=$t.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break}f!==""&&i.append(f),s++}},t.byteCompaction=function(e,r,n,i,a){var o=new XJ,s=0,c=0,f=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=r[i++];i<r[0]&&!f;)switch(d[s++]=p,c=900*c+p,p=r[i++],p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(gl(c)>>gl(8*(5-g))));c=0,s=0}break}i===r[0]&&p<t.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=p);for(var y=0;y<s;y++)o.write(d[y]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!f;){var w=r[i++];if(w<t.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+w;else switch(w){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(gl(c)>>gl(8*(5-g))));c=0,s=0}}break}return a.append(va.decode(o.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,a=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(t.decodeBase900toBase10(o,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=gl(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*gl(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new xe;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=MM()?YJ():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),Sh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZJ=(function(){function t(){}return t.decode=function(e,r,n,i,a,o,s){for(var c=new d_(e,r,n,i,a),f=null,d=null,p,g=!0;;g=!1){if(r!=null&&(f=t.getRowIndicatorColumn(e,c,r,!0,o,s)),i!=null&&(d=t.getRowIndicatorColumn(e,c,i,!1,o,s)),p=t.merge(f,d),p==null)throw se.getNotFoundInstance();var y=p.getBoundingBox();if(g&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var w=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(w,d);for(var _=f!=null,A=1;A<=w;A++){var S=_?A:w-A;if(p.getDetectionResultColumn(S)===void 0){var T=void 0;S===0||S===w?T=new F6(c,S===0):T=new kM(c),p.setDetectionResultColumn(S,T);for(var R=-1,N=R,M=c.getMinY();M<=c.getMaxY();M++){if(R=t.getStartColumn(p,S,M,_),R<0||R>c.getMaxX()){if(N===-1)continue;R=N}var L=t.detectCodeword(e,c.getMinX(),c.getMaxX(),_,R,M,o,s);L!=null&&(T.setCodeword(M,L),N=R,o=Math.min(o,L.getWidth()),s=Math.max(s,L.getWidth()))}}}return t.createDecoderResult(p)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=d_.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new zJ(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),o=0;try{for(var s=Sh(i),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(y){r={error:y}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),p=0;o>0&&d[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=d.length-1;g>0&&d[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var a=Sh(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,a,o){for(var s=new F6(r,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),p=Math.trunc(Math.trunc(n.getY()));p<=r.getMaxY()&&p>=r.getMinY();p+=f){var g=t.detectCodeword(e,0,e.getWidth(),i,d,p,a,o);g!=null&&(s.setCodeword(p,g),i?d=g.getStartX():d=g.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>vt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=r[s][c+1].getValue(),d=s*e.getBarcodeColumnCount()+c;f.length===0?n.push(d):f.length===1?i[d]=f[0]:(o.push(d),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,vt.toIntArray(n),vt.toIntArray(o),p)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)r[i[c]]=a[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var f=d instanceof pn;if(!f)throw d}if(o.length===0)throw pn.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw pn.getChecksumInstance()}throw pn.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new Hh;var f=0;try{for(var d=Sh(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)try{for(var y=(i=void 0,Sh(g.getCodewords())),w=y.next();!w.done;w=y.next()){var _=w.value;if(_!=null){var A=_.getRowNumber();if(A>=0){if(A>=o.length)continue;o[A][f].setValue(_.getValue())}}}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}f++}}catch(S){r={error:S}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var a,o,s=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-s)&&(c=e.getDetectionResultColumn(r-s).getCodeword(n)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(c=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var d=(a=void 0,Sh(e.getDetectionResultColumn(r).getCodewords())),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(y){a={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,a,o,s,c){a=t.adjustCodewordStartColumn(e,r,n,i,a,o);var f=t.getModuleBitCount(e,r,n,i,a,o);if(f==null)return null;var d,p=bt.sum(f);if(i)d=a+p;else{for(var g=0;g<f.length/2;g++){var y=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=y}d=a,a=d-p}if(!t.checkCodewordSkew(p,s,c))return null;var w=FJ.getDecodedValue(f),_=vt.getCodeword(w);return _===-1?null:new UJ(a,d,t.getCodewordBucketNumber(w),_)},t.getModuleBitCount=function(e,r,n,i,a,o){for(var s=a,c=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?s<n:s>=r)&&f<c.length;)e.get(s,o)===p?(c[f]++,s+=d):(f++,p=!p);return f===c.length||s===(i?n:r)&&f===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,a,o){for(var s=a,c=i?-1:1,f=0;f<2;f++){for(;(i?s>=r:s<n)&&i===e.get(s,o);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw xe.getFormatInstance();var i=1<<r+1,a=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var o=QJ.decode(e,""+r);return o.setErrorsCorrected(a),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw pn.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw xe.getFormatInstance();var n=e[0];if(n>e.length)throw xe.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw xe.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new zE,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new DJ,t})(),JJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h_=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw se.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof xe||n instanceof pn?se.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,a,o=new Array,s=CJ.detectMultiple(e,r,n);try{for(var c=JJ(s.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,p=ZJ.decode(s.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),g=new Wn(p.getText(),p.getRawBytes(),void 0,d,Le.PDF_417);g.putMetadata(Dn.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&g.putMetadata(Dn.PDF417_EXTRA_METADATA,y),o.push(g)}}catch(w){i={error:w}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(w){return w})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?et.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),eee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),H6=(function(t){eee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(_i),$6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tee=(function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(or.TRY_HARDER)!==void 0,n=e==null?null:e.get(or.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(o){return o===Le.UPC_A||o===Le.UPC_E||o===Le.EAN_13||o===Le.EAN_8||o===Le.CODABAR||o===Le.CODE_39||o===Le.CODE_93||o===Le.CODE_128||o===Le.ITF||o===Le.RSS_14||o===Le.RSS_EXPANDED});a&&!r&&i.push(new Vh(e)),n.includes(Le.QR_CODE)&&i.push(new f_),n.includes(Le.DATA_MATRIX)&&i.push(new u_),n.includes(Le.AZTEC)&&i.push(new l_),n.includes(Le.PDF_417)&&i.push(new h_),a&&r&&i.push(new Vh(e))}i.length===0&&(r||i.push(new Vh(e)),i.push(new f_),i.push(new u_),i.push(new l_),i.push(new h_),r&&i.push(new Vh(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=$6(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new H6("No readers where selected, nothing can be read.");try{for(var i=$6(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof H6)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new se("No MultiFormat Readers were able to detect the code.")},t})(),ree=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),nee=(function(t){ree(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,a=new tee;return a.setHints(r),i=t.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(od),iee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){iee(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new h_,r)||this}return e})(od);var aee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){aee(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new f_,r)||this}return e})(od);var p_;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(p_||(p_={}));const l1=p_;var jM=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Rl(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,a=r.length;a<=e;a++){var o=n.multiply(new Rl(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Be("No error correction bytes");var n=e.length-r;if(n<=0)throw new Be("No data bytes provided");var i=this.buildGenerator(r),a=new Int32Array(n);Yt.arraycopy(e,0,a,0,n);var o=new Rl(this.field,a);o=o.multiplyByMonomial(r,1);for(var s=o.divide(i)[1],c=s.getCoefficients(),f=r-c.length,d=0;d<f;d++)e[n+d]=0;Yt.arraycopy(c,0,e,n+f,c.length)},t})(),$h=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=n[o],c=0;c<i-1;c++){var f=s[c];f===s[c+1]&&f===n[o+1][c]&&f===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var c=n[o];s+6<i&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(t.isWhiteHorizontal(c,s-4,s)||t.isWhiteHorizontal(c,s+7,s+11))&&r++,o+6<a&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(t.isWhiteVertical(n,s,o-4,o)||t.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=n[o],c=0;c<i;c++)s[c]===1&&r++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-f)*10/f);return d*t.N4},t.getDataMaskBit=function(e,r,n){var i,a;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,i=(a&1)+a%3;break;case 6:a=n*r,i=(a&1)+a%3&1;break;case 7:a=n*r,i=a%3+(n+r&1)&1;break;default:throw new Be("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var c=0,f=-1,d=0;d<a;d++){var p=r?o[s][d]:o[d][s];p===f?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,f=p)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),oee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},see=(function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=oee(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;en.fill(o,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],o=r.bytes[n],s=0,c=this.width;s<c;++s)if(a[s]!==o[s])return!1;return!0},t.prototype.toString=function(){for(var e=new Ze,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),g_=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Ze;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),lee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),er=(function(t){lee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(_i),q6=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,i,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new gn;t.makeTypeInfoBits(e,r,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),c=t.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(n.setBoolean(f,d,s),a<8){var p=n.getWidth()-a-1,g=8;n.setBoolean(p,g,s)}else{var p=8,g=n.getHeight()-7+(a-8);n.setBoolean(p,g,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new gn;t.makeVersionInfoBits(e,n);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var s=n.get(i);i--,r.setBoolean(a,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,a,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,a=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(t.isEmpty(n.get(f,s))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,r!==255&&$h.getDataMaskBit(r,f,s)&&(d=!d),n.setBoolean(f,s,d)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new er("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-et.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Be("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!g_.isValidMaskPattern(r))throw new er("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(a,10);var o=new gn;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new er("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new er("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new er;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new er;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new er;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&t.isEmpty(r.get(f,s))&&t.embedPositionAdjustmentPattern(f-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),cee=(function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),G6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return $h.applyMaskPenaltyRule1(e)+$h.applyMaskPenaltyRule2(e)+$h.applyMaskPenaltyRule3(e)+$h.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(l1.CHARACTER_SET)!==void 0;a&&(i=n.get(l1.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new gn;if(o===tr.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Jr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new gn;this.appendBytes(e,o,f,i);var d;if(n!==null&&n.get(l1.QR_VERSION)!==void 0){var p=Number.parseInt(n.get(l1.QR_VERSION).toString(),10);d=Qc.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,d);if(!this.willFit(g,d,r))throw new er("Data too big for requested version")}else d=this.recommendVersion(r,o,s,f);var y=new gn;y.appendBitArray(s);var w=o===tr.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(w,d,o,y),y.appendBitArray(f);var _=d.getECBlocksForLevel(r),A=d.getTotalCodewords()-_.getTotalECCodewords();this.terminateBits(A,y);var S=this.interleaveWithECBytes(y,d.getTotalCodewords(),A,_.getNumBlocks()),T=new g_;T.setECLevel(r),T.setMode(o),T.setVersion(d);var R=d.getDimensionForVersion(),N=new see(R,R),M=this.chooseMaskPattern(S,r,d,N);return T.setMaskPattern(M),q6.buildMatrix(S,r,d,M,N),T.setMatrix(N),T},t.recommendVersion=function(e,r,n,i){var a=this.calculateBitsNeeded(r,n,i,Qc.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,i,o);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Jr.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return tr.KANJI;for(var n=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return tr.BYTE}return i?tr.ALPHANUMERIC:n?tr.NUMERIC:tr.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=va.encode(e,Jr.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=r[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<g_.NUM_MASK_PATTERNS;s++){q6.buildMatrix(e,r,n,s,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=s)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=Qc.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new er("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),o=a.getTotalECCodewords(),s=i-o,c=(e+7)/8;return s>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new er("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var i=a;i<8;i++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),i=0;i<o;++i)r.appendBits((i&1)===0?236:17,8);if(r.getSize()!==n)throw new er("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,a,o){if(i>=n)throw new er("Block ID too large");var s=e%n,c=n-s,f=Math.floor(e/n),d=f+1,p=Math.floor(r/n),g=p+1,y=f-p,w=d-g;if(y!==w)throw new er("EC bytes mismatch");if(n!==c+s)throw new er("RS blocks mismatch");if(e!==(p+y)*c+(g+w)*s)throw new er("Total bytes mismatch");i<c?(a[0]=p,o[0]=y):(a[0]=g,o[0]=w)},t.interleaveWithECBytes=function(e,r,n,i){var a,o,s,c;if(e.getSizeInBytes()!==n)throw new er("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,g=new Array,y=0;y<i;++y){var w=new Int32Array(1),_=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,y,w,_);var A=w[0],S=new Uint8Array(A);e.toBytes(8*f,S,0,A);var T=t.generateECBytes(S,_[0]);g.push(new cee(S,T)),d=Math.max(d,A),p=Math.max(p,T.length),f+=w[0]}if(n!==f)throw new er("Data bytes does not match offset");for(var R=new gn,y=0;y<d;++y)try{for(var N=(a=void 0,G6(g)),M=N.next();!M.done;M=N.next()){var L=M.value,S=L.getDataBytes();y<S.length&&R.appendBits(S[y],8)}}catch(B){a={error:B}}finally{try{M&&!M.done&&(o=N.return)&&o.call(N)}finally{if(a)throw a.error}}for(var y=0;y<p;++y)try{for(var O=(s=void 0,G6(g)),D=O.next();!D.done;D=O.next()){var L=D.value,T=L.getErrorCorrectionBytes();y<T.length&&R.appendBits(T[y],8)}}catch(B){s={error:B}}finally{try{D&&!D.done&&(c=O.return)&&c.call(O)}finally{if(s)throw s.error}}if(r!==R.getSizeInBytes())throw new er("Interleaving error: "+r+" and "+R.getSizeInBytes()+" differ.");return R},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),a=0;a<n;a++)i[a]=e[a]&255;new jM(yi.QR_CODE_FIELD_256).encode(i,r);for(var o=new Uint8Array(r),a=0;a<r;a++)o[a]=i[n+a];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new er(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,r,n,i){switch(r){case tr.NUMERIC:t.appendNumericBytes(e,n);break;case tr.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case tr.BYTE:t.append8BitBytes(e,n,i);break;case tr.KANJI:t.appendKanjiBytes(e,n);break;default:throw new er("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getDigit(e.charAt(i));if(i+2<n){var o=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<n){var o=t.getDigit(e.charAt(i+1));r.appendBits(a*10+o,7),i+=2}else r.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new er;if(i+1<n){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new er;r.appendBits(a*45+o,11),i+=2}else r.appendBits(a,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=va.encode(e,n)}catch(c){throw new er(c)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=va.encode(e,Jr.SJIS)}catch(p){throw new er(p)}for(var i=n.length,a=0;a<i;a+=2){var o=n[a]&255,s=n[a+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new er("Invalid byte sequence");var d=(f>>8)*192+(f&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(tr.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Jr.UTF8.getName(),t})();var uee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){uee(e,t);function e(r,n,i,a,o,s,c,f){var d=t.call(this,s,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=i,d.left=a,d.top=o,a+s>n||o+c>i)throw new Be("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(s,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Be("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Yt.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Yt.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<n;s++){var c=s*r;Yt.arraycopy(this.yuvData,o,a,c,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var c=s*r,f=0;f<r;f++){var d=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<n;a++,o+=this.dataWidth)for(var s=o+r/2,c=o,f=o+r-1;c<s;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},e.prototype.invert=function(){return new ME(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(km);var fee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){fee(e,t);function e(r,n,i,a,o,s,c){var f=t.call(this,n,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*i,p=new Uint8ClampedArray(d),g=0;g<d;g++){var y=r[g],w=y>>16&255,_=y>>7&510,A=y&255;p[g]=(w+_+A)/4&255}f.luminances=p}else f.luminances=r;if(a===void 0&&(f.dataWidth=n),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+n>f.dataWidth||f.top+i>f.dataHeight)throw new Be("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Be("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Yt.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Yt.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<n;s++){var c=s*r;Yt.arraycopy(this.luminances,o,a,c,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new ME(this)},e})(km);var dee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hee=(function(t){dee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e})(Jr),pee=(function(){function t(){}return t.ISO_8859_1=Jr.ISO8859_1,t})(),v_,gee=301,vee=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=gee);return{LOG:t,ALOG:e}};v_=vee([],[]),v_.LOG;v_.ALOG;var W6;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(W6||(W6={}));var K6=129,LM=230,mee=231,yee=235,xee=236,bee=237,wee=238,_ee=239,Aee=240,G2=254,Eee=254,X6="[)>05",Y6="[)>06",Q6="",Mt=0,Tn=1,ei=2,Yr=3,fn=4,Bn=5,See=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Mt},t.prototype.encode=function(e){var r=La.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Bn:e.writeCodeword(mee),e.signalEncoderChange(Bn);return;case Tn:e.writeCodeword(LM),e.signalEncoderChange(Tn);return;case Yr:e.writeCodeword(wee),e.signalEncoderChange(Yr);break;case ei:e.writeCodeword(_ee),e.signalEncoderChange(ei);break;case fn:e.writeCodeword(Aee),e.signalEncoderChange(fn);break;default:throw new Error("Illegal mode: "+i)}else La.isExtendedASCII(n)?(e.writeCodeword(yee),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(La.isDigit(e)&&La.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t})(),Cee=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Bn},t.prototype.encode=function(e){var r=new Ze;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}var a=r.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(a<=249)r.setCharAt(0,pt.getCharAt(a));else if(a<=1555)r.setCharAt(0,pt.getCharAt(Math.floor(a/250)+249)),r.insert(1,pt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,n=r.length();f<n;f++)e.writeCodeword(this.randomize255State(r.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t})(),UE=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Tn},t.prototype.encodeMaximal=function(e){for(var r=new Ze,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(i=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&f!==2||d===1&&(n>3||f!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(LM),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Ze;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Ze;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,c,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,c,i);break}var f=r.length();if(f%3===0){var d=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var a=r.length(),o=r.toString().substring(0,a-i);r.setLengthToZero(),r.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(G2)}else if(o===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(G2),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(G2)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Mt)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,a=new Ze;return a.append(n),a.append(i),a.toString()},t})(),Tee=(function(){function t(){}return t.prototype.getEncodingMode=function(){return fn},t.prototype.encode=function(e){for(var r=new Ze;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var o=La.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}}r.append(pt.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(Mt)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(pt.getCharAt(e-64)):La.illegalCharacter(pt.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(a<<6)+o,c=s>>16&255,f=s>>8&255,d=s&255,p=new Ze;return p.append(c),r>=2&&p.append(f),r>=3&&p.append(d),p.toString()},t})(),Iee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Oee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=(function(){function t(e,r,n,i,a,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return t.lookup=function(e,r,n,i,a){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=Oee(Pee),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),Ree=(function(t){Iee(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e})(Ct),Pee=[new Ct(!1,3,5,8,8,1),new Ct(!1,5,7,10,10,1),new Ct(!0,5,7,16,6,1),new Ct(!1,8,10,12,12,1),new Ct(!0,10,11,14,6,2),new Ct(!1,12,12,14,14,1),new Ct(!0,16,14,24,10,1),new Ct(!1,18,14,16,16,1),new Ct(!1,22,18,18,18,1),new Ct(!0,22,18,16,10,2),new Ct(!1,30,20,20,20,1),new Ct(!0,32,24,16,14,2),new Ct(!1,36,24,22,22,1),new Ct(!1,44,28,24,24,1),new Ct(!0,49,28,22,14,2),new Ct(!1,62,36,14,14,4),new Ct(!1,86,42,16,16,4),new Ct(!1,114,48,18,18,4),new Ct(!1,144,56,20,20,4),new Ct(!1,174,68,22,22,4),new Ct(!1,204,84,24,24,4,102,42),new Ct(!1,280,112,14,14,16,140,56),new Ct(!1,368,144,16,16,16,92,36),new Ct(!1,456,192,18,18,16,114,48),new Ct(!1,576,224,20,20,16,144,56),new Ct(!1,696,272,22,22,16,174,68),new Ct(!1,816,336,24,24,16,136,56),new Ct(!1,1050,408,18,18,36,175,68),new Ct(!1,1304,496,20,20,36,163,62),new Ree],Dee=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new Ze,i=0,a=r.length;i<a;i++){var o=String.fromCharCode(r[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Ze,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ct.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),Nee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),kee=(function(t){Nee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Yr},e.prototype.encode=function(r){for(var n=new Ze;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var o=La.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Mt);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):La.illegalCharacter(pt.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(Eee),r.getNewEncoding()<0&&r.signalEncoderChange(Mt)},e})(UE),Mee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),jee=(function(t){Mee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ei},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e})(UE),La=(function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=K6+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new UE,s=[new See,o,new jee,new kee,new Tee,new Cee],c=new Dee(e);c.setSymbolShape(r),c.setSizeConstraints(n,i),e.startsWith(X6)&&e.endsWith(Q6)?(c.writeCodeword(xee),c.setSkipAtEnd(2),c.pos+=X6.length):e.startsWith(Y6)&&e.endsWith(Q6)&&(c.writeCodeword(bee),c.setSkipAtEnd(2),c.pos+=Y6.length);var f=Mt;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();d<p&&f!==Mt&&f!==Bn&&f!==fn&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(K6);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===Yr&&i===Yr){for(var a=Math.min(r+3,e.length),o=r;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Mt}else if(n===fn&&i===fn){for(var a=Math.min(r+4,e.length),o=r;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Mt}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===Mt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(r+a===e.length){en.fill(o,0),en.fill(s,0);var c=this.findMinimums(i,s,et.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[Mt]===c)return Mt;if(f===1){if(o[Bn]>0)return Bn;if(o[fn]>0)return fn;if(o[ei]>0)return ei;if(o[Yr]>0)return Yr}return Tn}var d=e.charCodeAt(r+a);if(a++,this.isDigit(d)?i[Mt]+=.5:this.isExtendedASCII(d)?(i[Mt]=Math.ceil(i[Mt]),i[Mt]+=2):(i[Mt]=Math.ceil(i[Mt]),i[Mt]++),this.isNativeC40(d)?i[Tn]+=2/3:this.isExtendedASCII(d)?i[Tn]+=8/3:i[Tn]+=4/3,this.isNativeText(d)?i[ei]+=2/3:this.isExtendedASCII(d)?i[ei]+=8/3:i[ei]+=4/3,this.isNativeX12(d)?i[Yr]+=2/3:this.isExtendedASCII(d)?i[Yr]+=13/3:i[Yr]+=10/3,this.isNativeEDIFACT(d)?i[fn]+=3/4:this.isExtendedASCII(d)?i[fn]+=17/4:i[fn]+=13/4,this.isSpecialB256(d)?i[Bn]+=4:i[Bn]++,a>=4){if(en.fill(o,0),en.fill(s,0),this.findMinimums(i,s,et.MAX_VALUE,o),s[Mt]<this.min(s[Bn],s[Tn],s[ei],s[Yr],s[fn]))return Mt;if(s[Bn]<s[Mt]||s[Bn]+1<this.min(s[Tn],s[ei],s[Yr],s[fn]))return Bn;if(s[fn]+1<this.min(s[Bn],s[Tn],s[ei],s[Yr],s[Mt]))return fn;if(s[ei]+1<this.min(s[Bn],s[Tn],s[fn],s[Yr],s[Mt]))return ei;if(s[Yr]+1<this.min(s[Bn],s[Tn],s[fn],s[ei],s[Mt]))return Yr;if(s[Tn]+1<this.min(s[Mt],s[Bn],s[fn],s[ei])){if(s[Tn]<s[Yr])return Tn;if(s[Tn]===s[Yr]){for(var p=r+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Yr;if(!this.isNativeX12(g))break;p++}return Tn}}}}},t.min=function(e,r,n,i,a){var o=Math.min(e,Math.min(r,Math.min(n,i)));return a===void 0?o:Math.min(o,a)},t.findMinimums=function(e,r,n,i){for(var a=0;a<6;a++){var o=r[a]=Math.ceil(e[a]);n>o&&(n=o,en.fill(i,0)),n===o&&(i[a]=i[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=et.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t})(),W2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z6=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return va.encode(e,this.charset)!=null}catch{return!1}},t})(),Lee=(function(){function t(e,r,n){var i,a,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(j){return new Z6(hee.forName(j))}),this.encoders=[];var d=[];d.push(new Z6(pee.ISO_8859_1));for(var p=r!=null&&r.name.startsWith("UTF"),g=0;g<e.length;g++){var y=!1;try{for(var w=(i=void 0,W2(d)),_=w.next();!_.done;_=w.next()){var A=_.value,S=e.charAt(g),T=S.charCodeAt(0);if(T===n||A.canEncode(S)){y=!0;break}}}catch(j){i={error:j}}finally{try{_&&!_.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}if(!y)try{for(var R=(o=void 0,W2(this.ENCODERS)),N=R.next();!N.done;N=R.next()){var A=N.value;if(A.canEncode(e.charAt(g))){d.push(A),y=!0;break}}}catch(j){o={error:j}}finally{try{N&&!N.done&&(s=R.return)&&s.call(R)}finally{if(o)throw o.error}}y||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var M=0;try{for(var L=W2(d),O=L.next();!O.done;O=L.next()){var A=O.value;this.encoders[M++]=A}}catch(j){c={error:j}}finally{try{O&&!O.done&&(f=L.return)&&f.call(L)}finally{if(c)throw c.error}}}var D=-1;if(r!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&r.name===this.encoders[g].name){D=g;break}}this.priorityEncoderIndex=D}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return va.encode(pt.getCharAt(e),this.encoders[r].name)},t})(),Bee=3,zee=(function(){function t(e,r,n){this.fnc1=n;var i=new Lee(e,r,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Ze,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,a,o){var s=e.charAt(i).charCodeAt(0),c=0,f=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(s===o||r.canEncode(s,d))&&this.addEdge(n,i+1,new J6(s,r,d,a,o))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,a=new J6[i+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var o=1;o<=i;o++){for(var s=0;s<r.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,r,a,o,a[o][s],n);for(var s=0;s<r.length();s++)a[o-1][s]=null}for(var c=-1,f=et.MAX_VALUE,s=0;s<r.length();s++)if(a[i][s]!=null){var d=a[i][s];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var y=r.encode(g.c,g.encoderIndex),o=y.length-1;o>=0;o--)p.unshift(y[o]&255);var w=g.previous===null?0:g.previous.encoderIndex;w!==g.encoderIndex&&p.unshift(256+r.getECIValue(g.encoderIndex)),g=g.previous}for(var _=[],o=0;o<_.length;o++)_[o]=p[o];return _},t})(),J6=(function(){function t(e,r,n,i,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(o+=Bee),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),Uee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();var e8;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(e8||(e8={}));(function(t){Uee(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(zee);var Fee=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),t8=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t})(),Vee=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),Hee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),FE=(function(t){Hee(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+et.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e})(Vee),$ee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),qee=(function(t){$ee(e,t);function e(r,n,i){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(FE);function Gee(t,e,r){return new qee(t,e,r)}function Ch(t,e,r){return new FE(t,e,r)}var Wee=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pl=0,gv=1,ha=2,BM=3,wo=4,Kee=new FE(null,0,0),K2=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Xee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Yee(t){var e,r;try{for(var n=Xee(t),i=n.next();!i.done;i=n.next()){var a=i.value;en.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[Pl][wo]=0,t[gv][wo]=0,t[gv][Pl]=28,t[BM][wo]=0,t[ha][wo]=0,t[ha][Pl]=15,t}var zM=Yee(en.createInt32Array(6,6)),Qee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zee=(function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=K2[this.mode][e];i=Ch(i,a&65535,a>>16),n+=a>>16}var o=e===ha?4:5;return i=Ch(i,r,o),new t(i,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===ha?4:5;return n=Ch(n,zM[this.mode][e],i),n=Ch(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===wo||this.mode===ha){var a=K2[n][Pl];r=Ch(r,a&65535,a>>16),i+=a>>16,n=Pl}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=Gee(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(K2[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new gn;try{for(var s=Qee(i),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return pt.format("%s bits=%d bytes=%d",Wee[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(Kee,Pl,0,0),t})();function Jee(t){var e=pt.getCharCode(" "),r=pt.getCharCode("."),n=pt.getCharCode(",");t[Pl][e]=1;for(var i=pt.getCharCode("Z"),a=pt.getCharCode("A"),o=a;o<=i;o++)t[Pl][o]=o-a+2;t[gv][e]=1;for(var s=pt.getCharCode("z"),c=pt.getCharCode("a"),o=c;o<=s;o++)t[gv][o]=o-c+2;t[ha][e]=1;for(var f=pt.getCharCode("9"),d=pt.getCharCode("0"),o=d;o<=f;o++)t[ha][o]=o-d+2;t[ha][n]=12,t[ha][r]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)t[BM][pt.getCharCode(p[g])]=g;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<y.length;g++)pt.getCharCode(y[g])>0&&(t[wo][pt.getCharCode(y[g])]=g);return t}var X2=Jee(en.createInt32Array(5,256)),c1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ete=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=pt.getCharCode(" "),r=pt.getCharCode(`
`),n=t8.singletonList(Zee.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case pt.getCharCode("\r"):a=o===r?2:0;break;case pt.getCharCode("."):a=o===e?3:0;break;case pt.getCharCode(","):a=o===e?4:0;break;case pt.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var s=t8.min(n,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,a=[];try{for(var o=c1(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,r,a)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,a=X2[e.getMode()][i]>0,o=null,s=0;s<=wo;s++){var c=X2[s][i];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!a||s===e.getMode()||s===ha){var f=o.latchAndAppend(s,c);n.push(f)}if(!a&&zM[e.getMode()][s]>=0){var d=o.shiftAndAppend(s,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||X2[e.getMode()][i]===0){var p=e.addBinaryShiftChar(r);n.push(p)}},t.updateStateListForPair=function(e,r,n){var i,a,o=[];try{for(var s=c1(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,r,n,o)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,i){var a=e.endBinaryShift(r);if(i.push(a.latchAndAppend(wo,n)),e.getMode()!==wo&&i.push(a.shiftAndAppend(wo,n)),n===3||n===4){var o=a.latchAndAppend(ha,16-n).latchAndAppend(ha,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,a,o=[];try{for(var s=c1(e),c=s.next();!c.done;c=s.next()){var f=c.value,d=!0,p=function(A){if(A.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(A)&&(o=o.filter(function(S){return S!==A}))};try{for(var g=(i=void 0,c1(o)),y=g.next();!y.done;y=g.next()){var w=y.value,_=p(w);if(_==="break")break}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}d&&o.push(f)}}catch(A){r={error:A}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t})(),tte=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new ete(e).encode(),a=et.truncDivision(i.getSize()*r,100)+11,o=i.getSize()+a,s,c,f,d,p;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,c=Math.abs(n),c>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Be(pt.format("Illegal value %s for layers",n));f=t.totalBitsInLayer(c,s),d=t.WORD_SIZE[c];var g=f-f%d;if(p=t.stuffBits(i,d),p.getSize()+a>g)throw new Be("Data to large for user specified layer");if(s&&p.getSize()>d*64)throw new Be("Data to large for user specified layer")}else{d=0,p=null;for(var y=0;;y++){if(y>t.MAX_NB_BITS)throw new Be("Data too large for an Aztec code");if(s=y<=3,c=s?y+1:y,f=t.totalBitsInLayer(c,s),!(o>f)){(p==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],p=t.stuffBits(i,d));var g=f-f%d;if(!(s&&p.getSize()>d*64)&&p.getSize()+a<=g)break}}}var w=t.generateCheckWords(p,f,d),_=p.getSize()/d,A=t.generateModeMessage(s,c,_),S=(s?11:14)+c*4,T=new Int32Array(S),R;if(s){R=S;for(var y=0;y<T.length;y++)T[y]=y}else{R=S+1+2*et.truncDivision(et.truncDivision(S,2)-1,15);for(var N=et.truncDivision(S,2),M=et.truncDivision(R,2),y=0;y<N;y++){var L=y+et.truncDivision(y,15);T[N-y-1]=M-L-1,T[N+y]=M+L+1}}for(var O=new Po(R),y=0,D=0;y<c;y++){for(var j=(c-y)*4+(s?9:12),B=0;B<j;B++)for(var z=B*2,V=0;V<2;V++)w.get(D+z+V)&&O.set(T[y*2+V],T[y*2+B]),w.get(D+j*2+z+V)&&O.set(T[y*2+B],T[S-1-y*2-V]),w.get(D+j*4+z+V)&&O.set(T[S-1-y*2-V],T[S-1-y*2-B]),w.get(D+j*6+z+V)&&O.set(T[S-1-y*2-B],T[y*2+V]);D+=j*8}if(t.drawModeMessage(O,s,R,A),s)t.drawBullsEye(O,et.truncDivision(R,2),5);else{t.drawBullsEye(O,et.truncDivision(R,2),7);for(var y=0,B=0;y<et.truncDivision(S,2)-1;y+=15,B+=16)for(var V=et.truncDivision(R,2)&1;V<R;V+=2)O.set(et.truncDivision(R,2)-B,V),O.set(et.truncDivision(R,2)+B,V),O.set(V,et.truncDivision(R,2)-B),O.set(V,et.truncDivision(R,2)+B)}var F=new Fee;return F.setCompact(s),F.setSize(R),F.setLayers(c),F.setCodeWords(_),F.setMatrix(O),F},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var a=r-i;a<=r+i;a++)e.set(a,r-i),e.set(a,r+i),e.set(r-i,a),e.set(r+i,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new gn;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var a=et.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+et.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var i,a,o=e.getSize()/n,s=new jM(t.getGF(n)),c=et.truncDivision(r,n),f=t.bitsToWords(e,n,c);s.encode(f,c-o);var d=r%n,p=new gn;p.appendBits(0,d);try{for(var g=tte(Array.from(f)),y=g.next();!y.done;y=g.next()){var w=y.value;p.appendBits(w,n)}}catch(_){i={error:_}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),a,o;for(a=0,o=e.getSize()/r;a<o;a++){for(var s=0,c=0;c<r;c++)s|=e.get(a*r+c)?1<<r-c-1:0;i[a]=s}return i},t.getGF=function(e){switch(e){case 4:return yi.AZTEC_PARAM;case 6:return yi.AZTEC_DATA_6;case 8:return yi.AZTEC_DATA_8;case 10:return yi.AZTEC_DATA_10;case 12:return yi.AZTEC_DATA_12;default:throw new Be("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new gn,i=e.getSize(),a=(1<<r)-2,o=0;o<i;o+=r){for(var s=0,c=0;c<r;c++)(o+c>=i||e.get(o+c))&&(s|=1<<r-1-c);(s&a)===a?(n.appendBits(s&a,r),o--):(s&a)===0?(n.appendBits(s|1,r),o--):n.appendBits(s,r)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const UM="YOUR_RAKUTEN_APP_ID_HERE",rte="b72c14dc75bcde18fb7d3628bf7e92b7";async function nte(t){console.log(`[商品検索] JANコード: ${t}`);try{const e=await ite(t);if(e)return console.log("[商品検索] 楽天市場APIで商品発見"),e}catch(e){console.warn("[商品検索] 楽天市場API失敗:",e)}try{const e=await ate(t);if(e)return console.log("[商品検索] 楽天商品APIで商品発見"),e}catch(e){console.warn("[商品検索] 楽天商品API失敗:",e)}try{const e=await ote(t);if(e)return console.log("[商品検索] JAN Code Lookup APIで商品発見"),e}catch(e){console.warn("[商品検索] JAN Code Lookup API失敗:",e)}try{const e=await ste(t);if(e)return console.log("[商品検索] Open Food Facts APIで商品発見"),e}catch(e){console.warn("[商品検索] Open Food Facts API失敗:",e)}return console.warn("[商品検索] すべてのAPIで商品が見つかりませんでした。モックデータを使用します。"),lte(t)}async function ite(t){const e=new URL("https://app.rakuten.co.jp/services/api/IchibaItem/Search/20220601");e.searchParams.set("applicationId",UM),e.searchParams.set("keyword",t),e.searchParams.set("hits","1");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.Items||n.Items.length===0)return null;const i=n.Items[0].Item;return{barcode:t,name:i.itemName,price:i.itemPrice,manufacturer:i.shopName||"",imageUrl:i.mediumImageUrls?.[0]?.imageUrl||"",source:"rakuten_ichiba"}}async function ate(t){const e=new URL("https://app.rakuten.co.jp/services/api/Product/Search/20170426");e.searchParams.set("applicationId",UM),e.searchParams.set("keyword",t),e.searchParams.set("hits","1");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.Products||n.Products.length===0)return null;const i=n.Products[0].Product;return{barcode:t,name:i.productName,price:i.minPrice||0,manufacturer:i.makerName||"",imageUrl:i.mediumImageUrl||"",source:"rakuten_product"}}async function ote(t){const e=new URL("https://api.jancodelookup.com/");e.searchParams.set("appId",rte),e.searchParams.set("query",t),e.searchParams.set("type","code");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.product||n.product.length===0)return null;const i=n.product[0];return{barcode:t,name:i.itemName||"",price:0,manufacturer:i.makerName||i.brandName||"",imageUrl:i.itemImageUrl||"",source:"jancode_lookup"}}async function ste(t){const e=`https://world.openfoodfacts.org/api/v0/product/${t}.json`,r=await fetch(e);if(!r.ok)return null;const n=await r.json();if(n.status!==1||!n.product)return null;const i=n.product;return{barcode:t,name:i.product_name||i.product_name_ja||"",calories:i.nutriments?.["energy-kcal_100g"],price:0,manufacturer:i.brands||"",imageUrl:i.image_url||"",source:"openfoodfacts"}}function lte(t){const r={"4902102072453":{name:"明治おいしい牛乳 900ml",price:258,calories:67,manufacturer:"明治",imageUrl:""},"4901777313989":{name:"サントリー天然水 2L",price:138,calories:0,manufacturer:"サントリー",imageUrl:""},"4902430479318":{name:"ポカリスエット 500ml",price:148,calories:125,manufacturer:"大塚製薬",imageUrl:""}}[t];return r?{barcode:t,...r,source:"mock"}:{barcode:t,name:`商品 (${t})`,price:0,manufacturer:"不明",source:"mock"}}const cte=({onProductFound:t,onClose:e})=>{const r=C.useRef(null),[n,i]=C.useState(null),[a,o]=C.useState(null),[s,c]=C.useState(!1),f=C.useRef(null);C.useEffect(()=>(d(),()=>{p()}),[]);const d=async()=>{try{i(null);const y=new nee;f.current=y;const w=await y.listVideoInputDevices();if(w.length===0)throw new Error("カメラが見つかりません");const _=w.find(S=>{const T=S.label.toLowerCase();return T.includes("back")||T.includes("rear")||T.includes("environment")||T.includes("camera")&&T.includes("0")}),A=_?_.deviceId:w[w.length-1].deviceId;console.log("使用するカメラ:",_?_.label:w[w.length-1].label),y.decodeFromVideoDevice(A,r.current,async(S,T)=>{if(S&&!s){const R=S.getText();if(R===a)return;o(R),c(!0);try{const N=await nte(R);N?(t(N),p()):(i(`商品情報が見つかりませんでした: ${R}`),c(!1),setTimeout(()=>{i(null),o(null)},3e3))}catch(N){console.error("商品情報取得エラー:",N),i("商品情報の取得に失敗しました"),c(!1),setTimeout(()=>{i(null),o(null)},3e3)}}T&&!(T instanceof se)&&console.error("スキャンエラー:",T)})}catch(y){console.error("カメラ起動エラー:",y),i(y instanceof Error?y.message:"カメラの起動に失敗しました")}},p=()=>{f.current&&(f.current.reset(),f.current=null)},g=()=>{p(),e()};return m.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",zIndex:9999,display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{padding:"16px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h2",{style:{margin:0,fontSize:"1.2rem",fontWeight:600},children:"バーコードスキャン"}),m.jsx("button",{onClick:g,style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px"},children:"✕"})]}),m.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[m.jsx("video",{ref:r,style:{width:"100%",height:"100%",objectFit:"cover"}}),m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"300px",height:"150px",border:"2px solid #22c55e",borderRadius:"8px",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}}),s&&m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.8)",color:"#fff",padding:"20px 32px",borderRadius:"12px",fontSize:"1rem",fontWeight:600},children:"商品情報を取得中..."}),n&&m.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(239, 68, 68, 0.95)",color:"#fff",padding:"12px 24px",borderRadius:"8px",fontSize:"0.9rem",maxWidth:"90%",textAlign:"center"},children:n})]}),m.jsx("div",{style:{padding:"16px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",textAlign:"center"},children:m.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#999"},children:"バーコードを枠内に合わせてください"})})]})},ute=({product:t,onAdded:e,onNavigateToStock:r})=>{const{addIntake:n}=Ga(),{addStock:i}=Ka(),[a,o]=C.useState(""),[s,c]=C.useState(t.price?.toString()||""),[f,d]=C.useState("7"),p=()=>{if(!a){alert("カロリーを入力してください");return}if(!s){alert("金額を入力してください");return}n({name:t.name,calories:Number(a),price:Number(s)}),alert("食事記録に追加しました！"),e()},g=()=>{if(!f){alert("賞味期限までの日数を入力してください");return}i({name:t.name,quantity:1,daysRemaining:Number(f),price:s?Number(s):void 0}),r?(e(),setTimeout(()=>{r()},100)):(alert("在庫管理に追加しました！"),e())};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Ip,{size:24,color:"#10b981"}),"商品情報を取得しました"]}),m.jsxs("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"12px",marginBottom:"20px"},children:[m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"商品名"}),m.jsx("div",{style:{fontWeight:600,fontSize:"1.05rem"},children:t.name})]}),t.manufacturer&&m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"メーカー"}),m.jsx("div",{style:{fontWeight:500},children:t.manufacturer})]}),m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"バーコード"}),m.jsx("div",{style:{fontFamily:"monospace",color:"#666"},children:t.barcode})]}),t.price&&m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"価格（参考）"}),m.jsxs("div",{style:{fontWeight:600,color:"var(--primary)"},children:["¥",t.price.toLocaleString()]})]}),m.jsxs("div",{style:{marginTop:"12px",padding:"8px 12px",background:t.source==="rakuten_ichiba"||t.source==="rakuten_product"?"#bf0000":t.source==="jancode_lookup"?"#3b82f6":"#10b981",color:"#fff",borderRadius:"6px",fontSize:"0.75rem",fontWeight:500,display:"inline-block"},children:[t.source==="rakuten_ichiba"&&"楽天市場",t.source==="rakuten_product"&&"楽天商品検索",t.source==="jancode_lookup"&&"JAN Code Lookup",t.source==="openfoodfacts"&&"Open Food Facts",t.source==="mock"&&"モックデータ"]})]}),m.jsxs("div",{style:{marginBottom:"24px"},children:[m.jsxs("h4",{style:{marginBottom:"12px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx(hA,{size:18}),"食事記録に追加"]}),m.jsx("label",{children:"カロリー (kcal)"}),m.jsx("input",{type:"number",value:a,onChange:y=>o(y.target.value),placeholder:"例: 200"}),m.jsx("label",{children:"金額 (円)"}),m.jsx("input",{type:"number",value:s,onChange:y=>c(y.target.value),placeholder:"例: 150"}),m.jsx("button",{className:"submit",onClick:p,style:{background:"#3b82f6"},children:"食事記録に追加"})]}),m.jsxs("div",{children:[m.jsxs("h4",{style:{marginBottom:"12px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx(Pf,{size:18}),"在庫管理に追加"]}),m.jsx("label",{children:"賞味期限までの日数"}),m.jsx("input",{type:"number",value:f,onChange:y=>d(y.target.value),placeholder:"例: 7"}),m.jsx("button",{className:"submit",onClick:g,style:{background:"#10b981"},children:r?"在庫管理に追加して画面移動":"在庫管理に追加"})]}),m.jsx("button",{onClick:e,style:{marginTop:"16px",width:"100%",padding:"12px",background:"transparent",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"#666"},children:"キャンセル"})]})},fte=({onReceiptScanned:t,onClose:e})=>{const r=C.useRef(null),n=C.useRef(null),i=C.useRef(null),[a,o]=C.useState(!1),[s,c]=C.useState(null),[f,d]=C.useState(null),p=async()=>{try{const _=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});r.current&&(r.current.srcObject=_,d(_))}catch(_){console.error("カメラアクセスエラー:",_),c("カメラにアクセスできません。ファイル選択をお試しください。")}};Hn.useEffect(()=>(p(),()=>{f&&f.getTracks().forEach(_=>_.stop())}),[]);const g=async()=>{if(!(!r.current||!n.current)){o(!0),c(null);try{const _=r.current,A=n.current,S=A.getContext("2d");if(!S)throw new Error("Canvas context が取得できません");A.width=_.videoWidth,A.height=_.videoHeight,S.drawImage(_,0,0);const T=await new Promise((M,L)=>{A.toBlob(O=>{O?M(O):L(new Error("Blob変換に失敗しました"))},"image/jpeg",.95)}),R=new File([T],"receipt.jpg",{type:"image/jpeg"}),N=await b6(R);f&&f.getTracks().forEach(M=>M.stop()),t(N)}catch(_){console.error("OCRエラー:",_),c(_.message||"レシートの読み取りに失敗しました")}finally{o(!1)}}},y=async _=>{const A=_.target.files?.[0];if(A){o(!0),c(null);try{const S=await b6(A);f&&f.getTracks().forEach(T=>T.stop()),t(S)}catch(S){console.error("OCRエラー:",S),c(S.message||"レシートの読み取りに失敗しました")}finally{o(!1)}}},w=()=>{f&&f.getTracks().forEach(_=>_.stop()),e()};return m.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",zIndex:1e3,display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{background:"rgba(0,0,0,0.8)",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h3",{style:{color:"white",margin:0},children:"レシートをスキャン"}),m.jsx("button",{onClick:w,style:{background:"transparent",border:"none",color:"white",cursor:"pointer",padding:"8px"},disabled:a,children:m.jsx(ru,{size:24})})]}),m.jsxs("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:[m.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),m.jsx("canvas",{ref:n,style:{display:"none"}}),m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"60%",border:"2px dashed rgba(255, 255, 255, 0.8)",borderRadius:"8px",pointerEvents:"none"},children:m.jsx("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.7)",color:"white",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",whiteSpace:"nowrap"},children:"レシートを枠内に収めてください"})}),s&&m.jsx("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"#ef4444",color:"white",padding:"12px 20px",borderRadius:"8px",maxWidth:"80%",textAlign:"center"},children:s})]}),m.jsxs("div",{style:{background:"rgba(0,0,0,0.8)",padding:"20px",display:"flex",justifyContent:"center",gap:"16px"},children:[m.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:y,style:{display:"none"}}),m.jsxs("button",{onClick:()=>i.current?.click(),disabled:a,style:{background:"#6366f1",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px",opacity:a?.5:1},children:[m.jsx(JU,{size:20}),"ファイル選択"]}),m.jsx("button",{onClick:g,disabled:a,style:{background:"#10b981",color:"white",border:"none",padding:"16px 32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",fontWeight:"bold",opacity:a?.5:1,width:"80px",height:"80px",display:"flex",alignItems:"center",justifyContent:"center"},children:a?"...":m.jsx(np,{size:32})})]})]})},dte=({result:t,onClose:e})=>{const{addExpense:r}=Wa(),{addItem:n}=Ql(),[i,a]=C.useState(t.items),[o,s]=C.useState(null),[c,f]=C.useState(""),[d,p]=C.useState(""),g=i.reduce((M,L)=>M+L.price*(L.quantity||1),0),y=M=>{const L=i[M];s(M),f(L.name),p(L.price.toString())},w=()=>{if(o===null)return;const M=parseInt(d,10);if(isNaN(M)||M<=0){alert("正しい金額を入力してください");return}const L=[...i];L[o]={...L[o],name:c.trim(),price:M},a(L),s(null),f(""),p("")},_=()=>{s(null),f(""),p("")},A=M=>{if(window.confirm("この商品を削除しますか？")){const L=i.filter((O,D)=>D!==M);a(L)}},S=()=>{const M=window.prompt("商品名を入力してください");if(!M||!M.trim())return;const L=window.prompt("金額を入力してください");if(!L)return;const O=parseInt(L,10);if(isNaN(O)||O<=0){alert("正しい金額を入力してください");return}a([...i,{name:M.trim(),price:O,quantity:1}])},T=()=>{if(i.length===0){alert("商品が1つもありません");return}if(!window.confirm(`${i.length}個の商品を家計簿に登録しますか？
合計金額: ¥${g.toLocaleString()}`))return;const M=new Date().toISOString();i.forEach(L=>{const O=L.quantity||1;for(let D=0;D<O;D++)r({category:"food",amount:L.price,memo:L.name,date:t.date||M})}),alert("家計簿に登録しました！"),e()},R=()=>{if(i.length===0){alert("商品が1つもありません");return}window.confirm(`${i.length}個の商品を買い物リストに追加しますか？`)&&(i.forEach(M=>{n({name:M.name,quantity:M.quantity||1,price:M.price})}),alert("買い物リストに追加しました！"),e())},N=M=>new Intl.NumberFormat("ja-JP").format(M);return m.jsxs("div",{className:"card",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[m.jsx(pD,{size:20}),"レシート内容"]}),m.jsxs("button",{onClick:S,style:{background:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"4px"},children:[m.jsx(rp,{size:18}),"追加"]})]}),m.jsxs("div",{style:{background:"var(--background)",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:[t.storeName&&m.jsxs("div",{style:{marginBottom:"4px"},children:[m.jsx("strong",{children:"店舗:"})," ",t.storeName]}),t.date&&m.jsxs("div",{children:[m.jsx("strong",{children:"日付:"})," ",t.date]})]}),i.length===0?m.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"商品が検出されませんでした。「追加」ボタンから手動で追加してください。"}):m.jsx("div",{style:{marginBottom:"16px"},children:i.map((M,L)=>m.jsx("div",{style:{padding:"12px",borderBottom:L<i.length-1?"1px solid var(--border)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:o===L?m.jsxs("div",{style:{flex:1,display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{value:c,onChange:O=>f(O.target.value),placeholder:"商品名",style:{flex:1,padding:"6px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"14px"}}),m.jsx("input",{value:d,onChange:O=>p(O.target.value),type:"number",placeholder:"金額",style:{width:"80px",padding:"6px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"14px"}}),m.jsx("button",{onClick:w,style:{background:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:m.jsx(dA,{size:16})}),m.jsx("button",{onClick:_,style:{background:"#6b7280",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"×"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:M.name}),M.quantity&&M.quantity>1&&m.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["数量: ",M.quantity,"個"]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[m.jsxs("span",{style:{fontSize:"16px",fontWeight:"bold",color:"var(--danger)"},children:["¥",N(M.price*(M.quantity||1))]}),m.jsx("button",{onClick:()=>y(L),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",color:"var(--primary)"},children:m.jsx(xD,{size:18})}),m.jsx("button",{onClick:()=>A(L),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",color:"#ef4444"},children:m.jsx(gu,{size:18})})]})]})},L))}),m.jsxs("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"8px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:"合計"}),m.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",color:"var(--danger)"},children:["¥",N(g)]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[m.jsxs("button",{onClick:R,className:"submit",disabled:i.length===0,style:{opacity:i.length===0?.5:1,background:"#10b981",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[m.jsx(Op,{size:18}),"買い物リストに追加"]}),m.jsx("button",{onClick:T,className:"submit",disabled:i.length===0,style:{opacity:i.length===0?.5:1},children:"家計簿に登録"})]}),m.jsx("button",{onClick:e,style:{background:"var(--border)",color:"var(--text)",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:"キャンセル"})]}),m.jsxs("details",{style:{marginTop:"16px"},children:[m.jsx("summary",{style:{cursor:"pointer",fontSize:"12px",color:"var(--text-secondary)"},children:"OCR生テキストを表示"}),m.jsx("pre",{style:{marginTop:"8px",padding:"12px",background:"var(--background)",borderRadius:"4px",fontSize:"11px",overflow:"auto",maxHeight:"200px",whiteSpace:"pre-wrap"},children:t.rawText})]})]})},hte=({onNavigateToStock:t})=>{const[e,r]=C.useState("select"),[n,i]=C.useState(!1),[a,o]=C.useState(null),[s,c]=C.useState(null),f=()=>{r("barcode"),i(!0),o(null)},d=()=>{r("receipt"),i(!0),c(null)},p=A=>{o(A),i(!1)},g=A=>{c(A),i(!1)},y=()=>{o(null),r("select")},w=()=>{c(null),r("select")},_=()=>{r("select"),i(!1),o(null),c(null)};return m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"スキャン"}),e==="select"&&!n&&!a&&!s&&m.jsx(m.Fragment,{children:m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(np,{size:20}),"スキャンモードを選択"]}),m.jsx("p",{style:{color:"#666",marginBottom:"20px",lineHeight:"1.6"},children:"バーコードまたはレシートをスキャンできます"}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[m.jsxs("button",{onClick:f,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"24px 16px",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",fontWeight:500,fontSize:"16px"},children:[m.jsx(qU,{size:48}),m.jsx("span",{children:"バーコード"}),m.jsx("span",{style:{fontSize:"12px",opacity:.9},children:"JANコード"})]}),m.jsxs("button",{onClick:d,style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",border:"none",padding:"24px 16px",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",fontWeight:500,fontSize:"16px"},children:[m.jsx(pD,{size:48}),m.jsx("span",{children:"レシート"}),m.jsx("span",{style:{fontSize:"12px",opacity:.9},children:"OCR読み取り"})]})]})]})}),e==="barcode"&&n&&m.jsx(cte,{onProductFound:p,onClose:_}),e==="barcode"&&a&&m.jsx(ute,{product:a,onAdded:y,onNavigateToStock:t}),e==="receipt"&&n&&m.jsx(fte,{onReceiptScanned:g,onClose:_}),e==="receipt"&&s&&m.jsx(dte,{result:s,onClose:w})]})};function r8(t,e,r){return t.filter(n=>{const i=new Date(n.date);return i.getFullYear()===e&&i.getMonth()+1===r})}function n8(t,e,r,n){const i=r8(r,t,e),a=r8(n,t,e),o=i.reduce((d,p)=>d+p.calories,0),s=i.reduce((d,p)=>d+(p.price||0),0),c=a.reduce((d,p)=>d+p.amount,0),f={};return a.forEach(d=>{f[d.category]=(f[d.category]||0)+d.amount}),{year:t,month:e,intakes:{count:i.length,totalCalories:o,avgCalories:i.length>0?o/i.length:0,totalPrice:s},expenses:{count:a.length,total:c,byCategory:f}}}function pte(t,e,r,n){const i=n8(t,e,r,n);let a=t,o=e-1;o===0&&(o=12,a-=1);const s=n8(a,o,r,n),c=(f,d)=>d===0?f>0?100:0:(f-d)/d*100;return{current:i,previous:s,changes:{intakesCount:c(i.intakes.count,s.intakes.count),totalCalories:c(i.intakes.totalCalories,s.intakes.totalCalories),avgCalories:c(i.intakes.avgCalories,s.intakes.avgCalories),totalExpenses:c(i.expenses.total,s.expenses.total)}}}function gte(t){const{current:e,previous:r,changes:n}=t;return`以下のユーザーの月次健康・家計データを分析し、3〜5つの具体的な改善提案をしてください。

【今月のデータ（${e.year}年${e.month}月）】
- 食事記録: ${e.intakes.count}回
- 総カロリー: ${e.intakes.totalCalories.toLocaleString()}kcal
- 平均カロリー: ${Math.round(e.intakes.avgCalories)}kcal/食
- 食費: ¥${e.intakes.totalPrice.toLocaleString()}
- 総支出: ¥${e.expenses.total.toLocaleString()}

【先月のデータ（${r.year}年${r.month}月）】
- 食事記録: ${r.intakes.count}回
- 総カロリー: ${r.intakes.totalCalories.toLocaleString()}kcal
- 平均カロリー: ${Math.round(r.intakes.avgCalories)}kcal/食
- 総支出: ¥${r.expenses.total.toLocaleString()}

【先月比の変化】
- 食事記録回数: ${n.intakesCount>0?"+":""}${n.intakesCount.toFixed(1)}%
- 総カロリー: ${n.totalCalories>0?"+":""}${n.totalCalories.toFixed(1)}%
- 平均カロリー: ${n.avgCalories>0?"+":""}${n.avgCalories.toFixed(1)}%
- 総支出: ${n.totalExpenses>0?"+":""}${n.totalExpenses.toFixed(1)}%

【お願い】
1. データの傾向を簡潔に分析してください
2. 健康面での改善提案を2〜3点
3. 家計面での改善提案を1〜2点
4. 具体的で実行可能なアドバイスをお願いします
5. 日本語で、親しみやすくわかりやすい表現で回答してください`}function vte(){const{intakes:t}=Ga(),{expenses:e}=Wa(),r=new Date,[n,i]=C.useState(r.getFullYear()),[a,o]=C.useState(r.getMonth()+1),[s,c]=C.useState(null),[f,d]=C.useState(""),[p,g]=C.useState(!1);C.useEffect(()=>{const N=pte(n,a,t,e);c(N)},[n,a,t,e]);const y=async()=>{if(s){g(!0);try{const N=gte(s),M=await VY(N);d(M)}catch(N){console.error("AI提案生成エラー:",N),alert("AI提案の生成に失敗しました")}finally{g(!1)}}},w=()=>{a===1?(i(n-1),o(12)):o(a-1),d("")},_=()=>{a===12?(i(n+1),o(1)):o(a+1),d("")},A=N=>{if(N===0)return m.jsx("span",{className:"change-neutral",children:"±0%"});const M=N>0?m.jsx(fA,{}):m.jsx(VU,{}),L=N>0?"change-up":"change-down";return m.jsxs("span",{className:`change ${L}`,children:[M," ",N>0?"+":"",N.toFixed(1),"%"]})};if(!s)return m.jsx("div",{className:"card",children:"データを読み込み中..."});const{current:S,previous:T,changes:R}=s;return m.jsx("div",{className:"monthly-report",children:m.jsxs("div",{className:"card",children:[m.jsxs("div",{className:"report-header",children:[m.jsx("h3",{children:"📊 月次レポート"}),m.jsxs("div",{className:"month-selector",children:[m.jsx("button",{className:"month-nav-btn",onClick:w,children:"◀"}),m.jsxs("span",{className:"current-month",children:[n,"年",a,"月"]}),m.jsx("button",{className:"month-nav-btn",onClick:_,children:"▶"})]})]}),m.jsxs("div",{className:"report-section",children:[m.jsx("h4",{children:"今月の記録"}),m.jsxs("div",{className:"stats-grid",children:[m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"食事記録"}),m.jsxs("div",{className:"stat-value",children:[S.intakes.count,"回"]}),A(R.intakesCount)]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"平均カロリー"}),m.jsxs("div",{className:"stat-value",children:[Math.round(S.intakes.avgCalories),"kcal"]}),A(R.avgCalories)]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"総カロリー"}),m.jsxs("div",{className:"stat-value",children:[S.intakes.totalCalories.toLocaleString(),"kcal"]}),A(R.totalCalories)]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"総支出"}),m.jsxs("div",{className:"stat-value",children:["¥",S.expenses.total.toLocaleString()]}),A(R.totalExpenses)]})]})]}),m.jsxs("div",{className:"report-section",children:[m.jsxs("h4",{children:["先月（",T.year,"年",T.month,"月）との比較"]}),m.jsxs("div",{className:"comparison-grid",children:[m.jsxs("div",{className:"comparison-item",children:[m.jsx("div",{className:"comparison-label",children:"食事記録"}),m.jsxs("div",{className:"comparison-values",children:[m.jsxs("span",{className:"prev-value",children:[T.intakes.count,"回"]}),m.jsx(_2,{}),m.jsxs("span",{className:"curr-value",children:[S.intakes.count,"回"]})]})]}),m.jsxs("div",{className:"comparison-item",children:[m.jsx("div",{className:"comparison-label",children:"平均カロリー"}),m.jsxs("div",{className:"comparison-values",children:[m.jsxs("span",{className:"prev-value",children:[Math.round(T.intakes.avgCalories),"kcal"]}),m.jsx(_2,{}),m.jsxs("span",{className:"curr-value",children:[Math.round(S.intakes.avgCalories),"kcal"]})]})]}),m.jsxs("div",{className:"comparison-item",children:[m.jsx("div",{className:"comparison-label",children:"総支出"}),m.jsxs("div",{className:"comparison-values",children:[m.jsxs("span",{className:"prev-value",children:["¥",T.expenses.total.toLocaleString()]}),m.jsx(_2,{}),m.jsxs("span",{className:"curr-value",children:["¥",S.expenses.total.toLocaleString()]})]})]})]})]}),m.jsxs("div",{className:"report-section",children:[m.jsxs("h4",{children:[m.jsx($1,{size:20,style:{marginRight:"8px"}}),"AI改善提案"]}),f?m.jsxs("div",{className:"ai-suggestions",children:[m.jsx("div",{className:"suggestions-content",children:f}),m.jsx("button",{className:"submit",onClick:y,disabled:p,style:{marginTop:"12px"},children:"再生成"})]}):m.jsx("button",{className:"submit",onClick:y,disabled:p||S.intakes.count===0,style:{width:"100%"},children:p?"提案を生成中...":"AI改善提案を生成"}),S.intakes.count===0&&m.jsx("p",{className:"no-data-message",children:"データがありません。食事記録を追加してください。"})]})]})})}function FM(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=FM(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function wt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=FM(t))&&(n&&(n+=" "),n+=e);return n}var Y2={},Q2={},i8;function mte(){return i8||(i8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Q2)),Q2}var Z2={},a8;function VM(){return a8||(a8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(Z2)),Z2}var J2={},o8;function VE(){return o8||(o8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=e})(J2)),J2}var eb={},tb={},s8;function yte(){return s8||(s8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(tb)),tb}var l8;function HE(){return l8||(l8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yte(),r=VE();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],o=i.length;if(o===0)return a;let s=0,c="",f="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),s++);s<o;){const p=i[s];f?p==="\\"&&s+1<o?(s++,c+=i[s]):p===f?f="":c+=p:d?p==='"'||p==="'"?f=p:p==="]"?(d=!1,a.push(c),c=""):c+=p:p==="["?(d=!0,c&&(a.push(c),c="")):p==="."?c&&(a.push(c),c=""):c+=p,s++}return c&&a.push(c),a}t.toPath=n})(eb)),eb}var c8;function $E(){return c8||(c8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mte(),r=VM(),n=VE(),i=HE();function a(s,c,f){if(s==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const d=s[c];return d===void 0?r.isDeepKey(c)?a(s,i.toPath(c),f):f:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=s[c];return d===void 0?f:d}default:{if(Array.isArray(c))return o(s,c,f);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const d=s[c];return d===void 0?f:d}}}function o(s,c,f){if(c.length===0)return f;let d=s;for(let p=0;p<c.length;p++){if(d==null||e.isUnsafeProperty(c[p]))return f;d=d[c[p]]}return d===void 0?f:d}t.get=a})(Y2)),Y2}var rb,u8;function xte(){return u8||(u8=1,rb=$E().get),rb}var bte=xte();const cu=ko(bte);var nb={exports:{}},Ht={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f8;function wte(){if(f8)return Ht;f8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),y=Symbol.for("react.client.reference");function w(_){if(typeof _=="object"&&_!==null){var A=_.$$typeof;switch(A){case t:switch(_=_.type,_){case r:case i:case n:case c:case f:case g:return _;default:switch(_=_&&_.$$typeof,_){case o:case s:case p:case d:return _;case a:return _;default:return A}}case e:return A}}}return Ht.ContextConsumer=a,Ht.ContextProvider=o,Ht.Element=t,Ht.ForwardRef=s,Ht.Fragment=r,Ht.Lazy=p,Ht.Memo=d,Ht.Portal=e,Ht.Profiler=i,Ht.StrictMode=n,Ht.Suspense=c,Ht.SuspenseList=f,Ht.isContextConsumer=function(_){return w(_)===a},Ht.isContextProvider=function(_){return w(_)===o},Ht.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},Ht.isForwardRef=function(_){return w(_)===s},Ht.isFragment=function(_){return w(_)===r},Ht.isLazy=function(_){return w(_)===p},Ht.isMemo=function(_){return w(_)===d},Ht.isPortal=function(_){return w(_)===e},Ht.isProfiler=function(_){return w(_)===i},Ht.isStrictMode=function(_){return w(_)===n},Ht.isSuspense=function(_){return w(_)===c},Ht.isSuspenseList=function(_){return w(_)===f},Ht.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===r||_===i||_===n||_===c||_===f||typeof _=="object"&&_!==null&&(_.$$typeof===p||_.$$typeof===d||_.$$typeof===o||_.$$typeof===a||_.$$typeof===s||_.$$typeof===y||_.getModuleId!==void 0)},Ht.typeOf=w,Ht}var d8;function _te(){return d8||(d8=1,nb.exports=wte()),nb.exports}var Ate=_te(),vn=t=>t===0?0:t>0?1:-1,Hi=t=>typeof t=="number"&&t!=+t,Hc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ne=t=>(typeof t=="number"||t instanceof Number)&&!Hi(t),Do=t=>Ne(t)||typeof t=="string",Ete=0,vp=t=>{var e=++Ete;return"".concat(t||"").concat(e)},qn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(e)&&typeof e!="string")return n;var a;if(Hc(e)){if(r==null)return n;var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return Hi(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},HM=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function vr(t,e,r){return Ne(t)&&Ne(e)?t+r*(e-t):e}function $M(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):cu(n,e))===r)}var cr=t=>t===null||typeof t>"u",Jp=t=>cr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Ste=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qE(t){if(typeof t!="string")return!1;var e=Ste;return e.includes(t)}var Cte=["viewBox","children"],h8=["points","pathLength"],ib={svg:Cte,polygon:h8,polyline:h8},GE=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(C.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{qE(i)&&(n[i]=(a=>r[i](r,a)))}),n},Tte=(t,e,r)=>n=>(t(e,r,n),null),e0=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var a=t[i];qE(i)&&typeof a=="function"&&(n||(n={}),n[i]=Tte(a,e,r))}),n},Ite=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function qM(t){if(typeof t!="string")return!1;var e=Ite;return e.includes(t)}function jo(t){var e=Object.entries(t).filter(r=>{var[n]=r;return qM(n)});return Object.fromEntries(e)}var p8=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",g8=null,ab=null,GM=t=>{if(t===g8&&Array.isArray(ab))return ab;var e=[];return C.Children.forEach(t,r=>{cr(r)||(Ate.isFragment(r)?e=e.concat(GM(r.props.children)):e.push(r))}),ab=e,g8=t,e};function WE(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>p8(i)):n=[p8(e)],GM(t).forEach(i=>{var a=cu(i,"type.displayName")||cu(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}var WM=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Ote=(t,e,r,n)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var a=(i=n&&ib?.[n])!==null&&i!==void 0?i:[],o=e.startsWith("data-"),s=typeof t!="function"&&(!!n&&a.includes(e)||qM(e)),c=!!r&&qE(e);return o||s||c},dr=(t,e,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{var o;Ote((o=n)===null||o===void 0?void 0:o[a],a,e,r)&&(i[a]=n[a])}),i},Rte=["children","width","height","viewBox","className","style","title","desc"];function m_(){return m_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m_.apply(null,arguments)}function Pte(t,e){if(t==null)return{};var r,n,i=Dte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Dte(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var KE=C.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:a,className:o,style:s,title:c,desc:f}=t,d=Pte(t,Rte),p=a||{width:n,height:i,x:0,y:0},g=wt("recharts-surface",o);return C.createElement("svg",m_({},dr(d,!0,"svg"),{className:g,width:n,height:i,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),C.createElement("title",null,c),C.createElement("desc",null,f),r)}),Nte=["children","className"];function y_(){return y_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y_.apply(null,arguments)}function kte(t,e){if(t==null)return{};var r,n,i=Mte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Mte(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var kn=C.forwardRef((t,e)=>{var{children:r,className:n}=t,i=kte(t,Nte),a=wt("recharts-layer",n);return C.createElement("g",y_({className:a},dr(i,!0),{ref:e}),r)}),KM=cD(),XM=C.createContext(null),jte=()=>C.useContext(XM);function Wt(t){return function(){return t}}const YM=Math.cos,vv=Math.sin,Ya=Math.sqrt,mv=Math.PI,Lm=2*mv,x_=Math.PI,b_=2*x_,Lc=1e-6,Lte=b_-Lc;function QM(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Bte(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return QM;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class zte{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?QM:Bte(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,c=n-e,f=i-r,d=o-e,p=s-r,g=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(g>Lc)if(!(Math.abs(p*c-f*d)>Lc)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-o,w=i-s,_=c*c+f*f,A=y*y+w*w,S=Math.sqrt(_),T=Math.sqrt(g),R=a*Math.tan((x_-Math.acos((_+g-A)/(2*S*T)))/2),N=R/T,M=R/S;Math.abs(N-1)>Lc&&this._append`L${e+N*d},${r+N*p}`,this._append`A${a},${a},0,0,${+(p*y>d*w)},${this._x1=e+M*c},${this._y1=r+M*f}`}}arc(e,r,n,i,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),c=n*Math.sin(i),f=e+s,d=r+c,p=1^o,g=o?i-a:a-i;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Lc||Math.abs(this._y1-d)>Lc)&&this._append`L${f},${d}`,n&&(g<0&&(g=g%b_+b_),g>Lte?this._append`A${n},${n},0,1,${p},${e-s},${r-c}A${n},${n},0,1,${p},${this._x1=f},${this._y1=d}`:g>Lc&&this._append`A${n},${n},0,${+(g>=x_)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function XE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new zte(e)}function YE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ZM(t){this._context=t}ZM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Bm(t){return new ZM(t)}function JM(t){return t[0]}function e9(t){return t[1]}function t9(t,e){var r=Wt(!0),n=null,i=Bm,a=null,o=XE(s);t=typeof t=="function"?t:t===void 0?JM:Wt(t),e=typeof e=="function"?e:e===void 0?e9:Wt(e);function s(c){var f,d=(c=YE(c)).length,p,g=!1,y;for(n==null&&(a=i(y=o())),f=0;f<=d;++f)!(f<d&&r(p=c[f],f,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(p,f,c),+e(p,f,c));if(y)return a=null,y+""||null}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Wt(+c),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Wt(+c),s):e},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Wt(!!c),s):r},s.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),s):i},s.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),s):n},s}function u1(t,e,r){var n=null,i=Wt(!0),a=null,o=Bm,s=null,c=XE(f);t=typeof t=="function"?t:t===void 0?JM:Wt(+t),e=typeof e=="function"?e:Wt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?e9:Wt(+r);function f(p){var g,y,w,_=(p=YE(p)).length,A,S=!1,T,R=new Array(_),N=new Array(_);for(a==null&&(s=o(T=c())),g=0;g<=_;++g){if(!(g<_&&i(A=p[g],g,p))===S)if(S=!S)y=g,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),w=g-1;w>=y;--w)s.point(R[w],N[w]);s.lineEnd(),s.areaEnd()}S&&(R[g]=+t(A,g,p),N[g]=+e(A,g,p),s.point(n?+n(A,g,p):R[g],r?+r(A,g,p):N[g]))}if(T)return s=null,T+""||null}function d(){return t9().defined(i).curve(o).context(a)}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),n=null,f):t},f.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),f):t},f.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Wt(+p),f):n},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),r=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),f):e},f.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Wt(+p),f):r},f.lineX0=f.lineY0=function(){return d().x(t).y(e)},f.lineY1=function(){return d().x(t).y(r)},f.lineX1=function(){return d().x(n).y(e)},f.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Wt(!!p),f):i},f.curve=function(p){return arguments.length?(o=p,a!=null&&(s=o(a)),f):o},f.context=function(p){return arguments.length?(p==null?a=s=null:s=o(a=p),f):a},f}class r9{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Ute(t){return new r9(t,!0)}function Fte(t){return new r9(t,!1)}const QE={draw(t,e){const r=Ya(e/mv);t.moveTo(r,0),t.arc(0,0,r,0,Lm)}},Vte={draw(t,e){const r=Ya(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},n9=Ya(1/3),Hte=n9*2,$te={draw(t,e){const r=Ya(e/Hte),n=r*n9;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},qte={draw(t,e){const r=Ya(e),n=-r/2;t.rect(n,n,r,r)}},Gte=.8908130915292852,i9=vv(mv/10)/vv(7*mv/10),Wte=vv(Lm/10)*i9,Kte=-YM(Lm/10)*i9,Xte={draw(t,e){const r=Ya(e*Gte),n=Wte*r,i=Kte*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const o=Lm*a/5,s=YM(o),c=vv(o);t.lineTo(c*r,-s*r),t.lineTo(s*n-c*i,c*n+s*i)}t.closePath()}},ob=Ya(3),Yte={draw(t,e){const r=-Ya(e/(ob*3));t.moveTo(0,r*2),t.lineTo(-ob*r,-r),t.lineTo(ob*r,-r),t.closePath()}},oa=-.5,sa=Ya(3)/2,w_=1/Ya(12),Qte=(w_/2+1)*3,Zte={draw(t,e){const r=Ya(e/Qte),n=r/2,i=r*w_,a=n,o=r*w_+r,s=-a,c=o;t.moveTo(n,i),t.lineTo(a,o),t.lineTo(s,c),t.lineTo(oa*n-sa*i,sa*n+oa*i),t.lineTo(oa*a-sa*o,sa*a+oa*o),t.lineTo(oa*s-sa*c,sa*s+oa*c),t.lineTo(oa*n+sa*i,oa*i-sa*n),t.lineTo(oa*a+sa*o,oa*o-sa*a),t.lineTo(oa*s+sa*c,oa*c-sa*s),t.closePath()}};function Jte(t,e){let r=null,n=XE(i);t=typeof t=="function"?t:Wt(t||QE),e=typeof e=="function"?e:Wt(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Wt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Wt(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function yv(){}function xv(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function a9(t){this._context=t}a9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ere(t){return new a9(t)}function o9(t){this._context=t}o9.prototype={areaStart:yv,areaEnd:yv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tre(t){return new o9(t)}function s9(t){this._context=t}s9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:xv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rre(t){return new s9(t)}function l9(t){this._context=t}l9.prototype={areaStart:yv,areaEnd:yv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nre(t){return new l9(t)}function v8(t){return t<0?-1:1}function m8(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(v8(a)+v8(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function y8(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function sb(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-n)/3;t._context.bezierCurveTo(n+s,i+s*e,a-s,o-s*r,a,o)}function bv(t){this._context=t}bv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sb(this,this._t0,y8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,sb(this,y8(this,r=m8(this,t,e)),r);break;default:sb(this,this._t0,r=m8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function c9(t){this._context=new u9(t)}(c9.prototype=Object.create(bv.prototype)).point=function(t,e){bv.prototype.point.call(this,e,t)};function u9(t){this._context=t}u9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function ire(t){return new bv(t)}function are(t){return new c9(t)}function f9(t){this._context=t}f9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=x8(t),i=x8(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function x8(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function ore(t){return new f9(t)}function zm(t,e){this._context=t,this._t=e}zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function sre(t){return new zm(t,.5)}function lre(t){return new zm(t,0)}function cre(t){return new zm(t,1)}function Vf(t,e){if((o=t.length)>1)for(var r=1,n,i,a=t[e[0]],o,s=a.length;r<o;++r)for(i=a,a=t[e[r]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function __(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function ure(t,e){return t[e]}function fre(t){const e=[];return e.key=t,e}function dre(){var t=Wt([]),e=__,r=Vf,n=ure;function i(a){var o=Array.from(t.apply(this,arguments),fre),s,c=o.length,f=-1,d;for(const p of a)for(s=0,++f;s<c;++s)(o[s][f]=[0,+n(p,o[s].key,f,a)]).data=p;for(s=0,d=YE(e(o));s<c;++s)o[d[s]].index=s;return r(o,d),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Wt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Wt(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?__:typeof a=="function"?a:Wt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??Vf,i):r},i}function hre(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}Vf(t,e)}}function pre(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var o=0,s=0;o<i;++o)s+=t[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}Vf(t,e)}}function gre(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var s=0,c=0,f=0;s<o;++s){for(var d=t[e[s]],p=d[n][1]||0,g=d[n-1][1]||0,y=(p-g)/2,w=0;w<s;++w){var _=t[e[w]],A=_[n][1]||0,S=_[n-1][1]||0;y+=A-S}c+=p,f+=y*p}i[n-1][1]+=i[n-1][0]=r,c&&(r-=f/c)}i[n-1][1]+=i[n-1][0]=r,Vf(t,e)}}var vre=["type","size","sizeType"];function A_(){return A_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A_.apply(null,arguments)}function b8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function w8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b8(Object(r),!0).forEach(function(n){mre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mre(t,e,r){return(e=yre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yre(t){var e=xre(t,"string");return typeof e=="symbol"?e:e+""}function xre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bre(t,e){if(t==null)return{};var r,n,i=wre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wre(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var d9={symbolCircle:QE,symbolCross:Vte,symbolDiamond:$te,symbolSquare:qte,symbolStar:Xte,symbolTriangle:Yte,symbolWye:Zte},_re=Math.PI/180,Are=t=>{var e="symbol".concat(Jp(t));return d9[e]||QE},Ere=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*_re;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Sre=(t,e)=>{d9["symbol".concat(Jp(t))]=e},ZE=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=bre(t,vre),a=w8(w8({},i),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var s=()=>{var g=Are(o),y=Jte().type(g).size(Ere(r,n,o));return y()},{className:c,cx:f,cy:d}=a,p=dr(a,!0);return f===+f&&d===+d&&r===+r?C.createElement("path",A_({},p,{className:wt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(d,")"),d:s()})):null};ZE.registerSymbol=Sre;function E_(){return E_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},E_.apply(null,arguments)}function _8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Cre(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_8(Object(r),!0).forEach(function(n){JE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function JE(t,e,r){return(e=Tre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tre(t){var e=Ire(t,"string");return typeof e=="symbol"?e:e+""}function Ire(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var la=32;class eS extends C.PureComponent{renderIcon(e,r){var{inactiveColor:n}=this.props,i=la/2,a=la/6,o=la/3,s=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:la,y2:i,className:"recharts-legend-icon"});if(c==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(la,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return C.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(la/8,"h").concat(la,"v").concat(la*3/4,"h").concat(-la,"z"),className:"recharts-legend-icon"});if(C.isValidElement(e.legendIcon)){var f=Cre({},e);return delete f.legendIcon,C.cloneElement(e.legendIcon,f)}return C.createElement(ZE,{fill:s,cx:i,cy:i,size:la,sizeType:"diameter",type:c})}renderItems(){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:o}=this.props,s={x:0,y:0,width:la,height:la},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,p)=>{var g=d.formatter||i,y=wt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:d.inactive});if(d.type==="none")return null;var w=d.inactive?a:d.color,_=g?g(d.value,d,p):d.value;return C.createElement("li",E_({className:y,style:c,key:"legend-item-".concat(p)},e0(this.props,d,p)),C.createElement(KE,{width:r,height:r,viewBox:s,style:f,"aria-label":"".concat(_," legend icon")},this.renderIcon(d,o)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},_))})}render(){var{payload:e,layout:r,align:n}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}JE(eS,"displayName","Legend");JE(eS,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var lb={},cb={},A8;function Ore(){return A8||(A8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let a=0;a<r.length;a++){const o=r[a],s=n(o);i.has(s)||i.set(s,o)}return Array.from(i.values())}t.uniqBy=e})(cb)),cb}var ub={},E8;function h9(){return E8||(E8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(ub)),ub}var fb={},db={},hb={},S8;function Rre(){return S8||(S8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(hb)),hb}var C8;function tS(){return C8||(C8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rre();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(db)),db}var pb={},T8;function Pre(){return T8||(T8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(pb)),pb}var I8;function Dre(){return I8||(I8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tS(),r=Pre();function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(fb)),fb}var gb={},vb={},O8;function Nre(){return O8||(O8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$E();function r(n){return function(i){return e.get(i,n)}}t.property=r})(vb)),vb}var mb={},yb={},xb={},bb={},R8;function p9(){return R8||(R8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(bb)),bb}var wb={},P8;function g9(){return P8||(P8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(wb)),wb}var _b={},D8;function v9(){return D8||(D8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(_b)),_b}var N8;function kre(){return N8||(N8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rS(),r=p9(),n=g9(),i=v9();function a(p,g,y){return typeof y!="function"?e.isMatch(p,g):o(p,g,function w(_,A,S,T,R,N){const M=y(_,A,S,T,R,N);return M!==void 0?!!M:o(_,A,w,N)},new Map)}function o(p,g,y,w){if(g===p)return!0;switch(typeof g){case"object":return s(p,g,y,w);case"function":return Object.keys(g).length>0?o(p,{...g},y,w):i.eq(p,g);default:return r.isObject(p)?typeof g=="string"?g==="":!0:i.eq(p,g)}}function s(p,g,y,w){if(g==null)return!0;if(Array.isArray(g))return f(p,g,y,w);if(g instanceof Map)return c(p,g,y,w);if(g instanceof Set)return d(p,g,y,w);const _=Object.keys(g);if(p==null)return _.length===0;if(_.length===0)return!0;if(w&&w.has(g))return w.get(g)===p;w&&w.set(g,p);try{for(let A=0;A<_.length;A++){const S=_[A];if(!n.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!y(p[S],g[S],S,p,g,w))return!1}return!0}finally{w&&w.delete(g)}}function c(p,g,y,w){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[_,A]of g.entries()){const S=p.get(_);if(y(S,A,_,p,g,w)===!1)return!1}return!0}function f(p,g,y,w){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const _=new Set;for(let A=0;A<g.length;A++){const S=g[A];let T=!1;for(let R=0;R<p.length;R++){if(_.has(R))continue;const N=p[R];let M=!1;if(y(N,S,A,p,g,w)&&(M=!0),M){_.add(R),T=!0;break}}if(!T)return!1}return!0}function d(p,g,y,w){return g.size===0?!0:p instanceof Set?f([...p],[...g],y,w):!1}t.isMatchWith=a,t.isSetMatch=d})(xb)),xb}var k8;function rS(){return k8||(k8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kre();function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(yb)),yb}var Ab={},Eb={},Sb={},M8;function Mre(){return M8||(M8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(Sb)),Sb}var Cb={},j8;function m9(){return j8||(j8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(Cb)),Cb}var Tb={},L8;function y9(){return L8||(L8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",s="[object Date]",c="[object Map]",f="[object Set]",d="[object Array]",p="[object Function]",g="[object ArrayBuffer]",y="[object Object]",w="[object Error]",_="[object DataView]",A="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",R="[object Uint32Array]",N="[object BigUint64Array]",M="[object Int8Array]",L="[object Int16Array]",O="[object Int32Array]",D="[object BigInt64Array]",j="[object Float32Array]",B="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=d,t.bigInt64ArrayTag=D,t.bigUint64ArrayTag=N,t.booleanTag=i,t.dataViewTag=_,t.dateTag=s,t.errorTag=w,t.float32ArrayTag=j,t.float64ArrayTag=B,t.functionTag=p,t.int16ArrayTag=L,t.int32ArrayTag=O,t.int8ArrayTag=M,t.mapTag=c,t.numberTag=n,t.objectTag=y,t.regexpTag=e,t.setTag=f,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=T,t.uint32ArrayTag=R,t.uint8ArrayTag=A,t.uint8ClampedArrayTag=S})(Tb)),Tb}var Ib={},B8;function jre(){return B8||(B8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(Ib)),Ib}var z8;function x9(){return z8||(z8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mre(),r=m9(),n=y9(),i=g9(),a=jre();function o(d,p){return s(d,void 0,d,new Map,p)}function s(d,p,g,y=new Map,w=void 0){const _=w?.(d,p,g,y);if(_!==void 0)return _;if(i.isPrimitive(d))return d;if(y.has(d))return y.get(d);if(Array.isArray(d)){const A=new Array(d.length);y.set(d,A);for(let S=0;S<d.length;S++)A[S]=s(d[S],S,g,y,w);return Object.hasOwn(d,"index")&&(A.index=d.index),Object.hasOwn(d,"input")&&(A.input=d.input),A}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const A=new RegExp(d.source,d.flags);return A.lastIndex=d.lastIndex,A}if(d instanceof Map){const A=new Map;y.set(d,A);for(const[S,T]of d)A.set(S,s(T,S,g,y,w));return A}if(d instanceof Set){const A=new Set;y.set(d,A);for(const S of d)A.add(s(S,void 0,g,y,w));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const A=new(Object.getPrototypeOf(d)).constructor(d.length);y.set(d,A);for(let S=0;S<d.length;S++)A[S]=s(d[S],S,g,y,w);return A}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const A=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return y.set(d,A),c(A,d,g,y,w),A}if(typeof File<"u"&&d instanceof File){const A=new File([d],d.name,{type:d.type});return y.set(d,A),c(A,d,g,y,w),A}if(typeof Blob<"u"&&d instanceof Blob){const A=new Blob([d],{type:d.type});return y.set(d,A),c(A,d,g,y,w),A}if(d instanceof Error){const A=new d.constructor;return y.set(d,A),A.message=d.message,A.name=d.name,A.stack=d.stack,A.cause=d.cause,c(A,d,g,y,w),A}if(d instanceof Boolean){const A=new Boolean(d.valueOf());return y.set(d,A),c(A,d,g,y,w),A}if(d instanceof Number){const A=new Number(d.valueOf());return y.set(d,A),c(A,d,g,y,w),A}if(d instanceof String){const A=new String(d.valueOf());return y.set(d,A),c(A,d,g,y,w),A}if(typeof d=="object"&&f(d)){const A=Object.create(Object.getPrototypeOf(d));return y.set(d,A),c(A,d,g,y,w),A}return d}function c(d,p,g=d,y,w){const _=[...Object.keys(p),...e.getSymbols(p)];for(let A=0;A<_.length;A++){const S=_[A],T=Object.getOwnPropertyDescriptor(d,S);(T==null||T.writable)&&(d[S]=s(p[S],S,g,y,w))}}function f(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=s,t.copyProperties=c})(Eb)),Eb}var U8;function Lre(){return U8||(U8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x9();function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(Ab)),Ab}var F8;function Bre(){return F8||(F8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rS(),r=Lre();function n(i){return i=r.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=n})(mb)),mb}var Ob={},Rb={},Pb={},V8;function zre(){return V8||(V8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x9(),r=y9();function n(i,a){return e.cloneDeepWith(i,(o,s,c,f)=>{const d=a?.(o,s,c,f);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new i.constructor(i?.valueOf());return e.copyProperties(p,i),p}case r.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=n})(Pb)),Pb}var H8;function Ure(){return H8||(H8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zre();function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Rb)),Rb}var Db={},Nb={},$8;function b9(){return $8||($8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(Nb)),Nb}var kb={},q8;function Fre(){return q8||(q8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m9();function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(kb)),kb}var G8;function Vre(){return G8||(G8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VM(),r=b9(),n=Fre(),i=HE();function a(o,s){let c;if(Array.isArray(s)?c=s:typeof s=="string"&&e.isDeepKey(s)&&o?.[s]==null?c=i.toPath(s):c=[s],c.length===0)return!1;let f=o;for(let d=0;d<c.length;d++){const p=c[d];if((f==null||!Object.hasOwn(f,p))&&!((Array.isArray(f)||n.isArguments(f))&&r.isIndex(p)&&p<f.length))return!1;f=f[p]}return!0}t.has=a})(Db)),Db}var W8;function Hre(){return W8||(W8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rS(),r=VE(),n=Ure(),i=$E(),a=Vre();function o(s,c){switch(typeof s){case"object":{Object.is(s?.valueOf(),-0)&&(s="-0");break}case"number":{s=r.toKey(s);break}}return c=n.cloneDeep(c),function(f){const d=i.get(f,s);return d===void 0?a.has(f,s):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(Ob)),Ob}var K8;function $re(){return K8||(K8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h9(),r=Nre(),n=Bre(),i=Hre();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=a})(gb)),gb}var X8;function qre(){return X8||(X8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ore(),r=h9(),n=Dre(),i=$re();function a(o,s=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(s)):[]}t.uniqBy=a})(lb)),lb}var Mb,Y8;function Gre(){return Y8||(Y8=1,Mb=qre().uniqBy),Mb}var Wre=Gre();const Q8=ko(Wre);function w9(t,e,r){return e===!0?Q8(t,r):typeof e=="function"?Q8(t,e):t}var jb={exports:{}},Lb={},Bb={exports:{}},zb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z8;function Kre(){if(Z8)return zb;Z8=1;var t=Zf();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function s(p,g){var y=g(),w=n({inst:{value:y,getSnapshot:g}}),_=w[0].inst,A=w[1];return a(function(){_.value=y,_.getSnapshot=g,c(_)&&A({inst:_})},[p,y,g]),i(function(){return c(_)&&A({inst:_}),p(function(){c(_)&&A({inst:_})})},[p]),o(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!r(p,y)}catch{return!0}}function f(p,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:s;return zb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,zb}var J8;function Xre(){return J8||(J8=1,Bb.exports=Kre()),Bb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eR;function Yre(){if(eR)return Lb;eR=1;var t=Zf(),e=Xre();function r(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,s=t.useMemo,c=t.useDebugValue;return Lb.useSyncExternalStoreWithSelector=function(f,d,p,g,y){var w=a(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=s(function(){function S(L){if(!T){if(T=!0,R=L,L=g(L),y!==void 0&&_.hasValue){var O=_.value;if(y(O,L))return N=O}return N=L}if(O=N,n(R,L))return O;var D=g(L);return y!==void 0&&y(O,D)?(R=L,O):(R=L,N=D)}var T=!1,R,N,M=p===void 0?null:p;return[function(){return S(d())},M===null?void 0:function(){return S(M())}]},[d,p,g,y]);var A=i(f,w[0],w[1]);return o(function(){_.hasValue=!0,_.value=A},[A]),c(A),A},Lb}var tR;function Qre(){return tR||(tR=1,jb.exports=Yre()),jb.exports}var Zre=Qre(),nS=C.createContext(null),Jre=t=>t,hr=()=>{var t=C.useContext(nS);return t?t.store.dispatch:Jre},U1=()=>{},ene=()=>U1,tne=(t,e)=>t===e;function Re(t){var e=C.useContext(nS);return Zre.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:ene,e?e.store.getState:U1,e?e.store.getState:U1,e?t:U1,tne)}function rne(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function nne(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function ine(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var rR=t=>Array.isArray(t)?t:[t];function ane(t){const e=Array.isArray(t[0])?t[0]:t;return ine(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function one(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var sne=class{constructor(t){this.value=t}deref(){return this.value}},lne=typeof WeakRef<"u"?WeakRef:sne,cne=0,nR=1;function f1(){return{s:cne,v:void 0,o:null,p:null}}function _9(t,e={}){let r=f1();const{resultEqualityCheck:n}=e;let i,a=0;function o(){let s=r;const{length:c}=arguments;for(let p=0,g=c;p<g;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let w=s.o;w===null&&(s.o=w=new WeakMap);const _=w.get(y);_===void 0?(s=f1(),w.set(y,s)):s=_}else{let w=s.p;w===null&&(s.p=w=new Map);const _=w.get(y);_===void 0?(s=f1(),w.set(y,s)):s=_}}const f=s;let d;if(s.s===nR)d=s.v;else if(d=t.apply(null,arguments),a++,n){const p=i?.deref?.()??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new lne(d):d}return f.s=nR,f.v=d,d}return o.clearCache=()=>{r=f1(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function une(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,o=0,s,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),rne(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const d={...r,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=_9,argsMemoizeOptions:w=[]}=d,_=rR(g),A=rR(w),S=ane(i),T=p(function(){return a++,f.apply(null,arguments)},..._),R=y(function(){o++;const M=one(S,arguments);return s=T.apply(null,M),s},...A);return Object.assign(R,{resultFunc:f,memoizedResultFunc:T,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(n,{withTypes:()=>n}),n}var ne=une(_9),fne=Object.assign((t,e=ne)=>{nne(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((o,s,c)=>(o[r[c]]=s,o),{}))},{withTypes:()=>fne}),Ub={},Fb={},Vb={},iR;function dne(){return iR||(iR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const o=e(n),s=e(i);if(o===s&&o===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?s-o:o-s}return 0};t.compareValues=r})(Vb)),Vb}var Hb={},$b={},aR;function A9(){return aR||(aR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})($b)),$b}var oR;function hne(){return oR||(oR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A9(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=i})(Hb)),Hb}var sR;function pne(){return sR||(sR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dne(),r=hne(),n=HE();function i(a,o,s,c){if(a==null)return[];s=c?void 0:s,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(y=>String(y));const f=(y,w)=>{let _=y;for(let A=0;A<w.length&&_!=null;++A)_=_[w[A]];return _},d=(y,w)=>w==null||y==null?w:typeof y=="object"&&"key"in y?Object.hasOwn(w,y.key)?w[y.key]:f(w,y.path):typeof y=="function"?y(w):Array.isArray(y)?f(w,y):typeof w=="object"?w[y]:w,p=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||r.isKey(y)?y:{key:y,path:n.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(w=>d(w,y))})).slice().sort((y,w)=>{for(let _=0;_<p.length;_++){const A=e.compareValues(y.criteria[_],w.criteria[_],s[_]);if(A!==0)return A}return 0}).map(y=>y.original)}t.orderBy=i})(Fb)),Fb}var qb={},lR;function gne(){return lR||(lR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],a=Math.floor(n),o=(s,c)=>{for(let f=0;f<s.length;f++){const d=s[f];Array.isArray(d)&&c<a?o(d,c+1):i.push(d)}};return o(r,0),i}t.flatten=e})(qb)),qb}var Gb={},cR;function E9(){return cR||(cR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=b9(),r=tS(),n=p9(),i=v9();function a(o,s,c){return n.isObject(c)&&(typeof s=="number"&&r.isArrayLike(c)&&e.isIndex(s)&&s<c.length||typeof s=="string"&&s in c)?i.eq(c[s],o):!1}t.isIterateeCall=a})(Gb)),Gb}var uR;function vne(){return uR||(uR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pne(),r=gne(),n=E9();function i(a,...o){const s=o.length;return s>1&&n.isIterateeCall(a,o[0],o[1])?o=[]:s>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,r.flatten(o),["asc"])}t.sortBy=i})(Ub)),Ub}var Wb,fR;function mne(){return fR||(fR=1,Wb=vne().sortBy),Wb}var yne=mne();const Um=ko(yne);var S9=t=>t.legend.settings,xne=t=>t.legend.size,bne=t=>t.legend.payload,wne=ne([bne,S9],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?Um(n,r):n});function _ne(){return Re(wne)}var d1=1;function C9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=C.useState({height:0,left:0,top:0,width:0}),n=C.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>d1||Math.abs(o.left-e.left)>d1||Math.abs(o.top-e.top)>d1||Math.abs(o.width-e.width)>d1)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function In(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Ane=typeof Symbol=="function"&&Symbol.observable||"@@observable",dR=Ane,Kb=()=>Math.random().toString(36).substring(7).split("").join("."),Ene={INIT:`@@redux/INIT${Kb()}`,REPLACE:`@@redux/REPLACE${Kb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Kb()}`},wv=Ene;function iS(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function T9(t,e,r){if(typeof t!="function")throw new Error(In(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(In(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(In(1));return r(T9)(t,e)}let n=t,i=e,a=new Map,o=a,s=0,c=!1;function f(){o===a&&(o=new Map,a.forEach((A,S)=>{o.set(S,A)}))}function d(){if(c)throw new Error(In(3));return i}function p(A){if(typeof A!="function")throw new Error(In(4));if(c)throw new Error(In(5));let S=!0;f();const T=s++;return o.set(T,A),function(){if(S){if(c)throw new Error(In(6));S=!1,f(),o.delete(T),a=null}}}function g(A){if(!iS(A))throw new Error(In(7));if(typeof A.type>"u")throw new Error(In(8));if(typeof A.type!="string")throw new Error(In(17));if(c)throw new Error(In(9));try{c=!0,i=n(i,A)}finally{c=!1}return(a=o).forEach(T=>{T()}),A}function y(A){if(typeof A!="function")throw new Error(In(10));n=A,g({type:wv.REPLACE})}function w(){const A=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(In(11));function T(){const N=S;N.next&&N.next(d())}return T(),{unsubscribe:A(T)}},[dR](){return this}}}return g({type:wv.INIT}),{dispatch:g,subscribe:p,getState:d,replaceReducer:y,[dR]:w}}function Sne(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:wv.INIT})>"u")throw new Error(In(12));if(typeof r(void 0,{type:wv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(In(13))})}function I9(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{Sne(r)}catch(a){i=a}return function(o={},s){if(i)throw i;let c=!1;const f={};for(let d=0;d<n.length;d++){const p=n[d],g=r[p],y=o[p],w=g(y,s);if(typeof w>"u")throw s&&s.type,new Error(In(14));f[p]=w,c=c||w!==y}return c=c||n.length!==Object.keys(o).length,c?f:o}}function _v(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function Cne(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(In(15))};const o={getState:i.getState,dispatch:(c,...f)=>a(c,...f)},s=t.map(c=>c(o));return a=_v(...s)(i.dispatch),{...i,dispatch:a}}}function O9(t){return iS(t)&&"type"in t&&typeof t.type=="string"}var R9=Symbol.for("immer-nothing"),hR=Symbol.for("immer-draftable"),$i=Symbol.for("immer-state");function Ba(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Hf=Object.getPrototypeOf;function uu(t){return!!t&&!!t[$i]}function ys(t){return t?P9(t)||Array.isArray(t)||!!t[hR]||!!t.constructor?.[hR]||t0(t)||Vm(t):!1}var Tne=Object.prototype.constructor.toString();function P9(t){if(!t||typeof t!="object")return!1;const e=Hf(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Tne}function Av(t,e){Fm(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Fm(t){const e=t[$i];return e?e.type_:Array.isArray(t)?1:t0(t)?2:Vm(t)?3:0}function S_(t,e){return Fm(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function D9(t,e,r){const n=Fm(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function Ine(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function t0(t){return t instanceof Map}function Vm(t){return t instanceof Set}function Bc(t){return t.copy_||t.base_}function C_(t,e){if(t0(t))return new Map(t);if(Vm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=P9(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[$i];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],s=n[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(Hf(t),n)}else{const n=Hf(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function aS(t,e=!1){return Hm(t)||uu(t)||!ys(t)||(Fm(t)>1&&Object.defineProperties(t,{set:{value:h1},add:{value:h1},clear:{value:h1},delete:{value:h1}}),Object.freeze(t),e&&Object.values(t).forEach(r=>aS(r,!0))),t}function h1(){Ba(2)}function Hm(t){return Object.isFrozen(t)}var One={};function fu(t){const e=One[t];return e||Ba(0,t),e}var mp;function N9(){return mp}function Rne(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pR(t,e){e&&(fu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function T_(t){I_(t),t.drafts_.forEach(Pne),t.drafts_=null}function I_(t){t===mp&&(mp=t.parent_)}function gR(t){return mp=Rne(mp,t)}function Pne(t){const e=t[$i];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function vR(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[$i].modified_&&(T_(e),Ba(4)),ys(t)&&(t=Ev(e,t),e.parent_||Sv(e,t)),e.patches_&&fu("Patches").generateReplacementPatches_(r[$i].base_,t,e.patches_,e.inversePatches_)):t=Ev(e,r,[]),T_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==R9?t:void 0}function Ev(t,e,r){if(Hm(e))return e;const n=e[$i];if(!n)return Av(e,(i,a)=>mR(t,n,e,i,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Sv(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),Av(a,(s,c)=>mR(t,n,i,s,c,r,o)),Sv(t,i,!1),r&&t.patches_&&fu("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function mR(t,e,r,n,i,a,o){if(uu(i)){const s=a&&e&&e.type_!==3&&!S_(e.assigned_,n)?a.concat(n):void 0,c=Ev(t,i,s);if(D9(r,n,c),uu(c))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(ys(i)&&!Hm(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ev(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(t0(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Sv(t,i)}}function Sv(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&aS(e,r)}function Dne(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:N9(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=oS;r&&(i=[n],a=yp);const{revoke:o,proxy:s}=Proxy.revocable(i,a);return n.draft_=s,n.revoke_=o,s}var oS={get(t,e){if(e===$i)return t;const r=Bc(t);if(!S_(r,e))return Nne(t,r,e);const n=r[e];return t.finalized_||!ys(n)?n:n===Xb(t.base_,e)?(Yb(t),t.copy_[e]=R_(n,t)):n},has(t,e){return e in Bc(t)},ownKeys(t){return Reflect.ownKeys(Bc(t))},set(t,e,r){const n=k9(Bc(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=Xb(Bc(t),e),a=i?.[$i];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(Ine(r,i)&&(r!==void 0||S_(t.base_,e)))return!0;Yb(t),O_(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Xb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Yb(t),O_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Bc(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Ba(11)},getPrototypeOf(t){return Hf(t.base_)},setPrototypeOf(){Ba(12)}},yp={};Av(oS,(t,e)=>{yp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});yp.deleteProperty=function(t,e){return yp.set.call(this,t,e,void 0)};yp.set=function(t,e,r){return oS.set.call(this,t[0],e,r,t[0])};function Xb(t,e){const r=t[$i];return(r?Bc(r):t)[e]}function Nne(t,e,r){const n=k9(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function k9(t,e){if(!(e in t))return;let r=Hf(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Hf(r)}}function O_(t){t.modified_||(t.modified_=!0,t.parent_&&O_(t.parent_))}function Yb(t){t.copy_||(t.copy_=C_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var kne=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const o=this;return function(c=a,...f){return o.produce(c,d=>r.call(this,d,...f))}}typeof r!="function"&&Ba(6),n!==void 0&&typeof n!="function"&&Ba(7);let i;if(ys(e)){const a=gR(this),o=R_(e,void 0);let s=!0;try{i=r(o),s=!1}finally{s?T_(a):I_(a)}return pR(a,n),vR(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===R9&&(i=void 0),this.autoFreeze_&&aS(i,!0),n){const a=[],o=[];fu("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else Ba(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...s)=>this.produceWithPatches(o,c=>e(c,...s));let n,i;return[this.produce(e,r,(o,s)=>{n=o,i=s}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ys(t)||Ba(8),uu(t)&&(t=fs(t));const e=gR(this),r=R_(t,void 0);return r[$i].isManual_=!0,I_(e),r}finishDraft(t,e){const r=t&&t[$i];(!r||!r.isManual_)&&Ba(9);const{scope_:n}=r;return pR(n,e),vR(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=fu("Patches").applyPatches_;return uu(t)?n(t,e):this.produce(t,i=>n(i,e))}};function R_(t,e){const r=t0(t)?fu("MapSet").proxyMap_(t,e):Vm(t)?fu("MapSet").proxySet_(t,e):Dne(t,e);return(e?e.scope_:N9()).drafts_.push(r),r}function fs(t){return uu(t)||Ba(10,t),M9(t)}function M9(t){if(!ys(t)||Hm(t))return t;const e=t[$i];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=C_(t,e.scope_.immer_.useStrictShallowCopy_)}else r=C_(t,!0);return Av(r,(n,i)=>{D9(r,n,M9(i))}),e&&(e.finalized_=!1),r}var Mne=new kne,j9=Mne.produce;function L9(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var jne=L9(),Lne=L9,Bne=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_v:_v.apply(null,arguments)};function xa(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(Fi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>O9(n)&&n.type===t,r}var B9=class qh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,qh.prototype)}static get[Symbol.species](){return qh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new qh(...e[0].concat(this)):new qh(...e.concat(this))}};function yR(t){return ys(t)?j9(t,()=>{}):t}function p1(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function zne(t){return typeof t=="boolean"}var Une=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new B9;return r&&(zne(r)?o.push(jne):o.push(Lne(r.extraArgument))),o},Fne="RTK_autoBatch",xR=t=>e=>{setTimeout(e,t)},Vne=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,o=!1;const s=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xR(10):t.type==="callback"?t.queueNotification:xR(t.timeout),f=()=>{o=!1,a&&(a=!1,s.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const p=()=>i&&d(),g=n.subscribe(p);return s.add(d),()=>{g(),s.delete(d)}},dispatch(d){try{return i=!d?.meta?.[Fne],a=!i,a&&(o||(o=!0,c(f))),n.dispatch(d)}finally{i=!0}}})},Hne=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new B9(t);return n&&i.push(Vne(typeof n=="object"?n:void 0)),i};function $ne(t){const e=Une(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let s;if(typeof r=="function")s=r;else if(iS(r))s=I9(r);else throw new Error(Fi(1));let c;typeof n=="function"?c=n(e):c=e();let f=_v;i&&(f=Bne({trace:!1,...typeof i=="object"&&i}));const d=Cne(...c),p=Hne(d);let g=typeof o=="function"?o(p):p();const y=f(...g);return T9(s,a,y)}function z9(t){const e={},r=[];let n;const i={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(Fi(28));if(s in e)throw new Error(Fi(29));return e[s]=o,i},addAsyncThunk(a,o){return o.pending&&(e[a.pending.type]=o.pending),o.rejected&&(e[a.rejected.type]=o.rejected),o.fulfilled&&(e[a.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function qne(t){return typeof t=="function"}function Gne(t,e){let[r,n,i]=z9(e),a;if(qne(t))a=()=>yR(t());else{const s=yR(t);a=()=>s}function o(s=a(),c){let f=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return f.filter(d=>!!d).length===0&&(f=[i]),f.reduce((d,p)=>{if(p)if(uu(d)){const y=p(d,c);return y===void 0?d:y}else{if(ys(d))return j9(d,g=>p(g,c));{const g=p(d,c);if(g===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return d},s)}return o.getInitialState=a,o}var Wne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Kne=(t=21)=>{let e="",r=t;for(;r--;)e+=Wne[Math.random()*64|0];return e},Xne=Symbol.for("rtk-slice-createasyncthunk");function Yne(t,e){return`${t}/${e}`}function Qne({creators:t}={}){const e=t?.asyncThunk?.[Xne];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(Fi(11));const o=(typeof n.reducers=="function"?n.reducers(Jne()):n.reducers)||{},s=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(R,N){const M=typeof R=="string"?R:R.type;if(!M)throw new Error(Fi(12));if(M in c.sliceCaseReducersByType)throw new Error(Fi(13));return c.sliceCaseReducersByType[M]=N,f},addMatcher(R,N){return c.sliceMatchers.push({matcher:R,reducer:N}),f},exposeAction(R,N){return c.actionCreators[R]=N,f},exposeCaseReducer(R,N){return c.sliceCaseReducersByName[R]=N,f}};s.forEach(R=>{const N=o[R],M={reducerName:R,type:Yne(i,R),createNotation:typeof n.reducers=="function"};tie(N)?nie(M,N,f,e):eie(M,N,f)});function d(){const[R={},N=[],M=void 0]=typeof n.extraReducers=="function"?z9(n.extraReducers):[n.extraReducers],L={...R,...c.sliceCaseReducersByType};return Gne(n.initialState,O=>{for(let D in L)O.addCase(D,L[D]);for(let D of c.sliceMatchers)O.addMatcher(D.matcher,D.reducer);for(let D of N)O.addMatcher(D.matcher,D.reducer);M&&O.addDefaultCase(M)})}const p=R=>R,g=new Map,y=new WeakMap;let w;function _(R,N){return w||(w=d()),w(R,N)}function A(){return w||(w=d()),w.getInitialState()}function S(R,N=!1){function M(O){let D=O[R];return typeof D>"u"&&N&&(D=p1(y,M,A)),D}function L(O=p){const D=p1(g,N,()=>new WeakMap);return p1(D,O,()=>{const j={};for(const[B,z]of Object.entries(n.selectors??{}))j[B]=Zne(z,O,()=>p1(y,O,A),N);return j})}return{reducerPath:R,getSelectors:L,get selectors(){return L(M)},selectSlice:M}}const T={name:i,reducer:_,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:A,...S(a),injectInto(R,{reducerPath:N,...M}={}){const L=N??a;return R.inject({reducerPath:L,reducer:_},M),{...T,...S(L,!0)}}};return T}}function Zne(t,e,r,n){function i(a,...o){let s=e(a);return typeof s>"u"&&n&&(s=r()),t(s,...o)}return i.unwrapped=t,i}var Gi=Qne();function Jne(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function eie({type:t,reducerName:e,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!rie(n))throw new Error(Fi(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?xa(t,o):xa(t))}function tie(t){return t._reducerDefinitionType==="asyncThunk"}function rie(t){return t._reducerDefinitionType==="reducerWithPrepare"}function nie({type:t,reducerName:e},r,n,i){if(!i)throw new Error(Fi(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:c,settled:f,options:d}=r,p=i(t,a,d);n.exposeAction(e,p),o&&n.addCase(p.fulfilled,o),s&&n.addCase(p.pending,s),c&&n.addCase(p.rejected,c),f&&n.addMatcher(p.settled,f),n.exposeCaseReducer(e,{fulfilled:o||g1,pending:s||g1,rejected:c||g1,settled:f||g1})}function g1(){}var iie="task",U9="listener",F9="completed",sS="cancelled",aie=`task-${sS}`,oie=`task-${F9}`,P_=`${U9}-${sS}`,sie=`${U9}-${F9}`,$m=class{constructor(t){this.code=t,this.message=`${iie} ${sS} (reason: ${t})`}name="TaskAbortError";message},lS=(t,e)=>{if(typeof t!="function")throw new TypeError(Fi(32))},Cv=()=>{},V9=(t,e=Cv)=>(t.catch(e),t),H9=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Zc=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Jc=t=>{if(t.aborted){const{reason:e}=t;throw new $m(e)}};function $9(t,e){let r=Cv;return new Promise((n,i)=>{const a=()=>i(new $m(t.reason));if(t.aborted){a();return}r=H9(t,a),e.finally(()=>r()).then(n,i)}).finally(()=>{r=Cv})}var lie=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof $m?"cancelled":"rejected",error:r}}finally{e?.()}},Tv=t=>e=>V9($9(t,e).then(r=>(Jc(t),r))),q9=t=>{const e=Tv(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Of}=Object,bR={},qm="listenerMiddleware",cie=(t,e)=>{const r=n=>H9(t,()=>Zc(n,t.reason));return(n,i)=>{lS(n);const a=new AbortController;r(a);const o=lie(async()=>{Jc(t),Jc(a.signal);const s=await n({pause:Tv(a.signal),delay:q9(a.signal),signal:a.signal});return Jc(a.signal),s},()=>Zc(a,oie));return i?.autoJoin&&e.push(o.catch(Cv)),{result:Tv(t)(o),cancel(){Zc(a,aie)}}}},uie=(t,e)=>{const r=async(n,i)=>{Jc(e);let a=()=>{};const s=[new Promise((c,f)=>{let d=t({predicate:n,effect:(p,g)=>{g.unsubscribe(),c([p,g.getState(),g.getOriginalState()])}});a=()=>{d(),f()}})];i!=null&&s.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await $9(e,Promise.race(s));return Jc(e),c}finally{a()}};return(n,i)=>V9(r(n,i))},G9=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=xa(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Fi(21));return lS(a),{predicate:i,type:e,effect:a}},W9=Of(t=>{const{type:e,predicate:r,effect:n}=G9(t);return{id:Kne(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Fi(22))}}},{withTypes:()=>W9}),wR=(t,e)=>{const{type:r,effect:n,predicate:i}=G9(e);return Array.from(t.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},D_=t=>{t.pending.forEach(e=>{Zc(e,P_)})},fie=t=>()=>{t.forEach(D_),t.clear()},_R=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},K9=Of(xa(`${qm}/add`),{withTypes:()=>K9}),die=xa(`${qm}/removeAll`),X9=Of(xa(`${qm}/remove`),{withTypes:()=>X9}),hie=(...t)=>{console.error(`${qm}/error`,...t)},r0=(t={})=>{const e=new Map,{extra:r,onError:n=hie}=t;lS(n);const i=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),p=>{d.unsubscribe(),p?.cancelActive&&D_(d)}),a=d=>{const p=wR(e,d)??W9(d);return i(p)};Of(a,{withTypes:()=>a});const o=d=>{const p=wR(e,d);return p&&(p.unsubscribe(),d.cancelActive&&D_(p)),!!p};Of(o,{withTypes:()=>o});const s=async(d,p,g,y)=>{const w=new AbortController,_=uie(a,w.signal),A=[];try{d.pending.add(w),await Promise.resolve(d.effect(p,Of({},g,{getOriginalState:y,condition:(S,T)=>_(S,T).then(Boolean),take:_,delay:q9(w.signal),pause:Tv(w.signal),extra:r,signal:w.signal,fork:cie(w.signal,A),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((S,T,R)=>{S!==w&&(Zc(S,P_),R.delete(S))})},cancel:()=>{Zc(w,P_),d.pending.delete(w)},throwIfCancelled:()=>{Jc(w.signal)}})))}catch(S){S instanceof $m||_R(n,S,{raisedBy:"effect"})}finally{await Promise.all(A),Zc(w,sie),d.pending.delete(w)}},c=fie(e);return{middleware:d=>p=>g=>{if(!O9(g))return p(g);if(K9.match(g))return a(g.payload);if(die.match(g)){c();return}if(X9.match(g))return o(g.payload);let y=d.getState();const w=()=>{if(y===bR)throw new Error(Fi(23));return y};let _;try{if(_=p(g),e.size>0){const A=d.getState(),S=Array.from(e.values());for(const T of S){let R=!1;try{R=T.predicate(g,A,y)}catch(N){R=!1,_R(n,N,{raisedBy:"predicate"})}R&&s(T,g,d,w)}}}finally{y=bR}return _},startListening:a,stopListening:o,clearListeners:c}};function Fi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var pie={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Y9=Gi({name:"chartLayout",initialState:pie,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,a;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:gie,setLayout:vie,setChartSize:mie,setScale:yie}=Y9.actions,xie=Y9.reducer;function AR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ER(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AR(Object(r),!0).forEach(function(n){bie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bie(t,e,r){return(e=wie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wie(t){var e=_ie(t,"string");return typeof e=="symbol"?e:e+""}function _ie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iv=Math.PI/180,Aie=t=>t*180/Math.PI,$r=(t,e,r,n)=>({x:t+Math.cos(-Iv*n)*r,y:e+Math.sin(-Iv*n)*r}),Q9=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Eie=(t,e)=>{var{x:r,y:n}=t,{x:i,y:a}=e;return Math.sqrt((r-i)**2+(n-a)**2)},Sie=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:a}=e,o=Eie({x:r,y:n},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var s=(r-i)/o,c=Math.acos(s);return n>a&&(c=2*Math.PI-c),{radius:o,angle:Aie(c),angleInRadian:c}},Cie=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:r-a*360}},Tie=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return t+o*360},Iie=(t,e)=>{var{x:r,y:n}=t,{radius:i,angle:a}=Sie({x:r,y:n},e),{innerRadius:o,outerRadius:s}=e;if(i<o||i>s||i===0)return null;var{startAngle:c,endAngle:f}=Cie(e),d=a,p;if(c<=f){for(;d>f;)d-=360;for(;d<c;)d+=360;p=d>=c&&d<=f}else{for(;d>c;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=c}return p?ER(ER({},e),{},{radius:i,angle:Tie(d,e)}):null};function Z9(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function SR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(r),!0).forEach(function(n){Oie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Oie(t,e,r){return(e=Rie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rie(t){var e=Pie(t,"string");return typeof e=="symbol"?e:e+""}function Pie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qt(t,e,r){return cr(t)||cr(e)?r:Do(e)?cu(t,e,r):typeof e=="function"?e(t):r}var Die=(t,e,r,n,i)=>{var a,o=-1,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<s;c++){var f=c>0?r[c-1].coordinate:r[s-1].coordinate,d=r[c].coordinate,p=c>=s-1?r[0].coordinate:r[c+1].coordinate,g=void 0;if(vn(d-f)!==vn(p-d)){var y=[];if(vn(p-d)===vn(i[1]-i[0])){g=p;var w=d+i[1]-i[0];y[0]=Math.min(w,(w+f)/2),y[1]=Math.max(w,(w+f)/2)}else{g=f;var _=p+i[1]-i[0];y[0]=Math.min(d,(_+d)/2),y[1]=Math.max(d,(_+d)/2)}var A=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(t>A[0]&&t<=A[1]||t>=y[0]&&t<=y[1]){({index:o}=r[c]);break}}else{var S=Math.min(f,p),T=Math.max(f,p);if(t>(S+d)/2&&t<=(T+d)/2){({index:o}=r[c]);break}}}else if(e){for(var R=0;R<s;R++)if(R===0&&t<=(e[R].coordinate+e[R+1].coordinate)/2||R>0&&R<s-1&&t>(e[R].coordinate+e[R-1].coordinate)/2&&t<=(e[R].coordinate+e[R+1].coordinate)/2||R===s-1&&t>(e[R].coordinate+e[R-1].coordinate)/2){({index:o}=e[R]);break}}return o},Nie=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:a,verticalAlign:o,layout:s}=e;if((s==="vertical"||s==="horizontal"&&o==="middle")&&a!=="center"&&Ne(t[a]))return fa(fa({},t),{},{[a]:t[a]+(n||0)});if((s==="horizontal"||s==="vertical"&&a==="center")&&o!=="middle"&&Ne(t[o]))return fa(fa({},t),{},{[o]:t[o]+(i||0)})}return t},Zl=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",J9=(t,e,r,n)=>{if(n)return t.map(s=>s.coordinate);var i,a,o=t.map(s=>(s.coordinate===e&&(i=!0),s.coordinate===r&&(a=!0),s.coordinate));return i||o.push(e),a||o.push(r),o},ej=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:a,scale:o,realScaleType:s,isCategorical:c,categoricalDomain:f,tickCount:d,ticks:p,niceTicks:g,axisType:y}=t;if(!o)return null;var w=s==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,_=i==="category"&&o.bandwidth?o.bandwidth()/w:0;if(_=y==="angleAxis"&&a&&a.length>=2?vn(a[0]-a[1])*2*_:_,p||g){var A=(p||g||[]).map((S,T)=>{var R=n?n.indexOf(S):S;return{coordinate:o(R)+_,value:S,offset:_,index:T}});return A.filter(S=>!Hi(S.coordinate))}return c&&f?f.map((S,T)=>({coordinate:o(S)+_,value:S,index:T,offset:_})):o.ticks&&d!=null?o.ticks(d).map((S,T)=>({coordinate:o(S)+_,value:S,offset:_,index:T})):o.domain().map((S,T)=>({coordinate:o(S)+_,value:n?n[S]:S,index:T,offset:_}))},CR=1e-4,kie=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-CR,a=Math.max(n[0],n[1])+CR,o=t(e[0]),s=t(e[r-1]);(o<i||o>a||s<i||s>a)&&t.domain([e[0],e[r-1]])}},Mie=(t,e)=>{if(!e||e.length!==2||!Ne(e[0])||!Ne(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ne(t[0])||t[0]<r)&&(i[0]=r),(!Ne(t[1])||t[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},jie=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0,o=0;o<e;++o){var s=Hi(t[o][r][1])?t[o][r][0]:t[o][r][1];s>=0?(t[o][r][0]=i,t[o][r][1]=i+s,i=t[o][r][1]):(t[o][r][0]=a,t[o][r][1]=a+s,a=t[o][r][1])}},Lie=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0;a<e;++a){var o=Hi(t[a][r][1])?t[a][r][0]:t[a][r][1];o>=0?(t[a][r][0]=i,t[a][r][1]=i+o,i=t[a][r][1]):(t[a][r][0]=0,t[a][r][1]=0)}},Bie={sign:jie,expand:hre,none:Vf,silhouette:pre,wiggle:gre,positive:Lie},zie=(t,e,r)=>{var n=Bie[r],i=dre().keys(e).value((a,o)=>+Qt(a,o,0)).order(__).offset(n);return i(t)};function Uie(t){return t==null?void 0:String(t)}function TR(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:a,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!cr(i[e.dataKey])){var s=$M(r,"value",i[e.dataKey]);if(s)return s.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Qt(i,cr(o)?e.dataKey:o);return cr(c)?null:e.scale(c)}var IR=t=>{var{axis:e,ticks:r,offset:n,bandSize:i,entry:a,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var s=Qt(a,e.dataKey,e.scale.domain()[o]);return cr(s)?null:e.scale(s)-i/2+n},Fie=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Vie=t=>{var e=t.flat(2).filter(Ne);return[Math.min(...e),Math.max(...e)]},Hie=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],$ie=(t,e,r)=>{if(t!=null)return Hie(Object.keys(t).reduce((n,i)=>{var a=t[i],{stackedData:o}=a,s=o.reduce((c,f)=>{var d=Z9(f,e,r),p=Vie(d);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]))},OR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xp=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=Um(e,d=>d.coordinate),a=1/0,o=1,s=i.length;o<s;o++){var c=i[o],f=i[o-1];a=Math.min((c.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function PR(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:a}=t;return fa(fa({},e),{},{dataKey:r,payload:n,value:i,name:a})}function sd(t,e){if(t)return String(t);if(typeof e=="string")return e}function qie(t,e,r,n,i){if(r==="horizontal"||r==="vertical"){var a=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return a?{x:t,y:e}:null}return n?Iie({x:t,y:e},n):null}var Gie=(t,e,r,n)=>{var i=e.find(f=>f&&f.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.y};if(t==="vertical")return{x:n.x,y:i.coordinate};if(t==="centric"){var a=i.coordinate,{radius:o}=n;return fa(fa(fa({},n),$r(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var s=i.coordinate,{angle:c}=n;return fa(fa(fa({},n),$r(n.cx,n.cy,s,c)),{},{angle:c,radius:s})}return{x:0,y:0}},Wie=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Es=t=>t.layout.width,Ss=t=>t.layout.height,Kie=t=>t.layout.scale,tj=t=>t.layout.margin,Gm=ne(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Wm=ne(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),rj="data-recharts-item-index",nj="data-recharts-item-data-key",n0=60;function DR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function v1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DR(Object(r),!0).forEach(function(n){Xie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xie(t,e,r){return(e=Yie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yie(t){var e=Qie(t,"string");return typeof e=="symbol"?e:e+""}function Qie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zie=t=>t.brush.height;function Jie(t){var e=Wm(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:n0;return r+i}return r},0)}function eae(t){var e=Wm(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:n0;return r+i}return r},0)}function tae(t){var e=Gm(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function rae(t){var e=Gm(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var nn=ne([Es,Ss,tj,Zie,Jie,eae,tae,rae,S9,xne],(t,e,r,n,i,a,o,s,c,f)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},p={top:(r.top||0)+o,bottom:(r.bottom||0)+s},g=v1(v1({},p),d),y=g.bottom;g.bottom+=n,g=Nie(g,c,f);var w=t-g.left-g.right,_=e-g.top-g.bottom;return v1(v1({brushBottom:y},g),{},{width:Math.max(w,0),height:Math.max(_,0)})}),nae=ne(nn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),cS=ne(Es,Ss,(t,e)=>({x:0,y:0,width:t,height:e})),iae=C.createContext(null),Ai=()=>C.useContext(iae)!=null,Km=t=>t.brush,Xm=ne([Km,nn,tj],(t,e,r)=>({height:t.height,x:Ne(t.x)?t.x:e.left,y:Ne(t.y)?t.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:Ne(t.width)?t.width:e.width})),uS=()=>{var t,e=Ai(),r=Re(nae),n=Re(Xm),i=(t=Re(Km))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},aae={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},ij=()=>{var t;return(t=Re(nn))!==null&&t!==void 0?t:aae},fS=()=>Re(Es),dS=()=>Re(Ss),oae=()=>Re(t=>t.layout.margin),gt=t=>t.layout.layoutType,Ym=()=>Re(gt),sae={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},aj=Gi({name:"legend",initialState:sae,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var r=fs(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:NR,setLegendSettings:lae,addLegendPayload:oj,removeLegendPayload:sj}=aj.actions,cae=aj.reducer,uae=["contextPayload"];function N_(){return N_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N_.apply(null,arguments)}function kR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $f(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(r),!0).forEach(function(n){hS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hS(t,e,r){return(e=fae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fae(t){var e=dae(t,"string");return typeof e=="symbol"?e:e+""}function dae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hae(t,e){if(t==null)return{};var r,n,i=pae(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function pae(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function gae(t){return t.value}function vae(t){var{contextPayload:e}=t,r=hae(t,uae),n=w9(e,t.payloadUniqBy,gae),i=$f($f({},r),{},{payload:n});return C.isValidElement(t.content)?C.cloneElement(t.content,i):typeof t.content=="function"?C.createElement(t.content,i):C.createElement(eS,i)}function mae(t,e,r,n,i,a){var{layout:o,align:s,verticalAlign:c}=e,f,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(s==="center"&&o==="vertical"?f={left:((n||0)-a.width)/2}:f=s==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((i||0)-a.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),$f($f({},f),d)}function yae(t){var e=hr();return C.useEffect(()=>{e(lae(t))},[e,t]),null}function xae(t){var e=hr();return C.useEffect(()=>(e(NR(t)),()=>{e(NR({width:0,height:0}))}),[e,t]),null}function bae(t){var e=_ne(),r=jte(),n=oae(),{width:i,height:a,wrapperStyle:o,portal:s}=t,[c,f]=C9([e]),d=fS(),p=dS();if(d==null||p==null)return null;var g=d-(n.left||0)-(n.right||0),y=Qm.getWidthOrHeight(t.layout,a,i,g),w=s?o:$f($f({position:"absolute",width:y?.width||i||"auto",height:y?.height||a||"auto"},mae(o,t,n,d,p,c)),o),_=s??r;if(_==null)return null;var A=C.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:f},C.createElement(yae,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),C.createElement(xae,{width:c.width,height:c.height}),C.createElement(vae,N_({},t,y,{margin:n,chartWidth:d,chartHeight:p,contextPayload:e})));return KM.createPortal(A,_)}class Qm extends C.PureComponent{static getWidthOrHeight(e,r,n,i){return e==="vertical"&&Ne(r)?{height:r}:e==="horizontal"?{width:n||i}:null}render(){return C.createElement(bae,this.props)}}hS(Qm,"displayName","Legend");hS(Qm,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function k_(){return k_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},k_.apply(null,arguments)}function MR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(r),!0).forEach(function(n){wae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wae(t,e,r){return(e=_ae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _ae(t){var e=Aae(t,"string");return typeof e=="symbol"?e:e+""}function Aae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eae(t){return Array.isArray(t)&&Do(t[0])&&Do(t[1])?t.join(" ~ "):t}var Sae=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:o,itemSorter:s,wrapperClassName:c,labelClassName:f,label:d,labelFormatter:p,accessibilityLayer:g=!1}=t,y=()=>{if(a&&a.length){var M={padding:0,margin:0},L=(s?Um(a,s):a).map((O,D)=>{if(O.type==="none")return null;var j=O.formatter||o||Eae,{value:B,name:z}=O,V=B,F=z;if(j){var he=j(B,z,O,D,a);if(Array.isArray(he))[V,F]=he;else if(he!=null)V=he;else return null}var _e=Qb({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},n);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:_e},Do(F)?C.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Do(F)?C.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,C.createElement("span",{className:"recharts-tooltip-item-value"},V),C.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:M},L)}return null},w=Qb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),_=Qb({margin:0},i),A=!cr(d),S=A?d:"",T=wt("recharts-default-tooltip",c),R=wt("recharts-tooltip-label",f);A&&p&&a!==void 0&&a!==null&&(S=p(d,a));var N=g?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",k_({className:T,style:w},N),C.createElement("p",{className:R,style:_},C.isValidElement(S)?S:"".concat(S)),y())},Th="recharts-tooltip-wrapper",Cae={visibility:"hidden"};function Tae(t){var{coordinate:e,translateX:r,translateY:n}=t;return wt(Th,{["".concat(Th,"-right")]:Ne(r)&&e&&Ne(e.x)&&r>=e.x,["".concat(Th,"-left")]:Ne(r)&&e&&Ne(e.x)&&r<e.x,["".concat(Th,"-bottom")]:Ne(n)&&e&&Ne(e.y)&&n>=e.y,["".concat(Th,"-top")]:Ne(n)&&e&&Ne(e.y)&&n<e.y})}function jR(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:s,viewBox:c,viewBoxDimension:f}=t;if(a&&Ne(a[n]))return a[n];var d=r[n]-s-(i>0?i:0),p=r[n]+i;if(e[n])return o[n]?d:p;var g=c[n];if(g==null)return 0;if(o[n]){var y=d,w=g;return y<w?Math.max(p,g):Math.max(d,g)}if(f==null)return 0;var _=p+s,A=g+f;return _>A?Math.max(d,g):Math.max(p,g)}function Iae(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Oae(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:s,viewBox:c}=t,f,d,p;return o.height>0&&o.width>0&&r?(d=jR({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=jR({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),f=Iae({translateX:d,translateY:p,useTranslate3d:s})):f=Cae,{cssProperties:f,cssClasses:Tae({translateX:d,translateY:p,coordinate:r})}}function LR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function m1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(r),!0).forEach(function(n){M_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M_(t,e,r){return(e=Rae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rae(t){var e=Pae(t,"string");return typeof e=="symbol"?e:e+""}function Pae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Dae extends C.PureComponent{constructor(){super(...arguments),M_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),M_(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:o,hasPayload:s,isAnimationActive:c,offset:f,position:d,reverseDirection:p,useTranslate3d:g,viewBox:y,wrapperStyle:w,lastBoundingBox:_,innerRef:A,hasPortalFromProps:S}=this.props,{cssClasses:T,cssProperties:R}=Oae({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:f,position:d,reverseDirection:p,tooltipBox:{height:_.height,width:_.width},useTranslate3d:g,viewBox:y}),N=S?{}:m1(m1({transition:c&&e?"transform ".concat(n,"ms ").concat(i):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),M=m1(m1({},N),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},w);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:T,style:M,ref:A},a)}}var Nae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Jl={devToolsEnabled:!1,isSsr:Nae()},lj=()=>Re(t=>t.rootProps.accessibilityLayer);function qi(t){return Number.isFinite(t)}function qf(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j_.apply(null,arguments)}function BR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BR(Object(r),!0).forEach(function(n){kae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kae(t,e,r){return(e=Mae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mae(t){var e=jae(t,"string");return typeof e=="symbol"?e:e+""}function jae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UR={curveBasisClosed:tre,curveBasisOpen:rre,curveBasis:ere,curveBumpX:Ute,curveBumpY:Fte,curveLinearClosed:nre,curveLinear:Bm,curveMonotoneX:ire,curveMonotoneY:are,curveNatural:ore,curveStep:sre,curveStepAfter:cre,curveStepBefore:lre},y1=t=>qi(t.x)&&qi(t.y),Ih=t=>t.x,Oh=t=>t.y,Lae=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Jp(t));return(r==="curveMonotone"||r==="curveBump")&&e?UR["".concat(r).concat(e==="vertical"?"Y":"X")]:UR[r]||Bm},Bae=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=t,o=Lae(e,i),s=a?r.filter(y1):r,c;if(Array.isArray(n)){var f=a?n.filter(p=>y1(p)):n,d=s.map((p,g)=>zR(zR({},p),{},{base:f[g]}));return i==="vertical"?c=u1().y(Oh).x1(Ih).x0(p=>p.base.x):c=u1().x(Ih).y1(Oh).y0(p=>p.base.y),c.defined(y1).curve(o),c(d)}return i==="vertical"&&Ne(n)?c=u1().y(Oh).x1(Ih).x0(n):Ne(n)?c=u1().x(Ih).y1(Oh).y0(n):c=t9().x(Ih).y(Oh),c.defined(y1).curve(o),c(s)},pS=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var a=r&&r.length?Bae(t):n;return C.createElement("path",j_({},jo(t),GE(t),{className:wt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},zae=["x","y","top","left","width","height","className"];function L_(){return L_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},L_.apply(null,arguments)}function FR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Uae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(r),!0).forEach(function(n){Fae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fae(t,e,r){return(e=Vae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vae(t){var e=Hae(t,"string");return typeof e=="symbol"?e:e+""}function Hae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $ae(t,e){if(t==null)return{};var r,n,i=qae(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function qae(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Gae=(t,e,r,n,i,a)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(r),Wae=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:a=0,height:o=0,className:s}=t,c=$ae(t,zae),f=Uae({x:e,y:r,top:n,left:i,width:a,height:o},c);return!Ne(e)||!Ne(r)||!Ne(a)||!Ne(o)||!Ne(n)||!Ne(i)?null:C.createElement("path",L_({},dr(f,!0),{className:wt("recharts-cross",s),d:Gae(e,r,a,o,n,i)}))};function Kae(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function VR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VR(Object(r),!0).forEach(function(n){Yae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yae(t,e,r){return(e=Qae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qae(t){var e=Zae(t,"string");return typeof e=="symbol"?e:e+""}function Zae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mn(t,e){var r=Xae({},t),n=e,i=Object.keys(e),a=i.reduce((o,s)=>(o[s]===void 0&&n[s]!==void 0&&(o[s]=n[s]),o),r);return a}function Jae(){}function HR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $R(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(r),!0).forEach(function(n){eoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eoe(t,e,r){return(e=toe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function toe(t){var e=roe(t,"string");return typeof e=="symbol"?e:e+""}function roe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var noe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),cj=(t,e,r)=>t.map(n=>"".concat(noe(n)," ").concat(e,"ms ").concat(r)).join(","),ioe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),bp=(t,e)=>Object.keys(e).reduce((r,n)=>$R($R({},r),{},{[n]:t(n,e[n])}),{});function qR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(r),!0).forEach(function(n){aoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aoe(t,e,r){return(e=ooe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ooe(t){var e=soe(t,"string");return typeof e=="symbol"?e:e+""}function soe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ov=(t,e,r)=>t+(e-t)*r,B_=t=>{var{from:e,to:r}=t;return e!==r},uj=(t,e,r)=>{var n=bp((i,a)=>{if(B_(a)){var[o,s]=t(a.from,a.to,a.velocity);return Rn(Rn({},a),{},{from:o,velocity:s})}return a},e);return r<1?bp((i,a)=>B_(a)?Rn(Rn({},a),{},{velocity:Ov(a.velocity,n[i].velocity,r),from:Ov(a.from,n[i].from,r)}):a,e):uj(t,n,r-1)};function loe(t,e,r,n,i,a){var o,s=n.reduce((g,y)=>Rn(Rn({},g),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),c=()=>bp((g,y)=>y.from,s),f=()=>!Object.values(s).filter(B_).length,d=null,p=g=>{o||(o=g);var y=g-o,w=y/r.dt;s=uj(r,s,w),i(Rn(Rn(Rn({},t),e),c())),o=g,f()||(d=a.setTimeout(p))};return()=>(d=a.setTimeout(p),()=>{d()})}function coe(t,e,r,n,i,a,o){var s=null,c=i.reduce((p,g)=>Rn(Rn({},p),{},{[g]:[t[g],e[g]]}),{}),f,d=p=>{f||(f=p);var g=(p-f)/n,y=bp((_,A)=>Ov(...A,r(g)),c);if(a(Rn(Rn(Rn({},t),e),y)),g<1)s=o.setTimeout(d);else{var w=bp((_,A)=>Ov(...A,r(1)),c);a(Rn(Rn(Rn({},t),e),w))}};return()=>(s=o.setTimeout(d),()=>{s()})}const uoe=(t,e,r,n,i,a)=>{var o=ioe(t,e);return r.isStepper===!0?loe(t,e,r,o,i,a):coe(t,e,r,n,o,i,a)};var Rv=1e-4,fj=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],dj=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),GR=(t,e)=>r=>{var n=fj(t,e);return dj(n,r)},foe=(t,e)=>r=>{var n=fj(t,e),i=[...n.map((a,o)=>a*o).slice(1),0];return dj(i,r)},WR=function(){for(var e,r,n,i,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];if(o.length===1)switch(o[0]){case"linear":[e,n,r,i]=[0,0,1,1];break;case"ease":[e,n,r,i]=[.25,.1,.25,1];break;case"ease-in":[e,n,r,i]=[.42,0,1,1];break;case"ease-out":[e,n,r,i]=[.42,0,.58,1];break;case"ease-in-out":[e,n,r,i]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,n,r,i]=c[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else o.length===4&&([e,n,r,i]=o);var f=GR(e,r),d=GR(n,i),p=foe(e,r),g=w=>w>1?1:w<0?0:w,y=w=>{for(var _=w>1?1:w,A=_,S=0;S<8;++S){var T=f(A)-_,R=p(A);if(Math.abs(T-_)<Rv||R<Rv)return d(A);A=g(A-T/R)}return d(A)};return y.isStepper=!1,y},doe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,a=(o,s,c)=>{var f=-(o-s)*r,d=c*n,p=c+(f-d)*i/1e3,g=c*i/1e3+o;return Math.abs(g-s)<Rv&&Math.abs(p)<Rv?[s,0]:[g,p]};return a.isStepper=!0,a.dt=i,a},hoe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WR(t);case"spring":return doe();default:if(t.split("(")[0]==="cubic-bezier")return WR(t)}return typeof t=="function"?t:null};function poe(t){var e,r=()=>null,n=!1,i=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,[c,...f]=s;if(typeof c=="number"){i=t.setTimeout(a.bind(null,f),c);return}a(c),i=t.setTimeout(a.bind(null,f));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),a(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class goe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function voe(){return poe(new goe)}var moe=C.createContext(voe);function yoe(t,e){var r=C.useContext(moe);return C.useMemo(()=>e??r(t),[t,e,r])}var xoe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},KR={t:0},Zb={t:1};function i0(t){var e=Mn(t,xoe),{isActive:r,canBegin:n,duration:i,easing:a,begin:o,onAnimationEnd:s,onAnimationStart:c,children:f}=e,d=yoe(e.animationId,e.animationManager),[p,g]=C.useState(r?KR:Zb),y=C.useRef(null);return C.useEffect(()=>{r||g(Zb)},[r]),C.useEffect(()=>{if(!r||!n)return Jae;var w=uoe(KR,Zb,hoe(a),i,g,d.getTimeoutController()),_=()=>{y.current=w()};return d.start([c,o,_,i,s]),()=>{d.stop(),y.current&&y.current(),s()}},[r,n,i,a,o,c,s,d]),f(p.t)}function a0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=C.useRef(vp(e)),n=C.useRef(t);return n.current!==t&&(r.current=vp(e),n.current=t),r.current}function XR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function YR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(r),!0).forEach(function(n){boe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function boe(t,e,r){return(e=woe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function woe(t){var e=_oe(t,"string");return typeof e=="symbol"?e:e+""}function _oe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pv(){return Pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pv.apply(null,arguments)}var QR=(t,e,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,s=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,f;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,g=4;p<g;p++)d[p]=i[p]>a?a:i[p];f="M".concat(t,",").concat(e+o*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+s*d[0],",").concat(e)),f+="L ".concat(t+r-s*d[1],",").concat(e),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(e+o*d[1])),f+="L ".concat(t+r,",").concat(e+n-o*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-s*d[2],",").concat(e+n)),f+="L ".concat(t+s*d[3],",").concat(e+n),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+n-o*d[3])),f+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);f="M ".concat(t,",").concat(e+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+s*y,",").concat(e,`
            L `).concat(t+r-s*y,",").concat(e,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+r,",").concat(e+o*y,`
            L `).concat(t+r,",").concat(e+n-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+r-s*y,",").concat(e+n,`
            L `).concat(t+s*y,",").concat(e+n,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t,",").concat(e+n-o*y," Z")}else f="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return f},Aoe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hj=t=>{var e=Mn(t,Aoe),r=C.useRef(null),[n,i]=C.useState(-1);C.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var he=r.current.getTotalLength();he&&i(he)}catch{}},[]);var{x:a,y:o,width:s,height:c,radius:f,className:d}=e,{animationEasing:p,animationDuration:g,animationBegin:y,isAnimationActive:w,isUpdateAnimationActive:_}=e,A=C.useRef(s),S=C.useRef(c),T=C.useRef(a),R=C.useRef(o),N=C.useMemo(()=>({x:a,y:o,width:s,height:c,radius:f}),[a,o,s,c,f]),M=a0(N,"rectangle-");if(a!==+a||o!==+o||s!==+s||c!==+c||s===0||c===0)return null;var L=wt("recharts-rectangle",d);if(!_)return C.createElement("path",Pv({},dr(e,!0),{className:L,d:QR(a,o,s,c,f)}));var O=A.current,D=S.current,j=T.current,B=R.current,z="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),F=cj(["strokeDasharray"],g,typeof p=="string"?p:void 0);return C.createElement(i0,{animationId:M,key:M,canBegin:n>0,duration:g,easing:p,isActive:_,begin:y},he=>{var _e=vr(O,s,he),Y=vr(D,c,he),ie=vr(j,a,he),K=vr(B,o,he);r.current&&(A.current=_e,S.current=Y,T.current=ie,R.current=K);var ve;return w?he>0?ve={transition:F,strokeDasharray:V}:ve={strokeDasharray:z}:ve={strokeDasharray:V},C.createElement("path",Pv({},dr(e,!0),{className:L,d:QR(ie,K,_e,Y,f),ref:r,style:YR(YR({},ve),e.style)}))})};function pj(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:a}=t,o=$r(e,r,n,i),s=$r(e,r,n,a);return{points:[o,s],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function z_(){return z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},z_.apply(null,arguments)}var Eoe=(t,e)=>{var r=vn(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},x1=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:a,isExternal:o,cornerRadius:s,cornerIsExternal:c}=t,f=s*(o?1:-1)+n,d=Math.asin(s/f)/Iv,p=c?i:i+a*d,g=$r(e,r,f,p),y=$r(e,r,n,p),w=c?i-a*d:i,_=$r(e,r,f*Math.cos(d*Iv),w);return{center:g,circleTangency:y,lineTangency:_,theta:d}},gj=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:o}=t,s=Eoe(a,o),c=a+s,f=$r(e,r,i,a),d=$r(e,r,i,c),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var g=$r(e,r,n,a),y=$r(e,r,n,c);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(e,",").concat(r," Z");return p},Soe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:s,startAngle:c,endAngle:f}=t,d=vn(f-c),{circleTangency:p,lineTangency:g,theta:y}=x1({cx:e,cy:r,radius:i,angle:c,sign:d,cornerRadius:a,cornerIsExternal:s}),{circleTangency:w,lineTangency:_,theta:A}=x1({cx:e,cy:r,radius:i,angle:f,sign:-d,cornerRadius:a,cornerIsExternal:s}),S=s?Math.abs(c-f):Math.abs(c-f)-y-A;if(S<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):gj({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:c,endAngle:f});var T="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
  `);if(n>0){var{circleTangency:R,lineTangency:N,theta:M}=x1({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),{circleTangency:L,lineTangency:O,theta:D}=x1({cx:e,cy:r,radius:n,angle:f,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),j=s?Math.abs(c-f):Math.abs(c-f)-M-D;if(j<0&&a===0)return"".concat(T,"L").concat(e,",").concat(r,"Z");T+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(j>180),",").concat(+(d>0),",").concat(R.x,",").concat(R.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else T+="L".concat(e,",").concat(r,"Z");return T},Coe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},vj=t=>{var e=Mn(t,Coe),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:c,startAngle:f,endAngle:d,className:p}=e;if(a<i||f===d)return null;var g=wt("recharts-sector",p),y=a-i,w=qn(o,y,0,!0),_;return w>0&&Math.abs(f-d)<360?_=Soe({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(w,y/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:f,endAngle:d}):_=gj({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:f,endAngle:d}),C.createElement("path",z_({},dr(e,!0),{className:g,d:_}))};function Toe(t,e,r){var n,i,a,o;if(t==="horizontal")n=e.x,a=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:s,cy:c,innerRadius:f,outerRadius:d,angle:p}=e,g=$r(s,c,f,p),y=$r(s,c,d,p);n=g.x,i=g.y,a=y.x,o=y.y}else return pj(e);return[{x:n,y:i},{x:a,y:o}]}var Jb={},ew={},tw={},ZR;function Ioe(){return ZR||(ZR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A9();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(tw)),tw}var JR;function Ooe(){return JR||(JR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ioe();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(ew)),ew}var eP;function Roe(){return eP||(eP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E9(),r=Ooe();function n(i,a,o){o&&typeof o!="number"&&e.isIterateeCall(i,a,o)&&(a=o=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),o=o===void 0?i<a?1:-1:r.toFinite(o);const s=Math.max(Math.ceil((a-i)/(o||1)),0),c=new Array(s);for(let f=0;f<s;f++)c[f]=i,i+=o;return c}t.range=n})(Jb)),Jb}var rw,tP;function Poe(){return tP||(tP=1,rw=Roe().range),rw}var Doe=Poe();const mj=ko(Doe);function Dl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Noe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function gS(t){let e,r,n;t.length!==2?(e=Dl,r=(s,c)=>Dl(t(s),c),n=(s,c)=>t(s)-c):(e=t===Dl||t===Noe?t:koe,r=t,n=t);function i(s,c,f=0,d=s.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;r(s[p],c)<0?f=p+1:d=p}while(f<d)}return f}function a(s,c,f=0,d=s.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;r(s[p],c)<=0?f=p+1:d=p}while(f<d)}return f}function o(s,c,f=0,d=s.length){const p=i(s,c,f,d-1);return p>f&&n(s[p-1],c)>-n(s[p],c)?p-1:p}return{left:i,center:o,right:a}}function koe(){return 0}function yj(t){return t===null?NaN:+t}function*Moe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const joe=gS(Dl),o0=joe.right;gS(yj).center;class rP extends Map{constructor(e,r=zoe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(nP(this,e))}has(e){return super.has(nP(this,e))}set(e,r){return super.set(Loe(this,e),r)}delete(e){return super.delete(Boe(this,e))}}function nP({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Loe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Boe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function zoe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Uoe(t=Dl){if(t===Dl)return xj;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function xj(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Foe=Math.sqrt(50),Voe=Math.sqrt(10),Hoe=Math.sqrt(2);function Dv(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=Foe?10:a>=Voe?5:a>=Hoe?2:1;let s,c,f;return i<0?(f=Math.pow(10,-i)/o,s=Math.round(t*f),c=Math.round(e*f),s/f<t&&++s,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*o,s=Math.round(t/f),c=Math.round(e/f),s*f<t&&++s,c*f>e&&--c),c<s&&.5<=r&&r<2?Dv(t,e,r*2):[s,c,f]}function U_(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?Dv(e,t,r):Dv(t,e,r);if(!(a>=i))return[];const s=a-i+1,c=new Array(s);if(n)if(o<0)for(let f=0;f<s;++f)c[f]=(a-f)/-o;else for(let f=0;f<s;++f)c[f]=(a-f)*o;else if(o<0)for(let f=0;f<s;++f)c[f]=(i+f)/-o;else for(let f=0;f<s;++f)c[f]=(i+f)*o;return c}function F_(t,e,r){return e=+e,t=+t,r=+r,Dv(t,e,r)[2]}function V_(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?F_(e,t,r):F_(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function iP(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function aP(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function bj(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?xj:Uoe(i);n>r;){if(n-r>600){const c=n-r+1,f=e-r+1,d=Math.log(c),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(c-p)/c)*(f-c/2<0?-1:1),y=Math.max(r,Math.floor(e-f*p/c+g)),w=Math.min(n,Math.floor(e+(c-f)*p/c+g));bj(t,e,y,w,i)}const a=t[e];let o=r,s=n;for(Rh(t,r,e),i(t[n],a)>0&&Rh(t,r,n);o<s;){for(Rh(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[r],a)===0?Rh(t,r,s):(++s,Rh(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function Rh(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function $oe(t,e,r){if(t=Float64Array.from(Moe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return aP(t);if(e>=1)return iP(t);var n,i=(n-1)*e,a=Math.floor(i),o=iP(bj(t,a).subarray(0,a+1)),s=aP(t.subarray(a+1));return o+(s-o)*(i-a)}}function qoe(t,e,r=yj){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),s=+r(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Goe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function wa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Cs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const H_=Symbol("implicit");function vS(){var t=new rP,e=[],r=[],n=H_;function i(a){let o=t.get(a);if(o===void 0){if(n!==H_)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new rP;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vS(e,r).unknown(n)},wa.apply(i,arguments),i}function mS(){var t=vS().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,o,s=!1,c=0,f=0,d=.5;delete t.unknown;function p(){var g=e().length,y=i<n,w=y?i:n,_=y?n:i;a=(_-w)/Math.max(1,g-c+f*2),s&&(a=Math.floor(a)),w+=(_-w-a*(g-c))*d,o=a*(1-c),s&&(w=Math.round(w),o=Math.round(o));var A=Goe(g).map(function(S){return w+a*S});return r(y?A.reverse():A)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([n,i]=g,n=+n,i=+i,p()):[n,i]},t.rangeRound=function(g){return[n,i]=g,n=+n,i=+i,s=!0,p()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(g){return arguments.length?(s=!!g,p()):s},t.padding=function(g){return arguments.length?(c=Math.min(1,f=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(f=+g,p()):f},t.align=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),p()):d},t.copy=function(){return mS(e(),[n,i]).round(s).paddingInner(c).paddingOuter(f).align(d)},wa.apply(p(),arguments)}function wj(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return wj(e())},t}function Woe(){return wj(mS.apply(null,arguments).paddingInner(1))}function yS(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function _j(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function s0(){}var wp=.7,Nv=1/wp,Rf="\\s*([+-]?\\d+)\\s*",_p="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Io="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Koe=/^#([0-9a-f]{3,8})$/,Xoe=new RegExp(`^rgb\\(${Rf},${Rf},${Rf}\\)$`),Yoe=new RegExp(`^rgb\\(${Io},${Io},${Io}\\)$`),Qoe=new RegExp(`^rgba\\(${Rf},${Rf},${Rf},${_p}\\)$`),Zoe=new RegExp(`^rgba\\(${Io},${Io},${Io},${_p}\\)$`),Joe=new RegExp(`^hsl\\(${_p},${Io},${Io}\\)$`),ese=new RegExp(`^hsla\\(${_p},${Io},${Io},${_p}\\)$`),oP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yS(s0,Ap,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sP,formatHex:sP,formatHex8:tse,formatHsl:rse,formatRgb:lP,toString:lP});function sP(){return this.rgb().formatHex()}function tse(){return this.rgb().formatHex8()}function rse(){return Aj(this).formatHsl()}function lP(){return this.rgb().formatRgb()}function Ap(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Koe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?cP(e):r===3?new xi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?b1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?b1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xoe.exec(t))?new xi(e[1],e[2],e[3],1):(e=Yoe.exec(t))?new xi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Qoe.exec(t))?b1(e[1],e[2],e[3],e[4]):(e=Zoe.exec(t))?b1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Joe.exec(t))?dP(e[1],e[2]/100,e[3]/100,1):(e=ese.exec(t))?dP(e[1],e[2]/100,e[3]/100,e[4]):oP.hasOwnProperty(t)?cP(oP[t]):t==="transparent"?new xi(NaN,NaN,NaN,0):null}function cP(t){return new xi(t>>16&255,t>>8&255,t&255,1)}function b1(t,e,r,n){return n<=0&&(t=e=r=NaN),new xi(t,e,r,n)}function nse(t){return t instanceof s0||(t=Ap(t)),t?(t=t.rgb(),new xi(t.r,t.g,t.b,t.opacity)):new xi}function $_(t,e,r,n){return arguments.length===1?nse(t):new xi(t,e,r,n??1)}function xi(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}yS(xi,$_,_j(s0,{brighter(t){return t=t==null?Nv:Math.pow(Nv,t),new xi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?wp:Math.pow(wp,t),new xi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new xi(eu(this.r),eu(this.g),eu(this.b),kv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uP,formatHex:uP,formatHex8:ise,formatRgb:fP,toString:fP}));function uP(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}`}function ise(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}${$c((isNaN(this.opacity)?1:this.opacity)*255)}`}function fP(){const t=kv(this.opacity);return`${t===1?"rgb(":"rgba("}${eu(this.r)}, ${eu(this.g)}, ${eu(this.b)}${t===1?")":`, ${t})`}`}function kv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $c(t){return t=eu(t),(t<16?"0":"")+t.toString(16)}function dP(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new za(t,e,r,n)}function Aj(t){if(t instanceof za)return new za(t.h,t.s,t.l,t.opacity);if(t instanceof s0||(t=Ap(t)),!t)return new za;if(t instanceof za)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new za(o,s,c,t.opacity)}function ase(t,e,r,n){return arguments.length===1?Aj(t):new za(t,e,r,n??1)}function za(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}yS(za,ase,_j(s0,{brighter(t){return t=t==null?Nv:Math.pow(Nv,t),new za(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wp:Math.pow(wp,t),new za(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new xi(nw(t>=240?t-240:t+120,i,n),nw(t,i,n),nw(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new za(hP(this.h),w1(this.s),w1(this.l),kv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kv(this.opacity);return`${t===1?"hsl(":"hsla("}${hP(this.h)}, ${w1(this.s)*100}%, ${w1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hP(t){return t=(t||0)%360,t<0?t+360:t}function w1(t){return Math.max(0,Math.min(1,t||0))}function nw(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const xS=t=>()=>t;function ose(t,e){return function(r){return t+r*e}}function sse(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function lse(t){return(t=+t)==1?Ej:function(e,r){return r-e?sse(e,r,t):xS(isNaN(e)?r:e)}}function Ej(t,e){var r=e-t;return r?ose(t,r):xS(isNaN(t)?e:t)}const pP=(function t(e){var r=lse(e);function n(i,a){var o=r((i=$_(i)).r,(a=$_(a)).r),s=r(i.g,a.g),c=r(i.b,a.b),f=Ej(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=s(d),i.b=c(d),i.opacity=f(d),i+""}}return n.gamma=t,n})(1);function cse(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function use(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fse(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=ld(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function dse(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Mv(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function hse(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=ld(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var q_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iw=new RegExp(q_.source,"g");function pse(t){return function(){return t}}function gse(t){return function(e){return t(e)+""}}function vse(t,e){var r=q_.lastIndex=iw.lastIndex=0,n,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(n=q_.exec(t))&&(i=iw.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Mv(n,i)})),r=iw.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?gse(c[0].x):pse(e):(e=c.length,function(f){for(var d=0,p;d<e;++d)s[(p=c[d]).i]=p.x(f);return s.join("")})}function ld(t,e){var r=typeof e,n;return e==null||r==="boolean"?xS(e):(r==="number"?Mv:r==="string"?(n=Ap(e))?(e=n,pP):vse:e instanceof Ap?pP:e instanceof Date?dse:use(e)?cse:Array.isArray(e)?fse:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hse:Mv)(t,e)}function bS(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function mse(t,e){e===void 0&&(e=t,t=ld);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[s](o-s)}}function yse(t){return function(){return t}}function jv(t){return+t}var gP=[0,1];function ii(t){return t}function G_(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:yse(isNaN(e)?NaN:.5)}function xse(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function bse(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=G_(i,n),a=r(o,a)):(n=G_(n,i),a=r(a,o)),function(s){return a(n(s))}}function wse(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=G_(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(s){var c=o0(t,s,1,n)-1;return a[c](i[c](s))}}function l0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Zm(){var t=gP,e=gP,r=ld,n,i,a,o=ii,s,c,f;function d(){var g=Math.min(t.length,e.length);return o!==ii&&(o=xse(t[0],t[g-1])),s=g>2?wse:bse,c=f=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=s(t.map(n),e,r)))(n(o(g)))}return p.invert=function(g){return o(i((f||(f=s(e,t.map(n),Mv)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,jv),d()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),d()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),r=bS,d()},p.clamp=function(g){return arguments.length?(o=g?!0:ii,d()):o!==ii},p.interpolate=function(g){return arguments.length?(r=g,d()):r},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,y){return n=g,i=y,d()}}function wS(){return Zm()(ii,ii)}function _se(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Lv(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Gf(t){return t=Lv(Math.abs(t)),t?t[1]:NaN}function Ase(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),a.push(r.substring(i-=s,i+s)),!((c+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Ese(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Sse=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ep(t){if(!(e=Sse.exec(t)))throw new Error("invalid format: "+t);var e;return new _S({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ep.prototype=_S.prototype;function _S(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}_S.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cse(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var Sj;function Tse(t,e){var r=Lv(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(Sj=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Lv(t,Math.max(0,e+a-1))[0]}function vP(t,e){var r=Lv(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const mP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:_se,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>vP(t*100,e),r:vP,s:Tse,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yP(t){return t}var xP=Array.prototype.map,bP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ise(t){var e=t.grouping===void 0||t.thousands===void 0?yP:Ase(xP.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?yP:Ese(xP.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(p){p=Ep(p);var g=p.fill,y=p.align,w=p.sign,_=p.symbol,A=p.zero,S=p.width,T=p.comma,R=p.precision,N=p.trim,M=p.type;M==="n"?(T=!0,M="g"):mP[M]||(R===void 0&&(R=12),N=!0,M="g"),(A||g==="0"&&y==="=")&&(A=!0,g="0",y="=");var L=_==="$"?r:_==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",O=_==="$"?n:/[%p]/.test(M)?o:"",D=mP[M],j=/[defgprs%]/.test(M);R=R===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function B(z){var V=L,F=O,he,_e,Y;if(M==="c")F=D(z)+F,z="";else{z=+z;var ie=z<0||1/z<0;if(z=isNaN(z)?c:D(Math.abs(z),R),N&&(z=Cse(z)),ie&&+z==0&&w!=="+"&&(ie=!1),V=(ie?w==="("?w:s:w==="-"||w==="("?"":w)+V,F=(M==="s"?bP[8+Sj/3]:"")+F+(ie&&w==="("?")":""),j){for(he=-1,_e=z.length;++he<_e;)if(Y=z.charCodeAt(he),48>Y||Y>57){F=(Y===46?i+z.slice(he+1):z.slice(he))+F,z=z.slice(0,he);break}}}T&&!A&&(z=e(z,1/0));var K=V.length+z.length+F.length,ve=K<S?new Array(S-K+1).join(g):"";switch(T&&A&&(z=e(ve+z,ve.length?S-F.length:1/0),ve=""),y){case"<":z=V+z+F+ve;break;case"=":z=V+ve+z+F;break;case"^":z=ve.slice(0,K=ve.length>>1)+V+z+F+ve.slice(K);break;default:z=ve+V+z+F;break}return a(z)}return B.toString=function(){return p+""},B}function d(p,g){var y=f((p=Ep(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Gf(g)/3)))*3,_=Math.pow(10,-w),A=bP[8+w/3];return function(S){return y(_*S)+A}}return{format:f,formatPrefix:d}}var _1,AS,Cj;Ose({thousands:",",grouping:[3],currency:["$",""]});function Ose(t){return _1=Ise(t),AS=_1.format,Cj=_1.formatPrefix,_1}function Rse(t){return Math.max(0,-Gf(Math.abs(t)))}function Pse(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gf(e)/3)))*3-Gf(Math.abs(t)))}function Dse(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Gf(e)-Gf(t))+1}function Tj(t,e,r,n){var i=V_(t,e,r),a;switch(n=Ep(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=Pse(i,o))&&(n.precision=a),Cj(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Dse(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Rse(i))&&(n.precision=a-(n.type==="%")*2);break}}return AS(n)}function ec(t){var e=t.domain;return t.ticks=function(r){var n=e();return U_(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return Tj(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],s=n[a],c,f,d=10;for(s<o&&(f=o,o=s,s=f,f=i,i=a,a=f);d-- >0;){if(f=F_(o,s,r),f===c)return n[i]=o,n[a]=s,e(n);if(f>0)o=Math.floor(o/f)*f,s=Math.ceil(s/f)*f;else if(f<0)o=Math.ceil(o*f)/f,s=Math.floor(s*f)/f;else break;c=f}return t},t}function Ij(){var t=wS();return t.copy=function(){return l0(t,Ij())},wa.apply(t,arguments),ec(t)}function Oj(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,jv),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Oj(t).unknown(e)},t=arguments.length?Array.from(t,jv):[0,1],ec(r)}function Rj(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function wP(t){return Math.log(t)}function _P(t){return Math.exp(t)}function Nse(t){return-Math.log(-t)}function kse(t){return-Math.exp(-t)}function Mse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function jse(t){return t===10?Mse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Lse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function AP(t){return(e,r)=>-t(-e,r)}function ES(t){const e=t(wP,_P),r=e.domain;let n=10,i,a;function o(){return i=Lse(n),a=jse(n),r()[0]<0?(i=AP(i),a=AP(a),t(Nse,kse)):t(wP,_P),e}return e.base=function(s){return arguments.length?(n=+s,o()):n},e.domain=function(s){return arguments.length?(r(s),o()):r()},e.ticks=s=>{const c=r();let f=c[0],d=c[c.length-1];const p=d<f;p&&([f,d]=[d,f]);let g=i(f),y=i(d),w,_;const A=s==null?10:+s;let S=[];if(!(n%1)&&y-g<A){if(g=Math.floor(g),y=Math.ceil(y),f>0){for(;g<=y;++g)for(w=1;w<n;++w)if(_=g<0?w/a(-g):w*a(g),!(_<f)){if(_>d)break;S.push(_)}}else for(;g<=y;++g)for(w=n-1;w>=1;--w)if(_=g>0?w/a(-g):w*a(g),!(_<f)){if(_>d)break;S.push(_)}S.length*2<A&&(S=U_(f,d,A))}else S=U_(g,y,Math.min(y-g,A)).map(a);return p?S.reverse():S},e.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ep(c)).precision==null&&(c.trim=!0),c=AS(c)),s===1/0)return c;const f=Math.max(1,n*s/e.ticks().length);return d=>{let p=d/a(Math.round(i(d)));return p*n<n-.5&&(p*=n),p<=f?c(d):""}},e.nice=()=>r(Rj(r(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function Pj(){const t=ES(Zm()).domain([1,10]);return t.copy=()=>l0(t,Pj()).base(t.base()),wa.apply(t,arguments),t}function EP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function SP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function SS(t){var e=1,r=t(EP(e),SP(e));return r.constant=function(n){return arguments.length?t(EP(e=+n),SP(e)):e},ec(r)}function Dj(){var t=SS(Zm());return t.copy=function(){return l0(t,Dj()).constant(t.constant())},wa.apply(t,arguments)}function CP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Bse(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function zse(t){return t<0?-t*t:t*t}function CS(t){var e=t(ii,ii),r=1;function n(){return r===1?t(ii,ii):r===.5?t(Bse,zse):t(CP(r),CP(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ec(e)}function TS(){var t=CS(Zm());return t.copy=function(){return l0(t,TS()).exponent(t.exponent())},wa.apply(t,arguments),t}function Use(){return TS.apply(null,arguments).exponent(.5)}function TP(t){return Math.sign(t)*t*t}function Fse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Nj(){var t=wS(),e=[0,1],r=!1,n;function i(a){var o=Fse(t(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return t.invert(TP(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,jv)).map(TP)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Nj(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},wa.apply(i,arguments),ec(i)}function kj(){var t=[],e=[],r=[],n;function i(){var o=0,s=Math.max(1,e.length);for(r=new Array(s-1);++o<s;)r[o-1]=qoe(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?n:e[o0(r,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:t[0],s<r.length?r[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Dl),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return kj().domain(t).range(e).unknown(n)},wa.apply(a,arguments)}function Mj(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[o0(n,c,0,r)]:a}function s(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,s()):[t,e]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,s()):i.slice()},o.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,n[0]]:f>=r?[n[r-1],e]:[n[f-1],n[f]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Mj().domain([t,e]).range(i).unknown(a)},wa.apply(ec(o),arguments)}function jj(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[o0(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return jj().domain(t).range(e).unknown(r)},wa.apply(i,arguments)}const aw=new Date,ow=new Date;function an(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const c=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return c;let f;do c.push(f=new Date(+a)),e(a,s),t(a);while(f<a&&a<o);return c},i.filter=a=>an(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(aw.setTime(+a),ow.setTime(+o),t(aw),t(ow),Math.floor(r(aw,ow))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Bv=an(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Bv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?an(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Bv);Bv.range;const ss=1e3,pa=ss*60,ls=pa*60,xs=ls*24,IS=xs*7,IP=xs*30,sw=xs*365,qc=an(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ss)},(t,e)=>(e-t)/ss,t=>t.getUTCSeconds());qc.range;const OS=an(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ss)},(t,e)=>{t.setTime(+t+e*pa)},(t,e)=>(e-t)/pa,t=>t.getMinutes());OS.range;const RS=an(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*pa)},(t,e)=>(e-t)/pa,t=>t.getUTCMinutes());RS.range;const PS=an(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ss-t.getMinutes()*pa)},(t,e)=>{t.setTime(+t+e*ls)},(t,e)=>(e-t)/ls,t=>t.getHours());PS.range;const DS=an(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ls)},(t,e)=>(e-t)/ls,t=>t.getUTCHours());DS.range;const c0=an(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*pa)/xs,t=>t.getDate()-1);c0.range;const Jm=an(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xs,t=>t.getUTCDate()-1);Jm.range;const Lj=an(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xs,t=>Math.floor(t/xs));Lj.range;function wu(t){return an(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*pa)/IS)}const ey=wu(0),zv=wu(1),Vse=wu(2),Hse=wu(3),Wf=wu(4),$se=wu(5),qse=wu(6);ey.range;zv.range;Vse.range;Hse.range;Wf.range;$se.range;qse.range;function _u(t){return an(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/IS)}const ty=_u(0),Uv=_u(1),Gse=_u(2),Wse=_u(3),Kf=_u(4),Kse=_u(5),Xse=_u(6);ty.range;Uv.range;Gse.range;Wse.range;Kf.range;Kse.range;Xse.range;const NS=an(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());NS.range;const kS=an(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());kS.range;const bs=an(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:an(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});bs.range;const ws=an(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ws.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:an(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});ws.range;function Bj(t,e,r,n,i,a){const o=[[qc,1,ss],[qc,5,5*ss],[qc,15,15*ss],[qc,30,30*ss],[a,1,pa],[a,5,5*pa],[a,15,15*pa],[a,30,30*pa],[i,1,ls],[i,3,3*ls],[i,6,6*ls],[i,12,12*ls],[n,1,xs],[n,2,2*xs],[r,1,IS],[e,1,IP],[e,3,3*IP],[t,1,sw]];function s(f,d,p){const g=d<f;g&&([f,d]=[d,f]);const y=p&&typeof p.range=="function"?p:c(f,d,p),w=y?y.range(f,+d+1):[];return g?w.reverse():w}function c(f,d,p){const g=Math.abs(d-f)/p,y=gS(([,,A])=>A).right(o,g);if(y===o.length)return t.every(V_(f/sw,d/sw,p));if(y===0)return Bv.every(Math.max(V_(f,d,p),1));const[w,_]=o[g/o[y-1][2]<o[y][2]/g?y-1:y];return w.every(_)}return[s,c]}const[Yse,Qse]=Bj(ws,kS,ty,Lj,DS,RS),[Zse,Jse]=Bj(bs,NS,ey,c0,PS,OS);function lw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ph(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function ele(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,f=Dh(i),d=Nh(i),p=Dh(a),g=Nh(a),y=Dh(o),w=Nh(o),_=Dh(s),A=Nh(s),S=Dh(c),T=Nh(c),R={a:ie,A:K,b:ve,B:Ie,c:null,d:kP,e:kP,f:Ale,g:Nle,G:Mle,H:ble,I:wle,j:_le,L:zj,m:Ele,M:Sle,p:G,q:Z,Q:LP,s:BP,S:Cle,u:Tle,U:Ile,V:Ole,w:Rle,W:Ple,x:null,X:null,y:Dle,Y:kle,Z:jle,"%":jP},N={a:be,A:Ee,b:De,B:We,c:null,d:MP,e:MP,f:Ule,g:Yle,G:Zle,H:Lle,I:Ble,j:zle,L:Fj,m:Fle,M:Vle,p:at,q:br,Q:LP,s:BP,S:Hle,u:$le,U:qle,V:Gle,w:Wle,W:Kle,x:null,X:null,y:Xle,Y:Qle,Z:Jle,"%":jP},M={a:B,A:z,b:V,B:F,c:he,d:DP,e:DP,f:vle,g:PP,G:RP,H:NP,I:NP,j:dle,L:gle,m:fle,M:hle,p:j,q:ule,Q:yle,s:xle,S:ple,u:ale,U:ole,V:sle,w:ile,W:lle,x:_e,X:Y,y:PP,Y:RP,Z:cle,"%":mle};R.x=L(r,R),R.X=L(n,R),R.c=L(e,R),N.x=L(r,N),N.X=L(n,N),N.c=L(e,N);function L(me,$e){return function(Qe){var ge=[],wr=-1,tt=0,Gr=me.length,_r,Ei,Rs;for(Qe instanceof Date||(Qe=new Date(+Qe));++wr<Gr;)me.charCodeAt(wr)===37&&(ge.push(me.slice(tt,wr)),(Ei=OP[_r=me.charAt(++wr)])!=null?_r=me.charAt(++wr):Ei=_r==="e"?" ":"0",(Rs=$e[_r])&&(_r=Rs(Qe,Ei)),ge.push(_r),tt=wr+1);return ge.push(me.slice(tt,wr)),ge.join("")}}function O(me,$e){return function(Qe){var ge=Ph(1900,void 0,1),wr=D(ge,me,Qe+="",0),tt,Gr;if(wr!=Qe.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if($e&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(tt=cw(Ph(ge.y,0,1)),Gr=tt.getUTCDay(),tt=Gr>4||Gr===0?Uv.ceil(tt):Uv(tt),tt=Jm.offset(tt,(ge.V-1)*7),ge.y=tt.getUTCFullYear(),ge.m=tt.getUTCMonth(),ge.d=tt.getUTCDate()+(ge.w+6)%7):(tt=lw(Ph(ge.y,0,1)),Gr=tt.getDay(),tt=Gr>4||Gr===0?zv.ceil(tt):zv(tt),tt=c0.offset(tt,(ge.V-1)*7),ge.y=tt.getFullYear(),ge.m=tt.getMonth(),ge.d=tt.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),Gr="Z"in ge?cw(Ph(ge.y,0,1)).getUTCDay():lw(Ph(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(Gr+5)%7:ge.w+ge.U*7-(Gr+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,cw(ge)):lw(ge)}}function D(me,$e,Qe,ge){for(var wr=0,tt=$e.length,Gr=Qe.length,_r,Ei;wr<tt;){if(ge>=Gr)return-1;if(_r=$e.charCodeAt(wr++),_r===37){if(_r=$e.charAt(wr++),Ei=M[_r in OP?$e.charAt(wr++):_r],!Ei||(ge=Ei(me,Qe,ge))<0)return-1}else if(_r!=Qe.charCodeAt(ge++))return-1}return ge}function j(me,$e,Qe){var ge=f.exec($e.slice(Qe));return ge?(me.p=d.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function B(me,$e,Qe){var ge=y.exec($e.slice(Qe));return ge?(me.w=w.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function z(me,$e,Qe){var ge=p.exec($e.slice(Qe));return ge?(me.w=g.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function V(me,$e,Qe){var ge=S.exec($e.slice(Qe));return ge?(me.m=T.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function F(me,$e,Qe){var ge=_.exec($e.slice(Qe));return ge?(me.m=A.get(ge[0].toLowerCase()),Qe+ge[0].length):-1}function he(me,$e,Qe){return D(me,e,$e,Qe)}function _e(me,$e,Qe){return D(me,r,$e,Qe)}function Y(me,$e,Qe){return D(me,n,$e,Qe)}function ie(me){return o[me.getDay()]}function K(me){return a[me.getDay()]}function ve(me){return c[me.getMonth()]}function Ie(me){return s[me.getMonth()]}function G(me){return i[+(me.getHours()>=12)]}function Z(me){return 1+~~(me.getMonth()/3)}function be(me){return o[me.getUTCDay()]}function Ee(me){return a[me.getUTCDay()]}function De(me){return c[me.getUTCMonth()]}function We(me){return s[me.getUTCMonth()]}function at(me){return i[+(me.getUTCHours()>=12)]}function br(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var $e=L(me+="",R);return $e.toString=function(){return me},$e},parse:function(me){var $e=O(me+="",!1);return $e.toString=function(){return me},$e},utcFormat:function(me){var $e=L(me+="",N);return $e.toString=function(){return me},$e},utcParse:function(me){var $e=O(me+="",!0);return $e.toString=function(){return me},$e}}}var OP={"-":"",_:" ",0:"0"},mn=/^\s*\d+/,tle=/^%/,rle=/[\\^$*+?|[\]().{}]/g;function _t(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function nle(t){return t.replace(rle,"\\$&")}function Dh(t){return new RegExp("^(?:"+t.map(nle).join("|")+")","i")}function Nh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function ile(t,e,r){var n=mn.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function ale(t,e,r){var n=mn.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function ole(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function sle(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function lle(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function RP(t,e,r){var n=mn.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function PP(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cle(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function ule(t,e,r){var n=mn.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function fle(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function DP(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function dle(t,e,r){var n=mn.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function NP(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function hle(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function ple(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function gle(t,e,r){var n=mn.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function vle(t,e,r){var n=mn.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mle(t,e,r){var n=tle.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function yle(t,e,r){var n=mn.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function xle(t,e,r){var n=mn.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function kP(t,e){return _t(t.getDate(),e,2)}function ble(t,e){return _t(t.getHours(),e,2)}function wle(t,e){return _t(t.getHours()%12||12,e,2)}function _le(t,e){return _t(1+c0.count(bs(t),t),e,3)}function zj(t,e){return _t(t.getMilliseconds(),e,3)}function Ale(t,e){return zj(t,e)+"000"}function Ele(t,e){return _t(t.getMonth()+1,e,2)}function Sle(t,e){return _t(t.getMinutes(),e,2)}function Cle(t,e){return _t(t.getSeconds(),e,2)}function Tle(t){var e=t.getDay();return e===0?7:e}function Ile(t,e){return _t(ey.count(bs(t)-1,t),e,2)}function Uj(t){var e=t.getDay();return e>=4||e===0?Wf(t):Wf.ceil(t)}function Ole(t,e){return t=Uj(t),_t(Wf.count(bs(t),t)+(bs(t).getDay()===4),e,2)}function Rle(t){return t.getDay()}function Ple(t,e){return _t(zv.count(bs(t)-1,t),e,2)}function Dle(t,e){return _t(t.getFullYear()%100,e,2)}function Nle(t,e){return t=Uj(t),_t(t.getFullYear()%100,e,2)}function kle(t,e){return _t(t.getFullYear()%1e4,e,4)}function Mle(t,e){var r=t.getDay();return t=r>=4||r===0?Wf(t):Wf.ceil(t),_t(t.getFullYear()%1e4,e,4)}function jle(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_t(e/60|0,"0",2)+_t(e%60,"0",2)}function MP(t,e){return _t(t.getUTCDate(),e,2)}function Lle(t,e){return _t(t.getUTCHours(),e,2)}function Ble(t,e){return _t(t.getUTCHours()%12||12,e,2)}function zle(t,e){return _t(1+Jm.count(ws(t),t),e,3)}function Fj(t,e){return _t(t.getUTCMilliseconds(),e,3)}function Ule(t,e){return Fj(t,e)+"000"}function Fle(t,e){return _t(t.getUTCMonth()+1,e,2)}function Vle(t,e){return _t(t.getUTCMinutes(),e,2)}function Hle(t,e){return _t(t.getUTCSeconds(),e,2)}function $le(t){var e=t.getUTCDay();return e===0?7:e}function qle(t,e){return _t(ty.count(ws(t)-1,t),e,2)}function Vj(t){var e=t.getUTCDay();return e>=4||e===0?Kf(t):Kf.ceil(t)}function Gle(t,e){return t=Vj(t),_t(Kf.count(ws(t),t)+(ws(t).getUTCDay()===4),e,2)}function Wle(t){return t.getUTCDay()}function Kle(t,e){return _t(Uv.count(ws(t)-1,t),e,2)}function Xle(t,e){return _t(t.getUTCFullYear()%100,e,2)}function Yle(t,e){return t=Vj(t),_t(t.getUTCFullYear()%100,e,2)}function Qle(t,e){return _t(t.getUTCFullYear()%1e4,e,4)}function Zle(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Kf(t):Kf.ceil(t),_t(t.getUTCFullYear()%1e4,e,4)}function Jle(){return"+0000"}function jP(){return"%"}function LP(t){return+t}function BP(t){return Math.floor(+t/1e3)}var pf,Hj,$j;ece({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ece(t){return pf=ele(t),Hj=pf.format,pf.parse,$j=pf.utcFormat,pf.utcParse,pf}function tce(t){return new Date(t)}function rce(t){return t instanceof Date?+t:+new Date(+t)}function MS(t,e,r,n,i,a,o,s,c,f){var d=wS(),p=d.invert,g=d.domain,y=f(".%L"),w=f(":%S"),_=f("%I:%M"),A=f("%I %p"),S=f("%a %d"),T=f("%b %d"),R=f("%B"),N=f("%Y");function M(L){return(c(L)<L?y:s(L)<L?w:o(L)<L?_:a(L)<L?A:n(L)<L?i(L)<L?S:T:r(L)<L?R:N)(L)}return d.invert=function(L){return new Date(p(L))},d.domain=function(L){return arguments.length?g(Array.from(L,rce)):g().map(tce)},d.ticks=function(L){var O=g();return t(O[0],O[O.length-1],L??10)},d.tickFormat=function(L,O){return O==null?M:f(O)},d.nice=function(L){var O=g();return(!L||typeof L.range!="function")&&(L=e(O[0],O[O.length-1],L??10)),L?g(Rj(O,L)):d},d.copy=function(){return l0(d,MS(t,e,r,n,i,a,o,s,c,f))},d}function nce(){return wa.apply(MS(Zse,Jse,bs,NS,ey,c0,PS,OS,qc,Hj).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ice(){return wa.apply(MS(Yse,Qse,ws,kS,ty,Jm,DS,RS,qc,$j).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ry(){var t=0,e=1,r,n,i,a,o=ii,s=!1,c;function f(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(a(p)-r)*i,s?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e]=p,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),f):[t,e]},f.clamp=function(p){return arguments.length?(s=!!p,f):s},f.interpolator=function(p){return arguments.length?(o=p,f):o};function d(p){return function(g){var y,w;return arguments.length?([y,w]=g,o=p(y,w),f):[o(0),o(1)]}}return f.range=d(ld),f.rangeRound=d(bS),f.unknown=function(p){return arguments.length?(c=p,f):c},function(p){return a=p,r=p(t),n=p(e),i=r===n?0:1/(n-r),f}}function tc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function qj(){var t=ec(ry()(ii));return t.copy=function(){return tc(t,qj())},Cs.apply(t,arguments)}function Gj(){var t=ES(ry()).domain([1,10]);return t.copy=function(){return tc(t,Gj()).base(t.base())},Cs.apply(t,arguments)}function Wj(){var t=SS(ry());return t.copy=function(){return tc(t,Wj()).constant(t.constant())},Cs.apply(t,arguments)}function jS(){var t=CS(ry());return t.copy=function(){return tc(t,jS()).exponent(t.exponent())},Cs.apply(t,arguments)}function ace(){return jS.apply(null,arguments).exponent(.5)}function Kj(){var t=[],e=ii;function r(n){if(n!=null&&!isNaN(n=+n))return e((o0(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Dl),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>$oe(t,a/n))},r.copy=function(){return Kj(e).domain(t)},Cs.apply(r,arguments)}function ny(){var t=0,e=.5,r=1,n=1,i,a,o,s,c,f=ii,d,p=!1,g;function y(_){return isNaN(_=+_)?g:(_=.5+((_=+d(_))-a)*(n*_<n*a?s:c),f(p?Math.max(0,Math.min(1,_)):_))}y.domain=function(_){return arguments.length?([t,e,r]=_,i=d(t=+t),a=d(e=+e),o=d(r=+r),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),n=a<i?-1:1,y):[t,e,r]},y.clamp=function(_){return arguments.length?(p=!!_,y):p},y.interpolator=function(_){return arguments.length?(f=_,y):f};function w(_){return function(A){var S,T,R;return arguments.length?([S,T,R]=A,f=mse(_,[S,T,R]),y):[f(0),f(.5),f(1)]}}return y.range=w(ld),y.rangeRound=w(bS),y.unknown=function(_){return arguments.length?(g=_,y):g},function(_){return d=_,i=_(t),a=_(e),o=_(r),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),n=a<i?-1:1,y}}function Xj(){var t=ec(ny()(ii));return t.copy=function(){return tc(t,Xj())},Cs.apply(t,arguments)}function Yj(){var t=ES(ny()).domain([.1,1,10]);return t.copy=function(){return tc(t,Yj()).base(t.base())},Cs.apply(t,arguments)}function Qj(){var t=SS(ny());return t.copy=function(){return tc(t,Qj()).constant(t.constant())},Cs.apply(t,arguments)}function LS(){var t=CS(ny());return t.copy=function(){return tc(t,LS()).exponent(t.exponent())},Cs.apply(t,arguments)}function oce(){return LS.apply(null,arguments).exponent(.5)}const Gh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mS,scaleDiverging:Xj,scaleDivergingLog:Yj,scaleDivergingPow:LS,scaleDivergingSqrt:oce,scaleDivergingSymlog:Qj,scaleIdentity:Oj,scaleImplicit:H_,scaleLinear:Ij,scaleLog:Pj,scaleOrdinal:vS,scalePoint:Woe,scalePow:TS,scaleQuantile:kj,scaleQuantize:Mj,scaleRadial:Nj,scaleSequential:qj,scaleSequentialLog:Gj,scaleSequentialPow:jS,scaleSequentialQuantile:Kj,scaleSequentialSqrt:ace,scaleSequentialSymlog:Wj,scaleSqrt:Use,scaleSymlog:Dj,scaleThreshold:jj,scaleTime:nce,scaleUtc:ice,tickFormat:Tj},Symbol.toStringTag,{value:"Module"}));var rc=t=>t.chartData,BS=ne([rc],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),iy=(t,e,r,n)=>n?BS(t):rc(t);function Xf(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(qi(e)&&qi(r))return!0}return!1}function zP(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function sce(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,a;if(qi(r))i=r;else if(typeof r=="function")return;if(qi(n))a=n;else if(typeof n=="function")return;var o=[i,a];if(Xf(o))return o}}function lce(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Xf(n))return zP(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,o,s;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Ne(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&OR.test(i)){var c=OR.exec(i);if(c==null||e==null)o=void 0;else{var f=+c[1];o=e[0]-f}}else o=e?.[0];if(a==="auto")e!=null&&(s=Math.max(...e));else if(Ne(a))s=a;else if(typeof a=="function")try{e!=null&&(s=a(e?.[1]))}catch{}else if(typeof a=="string"&&RR.test(a)){var d=RR.exec(a);if(d==null||e==null)s=void 0;else{var p=+d[1];s=e[1]+p}}else s=e?.[1];var g=[o,s];if(Xf(g))return e==null?g:zP(g,e,r)}}}var cd=1e9,cce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},US,sr=!0,ba="[DecimalError] ",tu=ba+"Invalid argument: ",zS=ba+"Exponent out of range: ",ud=Math.floor,zc=Math.pow,uce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bi,hn=1e7,rr=7,Zj=9007199254740991,Fv=ud(Zj/rr),Ce={};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ce.comparedTo=Ce.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*rr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(t){return ds(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.idiv=function(t){var e=this,r=e.constructor;return Gt(ds(e,new r(t),0,1),r.precision)};Ce.equals=Ce.eq=function(t){return!this.cmp(t)};Ce.exponent=function(){return qr(this)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){return this.cmp(t)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Bi))throw Error(ba+"NaN");if(r.s<1)throw Error(ba+(r.s?"NaN":"-Infinity"));return r.eq(Bi)?new n(0):(sr=!1,e=ds(Sp(r,a),Sp(t,a),a),sr=!0,Gt(e,i))};Ce.minus=Ce.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?t7(e,t):Jj(e,(t.s=-t.s,t))};Ce.modulo=Ce.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(ba+"NaN");return r.s?(sr=!1,e=ds(r,t,0,1).times(t),sr=!0,r.minus(e)):Gt(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return e7(this)};Ce.naturalLogarithm=Ce.ln=function(){return Sp(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ce.plus=Ce.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Jj(e,t):t7(e,(t.s=-t.s,t))};Ce.precision=Ce.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(tu+t);if(e=qr(i)+1,n=i.d.length-1,r=n*rr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ce.squareRoot=Ce.sqrt=function(){var t,e,r,n,i,a,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(ba+"NaN")}for(t=qr(s),sr=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=_o(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ud((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(i.toString()),r=c.precision,i=o=r+3;;)if(a=n,n=a.plus(ds(s,a,o+2)).times(.5),_o(a.d).slice(0,o)===(e=_o(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Gt(a,r+1,0),a.times(a).eq(s)){n=a;break}}else if(e!="9999")break;o+=4}return sr=!0,Gt(n,r)};Ce.times=Ce.mul=function(t){var e,r,n,i,a,o,s,c,f,d=this,p=d.constructor,g=d.d,y=(t=new p(t)).d;if(!d.s||!t.s)return new p(0);for(t.s*=d.s,r=d.e+t.e,c=g.length,f=y.length,c<f&&(a=g,g=y,y=a,o=c,c=f,f=o),a=[],o=c+f,n=o;n--;)a.push(0);for(n=f;--n>=0;){for(e=0,i=c+n;i>n;)s=a[i]+y[n]*g[i-n-1]+e,a[i--]=s%hn|0,e=s/hn|0;a[i]=(a[i]+e)%hn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,sr?Gt(t,p.precision):t};Ce.toDecimalPlaces=Ce.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(No(t,0,cd),e===void 0?e=n.rounding:No(e,0,8),Gt(r,t+qr(r)+1,e))};Ce.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=du(n,!0):(No(t,0,cd),e===void 0?e=i.rounding:No(e,0,8),n=Gt(new i(n),t+1,e),r=du(n,!0,t+1)),r};Ce.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?du(i):(No(t,0,cd),e===void 0?e=a.rounding:No(e,0,8),n=Gt(new a(i),t+qr(i)+1,e),r=du(n.abs(),!1,t+qr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var t=this,e=t.constructor;return Gt(new e(t),qr(t)+1,e.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(t){var e,r,n,i,a,o,s=this,c=s.constructor,f=12,d=+(t=new c(t));if(!t.s)return new c(Bi);if(s=new c(s),!s.s){if(t.s<1)throw Error(ba+"Infinity");return s}if(s.eq(Bi))return s;if(n=c.precision,t.eq(Bi))return Gt(s,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=s.s,o){if((r=d<0?-d:d)<=Zj){for(i=new c(Bi),e=Math.ceil(n/rr+4),sr=!1;r%2&&(i=i.times(s),FP(i.d,e)),r=ud(r/2),r!==0;)s=s.times(s),FP(s.d,e);return sr=!0,t.s<0?new c(Bi).div(i):Gt(i,n)}}else if(a<0)throw Error(ba+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,s.s=1,sr=!1,i=t.times(Sp(s,n+f)),sr=!0,i=e7(i),i.s=a,i};Ce.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=qr(i),n=du(i,r<=a.toExpNeg||r>=a.toExpPos)):(No(t,1,cd),e===void 0?e=a.rounding:No(e,0,8),i=Gt(new a(i),t,e),r=qr(i),n=du(i,t<=r||r<=a.toExpNeg,t)),n};Ce.toSignificantDigits=Ce.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(No(t,1,cd),e===void 0?e=n.rounding:No(e,0,8)),Gt(new n(r),t,e)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=qr(t),r=t.constructor;return du(t,e<=r.toExpNeg||e>=r.toExpPos)};function Jj(t,e){var r,n,i,a,o,s,c,f,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),sr?Gt(e,p):e;if(c=t.d,f=e.d,o=t.e,i=e.e,c=c.slice(),a=o-i,a){for(a<0?(n=c,a=-a,s=f.length):(n=f,i=o,s=c.length),o=Math.ceil(p/rr),s=o>s?o+1:s+1,a>s&&(a=s,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(s=c.length,a=f.length,s-a<0&&(a=s,n=f,f=c,c=n),r=0;a;)r=(c[--a]=c[a]+f[a]+r)/hn|0,c[a]%=hn;for(r&&(c.unshift(r),++i),s=c.length;c[--s]==0;)c.pop();return e.d=c,e.e=i,sr?Gt(e,p):e}function No(t,e,r){if(t!==~~t||t<e||t>r)throw Error(tu+t)}function _o(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=rr-n.length,r&&(a+=vl(r)),a+=n;o=t[e],n=o+"",r=rr-n.length,r&&(a+=vl(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ds=(function(){function t(n,i){var a,o=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+o,n[s]=a%hn|0,o=a/hn|0;return o&&n.unshift(o),n}function e(n,i,a,o){var s,c;if(a!=o)c=a>o?1:-1;else for(s=c=0;s<a;s++)if(n[s]!=i[s]){c=n[s]>i[s]?1:-1;break}return c}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*hn+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var s,c,f,d,p,g,y,w,_,A,S,T,R,N,M,L,O,D,j=n.constructor,B=n.s==i.s?1:-1,z=n.d,V=i.d;if(!n.s)return new j(n);if(!i.s)throw Error(ba+"Division by zero");for(c=n.e-i.e,O=V.length,M=z.length,y=new j(B),w=y.d=[],f=0;V[f]==(z[f]||0);)++f;if(V[f]>(z[f]||0)&&--c,a==null?T=a=j.precision:o?T=a+(qr(n)-qr(i))+1:T=a,T<0)return new j(0);if(T=T/rr+2|0,f=0,O==1)for(d=0,V=V[0],T++;(f<M||d)&&T--;f++)R=d*hn+(z[f]||0),w[f]=R/V|0,d=R%V|0;else{for(d=hn/(V[0]+1)|0,d>1&&(V=t(V,d),z=t(z,d),O=V.length,M=z.length),N=O,_=z.slice(0,O),A=_.length;A<O;)_[A++]=0;D=V.slice(),D.unshift(0),L=V[0],V[1]>=hn/2&&++L;do d=0,s=e(V,_,O,A),s<0?(S=_[0],O!=A&&(S=S*hn+(_[1]||0)),d=S/L|0,d>1?(d>=hn&&(d=hn-1),p=t(V,d),g=p.length,A=_.length,s=e(p,_,g,A),s==1&&(d--,r(p,O<g?D:V,g))):(d==0&&(s=d=1),p=V.slice()),g=p.length,g<A&&p.unshift(0),r(_,p,A),s==-1&&(A=_.length,s=e(V,_,O,A),s<1&&(d++,r(_,O<A?D:V,A))),A=_.length):s===0&&(d++,_=[0]),w[f++]=d,s&&_[0]?_[A++]=z[N]||0:(_=[z[N]],A=1);while((N++<M||_[0]!==void 0)&&T--)}return w[0]||w.shift(),y.e=c,Gt(y,o?a+qr(y)+1:a)}})();function e7(t,e){var r,n,i,a,o,s,c=0,f=0,d=t.constructor,p=d.precision;if(qr(t)>16)throw Error(zS+qr(t));if(!t.s)return new d(Bi);for(sr=!1,s=p,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),f+=5;for(n=Math.log(zc(2,f))/Math.LN10*2+5|0,s+=n,r=i=a=new d(Bi),d.precision=s;;){if(i=Gt(i.times(t),s),r=r.times(++c),o=a.plus(ds(i,r,s)),_o(o.d).slice(0,s)===_o(a.d).slice(0,s)){for(;f--;)a=Gt(a.times(a),s);return d.precision=p,e==null?(sr=!0,Gt(a,p)):a}a=o}}function qr(t){for(var e=t.e*rr,r=t.d[0];r>=10;r/=10)e++;return e}function uw(t,e,r){if(e>t.LN10.sd())throw sr=!0,r&&(t.precision=r),Error(ba+"LN10 precision limit exceeded");return Gt(new t(t.LN10),e)}function vl(t){for(var e="";t--;)e+="0";return e}function Sp(t,e){var r,n,i,a,o,s,c,f,d,p=1,g=10,y=t,w=y.d,_=y.constructor,A=_.precision;if(y.s<1)throw Error(ba+(y.s?"NaN":"-Infinity"));if(y.eq(Bi))return new _(0);if(e==null?(sr=!1,f=A):f=e,y.eq(10))return e==null&&(sr=!0),uw(_,f);if(f+=g,_.precision=f,r=_o(w),n=r.charAt(0),a=qr(y),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=_o(y.d),n=r.charAt(0),p++;a=qr(y),n>1?(y=new _("0."+r),a++):y=new _(n+"."+r.slice(1))}else return c=uw(_,f+2,A).times(a+""),y=Sp(new _(n+"."+r.slice(1)),f-g).plus(c),_.precision=A,e==null?(sr=!0,Gt(y,A)):y;for(s=o=y=ds(y.minus(Bi),y.plus(Bi),f),d=Gt(y.times(y),f),i=3;;){if(o=Gt(o.times(d),f),c=s.plus(ds(o,new _(i),f)),_o(c.d).slice(0,f)===_o(s.d).slice(0,f))return s=s.times(2),a!==0&&(s=s.plus(uw(_,f+2,A).times(a+""))),s=ds(s,new _(p),f),_.precision=A,e==null?(sr=!0,Gt(s,A)):s;s=c,i+=2}}function UP(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=ud(r/rr),t.d=[],n=(r+1)%rr,r<0&&(n+=rr),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=rr;n<i;)t.d.push(+e.slice(n,n+=rr));e=e.slice(n),n=rr-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),sr&&(t.e>Fv||t.e<-Fv))throw Error(zS+r)}else t.s=0,t.e=0,t.d=[0];return t}function Gt(t,e,r){var n,i,a,o,s,c,f,d,p=t.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=rr,i=e,f=p[d=0];else{if(d=Math.ceil((n+1)/rr),a=p.length,d>=a)return t;for(f=a=p[d],o=1;a>=10;a/=10)o++;n%=rr,i=n-rr+o}if(r!==void 0&&(a=zc(10,o-i-1),s=f/a%10|0,c=e<0||p[d+1]!==void 0||f%a,c=r<4?(s||c)&&(r==0||r==(t.s<0?3:2)):s>5||s==5&&(r==4||c||r==6&&(n>0?i>0?f/zc(10,o-i):0:p[d-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return c?(a=qr(t),p.length=1,e=e-a-1,p[0]=zc(10,(rr-e%rr)%rr),t.e=ud(-e/rr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=d,a=1,d--):(p.length=d+1,a=zc(10,rr-n),p[d]=i>0?(f/zc(10,o-i)%zc(10,i)|0)*a:0),c)for(;;)if(d==0){(p[0]+=a)==hn&&(p[0]=1,++t.e);break}else{if(p[d]+=a,p[d]!=hn)break;p[d--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(sr&&(t.e>Fv||t.e<-Fv))throw Error(zS+qr(t));return t}function t7(t,e){var r,n,i,a,o,s,c,f,d,p,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),sr?Gt(e,y):e;if(c=t.d,p=e.d,n=e.e,f=t.e,c=c.slice(),o=f-n,o){for(d=o<0,d?(r=c,o=-o,s=p.length):(r=p,n=f,s=c.length),i=Math.max(Math.ceil(y/rr),s)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,s=p.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(c[i]!=p[i]){d=c[i]<p[i];break}o=0}for(d&&(r=c,c=p,p=r,e.s=-e.s),s=c.length,i=p.length-s;i>0;--i)c[s++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(a=i;a&&c[--a]===0;)c[a]=hn-1;--c[a],c[i]+=hn}c[i]-=p[i]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,sr?Gt(e,y):e):new g(0)}function du(t,e,r){var n,i=qr(t),a=_o(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+vl(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+vl(-i-1)+a,r&&(n=r-o)>0&&(a+=vl(n))):i>=o?(a+=vl(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+vl(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=vl(n))),t.s<0?"-"+a:a}function FP(t,e){if(t.length>e)return t.length=e,!0}function r7(t){var e,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(tu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return UP(o,a.toString())}else if(typeof a!="string")throw Error(tu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,uce.test(a))UP(o,a);else throw Error(tu+a)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=r7,i.config=i.set=fce,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function fce(t){if(!t||typeof t!="object")throw Error(ba+"Object expected");var e,r,n,i=["precision",1,cd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(ud(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(tu+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(tu+r+": "+n);return this}var US=r7(cce);Bi=new US(1);const jt=US;var dce=t=>t,n7={},i7=t=>t===n7,VP=t=>function e(){return arguments.length===0||arguments.length===1&&i7(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},a7=(t,e)=>t===1?e:VP(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(o=>o!==n7).length;return a>=t?e(...n):a7(t-a,VP(function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];var f=n.map(d=>i7(d)?s.shift():d);return e(...f,...s)}))}),ay=t=>a7(t.length,t),W_=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},hce=ay((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),pce=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return dce;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((s,c)=>c(s),a(...arguments))}},K_=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),o7=t=>{var e=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e&&i.every((o,s)=>{var c;return o===((c=e)===null||c===void 0?void 0:c[s])})||(e=i,r=t(...i)),r}};function s7(t){var e;return t===0?e=1:e=Math.floor(new jt(t).abs().log(10).toNumber())+1,e}function l7(t,e,r){for(var n=new jt(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}ay((t,e,r)=>{var n=+t,i=+e;return n+r*(i-n)});ay((t,e,r)=>{var n=e-+t;return n=n||1/0,(r-t)/n});ay((t,e,r)=>{var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});var c7=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},u7=(t,e,r)=>{if(t.lte(0))return new jt(0);var n=s7(t.toNumber()),i=new jt(10).pow(n),a=t.div(i),o=n!==1?.05:.1,s=new jt(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=s.mul(i);return e?new jt(c.toNumber()):new jt(Math.ceil(c.toNumber()))},gce=(t,e,r)=>{var n=new jt(1),i=new jt(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new jt(10).pow(s7(t)-1),i=new jt(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new jt(Math.floor(t)))}else t===0?i=new jt(Math.floor((e-1)/2)):r||(i=new jt(Math.floor(t)));var o=Math.floor((e-1)/2),s=pce(hce(c=>i.add(new jt(c-o).mul(n)).toNumber()),W_);return s(0,e)},f7=function(e,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new jt(0),tickMin:new jt(0),tickMax:new jt(0)};var o=u7(new jt(r).sub(e).div(n-1),i,a),s;e<=0&&r>=0?s=new jt(0):(s=new jt(e).add(r).div(2),s=s.sub(new jt(s).mod(o)));var c=Math.ceil(s.sub(e).div(o).toNumber()),f=Math.ceil(new jt(r).sub(s).div(o).toNumber()),d=c+f+1;return d>n?f7(e,r,n,i,a+1):(d<n&&(f=r>0?f+(n-d):f,c=r>0?c:c+(n-d)),{step:o,tickMin:s.sub(new jt(c).mul(o)),tickMax:s.add(new jt(f).mul(o))})};function vce(t){var[e,r]=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[o,s]=c7([e,r]);if(o===-1/0||s===1/0){var c=s===1/0?[o,...W_(0,n-1).map(()=>1/0)]:[...W_(0,n-1).map(()=>-1/0),s];return e>r?K_(c):c}if(o===s)return gce(o,n,i);var{step:f,tickMin:d,tickMax:p}=f7(o,s,a,i,0),g=l7(d,p.add(new jt(.1).mul(f)),f);return e>r?K_(g):g}function mce(t,e){var[r,n]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=c7([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var s=Math.max(e,2),c=u7(new jt(o).sub(a).div(s-1),i,0),f=[...l7(new jt(a),new jt(o),c),o];return i===!1&&(f=f.map(d=>Math.round(d))),r>n?K_(f):f}var yce=o7(vce),xce=o7(mce),d7=t=>t.rootProps.maxBarSize,bce=t=>t.rootProps.barGap,h7=t=>t.rootProps.barCategoryGap,wce=t=>t.rootProps.barSize,u0=t=>t.rootProps.stackOffset,FS=t=>t.options.chartName,VS=t=>t.rootProps.syncId,p7=t=>t.rootProps.syncMethod,HS=t=>t.options.eventEmitter,ns={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ji={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},oy=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},_ce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ns.angleAxisId,includeHidden:!1,name:void 0,reversed:ns.reversed,scale:ns.scale,tick:ns.tick,tickCount:void 0,ticks:void 0,type:ns.type,unit:void 0},Ace={allowDataOverflow:ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ji.scale,tick:ji.tick,tickCount:ji.tickCount,ticks:void 0,type:ji.type,unit:void 0},Ece={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ns.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ns.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ns.scale,tick:ns.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Sce={allowDataOverflow:ji.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ji.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ji.scale,tick:ji.tick,tickCount:ji.tickCount,ticks:void 0,type:"category",unit:void 0},$S=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Ece:_ce,qS=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Sce:Ace,sy=t=>t.polarOptions,GS=ne([Es,Ss,nn],Q9),g7=ne([sy,GS],(t,e)=>{if(t!=null)return qn(t.innerRadius,e,0)}),v7=ne([sy,GS],(t,e)=>{if(t!=null)return qn(t.outerRadius,e,e*.8)}),Cce=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},m7=ne([sy],Cce);ne([$S,m7],oy);var y7=ne([GS,g7,v7],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});ne([qS,y7],oy);var x7=ne([gt,sy,g7,v7,Es,Ss],(t,e,r,n,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:s,startAngle:c,endAngle:f}=e;return{cx:qn(o,i,i/2),cy:qn(s,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:f,clockWise:!1}}}),ur=(t,e)=>e,f0=(t,e,r)=>r;function WS(t){return t?.id}var on=t=>{var e=gt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},fd=t=>t.tooltip.settings.axisId,yn=t=>{var e=on(t),r=fd(t);return d0(t,e,r)},b7=ne([yn],t=>t?.dataKey);function w7(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=r,o=new Map;return t.forEach(s=>{var c,f=(c=s.data)!==null&&c!==void 0?c:n;if(!(f==null||f.length===0)){var d=WS(s);f.forEach((p,g)=>{var y=a==null||i?g:String(Qt(p,a,null)),w=Qt(p,s.dataKey,0),_;o.has(y)?_=o.get(y):_={},Object.assign(_,{[d]:w}),o.set(y,_)})}}),Array.from(o.values())}function ly(t){return t.stackId!=null&&t.dataKey!=null}function HP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(r),!0).forEach(function(n){Tce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tce(t,e,r){return(e=Ice(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ice(t){var e=Oce(t,"string");return typeof e=="symbol"?e:e+""}function Oce(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X_=[0,"auto"],ki={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_7=(t,e)=>t.cartesianAxis.xAxis[e],Ts=(t,e)=>{var r=_7(t,e);return r??ki},Mi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:X_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:n0},A7=(t,e)=>t.cartesianAxis.yAxis[e],Is=(t,e)=>{var r=A7(t,e);return r??Mi},Rce={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},KS=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??Rce},Pr=(t,e,r)=>{switch(e){case"xAxis":return Ts(t,r);case"yAxis":return Is(t,r);case"zAxis":return KS(t,r);case"angleAxis":return $S(t,r);case"radiusAxis":return qS(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Pce=(t,e,r)=>{switch(e){case"xAxis":return Ts(t,r);case"yAxis":return Is(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},d0=(t,e,r)=>{switch(e){case"xAxis":return Ts(t,r);case"yAxis":return Is(t,r);case"angleAxis":return $S(t,r);case"radiusAxis":return qS(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},E7=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function XS(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var cy=t=>t.graphicalItems.cartesianItems,Dce=ne([ur,f0],XS),YS=(t,e,r)=>t.filter(r).filter(n=>e?.includeHidden===!0?!0:!n.hide),h0=ne([cy,Pr,Dce],YS),S7=ne([h0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(ly)),C7=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),T7=ne([h0],C7),QS=t=>t.map(e=>e.data).filter(Boolean).flat(1),Nce=ne([h0],QS),ZS=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},JS=ne([Nce,iy],ZS),eC=(t,e,r)=>e?.dataKey!=null?t.map(n=>({value:Qt(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:Qt(i,n)}))):t.map(n=>({value:n})),uy=ne([JS,Pr,h0],eC);function I7(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Au(t){return t.filter(e=>Do(e)||e instanceof Date).map(Number).filter(e=>Hi(e)===!1)}function kce(t,e,r){return!r||typeof e!="number"||Hi(e)?[]:r.length?Au(r.flatMap(n=>{var i=Qt(t,n.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!qi(a)||!qi(o)))return[e-a,e+o]})):[]}var Mce=ne([S7,iy,yn],w7),O7=(t,e,r)=>{var n={},i=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),n);return Object.fromEntries(Object.entries(i).map(a=>{var[o,s]=a,c=s.map(WS);return[o,{stackedData:zie(t,c,r),graphicalItems:s}]}))},Y_=ne([Mce,S7,u0],O7),R7=(t,e,r)=>{var{dataStartIndex:n,dataEndIndex:i}=e;if(r!=="zAxis"){var a=$ie(t,n,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},jce=ne([Y_,rc,ur],R7),P7=(t,e,r,n,i)=>r.length>0?t.flatMap(a=>r.flatMap(o=>{var s,c,f=(s=n[o.id])===null||s===void 0?void 0:s.filter(p=>I7(i,p)),d=Qt(a,(c=e.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:kce(a,d,f)}})).filter(Boolean):e?.dataKey!=null?t.map(a=>({value:Qt(a,e.dataKey),errorDomain:[]})):t.map(a=>({value:a,errorDomain:[]})),fy=t=>t.errorBars,D7=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>I7(r,n));ne([T7,fy,ur],D7);var Lce=ne([JS,Pr,T7,fy,ur],P7);function Bce(t){var{value:e}=t;if(Do(e)||e instanceof Date)return e}var $P=t=>{var e=t.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Au(e);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},zce=(t,e,r)=>{var n=t.map(Bce).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&HM(n))?mj(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},tC=t=>{var e;if(t==null||!("domain"in t))return X_;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=Au(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:X_},Hv=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),s=Math.max(...a);return[o,s]}},N7=t=>t.referenceElements.dots,dd=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),Uce=ne([N7,ur,f0],dd),k7=t=>t.referenceElements.areas,Fce=ne([k7,ur,f0],dd),M7=t=>t.referenceElements.lines,Vce=ne([M7,ur,f0],dd),j7=(t,e)=>{var r=Au(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Hce=ne(Uce,ur,j7),L7=(t,e)=>{var r=Au(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},$ce=ne([Fce,ur],L7),B7=(t,e)=>{var r=Au(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},qce=ne(Vce,ur,B7),Gce=ne(Hce,qce,$ce,(t,e,r)=>Hv(t,r,e)),z7=ne([Pr],tC),rC=(t,e,r,n,i,a,o)=>{var s=sce(e,t.allowDataOverflow);if(s!=null)return s;var c=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",f=c?Hv(r,i,$P(n)):Hv(i,$P(n));return lce(e,f,t.allowDataOverflow)},Wce=ne([Pr,z7,jce,Lce,Gce,gt,ur],rC),Kce=[0,1],nC=(t,e,r,n,i,a,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:s,type:c}=t,f=Zl(e,a);return f&&s==null?mj(0,r.length):c==="category"?zce(n,t,f):i==="expand"?Kce:o}},iC=ne([Pr,gt,JS,uy,u0,ur,Wce],nC),U7=(t,e,r,n,i)=>{if(t!=null){var{scale:a,type:o}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var s="scale".concat(Jp(a));return s in Gh?s:"point"}}},hd=ne([Pr,gt,E7,FS,ur],U7);function Xce(t){if(t!=null){if(t in Gh)return Gh[t]();var e="scale".concat(Jp(t));if(e in Gh)return Gh[e]()}}function aC(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=Xce(e);if(i!=null){var a=i.domain(r).range(n);return kie(a),a}}}var oC=(t,e,r)=>{var n=tC(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Xf(t))return yce(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Xf(t))return xce(t,e.tickCount,e.allowDecimals)}},sC=ne([iC,d0,hd],oC),lC=(t,e,r,n)=>{if(n!=="angleAxis"&&t?.type==="number"&&Xf(e)&&Array.isArray(r)&&r.length>0){var i=e[0],a=r[0],o=e[1],s=r[r.length-1];return[Math.min(i,a),Math.max(o,s)]}return e},Yce=ne([Pr,iC,sC,ur],lC),Qce=ne(uy,Pr,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(Au(t.map(s=>s.value))).sort((s,c)=>s-c);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var o=n[a+1]-n[a];r=Math.min(r,o)}return r/i}}),F7=ne(Qce,gt,h7,nn,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!qi(t))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var o=qn(r,t*a),s=t*a/2;return s-o-(s-o)/a*o}return 0}),Zce=(t,e)=>{var r=Ts(t,e);return r==null||typeof r.padding!="string"?0:F7(t,"xAxis",e,r.padding)},Jce=(t,e)=>{var r=Is(t,e);return r==null||typeof r.padding!="string"?0:F7(t,"yAxis",e,r.padding)},eue=ne(Ts,Zce,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),tue=ne(Is,Jce,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),rue=ne([nn,eue,Xm,Km,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),nue=ne([nn,gt,tue,Xm,Km,(t,e,r)=>r],(t,e,r,n,i,a)=>{var{padding:o}=i;return a?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),p0=(t,e,r,n)=>{var i;switch(e){case"xAxis":return rue(t,r,n);case"yAxis":return nue(t,r,n);case"zAxis":return(i=KS(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return m7(t);case"radiusAxis":return y7(t,r);default:return}},V7=ne([Pr,p0],oy),pd=ne([Pr,hd,Yce,V7],aC);ne([h0,fy,ur],D7);function H7(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var dy=(t,e)=>e,hy=(t,e,r)=>r,iue=ne(Gm,dy,hy,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(H7)),aue=ne(Wm,dy,hy,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(H7)),$7=(t,e)=>({width:t.width,height:e.height}),oue=(t,e)=>{var r=typeof e.width=="number"?e.width:n0;return{width:r,height:t.height}},q7=ne(nn,Ts,$7),sue=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},lue=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},cue=ne(Ss,nn,iue,dy,hy,(t,e,r,n,i)=>{var a={},o;return r.forEach(s=>{var c=$7(e,s);o==null&&(o=sue(e,n,t));var f=n==="top"&&!i||n==="bottom"&&i;a[s.id]=o-Number(f)*c.height,o+=(f?-1:1)*c.height}),a}),uue=ne(Es,nn,aue,dy,hy,(t,e,r,n,i)=>{var a={},o;return r.forEach(s=>{var c=oue(e,s);o==null&&(o=lue(e,n,t));var f=n==="left"&&!i||n==="right"&&i;a[s.id]=o-Number(f)*c.width,o+=(f?-1:1)*c.width}),a}),fue=(t,e)=>{var r=Ts(t,e);if(r!=null)return cue(t,r.orientation,r.mirror)},due=ne([nn,Ts,fue,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),hue=(t,e)=>{var r=Is(t,e);if(r!=null)return uue(t,r.orientation,r.mirror)},pue=ne([nn,Is,hue,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),G7=ne(nn,Is,(t,e)=>{var r=typeof e.width=="number"?e.width:n0;return{width:r,height:t.height}}),qP=(t,e,r)=>{switch(e){case"xAxis":return q7(t,r).width;case"yAxis":return G7(t,r).height;default:return}},W7=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=r,s=Zl(t,n),c=e.map(f=>f.value);if(o&&s&&a==="category"&&i&&HM(c))return c}},cC=ne([gt,uy,Pr,ur],W7),K7=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,o=Zl(t,n);if(o&&(i==="number"||a!=="auto"))return e.map(s=>s.value)}},uC=ne([gt,uy,d0,ur],K7),GP=ne([gt,Pce,hd,pd,cC,uC,p0,sC,ur],(t,e,r,n,i,a,o,s,c)=>{if(e==null)return null;var f=Zl(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:f,niceTicks:s,range:o,realScaleType:r,scale:n}}),gue=(t,e,r,n,i,a,o,s,c)=>{if(!(e==null||n==null)){var f=Zl(t,c),{type:d,ticks:p,tickCount:g}=e,y=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=d==="category"&&n.bandwidth?n.bandwidth()/y:0;w=c==="angleAxis"&&a!=null&&a.length>=2?vn(a[0]-a[1])*2*w:w;var _=p||i;if(_){var A=_.map((S,T)=>{var R=o?o.indexOf(S):S;return{index:T,coordinate:n(R)+w,value:S,offset:w}});return A.filter(S=>!Hi(S.coordinate))}return f&&s?s.map((S,T)=>({coordinate:n(S)+w,value:S,index:T,offset:w})):n.ticks?n.ticks(g).map(S=>({coordinate:n(S)+w,value:S,offset:w})):n.domain().map((S,T)=>({coordinate:n(S)+w,value:o?o[S]:S,index:T,offset:w}))}},X7=ne([gt,d0,hd,pd,sC,p0,cC,uC,ur],gue),vue=(t,e,r,n,i,a,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var s=Zl(t,o),{tickCount:c}=e,f=0;return f=o==="angleAxis"&&n?.length>=2?vn(n[0]-n[1])*2*f:f,s&&a?a.map((d,p)=>({coordinate:r(d)+f,value:d,index:p,offset:f})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+f,value:d,offset:f})):r.domain().map((d,p)=>({coordinate:r(d)+f,value:i?i[d]:d,index:p,offset:f}))}},Fl=ne([gt,d0,pd,p0,cC,uC,ur],vue),Vl=ne(Pr,pd,(t,e)=>{if(!(t==null||e==null))return Vv(Vv({},t),{},{scale:e})}),mue=ne([Pr,hd,iC,V7],aC);ne((t,e,r)=>KS(t,r),mue,(t,e)=>{if(!(t==null||e==null))return Vv(Vv({},t),{},{scale:e})});var yue=ne([gt,Gm,Wm],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Y7=t=>t.options.defaultTooltipEventType,Q7=t=>t.options.validateTooltipEventTypes;function Z7(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function fC(t,e){var r=Y7(t),n=Q7(t);return Z7(e,r,n)}function xue(t){return Re(e=>fC(e,t))}var J7=(t,e)=>{var r,n=Number(e);if(!(Hi(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},bue=t=>t.tooltip.settings,_l={active:!1,index:null,dataKey:void 0,coordinate:void 0},wue={itemInteraction:{click:_l,hover:_l},axisInteraction:{click:_l,hover:_l},keyboardInteraction:_l,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},eL=Gi({name:"tooltip",initialState:wue,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var r=fs(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:_ue,removeTooltipEntrySettings:Aue,setTooltipSettingsState:Eue,setActiveMouseOverItemIndex:tL,mouseLeaveItem:Sue,mouseLeaveChart:rL,setActiveClickItemIndex:Cue,setMouseOverAxisIndex:nL,setMouseClickAxisIndex:Tue,setSyncInteraction:Q_,setKeyboardInteraction:Z_}=eL.actions,Iue=eL.reducer;function WP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function A1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(r),!0).forEach(function(n){Oue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Oue(t,e,r){return(e=Rue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rue(t){var e=Pue(t,"string");return typeof e=="symbol"?e:e+""}function Pue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Due(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Nue(t){return t.index!=null}var iL=(t,e,r,n)=>{if(e==null)return _l;var i=Due(t,e,r);if(i==null)return _l;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(Nue(i)){if(a)return A1(A1({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return A1(A1({},_l),{},{coordinate:i.coordinate})},dC=(t,e)=>{var r=t?.index;if(r==null)return null;var n=Number(r);if(!qi(n))return r;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(n,a)))},aL=(t,e,r,n,i,a,o,s)=>{if(!(a==null||s==null)){var c=o[0],f=c==null?void 0:s(c.positions,a);if(f!=null)return f;var d=i?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},oL=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},g0=t=>t.options.tooltipPayloadSearcher,gd=t=>t.tooltip;function KP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function XP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(r),!0).forEach(function(n){kue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kue(t,e,r){return(e=Mue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mue(t){var e=jue(t,"string");return typeof e=="symbol"?e:e+""}function jue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lue(t,e){return t??e}var sL=(t,e,r,n,i,a,o)=>{if(!(e==null||a==null)){var{chartData:s,computedData:c,dataStartIndex:f,dataEndIndex:d}=r,p=[];return t.reduce((g,y)=>{var w,{dataDefinedOnItem:_,settings:A}=y,S=Lue(_,s),T=Array.isArray(S)?Z9(S,f,d):S,R=(w=A?.dataKey)!==null&&w!==void 0?w:n,N=A?.nameKey,M;if(n&&Array.isArray(T)&&!Array.isArray(T[0])&&o==="axis"?M=$M(T,n,i):M=a(T,e,c,N),Array.isArray(M))M.forEach(O=>{var D=XP(XP({},A),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});g.push(PR({tooltipEntrySettings:D,dataKey:O.dataKey,payload:O.payload,value:Qt(O.payload,O.dataKey),name:O.name}))});else{var L;g.push(PR({tooltipEntrySettings:A,dataKey:R,payload:M,value:Qt(M,R),name:(L=Qt(M,N))!==null&&L!==void 0?L:A?.name}))}return g},p)}},hC=ne([yn,gt,E7,FS,on],U7),Bue=ne([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),zue=ne([on,fd],XS),v0=ne([Bue,yn,zue],YS),Uue=ne([v0],t=>t.filter(ly)),Fue=ne([v0],QS),vd=ne([Fue,rc],ZS),Vue=ne([Uue,rc,yn],w7),pC=ne([vd,yn,v0],eC),Hue=ne([yn],tC),$ue=ne([v0],t=>t.filter(ly)),que=ne([Vue,$ue,u0],O7),Gue=ne([que,rc,on],R7),Wue=ne([v0],C7),Kue=ne([vd,yn,Wue,fy,on],P7),Xue=ne([N7,on,fd],dd),Yue=ne([Xue,on],j7),Que=ne([k7,on,fd],dd),Zue=ne([Que,on],L7),Jue=ne([M7,on,fd],dd),efe=ne([Jue,on],B7),tfe=ne([Yue,efe,Zue],Hv),rfe=ne([yn,Hue,Gue,Kue,tfe,gt,on],rC),lL=ne([yn,gt,vd,pC,u0,on,rfe],nC),nfe=ne([lL,yn,hC],oC),ife=ne([yn,lL,nfe,on],lC),cL=t=>{var e=on(t),r=fd(t),n=!1;return p0(t,e,r,n)},uL=ne([yn,cL],oy),fL=ne([yn,hC,ife,uL],aC),afe=ne([gt,pC,yn,on],W7),ofe=ne([gt,pC,yn,on],K7),sfe=(t,e,r,n,i,a,o,s)=>{if(e){var{type:c}=e,f=Zl(t,s);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return p=s==="angleAxis"&&i!=null&&i?.length>=2?vn(i[0]-i[1])*2*p:p,f&&o?o.map((g,y)=>({coordinate:n(g)+p,value:g,index:y,offset:p})):n.domain().map((g,y)=>({coordinate:n(g)+p,value:a?a[g]:g,index:y,offset:p}))}}},Os=ne([gt,yn,hC,fL,cL,afe,ofe,on],sfe),gC=ne([Y7,Q7,bue],(t,e,r)=>Z7(r.shared,t,e)),dL=t=>t.tooltip.settings.trigger,vC=t=>t.tooltip.settings.defaultIndex,py=ne([gd,gC,dL,vC],iL),Hl=ne([py,vd],dC),hL=ne([Os,Hl],J7),pL=ne([py],t=>{if(t)return t.dataKey}),gL=ne([gd,gC,dL,vC],oL),lfe=ne([Es,Ss,gt,nn,Os,vC,gL,g0],aL),cfe=ne([py,lfe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),ufe=ne([py],t=>t.active),ffe=ne([gL,Hl,rc,b7,hL,g0,gC],sL),dfe=ne([ffe],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function YP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YP(Object(r),!0).forEach(function(n){hfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hfe(t,e,r){return(e=pfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pfe(t){var e=gfe(t,"string");return typeof e=="symbol"?e:e+""}function gfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vfe=()=>Re(yn),mfe=()=>{var t=vfe(),e=Re(Os),r=Re(fL);return xp(QP(QP({},t),{},{scale:r}),e)},yfe=()=>Re(FS),mC=(t,e)=>e,vL=(t,e,r)=>r,yC=(t,e,r,n)=>n,xfe=ne(Os,t=>Um(t,e=>e.coordinate)),xC=ne([gd,mC,vL,yC],iL),mL=ne([xC,vd],dC),bfe=(t,e,r)=>{if(e!=null){var n=gd(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},yL=ne([gd,mC,vL,yC],oL),$v=ne([Es,Ss,gt,nn,Os,yC,yL,g0],aL),wfe=ne([xC,$v],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),xL=ne(Os,mL,J7),_fe=ne([yL,mL,rc,b7,xL,g0,mC],sL),Afe=ne([xC],t=>({isActive:t.active,activeIndex:t.index})),Efe=(t,e,r,n,i,a,o,s)=>{if(!(!t||!e||!n||!i||!a)){var c=qie(t.chartX,t.chartY,e,r,s);if(c){var f=Wie(c,e),d=Die(f,o,a,n,i),p=Gie(e,a,d,c);return{activeIndex:String(d),activeCoordinate:p}}}};function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},J_.apply(null,arguments)}function ZP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function E1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(r),!0).forEach(function(n){Sfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sfe(t,e,r){return(e=Cfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cfe(t){var e=Tfe(t,"string");return typeof e=="symbol"?e:e+""}function Tfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ife(t){var{coordinate:e,payload:r,index:n,offset:i,tooltipAxisBandSize:a,layout:o,cursor:s,tooltipEventType:c,chartName:f}=t,d=e,p=r,g=n;if(!s||!d||f!=="ScatterChart"&&c!=="axis")return null;var y,w;if(f==="ScatterChart")y=d,w=Wae;else if(f==="BarChart")y=Kae(o,d,i,a),w=hj;else if(o==="radial"){var{cx:_,cy:A,radius:S,startAngle:T,endAngle:R}=pj(d);y={cx:_,cy:A,startAngle:T,endAngle:R,innerRadius:S,outerRadius:S},w=vj}else y={points:Toe(o,d,i)},w=pS;var N=typeof s=="object"&&"className"in s?s.className:void 0,M=E1(E1(E1(E1({stroke:"#ccc",pointerEvents:"none"},i),y),dr(s,!1)),{},{payload:p,payloadIndex:g,className:wt("recharts-tooltip-cursor",N)});return C.isValidElement(s)?C.cloneElement(s,M):C.createElement(w,M)}function Ofe(t){var e=mfe(),r=ij(),n=Ym(),i=yfe();return C.createElement(Ife,J_({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var bL=C.createContext(null),Rfe=()=>C.useContext(bL),fw={exports:{}},JP;function Pfe(){return JP||(JP=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function a(c,f,d,p,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,p||c,g),w=r?r+f:f;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],y]:c._events[w].push(y):(c._events[w]=y,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)e.call(d,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},s.prototype.listeners=function(f){var d=r?r+f:f,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,w=new Array(y);g<y;g++)w[g]=p[g].fn;return w},s.prototype.listenerCount=function(f){var d=r?r+f:f,p=this._events[d];return p?p.fn?1:p.length:0},s.prototype.emit=function(f,d,p,g,y,w){var _=r?r+f:f;if(!this._events[_])return!1;var A=this._events[_],S=arguments.length,T,R;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),S){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,d),!0;case 3:return A.fn.call(A.context,d,p),!0;case 4:return A.fn.call(A.context,d,p,g),!0;case 5:return A.fn.call(A.context,d,p,g,y),!0;case 6:return A.fn.call(A.context,d,p,g,y,w),!0}for(R=1,T=new Array(S-1);R<S;R++)T[R-1]=arguments[R];A.fn.apply(A.context,T)}else{var N=A.length,M;for(R=0;R<N;R++)switch(A[R].once&&this.removeListener(f,A[R].fn,void 0,!0),S){case 1:A[R].fn.call(A[R].context);break;case 2:A[R].fn.call(A[R].context,d);break;case 3:A[R].fn.call(A[R].context,d,p);break;case 4:A[R].fn.call(A[R].context,d,p,g);break;default:if(!T)for(M=1,T=new Array(S-1);M<S;M++)T[M-1]=arguments[M];A[R].fn.apply(A[R].context,T)}}return!0},s.prototype.on=function(f,d,p){return a(this,f,d,p,!1)},s.prototype.once=function(f,d,p){return a(this,f,d,p,!0)},s.prototype.removeListener=function(f,d,p,g){var y=r?r+f:f;if(!this._events[y])return this;if(!d)return o(this,y),this;var w=this._events[y];if(w.fn)w.fn===d&&(!g||w.once)&&(!p||w.context===p)&&o(this,y);else{for(var _=0,A=[],S=w.length;_<S;_++)(w[_].fn!==d||g&&!w[_].once||p&&w[_].context!==p)&&A.push(w[_]);A.length?this._events[y]=A.length===1?A[0]:A:o(this,y)}return this},s.prototype.removeAllListeners=function(f){var d;return f?(d=r?r+f:f,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(fw)),fw.exports}var Dfe=Pfe();const Nfe=ko(Dfe);var Cp=new Nfe,eA="recharts.syncEvent.tooltip",e5="recharts.syncEvent.brush";function bC(t,e){if(e){var r=Number.parseInt(e,10);if(!Hi(r))return t?.[r]}}var kfe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},wL=Gi({name:"options",initialState:kfe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Mfe=wL.reducer,{createEventEmitter:jfe}=wL.actions;function Lfe(t){return t.tooltip.syncInteraction}var Bfe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_L=Gi({name:"chartData",initialState:Bfe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:t5,setDataStartEndIndexes:zfe,setComputedData:Ume}=_L.actions,Ufe=_L.reducer,Ffe=["x","y"];function r5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(r),!0).forEach(function(n){Vfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vfe(t,e,r){return(e=Hfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hfe(t){var e=$fe(t,"string");return typeof e=="symbol"?e:e+""}function $fe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qfe(t,e){if(t==null)return{};var r,n,i=Gfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Gfe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var AL=()=>{};function Wfe(){var t=Re(VS),e=Re(HS),r=hr(),n=Re(p7),i=Re(Os),a=Ym(),o=uS(),s=Re(c=>c.rootProps.className);C.useEffect(()=>{if(t==null)return AL;var c=(f,d,p)=>{if(e!==p&&t===f){if(n==="index"){var g;if(o&&d!==null&&d!==void 0&&(g=d.payload)!==null&&g!==void 0&&g.coordinate){var y=d.payload.coordinate,{x:w,y:_}=y,A=qfe(y,Ffe),S=kc(kc(kc({},A),typeof w=="number"&&{x:Math.max(o.x,Math.min(w,o.x+o.width))}),typeof _=="number"&&{y:Math.max(o.y,Math.min(_,o.y+o.height))}),T=kc(kc({},d),{},{payload:kc(kc({},d.payload),{},{coordinate:S})});r(T)}else r(d);return}if(i!=null){var R;if(typeof n=="function"){var N={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},M=n(i,N);R=i[M]}else n==="value"&&(R=i.find(F=>String(F.value)===d.payload.label));var{coordinate:L}=d.payload;if(R==null||d.payload.active===!1||L==null||o==null){r(Q_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:O,y:D}=L,j=Math.min(O,o.x+o.width),B=Math.min(D,o.y+o.height),z={x:a==="horizontal"?R.coordinate:j,y:a==="horizontal"?B:R.coordinate},V=Q_({active:d.payload.active,coordinate:z,dataKey:d.payload.dataKey,index:String(R.index),label:d.payload.label});r(V)}}};return Cp.on(eA,c),()=>{Cp.off(eA,c)}},[s,r,e,t,n,i,a,o])}function Kfe(){var t=Re(VS),e=Re(HS),r=hr();C.useEffect(()=>{if(t==null)return AL;var n=(i,a,o)=>{e!==o&&t===i&&r(zfe(a))};return Cp.on(e5,n),()=>{Cp.off(e5,n)}},[r,e,t])}function Xfe(){var t=hr();C.useEffect(()=>{t(jfe())},[t]),Wfe(),Kfe()}function Yfe(t,e,r,n,i,a){var o=Re(g=>bfe(g,t,e)),s=Re(HS),c=Re(VS),f=Re(p7),d=Re(Lfe),p=d?.active;C.useEffect(()=>{if(!p&&c!=null&&s!=null){var g=Q_({active:a,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n});Cp.emit(eA,c,g,s)}},[p,r,o,i,n,s,c,f,a])}function n5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function i5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n5(Object(r),!0).forEach(function(n){Qfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qfe(t,e,r){return(e=Zfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zfe(t){var e=Jfe(t,"string");return typeof e=="symbol"?e:e+""}function Jfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ede(t){return t.dataKey}function tde(t,e){return C.isValidElement(t)?C.cloneElement(t,e):typeof t=="function"?C.createElement(t,e):C.createElement(Sae,e)}var a5=[],rde={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Jl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function gy(t){var e=Mn(t,rde),{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,content:o,filterNull:s,isAnimationActive:c,offset:f,payloadUniqBy:d,position:p,reverseDirection:g,useTranslate3d:y,wrapperStyle:w,cursor:_,shared:A,trigger:S,defaultIndex:T,portal:R,axisId:N}=e,M=hr(),L=typeof T=="number"?String(T):T;C.useEffect(()=>{M(Eue({shared:A,trigger:S,axisId:N,active:r,defaultIndex:L}))},[M,A,S,N,r,L]);var O=uS(),D=lj(),j=xue(A),{activeIndex:B,isActive:z}=Re(De=>Afe(De,j,S,L)),V=Re(De=>_fe(De,j,S,L)),F=Re(De=>xL(De,j,S,L)),he=Re(De=>wfe(De,j,S,L)),_e=V,Y=Rfe(),ie=r??z,[K,ve]=C9([_e,ie]),Ie=j==="axis"?F:void 0;Yfe(j,S,he,Ie,B,ie);var G=R??Y;if(G==null)return null;var Z=_e??a5;ie||(Z=a5),s&&Z.length&&(Z=w9(_e.filter(De=>De.value!=null&&(De.hide!==!0||e.includeHidden)),d,ede));var be=Z.length>0,Ee=C.createElement(Dae,{allowEscapeViewBox:n,animationDuration:i,animationEasing:a,isAnimationActive:c,active:ie,coordinate:he,hasPayload:be,offset:f,position:p,reverseDirection:g,useTranslate3d:y,viewBox:O,wrapperStyle:w,lastBoundingBox:K,innerRef:ve,hasPortalFromProps:!!R},tde(o,i5(i5({},e),{},{payload:Z,label:Ie,active:ie,coordinate:he,accessibilityLayer:D})));return C.createElement(C.Fragment,null,KM.createPortal(Ee,G),ie&&C.createElement(Ofe,{cursor:_,tooltipEventType:j,coordinate:he,payload:_e,index:B}))}var dw={},hw={},pw={},o5;function nde(){return o5||(o5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:a}={}){let o,s=null;const c=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),d=()=>{s!==null&&(r.apply(o,s),o=void 0,s=null)},p=()=>{f&&d(),_()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,p()},n)},w=()=>{g!==null&&(clearTimeout(g),g=null)},_=()=>{w(),o=void 0,s=null},A=()=>{d()},S=function(...T){if(i?.aborted)return;o=this,s=T;const R=g==null;y(),c&&R&&d()};return S.schedule=y,S.cancel=_,S.flush=A,i?.addEventListener("abort",_,{once:!0}),S}t.debounce=e})(pw)),pw}var s5;function ide(){return s5||(s5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nde();function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:s=!0,maxWait:c}=a,f=Array(2);o&&(f[0]="leading"),s&&(f[1]="trailing");let d,p=null;const g=e.debounce(function(..._){d=n.apply(this,_),p=null},i,{edges:f}),y=function(..._){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(d=n.apply(this,_),p=Date.now(),g.cancel(),g.schedule(),d):(g.apply(this,_),d)},w=()=>(g.flush(),d);return y.cancel=g.cancel,y.flush=w,y}t.debounce=r})(hw)),hw}var l5;function ade(){return l5||(l5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ide();function r(n,i=0,a={}){const{leading:o=!0,trailing:s=!0}=a;return e.debounce(n,i,{leading:o,maxWait:i,trailing:s})}t.throttle=r})(dw)),dw}var gw,c5;function ode(){return c5||(c5=1,gw=ade().throttle),gw}var sde=ode();const lde=ko(sde);var ep=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function u5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(r),!0).forEach(function(n){cde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cde(t,e,r){return(e=ude(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ude(t){var e=fde(t,"string");return typeof e=="symbol"?e:e+""}function fde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vy=C.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:o=0,minHeight:s,maxHeight:c,children:f,debounce:d=0,id:p,className:g,onResize:y,style:w={}}=t,_=C.useRef(null),A=C.useRef();A.current=y,C.useImperativeHandle(e,()=>_.current);var[S,T]=C.useState({containerWidth:n.width,containerHeight:n.height}),R=C.useCallback((M,L)=>{T(O=>{var D=Math.round(M),j=Math.round(L);return O.containerWidth===D&&O.containerHeight===j?O:{containerWidth:D,containerHeight:j}})},[]);C.useEffect(()=>{var M=j=>{var B,{width:z,height:V}=j[0].contentRect;R(z,V),(B=A.current)===null||B===void 0||B.call(A,z,V)};d>0&&(M=lde(M,d,{trailing:!0,leading:!1}));var L=new ResizeObserver(M),{width:O,height:D}=_.current.getBoundingClientRect();return R(O,D),L.observe(_.current),()=>{L.disconnect()}},[R,d]);var N=C.useMemo(()=>{var{containerWidth:M,containerHeight:L}=S;if(M<0||L<0)return null;ep(Hc(i)||Hc(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),ep(!r||r>0,"The aspect(%s) must be greater than zero.",r);var O=Hc(i)?M:i,D=Hc(a)?L:a;return r&&r>0&&(O?D=O/r:D&&(O=D*r),c&&D>c&&(D=c)),ep(O>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,D,i,a,o,s,r),C.Children.map(f,j=>C.cloneElement(j,{width:O,height:D,style:vw({width:O,height:D},j.props.style)}))},[r,f,a,c,s,o,S,i]);return C.createElement("div",{id:p?"".concat(p):void 0,className:wt("recharts-responsive-container",g),style:vw(vw({},w),{},{width:i,height:a,minWidth:o,minHeight:s,maxHeight:c}),ref:_},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))}),md=t=>null;md.displayName="Cell";function dde(t,e,r){return(e=hde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hde(t){var e=pde(t,"string");return typeof e=="symbol"?e:e+""}function pde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class gde{constructor(e){dde(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function f5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vde(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f5(Object(r),!0).forEach(function(n){mde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mde(t,e,r){return(e=yde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yde(t){var e=xde(t,"string");return typeof e=="symbol"?e:e+""}function xde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bde={cacheSize:2e3,enableCache:!0},EL=vde({},bde),d5=new gde(EL.cacheSize),wde={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},h5="recharts_measurement_span";function _de(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",o=e.letterSpacing||"",s=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(s)}var p5=(t,e)=>{try{var r=document.getElementById(h5);r||(r=document.createElement("span"),r.setAttribute("id",h5),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,wde,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},tp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Jl.isSsr)return{width:0,height:0};if(!EL.enableCache)return p5(e,r);var n=_de(e,r),i=d5.get(n);if(i)return i;var a=p5(e,r);return d5.set(n,a),a},g5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,v5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ade=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ede=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,SL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Sde=Object.keys(SL),wf="NaN";function Cde(t,e){return t*SL[e]}class gi{static parse(e){var r,[,n,i]=(r=Ede.exec(e))!==null&&r!==void 0?r:[];return new gi(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Hi(e)&&(this.unit=""),r!==""&&!Ade.test(r)&&(this.num=NaN,this.unit=""),Sde.includes(r)&&(this.num=Cde(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new gi(NaN,""):new gi(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new gi(NaN,""):new gi(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new gi(NaN,""):new gi(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new gi(NaN,""):new gi(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Hi(this.num)}}function CL(t){if(t.includes(wf))return wf;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,a]=(r=g5.exec(e))!==null&&r!==void 0?r:[],o=gi.parse(n??""),s=gi.parse(a??""),c=i==="*"?o.multiply(s):o.divide(s);if(c.isNaN())return wf;e=e.replace(g5,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,d,p,g]=(f=v5.exec(e))!==null&&f!==void 0?f:[],y=gi.parse(d??""),w=gi.parse(g??""),_=p==="+"?y.add(w):y.subtract(w);if(_.isNaN())return wf;e=e.replace(v5,_.toString())}return e}var m5=/\(([^()]*)\)/;function Tde(t){for(var e=t,r;(r=m5.exec(e))!=null;){var[,n]=r;e=e.replace(m5,CL(n))}return e}function Ide(t){var e=t.replace(/\s+/g,"");return e=Tde(e),e=CL(e),e}function Ode(t){try{return Ide(t)}catch{return wf}}function mw(t){var e=Ode(t.slice(5,-1));return e===wf?"":e}var Rde=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Pde=["dx","dy","angle","className","breakAll"];function tA(){return tA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tA.apply(null,arguments)}function y5(t,e){if(t==null)return{};var r,n,i=Dde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Dde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var TL=/[ \f\n\r\t\v\u2028\u2029]+/,IL=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];cr(e)||(r?i=e.toString().split(""):i=e.toString().split(TL));var a=i.map(s=>({word:s,width:tp(s,n).width})),o=r?0:tp(" ",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Nde=(t,e,r,n,i)=>{var{maxLines:a,children:o,style:s,breakAll:c}=t,f=Ne(a),d=o,p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce((V,F)=>{var{word:he,width:_e}=F,Y=V[V.length-1];if(Y&&(n==null||i||Y.width+_e+r<Number(n)))Y.words.push(he),Y.width+=_e+r;else{var ie={words:[he],width:_e};V.push(ie)}return V},[])},g=p(e),y=B=>B.reduce((z,V)=>z.width>V.width?z:V);if(!f||i)return g;var w=g.length>a||y(g).width>Number(n);if(!w)return g;for(var _="…",A=B=>{var z=d.slice(0,B),V=IL({breakAll:c,style:s,children:z+_}).wordsWithComputedWidth,F=p(V),he=F.length>a||y(F).width>Number(n);return[he,F]},S=0,T=d.length-1,R=0,N;S<=T&&R<=d.length-1;){var M=Math.floor((S+T)/2),L=M-1,[O,D]=A(L),[j]=A(M);if(!O&&!j&&(S=M+1),O&&j&&(T=M-1),!O&&j){N=D;break}R++}return N||g},x5=t=>{var e=cr(t)?[]:t.toString().split(TL);return[{words:e}]},kde=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:o}=t;if((e||r)&&!Jl.isSsr){var s,c,f=IL({breakAll:a,children:n,style:i});if(f){var{wordsWithComputedWidth:d,spaceWidth:p}=f;s=d,c=p}else return x5(n);return Nde({breakAll:a,children:n,maxLines:o,style:i},s,c,e,r)}return x5(n)},b5="#808080",my=C.forwardRef((t,e)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:s="start",verticalAnchor:c="end",fill:f=b5}=t,d=y5(t,Rde),p=C.useMemo(()=>kde({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:g,dy:y,angle:w,className:_,breakAll:A}=d,S=y5(d,Pde);if(!Do(r)||!Do(n)||p.length===0)return null;var T=r+(Ne(g)?g:0),R=n+(Ne(y)?y:0),N;switch(c){case"start":N=mw("calc(".concat(a,")"));break;case"middle":N=mw("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:N=mw("calc(".concat(p.length-1," * -").concat(i,")"));break}var M=[];if(o){var L=p[0].width,{width:O}=d;M.push("scale(".concat(Ne(O)?O/L:1,")"))}return w&&M.push("rotate(".concat(w,", ").concat(T,", ").concat(R,")")),M.length&&(S.transform=M.join(" ")),C.createElement("text",tA({},dr(S,!0),{ref:e,x:T,y:R,className:wt("recharts-text",_),textAnchor:s,fill:f.includes("url")?b5:f}),p.map((D,j)=>{var B=D.words.join(A?"":" ");return C.createElement("tspan",{x:T,dy:j===0?N:i,key:"".concat(B,"-").concat(j)},B)}))});my.displayName="Text";var Mde=["labelRef"];function jde(t,e){if(t==null)return{};var r,n,i=Lde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Lde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function w5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(r),!0).forEach(function(n){Bde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bde(t,e,r){return(e=zde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zde(t){var e=Ude(t,"string");return typeof e=="symbol"?e:e+""}function Ude(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function is(){return is=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},is.apply(null,arguments)}var OL=C.createContext(null),Fde=t=>{var{x:e,y:r,width:n,height:i,children:a}=t,o=C.useMemo(()=>({x:e,y:r,width:n,height:i}),[e,r,n,i]);return C.createElement(OL.Provider,{value:o},a)},RL=()=>{var t=C.useContext(OL),e=uS();return t||e},Vde=C.createContext(null),Hde=()=>{var t=C.useContext(Vde),e=Re(x7);return t||e},$de=t=>{var{value:e,formatter:r}=t,n=cr(t.children)?e:t.children;return typeof r=="function"?r(n):n},wC=t=>t!=null&&typeof t=="function",qde=(t,e)=>{var r=vn(e-t),n=Math.min(Math.abs(e-t),360);return r*n},Gde=(t,e,r,n,i)=>{var{offset:a,className:o}=t,{cx:s,cy:c,innerRadius:f,outerRadius:d,startAngle:p,endAngle:g,clockWise:y}=i,w=(f+d)/2,_=qde(p,g),A=_>=0?1:-1,S,T;switch(e){case"insideStart":S=p+A*a,T=y;break;case"insideEnd":S=g-A*a,T=!y;break;case"end":S=g+A*a,T=y;break;default:throw new Error("Unsupported position ".concat(e))}T=_<=0?T:!T;var R=$r(s,c,w,S),N=$r(s,c,w,S+(T?1:-1)*359),M="M".concat(R.x,",").concat(R.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(T?0:1,`,
    `).concat(N.x,",").concat(N.y),L=cr(t.id)?vp("recharts-radial-line-"):t.id;return C.createElement("text",is({},n,{dominantBaseline:"central",className:wt("recharts-radial-bar-label",o)}),C.createElement("defs",null,C.createElement("path",{id:L,d:M})),C.createElement("textPath",{xlinkHref:"#".concat(L)},r))},Wde=(t,e,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:s,endAngle:c}=t,f=(s+c)/2;if(r==="outside"){var{x:d,y:p}=$r(n,i,o+e,f);return{x:d,y:p,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+o)/2,{x:y,y:w}=$r(n,i,g,f);return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},PL=t=>"cx"in t&&Ne(t.cx),Kde=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,a;r!=null&&!PL(r)&&(a=r);var{x:o,y:s,width:c,height:f}=e,d=f>=0?1:-1,p=d*n,g=d>0?"end":"start",y=d>0?"start":"end",w=c>=0?1:-1,_=w*n,A=w>0?"end":"start",S=w>0?"start":"end";if(i==="top"){var T={x:o+c/2,y:s-d*n,textAnchor:"middle",verticalAnchor:g};return Tr(Tr({},T),a?{height:Math.max(s-a.y,0),width:c}:{})}if(i==="bottom"){var R={x:o+c/2,y:s+f+p,textAnchor:"middle",verticalAnchor:y};return Tr(Tr({},R),a?{height:Math.max(a.y+a.height-(s+f),0),width:c}:{})}if(i==="left"){var N={x:o-_,y:s+f/2,textAnchor:A,verticalAnchor:"middle"};return Tr(Tr({},N),a?{width:Math.max(N.x-a.x,0),height:f}:{})}if(i==="right"){var M={x:o+c+_,y:s+f/2,textAnchor:S,verticalAnchor:"middle"};return Tr(Tr({},M),a?{width:Math.max(a.x+a.width-M.x,0),height:f}:{})}var L=a?{width:c,height:f}:{};return i==="insideLeft"?Tr({x:o+_,y:s+f/2,textAnchor:S,verticalAnchor:"middle"},L):i==="insideRight"?Tr({x:o+c-_,y:s+f/2,textAnchor:A,verticalAnchor:"middle"},L):i==="insideTop"?Tr({x:o+c/2,y:s+p,textAnchor:"middle",verticalAnchor:y},L):i==="insideBottom"?Tr({x:o+c/2,y:s+f-p,textAnchor:"middle",verticalAnchor:g},L):i==="insideTopLeft"?Tr({x:o+_,y:s+p,textAnchor:S,verticalAnchor:y},L):i==="insideTopRight"?Tr({x:o+c-_,y:s+p,textAnchor:A,verticalAnchor:y},L):i==="insideBottomLeft"?Tr({x:o+_,y:s+f-p,textAnchor:S,verticalAnchor:g},L):i==="insideBottomRight"?Tr({x:o+c-_,y:s+f-p,textAnchor:A,verticalAnchor:g},L):i&&typeof i=="object"&&(Ne(i.x)||Hc(i.x))&&(Ne(i.y)||Hc(i.y))?Tr({x:o+qn(i.x,c),y:s+qn(i.y,f),textAnchor:"end",verticalAnchor:"end"},L):Tr({x:o+c/2,y:s+f/2,textAnchor:"middle",verticalAnchor:"middle"},L)},Xde={offset:5};function ml(t){var e=Mn(t,Xde),{viewBox:r,position:n,value:i,children:a,content:o,className:s="",textBreakAll:c,labelRef:f}=e,d=Hde(),p=RL(),g=n==="center"?p:d??p,y=r||g;if(!y||cr(i)&&cr(a)&&!C.isValidElement(o)&&typeof o!="function")return null;var w=Tr(Tr({},e),{},{viewBox:y});if(C.isValidElement(o)){var{labelRef:_}=w,A=jde(w,Mde);return C.cloneElement(o,A)}var S;if(typeof o=="function"){if(S=C.createElement(o,w),C.isValidElement(S))return S}else S=$de(e);var T=PL(y),R=dr(e,!0);if(T&&(n==="insideStart"||n==="insideEnd"||n==="end"))return Gde(e,n,S,R,y);var N=T?Wde(y,e.offset,e.position):Kde(e,y);return C.createElement(my,is({ref:f,className:wt("recharts-label",s)},R,N,{breakAll:c}),S)}ml.displayName="Label";var Yde=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?C.createElement(ml,is({key:"label-implicit"},n)):Do(t)?C.createElement(ml,is({key:"label-implicit",value:t},n)):C.isValidElement(t)?t.type===ml?C.cloneElement(t,Tr({key:"label-implicit"},n)):C.createElement(ml,is({key:"label-implicit",content:t},n)):wC(t)?C.createElement(ml,is({key:"label-implicit",content:t},n)):t&&typeof t=="object"?C.createElement(ml,is({},t,{key:"label-implicit"},n)):null};function Qde(t){var{label:e}=t,r=RL();return Yde(e,r)||null}var yw={},xw={},_5;function Zde(){return _5||(_5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(xw)),xw}var bw={},A5;function Jde(){return A5||(A5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(bw)),bw}var E5;function ehe(){return E5||(E5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zde(),r=Jde(),n=tS();function i(a){if(n.isArrayLike(a))return e.last(r.toArray(a))}t.last=i})(yw)),yw}var ww,S5;function the(){return S5||(S5=1,ww=ehe().last),ww}var rhe=the();const nhe=ko(rhe);var ihe=["valueAccessor"],ahe=["dataKey","clockWise","id","textBreakAll"];function qv(){return qv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qv.apply(null,arguments)}function C5(t,e){if(t==null)return{};var r,n,i=ohe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ohe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var she=t=>Array.isArray(t.value)?nhe(t.value):t.value,DL=C.createContext(void 0),NL=DL.Provider,kL=C.createContext(void 0),lhe=kL.Provider;function che(){return C.useContext(DL)}function uhe(){return C.useContext(kL)}function F1(t){var{valueAccessor:e=she}=t,r=C5(t,ihe),{dataKey:n,clockWise:i,id:a,textBreakAll:o}=r,s=C5(r,ahe),c=che(),f=uhe(),d=c||f;return!d||!d.length?null:C.createElement(kn,{className:"recharts-label-list"},d.map((p,g)=>{var y,w=cr(n)?e(p,g):Qt(p&&p.payload,n),_=cr(a)?{}:{id:"".concat(a,"-").concat(g)};return C.createElement(ml,qv({},dr(p,!0),s,_,{fill:(y=r.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:o,viewBox:p.viewBox,key:"label-".concat(g),index:g}))}))}F1.displayName="LabelList";function _C(t){var{label:e}=t;return e?e===!0?C.createElement(F1,{key:"labelList-implicit"}):C.isValidElement(e)||wC(e)?C.createElement(F1,{key:"labelList-implicit",content:e}):typeof e=="object"?C.createElement(F1,qv({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function rA(){return rA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rA.apply(null,arguments)}var ML=t=>{var{cx:e,cy:r,r:n,className:i}=t,a=wt("recharts-dot",i);return e===+e&&r===+r&&n===+n?C.createElement("circle",rA({},jo(t),GE(t),{className:a,cx:e,cy:r,r:n})):null},jL=t=>t.graphicalItems.polarItems,fhe=ne([ur,f0],XS),AC=ne([jL,Pr,fhe],YS),dhe=ne([AC],QS),EC=ne([dhe,BS],ZS),hhe=ne([EC,Pr,AC],eC),phe=ne([EC,Pr,AC],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(i=>{var a,o=Qt(n,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(n=>({value:Qt(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]}))),T5=()=>{},ghe=ne([Pr,z7,T5,phe,T5,gt,ur],rC),LL=ne([Pr,gt,EC,hhe,u0,ur,ghe],nC),vhe=ne([LL,Pr,hd],oC);ne([Pr,LL,vhe,ur],lC);var mhe={radiusAxis:{},angleAxis:{}},BL=Gi({name:"polarAxis",initialState:mhe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Fme,removeRadiusAxis:Vme,addAngleAxis:Hme,removeAngleAxis:$me}=BL.actions,yhe=BL.reducer;function I5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function O5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(r),!0).forEach(function(n){xhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xhe(t,e,r){return(e=bhe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bhe(t){var e=whe(t,"string");return typeof e=="symbol"?e:e+""}function whe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _he=(t,e)=>e,SC=ne([jL,_he],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),Ahe=[],CC=(t,e,r)=>r?.length===0?Ahe:r,zL=ne([BS,SC,CC],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>O5(O5({},e.presentationProps),a.props))),i!=null)return i}}),Ehe=ne([zL,SC,CC],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,i)=>{var a,o=Qt(n,e.nameKey,e.name),s;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?s=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?s=n.fill:s=e.fill,{value:sd(o,e.dataKey),color:s,payload:n,type:e.legendType}})}),She=ne([zL,SC,CC,nn],(t,e,r,n)=>{if(!(e==null||t==null))return _pe({offset:n,pieSettings:e,displayedData:t,cells:r})}),_w={},R5;function Che(){return R5||(R5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(_w)),_w}var Aw,P5;function The(){return P5||(P5=1,Aw=Che().isPlainObject),Aw}var Ihe=The();const Ohe=ko(Ihe);function D5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function N5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D5(Object(r),!0).forEach(function(n){Rhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rhe(t,e,r){return(e=Phe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Phe(t){var e=Dhe(t,"string");return typeof e=="symbol"?e:e+""}function Dhe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gv.apply(null,arguments)}var k5=(t,e,r,n,i)=>{var a=r-n,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+r,",").concat(e),o+="L ".concat(t+r-a/2,",").concat(e+i),o+="L ".concat(t+r-a/2-n,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},Nhe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},khe=t=>{var e=Mn(t,Nhe),{x:r,y:n,upperWidth:i,lowerWidth:a,height:o,className:s}=e,{animationEasing:c,animationDuration:f,animationBegin:d,isUpdateAnimationActive:p}=e,g=C.useRef(),[y,w]=C.useState(-1),_=C.useRef(i),A=C.useRef(a),S=C.useRef(o),T=C.useRef(r),R=C.useRef(n),N=a0(t,"trapezoid-");if(C.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var he=g.current.getTotalLength();he&&w(he)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var M=wt("recharts-trapezoid",s);if(!p)return C.createElement("g",null,C.createElement("path",Gv({},dr(e,!0),{className:M,d:k5(r,n,i,a,o)})));var L=_.current,O=A.current,D=S.current,j=T.current,B=R.current,z="0px ".concat(y===-1?1:y,"px"),V="".concat(y,"px 0px"),F=cj(["strokeDasharray"],f,c);return C.createElement(i0,{animationId:N,key:N,canBegin:y>0,duration:f,easing:c,isActive:p,begin:d},he=>{var _e=vr(L,i,he),Y=vr(O,a,he),ie=vr(D,o,he),K=vr(j,r,he),ve=vr(B,n,he);g.current&&(_.current=_e,A.current=Y,S.current=ie,T.current=K,R.current=ve);var Ie=he>0?{transition:F,strokeDasharray:V}:{strokeDasharray:z};return C.createElement("path",Gv({},dr(e,!0),{className:M,d:k5(K,ve,_e,Y,ie),ref:g,style:N5(N5({},Ie),e.style)}))})},Mhe=["option","shapeType","propTransformer","activeClassName","isActive"];function jhe(t,e){if(t==null)return{};var r,n,i=Lhe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Lhe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function M5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M5(Object(r),!0).forEach(function(n){Bhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bhe(t,e,r){return(e=zhe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zhe(t){var e=Uhe(t,"string");return typeof e=="symbol"?e:e+""}function Uhe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fhe(t,e){return Wv(Wv({},e),t)}function Vhe(t,e){return t==="symbols"}function j5(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return C.createElement(hj,r);case"trapezoid":return C.createElement(khe,r);case"sector":return C.createElement(vj,r);case"symbols":if(Vhe(e))return C.createElement(ZE,r);break;default:return null}}function Hhe(t){return C.isValidElement(t)?t.props:t}function UL(t){var{option:e,shapeType:r,propTransformer:n=Fhe,activeClassName:i="recharts-active-shape",isActive:a}=t,o=jhe(t,Mhe),s;if(C.isValidElement(e))s=C.cloneElement(e,Wv(Wv({},o),Hhe(e)));else if(typeof e=="function")s=e(o);else if(Ohe(e)&&typeof e!="boolean"){var c=n(e,o);s=C.createElement(j5,{shapeType:r,elementProps:c})}else{var f=o;s=C.createElement(j5,{shapeType:r,elementProps:f})}return a?C.createElement(kn,{className:i},s):s}var TC=(t,e)=>{var r=hr();return(n,i)=>a=>{t?.(n,i,a),r(tL({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}},IC=t=>{var e=hr();return(r,n)=>i=>{t?.(r,n,i),e(Sue())}},OC=(t,e)=>{var r=hr();return(n,i)=>a=>{t?.(n,i,a),r(Cue({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}};function RC(t){var{fn:e,args:r}=t,n=hr(),i=Ai();return C.useEffect(()=>{if(!i){var a=e(r);return n(_ue(a)),()=>{n(Aue(a))}}},[e,r,n,i]),null}var FL=()=>{};function VL(t){var{legendPayload:e}=t,r=hr(),n=Ai();return C.useEffect(()=>n?FL:(r(oj(e)),()=>{r(sj(e))}),[r,n,e]),null}function $he(t){var{legendPayload:e}=t,r=hr(),n=Re(gt);return C.useEffect(()=>n!=="centric"&&n!=="radial"?FL:(r(oj(e)),()=>{r(sj(e))}),[r,n,e]),null}var Ew,qhe=()=>{var[t]=C.useState(()=>vp("uid-"));return t},Ghe=(Ew=fU.useId)!==null&&Ew!==void 0?Ew:qhe;function Whe(t,e){var r=Ghe();return e||(t?"".concat(t,"-").concat(r):r)}var Khe=C.createContext(void 0),PC=t=>{var{id:e,type:r,children:n}=t,i=Whe("recharts-".concat(r),e);return C.createElement(Khe.Provider,{value:i},n(i))},Xhe={cartesianItems:[],polarItems:[]},HL=Gi({name:"graphicalItems",initialState:Xhe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:r,next:n}=e.payload,i=fs(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},removeCartesianGraphicalItem(t,e){var r=fs(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var r=fs(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:Yhe,replaceCartesianGraphicalItem:Qhe,removeCartesianGraphicalItem:Zhe,addPolarGraphicalItem:Jhe,removePolarGraphicalItem:epe}=HL.actions,tpe=HL.reducer;function $L(t){var e=hr(),r=C.useRef(null);return C.useEffect(()=>{r.current===null?e(Yhe(t)):r.current!==t&&e(Qhe({prev:r.current,next:t})),r.current=t},[e,t]),C.useEffect(()=>()=>{r.current&&(e(Zhe(r.current)),r.current=null)},[e]),null}function rpe(t){var e=hr();return C.useEffect(()=>(e(Jhe(t)),()=>{e(epe(t))}),[e,t]),null}var npe=["onMouseEnter","onClick","onMouseLeave"],ipe=["id"],ape=["id"];function DC(t,e){if(t==null)return{};var r,n,i=ope(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ope(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function L5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ar(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(r),!0).forEach(function(n){spe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function spe(t,e,r){return(e=lpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lpe(t){var e=cpe(t,"string");return typeof e=="symbol"?e:e+""}function cpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$l.apply(null,arguments)}function upe(t){var e=C.useMemo(()=>WE(t.children,md),[t.children]),r=Re(n=>Ehe(n,t.id,e));return r==null?null:C.createElement($he,{legendPayload:r})}function fpe(t){var{dataKey:e,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:o,name:s,hide:c,tooltipType:f}=t;return{dataDefinedOnItem:n.map(d=>d.tooltipPayload),positions:n.map(d=>d.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:o,dataKey:e,nameKey:r,name:sd(s,e),hide:c,type:f,color:o,unit:""}}}var dpe=(t,e)=>t>e?"start":t<e?"end":"middle",hpe=(t,e,r)=>qn(typeof e=="function"?e(t):e,r,r*.8),ppe=(t,e,r)=>{var{top:n,left:i,width:a,height:o}=e,s=Q9(a,o),c=i+qn(t.cx,a,a/2),f=n+qn(t.cy,o,o/2),d=qn(t.innerRadius,s,0),p=hpe(r,t.outerRadius,s),g=t.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:c,cy:f,innerRadius:d,outerRadius:p,maxRadius:g}},gpe=(t,e)=>{var r=vn(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function vpe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var mpe=(t,e)=>{if(C.isValidElement(t))return C.cloneElement(t,e);if(typeof t=="function")return t(e);var r=wt("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return C.createElement(pS,$l({},e,{type:"linear",className:r}))},ype=(t,e,r)=>{if(C.isValidElement(t))return C.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),C.isValidElement(n)))return n;var i=wt("recharts-pie-label-text",vpe(t));return C.createElement(my,$l({},e,{alignmentBaseline:"middle",className:i}),n)};function xpe(t){var{sectors:e,props:r,showLabels:n}=t,{label:i,labelLine:a,dataKey:o}=r;if(!n||!i||!e)return null;var s=jo(r),c=dr(i,!1),f=dr(a,!1),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,p=e.map((g,y)=>{var w=(g.startAngle+g.endAngle)/2,_=$r(g.cx,g.cy,g.outerRadius+d,w),A=ar(ar(ar(ar({},s),g),{},{stroke:"none"},c),{},{index:y,textAnchor:dpe(_.x,g.cx)},_),S=ar(ar(ar(ar({},s),g),{},{fill:"none",stroke:g.fill},f),{},{index:y,points:[$r(g.cx,g.cy,g.outerRadius,w),_],key:"line"});return C.createElement(kn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},a&&mpe(a,S),ype(i,A,Qt(g,o)))});return C.createElement(kn,{className:"recharts-pie-labels"},p)}function bpe(t){var{sectors:e,props:r,showLabels:n}=t,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?C.createElement(_C,{label:i}):C.createElement(xpe,{sectors:e,props:r,showLabels:n})}function wpe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:i}=t,a=Re(Hl),{onMouseEnter:o,onClick:s,onMouseLeave:c}=i,f=DC(i,npe),d=TC(o,i.dataKey),p=IC(c),g=OC(s,i.dataKey);return e==null||e.length===0?null:C.createElement(C.Fragment,null,e.map((y,w)=>{if(y?.startAngle===0&&y?.endAngle===0&&e.length!==1)return null;var _=r&&String(w)===a,A=a?n:null,S=_?r:A,T=ar(ar({},y),{},{stroke:y.stroke,tabIndex:-1,[rj]:w,[nj]:i.dataKey});return C.createElement(kn,$l({tabIndex:-1,className:"recharts-pie-sector"},e0(f,y,w),{onMouseEnter:d(y,w),onMouseLeave:p(y,w),onClick:g(y,w),key:"sector-".concat(y?.startAngle,"-").concat(y?.endAngle,"-").concat(y.midAngle,"-").concat(w)}),C.createElement(UL,$l({option:S,isActive:_,shapeType:"sector"},T)))}))}function _pe(t){var e,{pieSettings:r,displayedData:n,cells:i,offset:a}=t,{cornerRadius:o,startAngle:s,endAngle:c,dataKey:f,nameKey:d,tooltipType:p}=r,g=Math.abs(r.minAngle),y=gpe(s,c),w=Math.abs(y),_=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,A=n.filter(L=>Qt(L,f,0)!==0).length,S=(w>=360?A:A-1)*_,T=w-A*g-S,R=n.reduce((L,O)=>{var D=Qt(O,f,0);return L+(Ne(D)?D:0)},0),N;if(R>0){var M;N=n.map((L,O)=>{var D=Qt(L,f,0),j=Qt(L,d,O),B=ppe(r,a,L),z=(Ne(D)?D:0)/R,V,F=ar(ar({},L),i&&i[O]&&i[O].props);O?V=M.endAngle+vn(y)*_*(D!==0?1:0):V=s;var he=V+vn(y)*((D!==0?g:0)+z*T),_e=(V+he)/2,Y=(B.innerRadius+B.outerRadius)/2,ie=[{name:j,value:D,payload:F,dataKey:f,type:p}],K=$r(B.cx,B.cy,Y,_e);return M=ar(ar(ar(ar({},r.presentationProps),{},{percent:z,cornerRadius:o,name:j,tooltipPayload:ie,midAngle:_e,middleRadius:Y,tooltipPosition:K},F),B),{},{value:D,startAngle:V,endAngle:he,payload:F,paddingAngle:vn(y)*_}),M})}return N}function Ape(t){var{showLabels:e,sectors:r,children:n}=t,i=C.useMemo(()=>!e||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,e]);return C.createElement(lhe,{value:e?i:void 0},n)}function Epe(t){var{props:e,previousSectorsRef:r}=t,{sectors:n,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:s,activeShape:c,inactiveShape:f,onAnimationStart:d,onAnimationEnd:p}=e,g=a0(e,"recharts-pie-"),y=r.current,[w,_]=C.useState(!1),A=C.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),S=C.useCallback(()=>{typeof d=="function"&&d(),_(!0)},[d]);return C.createElement(Ape,{showLabels:!w,sectors:n},C.createElement(i0,{animationId:g,begin:a,duration:o,isActive:i,easing:s,onAnimationStart:S,onAnimationEnd:A,key:g},T=>{var R=[],N=n&&n[0],M=N?.startAngle;return n?.forEach((L,O)=>{var D=y&&y[O],j=O>0?cu(L,"paddingAngle",0):0;if(D){var B=vr(D.endAngle-D.startAngle,L.endAngle-L.startAngle,T),z=ar(ar({},L),{},{startAngle:M+j,endAngle:M+B+j});R.push(z),M=z.endAngle}else{var{endAngle:V,startAngle:F}=L,he=vr(0,V-F,T),_e=ar(ar({},L),{},{startAngle:M+j,endAngle:M+he+j});R.push(_e),M=_e.endAngle}}),r.current=R,C.createElement(kn,null,C.createElement(wpe,{sectors:R,activeShape:c,inactiveShape:f,allOtherPieProps:e}))}),C.createElement(bpe,{showLabels:!w,sectors:n,props:e}),e.children)}var Spe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Jl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Cpe(t){var{id:e}=t,r=DC(t,ipe),{hide:n,className:i,rootTabIndex:a}=t,o=C.useMemo(()=>WE(t.children,md),[t.children]),s=Re(d=>She(d,e,o)),c=C.useRef(null),f=wt("recharts-pie",i);return n||s==null?(c.current=null,C.createElement(kn,{tabIndex:a,className:f})):C.createElement(C.Fragment,null,C.createElement(RC,{fn:fpe,args:ar(ar({},t),{},{sectors:s})}),C.createElement(kn,{tabIndex:a,className:f},C.createElement(Epe,{props:ar(ar({},r),{},{sectors:s}),previousSectorsRef:c})))}function NC(t){var e=Mn(t,Spe),{id:r}=e,n=DC(e,ape),i=jo(n);return C.createElement(PC,{id:r,type:"pie"},a=>C.createElement(C.Fragment,null,C.createElement(rpe,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),C.createElement(upe,$l({},n,{id:a})),C.createElement(Cpe,$l({},n,{id:a}))))}NC.displayName="Pie";function B5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function z5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(r),!0).forEach(function(n){Tpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tpe(t,e,r){return(e=Ipe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ipe(t){var e=Ope(t,"string");return typeof e=="symbol"?e:e+""}function Ope(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rpe={xAxis:{},yAxis:{},zAxis:{}},qL=Gi({name:"cartesianAxis",initialState:Rpe,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload;t.yAxis[r]&&(t.yAxis[r]=z5(z5({},t.yAxis[r]),{},{width:n}))}}}),{addXAxis:Ppe,removeXAxis:Dpe,addYAxis:Npe,removeYAxis:kpe,addZAxis:qme,removeZAxis:Gme,updateYAxisWidth:Mpe}=qL.actions,jpe=qL.reducer,Lpe=ne([nn],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Bpe=ne([Lpe,Es,Ss],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),kC=()=>Re(Bpe),zpe=()=>Re(dfe);function U5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function F5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(r),!0).forEach(function(n){Upe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Upe(t,e,r){return(e=Fpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fpe(t){var e=Vpe(t,"string");return typeof e=="symbol"?e:e+""}function Vpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hpe=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o=F5(F5({index:r,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},dr(i,!1)),GE(i)),s;return C.isValidElement(i)?s=C.cloneElement(i,o):typeof i=="function"?s=i(o):s=C.createElement(ML,o),C.createElement(kn,{className:"recharts-active-dot"},s)};function $pe(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i}=t,a=Re(Hl),o=zpe();if(e==null||o==null)return null;var s=e.find(c=>o.includes(c.payload));return cr(s)?null:Hpe({point:s,childIndex:Number(a),mainColor:r,dataKey:i,activeDot:n})}var qpe="Invariant failed";function Gpe(t,e){throw new Error(qpe)}var Wpe=["x","y"];function nA(){return nA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nA.apply(null,arguments)}function V5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V5(Object(r),!0).forEach(function(n){Kpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kpe(t,e,r){return(e=Xpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xpe(t){var e=Ype(t,"string");return typeof e=="symbol"?e:e+""}function Ype(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qpe(t,e){if(t==null)return{};var r,n,i=Zpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Zpe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Jpe(t,e){var{x:r,y:n}=t,i=Qpe(t,Wpe),a="".concat(r),o=parseInt(a,10),s="".concat(n),c=parseInt(s,10),f="".concat(e.height||i.height),d=parseInt(f,10),p="".concat(e.width||i.width),g=parseInt(p,10);return kh(kh(kh(kh(kh({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:g,name:e.name,radius:e.radius})}function MC(t){return C.createElement(UL,nA({shapeType:"rectangle",propTransformer:Jpe,activeClassName:"recharts-active-bar"},t))}var e0e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(Ne(e))return e;var a=Ne(n)||cr(n);return a?e(n,i):(a||Gpe(),r)}},t0e={},GL=Gi({name:"errorBars",initialState:t0e,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:Wme,replaceErrorBar:Kme,removeErrorBar:Xme}=GL.actions,r0e=GL.reducer,n0e=["children"];function i0e(t,e){if(t==null)return{};var r,n,i=a0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function a0e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var o0e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},s0e=C.createContext(o0e);function WL(t){var{children:e}=t,r=i0e(t,n0e);return C.createElement(s0e.Provider,{value:r},e)}function jC(t,e){var r,n,i=Re(f=>Ts(f,t)),a=Re(f=>Is(f,e)),o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:ki.allowDataOverflow,s=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Mi.allowDataOverflow,c=o||s;return{needClip:c,needClipX:o,needClipY:s}}function KL(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=kC(),{needClipX:a,needClipY:o,needClip:s}=jC(e,r);if(!s)return null;var{x:c,y:f,width:d,height:p}=i;return C.createElement("clipPath",{id:"clipPath-".concat(n)},C.createElement("rect",{x:a?c:c-d/2,y:o?f:f-p/2,width:a?d:d*2,height:o?p:p*2}))}var l0e=["onMouseEnter","onMouseLeave","onClick"],c0e=["value","background","tooltipPosition"],u0e=["id"],f0e=["onMouseEnter","onClick","onMouseLeave"];function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ql.apply(null,arguments)}function H5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(r),!0).forEach(function(n){d0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d0e(t,e,r){return(e=h0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h0e(t){var e=p0e(t,"string");return typeof e=="symbol"?e:e+""}function p0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kv(t,e){if(t==null)return{};var r,n,i=g0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function g0e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var v0e=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:sd(r,e),payload:t}]};function m0e(t){var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:a,hide:o,unit:s}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:e,nameKey:void 0,name:sd(a,e),hide:o,type:t.tooltipType,color:t.fill,unit:s}}}function y0e(t){var e=Re(Hl),{data:r,dataKey:n,background:i,allOtherBarProps:a}=t,{onMouseEnter:o,onMouseLeave:s,onClick:c}=a,f=Kv(a,l0e),d=TC(o,n),p=IC(s),g=OC(c,n);if(!i||r==null)return null;var y=dr(i,!1);return C.createElement(C.Fragment,null,r.map((w,_)=>{var{value:A,background:S,tooltipPosition:T}=w,R=Kv(w,c0e);if(!S)return null;var N=d(w,_),M=p(w,_),L=g(w,_),O=ti(ti(ti(ti(ti({option:i,isActive:String(_)===e},R),{},{fill:"#eee"},S),y),e0(f,w,_)),{},{onMouseEnter:N,onMouseLeave:M,onClick:L,dataKey:n,index:_,className:"recharts-bar-background-rectangle"});return C.createElement(MC,ql({key:"background-bar-".concat(O.index)},O))}))}function x0e(t){var{showLabels:e,children:r,rects:n}=t,i=n?.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return ti(ti({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return C.createElement(NL,{value:e?i:void 0},r)}function b0e(t){var{shape:e,activeBar:r,baseProps:n,entry:i,index:a,dataKey:o}=t,s=Re(Hl),c=Re(pL),f=r&&String(a)===s&&(c==null||o===c),d=f?r:e;return C.createElement(MC,ql({},n,i,{isActive:f,option:d,index:a,dataKey:o}))}function w0e(t){var{shape:e,baseProps:r,entry:n,index:i,dataKey:a}=t;return C.createElement(MC,ql({},r,n,{isActive:!1,option:e,index:i,dataKey:a}))}function _0e(t){var{data:e,props:r}=t,n=jo(r),{id:i}=n,a=Kv(n,u0e),{shape:o,dataKey:s,activeBar:c}=r,{onMouseEnter:f,onClick:d,onMouseLeave:p}=r,g=Kv(r,f0e),y=TC(f,s),w=IC(p),_=OC(d,s);return e?C.createElement(C.Fragment,null,e.map((A,S)=>C.createElement(kn,ql({className:"recharts-bar-rectangle"},e0(g,A,S),{onMouseEnter:y(A,S),onMouseLeave:w(A,S),onClick:_(A,S),key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(S)}),c?C.createElement(b0e,{shape:o,activeBar:c,baseProps:a,entry:A,index:S,dataKey:s}):C.createElement(w0e,{shape:o,baseProps:a,entry:A,index:S,dataKey:s})))):null}function A0e(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:s,animationEasing:c,onAnimationEnd:f,onAnimationStart:d}=e,p=r.current,g=a0(e,"recharts-bar-"),[y,w]=C.useState(!1),_=!y,A=C.useCallback(()=>{typeof f=="function"&&f(),w(!1)},[f]),S=C.useCallback(()=>{typeof d=="function"&&d(),w(!0)},[d]);return C.createElement(x0e,{showLabels:_,rects:n},C.createElement(i0,{animationId:g,begin:o,duration:s,isActive:a,easing:c,onAnimationEnd:A,onAnimationStart:S,key:g},T=>{var R=T===1?n:n?.map((N,M)=>{var L=p&&p[M];if(L)return ti(ti({},N),{},{x:vr(L.x,N.x,T),y:vr(L.y,N.y,T),width:vr(L.width,N.width,T),height:vr(L.height,N.height,T)});if(i==="horizontal"){var O=vr(0,N.height,T);return ti(ti({},N),{},{y:N.y+N.height-O,height:O})}var D=vr(0,N.width,T);return ti(ti({},N),{},{width:D})});return T>0&&(r.current=R??null),R==null?null:C.createElement(kn,null,C.createElement(_0e,{props:e,data:R}))}),C.createElement(_C,{label:e.label}),e.children)}function E0e(t){var e=C.useRef(null);return C.createElement(A0e,{previousRectanglesRef:e,props:t})}var XL=0,S0e=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Qt(t,e)}};class C0e extends C.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:o,needClip:s,background:c,id:f}=this.props;if(e||r==null)return null;var d=wt("recharts-bar",i),p=f;return C.createElement(kn,{className:d,id:f},s&&C.createElement("defs",null,C.createElement(KL,{clipPathId:p,xAxisId:a,yAxisId:o})),C.createElement(kn,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(p,")"):void 0},C.createElement(y0e,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),C.createElement(E0e,this.props)))}}var T0e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Jl.isSsr,legendType:"rect",minPointSize:XL,xAxisId:0,yAxisId:0};function I0e(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:s,animationDuration:c,animationEasing:f,isAnimationActive:d}=t,{needClip:p}=jC(e,r),g=Ym(),y=Ai(),w=WE(t.children,md),_=Re(T=>rge(T,e,r,y,t.id,w));if(g!=="vertical"&&g!=="horizontal")return null;var A,S=_?.[0];return S==null||S.height==null||S.width==null?A=0:A=g==="vertical"?S.height/2:S.width/2,C.createElement(WL,{xAxisId:e,yAxisId:r,data:_,dataPointFormatter:S0e,errorBarOffset:A},C.createElement(C0e,ql({},t,{layout:g,needClip:p,data:_,xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:s,animationDuration:c,animationEasing:f,isAnimationActive:d})))}function O0e(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:o,yAxis:s,xAxisTicks:c,yAxisTicks:f,stackedData:d,displayedData:p,offset:g,cells:y,parentViewBox:w}=t,_=e==="horizontal"?s:o,A=d?_.scale.domain():null,S=Fie({numericAxis:_});return p.map((T,R)=>{var N,M,L,O,D,j;d?N=Mie(d[R],A):(N=Qt(T,r),Array.isArray(N)||(N=[S,N]));var B=e0e(n,XL)(N[1],R);if(e==="horizontal"){var z,[V,F]=[s.scale(N[0]),s.scale(N[1])];M=IR({axis:o,ticks:c,bandSize:a,offset:i.offset,entry:T,index:R}),L=(z=F??V)!==null&&z!==void 0?z:void 0,O=i.size;var he=V-F;if(D=Hi(he)?0:he,j={x:M,y:g.top,width:O,height:g.height},Math.abs(B)>0&&Math.abs(D)<Math.abs(B)){var _e=vn(D||B)*(Math.abs(B)-Math.abs(D));L-=_e,D+=_e}}else{var[Y,ie]=[o.scale(N[0]),o.scale(N[1])];if(M=Y,L=IR({axis:s,ticks:f,bandSize:a,offset:i.offset,entry:T,index:R}),O=ie-Y,D=i.size,j={x:g.left,y:L,width:g.width,height:D},Math.abs(B)>0&&Math.abs(O)<Math.abs(B)){var K=vn(O||B)*(Math.abs(B)-Math.abs(O));O+=K}}if(M==null||L==null||O==null||D==null)return null;var ve=ti(ti({},T),{},{x:M,y:L,width:O,height:D,value:d?N:N[1],payload:T,background:j,tooltipPosition:{x:M+O/2,y:L+D/2},parentViewBox:w},y&&y[R]&&y[R].props);return ve}).filter(Boolean)}function R0e(t){var e=Mn(t,T0e),r=Ai();return C.createElement(PC,{id:e.id,type:"bar"},n=>C.createElement(C.Fragment,null,C.createElement(VL,{legendPayload:v0e(e)}),C.createElement(RC,{fn:m0e,args:e}),C.createElement($L,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Uie(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),C.createElement(I0e,ql({},e,{id:n}))))}var YL=C.memo(R0e);YL.displayName="Bar";function $5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function S1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$5(Object(r),!0).forEach(function(n){P0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function P0e(t,e,r){return(e=D0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D0e(t){var e=N0e(t,"string");return typeof e=="symbol"?e:e+""}function N0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k0e=(t,e)=>e,M0e=(t,e,r)=>r,j0e=(t,e,r,n)=>n,L0e=(t,e,r,n,i)=>i,m0=ne([cy,L0e],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),B0e=ne([m0],t=>t?.maxBarSize),z0e=(t,e,r,n,i,a)=>a,q5=(t,e,r)=>{var n=r??t;if(!cr(n))return qn(n,e,0)},U0e=ne([gt,cy,k0e,M0e,j0e],(t,e,r,n,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),F0e=(t,e,r,n)=>{var i=gt(t);return i==="horizontal"?Y_(t,"yAxis",r,n):Y_(t,"xAxis",e,n)},V0e=(t,e,r)=>{var n=gt(t);return n==="horizontal"?qP(t,"xAxis",e):qP(t,"yAxis",r)},H0e=(t,e,r)=>{var n={},i=t.filter(ly),a=t.filter(f=>f.stackId==null),o=i.reduce((f,d)=>(f[d.stackId]||(f[d.stackId]=[]),f[d.stackId].push(d),f),n),s=Object.entries(o).map(f=>{var[d,p]=f,g=p.map(w=>w.dataKey),y=q5(e,r,p[0].barSize);return{stackId:d,dataKeys:g,barSize:y}}),c=a.map(f=>{var d=[f.dataKey].filter(g=>g!=null),p=q5(e,r,f.barSize);return{stackId:void 0,dataKeys:d,barSize:p}});return[...s,...c]},$0e=ne([U0e,wce,V0e],H0e),q0e=(t,e,r,n,i)=>{var a,o,s=m0(t,e,r,n,i);if(s!=null){var c=gt(t),f=d7(t),{maxBarSize:d}=s,p=cr(d)?f:d,g,y;return c==="horizontal"?(g=Vl(t,"xAxis",e,n),y=Fl(t,"xAxis",e,n)):(g=Vl(t,"yAxis",r,n),y=Fl(t,"yAxis",r,n)),(a=(o=xp(g,y,!0))!==null&&o!==void 0?o:p)!==null&&a!==void 0?a:0}},QL=(t,e,r,n)=>{var i=gt(t),a,o;return i==="horizontal"?(a=Vl(t,"xAxis",e,n),o=Fl(t,"xAxis",e,n)):(a=Vl(t,"yAxis",r,n),o=Fl(t,"yAxis",r,n)),xp(a,o)};function G0e(t,e,r,n,i){var a=n.length;if(!(a<1)){var o=qn(t,r,0,!0),s,c=[];if(qi(n[0].barSize)){var f=!1,d=r/a,p=n.reduce((S,T)=>S+(T.barSize||0),0);p+=(a-1)*o,p>=r&&(p-=(a-1)*o,o=0),p>=r&&d>0&&(f=!0,d*=.9,p=a*d);var g=(r-p)/2>>0,y={offset:g-o,size:0};s=n.reduce((S,T)=>{var R,N={stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:y.offset+y.size+o,size:f?d:(R=T.barSize)!==null&&R!==void 0?R:0}},M=[...S,N];return y=M[M.length-1].position,M},c)}else{var w=qn(e,r,0,!0);r-2*w-(a-1)*o<=0&&(o=0);var _=(r-2*w-(a-1)*o)/a;_>1&&(_>>=0);var A=qi(i)?Math.min(_,i):_;s=n.reduce((S,T,R)=>[...S,{stackId:T.stackId,dataKeys:T.dataKeys,position:{offset:w+(_+o)*R+(_-A)/2,size:A}}],c)}return s}}var W0e=(t,e,r,n,i,a,o)=>{var s=cr(o)?e:o,c=G0e(r,n,i!==a?i:a,t,s);return i!==a&&c!=null&&(c=c.map(f=>S1(S1({},f),{},{position:S1(S1({},f.position),{},{offset:f.position.offset-i/2})}))),c},K0e=ne([$0e,d7,bce,h7,q0e,QL,B0e],W0e),X0e=(t,e,r,n)=>Vl(t,"xAxis",e,n),Y0e=(t,e,r,n)=>Vl(t,"yAxis",r,n),Q0e=(t,e,r,n)=>Fl(t,"xAxis",e,n),Z0e=(t,e,r,n)=>Fl(t,"yAxis",r,n),J0e=ne([K0e,m0],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),ege=(t,e)=>{var r=WS(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var i=t[n];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===r)}}}},tge=ne([F0e,m0],ege),rge=ne([nn,cS,X0e,Y0e,Q0e,Z0e,J0e,gt,iy,QL,tge,m0,z0e],(t,e,r,n,i,a,o,s,c,f,d,p,g)=>{var{chartData:y,dataStartIndex:w,dataEndIndex:_}=c;if(!(p==null||o==null||e==null||s!=="horizontal"&&s!=="vertical"||r==null||n==null||i==null||a==null||f==null)){var{data:A}=p,S;if(A!=null&&A.length>0?S=A:S=y?.slice(w,_+1),S!=null)return O0e({layout:s,barSettings:p,pos:o,parentViewBox:e,bandSize:f,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:S,offset:t,cells:g})}}),ZL=t=>{var{chartData:e}=t,r=hr(),n=Ai();return C.useEffect(()=>n?()=>{}:(r(t5(e)),()=>{r(t5(void 0))}),[e,r,n]),null},G5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},JL=Gi({name:"brush",initialState:G5,reducers:{setBrushSettings(t,e){return e.payload==null?G5:e.payload}}}),{setBrushSettings:Yme}=JL.actions,nge=JL.reducer;function ige(t,e,r){return(e=age(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function age(t){var e=oge(t,"string");return typeof e=="symbol"?e:e+""}function oge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class LC{static create(e){return new LC(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}ige(LC,"EPS",1e-4);function sge(t){return(t%180+180)%180}var lge=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=sge(i),o=a*Math.PI/180,s=Math.atan(n/r),c=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},cge={dots:[],areas:[],lines:[]},eB=Gi({name:"referenceElements",initialState:cge,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=fs(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=fs(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=fs(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Qme,removeDot:Zme,addArea:Jme,removeArea:eye,addLine:tye,removeLine:rye}=eB.actions,uge=eB.reducer,fge=C.createContext(void 0),dge=t=>{var{children:e}=t,[r]=C.useState("".concat(vp("recharts"),"-clip")),n=kC();if(n==null)return null;var{x:i,y:a,width:o,height:s}=n;return C.createElement(fge.Provider,{value:r},C.createElement("defs",null,C.createElement("clipPath",{id:r},C.createElement("rect",{x:i,y:a,height:s,width:o}))),e)};function Yf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function tB(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function hge(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return lge(n,r)}function pge(t,e,r){var n=r==="width",{x:i,y:a,width:o,height:s}=t;return e===1?{start:n?i:a,end:n?i+o:a+s}:{start:n?i+o:a+s,end:n?i:a}}function Xv(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function gge(t,e){return tB(t,e+1)}function vge(t,e,r,n,i){for(var a=(n||[]).slice(),{start:o,end:s}=e,c=0,f=1,d=o,p=function(){var w=n?.[c];if(w===void 0)return{v:tB(n,f)};var _=c,A,S=()=>(A===void 0&&(A=r(w,_)),A),T=w.coordinate,R=c===0||Xv(t,T,S,d,s);R||(c=0,d=o,f+=1),R&&(d=T+t*(S()/2+i),c+=f)},g;f<=a.length;)if(g=p(),g)return g.v;return[]}function W5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W5(Object(r),!0).forEach(function(n){mge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mge(t,e,r){return(e=yge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yge(t){var e=xge(t,"string");return typeof e=="symbol"?e:e+""}function xge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bge(t,e,r,n,i){for(var a=(n||[]).slice(),o=a.length,{start:s}=e,{end:c}=e,f=function(g){var y=a[g],w,_=()=>(w===void 0&&(w=r(y,g)),w);if(g===o-1){var A=t*(y.coordinate+t*_()/2-c);a[g]=y=zn(zn({},y),{},{tickCoord:A>0?y.coordinate-A*t:y.coordinate})}else a[g]=y=zn(zn({},y),{},{tickCoord:y.coordinate});var S=Xv(t,y.tickCoord,_,s,c);S&&(c=y.tickCoord-t*(_()/2+i),a[g]=zn(zn({},y),{},{isShow:!0}))},d=o-1;d>=0;d--)f(d);return a}function wge(t,e,r,n,i,a){var o=(n||[]).slice(),s=o.length,{start:c,end:f}=e;if(a){var d=n[s-1],p=r(d,s-1),g=t*(d.coordinate+t*p/2-f);o[s-1]=d=zn(zn({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate});var y=Xv(t,d.tickCoord,()=>p,c,f);y&&(f=d.tickCoord-t*(p/2+i),o[s-1]=zn(zn({},d),{},{isShow:!0}))}for(var w=a?s-1:s,_=function(T){var R=o[T],N,M=()=>(N===void 0&&(N=r(R,T)),N);if(T===0){var L=t*(R.coordinate-t*M()/2-c);o[T]=R=zn(zn({},R),{},{tickCoord:L<0?R.coordinate-L*t:R.coordinate})}else o[T]=R=zn(zn({},R),{},{tickCoord:R.coordinate});var O=Xv(t,R.tickCoord,M,c,f);O&&(c=R.tickCoord+t*(M()/2+i),o[T]=zn(zn({},R),{},{isShow:!0}))},A=0;A<w;A++)_(A);return o}function BC(t,e,r){var{tick:n,ticks:i,viewBox:a,minTickGap:o,orientation:s,interval:c,tickFormatter:f,unit:d,angle:p}=t;if(!i||!i.length||!n)return[];if(Ne(c)||Jl.isSsr){var g;return(g=gge(i,Ne(c)?c:0))!==null&&g!==void 0?g:[]}var y=[],w=s==="top"||s==="bottom"?"width":"height",_=d&&w==="width"?tp(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},A=(R,N)=>{var M=typeof f=="function"?f(R.value,N):R.value;return w==="width"?hge(tp(M,{fontSize:e,letterSpacing:r}),_,p):tp(M,{fontSize:e,letterSpacing:r})[w]},S=i.length>=2?vn(i[1].coordinate-i[0].coordinate):1,T=pge(a,S,w);return c==="equidistantPreserveStart"?vge(S,T,A,i,o):(c==="preserveStart"||c==="preserveStartEnd"?y=wge(S,T,A,i,o,c==="preserveStartEnd"):y=bge(S,T,A,i,o),y.filter(R=>R.isShow))}var _ge=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=t,o=0;if(e){e.forEach(d=>{if(d){var p=d.getBoundingClientRect();p.width>o&&(o=p.width)}});var s=r?r.getBoundingClientRect().width:0,c=i+a,f=o+c+s+(r?n:0);return Math.round(f)}return 0},Age=["axisLine","width","height","className","hide","ticks"],Ege=["viewBox"],Sge=["viewBox"];function iA(t,e){if(t==null)return{};var r,n,i=Cge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Cge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hu.apply(null,arguments)}function K5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K5(Object(r),!0).forEach(function(n){Tge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tge(t,e,r){return(e=Ige(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ige(t){var e=Oge(t,"string");return typeof e=="symbol"?e:e+""}function Oge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zC={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Rge(t){var{x:e,y:r,width:n,height:i,orientation:a,mirror:o,axisLine:s,otherSvgProps:c}=t;if(!s)return null;var f=Zr(Zr(Zr({},c),dr(s,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!o||a==="bottom"&&o);f=Zr(Zr({},f),{},{x1:e,y1:r+d*i,x2:e+n,y2:r+d*i})}else{var p=+(a==="left"&&!o||a==="right"&&o);f=Zr(Zr({},f),{},{x1:e+p*n,y1:r,x2:e+p*n,y2:r+i})}return C.createElement("line",hu({},f,{className:wt("recharts-cartesian-axis-line",cu(s,"className"))}))}function Pge(t,e,r,n,i,a,o,s,c){var f,d,p,g,y,w,_=s?-1:1,A=t.tickSize||o,S=Ne(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":f=d=t.coordinate,g=r+ +!s*i,p=g-_*A,w=p-_*c,y=S;break;case"left":p=g=t.coordinate,d=e+ +!s*n,f=d-_*A,y=f-_*c,w=S;break;case"right":p=g=t.coordinate,d=e+ +s*n,f=d+_*A,y=f+_*c,w=S;break;default:f=d=t.coordinate,g=r+ +s*i,p=g+_*A,w=p+_*c,y=S;break}return{line:{x1:f,y1:p,x2:d,y2:g},tick:{x:y,y:w}}}function Dge(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Nge(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function kge(t){var{option:e,tickProps:r,value:n}=t,i,a=wt(r.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(e))i=C.cloneElement(e,Zr(Zr({},r),{},{className:a}));else if(typeof e=="function")i=e(Zr(Zr({},r),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=wt(o,e?.className)),i=C.createElement(my,hu({},r,{className:o}),n)}return i}function Mge(t){var{ticks:e=[],tick:r,tickLine:n,stroke:i,tickFormatter:a,unit:o,padding:s,tickTextProps:c,orientation:f,mirror:d,x:p,y:g,width:y,height:w,tickSize:_,tickMargin:A,fontSize:S,letterSpacing:T,getTicksConfig:R,events:N}=t,M=BC(Zr(Zr({},R),{},{ticks:e}),S,T),L=Dge(f,d),O=Nge(f,d),D=jo(R),j=dr(r,!1),B=Zr(Zr({},D),{},{fill:"none"},dr(n,!1)),z=M.map((V,F)=>{var{line:he,tick:_e}=Pge(V,p,g,y,w,f,_,d,A),Y=Zr(Zr(Zr(Zr({textAnchor:L,verticalAnchor:O},D),{},{stroke:"none",fill:i},j),_e),{},{index:F,payload:V,visibleTicksCount:M.length,tickFormatter:a,padding:s},c);return C.createElement(kn,hu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},e0(N,V,F)),n&&C.createElement("line",hu({},B,he,{className:wt("recharts-cartesian-axis-tick-line",cu(n,"className"))})),r&&C.createElement(kge,{option:r,tickProps:Y,value:"".concat(typeof a=="function"?a(V.value,F):V.value).concat(o||"")}))});return z.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},z):null}var jge=C.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:a,hide:o,ticks:s}=t,c=iA(t,Age),[f,d]=C.useState(""),[p,g]=C.useState(""),y=C.useRef([]);C.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var _;return _ge({ticks:y.current,label:(_=t.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=C.useCallback(_=>{if(_){var A=_.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=Array.from(A);var S=A[0];if(S){var T=window.getComputedStyle(S),R=T.fontSize,N=T.letterSpacing;(R!==f||N!==p)&&(d(R),g(N))}}},[f,p]);return o||n!=null&&n<=0||i!=null&&i<=0?null:C.createElement(kn,{className:wt("recharts-cartesian-axis",a),ref:w},C.createElement(Rge,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:jo(t)}),C.createElement(Mge,{ticks:s,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:f,letterSpacing:p,getTicksConfig:t,events:c}),C.createElement(Fde,{x:t.x,y:t.y,width:t.width,height:t.height},C.createElement(Qde,{label:t.label}),t.children))}),Lge=C.memo(jge,(t,e)=>{var{viewBox:r}=t,n=iA(t,Ege),{viewBox:i}=e,a=iA(e,Sge);return Yf(r,i)&&Yf(n,a)}),UC=C.forwardRef((t,e)=>{var r=Mn(t,zC);return C.createElement(Lge,hu({},r,{ref:e}))});UC.displayName="CartesianAxis";var Bge=["x1","y1","x2","y2","key"],zge=["offset"],Uge=["xAxisId","yAxisId"],Fge=["xAxisId","yAxisId"];function X5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X5(Object(r),!0).forEach(function(n){Vge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vge(t,e,r){return(e=Hge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hge(t){var e=$ge(t,"string");return typeof e=="symbol"?e:e+""}function $ge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gc.apply(null,arguments)}function Yv(t,e){if(t==null)return{};var r,n,i=qge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function qge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Gge=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:o,ry:s}=t;return C.createElement("rect",{x:n,y:i,ry:s,width:a,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function rB(t,e){var r;if(C.isValidElement(t))r=C.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var{x1:n,y1:i,x2:a,y2:o,key:s}=e,c=Yv(e,Bge),f=jo(c),{offset:d}=f,p=Yv(f,zge);r=C.createElement("line",Gc({},p,{x1:n,y1:i,x2:a,y2:o,fill:"none",key:s}))}return r}function Wge(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,s=Yv(t,Uge),c=i.map((f,d)=>{var p=Vn(Vn({},s),{},{x1:e,y1:f,x2:e+r,y2:f,key:"line-".concat(d),index:d});return rB(n,p)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Kge(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,s=Yv(t,Fge),c=i.map((f,d)=>{var p=Vn(Vn({},s),{},{x1:f,y1:e,x2:f,y2:e+r,key:"line-".concat(d),index:d});return rB(n,p)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Xge(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:a,height:o,horizontalPoints:s,horizontal:c=!0}=t;if(!c||!e||!e.length)return null;var f=s.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==f[0]&&f.unshift(0);var d=f.map((p,g)=>{var y=!f[g+1],w=y?i+o-p:f[g+1]-p;if(w<=0)return null;var _=g%e.length;return C.createElement("rect",{key:"react-".concat(g),y:p,x:n,height:w,width:a,stroke:"none",fill:e[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Yge(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:o,height:s,verticalPoints:c}=t;if(!e||!r||!r.length)return null;var f=c.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==f[0]&&f.unshift(0);var d=f.map((p,g)=>{var y=!f[g+1],w=y?i+o-p:f[g+1]-p;if(w<=0)return null;var _=g%r.length;return C.createElement("rect",{key:"react-".concat(g),x:p,y:a,width:w,height:s,stroke:"none",fill:r[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Qge=(t,e)=>{var{xAxis:r,width:n,height:i,offset:a}=t;return J9(BC(Vn(Vn(Vn({},zC),r),{},{ticks:ej(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},Zge=(t,e)=>{var{yAxis:r,width:n,height:i,offset:a}=t;return J9(BC(Vn(Vn(Vn({},zC),r),{},{ticks:ej(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},Jge={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function FC(t){var e=fS(),r=dS(),n=ij(),i=Vn(Vn({},Mn(t,Jge)),{},{x:Ne(t.x)?t.x:n.left,y:Ne(t.y)?t.y:n.top,width:Ne(t.width)?t.width:n.width,height:Ne(t.height)?t.height:n.height}),{xAxisId:a,yAxisId:o,x:s,y:c,width:f,height:d,syncWithTicks:p,horizontalValues:g,verticalValues:y}=i,w=Ai(),_=Re(j=>GP(j,"xAxis",a,w)),A=Re(j=>GP(j,"yAxis",o,w));if(!Ne(f)||f<=0||!Ne(d)||d<=0||!Ne(s)||s!==+s||!Ne(c)||c!==+c)return null;var S=i.verticalCoordinatesGenerator||Qge,T=i.horizontalCoordinatesGenerator||Zge,{horizontalPoints:R,verticalPoints:N}=i;if((!R||!R.length)&&typeof T=="function"){var M=g&&g.length,L=T({yAxis:A?Vn(Vn({},A),{},{ticks:M?g:A.ticks}):void 0,width:e,height:r,offset:n},M?!0:p);ep(Array.isArray(L),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof L,"]")),Array.isArray(L)&&(R=L)}if((!N||!N.length)&&typeof S=="function"){var O=y&&y.length,D=S({xAxis:_?Vn(Vn({},_),{},{ticks:O?y:_.ticks}):void 0,width:e,height:r,offset:n},O?!0:p);ep(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(N=D)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(Gge,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(Xge,Gc({},i,{horizontalPoints:R})),C.createElement(Yge,Gc({},i,{verticalPoints:N})),C.createElement(Wge,Gc({},i,{offset:n,horizontalPoints:R,xAxis:_,yAxis:A})),C.createElement(Kge,Gc({},i,{offset:n,verticalPoints:N,xAxis:_,yAxis:A})))}FC.displayName="CartesianGrid";var nB=(t,e,r,n)=>Vl(t,"xAxis",e,n),iB=(t,e,r,n)=>Fl(t,"xAxis",e,n),aB=(t,e,r,n)=>Vl(t,"yAxis",r,n),oB=(t,e,r,n)=>Fl(t,"yAxis",r,n),e1e=ne([gt,nB,aB,iB,oB],(t,e,r,n,i)=>Zl(t,"xAxis")?xp(e,n,!1):xp(r,i,!1)),t1e=(t,e,r,n,i)=>i;function r1e(t){return t.type==="line"}var n1e=ne([cy,t1e],(t,e)=>t.filter(r1e).find(r=>r.id===e)),i1e=ne([gt,nB,aB,iB,oB,n1e,e1e,iy],(t,e,r,n,i,a,o,s)=>{var{chartData:c,dataStartIndex:f,dataEndIndex:d}=s;if(!(a==null||e==null||r==null||n==null||i==null||n.length===0||i.length===0||o==null)){var{dataKey:p,data:g}=a,y;if(g!=null&&g.length>0?y=g:y=c?.slice(f,d+1),y!=null)return C1e({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:o,displayedData:y})}}),a1e=["id"],o1e=["type","layout","connectNulls","needClip"],s1e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Y5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Li(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(r),!0).forEach(function(n){l1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l1e(t,e,r){return(e=c1e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c1e(t){var e=u1e(t,"string");return typeof e=="symbol"?e:e+""}function u1e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VC(t,e){if(t==null)return{};var r,n,i=f1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function f1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pu.apply(null,arguments)}var d1e=t=>{var{dataKey:e,name:r,stroke:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:sd(r,e),payload:t}]};function h1e(t){var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:a,name:o,hide:s,unit:c}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:sd(o,e),hide:s,type:t.tooltipType,color:t.stroke,unit:c}}}var sB=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function p1e(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],i=0;i<e;++i)n=[...n,...r];return n}var g1e=(t,e,r)=>{var n=r.reduce((p,g)=>p+g);if(!n)return sB(e,t);for(var i=Math.floor(t/n),a=t%n,o=e-t,s=[],c=0,f=0;c<r.length;f+=r[c],++c)if(f+r[c]>a){s=[...r.slice(0,c),a-f];break}var d=s.length%2===0?[0,o]:[o];return[...p1e(r,i),...s,...d].map(p=>"".concat(p,"px")).join(", ")};function v1e(t,e){var r;if(C.isValidElement(t))r=C.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var n=wt("recharts-line-dot",typeof t!="boolean"?t.className:"");r=C.createElement(ML,pu({},e,{className:n}))}return r}function m1e(t,e){return t==null?!1:e?!0:t.length===1}function y1e(t){var{clipPathId:e,points:r,props:n}=t,{dot:i,dataKey:a,needClip:o}=n;if(!m1e(r,i))return null;var{id:s}=n,c=VC(n,a1e),f=WM(i),d=jo(c),p=dr(i,!0),g=r.map((w,_)=>{var A=Li(Li(Li({key:"dot-".concat(_),r:3},d),p),{},{index:_,cx:w.x,cy:w.y,dataKey:a,value:w.value,payload:w.payload,points:r});return v1e(i,A)}),y={clipPath:o?"url(#clipPath-".concat(f?"":"dots-").concat(e,")"):void 0};return C.createElement(kn,pu({className:"recharts-line-dots",key:"dots"},y),g)}function x1e(t){var{showLabels:e,children:r,points:n}=t,i=C.useMemo(()=>n?.map(a=>{var o={x:a.x,y:a.y,width:0,height:0};return Li(Li({},o),{},{value:a.value,payload:a.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[n]);return C.createElement(NL,{value:e?i:null},r)}function Q5(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:i,props:a}=t,{type:o,layout:s,connectNulls:c,needClip:f}=a,d=VC(a,o1e),p=Li(Li({},dr(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:f?"url(#clipPath-".concat(e,")"):void 0,points:n,type:o,layout:s,connectNulls:c,strokeDasharray:i??a.strokeDasharray});return C.createElement(C.Fragment,null,n?.length>1&&C.createElement(pS,pu({},p,{pathRef:r})),C.createElement(y1e,{points:n,clipPathId:e,props:a}))}function b1e(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function w1e(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:o,strokeDasharray:s,isAnimationActive:c,animationBegin:f,animationDuration:d,animationEasing:p,animateNewValues:g,width:y,height:w,onAnimationEnd:_,onAnimationStart:A}=r,S=i.current,T=a0(r,"recharts-line-"),[R,N]=C.useState(!1),M=!R,L=C.useCallback(()=>{typeof _=="function"&&_(),N(!1)},[_]),O=C.useCallback(()=>{typeof A=="function"&&A(),N(!0)},[A]),D=b1e(n.current),j=a.current;return C.createElement(x1e,{points:o,showLabels:M},r.children,C.createElement(i0,{animationId:T,begin:f,duration:d,isActive:c,easing:p,onAnimationEnd:L,onAnimationStart:O,key:T},B=>{var z=vr(j,D+j,B),V=Math.min(z,D),F;if(c)if(s){var he="".concat(s).split(/[,\s]+/gim).map(ie=>parseFloat(ie));F=g1e(V,D,he)}else F=sB(D,V);else F=s==null?void 0:String(s);if(S){var _e=S.length/o.length,Y=B===1?o:o.map((ie,K)=>{var ve=Math.floor(K*_e);if(S[ve]){var Ie=S[ve];return Li(Li({},ie),{},{x:vr(Ie.x,ie.x,B),y:vr(Ie.y,ie.y,B)})}return g?Li(Li({},ie),{},{x:vr(y*2,ie.x,B),y:vr(w/2,ie.y,B)}):Li(Li({},ie),{},{x:ie.x,y:ie.y})});return i.current=Y,C.createElement(Q5,{props:r,points:Y,clipPathId:e,pathRef:n,strokeDasharray:F})}return B>0&&D>0&&(i.current=o,a.current=V),C.createElement(Q5,{props:r,points:o,clipPathId:e,pathRef:n,strokeDasharray:F})}),C.createElement(_C,{label:r.label}))}function _1e(t){var{clipPathId:e,props:r}=t,n=C.useRef(null),i=C.useRef(0),a=C.useRef(null);return C.createElement(w1e,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var A1e=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:Qt(t.payload,e)});class E1e extends C.Component{render(){var e,{hide:r,dot:n,points:i,className:a,xAxisId:o,yAxisId:s,top:c,left:f,width:d,height:p,id:g,needClip:y}=this.props;if(r)return null;var w=wt("recharts-line",a),_=g,{r:A=3,strokeWidth:S=2}=(e=dr(n,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},T=WM(n),R=A*2+S;return C.createElement(C.Fragment,null,C.createElement(kn,{className:w},y&&C.createElement("defs",null,C.createElement(KL,{clipPathId:_,xAxisId:o,yAxisId:s}),!T&&C.createElement("clipPath",{id:"clipPath-dots-".concat(_)},C.createElement("rect",{x:f-R/2,y:c-R/2,width:d+R,height:p+R}))),C.createElement(WL,{xAxisId:o,yAxisId:s,data:i,dataPointFormatter:A1e,errorBarOffset:0},C.createElement(_1e,{props:this.props,clipPathId:_}))),C.createElement($pe,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var lB={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Jl.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function S1e(t){var e=Mn(t,lB),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:s,dot:c,hide:f,isAnimationActive:d,label:p,legendType:g,xAxisId:y,yAxisId:w,id:_}=e,A=VC(e,s1e),{needClip:S}=jC(y,w),T=kC(),R=Ym(),N=Ai(),M=Re(B=>i1e(B,y,w,N,_));if(R!=="horizontal"&&R!=="vertical"||M==null||T==null)return null;var{height:L,width:O,x:D,y:j}=T;return C.createElement(E1e,pu({},A,{id:_,connectNulls:s,dot:c,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,isAnimationActive:d,hide:f,label:p,legendType:g,xAxisId:y,yAxisId:w,points:M,layout:R,height:L,width:O,left:D,top:j,needClip:S}))}function C1e(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:o,bandSize:s,displayedData:c}=t;return c.map((f,d)=>{var p=Qt(f,o);if(e==="horizontal"){var g=TR({axis:r,ticks:i,bandSize:s,entry:f,index:d}),y=cr(p)?null:n.scale(p);return{x:g,y,value:p,payload:f}}var w=cr(p)?null:r.scale(p),_=TR({axis:n,ticks:a,bandSize:s,entry:f,index:d});return w==null||_==null?null:{x:w,y:_,value:p,payload:f}}).filter(Boolean)}function T1e(t){var e=Mn(t,lB),r=Ai();return C.createElement(PC,{id:e.id,type:"line"},n=>C.createElement(C.Fragment,null,C.createElement(VL,{legendPayload:d1e(e)}),C.createElement(RC,{fn:h1e,args:e}),C.createElement($L,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),C.createElement(S1e,pu({},e,{id:n}))))}var cB=C.memo(T1e);cB.displayName="Line";var I1e=["dangerouslySetInnerHTML","ticks"],O1e=["id"],R1e=["domain"],P1e=["domain"];function aA(){return aA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aA.apply(null,arguments)}function Qv(t,e){if(t==null)return{};var r,n,i=D1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function D1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function N1e(t){var e=hr();return C.useEffect(()=>(e(Ppe(t)),()=>{e(Dpe(t))}),[t,e]),null}var k1e=t=>{var{xAxisId:e,className:r}=t,n=Re(cS),i=Ai(),a="xAxis",o=Re(A=>pd(A,a,e,i)),s=Re(A=>X7(A,a,e,i)),c=Re(A=>q7(A,e)),f=Re(A=>due(A,e)),d=Re(A=>_7(A,e));if(c==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:p,ticks:g}=t,y=Qv(t,I1e),{id:w}=d,_=Qv(d,O1e);return C.createElement(UC,aA({},y,_,{scale:o,x:f.x,y:f.y,width:c.width,height:c.height,className:wt("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:s}))},M1e={allowDataOverflow:ki.allowDataOverflow,allowDecimals:ki.allowDecimals,allowDuplicatedCategory:ki.allowDuplicatedCategory,height:ki.height,hide:!1,mirror:ki.mirror,orientation:ki.orientation,padding:ki.padding,reversed:ki.reversed,scale:ki.scale,tickCount:ki.tickCount,type:ki.type,xAxisId:0},j1e=t=>{var e,r,n,i,a,o=Mn(t,M1e);return C.createElement(C.Fragment,null,C.createElement(N1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),C.createElement(k1e,o))},L1e=(t,e)=>{var{domain:r}=t,n=Qv(t,R1e),{domain:i}=e,a=Qv(e,P1e);return Yf(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:Yf({domain:r},{domain:i}):!1},HC=C.memo(j1e,L1e);HC.displayName="XAxis";var B1e=["dangerouslySetInnerHTML","ticks"],z1e=["id"],U1e=["domain"],F1e=["domain"];function oA(){return oA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oA.apply(null,arguments)}function Zv(t,e){if(t==null)return{};var r,n,i=V1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function V1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function H1e(t){var e=hr();return C.useEffect(()=>(e(Npe(t)),()=>{e(kpe(t))}),[t,e]),null}var $1e=t=>{var{yAxisId:e,className:r,width:n,label:i}=t,a=C.useRef(null),o=C.useRef(null),s=Re(cS),c=Ai(),f=hr(),d="yAxis",p=Re(M=>pd(M,d,e,c)),g=Re(M=>G7(M,e)),y=Re(M=>pue(M,e)),w=Re(M=>X7(M,d,e,c)),_=Re(M=>A7(M,e));if(C.useLayoutEffect(()=>{if(!(n!=="auto"||!g||wC(i)||C.isValidElement(i)||_==null)){var M=a.current;if(M){var L=M.getCalculatedWidth();Math.round(g.width)!==Math.round(L)&&f(Mpe({id:e,width:L}))}}},[w,g,f,i,e,n,_]),g==null||y==null||_==null)return null;var{dangerouslySetInnerHTML:A,ticks:S}=t,T=Zv(t,B1e),{id:R}=_,N=Zv(_,z1e);return C.createElement(UC,oA({},T,N,{ref:a,labelRef:o,scale:p,x:y.x,y:y.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:wt("recharts-".concat(d," ").concat(d),r),viewBox:s,ticks:w}))},q1e={allowDataOverflow:Mi.allowDataOverflow,allowDecimals:Mi.allowDecimals,allowDuplicatedCategory:Mi.allowDuplicatedCategory,hide:!1,mirror:Mi.mirror,orientation:Mi.orientation,padding:Mi.padding,reversed:Mi.reversed,scale:Mi.scale,tickCount:Mi.tickCount,type:Mi.type,width:Mi.width,yAxisId:0},G1e=t=>{var e,r,n,i,a,o=Mn(t,q1e);return C.createElement(C.Fragment,null,C.createElement(H1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),C.createElement($1e,o))},W1e=(t,e)=>{var{domain:r}=t,n=Zv(t,U1e),{domain:i}=e,a=Zv(e,F1e);return Yf(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:Yf({domain:r},{domain:i}):!1},$C=C.memo(G1e,W1e);$C.displayName="YAxis";var Sw={exports:{}},Cw={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z5;function K1e(){if(Z5)return Cw;Z5=1;var t=Zf();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,s=t.useDebugValue;return Cw.useSyncExternalStoreWithSelector=function(c,f,d,p,g){var y=i(null);if(y.current===null){var w={hasValue:!1,value:null};y.current=w}else w=y.current;y=o(function(){function A(M){if(!S){if(S=!0,T=M,M=p(M),g!==void 0&&w.hasValue){var L=w.value;if(g(L,M))return R=L}return R=M}if(L=R,r(T,M))return L;var O=p(M);return g!==void 0&&g(L,O)?(T=M,L):(T=M,R=O)}var S=!1,T,R,N=d===void 0?null:d;return[function(){return A(f())},N===null?void 0:function(){return A(N())}]},[f,d,p,g]);var _=n(c,y[0],y[1]);return a(function(){w.hasValue=!0,w.value=_},[_]),s(_),_},Cw}var J5;function X1e(){return J5||(J5=1,Sw.exports=K1e()),Sw.exports}X1e();function Y1e(t){t()}function Q1e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Y1e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var eD={notify(){},get:()=>[]};function Z1e(t,e){let r,n=eD,i=0,a=!1;function o(_){d();const A=n.subscribe(_);let S=!1;return()=>{S||(S=!0,A(),p())}}function s(){n.notify()}function c(){w.onStateChange&&w.onStateChange()}function f(){return a}function d(){i++,r||(r=t.subscribe(c),n=Q1e())}function p(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=eD)}function g(){a||(a=!0,d())}function y(){a&&(a=!1,p())}const w={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:f,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>n};return w}var J1e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eve=J1e(),tve=()=>typeof navigator<"u"&&navigator.product==="ReactNative",rve=tve(),nve=()=>eve||rve?C.useLayoutEffect:C.useEffect,ive=nve(),ave=Symbol.for("react-redux-context"),ove=typeof globalThis<"u"?globalThis:{};function sve(){if(!C.createContext)return{};const t=ove[ave]??=new Map;let e=t.get(C.createContext);return e||(e=C.createContext(null),t.set(C.createContext,e)),e}var lve=sve();function cve(t){const{children:e,context:r,serverState:n,store:i}=t,a=C.useMemo(()=>{const c=Z1e(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),o=C.useMemo(()=>i.getState(),[i]);ive(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const s=r||lve;return C.createElement(s.Provider,{value:a},e)}var uve=cve,fve=(t,e)=>e,qC=ne([fve,gt,x7,on,uL,Os,xfe,nn],Efe),GC=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},uB=xa("mouseClick"),fB=r0();fB.startListening({actionCreator:uB,effect:(t,e)=>{var r=t.payload,n=qC(e.getState(),GC(r));n?.activeIndex!=null&&e.dispatch(Tue({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var sA=xa("mouseMove"),dB=r0();dB.startListening({actionCreator:sA,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=fC(n,n.tooltip.settings.shared),a=qC(n,GC(r));i==="axis"&&(a?.activeIndex!=null?e.dispatch(nL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(rL()))}});var tD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},hB=Gi({name:"rootProps",initialState:tD,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:tD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),dve=hB.reducer,{updateOptions:hve}=hB.actions,pB=Gi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:pve}=pB.actions,gve=pB.reducer,gB=xa("keyDown"),vB=xa("focus"),WC=r0();WC.startListening({actionCreator:gB,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(dC(i,vd(r))),s=Os(r);if(a==="Enter"){var c=$v(r,"axis","hover",String(i.index));e.dispatch(Z_({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=yue(r),d=f==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,g=o+p*d;if(!(s==null||g>=s.length||g<0)){var y=$v(r,"axis","hover",String(g));e.dispatch(Z_({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}});WC.startListening({actionCreator:vB,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",o=$v(r,"axis","hover",String(a));e.dispatch(Z_({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var ca=xa("externalEvent"),mB=r0();mB.startListening({actionCreator:ca,effect:(t,e)=>{if(t.payload.handler!=null){var r=e.getState(),n={activeCoordinate:cfe(r),activeDataKey:pL(r),activeIndex:Hl(r),activeLabel:hL(r),activeTooltipIndex:Hl(r),isTooltipActive:ufe(r)};t.payload.handler(n,t.payload.reactEvent)}}});var vve=ne([gd],t=>t.tooltipItemPayloads),mve=ne([vve,g0,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(s=>s.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var o=e(a,r);return o}}}),yB=xa("touchMove"),xB=r0();xB.startListening({actionCreator:yB,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=fC(n,n.tooltip.settings.shared);if(i==="axis"){var a=qC(n,GC({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&e.dispatch(nL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,s=r.touches[0],c=document.elementFromPoint(s.clientX,s.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(rj),d=(o=c.getAttribute(nj))!==null&&o!==void 0?o:void 0,p=mve(e.getState(),f,d);e.dispatch(tL({activeDataKey:d,activeIndex:f,activeCoordinate:p}))}}});var yve=I9({brush:nge,cartesianAxis:jpe,chartData:Ufe,errorBars:r0e,graphicalItems:tpe,layout:xie,legend:cae,options:Mfe,polarAxis:yhe,polarOptions:gve,referenceElements:uge,rootProps:dve,tooltip:Iue}),xve=function(e){return $ne({reducer:yve,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([fB.middleware,dB.middleware,WC.middleware,mB.middleware,xB.middleware]),devTools:Jl.devToolsEnabled})};function bB(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=Ai(),a=C.useRef(null);if(i)return r;a.current==null&&(a.current=xve(e));var o=nS;return C.createElement(uve,{context:o,store:a.current},r)}function wB(t){var{layout:e,width:r,height:n,margin:i}=t,a=hr(),o=Ai();return C.useEffect(()=>{o||(a(vie(e)),a(mie({width:r,height:n})),a(gie(i)))},[a,o,e,r,n,i]),null}function _B(t){var e=hr();return C.useEffect(()=>{e(hve(t))},[e,t]),null}var bve=["children"];function wve(t,e){if(t==null)return{};var r,n,i=_ve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function _ve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Jv(){return Jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jv.apply(null,arguments)}var Ave={width:"100%",height:"100%"},Eve=C.forwardRef((t,e)=>{var r=fS(),n=dS(),i=lj();if(!qf(r)||!qf(n))return null;var{children:a,otherAttributes:o,title:s,desc:c}=t,f,d;return typeof o.tabIndex=="number"?f=o.tabIndex:f=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0,C.createElement(KE,Jv({},o,{title:s,desc:c,role:d,tabIndex:f,width:r,height:n,style:Ave,ref:e}),a)}),Sve=t=>{var{children:e}=t,r=Re(Xm);if(!r)return null;var{width:n,height:i,y:a,x:o}=r;return C.createElement(KE,{width:n,height:i,x:o,y:a},e)},rD=C.forwardRef((t,e)=>{var{children:r}=t,n=wve(t,bve),i=Ai();return i?C.createElement(Sve,null,r):C.createElement(Eve,Jv({ref:e},n),r)});function Cve(){var t=hr(),[e,r]=C.useState(null),n=Re(Kie);return C.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;qi(a)&&a!==n&&t(yie(a))}},[e,t,n]),r}function nD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(r),!0).forEach(function(n){Ive(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ive(t,e,r){return(e=Ove(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ove(t){var e=Rve(t,"string");return typeof e=="symbol"?e:e+""}function Rve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pve=C.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:o,onDoubleClick:s,onMouseDown:c,onMouseEnter:f,onMouseLeave:d,onMouseMove:p,onMouseUp:g,onTouchEnd:y,onTouchMove:w,onTouchStart:_,style:A,width:S}=t,T=hr(),[R,N]=C.useState(null),[M,L]=C.useState(null);Xfe();var O=Cve(),D=C.useCallback(Z=>{O(Z),typeof e=="function"&&e(Z),N(Z),L(Z)},[O,e,N,L]),j=C.useCallback(Z=>{T(uB(Z)),T(ca({handler:a,reactEvent:Z}))},[T,a]),B=C.useCallback(Z=>{T(sA(Z)),T(ca({handler:f,reactEvent:Z}))},[T,f]),z=C.useCallback(Z=>{T(rL()),T(ca({handler:d,reactEvent:Z}))},[T,d]),V=C.useCallback(Z=>{T(sA(Z)),T(ca({handler:p,reactEvent:Z}))},[T,p]),F=C.useCallback(()=>{T(vB())},[T]),he=C.useCallback(Z=>{T(gB(Z.key))},[T]),_e=C.useCallback(Z=>{T(ca({handler:o,reactEvent:Z}))},[T,o]),Y=C.useCallback(Z=>{T(ca({handler:s,reactEvent:Z}))},[T,s]),ie=C.useCallback(Z=>{T(ca({handler:c,reactEvent:Z}))},[T,c]),K=C.useCallback(Z=>{T(ca({handler:g,reactEvent:Z}))},[T,g]),ve=C.useCallback(Z=>{T(ca({handler:_,reactEvent:Z}))},[T,_]),Ie=C.useCallback(Z=>{T(yB(Z)),T(ca({handler:w,reactEvent:Z}))},[T,w]),G=C.useCallback(Z=>{T(ca({handler:y,reactEvent:Z}))},[T,y]);return C.createElement(bL.Provider,{value:R},C.createElement(XM.Provider,{value:M},C.createElement("div",{className:wt("recharts-wrapper",n),style:Tve({position:"relative",cursor:"default",width:S,height:i},A),onClick:j,onContextMenu:_e,onDoubleClick:Y,onFocus:F,onKeyDown:he,onMouseDown:ie,onMouseEnter:B,onMouseLeave:z,onMouseMove:V,onMouseUp:K,onTouchEnd:G,onTouchMove:Ie,onTouchStart:ve,ref:D},r)))}),Dve=["children","className","width","height","style","compact","title","desc"];function Nve(t,e){if(t==null)return{};var r,n,i=kve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function kve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var AB=C.forwardRef((t,e)=>{var{children:r,className:n,width:i,height:a,style:o,compact:s,title:c,desc:f}=t,d=Nve(t,Dve),p=jo(d);return s?C.createElement(rD,{otherAttributes:p,title:c,desc:f},r):C.createElement(Pve,{className:n,style:o,width:i,height:a,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},C.createElement(rD,{otherAttributes:p,title:c,desc:f,ref:e},C.createElement(dge,null,r)))}),Mve=["width","height"];function lA(){return lA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lA.apply(null,arguments)}function jve(t,e){if(t==null)return{};var r,n,i=Lve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Lve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Bve={top:5,right:5,bottom:5,left:5},zve={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Bve,reverseStackOrder:!1,syncMethod:"index"},EB=C.forwardRef(function(e,r){var n,i=Mn(e.categoricalChartProps,zve),{width:a,height:o}=i,s=jve(i,Mve);if(!qf(a)||!qf(o))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,categoricalChartProps:g}=e,y={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,eventEmitter:void 0};return C.createElement(bB,{preloadedState:{options:y},reduxStoreName:(n=g.id)!==null&&n!==void 0?n:c},C.createElement(ZL,{chartData:g.data}),C.createElement(wB,{width:a,height:o,layout:i.layout,margin:i.margin}),C.createElement(_B,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(AB,lA({},s,{width:a,height:o,ref:r})))}),Uve=["axis"],Fve=C.forwardRef((t,e)=>C.createElement(EB,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Uve,tooltipPayloadSearcher:bC,categoricalChartProps:t,ref:e})),Vve=["axis","item"],Hve=C.forwardRef((t,e)=>C.createElement(EB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Vve,tooltipPayloadSearcher:bC,categoricalChartProps:t,ref:e}));function $ve(t){var e=hr();return C.useEffect(()=>{e(pve(t))},[e,t]),null}var qve=["width","height","layout"];function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cA.apply(null,arguments)}function Gve(t,e){if(t==null)return{};var r,n,i=Wve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Wve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Kve={top:5,right:5,bottom:5,left:5},Xve={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Kve,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Yve=C.forwardRef(function(e,r){var n,i=Mn(e.categoricalChartProps,Xve),{width:a,height:o,layout:s}=i,c=Gve(i,qve);if(!qf(a)||!qf(o))return null;var{chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g}=e,y={chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,eventEmitter:void 0};return C.createElement(bB,{preloadedState:{options:y},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:f},C.createElement(ZL,{chartData:i.data}),C.createElement(wB,{width:a,height:o,layout:s,margin:i.margin}),C.createElement(_B,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement($ve,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),C.createElement(AB,cA({width:a,height:o},c,{ref:r})))}),Qve=["item"],Zve={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},SB=C.forwardRef((t,e)=>{var r=Mn(t,Zve);return C.createElement(Yve,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Qve,tooltipPayloadSearcher:bC,categoricalChartProps:r,ref:e})});const Jve=()=>{const{intakes:t}=Ga(),e=C.useMemo(()=>{const n=new Date,i=[];for(let a=6;a>=0;a--){const o=new Date(n);o.setDate(o.getDate()-a);const s=o.toISOString().split("T")[0],f=t.filter(d=>d.date.startsWith(s)).reduce((d,p)=>d+p.calories,0);i.push({date:`${o.getMonth()+1}/${o.getDate()}`,calories:f})}return i},[t]),r=e.some(n=>n.calories>0);return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"📈 週間カロリー推移"}),r?m.jsx(vy,{width:"100%",height:250,children:m.jsxs(Fve,{data:e,margin:{top:10,right:10,left:-20,bottom:5},children:[m.jsx(FC,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),m.jsx(HC,{dataKey:"date",tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx($C,{tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx(gy,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"},labelStyle:{fontWeight:600,marginBottom:"4px"}}),m.jsx(cB,{type:"monotone",dataKey:"calories",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4},activeDot:{r:6},name:"カロリー (kcal)"})]})}):m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、カロリーの推移が表示されます"})]})]})},eme=()=>{const{expenses:t}=Wa(),e=C.useMemo(()=>{const n=new Date,i=[];for(let a=5;a>=0;a--){const o=new Date(n.getFullYear(),n.getMonth()-a,1),s=o.getFullYear(),c=o.getMonth()+1,d=t.filter(p=>{const g=new Date(p.date);return g.getFullYear()===s&&g.getMonth()+1===c}).reduce((p,g)=>p+g.amount,0);i.push({month:`${c}月`,amount:d})}return i},[t]),r=e.some(n=>n.amount>0);return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"💰 月間支出推移"}),r?m.jsx(vy,{width:"100%",height:250,children:m.jsxs(Hve,{data:e,margin:{top:10,right:10,left:-20,bottom:5},children:[m.jsx(FC,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),m.jsx(HC,{dataKey:"month",tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx($C,{tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx(gy,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"},labelStyle:{fontWeight:600,marginBottom:"4px"},formatter:n=>`¥${n.toLocaleString()}`}),m.jsx(YL,{dataKey:"amount",fill:"#22c55e",radius:[4,4,0,0],name:"支出額"})]})}):m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、支出の推移が表示されます"})]})]})},tme=()=>{const{intakes:t}=Ga(),e=C.useMemo(()=>{const r=new Map;return t.forEach(i=>{const a=r.get(i.name)||0;r.set(i.name,a+1)}),Array.from(r.entries()).sort((i,a)=>a[1]-i[1]).slice(0,5).map(([i,a],o)=>({rank:o+1,name:i,count:a}))},[t]);return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"🏆 よく買う商品 TOP5"}),e.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、よく買う商品が表示されます"})]}):m.jsx("div",{style:{marginTop:"16px"},children:e.map(r=>m.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 0",borderBottom:r.rank<e.length?"1px solid var(--border)":"none"},children:[m.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r.rank===1?"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)":r.rank===2?"linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%)":r.rank===3?"linear-gradient(135deg, #cd7f32 0%, #daa06d 100%)":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"1.1rem",color:r.rank<=3?"#fff":"#666",marginRight:"16px",flexShrink:0},children:r.rank}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"0.95rem",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.name}),m.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:["購入回数: ",r.count,"回"]})]})]},r.rank))})]})},C1=["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6","#ec4899"],rme=()=>{const{intakes:t}=Ga(),e=C.useMemo(()=>{const i=new Map;return t.forEach(o=>{const s=o.manufacturer||"その他",c=i.get(s)||0;i.set(s,c+o.price)}),Array.from(i.entries()).sort((o,s)=>s[1]-o[1]).slice(0,6).map(([o,s])=>({name:o,value:s}))},[t]),r=e.reduce((i,a)=>i+a.value,0),n=r>0;return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"🏭 メーカー別支出分析"}),n?m.jsxs(m.Fragment,{children:[m.jsx(vy,{width:"100%",height:250,children:m.jsxs(SB,{children:[m.jsx(NC,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:i=>`${i.name} ${((i.percent||0)*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((i,a)=>m.jsx(md,{fill:C1[a%C1.length]},`cell-${a}`))}),m.jsx(gy,{formatter:i=>`¥${i.toLocaleString()}`,contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"}})]})}),m.jsx("div",{style:{marginTop:"16px"},children:e.map((i,a)=>m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:a<e.length-1?"1px solid var(--border)":"none"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:C1[a%C1.length],flexShrink:0}}),m.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:i.name})]}),m.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--primary)"},children:["¥",i.value.toLocaleString()]})]},i.name))}),m.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--background)",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{style:{fontWeight:600},children:"合計"}),m.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--primary)"},children:["¥",r.toLocaleString()]})]})]}):m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"メーカー情報付きの食事記録を追加すると、分析が表示されます"})]})]})},nme=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"📊 レポート"}),m.jsx(vte,{}),m.jsx(Jve,{}),m.jsx(eme,{}),m.jsx(tme,{}),m.jsx(rme,{})]}),CB=({selectedYear:t,selectedMonth:e,selectedDate:r,onSelectDate:n,onMonthChange:i,mode:a="month"})=>{const[o,s]=C.useState(t),[c,f]=C.useState(e),d=new Date(o,c,0).getDate(),p=new Date(o,c-1,1).getDay(),g=()=>{let N=c-1,M=o;N<1&&(N=12,M-=1),f(N),s(M),i&&i(M,N)},y=()=>{let N=c+1,M=o;N>12&&(N=1,M+=1),f(N),s(M),i&&i(M,N)},w=N=>{if(a==="date"&&n){const M=new Date(o,c-1,N);n(M)}},_=()=>{a==="month"&&i&&i(o,c)},A=N=>{const M=new Date;return M.getFullYear()===o&&M.getMonth()+1===c&&M.getDate()===N},S=N=>r?r.getFullYear()===o&&r.getMonth()+1===c&&r.getDate()===N:!1,T=[];for(let N=0;N<p;N++)T.push(null);for(let N=1;N<=d;N++)T.push(N);const R=["日","月","火","水","木","金","土"];return m.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[m.jsx("button",{onClick:g,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:m.jsx(bD,{size:24})}),m.jsxs("div",{onClick:_,style:{fontSize:"18px",fontWeight:"bold",cursor:a==="month"?"pointer":"default",padding:a==="month"?"8px 16px":"0",borderRadius:"8px",transition:"background 0.2s",background:a==="month"&&o===t&&c===e?"var(--primary)":"transparent",color:a==="month"&&o===t&&c===e?"white":"var(--text)"},children:[o,"年 ",c,"月"]}),m.jsx("button",{onClick:y,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:m.jsx(pA,{size:24})})]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px",marginBottom:"10px"},children:R.map((N,M)=>m.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"bold",color:M===0?"#ef4444":M===6?"#3b82f6":"var(--text-secondary)"},children:N},M))}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px"},children:T.map((N,M)=>{if(N===null)return m.jsx("div",{},`empty-${M}`);const L=A(N),O=S(N),D=M%7;return m.jsx("button",{onClick:()=>w(N),disabled:a==="month",style:{aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",border:L?"2px solid var(--primary)":"none",borderRadius:"8px",background:O?"var(--primary)":L?"var(--background)":"transparent",color:O?"white":D===0?"#ef4444":D===6?"#3b82f6":"var(--text)",fontSize:"14px",fontWeight:O||L?"bold":"normal",cursor:a==="date"?"pointer":"default",transition:"all 0.2s"},onMouseEnter:j=>{a==="date"&&!O&&(j.currentTarget.style.background="var(--background)")},onMouseLeave:j=>{a==="date"&&!O&&(j.currentTarget.style.background="transparent")},children:N},N)})}),a==="date"&&m.jsx("div",{style:{marginTop:"15px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:r?`選択: ${r.getFullYear()}/${r.getMonth()+1}/${r.getDate()}`:"日付を選択してください"})]})},ime=({isOpen:t,selectedDate:e,onClose:r,onConfirm:n})=>{const[i,a]=Hn.useState(e);if(Hn.useEffect(()=>{a(e)},[e,t]),!t)return null;const o=()=>{n(i),r()};return m.jsx("div",{className:"modal-backdrop",onClick:r,style:{animation:"fadeIn 0.2s ease"},children:m.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),style:{maxWidth:"400px",animation:"slideUp 0.3s ease"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border)"},children:[m.jsx("h3",{style:{margin:0},children:"日付を選択"}),m.jsx("button",{onClick:r,style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:"5px",display:"flex",alignItems:"center"},children:m.jsx(ru,{size:24})})]}),m.jsx(CB,{selectedYear:i.getFullYear(),selectedMonth:i.getMonth()+1,selectedDate:i,onSelectDate:a,mode:"date"}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:r,style:{flex:1,padding:"12px",background:"var(--background)",color:"var(--text)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"キャンセル"}),m.jsxs("button",{onClick:o,className:"submit",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[m.jsx(eF,{size:20}),"決定"]})]})]})})},ame=()=>{const{addExpense:t}=Wa(),[e,r]=C.useState("food"),[n,i]=C.useState(""),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(new Date),[p,g]=C.useState(!1),y=[{value:"food",label:"食費"},{value:"transport",label:"交通費"},{value:"utilities",label:"光熱費"},{value:"entertainment",label:"娯楽"},{value:"health",label:"医療"},{value:"other",label:"その他"}],w=()=>{if(!a||Number(a)<=0){alert("正しい金額を入力してください");return}if(e==="other"&&!n.trim()){alert("カスタムカテゴリ名を入力してください");return}t({category:e,customCategory:e==="other"?n.trim():void 0,amount:Number(a),memo:s||void 0,date:f.toISOString()}),o(""),c(""),i(""),alert("支出を記録しました！")},_=A=>`${A.getFullYear()}年${A.getMonth()+1}月${A.getDate()}日`;return m.jsxs("div",{className:"card",children:[m.jsx("label",{children:"日付"}),m.jsxs("button",{onClick:()=>g(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[m.jsx("span",{children:_(f)}),m.jsx(Tp,{size:20,color:"var(--primary)"})]}),m.jsx("label",{children:"カテゴリ"}),m.jsx("select",{value:e,onChange:A=>r(A.target.value),children:y.map(A=>m.jsx("option",{value:A.value,children:A.label},A.value))}),e==="other"&&m.jsxs(m.Fragment,{children:[m.jsx("label",{children:"カスタムカテゴリ名"}),m.jsx("input",{value:n,onChange:A=>i(A.target.value),placeholder:"例: 趣味、ペット、書籍"})]}),m.jsx("label",{children:"金額(円)"}),m.jsx("input",{type:"number",value:a,onChange:A=>o(A.target.value),placeholder:"1000",min:"0"}),m.jsx("label",{children:"メモ（任意）"}),m.jsx("input",{value:s,onChange:A=>c(A.target.value),placeholder:"例: 昼食"}),m.jsxs("button",{className:"submit",onClick:w,children:[m.jsx(rp,{size:20}),"記録する"]}),m.jsx(ime,{isOpen:p,selectedDate:f,onClose:()=>g(!1),onConfirm:d})]})},KC=({isOpen:t,selectedYear:e,selectedMonth:r,onClose:n,onConfirm:i})=>{if(!t)return null;const a=(o,s)=>{i(o,s),n()};return m.jsx("div",{className:"modal-backdrop",onClick:n,style:{animation:"fadeIn 0.2s ease"},children:m.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),style:{maxWidth:"400px",animation:"slideUp 0.3s ease"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border)"},children:[m.jsx("h3",{style:{margin:0},children:"月を選択"}),m.jsx("button",{onClick:n,style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:"5px",display:"flex",alignItems:"center"},children:m.jsx(ru,{size:24})})]}),m.jsx(CB,{selectedYear:e,selectedMonth:r,onMonthChange:a,mode:"month"}),m.jsx("div",{style:{marginTop:"15px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:"年月をタップして選択してください"})]})})},ome=()=>{const{getTotalByMonth:t}=Wa(),{settings:e}=dv(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,s]=C.useState(!1),c=e.monthlyBudget??3e4,f=t(r,i),d=f/c*100,p=c-f,g=A=>new Intl.NumberFormat("ja-JP").format(A),w=d>=100?{color:"#ef4444",icon:m.jsx(vD,{size:24}),message:"予算超過"}:d>=80?{color:"#f59e0b",icon:m.jsx(fA,{size:24}),message:"予算残りわずか"}:{color:"#10b981",icon:m.jsx(Ip,{size:24}),message:"順調"},_=(A,S)=>{n(A),a(S)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{style:{marginBottom:"15px"},children:"月次予算"}),m.jsxs("button",{onClick:()=>s(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[m.jsxs("span",{children:[r,"年 ",i,"月"]}),m.jsx(Tp,{size:20,color:"var(--primary)"})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"15px",background:"var(--background)",borderRadius:"8px",marginBottom:"20px"},children:[m.jsx("div",{style:{color:w.color},children:w.icon}),m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:"bold",color:w.color},children:w.message}),m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginTop:"4px"},children:p>=0?`残り ¥${g(p)}`:`超過 ¥${g(Math.abs(p))}`})]}),m.jsx("div",{style:{textAlign:"right"},children:m.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:w.color},children:[d.toFixed(1),"%"]})})]}),m.jsxs("div",{style:{background:"var(--background)",borderRadius:"8px",overflow:"hidden",height:"40px",position:"relative",marginBottom:"15px"},children:[m.jsx("div",{style:{background:`linear-gradient(90deg, ${w.color}, ${w.color}dd)`,height:"100%",width:`${Math.min(d,100)}%`,transition:"width 0.3s ease"}}),m.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:"bold",color:d>50?"white":"var(--text)",fontSize:"14px"},children:["¥",g(f)," / ¥",g(c)]})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[m.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"5px"},children:"支出"}),m.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--danger)"},children:["¥",g(f)]})]}),m.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"5px"},children:"予算"}),m.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--primary)"},children:["¥",g(c)]})]})]}),m.jsx(KC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>s(!1),onConfirm:_})]})},pl=["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#6366f1"],iD=["#ec4899","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16","#f43f5e","#0ea5e9","#eab308","#22c55e","#d946ef","#64748b"],TB=t=>{if(!t)return pl[5];let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;const r=Math.abs(e)%iD.length;return iD[r]},IB=t=>({food:pl[0],transport:pl[1],utilities:pl[2],entertainment:pl[3],health:pl[4],other:pl[5]})[t]||pl[5],sme=()=>{const{getTotalByCategory:t,getExpensesByMonth:e}=Wa(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,s]=C.useState(!1),c=[{value:"food",label:"食費"},{value:"transport",label:"交通費"},{value:"utilities",label:"光熱費"},{value:"entertainment",label:"娯楽"},{value:"health",label:"医療"}],f=e(r,i),d=C.useMemo(()=>{const w=new Map;return c.forEach(_=>{const A=t(_.value,r,i);A>0&&w.set(_.value,{name:_.label,value:A,color:IB(_.value)})}),f.forEach(_=>{if(_.category==="other"&&_.customCategory){const A=`custom_${_.customCategory}`,S=w.get(A);S?S.value+=_.amount:w.set(A,{name:_.customCategory,value:_.amount,color:TB(_.customCategory)})}}),Array.from(w.values())},[r,i,f,t]),p=d.reduce((w,_)=>w+_.value,0),g=w=>new Intl.NumberFormat("ja-JP").format(w),y=(w,_)=>{n(w),a(_)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{style:{marginBottom:"15px"},children:"カテゴリ別集計"}),m.jsxs("button",{onClick:()=>s(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[m.jsxs("span",{children:[r,"年 ",i,"月"]}),m.jsx(Tp,{size:20,color:"var(--primary)"})]}),f.length===0?m.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"この月の支出データがありません"}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{background:"var(--background)",padding:"15px",borderRadius:"8px",marginBottom:"20px",textAlign:"center"},children:[m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"5px"},children:"合計支出"}),m.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"var(--danger)"},children:["¥",g(p)]})]}),d.length>0&&m.jsxs(m.Fragment,{children:[m.jsx(vy,{width:"100%",height:250,children:m.jsxs(SB,{children:[m.jsx(NC,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:w=>`${w.name}: ¥${g(w.value)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:d.map((w,_)=>m.jsx(md,{fill:w.color},`cell-${_}`))}),m.jsx(gy,{formatter:w=>`¥${g(w)}`,contentStyle:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px"}}),m.jsx(Qm,{})]})}),m.jsx("div",{style:{marginTop:"20px"},children:d.map((w,_)=>{const A=(w.value/p*100).toFixed(1);return m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:_<d.length-1?"1px solid var(--border)":"none"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",background:w.color}}),m.jsx("span",{children:w.name})]}),m.jsxs("div",{style:{textAlign:"right"},children:[m.jsxs("div",{style:{fontWeight:"bold"},children:["¥",g(w.value)]}),m.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[A,"%"]})]})]},_)})})]})]}),m.jsx(KC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>s(!1),onConfirm:y})]})},lme=()=>{const{deleteExpense:t,getExpensesByMonth:e}=Wa(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,s]=C.useState(!1),c=e(r,i),f={food:"食費",transport:"交通費",utilities:"光熱費",entertainment:"娯楽",health:"医療",other:"その他"},d=A=>A.category==="other"&&A.customCategory?A.customCategory:f[A.category],p=A=>A.category==="other"&&A.customCategory?TB(A.customCategory):IB(A.category),g=A=>{window.confirm("この支出を削除しますか？")&&t(A)},y=A=>{const S=new Date(A);return`${S.getMonth()+1}/${S.getDate()}`},w=A=>new Intl.NumberFormat("ja-JP").format(A),_=(A,S)=>{n(A),a(S)};return m.jsxs("div",{className:"card",children:[m.jsxs("button",{onClick:()=>s(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[m.jsxs("span",{children:[r,"年 ",i,"月"]}),m.jsx(Tp,{size:20,color:"var(--primary)"})]}),c.length===0?m.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"この月の支出はまだありません"}):m.jsx("div",{className:"list",children:c.sort((A,S)=>new Date(S.date).getTime()-new Date(A.date).getTime()).map(A=>m.jsxs("div",{className:"list-item",children:[m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[m.jsx("span",{style:{background:p(A),color:"white",padding:"2px 8px",borderRadius:"4px",fontSize:"12px"},children:d(A)}),m.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:y(A.date)})]}),A.memo&&m.jsx("div",{style:{color:"var(--text)",fontSize:"14px",marginTop:"4px"},children:A.memo})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--danger)"},children:["¥",w(A.amount)]}),m.jsx("button",{className:"delete",onClick:()=>g(A.id),style:{padding:"8px"},children:m.jsx(gu,{size:20})})]})]},A.id))}),m.jsx(KC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>s(!1),onConfirm:_})]})},cme=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"家計簿"}),m.jsx(ome,{}),m.jsx(ame,{}),m.jsx(sme,{}),m.jsx("h3",{children:"支出履歴"}),m.jsx(lme,{})]}),ume={streak:"🔥 連続記録",milestone:"📊 マイルストーン",goal:"🎯 目標達成",feature:"✨ 機能活用"};function fme(){const{badges:t,isUnlocked:e,getUnlockedCount:r,getTotalCount:n}=TE(),i=["streak","milestone","goal","feature"],a=o=>hv.filter(s=>s.category===o);return m.jsxs("div",{className:"badge-list",children:[m.jsxs("div",{className:"badge-summary",children:[m.jsxs("h3",{children:["バッジコレクション"," ",m.jsxs("span",{className:"badge-count",children:[r()," / ",n()]})]}),m.jsx("div",{className:"progress-bar",children:m.jsx("div",{className:"progress-fill",style:{width:`${r()/n()*100}%`}})})]}),i.map(o=>{const s=a(o);return m.jsxs("div",{className:"badge-category",children:[m.jsx("h4",{className:"category-title",children:ume[o]}),m.jsx("div",{className:"badge-grid",children:s.map(c=>{const f=e(c.id),d=t.find(p=>p.id===c.id);return m.jsxs("div",{className:`badge-item ${f?"unlocked":"locked"}`,children:[m.jsx("div",{className:"badge-icon",children:f?c.icon:"🔒"}),m.jsxs("div",{className:"badge-info",children:[m.jsx("div",{className:"badge-name",children:c.name}),m.jsx("div",{className:"badge-description",children:c.description}),!f&&m.jsx("div",{className:"badge-requirement",children:c.requirement}),f&&d?.unlockedAt&&m.jsx("div",{className:"badge-unlocked-date",children:new Date(d.unlockedAt).toLocaleDateString("ja-JP")})]})]},c.id)})})]},o)})]})}function dme(){return m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"🏆 アチーブメント"}),m.jsx("div",{className:"card",children:m.jsx(fme,{})})]})}const hme=({images:t,initialIndex:e=0,onClose:r})=>{const[n,i]=C.useState(e),a=()=>{i(c=>c>0?c-1:t.length-1)},o=()=>{i(c=>c<t.length-1?c+1:0)},s=c=>{c.target===c.currentTarget&&r()};return m.jsxs("div",{onClick:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease-out"},children:[m.jsx("button",{onClick:r,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:m.jsx(ru,{size:28})}),t.length>1&&m.jsxs("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:600,zIndex:1e4},children:[n+1," / ",t.length]}),t.length>1&&m.jsx("button",{onClick:a,style:{position:"absolute",left:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"52px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:m.jsx(bD,{size:32})}),t.length>1&&m.jsx("button",{onClick:o,style:{position:"absolute",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"52px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:m.jsx(pA,{size:32})}),m.jsx("img",{src:t[n],alt:`画像 ${n+1}`,style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",animation:"slideUp 0.3s ease-out"},onClick:c=>c.stopPropagation()})]})},em=({post:t,onPostClick:e,onUserClick:r,onQuoteRepost:n,showPinButton:i=!1,onPinToggle:a})=>{const{user:o}=Xa(),[s,c]=C.useState(!1),[f,d]=C.useState(!1),[p,g]=C.useState(!1),[y,w]=C.useState(t.likes),[_,A]=C.useState(t.repostCount),[S,T]=C.useState(!1),[R,N]=C.useState(!1),[M,L]=C.useState(0),[O,D]=C.useState(null),[j,B]=C.useState(!1);C.useEffect(()=>{(async()=>{if(o)try{const ve=await EM(t.id,o.uid),Ie=await oQ(t.id,o.uid),G=await cQ(t.id,o.uid);c(ve),d(Ie),g(G);const Z=await ya(o.uid);D(Z)}catch(ve){console.error("ステータス確認エラー:",ve)}})()},[t.id,o]);const z=async K=>{if(K.stopPropagation(),!(!o||S||!O))try{T(!0),s?(await AM(t.id,o.uid),c(!1),w(Math.max(0,y-1))):(await _M(t.id,o.uid,O.displayName,O.avatarUrl),c(!0),w(y+1))}catch(ve){console.error("いいね操作エラー:",ve),alert("いいね操作に失敗しました")}finally{T(!1)}},V=K=>{K.stopPropagation(),e(t.id)},F=async K=>{if(K.stopPropagation(),!(!o||S||!O))try{T(!0),p?(await lQ(t.id,o.uid),g(!1),A(Math.max(0,_-1))):(await sQ(t.id,o.uid,O.displayName,O.avatarUrl),g(!0),A(_+1))}catch(ve){console.error("リポスト操作エラー:",ve),alert("リポスト操作に失敗しました")}finally{T(!1)}},he=async K=>{if(K.stopPropagation(),!(!o||S))try{T(!0),f?(await aQ(t.id,o.uid),d(!1)):(await iQ(t.id,o.uid),d(!0))}catch(ve){console.error("ブックマーク操作エラー:",ve),alert("ブックマーク操作に失敗しました")}finally{T(!1)}},_e=K=>{K.stopPropagation(),navigator.share?navigator.share({title:"投稿を共有",text:t.content}).catch(ve=>console.log("Share cancelled:",ve)):alert("この投稿をシェアしました！")},Y=K=>{K.stopPropagation(),n&&n(t.id)},ie=async K=>{if(K.stopPropagation(),!!o)try{T(!0),t.isPinned?(await pQ(o.uid,t.id),alert("ピン留めを解除しました")):(await hQ(o.uid,t.id),alert("投稿をピン留めしました")),B(!1),a&&a()}catch(ve){console.error("ピン留め操作エラー:",ve),alert("ピン留め操作に失敗しました")}finally{T(!1)}};return m.jsxs("div",{className:"post-card",onClick:()=>e(t.id),style:{background:"var(--card)",borderRadius:"12px",padding:"16px",marginBottom:"12px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:K=>{K.currentTarget.style.transform="translateY(-2px)",K.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:K=>{K.currentTarget.style.transform="translateY(0)",K.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[t.isPinned&&m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--primary)",fontSize:"13px",fontWeight:600,marginBottom:"12px"},children:[m.jsx(TI,{size:16}),m.jsx("span",{children:"ピン留めされた投稿"})]}),m.jsxs("div",{onClick:K=>{r&&(K.stopPropagation(),r(t.authorId))},style:{display:"flex",alignItems:"center",marginBottom:"12px",cursor:r?"pointer":"default",padding:"4px",marginLeft:"-4px",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:K=>{r&&(K.currentTarget.style.background="rgba(0, 0, 0, 0.05)")},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:[m.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:t.authorAvatar?`url(${t.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",marginRight:"12px",flexShrink:0}}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"15px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.authorName}),m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:If(t.createdAt)})]}),i&&m.jsxs("div",{style:{marginLeft:"auto",position:"relative"},children:[m.jsx("button",{onClick:K=>{K.stopPropagation(),B(!j)},style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="var(--border)"},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:m.jsx(wD,{size:20})}),j&&m.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"4px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",minWidth:"180px",zIndex:10},children:m.jsxs("button",{onClick:ie,disabled:S,style:{width:"100%",padding:"12px 16px",background:"none",border:"none",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",color:"var(--text)",fontSize:"14px",fontWeight:500,transition:"background 0.2s",opacity:S?.6:1},onMouseEnter:K=>{S||(K.currentTarget.style.background="var(--border)")},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:[m.jsx(TI,{size:18}),m.jsx("span",{children:t.isPinned?"ピン留めを解除":"プロフィールにピン留め"})]})})]})]}),t.replyToUserName&&m.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"8px"},children:[m.jsx("span",{style:{marginRight:"4px"},children:"💬"}),m.jsxs("span",{children:[t.replyToUserName,"さんへの返信"]})]}),m.jsx("div",{style:{color:"var(--text)",fontSize:"15px",lineHeight:"1.5",marginBottom:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.content.split(/(@[a-zA-Z0-9_]+)/g).map((K,ve)=>K.match(/^@[a-zA-Z0-9_]+$/)?m.jsx("span",{onClick:async Ie=>{Ie.stopPropagation();const G=K.substring(1);console.log("Mention clicked:",G);const Z=await wY(G);Z&&r?r(Z):console.warn("User not found:",G)},style:{color:"var(--primary)",cursor:"pointer",fontWeight:600},children:K},ve):K)}),t.recipeData&&m.jsxs("div",{style:{marginBottom:"12px",padding:"16px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",borderRadius:"12px",border:"2px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"20px"},children:"👨‍🍳"}),m.jsx("div",{style:{fontWeight:700,fontSize:"16px",color:"var(--text)"},children:t.recipeData.title}),m.jsx("div",{style:{marginLeft:"auto",padding:"4px 12px",background:"var(--primary)",color:"white",borderRadius:"12px",fontSize:"12px",fontWeight:600},children:t.recipeData.difficulty==="easy"?"簡単":t.recipeData.difficulty==="medium"?"普通":"難しい"})]}),m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"12px"},children:t.recipeData.description}),m.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"13px",color:"var(--text-secondary)",marginBottom:"12px"},children:[m.jsxs("span",{children:["🍽️ ",t.recipeData.servings,"人分"]}),m.jsxs("span",{children:["⏱️ ",t.recipeData.preparationTime+t.recipeData.cookingTime,"分"]})]}),t.recipeData.ingredients&&t.recipeData.ingredients.length>0&&m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)",marginBottom:"8px"},children:"📝 材料"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"var(--text)",lineHeight:"1.8"},children:t.recipeData.ingredients.map((K,ve)=>m.jsx("li",{children:K},ve))})]}),t.recipeData.instructions&&t.recipeData.instructions.length>0&&m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)",marginBottom:"8px"},children:"👨‍🍳 作り方"}),m.jsx("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"var(--text)",lineHeight:"1.8"},children:t.recipeData.instructions.map((K,ve)=>m.jsx("li",{style:{marginBottom:"4px"},children:K},ve))})]})]}),t.quotedPost&&m.jsxs("div",{onClick:K=>{K.stopPropagation(),e(t.quotedPost.id)},style:{marginBottom:"12px",padding:"12px",background:"var(--background)",borderRadius:"12px",border:"1px solid var(--border)",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="var(--border)"},onMouseLeave:K=>{K.currentTarget.style.background="var(--background)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[m.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:t.quotedPost.authorAvatar?`url(${t.quotedPost.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:"var(--text)"},children:t.quotedPost.authorName}),m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:If(t.quotedPost.createdAt)})]}),m.jsx("div",{style:{fontSize:"14px",color:"var(--text)",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",marginBottom:t.quotedPost.recipeData?"8px":"0"},children:t.quotedPost.content}),t.quotedPost.recipeData&&m.jsxs("div",{style:{marginBottom:"8px",padding:"8px",background:"rgba(22, 163, 74, 0.05)",borderRadius:"8px",border:"1px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[m.jsx("span",{style:{fontSize:"14px"},children:"👨‍🍳"}),m.jsx("span",{style:{fontWeight:600,fontSize:"13px",color:"var(--text)"},children:t.quotedPost.recipeData.title})]}),m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:t.quotedPost.recipeData.description})]}),t.quotedPost.images&&t.quotedPost.images.length>0&&m.jsx("div",{style:{marginTop:"8px",width:"100%",paddingBottom:"40%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)"},children:m.jsx("img",{src:t.quotedPost.images[0],alt:"引用元画像",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})})]}),t.images&&t.images.length>0&&m.jsx("div",{style:{display:"grid",gridTemplateColumns:t.images.length===1?"1fr":(t.images.length===2,"repeat(2, 1fr)"),gap:"8px",marginBottom:"16px"},children:t.images.map((K,ve)=>m.jsx("div",{onClick:Ie=>{Ie.stopPropagation(),L(ve),N(!0)},style:{width:"100%",paddingBottom:t.images.length===1?"56.25%":"100%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)",cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:Ie=>{Ie.currentTarget.style.opacity="0.9"},onMouseLeave:Ie=>{Ie.currentTarget.style.opacity="1"},children:m.jsx("img",{src:K,alt:`投稿画像 ${ve+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},ve))}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",paddingTop:"12px",borderTop:"1px solid var(--border)"},children:[m.jsxs("button",{onClick:z,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:s?"#e91e63":"var(--text-secondary)",transition:"background 0.2s, color 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(233, 30, 99, 0.1)"},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:[s?m.jsx(hD,{size:20}):m.jsx(dD,{size:20}),m.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:Tf(y)})]}),m.jsxs("button",{onClick:V,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(33, 150, 243, 0.1)",K.currentTarget.style.color="#2196f3"},onMouseLeave:K=>{K.currentTarget.style.background="none",K.currentTarget.style.color="var(--text-secondary)"},children:[m.jsx(mD,{size:20}),m.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:Tf(t.commentCount)})]}),m.jsxs("button",{onClick:F,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:p?"#4caf50":"var(--text-secondary)",transition:"background 0.2s, color 0.2s",opacity:S?.6:1},onMouseEnter:K=>{K.currentTarget.style.background="rgba(76, 175, 80, 0.1)",p||(K.currentTarget.style.color="#4caf50")},onMouseLeave:K=>{K.currentTarget.style.background="none",p||(K.currentTarget.style.color="var(--text-secondary)")},children:[m.jsx(HU,{size:20}),m.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:Tf(_)})]}),n&&m.jsx("button",{onClick:Y,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s, color 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(76, 175, 80, 0.1)",K.currentTarget.style.color="#4caf50"},onMouseLeave:K=>{K.currentTarget.style.background="none",K.currentTarget.style.color="var(--text-secondary)"},children:m.jsx(QU,{size:20})}),m.jsx("button",{onClick:he,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:f?"#ff9800":"var(--text-secondary)",transition:"background 0.2s, color 0.2s",opacity:S?.6:1},onMouseEnter:K=>{K.currentTarget.style.background="rgba(255, 152, 0, 0.1)",f||(K.currentTarget.style.color="#ff9800")},onMouseLeave:K=>{K.currentTarget.style.background="none",f||(K.currentTarget.style.color="var(--text-secondary)")},children:f?m.jsx(NU,{size:20}):m.jsx(DU,{size:20})}),m.jsx("button",{onClick:_e,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s",marginLeft:"auto"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(158, 158, 158, 0.1)"},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:m.jsx(TD,{size:20})})]}),R&&t.images&&t.images.length>0&&m.jsx(hme,{images:t.images,initialIndex:M,onClose:()=>N(!1)})]})},Wc=()=>m.jsxs("div",{style:{padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)"},children:[m.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--border)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{width:"120px",height:"16px",background:"var(--border)",borderRadius:"4px",marginBottom:"8px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"80px",height:"12px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{width:"100%",height:"12px",background:"var(--border)",borderRadius:"4px",marginBottom:"8px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"80%",height:"12px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}})]}),m.jsx("div",{style:{display:"flex",gap:"16px",marginTop:"12px"},children:[1,2,3,4].map(t=>m.jsx("div",{style:{width:"60px",height:"16px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}},t))}),m.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.5;
          }
        }
      `})]}),pme=({onPostClick:t,onUserClick:e})=>{const{user:r}=Xa(),[n,i]=C.useState([]),[a,o]=C.useState(!0),[s,c]=C.useState(""),[f,d]=C.useState(!1),[p,g]=C.useState(void 0),[y,w]=C.useState("all"),_=async(R=y)=>{o(!0),c("");try{if(R==="following"&&r){console.log("📡 Fetching following posts...");const N=await uQ(r.uid,20);console.log(`✅ Fetched ${N.length} following posts`),i(N)}else{console.log("📡 Fetching timeline posts...");const N=await eQ(20);console.log(`✅ Fetched ${N.length} posts`),i(N)}}catch(N){console.error("❌ 投稿の取得に失敗しました:",N),console.error("Error details:",N.message,N.code),c(N.message||"タイムラインの取得に失敗しました")}finally{o(!1)}};C.useEffect(()=>{_(y)},[y,r]);const A=()=>{_()},S=R=>{g(R),d(!0)},T=()=>{d(!1),g(void 0)};return m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[m.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text)",margin:0},children:"タイムライン"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("button",{onClick:()=>_(),disabled:a,style:{background:"none",border:"none",cursor:a?"not-allowed":"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:R=>{a||(R.currentTarget.style.background="var(--border)")},onMouseLeave:R=>{R.currentTarget.style.background="none"},children:m.jsx(tF,{size:24})}),m.jsx("button",{onClick:()=>d(!0),style:{background:"linear-gradient(135deg, var(--primary), #81c784)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.3)",transition:"transform 0.2s"},onMouseEnter:R=>{R.currentTarget.style.transform="scale(1.05)"},onMouseLeave:R=>{R.currentTarget.style.transform="scale(1)"},children:m.jsx(rp,{size:24})})]})]}),m.jsxs("div",{style:{display:"flex",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:"69px",zIndex:9},children:[m.jsx("button",{onClick:()=>w("all"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:y==="all"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:y==="all"?600:400,color:y==="all"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"すべて"}),m.jsx("button",{onClick:()=>w("following"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:y==="following"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:y==="following"?600:400,color:y==="following"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"フォロー中"})]}),m.jsx("div",{style:{padding:"16px"},children:s?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",background:"#ffebee",borderRadius:"12px",margin:"20px 0"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),m.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#c62828",marginBottom:"8px"},children:"タイムラインの取得に失敗しました"}),m.jsx("div",{style:{fontSize:"14px",color:"#d32f2f",marginBottom:"16px"},children:s}),m.jsx("button",{onClick:()=>_(),style:{padding:"10px 20px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"再試行"})]}):a?m.jsxs("div",{children:[m.jsx(Wc,{}),m.jsx(Wc,{}),m.jsx(Wc,{})]}):n.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:y==="following"?"👥":"📝"}),m.jsx("div",{style:{fontSize:"18px",fontWeight:600,marginBottom:"8px"},children:y==="following"?"フォロー中のユーザーの投稿がありません":"まだ投稿がありません"}),m.jsx("div",{style:{fontSize:"14px",marginBottom:"24px"},children:"最初の投稿をしてみましょう！"}),m.jsxs("button",{onClick:()=>d(!0),style:{padding:"12px 24px",background:"linear-gradient(135deg, var(--primary), #81c784)",color:"white",border:"none",borderRadius:"12px",fontSize:"15px",fontWeight:600,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",transition:"transform 0.2s"},onMouseEnter:R=>{R.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:R=>{R.currentTarget.style.transform="translateY(0)"},children:[m.jsx(rp,{size:20}),"投稿を作成"]})]}):m.jsx("div",{children:n.map(R=>m.jsx(em,{post:R,onPostClick:t,onUserClick:e,onQuoteRepost:S},R.id))})}),f&&m.jsx(SM,{onClose:T,onPostCreated:A,quotedPostId:p})]})},gme=({postId:t,onBack:e,onPostDeleted:r,onUserClick:n})=>{const{user:i}=Xa(),[a,o]=C.useState(null),[s,c]=C.useState([]),[f,d]=C.useState(!0),[p,g]=C.useState(!1),[y,w]=C.useState(0),[_,A]=C.useState(""),[S,T]=C.useState(!1),[R,N]=C.useState(null);C.useEffect(()=>{(async()=>{d(!0);try{const z=await $a(t);if(z){if(o(z),w(z.likes),i){const F=await EM(t,i.uid);g(F);const he=await ya(i.uid);N(he)}const V=await U2(t);c(V)}else alert("投稿が見つかりません"),e()}catch(z){console.error("投稿の取得に失敗しました:",z),alert("投稿の取得に失敗しました"),e()}finally{d(!1)}})()},[t,e,i]);const M=async()=>{if(!(!i||!R))try{p?(await AM(t,i.uid),g(!1),w(Math.max(0,y-1))):(await _M(t,i.uid,R.displayName,R.avatarUrl),g(!0),w(y+1))}catch(B){console.error("いいね操作エラー:",B),alert("いいね操作に失敗しました")}},L=async()=>{if(!(!i||!a||!_.trim()||!R))try{T(!0),await rQ(t,i.uid,R.displayName,_.trim(),R.avatarUrl);const B=await U2(t);c(B),A("")}catch(B){console.error("コメント追加エラー:",B),alert("コメントの追加に失敗しました")}finally{T(!1)}},O=async B=>{if(!(!i||!confirm("このコメントを削除しますか？")))try{await nQ(t,B,i.uid);const z=await U2(t);c(z)}catch(z){console.error("コメント削除エラー:",z),alert("コメントの削除に失敗しました")}},D=async()=>{if(!(!i||!a)&&confirm("この投稿を削除しますか？"))try{await tQ(t,i.uid),alert("投稿を削除しました"),r()}catch(B){console.error("投稿の削除に失敗しました:",B),alert("投稿の削除に失敗しました")}};if(f)return m.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),m.jsx("div",{children:"投稿を読み込んでいます..."})]});if(!a)return null;const j=i&&a.authorId===i.uid;return m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[m.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text)",transition:"background 0.2s"},onMouseEnter:B=>{B.currentTarget.style.background="var(--border)"},onMouseLeave:B=>{B.currentTarget.style.background="none"},children:m.jsx(Rp,{size:24})}),m.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:"投稿"}),j&&m.jsx("button",{onClick:D,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#f44336",transition:"background 0.2s"},onMouseEnter:B=>{B.currentTarget.style.background="#ffebee"},onMouseLeave:B=>{B.currentTarget.style.background="none"},children:m.jsx(gu,{size:24})})]}),m.jsxs("div",{style:{padding:"20px"},children:[m.jsxs("div",{onClick:()=>n(a.authorId),style:{display:"flex",alignItems:"center",marginBottom:"16px",cursor:"pointer",padding:"8px",marginLeft:"-8px",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:B=>{B.currentTarget.style.background="var(--border)"},onMouseLeave:B=>{B.currentTarget.style.background="none"},children:[m.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:a.authorAvatar?`url(${a.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",marginRight:"12px",flexShrink:0}}),m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"16px"},children:a.authorName}),m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:If(a.createdAt)})]})]}),m.jsx("div",{style:{color:"var(--text)",fontSize:"16px",lineHeight:"1.6",marginBottom:"20px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.content}),a.recipeData&&m.jsxs("div",{style:{marginBottom:"20px",padding:"20px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",borderRadius:"12px",border:"2px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[m.jsx("div",{style:{fontSize:"24px"},children:"👨‍🍳"}),m.jsx("div",{style:{fontWeight:700,fontSize:"18px",color:"var(--text)"},children:a.recipeData.title}),m.jsx("div",{style:{marginLeft:"auto",padding:"6px 16px",background:"var(--primary)",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:600},children:a.recipeData.difficulty==="easy"?"簡単":a.recipeData.difficulty==="medium"?"普通":"難しい"})]}),m.jsx("div",{style:{fontSize:"15px",color:"var(--text-secondary)",marginBottom:"12px"},children:a.recipeData.description}),m.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"14px",color:"var(--text-secondary)",marginBottom:"16px"},children:[m.jsxs("span",{children:["🍽️ ",a.recipeData.servings,"人分"]}),m.jsxs("span",{children:["⏱️ ",a.recipeData.preparationTime+a.recipeData.cookingTime,"分"]})]}),a.recipeData.ingredients&&a.recipeData.ingredients.length>0&&m.jsxs("div",{style:{marginBottom:"16px"},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"15px",color:"var(--text)",marginBottom:"10px"},children:"📝 材料"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"var(--text)",lineHeight:"2"},children:a.recipeData.ingredients.map((B,z)=>m.jsx("li",{children:B},z))})]}),a.recipeData.instructions&&a.recipeData.instructions.length>0&&m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,fontSize:"15px",color:"var(--text)",marginBottom:"10px"},children:"👨‍🍳 作り方"}),m.jsx("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"var(--text)",lineHeight:"2"},children:a.recipeData.instructions.map((B,z)=>m.jsx("li",{style:{marginBottom:"8px"},children:B},z))})]})]}),a.quotedPost&&m.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"var(--background)",borderRadius:"12px",border:"1px solid var(--border)"},children:[m.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"12px"},children:"引用元の投稿:"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:a.quotedPost.authorAvatar?`url(${a.quotedPost.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:a.quotedPost.authorName}),m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:If(a.quotedPost.createdAt)})]})]}),m.jsx("div",{style:{fontSize:"15px",color:"var(--text)",lineHeight:"1.5",marginBottom:a.quotedPost.recipeData||a.quotedPost.images&&a.quotedPost.images.length>0?"12px":"0"},children:a.quotedPost.content}),a.quotedPost.recipeData&&m.jsxs("div",{style:{marginBottom:"12px",padding:"12px",background:"rgba(22, 163, 74, 0.05)",borderRadius:"8px",border:"1px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[m.jsx("span",{style:{fontSize:"16px"},children:"👨‍🍳"}),m.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:a.quotedPost.recipeData.title})]}),m.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:a.quotedPost.recipeData.description})]}),a.quotedPost.images&&a.quotedPost.images.length>0&&m.jsx("div",{style:{width:"100%",paddingBottom:"56.25%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)"},children:m.jsx("img",{src:a.quotedPost.images[0],alt:"引用元画像",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})})]}),a.images&&a.images.length>0&&m.jsx("div",{style:{display:"grid",gridTemplateColumns:a.images.length===1?"1fr":(a.images.length===2,"repeat(2, 1fr)"),gap:"12px",marginBottom:"24px"},children:a.images.map((B,z)=>m.jsx("div",{style:{width:"100%",paddingBottom:a.images.length===1?"56.25%":"100%",position:"relative",borderRadius:"12px",overflow:"hidden",background:"var(--border)"},children:m.jsx("img",{src:B,alt:`投稿画像 ${z+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},z))}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"32px",padding:"16px 0",borderTop:"1px solid var(--border)",borderBottom:"1px solid var(--border)"},children:[m.jsxs("button",{onClick:M,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"8px 12px",borderRadius:"12px",color:p?"#e91e63":"var(--text-secondary)",transition:"background 0.2s",fontSize:"16px"},onMouseEnter:B=>{B.currentTarget.style.background="rgba(233, 30, 99, 0.1)"},onMouseLeave:B=>{B.currentTarget.style.background="none"},children:[p?m.jsx(hD,{size:24}):m.jsx(dD,{size:24}),m.jsx("span",{style:{fontWeight:600},children:y})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"16px"},children:[m.jsx(mD,{size:24}),m.jsx("span",{style:{fontWeight:600},children:a.commentCount})]})]}),m.jsxs("div",{style:{marginTop:"24px"},children:[i&&m.jsx("div",{style:{marginBottom:"24px"},children:m.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",padding:"12px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[m.jsx("textarea",{value:_,onChange:B=>A(B.target.value),placeholder:"コメントを入力...",style:{flex:1,padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--background)",color:"var(--text)",fontFamily:"inherit",fontSize:"14px",resize:"vertical",minHeight:"44px",maxHeight:"120px",outline:"none"},onFocus:B=>{B.currentTarget.style.borderColor="var(--primary)"},onBlur:B=>{B.currentTarget.style.borderColor="var(--border)"}}),m.jsx("button",{onClick:L,disabled:S||!_.trim(),style:{background:_.trim()?"var(--primary)":"var(--border)",border:"none",color:_.trim()?"white":"var(--text-secondary)",padding:"12px 16px",borderRadius:"8px",cursor:_.trim()&&!S?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:m.jsx(WU,{size:20})})]})}),m.jsx("div",{style:{marginTop:"20px"},children:s.length>0?m.jsxs("div",{children:[m.jsxs("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:"var(--text)"},children:["コメント (",s.length,")"]}),s.map(B=>m.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",marginBottom:"12px",borderLeft:"2px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"14px"},children:B.userName}),m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:If(B.createdAt)})]}),i&&i.uid===B.userId&&m.jsx("button",{onClick:()=>O(B.id),style:{background:"none",border:"none",color:"#f44336",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",transition:"background 0.2s"},onMouseEnter:z=>{z.currentTarget.style.background="#ffebee"},onMouseLeave:z=>{z.currentTarget.style.background="none"},children:"削除"})]}),m.jsx("div",{style:{color:"var(--text)",fontSize:"14px",lineHeight:"1.5",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:B.content})]},B.id))]}):m.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)",background:"var(--background)",borderRadius:"12px"},children:m.jsx("div",{style:{fontSize:"14px"},children:"コメントはまだありません"})})})]})]})]})},OB=({title:t,users:e,currentUserId:r,onClose:n,onFollowToggle:i,onNavigateToProfile:a})=>m.jsx("div",{className:"modal active",onClick:n,children:m.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{className:"modal-title",children:t}),m.jsx("button",{onClick:n,className:"modal-close",children:"×"})]}),m.jsx("div",{className:"modal-body user-list",style:{padding:"0"},children:e.length>0?e.map(o=>m.jsxs("div",{className:"list-item",style:{padding:"12px 20px"},children:[m.jsx("div",{style:{cursor:"pointer"},onClick:()=>a(o.uid),children:m.jsx("img",{src:o.avatarUrl||"/icon-192.png",alt:o.displayName,style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover"}})}),m.jsxs("div",{className:"list-content",style:{cursor:"pointer"},onClick:()=>a(o.uid),children:[m.jsx("div",{className:"list-title",style:{fontWeight:600},children:o.displayName}),m.jsxs("div",{className:"list-subtitle",children:["@",o.username]})]}),o.uid!==r&&m.jsxs("button",{className:`follow-button ${o.isFollowing?"following":"not-following"}`,onClick:()=>i(o.uid,o.isFollowing||!1),style:{padding:"6px 12px",background:o.isFollowing?"var(--card)":"var(--primary)",border:o.isFollowing?"1px solid var(--border)":"none",borderRadius:"20px",color:o.isFollowing?"var(--text)":"white",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",transition:"all 0.2s",marginLeft:"auto",whiteSpace:"nowrap"},children:[o.isFollowing?m.jsx(SD,{}):m.jsx(ED,{}),o.isFollowing?"Following":"Follow"]})]},o.uid)):m.jsx("div",{className:"empty-state",style:{padding:"40px 20px"},children:m.jsx("p",{className:"empty-text",children:"No users to display."})})})]})}),vme=({userId:t,onClose:e,onNavigateToProfile:r})=>{const{user:n}=Xa(),[i,a]=C.useState([]),[o,s]=C.useState(!0),c=C.useCallback(async()=>{s(!0);try{const p=await _Y(t);a(p)}catch(p){console.error("Failed to fetch followers:",p)}finally{s(!1)}},[t]);C.useEffect(()=>{c()},[c]);const f=async(p,g)=>{if(n)try{g?await RE(n.uid,p):await OE(n.uid,n.displayName||"Anonymous",n.photoURL||void 0,p,i.find(y=>y.uid===p)?.displayName||"User",i.find(y=>y.uid===p)?.avatarUrl||void 0),await c()}catch(y){console.error("Follow/unfollow operation failed:",y),alert("操作に失敗しました。もう一度お試しください。")}},d=p=>{e(),r(p)};return o?m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Followers"}),m.jsx("button",{onClick:e,className:"close-button",children:"×"})]}),m.jsx("div",{className:"modal-body",children:"Loading..."})]})}):m.jsx(OB,{title:"Followers",users:i,currentUserId:n?.uid||"",onClose:e,onFollowToggle:f,onNavigateToProfile:d})},mme=({userId:t,onClose:e,onNavigateToProfile:r})=>{const{user:n}=Xa(),[i,a]=C.useState([]),[o,s]=C.useState(!0),c=C.useCallback(async()=>{s(!0);try{const p=await xM(t);a(p)}catch(p){console.error("Failed to fetch following list:",p)}finally{s(!1)}},[t]);C.useEffect(()=>{c()},[c]);const f=async(p,g)=>{if(n)try{g?await RE(n.uid,p):await OE(n.uid,n.displayName||"Anonymous",n.photoURL||void 0,p,i.find(y=>y.uid===p)?.displayName||"User",i.find(y=>y.uid===p)?.avatarUrl||void 0),await c()}catch(y){console.error("Follow/unfollow operation failed:",y),alert("操作に失敗しました。もう一度お試しください。")}},d=p=>{e(),r(p)};return o?m.jsx("div",{className:"modal-overlay",onClick:e,children:m.jsxs("div",{className:"modal-content",onClick:p=>p.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Following"}),m.jsx("button",{onClick:e,className:"close-button",children:"×"})]}),m.jsx("div",{className:"modal-body",children:"Loading..."})]})}):m.jsx(OB,{title:"Following",users:i,currentUserId:n?.uid||"",onClose:e,onFollowToggle:f,onNavigateToProfile:d})},yme=({userId:t,onBack:e,onPostClick:r,onUserClick:n})=>{const{user:i}=Xa(),[a,o]=C.useState(null),[s,c]=C.useState([]),[f,d]=C.useState(null),[p,g]=C.useState(!0),[y,w]=C.useState(!1),[_,A]=C.useState(null),[S,T]=C.useState(!1),[R,N]=C.useState(!1),[M,L]=C.useState(!1),[O,D]=C.useState("posts"),j=i&&i.uid===t;C.useEffect(()=>{(async()=>{g(!0),A(null);try{const F=await ya(t);if(!F){A("プロフィールが見つかりません");return}if(o(F),i&&i.uid!==t){const he=await PE(i.uid,t);T(he)}}catch(F){console.error("[UserProfileScreen] プロフィールの取得に失敗しました:",F),A(F instanceof Error?F.message:"プロフィールの取得に失敗しました")}finally{g(!1)}})()},[t,i]),C.useEffect(()=>{(async()=>{if(a){w(!0);try{let F=[];switch(O){case"posts":if(F=await wM(t,20),a.pinnedPostId){const he=await $a(a.pinnedPostId);d(he),F=F.filter(_e=>_e.id!==a.pinnedPostId)}else d(null);break;case"media":F=await fQ(t,20),d(null);break;case"likes":F=await dQ(t,20),d(null);break;case"replies":F=await gQ(t,20),d(null);break}c(F)}catch(F){console.error(`[UserProfileScreen] ${O}投稿の取得に失敗しました:`,F)}finally{w(!1)}}})()},[t,O,a]);const B=async()=>{if(!i||!a)return;const V=S,F={...a};T(!S),o({...a,stats:{...a.stats,followerCount:S?a.stats.followerCount-1:a.stats.followerCount+1}});try{V?await RE(i.uid,t):await OE(i.uid,i.displayName||"Anonymous",i.photoURL||void 0,t,a.displayName,a.avatarUrl||void 0)}catch(he){console.error("DUMPING FULL FOLLOW/UNFOLLOW ERROR:",he),T(V),o(F),alert(`フォロー操作に失敗しました.

エラー: ${he.message||"不明なエラー"}`)}},z=async()=>{try{const V=await ya(t);V&&o(V)}catch(V){console.error("[UserProfileScreen] プロフィールの再取得に失敗:",V)}};return p?m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)"},children:[m.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"var(--border)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"120px",height:"18px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"24px"}})]}),m.jsx("div",{style:{width:"100%",height:"150px",background:"var(--border)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsxs("div",{style:{padding:"0 20px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",marginTop:"-40px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--border)",border:"4px solid var(--card)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"100px",height:"32px",background:"var(--border)",borderRadius:"20px",animation:"pulse 1.5s ease-in-out infinite"}})]}),m.jsx("div",{style:{width:"150px",height:"20px",background:"var(--border)",borderRadius:"4px",marginBottom:"8px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"100px",height:"14px",background:"var(--border)",borderRadius:"4px",marginBottom:"16px",animation:"pulse 1.5s ease-in-out infinite"}})]}),m.jsxs("div",{style:{marginTop:"20px"},children:[m.jsx(Wc,{}),m.jsx(Wc,{})]}),m.jsx("style",{children:"@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }"})]}):_||!a?m.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),m.jsx("div",{style:{fontSize:"16px",color:"var(--text)",marginBottom:"16px"},children:_||"プロフィールが見つかりません"}),m.jsx("button",{onClick:e,style:{padding:"10px 20px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"戻る"})]}):m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[m.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text)",transition:"background 0.2s"},onMouseEnter:V=>{V.currentTarget.style.background="var(--border)"},onMouseLeave:V=>{V.currentTarget.style.background="none"},children:m.jsx(Rp,{size:24})}),m.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:a.displayName}),m.jsx("div",{style:{width:"40px"}})]}),m.jsx("div",{style:{width:"100%",height:"150px",background:a.coverUrl?`url(${a.coverUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsxs("div",{style:{padding:"0 20px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",marginTop:"-40px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:a.avatarUrl?`url(${a.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",border:"4px solid var(--card)"}}),j?m.jsxs("div",{style:{padding:"8px 16px",background:"var(--card)",border:"2px solid var(--border)",borderRadius:"20px",color:"var(--text-secondary)",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx(xD,{size:14}),"設定画面から編集できます"]}):m.jsx("button",{onClick:B,style:{padding:"8px 16px",background:S?"var(--card)":"var(--primary)",border:S?"2px solid var(--border)":"none",borderRadius:"20px",color:S?"var(--text)":"white",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:S?m.jsxs(m.Fragment,{children:[m.jsx(SD,{size:16})," フォロー中"]}):m.jsxs(m.Fragment,{children:[m.jsx(ED,{size:16})," フォロー"]})})]}),m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"var(--text)",marginBottom:"4px"},children:a.displayName}),m.jsxs("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:["@",a.username]})]}),a.bio&&m.jsx("div",{style:{fontSize:"14px",color:"var(--text)",lineHeight:"1.5",marginBottom:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.bio}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginBottom:"12px"},children:[a.websiteUrl&&m.jsxs("a",{href:a.websiteUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"var(--primary)",textDecoration:"none"},children:[m.jsx(yD,{size:16}),a.websiteUrl.startsWith("https://")?a.websiteUrl.substring(8):a.websiteUrl.startsWith("http://")?a.websiteUrl.substring(7):a.websiteUrl]}),m.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"var(--text-secondary)"},children:[m.jsx(Tp,{size:16}),XY(a.createdAt)]})]}),m.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px 0",borderBottom:"1px solid var(--border)"},children:[m.jsxs("div",{children:[m.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:Tf(a.stats.postCount)}),m.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"投稿"})]}),m.jsxs("div",{onClick:()=>N(!0),style:{cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:V=>{V.currentTarget.style.background="var(--border)"},onMouseLeave:V=>{V.currentTarget.style.background="transparent"},children:[m.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:Tf(a.stats.followerCount)}),m.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"フォロワー"})]}),m.jsxs("div",{onClick:()=>L(!0),style:{cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:V=>{V.currentTarget.style.background="var(--border)"},onMouseLeave:V=>{V.currentTarget.style.background="transparent"},children:[m.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:Tf(a.stats.followingCount)}),m.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"フォロー中"})]})]})]}),m.jsxs("div",{style:{display:"flex",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:"69px",zIndex:9},children:[m.jsx("button",{onClick:()=>D("posts"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:O==="posts"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:O==="posts"?600:400,color:O==="posts"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"投稿"}),m.jsx("button",{onClick:()=>D("replies"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:O==="replies"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:O==="replies"?600:400,color:O==="replies"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"返信"}),m.jsx("button",{onClick:()=>D("media"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:O==="media"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:O==="media"?600:400,color:O==="media"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"メディア"}),m.jsx("button",{onClick:()=>D("likes"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:O==="likes"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:O==="likes"?600:400,color:O==="likes"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"いいね"})]}),m.jsx("div",{style:{marginTop:"0"},children:y?m.jsxs("div",{children:[m.jsx(Wc,{}),m.jsx(Wc,{})]}):s.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:O==="media"?"📷":O==="likes"?"❤️":O==="replies"?"💬":"📝"}),m.jsxs("div",{style:{fontSize:"16px"},children:[O==="posts"&&(j?"まだ投稿がありません":"このユーザーはまだ投稿していません"),O==="replies"&&(j?"返信はまだありません":"このユーザーはまだ返信していません"),O==="media"&&(j?"画像付き投稿はまだありません":"このユーザーはまだ画像を投稿していません"),O==="likes"&&(j?"まだいいねした投稿がありません":"このユーザーのいいねは非公開です")]})]}):m.jsxs("div",{children:[O==="posts"&&f&&m.jsx(em,{post:f,onPostClick:r,onUserClick:n,showPinButton:!!j,onPinToggle:z},f.id),s.map(V=>m.jsx(em,{post:V,onPostClick:r,onUserClick:n,showPinButton:!!j&&O==="posts",onPinToggle:z},V.id))]})}),R&&m.jsx(vme,{userId:t,onClose:()=>N(!1),onNavigateToProfile:n}),M&&m.jsx(mme,{userId:t,onClose:()=>L(!1),onNavigateToProfile:n})]})},xme=async(t,e=20)=>{try{if(!t.trim())return[];const r=ze(pe,"users"),n=[],i=mt(r,Or("username",">=",t.toLowerCase()),Or("username","<=",t.toLowerCase()+""),Ha(e)),a=await dt(i);for(const c of a.docs){const f=await dt(ze(c.ref,"profile"));if(!f.empty){const d=f.docs[0].data();n.push(d)}}const o=mt(r,Or("displayName",">=",t),Or("displayName","<=",t+""),Ha(e)),s=await dt(o);for(const c of s.docs){const f=await dt(ze(c.ref,"profile"));if(!f.empty){const d=f.docs[0].data();n.find(p=>p.uid===d.uid)||n.push(d)}}return n.slice(0,e)}catch(r){return console.error("ユーザー検索エラー:",r),[]}},bme=async(t,e=20)=>{try{if(!t.trim())return[];const r=ze(pe,"posts"),n=mt(r,Or("visibility","==","public"),Rr("createdAt","desc"),Ha(100)),i=await dt(n),a=[];return i.forEach(o=>{const s=o.data(),c={id:o.id,content:s.content,images:s.images||[],authorId:s.authorId,authorName:s.authorName,authorAvatar:s.authorAvatar||"",likes:s.likes||0,commentCount:s.commentCount||0,repostCount:s.repostCount||0,hashtags:s.hashtags||[],visibility:s.visibility,createdAt:s.createdAt?.toDate?.()?.toISOString()||s.createdAt,updatedAt:s.updatedAt?.toDate?.()?.toISOString()||s.updatedAt},f=t.toLowerCase();(c.content.toLowerCase().includes(f)||c.authorName.toLowerCase().includes(f))&&a.push(c)}),a.slice(0,e)}catch(r){return console.error("投稿検索エラー:",r),[]}},aD=async(t,e=20)=>{try{if(!t.trim())return[];const r=t.startsWith("#")?t.slice(1):t,n=ze(pe,"posts"),i=mt(n,Or("visibility","==","public"),Or("hashtags","array-contains",r),Rr("createdAt","desc"),Ha(e)),a=await dt(i),o=[];return a.forEach(s=>{const c=s.data();o.push({id:s.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,hashtags:c.hashtags||[],visibility:c.visibility,createdAt:c.createdAt?.toDate?.()?.toISOString()||c.createdAt,updatedAt:c.updatedAt?.toDate?.()?.toISOString()||c.updatedAt})}),o}catch(r){return console.error("ハッシュタグ検索エラー:",r),[]}},wme=t=>{const e=["の","に","は","を","た","が","で","て","と","し","れ","さ","ある","いる","も","する","から","な","こと","として","い","や","れる","など","なっ","ない","この","ため","その","あっ","よう","また","もの","という","あり","まで","られ","なる","へ","か","だ","これ","によって","により","おり","より","による","ず","なり","られる","において","ば","なかっ","なく","しかし","について","せ","だっ","その後","できる","それ","う","ので","なお","のみ","でき","き","つ","における","および","いう","さらに","でも","ら","たり","その他","に関する","たち","ます","ん","なら","に対して","特に","せる","及び","これら","とき","では","にて","ほか","ながら","うち","そして","とも","として","のか","のに","ほど","ものの","という","ところ","による","もん","です","ました","でした","ある","いる","する","なる","くる","やる","いく","できる","なら","だろ","でしょ","です","ます","ません","ましょ","なり","たい","たら","なくて","なけれ"];let r=t.replace(/https?:\/\/[^\s]+/g,"");r=r.replace(/@[a-zA-Z0-9_]+/g,""),r=r.replace(/#[^\s]+/g,""),r=r.replace(/[!-/:-@[-`{-~、。！？「」『』（）]/g," ");const n=r.split(/\s+/).filter(c=>c.length>0),i=[],a=/[ぁ-んァ-ヶー一-龠々]+/g,o=r.match(a);o&&o.forEach(c=>{c.length>=2&&(e.includes(c)||i.push(c))});const s=n.filter(c=>c.match(/^[a-zA-Z0-9]+$/)&&c.length>=3);return[...i,...s]},_me=async(t=10)=>{try{const e=ze(pe,"posts"),r=mt(e,Or("visibility","==","public"),Rr("createdAt","desc"),Ha(200)),n=await dt(r),i={};return n.forEach(o=>{const s=o.data();(s.hashtags||[]).forEach(p=>{i[`#${p}`]=(i[`#${p}`]||0)+2});const f=s.content||"";wme(f).forEach(p=>{i[p]=(i[p]||0)+1})}),Object.entries(i).map(([o,s])=>({tag:o,count:s})).sort((o,s)=>s.count-o.count).slice(0,t)}catch(e){return console.error("トレンドキーワード取得エラー:",e),[]}},Ame=({onPostClick:t,onUserClick:e})=>{const[r,n]=C.useState(""),[i,a]=C.useState("all"),[o,s]=C.useState([]),[c,f]=C.useState([]),[d,p]=C.useState([]),[g,y]=C.useState(!1);C.useEffect(()=>{(async()=>{const S=await _me(10);p(S)})()},[]);const w=async()=>{if(r.trim()){y(!0);try{if(r.startsWith("#")){const A=await aD(r,20);f(A),s([]),a("hashtags")}else{const[A,S]=await Promise.all([xme(r,10),bme(r,20)]);s(A),f(S),a("all")}}catch(A){console.error("検索エラー:",A)}finally{y(!1)}}},_=async A=>{n(`#${A}`),y(!0);try{const S=await aD(A,20);f(S),s([]),a("hashtags")}catch(S){console.error("ハッシュタグ検索エラー:",S)}finally{y(!1)}};return m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsx("div",{style:{padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",background:"var(--background)",padding:"12px 16px",borderRadius:"24px",border:"1px solid var(--border)"},children:[m.jsx(uA,{size:24,style:{color:"var(--text-secondary)"}}),m.jsx("input",{type:"text",placeholder:"ユーザー、投稿、#ハッシュタグを検索",value:r,onChange:A=>n(A.target.value),onKeyDown:A=>{A.key==="Enter"&&w()},style:{flex:1,border:"none",background:"none",outline:"none",color:"var(--text)",fontSize:"15px",fontFamily:"inherit"}}),m.jsx("button",{onClick:w,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"16px",padding:"6px 16px",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:A=>{A.currentTarget.style.opacity="0.9"},onMouseLeave:A=>{A.currentTarget.style.opacity="1"},children:"検索"})]})}),r&&m.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--card)"},children:["all","users","posts","hashtags"].map(A=>m.jsxs("button",{onClick:()=>a(A),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:i===A?"2px solid var(--primary)":"2px solid transparent",color:i===A?"var(--primary)":"var(--text-secondary)",fontWeight:i===A?600:400,cursor:"pointer",transition:"all 0.2s",fontSize:"15px"},children:[A==="all"&&"すべて",A==="users"&&"ユーザー",A==="posts"&&"投稿",A==="hashtags"&&"ハッシュタグ"]},A))}),g&&m.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),m.jsx("div",{children:"検索中..."})]}),!g&&r&&m.jsxs("div",{style:{padding:"20px"},children:[(i==="all"||i==="users")&&o.length>0&&m.jsxs("div",{style:{marginBottom:"32px"},children:[m.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Df,{size:24}),"ユーザー (",o.length,")"]}),o.map(A=>m.jsxs("div",{onClick:()=>e(A.uid),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"var(--card)",borderRadius:"12px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:A.avatarUrl?`url(${A.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"15px"},children:A.displayName}),m.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:["@",A.username]}),A.bio&&m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginTop:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:A.bio})]})]},A.uid))]}),(i==="all"||i==="posts"||i==="hashtags")&&c.length>0&&m.jsxs("div",{children:[m.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(PU,{size:24}),"投稿 (",c.length,")"]}),c.map(A=>m.jsx(em,{post:A,onPostClick:t,onUserClick:e},A.id))]}),o.length===0&&c.length===0&&m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"検索結果が見つかりません"}),m.jsx("div",{style:{fontSize:"14px"},children:"別のキーワードで試してみてください"})]})]}),!r&&!g&&m.jsxs("div",{style:{padding:"20px"},children:[m.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(fA,{size:24}),"トレンド"]}),d.map((A,S)=>m.jsxs("div",{onClick:()=>_(A.tag),style:{padding:"16px",background:"var(--card)",borderRadius:"12px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:T=>{T.currentTarget.style.transform="translateY(-2px)",T.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:T=>{T.currentTarget.style.transform="translateY(0)",T.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"4px"},children:[S+1,"位・トレンド"]}),m.jsxs("div",{style:{fontSize:"16px",fontWeight:600,color:"var(--text)",marginBottom:"4px"},children:["#",A.tag]}),m.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[A.count,"件の投稿"]})]},A.tag))]})]})},Eme=({onNavigateToPost:t,onNavigateToProfile:e})=>{const{user:r}=Xa(),[n,i]=C.useState([]),[a,o]=C.useState(!0),[s,c]=C.useState(!1);C.useEffect(()=>{if(!r)return;const g=gY(r.uid,y=>{i(fY(y)),o(!1)});return()=>g()},[r]);const f=async g=>{if(r){if(!g.isRead)try{await dY(r.uid,g.latestNotification.id)}catch(y){console.error("Error marking notification as read:",y)}g.type==="follow"?g.actors.length===1&&e&&e(g.actors[0].id):g.postId&&t&&t(g.postId)}},d=async()=>{if(r)try{await hY(r.uid),c(!1)}catch(g){console.error("Error marking all as read:",g),alert("エラーが発生しました")}},p=async()=>{if(r&&confirm("全ての通知を削除しますか？"))try{await pY(r.uid),c(!1)}catch(g){console.error("Error deleting all notifications:",g),alert("エラーが発生しました")}};return a?m.jsx("div",{style:{padding:"20px",textAlign:"center"},children:m.jsx("p",{style:{color:"var(--text-secondary)"},children:"読み込み中..."})}):n.length===0?m.jsxs("div",{style:{padding:"60px 20px",textAlign:"center"},children:[m.jsx(_D,{size:64,style:{color:"var(--text-secondary)",marginBottom:"16px"}}),m.jsx("h2",{style:{color:"var(--text)",marginBottom:"8px"},children:"通知はありません"}),m.jsx("p",{style:{color:"var(--text-secondary)"},children:"いいねやコメント、フォローなどの通知がここに表示されます"})]}):m.jsxs("div",{style:{minHeight:"100vh"},children:[m.jsxs("div",{style:{position:"sticky",top:0,background:"var(--background)",borderBottom:"1px solid var(--border)",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:10},children:[m.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"bold"},children:"通知"}),m.jsxs("div",{style:{position:"relative"},children:[m.jsx("button",{onClick:()=>c(!s),style:{background:"transparent",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text)"},onMouseEnter:g=>{g.currentTarget.style.background="var(--hover)"},onMouseLeave:g=>{g.currentTarget.style.background="transparent"},children:m.jsx(wD,{size:24})}),s&&m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>c(!1)}),m.jsxs("div",{style:{position:"absolute",top:"100%",right:0,background:"var(--card)",border:"1px solid var(--border)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",minWidth:"200px",zIndex:1e3,overflow:"hidden"},children:[m.jsxs("button",{onClick:d,style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",color:"var(--text)",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:g=>{g.currentTarget.style.background="var(--hover)"},onMouseLeave:g=>{g.currentTarget.style.background="transparent"},children:[m.jsx(Ip,{size:20}),"すべて既読にする"]}),m.jsxs("button",{onClick:p,style:{width:"100%",padding:"12px 16px",background:"transparent",border:"none",textAlign:"left",cursor:"pointer",color:"#ef4444",display:"flex",alignItems:"center",gap:"12px"},onMouseEnter:g=>{g.currentTarget.style.background="var(--hover)"},onMouseLeave:g=>{g.currentTarget.style.background="transparent"},children:[m.jsx(gu,{size:20}),"すべて削除"]})]})]})]})]}),m.jsx("div",{children:n.map(g=>m.jsx("div",{onClick:()=>f(g),style:{padding:"16px",borderBottom:"1px solid var(--border)",cursor:"pointer",background:g.isRead?"transparent":"rgba(29, 155, 240, 0.05)",transition:"background 0.2s"},onMouseEnter:y=>{y.currentTarget.style.background=g.isRead?"var(--hover)":"rgba(29, 155, 240, 0.1)"},onMouseLeave:y=>{y.currentTarget.style.background=g.isRead?"transparent":"rgba(29, 155, 240, 0.05)"},children:m.jsxs("div",{style:{display:"flex",gap:"12px"},children:[m.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",flexShrink:0},children:vY(g.type)}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[g.actors.length<=3?m.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:g.actors.map(y=>m.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:y.avatar?`url(${y.avatar})`:"var(--primary)",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"bold",border:"2px solid var(--background)"},children:!y.avatar&&y.name.charAt(0).toUpperCase()},y.id))}):m.jsxs("div",{style:{display:"flex",gap:"4px",marginBottom:"8px"},children:[g.actors.slice(0,3).map(y=>m.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:y.avatar?`url(${y.avatar})`:"var(--primary)",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"bold",border:"2px solid var(--background)"},children:!y.avatar&&y.name.charAt(0).toUpperCase()},y.id)),g.count>3&&m.jsxs("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--text-secondary)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold"},children:["+",g.count-3]})]}),m.jsx("p",{style:{margin:"0 0 8px 0",color:"var(--text)",fontSize:"15px"},children:mY(g)}),g.latestNotification.postContent&&m.jsx("p",{style:{margin:"0 0 8px 0",color:"var(--text-secondary)",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.latestNotification.postContent}),g.latestNotification.commentContent&&m.jsxs("p",{style:{margin:"0 0 8px 0",color:"var(--text-secondary)",fontSize:"14px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["💬 ",g.latestNotification.commentContent]}),m.jsx("p",{style:{margin:0,color:"var(--text-secondary)",fontSize:"13px"},children:If(g.latestNotification.createdAt)})]})]})},`${g.type}_${g.postId||g.actors[0].id}_${g.latestNotification.id}`))})]})},Sme=()=>{const[t,e]=C.useState("timeline"),[r,n]=C.useState("main"),[i,a]=C.useState(null),[o,s]=C.useState(null),c=g=>{a(g),n("post-detail")},f=g=>{s(g),n("profile")},d=()=>{n("main"),a(null),s(null)},p=()=>{n("main"),a(null)};return r==="profile"&&o?m.jsx(yme,{userId:o,onBack:d,onPostClick:c,onUserClick:f}):r==="post-detail"&&i?m.jsx(gme,{postId:i,onBack:d,onPostDeleted:p,onUserClick:f}):m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--card)",position:"sticky",top:0,zIndex:10},children:[m.jsxs("button",{onClick:()=>e("timeline"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="timeline"?"2px solid var(--primary)":"2px solid transparent",color:t==="timeline"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="timeline"?600:400},children:[m.jsx(LU,{size:20}),"タイムライン"]}),m.jsxs("button",{onClick:()=>e("search"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="search"?"2px solid var(--primary)":"2px solid transparent",color:t==="search"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="search"?600:400},children:[m.jsx(uA,{size:20}),"検索"]}),m.jsxs("button",{onClick:()=>e("notifications"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="notifications"?"2px solid var(--primary)":"2px solid transparent",color:t==="notifications"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="notifications"?600:400},children:[m.jsx(_D,{size:20}),"通知"]})]}),t==="timeline"&&m.jsx(pme,{onPostClick:c,onUserClick:f}),t==="search"&&m.jsx(Ame,{onPostClick:c,onUserClick:f}),t==="notifications"&&m.jsx(Eme,{onNavigateToPost:c,onNavigateToProfile:f})]})},Cme=({onBack:t})=>{const{user:e}=Xa(),[r,n]=C.useState(!1),[i,a]=C.useState(!0),[o,s]=C.useState(null),[c,f]=C.useState(null),d=vE(),p=t_(d,"deleteAllPosts"),g=t_(d,"deleteAllFollows");C.useEffect(()=>{(async()=>{if(!e){n(!1),a(!1);return}try{const A=await ya(e.uid);A&&A.username==="haachan"?n(!0):n(!1)}catch(A){console.error("Error checking admin status:",A),n(!1)}finally{a(!1)}})()},[e]);const y=async()=>{if(window.confirm("本当にすべての投稿を削除しますか？この操作は元に戻せません。")){s(null),f(null);try{const _=await p();s(`すべての投稿が削除されました: ${JSON.stringify(_.data)}`)}catch(_){console.error("Error deleting all posts:",_),f(`投稿の削除に失敗しました: ${_.message||"不明なエラー"}`)}}},w=async()=>{if(window.confirm("本当にすべてのフォロー関係を削除しますか？この操作は元に戻せません。")){s(null),f(null);try{const _=await g();s(`すべてのフォロー関係が削除されました: ${JSON.stringify(_.data)}`)}catch(_){console.error("Error deleting all follows:",_),f(`フォロー関係の削除に失敗しました: ${_.message||"不明なエラー"}`)}}};return i?m.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading admin panel..."}):r?m.jsxs("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[m.jsx("h2",{style:{fontSize:"24px",marginBottom:"20px",color:"var(--text)"},children:"管理者パネル"}),o&&m.jsx("div",{style:{background:"#d4edda",color:"#155724",padding:"10px",borderRadius:"5px",marginBottom:"15px"},children:o}),c&&m.jsx("div",{style:{background:"#f8d7da",color:"#721c24",padding:"10px",borderRadius:"5px",marginBottom:"15px"},children:c}),m.jsx("button",{onClick:y,style:{width:"100%",padding:"15px",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"18px",cursor:"pointer",marginBottom:"10px"},children:"すべての投稿を削除"}),m.jsx("button",{onClick:w,style:{width:"100%",padding:"15px",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"18px",cursor:"pointer"},children:"すべてのフォロー関係を削除"}),m.jsx("button",{onClick:t,style:{width:"100%",padding:"15px",background:"var(--background)",color:"var(--text)",border:"1px solid var(--border)",borderRadius:"5px",fontSize:"18px",cursor:"pointer",marginTop:"20px"},children:"戻る"})]}):m.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"管理者権限がありません。"})},Tme=()=>{const[t,e]=C.useState("home"),r=i=>({home:"健康家計アプリ",meals:"食事記録",barcode:"バーコードスキャン",report:"レポート",social:"ソーシャル",settings:"設定",stock:"在庫管理",shopping:"買い物リスト",recipe:"AIレシピ",expense:"家計簿",badges:"アチーブメント",admin:"管理者パネル"})[i],n=()=>{switch(t){case"home":return m.jsx(v6,{onNavigate:e});case"meals":return m.jsx(oY,{});case"barcode":return m.jsx(hte,{onNavigateToStock:()=>e("stock")});case"report":return m.jsx(nme,{});case"social":return m.jsx(Sme,{});case"settings":return m.jsx(TY,{});case"stock":return m.jsx(DY,{});case"shopping":return m.jsx(UY,{});case"recipe":return m.jsx(vQ,{});case"expense":return m.jsx(cme,{});case"badges":return m.jsx(dme,{});case"admin":return m.jsx(Cme,{onBack:()=>e("home")});default:return m.jsx(v6,{onNavigate:e})}};return m.jsxs(m.Fragment,{children:[m.jsx(xU,{title:r(t),onNavigate:e}),m.jsx("main",{children:n()}),m.jsx(iF,{currentScreen:t,onNavigate:e})]})};function Ime(t){return Ae({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}const Ome="modulepreload",Rme=function(t){return"/life-pwa-react/"+t},oD={},Qf=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var o=f;document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");i=f(r.map(d=>{if(d=Rme(d),d in oD)return;oD[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Ome,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((w,_)=>{y.addEventListener("load",w),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},tm=()=>Math.floor(1e5+Math.random()*9e5).toString(),rm=async(t,e)=>{const r=ke(ze(pe,"verificationCodes"),t),n=new Date;n.setMinutes(n.getMinutes()+10),await Kl(r,{code:e,email:t,expiresAt:n.toISOString(),createdAt:new Date().toISOString()})},RB=async(t,e)=>{try{const r=ke(ze(pe,"verificationCodes"),t),n=await wi(r);if(!n.exists())return{valid:!1,error:"確認コードが見つかりません。再送信してください。"};const i=n.data();return new Date(i.expiresAt)<new Date?(await Vi(r),{valid:!1,error:"確認コードの有効期限が切れています。再送信してください。"}):i.code!==e?{valid:!1,error:"確認コードが正しくありません。"}:(await Vi(r),{valid:!0})}catch(r){return console.error("Code verification error:",r),{valid:!1,error:"確認に失敗しました。もう一度お試しください。"}}},sD=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Qf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>mE);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Qf(async()=>{const{default:c}=await Promise.resolve().then(()=>CE);return{default:c}},void 0),a=r(i),s=await n(a,"sendVerificationEmail")({email:t,code:e});console.log(`✅ Verification email sent to ${t}`,s)}catch(r){throw console.error("Failed to send email via Cloud Functions:",r),console.log(`
====================================
🥗💰 健康家計アプリ - メール確認コード
====================================

こんにちは！

健康家計アプリへのご登録ありがとうございます。

以下の確認コードを入力して、メールアドレスの確認を完了してください：

確認コード: ${e}

※ このコードは10分間有効です。
※ このメールに心当たりがない場合は、無視していただいて構いません。

━━━━━━━━━━━━━━━━━━━━━━━━
健康家計アプリについて
━━━━━━━━━━━━━━━━━━━━━━━━

AIが健康をサポートする生活管理アプリです。

主な機能：
✓ 食事記録とカロリー管理
✓ AIレシピ生成
✓ 家計簿機能
✓ 在庫管理
✓ バーコードスキャン
✓ レシートOCR（自動読み取り）

━━━━━━━━━━━━━━━━━━━━━━━━

© 2025 健康家計アプリ
https://haradakouta.github.io/life-pwa-react/

====================================
    `),alert(`【開発モード】Cloud Function未設定です。
確認コードをコンソールに表示しました:

確認コード: ${e}

このコードを入力してください。`),new Error("メール送信に失敗しました。コンソールで確認コードを確認してください。")}},lD=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Qf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>mE);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Qf(async()=>{const{default:c}=await Promise.resolve().then(()=>CE);return{default:c}},void 0),a=r(i),s=await n(a,"sendPasswordResetEmail")({email:t,code:e});console.log(`✅ Password reset email sent to ${t}`,s)}catch(r){console.error("Failed to send password reset email via Cloud Functions:",r),console.log(`
====================================
🥗💰 健康家計アプリ - パスワードリセット
====================================

こんにちは！

パスワードのリセットをリクエストいただきありがとうございます。

以下の確認コードを入力して、パスワードのリセットを完了してください：

確認コード: ${e}

※ このコードは10分間有効です。
※ このメールに心当たりがない場合は、無視していただいて構いません。

━━━━━━━━━━━━━━━━━━━━━━━━

© 2025 健康家計アプリ
https://haradakouta.github.io/life-pwa-react/

====================================
    `),alert(`【開発モード】Cloud Function未設定です。
確認コードをコンソールに表示しました:

確認コード: ${e}

このコードを入力してください。`)}},Pme=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Qf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>mE);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Qf(async()=>{const{default:c}=await Promise.resolve().then(()=>CE);return{default:c}},void 0),a=r(i),s=await n(a,"resetPassword")({email:t,newPassword:e});return console.log(`✅ Password reset successful for ${t}`,s),{success:!0}}catch(r){return console.error("Failed to reset password via Cloud Functions:",r),{success:!1,error:r.message||"パスワードのリセットに失敗しました"}}},Dme=({onBack:t})=>{const[e,r]=C.useState("email"),[n,i]=C.useState(""),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(""),[y,w]=C.useState(!1),[_,A]=C.useState(""),S=async M=>{M.preventDefault(),A(""),w(!0);try{const L=tm();await rm(n,L),await sD(n,L),console.log("✅ 確認コードを送信しました:",n),r("code")}catch(L){console.error("Email send error:",L),A(L.message||"確認コードの送信に失敗しました")}finally{w(!1)}},T=async M=>{M.preventDefault(),A(""),w(!0);try{const L=await RB(n,a);if(!L.valid){A(L.error||"確認コードが正しくありません"),w(!1);return}console.log("✅ 確認コードが正しいです"),r("profile")}catch(L){A(L.message||"確認に失敗しました")}finally{w(!1)}},R=async M=>{if(M.preventDefault(),A(""),f!==p){A("パスワードが一致しません");return}if(f.length<6){A("パスワードは6文字以上で入力してください");return}if(!s.trim()){A("ユーザー名を入力してください");return}w(!0);try{const O=(await nW(Je,n,f)).user;await Uk(O,{displayName:s}),console.log("🔄 認証トークンをリフレッシュ中..."),await O.getIdToken(!0),await new Promise(z=>setTimeout(z,2e3));let D=!1,j=0;const B=3;for(;!D&&j<B;)try{console.log(`📝 プロフィール作成試行 ${j+1}/${B}...`),await IE(O.uid,n,s),D=!0,console.log("✅ アカウント作成完了:",O.uid)}catch(z){if(j++,console.error(`❌ プロフィール作成失敗（試行 ${j}/${B}）:`,z),j<B){const V=1e3*Math.pow(2,j);console.log(`⏳ ${V}ms 待機してリトライします...`),await new Promise(F=>setTimeout(F,V)),await O.getIdToken(!0)}else console.error("❌ プロフィール作成に失敗しました（最大リトライ回数超過）"),alert(`注意: プロフィール作成に失敗しました。設定画面からプロフィールを作成してください。

エラー: `+(z.message||z.code||"不明なエラー"))}t()}catch(L){console.error("Registration error:",L);let O="アカウント作成に失敗しました";L.code==="auth/email-already-in-use"?O="このメールアドレスは既に使用されています":L.code==="auth/invalid-email"?O="メールアドレスの形式が正しくありません":L.code==="auth/weak-password"&&(O="パスワードが弱すぎます（6文字以上推奨）"),A(O)}finally{w(!1)}},N=async()=>{w(!0),A("");try{const M=tm();await rm(n,M),await sD(n,M),alert("確認コードを再送信しました！")}catch{A("再送信に失敗しました")}finally{w(!1)}};return m.jsxs("div",{className:"register-flow",children:[m.jsxs("div",{className:"progress-bar",children:[m.jsx("div",{className:`progress-step ${e==="email"?"active":["code","profile"].includes(e)?"completed":""}`,children:"1"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${e==="code"?"active":e==="profile"?"completed":""}`,children:"2"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${e==="profile"?"active":""}`,children:"3"})]}),e==="email"&&m.jsxs("form",{onSubmit:S,className:"step-form",children:[m.jsxs("button",{type:"button",onClick:t,className:"back-button-small",children:[m.jsx(Rp,{})," 戻る"]}),m.jsxs("h2",{children:[m.jsx(om,{})," メールアドレスを入力"]}),m.jsx("p",{className:"step-description",children:"確認コードを送信します"}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"email",value:n,onChange:M=>i(M.target.value),placeholder:"email@example.com",required:!0,autoFocus:!0})}),_&&m.jsx("div",{className:"error-message",children:_}),m.jsx("button",{type:"submit",className:"submit-button",disabled:y,children:y?"送信中...":"確認コードを送信"})]}),e==="code"&&m.jsxs("form",{onSubmit:T,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(gD,{})," 確認コードを入力"]}),m.jsxs("p",{className:"step-description",children:[m.jsx("strong",{children:n})," 宛に送信された6桁のコードを入力してください"]}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"text",value:a,onChange:M=>o(M.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"code-input",required:!0,autoFocus:!0})}),_&&m.jsx("div",{className:"error-message",children:_}),m.jsx("button",{type:"submit",className:"submit-button",disabled:y||a.length!==6,children:y?"確認中...":"確認"}),m.jsx("button",{type:"button",onClick:N,className:"link-button",disabled:y,children:"コードを再送信"})]}),e==="profile"&&m.jsxs("form",{onSubmit:R,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(Df,{})," アカウント情報を設定"]}),m.jsx("p",{className:"step-description",children:"ユーザー名とパスワードを設定してください"}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Df,{})," ユーザー名"]}),m.jsx("input",{type:"text",value:s,onChange:M=>c(M.target.value),placeholder:"山田太郎",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(El,{})," パスワード"]}),m.jsx("input",{type:"password",value:f,onChange:M=>d(M.target.value),placeholder:"6文字以上",minLength:6,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(El,{})," パスワード（確認）"]}),m.jsx("input",{type:"password",value:p,onChange:M=>g(M.target.value),placeholder:"もう一度入力",minLength:6,required:!0})]}),_&&m.jsx("div",{className:"error-message",children:_}),m.jsx("button",{type:"submit",className:"submit-button",disabled:y,children:y?"アカウント作成中...":"登録完了"})]}),m.jsx("style",{children:`
        .register-flow {
          width: 100%;
        }

        .progress-bar {
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 40px;
        }

        .progress-step {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: var(--border);
          color: var(--text-secondary);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          transition: all 0.3s;
        }

        .progress-step.active {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transform: scale(1.1);
        }

        .progress-step.completed {
          background: var(--primary);
          color: white;
        }

        .progress-line {
          width: 60px;
          height: 2px;
          background: var(--border);
        }

        .step-form {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .back-button-small {
          align-self: flex-start;
          padding: 8px 16px;
          background: var(--background);
          border: 1px solid var(--border);
          border-radius: 6px;
          color: var(--text);
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button-small:hover {
          background: var(--border);
        }

        .step-form h2 {
          color: var(--text);
          font-size: 24px;
          margin: 0;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .step-form h2 svg {
          color: var(--primary);
        }

        .step-description {
          color: var(--text-secondary);
          margin: -8px 0 0 0;
          line-height: 1.5;
        }

        .step-description strong {
          color: var(--primary);
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .code-input {
          font-size: 32px !important;
          text-align: center;
          letter-spacing: 8px;
          font-weight: 600;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .submit-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transition: all 0.3s;
        }

        .submit-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .submit-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 8px;
          text-decoration: underline;
        }

        .link-button:hover:not(:disabled) {
          opacity: 0.8;
        }

        .link-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})},Nme=({onBack:t,onSuccess:e})=>{const[r,n]=C.useState("email"),[i,a]=C.useState(""),[o,s]=C.useState(""),[c,f]=C.useState(""),[d,p]=C.useState(""),[g,y]=C.useState(!1),[w,_]=C.useState(""),A=async N=>{N.preventDefault(),_(""),y(!0);try{const M=tm();await rm(i,M),await lD(i,M),console.log("✅ パスワードリセット用の確認コードを送信しました:",i),n("code")}catch(M){console.error("Email send error:",M),_(M.message||"確認コードの送信に失敗しました")}finally{y(!1)}},S=async N=>{N.preventDefault(),_(""),y(!0);try{const M=await RB(i,o);if(!M.valid){_(M.error||"確認コードが正しくありません"),y(!1);return}console.log("✅ 確認コードが正しいです"),n("password")}catch(M){_(M.message||"確認に失敗しました")}finally{y(!1)}},T=async N=>{if(N.preventDefault(),_(""),c!==d){_("パスワードが一致しません");return}if(c.length<6){_("パスワードは6文字以上で入力してください");return}y(!0);try{const M=await Pme(i,c);if(!M.success){_(M.error||"パスワードの更新に失敗しました"),y(!1);return}console.log("✅ パスワードのリセットが完了しました"),alert("パスワードのリセットが完了しました！新しいパスワードでログインしてください。"),e()}catch(M){console.error("Password reset error:",M),_(M.message||"パスワードの更新に失敗しました")}finally{y(!1)}},R=async()=>{y(!0),_("");try{const N=tm();await rm(i,N),await lD(i,N),alert("確認コードを再送信しました！")}catch{_("再送信に失敗しました")}finally{y(!1)}};return m.jsxs("div",{className:"password-reset-flow",children:[m.jsxs("div",{className:"progress-bar",children:[m.jsx("div",{className:`progress-step ${r==="email"?"active":["code","password"].includes(r)?"completed":""}`,children:"1"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${r==="code"?"active":r==="password"?"completed":""}`,children:"2"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${r==="password"?"active":""}`,children:"3"})]}),r==="email"&&m.jsxs("form",{onSubmit:A,className:"step-form",children:[m.jsxs("button",{type:"button",onClick:t,className:"back-button-small",children:[m.jsx(Rp,{})," 戻る"]}),m.jsxs("h2",{children:[m.jsx(om,{})," メールアドレスを入力"]}),m.jsx("p",{className:"step-description",children:"パスワードリセット用の確認コードを送信します"}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"email",value:i,onChange:N=>a(N.target.value),placeholder:"email@example.com",required:!0,autoFocus:!0})}),w&&m.jsx("div",{className:"error-message",children:w}),m.jsx("button",{type:"submit",className:"submit-button",disabled:g,children:g?"送信中...":"確認コードを送信"})]}),r==="code"&&m.jsxs("form",{onSubmit:S,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(gD,{})," 確認コードを入力"]}),m.jsxs("p",{className:"step-description",children:[m.jsx("strong",{children:i})," 宛に送信された6桁のコードを入力してください"]}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"text",value:o,onChange:N=>s(N.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"code-input",required:!0,autoFocus:!0})}),w&&m.jsx("div",{className:"error-message",children:w}),m.jsx("button",{type:"submit",className:"submit-button",disabled:g||o.length!==6,children:g?"確認中...":"確認"}),m.jsx("button",{type:"button",onClick:R,className:"link-button",disabled:g,children:"コードを再送信"})]}),r==="password"&&m.jsxs("form",{onSubmit:T,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(El,{})," 新しいパスワードを設定"]}),m.jsx("p",{className:"step-description",children:"新しいパスワードを入力してください"}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(El,{})," 新しいパスワード"]}),m.jsx("input",{type:"password",value:c,onChange:N=>f(N.target.value),placeholder:"6文字以上",minLength:6,required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(El,{})," パスワード（確認）"]}),m.jsx("input",{type:"password",value:d,onChange:N=>p(N.target.value),placeholder:"もう一度入力",minLength:6,required:!0})]}),w&&m.jsx("div",{className:"error-message",children:w}),m.jsx("button",{type:"submit",className:"submit-button",disabled:g,children:g?"更新中...":"パスワードを更新"})]}),m.jsx("style",{children:`
        .password-reset-flow {
          width: 100%;
        }

        .progress-bar {
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 40px;
        }

        .progress-step {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: var(--border);
          color: var(--text-secondary);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          transition: all 0.3s;
        }

        .progress-step.active {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transform: scale(1.1);
        }

        .progress-step.completed {
          background: var(--primary);
          color: white;
        }

        .progress-line {
          width: 60px;
          height: 2px;
          background: var(--border);
        }

        .step-form {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .back-button-small {
          align-self: flex-start;
          padding: 8px 16px;
          background: var(--background);
          border: 1px solid var(--border);
          border-radius: 6px;
          color: var(--text);
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button-small:hover {
          background: var(--border);
        }

        .step-form h2 {
          color: var(--text);
          font-size: 24px;
          margin: 0;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .step-form h2 svg {
          color: var(--primary);
        }

        .step-description {
          color: var(--text-secondary);
          margin: -8px 0 0 0;
          line-height: 1.5;
        }

        .step-description strong {
          color: var(--primary);
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .code-input {
          font-size: 32px !important;
          text-align: center;
          letter-spacing: 8px;
          font-weight: 600;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .submit-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transition: all 0.3s;
        }

        .submit-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .submit-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 8px;
          text-decoration: underline;
        }

        .link-button:hover:not(:disabled) {
          opacity: 0.8;
        }

        .link-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})},kme=({onLoginSuccess:t})=>{const[e,r]=C.useState(!1),[n,i]=C.useState(!1),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(!1),y=async _=>{_.preventDefault(),d(""),g(!0);try{const A=await sY(a,s);A.error?d(A.error):t()}catch(A){d(A.message||"認証エラーが発生しました")}finally{g(!1)}},w=async()=>{d(""),g(!0);try{const _=await lY();_.error?d(_.error):t()}catch(_){d(_.message||"認証エラーが発生しました")}finally{g(!1)}};return e?m.jsxs("div",{className:"login-screen",children:[m.jsxs("div",{className:"login-container",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("h1",{children:"🥗💰 健康家計アプリ"}),m.jsx("p",{children:"新規登録"})]}),m.jsx(Dme,{onBack:()=>r(!1)})]}),m.jsx("style",{children:`
          .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 20px;
          }

          .login-container {
            background: var(--card);
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          }

          .login-header {
            text-align: center;
            margin-bottom: 32px;
          }

          .login-header h1 {
            color: var(--text);
            font-size: 28px;
            margin: 0 0 8px 0;
          }

          .login-header p {
            color: var(--text-secondary);
            font-size: 14px;
            margin: 0;
          }
        `})]}):n?m.jsxs("div",{className:"login-screen",children:[m.jsxs("div",{className:"login-container",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("h1",{children:"🥗💰 健康家計アプリ"}),m.jsx("p",{children:"パスワードリセット"})]}),m.jsx(Nme,{onBack:()=>i(!1),onSuccess:()=>i(!1)})]}),m.jsx("style",{children:`
          .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 20px;
          }

          .login-container {
            background: var(--card);
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          }

          .login-header {
            text-align: center;
            margin-bottom: 32px;
          }

          .login-header h1 {
            color: var(--text);
            font-size: 28px;
            margin: 0 0 8px 0;
          }

          .login-header p {
            color: var(--text-secondary);
            font-size: 14px;
            margin: 0;
          }
        `})]}):m.jsxs("div",{className:"login-screen",children:[m.jsxs("div",{className:"login-container",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("h1",{children:"🥗💰 健康家計アプリ"}),m.jsx("p",{children:"AIが健康をサポートする生活管理アプリ"})]}),m.jsxs("form",{onSubmit:y,className:"login-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(om,{})," メールアドレス"]}),m.jsx("input",{type:"email",value:a,onChange:_=>o(_.target.value),placeholder:"email@example.com",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(El,{})," パスワード"]}),m.jsx("input",{type:"password",value:s,onChange:_=>c(_.target.value),placeholder:"6文字以上",minLength:6,required:!0})]}),f&&m.jsx("div",{className:"error-message",children:f}),m.jsx("button",{type:"submit",className:"login-button",disabled:p,children:p?"処理中...":m.jsxs(m.Fragment,{children:[m.jsx(zU,{})," ログイン"]})}),m.jsx("button",{type:"button",onClick:()=>i(!0),className:"forgot-password-button",children:"パスワードをお忘れですか？"}),m.jsx("button",{type:"button",onClick:()=>r(!0),className:"register-link-button",children:"アカウントをお持ちでない方はこちら"})]}),m.jsx("div",{className:"divider",children:m.jsx("span",{children:"または"})}),m.jsxs("button",{onClick:w,className:"google-login-button",disabled:p,children:[m.jsx(Ime,{})," Googleでログイン"]}),m.jsx("div",{className:"login-footer",children:m.jsxs("p",{children:["※ Firebase Authenticationを使用した安全な認証です",m.jsx("br",{}),"データはFirestoreに安全に保存されます"]})})]}),m.jsx("style",{children:`
        .login-screen {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
          padding: 20px;
        }

        .login-container {
          background: var(--card);
          border-radius: 16px;
          padding: 40px;
          max-width: 450px;
          width: 100%;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .login-header {
          text-align: center;
          margin-bottom: 32px;
        }

        .login-header h1 {
          color: var(--text);
          font-size: 28px;
          margin: 0 0 8px 0;
        }

        .login-header p {
          color: var(--text-secondary);
          font-size: 14px;
          margin: 0;
        }

        .forgot-password-button,
        .register-link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 12px;
          text-decoration: underline;
          transition: opacity 0.3s;
        }

        .forgot-password-button:hover,
        .register-link-button:hover {
          opacity: 0.8;
        }

        .login-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--background);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .info-message {
          padding: 12px;
          background: #e8f5e9;
          color: #2e7d32;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 6px;
        }

        body.dark-mode .info-message {
          background: #1b5e20;
          color: #a5d6a7;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .login-button,
        .google-login-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
        }

        .login-button {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
        }

        .login-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .login-button:active:not(:disabled) {
          transform: translateY(0);
        }

        .login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .google-login-button {
          background: white;
          color: #555;
          border: 2px solid #ddd;
        }

        .google-login-button:hover:not(:disabled) {
          background: #f5f5f5;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .google-login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .divider {
          text-align: center;
          margin: 24px 0;
          position: relative;
        }

        .divider::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 1px;
          background: var(--border);
        }

        .divider span {
          background: var(--card);
          padding: 0 16px;
          color: var(--text-secondary);
          font-size: 14px;
          position: relative;
          z-index: 1;
        }

        .login-footer {
          margin-top: 24px;
          text-align: center;
        }

        .login-footer p {
          color: var(--text-secondary);
          font-size: 12px;
          line-height: 1.6;
          margin: 0;
        }

        @media (max-width: 480px) {
          .login-container {
            padding: 24px;
          }

          .login-header h1 {
            font-size: 24px;
          }
        }
      `})]})};function Mme(){const{newBadges:t,clearNewBadges:e}=TE(),[r,n]=C.useState(0),[i,a]=C.useState(!1);if(C.useEffect(()=>{t.length>0&&(n(0),a(!0))},[t]),!i||t.length===0)return null;const o=t[r],s=tY(o);if(!s)return null;const c=()=>{r<t.length-1?n(r+1):f()},f=()=>{a(!1),e(),n(0)};return m.jsx("div",{className:"badge-modal-overlay-fullscreen",children:m.jsx("div",{className:"badge-modal-fullscreen",children:m.jsxs("div",{className:"badge-modal-content-fullscreen",children:[m.jsx("div",{className:"badge-glow"}),m.jsx("div",{className:"badge-celebration-large",children:"🎉"}),m.jsx("div",{className:"badge-icon-huge",children:s.icon}),m.jsxs("h2",{className:"badge-title-huge",children:[m.jsx(Ip,{size:48,style:{color:"#10b981",marginRight:"12px"}}),"バッジ獲得！"]}),m.jsx("h3",{className:"badge-name-huge",children:s.name}),m.jsx("p",{className:"badge-description-large",children:s.description}),t.length>1&&m.jsxs("div",{className:"badge-progress-large",children:[r+1," / ",t.length]}),m.jsx("div",{className:"badge-buttons-large",children:r<t.length-1?m.jsx("button",{className:"badge-btn-large badge-btn-next",onClick:c,children:"次へ"}):m.jsx("button",{className:"badge-btn-large badge-btn-ok",onClick:f,children:"OK"})})]})})})}function jme(t){if(t.length===0)return 0;const e=[...new Set(t.map(i=>i.split("T")[0]))].sort().reverse();let r=0;const n=new Date;n.setHours(0,0,0,0);for(let i=0;i<e.length;i++){const a=new Date(e[i]);a.setHours(0,0,0,0);const o=new Date(n);if(o.setDate(o.getDate()-i),o.setHours(0,0,0,0),a.getTime()===o.getTime())r++;else break}return r}function Lme(){const{settings:t}=dv(),{user:e,loading:r}=Xa(),[n,i]=C.useState(!1),a=Ga(),o=Wa(),s=Ka(),c=Ql(),f=Yp(),d=dv(),p=TE();return C.useEffect(()=>{document.body.classList.toggle("dark-mode",t.darkMode)},[t.darkMode]),C.useEffect(()=>{if(!e)return;const{intakes:g}=a,{expenses:y}=o,{stocks:w}=s,{recipeHistory:_}=f,A=0,S=jme(g.map(z=>z.date)),T=g.reduce((z,V)=>z+V.calories,0),R=new Date,N=R.getDate();let M=R.getMonth(),L=R.getFullYear();M===0?(M=11,L-=1):M-=1;const D=y.filter(z=>{const V=new Date(z.date);return V.getMonth()===M&&V.getFullYear()===L}).reduce((z,V)=>z+V.amount,0),j=N===1&&D<=t.monthlyBudget&&D>0,B={intakesCount:g.length,expensesCount:y.length,stocksCount:w.length,consecutiveDays:S,totalCalories:T,budgetAchieved:j,recipesGenerated:_.length,barcodesScanned:A};p.checkAndUnlockBadges(B)},[a.intakes.length,o.expenses.length,s.stocks.length,f.recipeHistory.length]),C.useEffect(()=>((async()=>{if(!e){a.unsubscribeFromFirestore();return}i(!0);try{if(console.log("Syncing data for user:",e.uid),console.log("📝 Checking user profile..."),await ya(e.uid))console.log("✅ プロフィールが存在します");else{console.log("⚠️ プロフィールが存在しません。自動作成します...");try{await IE(e.uid,e.email||"",e.displayName||`User${e.uid.slice(0,8)}`),console.log("✅ プロフィールを作成しました")}catch(w){console.error("❌ プロフィール作成に失敗しました:",w)}}await Promise.all([a.syncWithFirestore(),o.syncWithFirestore(),s.syncWithFirestore(),c.syncWithFirestore(),f.syncWithFirestore(),d.syncWithFirestore()]),console.log("Sync completed for user:",e.uid),console.log("Starting realtime sync..."),a.subscribeToFirestore(),console.log("Realtime sync started")}catch(y){console.error("Failed to sync stores with Firestore:",y)}finally{i(!1)}})(),()=>{e&&a.unsubscribeFromFirestore()}),[e?.uid]),r||n?m.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)"},children:m.jsx("div",{style:{color:"white",fontSize:"24px",textAlign:"center"},children:r?"ロード中...":"データを同期中..."})}):e?m.jsxs(m.Fragment,{children:[m.jsx(Tme,{}),m.jsx(Mme,{})]}):m.jsx(kme,{onLoginSuccess:()=>{}})}yU.createRoot(document.getElementById("root")).render(m.jsx(Hn.StrictMode,{children:m.jsx(Lme,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/life-pwa-react/sw.js").then(t=>{console.log("[SW] Registered:",t.scope),t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW] New version available"),confirm("新しいバージョンが利用可能です。更新しますか？")&&(e.postMessage({type:"SKIP_WAITING"}),window.location.reload()))})})}).catch(t=>{console.error("[SW] Registration failed:",t)})});
