import{r,j as t}from"./ui-vendor-JVI_EMCz.js";import{u as w,i as A,j as p,e as j}from"./index-CMV4amBo.js";import"./react-vendor-Bzgz95E1.js";import"./firebase-vendor-CyvWsNSE.js";const R=({onBack:x})=>{const{user:i}=w(),[g,o]=r.useState(!1),[m,a]=r.useState(!0),[d,n]=r.useState(null),[c,s]=r.useState(null),u=A(),f=p(u,"deleteAllPosts"),h=p(u,"deleteAllFollows");r.useEffect(()=>{(async()=>{if(!i){o(!1),a(!1);return}try{const l=await j(i.uid);l&&l.username==="haachan"?o(!0):o(!1)}catch(l){console.error("Error checking admin status:",l),o(!1)}finally{a(!1)}})()},[i]);const b=async()=>{if(window.confirm("本当にすべての投稿を削除しますか？この操作は元に戻せません。")){n(null),s(null);try{const e=await f();n(`すべての投稿が削除されました: ${JSON.stringify(e.data)}`)}catch(e){console.error("Error deleting all posts:",e),s(`投稿の削除に失敗しました: ${e.message||"不明なエラー"}`)}}},y=async()=>{if(window.confirm("本当にすべてのフォロー関係を削除しますか？この操作は元に戻せません。")){n(null),s(null);try{const e=await h();n(`すべてのフォロー関係が削除されました: ${JSON.stringify(e.data)}`)}catch(e){console.error("Error deleting all follows:",e),s(`フォロー関係の削除に失敗しました: ${e.message||"不明なエラー"}`)}}};return m?t.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading admin panel..."}):g?t.jsxs("div",{style:{padding:"20px",maxWidth:"600px",margin:"0 auto"},children:[t.jsx("h2",{style:{fontSize:"24px",marginBottom:"20px",color:"var(--text)"},children:"管理者パネル"}),d&&t.jsx("div",{style:{background:"#d4edda",color:"#155724",padding:"10px",borderRadius:"5px",marginBottom:"15px"},children:d}),c&&t.jsx("div",{style:{background:"#f8d7da",color:"#721c24",padding:"10px",borderRadius:"5px",marginBottom:"15px"},children:c}),t.jsx("button",{onClick:b,style:{width:"100%",padding:"15px",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"18px",cursor:"pointer",marginBottom:"10px"},children:"すべての投稿を削除"}),t.jsx("button",{onClick:y,style:{width:"100%",padding:"15px",background:"#dc3545",color:"white",border:"none",borderRadius:"5px",fontSize:"18px",cursor:"pointer"},children:"すべてのフォロー関係を削除"}),t.jsx("button",{onClick:x,style:{width:"100%",padding:"15px",background:"var(--background)",color:"var(--text)",border:"1px solid var(--border)",borderRadius:"5px",fontSize:"18px",cursor:"pointer",marginTop:"20px"},children:"戻る"})]}):t.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"管理者権限がありません。"})};export{R as AdminScreen};
