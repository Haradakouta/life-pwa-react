function XU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function To(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f2={exports:{}},vh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lI;function YU(){if(lI)return vh;lI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:o,ref:i!==void 0?i:null,props:a}}return vh.Fragment=e,vh.jsx=r,vh.jsxs=r,vh}var cI;function QU(){return cI||(cI=1,f2.exports=YU()),f2.exports}var y=QU(),d2={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI;function ZU(){if(uI)return $e;uI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function S(G,ee,xe){this.props=G,this.context=ee,this.refs=E,this.updater=xe||b}S.prototype.isReactComponent={},S.prototype.setState=function(G,ee){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ee,"setState")},S.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function I(){}I.prototype=S.prototype;function O(G,ee,xe){this.props=G,this.context=ee,this.refs=E,this.updater=xe||b}var D=O.prototype=new I;D.constructor=O,w(D,S.prototype),D.isPureReactComponent=!0;var k=Array.isArray;function B(){}var R={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function L(G,ee,xe){var we=xe.ref;return{$$typeof:t,type:G,key:ee,ref:we!==void 0?we:null,props:xe}}function U(G,ee){return L(G.type,ee,G.props)}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function H(G){var ee={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(xe){return ee[xe]})}var j=/\/+/g;function ue(G,ee){return typeof G=="object"&&G!==null&&G.key!=null?H(""+G.key):ee.toString(36)}function ye(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(B,B):(G.status="pending",G.then(function(ee){G.status==="pending"&&(G.status="fulfilled",G.value=ee)},function(ee){G.status==="pending"&&(G.status="rejected",G.reason=ee)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function X(G,ee,xe,we,Pe){var Ge=typeof G;(Ge==="undefined"||Ge==="boolean")&&(G=null);var at=!1;if(G===null)at=!0;else switch(Ge){case"bigint":case"string":case"number":at=!0;break;case"object":switch(G.$$typeof){case t:case e:at=!0;break;case d:return at=G._init,X(at(G._payload),ee,xe,we,Pe)}}if(at)return Pe=Pe(G),at=we===""?"."+ue(G,0):we,k(Pe)?(xe="",at!=null&&(xe=at.replace(j,"$&/")+"/"),X(Pe,ee,xe,"",function(He){return He})):Pe!=null&&(z(Pe)&&(Pe=U(Pe,xe+(Pe.key==null||G&&G.key===Pe.key?"":(""+Pe.key).replace(j,"$&/")+"/")+at)),ee.push(Pe)),1;at=0;var xr=we===""?".":we+":";if(k(G))for(var ge=0;ge<G.length;ge++)we=G[ge],Ge=xr+ue(we,ge),at+=X(we,ee,xe,Ge,Pe);else if(ge=m(G),typeof ge=="function")for(G=ge.call(G),ge=0;!(we=G.next()).done;)we=we.value,Ge=xr+ue(we,ge++),at+=X(we,ee,xe,Ge,Pe);else if(Ge==="object"){if(typeof G.then=="function")return X(ye(G),ee,xe,we,Pe);throw ee=String(G),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return at}function re(G,ee,xe){if(G==null)return G;var we=[],Pe=0;return X(G,we,"","",function(Ge){return ee.call(xe,Ge,Pe++)}),we}function he(G){if(G._status===-1){var ee=G._result;ee=ee(),ee.then(function(xe){(G._status===0||G._status===-1)&&(G._status=1,G._result=xe)},function(xe){(G._status===0||G._status===-1)&&(G._status=2,G._result=xe)}),G._status===-1&&(G._status=0,G._result=ee)}if(G._status===1)return G._result.default;throw G._result}var Ae=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ke={map:re,forEach:function(G,ee,xe){re(G,function(){ee.apply(this,arguments)},xe)},count:function(G){var ee=0;return re(G,function(){ee++}),ee},toArray:function(G){return re(G,function(ee){return ee})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return $e.Activity=p,$e.Children=ke,$e.Component=S,$e.Fragment=r,$e.Profiler=i,$e.PureComponent=O,$e.StrictMode=n,$e.Suspense=c,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,$e.__COMPILER_RUNTIME={__proto__:null,c:function(G){return R.H.useMemoCache(G)}},$e.cache=function(G){return function(){return G.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(G,ee,xe){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var we=w({},G.props),Pe=G.key;if(ee!=null)for(Ge in ee.key!==void 0&&(Pe=""+ee.key),ee)!N.call(ee,Ge)||Ge==="key"||Ge==="__self"||Ge==="__source"||Ge==="ref"&&ee.ref===void 0||(we[Ge]=ee[Ge]);var Ge=arguments.length-2;if(Ge===1)we.children=xe;else if(1<Ge){for(var at=Array(Ge),xr=0;xr<Ge;xr++)at[xr]=arguments[xr+2];we.children=at}return L(G.type,Pe,we)},$e.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},$e.createElement=function(G,ee,xe){var we,Pe={},Ge=null;if(ee!=null)for(we in ee.key!==void 0&&(Ge=""+ee.key),ee)N.call(ee,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Pe[we]=ee[we]);var at=arguments.length-2;if(at===1)Pe.children=xe;else if(1<at){for(var xr=Array(at),ge=0;ge<at;ge++)xr[ge]=arguments[ge+2];Pe.children=xr}if(G&&G.defaultProps)for(we in at=G.defaultProps,at)Pe[we]===void 0&&(Pe[we]=at[we]);return L(G,Ge,Pe)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(G){return{$$typeof:l,render:G}},$e.isValidElement=z,$e.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:he}},$e.memo=function(G,ee){return{$$typeof:f,type:G,compare:ee===void 0?null:ee}},$e.startTransition=function(G){var ee=R.T,xe={};R.T=xe;try{var we=G(),Pe=R.S;Pe!==null&&Pe(xe,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(B,Ae)}catch(Ge){Ae(Ge)}finally{ee!==null&&xe.types!==null&&(ee.types=xe.types),R.T=ee}},$e.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},$e.use=function(G){return R.H.use(G)},$e.useActionState=function(G,ee,xe){return R.H.useActionState(G,ee,xe)},$e.useCallback=function(G,ee){return R.H.useCallback(G,ee)},$e.useContext=function(G){return R.H.useContext(G)},$e.useDebugValue=function(){},$e.useDeferredValue=function(G,ee){return R.H.useDeferredValue(G,ee)},$e.useEffect=function(G,ee){return R.H.useEffect(G,ee)},$e.useEffectEvent=function(G){return R.H.useEffectEvent(G)},$e.useId=function(){return R.H.useId()},$e.useImperativeHandle=function(G,ee,xe){return R.H.useImperativeHandle(G,ee,xe)},$e.useInsertionEffect=function(G,ee){return R.H.useInsertionEffect(G,ee)},$e.useLayoutEffect=function(G,ee){return R.H.useLayoutEffect(G,ee)},$e.useMemo=function(G,ee){return R.H.useMemo(G,ee)},$e.useOptimistic=function(G,ee){return R.H.useOptimistic(G,ee)},$e.useReducer=function(G,ee,xe){return R.H.useReducer(G,ee,xe)},$e.useRef=function(G){return R.H.useRef(G)},$e.useState=function(G){return R.H.useState(G)},$e.useSyncExternalStore=function(G,ee,xe){return R.H.useSyncExternalStore(G,ee,xe)},$e.useTransition=function(){return R.H.useTransition()},$e.version="19.2.0",$e}var fI;function Wf(){return fI||(fI=1,d2.exports=ZU()),d2.exports}var C=Wf();const Hn=To(C),JU=XU({__proto__:null,default:Hn},[C]);var h2={exports:{}},mh={},p2={exports:{}},g2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI;function eF(){return dI||(dI=1,(function(t){function e(X,re){var he=X.length;X.push(re);e:for(;0<he;){var Ae=he-1>>>1,ke=X[Ae];if(0<i(ke,re))X[Ae]=re,X[he]=ke,he=Ae;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var re=X[0],he=X.pop();if(he!==re){X[0]=he;e:for(var Ae=0,ke=X.length,G=ke>>>1;Ae<G;){var ee=2*(Ae+1)-1,xe=X[ee],we=ee+1,Pe=X[we];if(0>i(xe,he))we<ke&&0>i(Pe,xe)?(X[Ae]=Pe,X[we]=he,Ae=we):(X[Ae]=xe,X[ee]=he,Ae=ee);else if(we<ke&&0>i(Pe,he))X[Ae]=Pe,X[we]=he,Ae=we;else break e}}return re}function i(X,re){var he=X.sortIndex-re.sortIndex;return he!==0?he:X.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],f=[],d=1,p=null,g=3,m=!1,b=!1,w=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var re=r(f);re!==null;){if(re.callback===null)n(f);else if(re.startTime<=X)n(f),re.sortIndex=re.expirationTime,e(c,re);else break;re=r(f)}}function k(X){if(w=!1,D(X),!b)if(r(c)!==null)b=!0,B||(B=!0,H());else{var re=r(f);re!==null&&ye(k,re.startTime-X)}}var B=!1,R=-1,N=5,L=-1;function U(){return E?!0:!(t.unstable_now()-L<N)}function z(){if(E=!1,B){var X=t.unstable_now();L=X;var re=!0;try{e:{b=!1,w&&(w=!1,I(R),R=-1),m=!0;var he=g;try{t:{for(D(X),p=r(c);p!==null&&!(p.expirationTime>X&&U());){var Ae=p.callback;if(typeof Ae=="function"){p.callback=null,g=p.priorityLevel;var ke=Ae(p.expirationTime<=X);if(X=t.unstable_now(),typeof ke=="function"){p.callback=ke,D(X),re=!0;break t}p===r(c)&&n(c),D(X)}else n(c);p=r(c)}if(p!==null)re=!0;else{var G=r(f);G!==null&&ye(k,G.startTime-X),re=!1}}break e}finally{p=null,g=he,m=!1}re=void 0}}finally{re?H():B=!1}}}var H;if(typeof O=="function")H=function(){O(z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,ue=j.port2;j.port1.onmessage=z,H=function(){ue.postMessage(null)}}else H=function(){S(z,0)};function ye(X,re){R=S(function(){X(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var re=3;break;default:re=g}var he=g;g=re;try{return X()}finally{g=he}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var he=g;g=X;try{return re()}finally{g=he}},t.unstable_scheduleCallback=function(X,re,he){var Ae=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ae+he:Ae):he=Ae,X){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=he+ke,X={id:d++,callback:re,priorityLevel:X,startTime:he,expirationTime:ke,sortIndex:-1},he>Ae?(X.sortIndex=he,e(f,X),r(c)===null&&X===r(f)&&(w?(I(R),R=-1):w=!0,ye(k,he-Ae))):(X.sortIndex=ke,e(c,X),b||m||(b=!0,B||(B=!0,H()))),X},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(X){var re=g;return function(){var he=g;g=re;try{return X.apply(this,arguments)}finally{g=he}}}})(g2)),g2}var hI;function tF(){return hI||(hI=1,p2.exports=eF()),p2.exports}var v2={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI;function rF(){if(pI)return jn;pI=1;var t=Wf();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},jn.flushSync=function(c){var f=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=f,n.p=d,n.d.f()}},jn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(c,f))},jn.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},jn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=l(d,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?n.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(c)},jn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=l(d,f.crossOrigin);n.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=l(f.as,f.crossOrigin);n.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(c)},jn.requestFormReset=function(c){n.d.r(c)},jn.unstable_batchedUpdates=function(c,f){return c(f)},jn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},jn.useFormStatus=function(){return o.H.useHostTransitionStatus()},jn.version="19.2.0",jn}var gI;function rD(){if(gI)return v2.exports;gI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),v2.exports=rF(),v2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI;function nF(){if(vI)return mh;vI=1;var t=tF(),e=Wf(),r=rD();function n(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,h=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(h=u.return),s=u.return;while(s)}return u.tag===3?h:null}function o(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function l(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function c(s){if(a(s)!==s)throw Error(n(188))}function f(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(n(188));return u!==s?null:s}for(var h=s,v=u;;){var _=h.return;if(_===null)break;var A=_.alternate;if(A===null){if(v=_.return,v!==null){h=v;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===h)return c(_),s;if(A===v)return c(_),u;A=A.sibling}throw Error(n(188))}if(h.return!==v.return)h=_,v=A;else{for(var P=!1,F=_.child;F;){if(F===h){P=!0,h=_,v=A;break}if(F===v){P=!0,v=_,h=A;break}F=F.sibling}if(!P){for(F=A.child;F;){if(F===h){P=!0,h=A,v=_;break}if(F===v){P=!0,v=A,h=_;break}F=F.sibling}if(!P)throw Error(n(189))}}if(h.alternate!==v)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?s:u}function d(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=d(s),u!==null)return u;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),O=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=z&&s[z]||s["@@iterator"],typeof s=="function"?s:null)}var j=Symbol.for("react.client.reference");function ue(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===j?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case O:return s.displayName||"Context";case I:return(s._context.displayName||"Context")+".Consumer";case D:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return u=s.displayName||null,u!==null?u:ue(s.type)||"Memo";case N:u=s._payload,s=s._init;try{return ue(s(u))}catch{}}return null}var ye=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ae=[],ke=-1;function G(s){return{current:s}}function ee(s){0>ke||(s.current=Ae[ke],Ae[ke]=null,ke--)}function xe(s,u){ke++,Ae[ke]=s.current,s.current=u}var we=G(null),Pe=G(null),Ge=G(null),at=G(null);function xr(s,u){switch(xe(Ge,u),xe(Pe,s),xe(we,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?P3(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=P3(u),s=D3(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(we),xe(we,s)}function ge(){ee(we),ee(Pe),ee(Ge)}function He(s){s.memoizedState!==null&&xe(at,s);var u=we.current,h=D3(u,s.type);u!==h&&(xe(Pe,s),xe(we,h))}function Qe(s){Pe.current===s&&(ee(we),ee(Pe)),at.current===s&&(ee(at),dh._currentValue=he)}var pe,br;function tt(s){if(pe===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);pe=u&&u[1]||"",br=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+s+br}var Hr=!1;function _r(s,u){if(!s||Hr)return"";Hr=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var te=ae}Reflect.construct(s,[],fe)}else{try{fe.call()}catch(ae){te=ae}s.call(fe.prototype)}}else{try{throw Error()}catch(ae){te=ae}(fe=s())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),P=A[0],F=A[1];if(P&&F){var q=P.split(`
`),J=F.split(`
`);for(_=v=0;v<q.length&&!q[v].includes("DetermineComponentFrameRoot");)v++;for(;_<J.length&&!J[_].includes("DetermineComponentFrameRoot");)_++;if(v===q.length||_===J.length)for(v=q.length-1,_=J.length-1;1<=v&&0<=_&&q[v]!==J[_];)_--;for(;1<=v&&0<=_;v--,_--)if(q[v]!==J[_]){if(v!==1||_!==1)do if(v--,_--,0>_||q[v]!==J[_]){var se=`
`+q[v].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=v&&0<=_);break}}}finally{Hr=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?tt(h):""}function bi(s,u){switch(s.tag){case 26:case 27:case 5:return tt(s.type);case 16:return tt("Lazy");case 13:return s.child!==u&&u!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return _r(s.type,!1);case 11:return _r(s.type.render,!1);case 1:return _r(s.type,!0);case 31:return tt("Activity");default:return""}}function Os(s){try{var u="",h=null;do u+=bi(s,h),h=s,s=s.return;while(s);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Or=Object.prototype.hasOwnProperty,$r=t.unstable_scheduleCallback,Rs=t.unstable_cancelCallback,hy=t.unstable_shouldYield,a0=t.unstable_requestPaint,Wn=t.unstable_now,nc=t.unstable_getCurrentPriorityLevel,gd=t.unstable_ImmediatePriority,vd=t.unstable_UserBlockingPriority,Ps=t.unstable_NormalPriority,py=t.unstable_LowPriority,o0=t.unstable_IdlePriority,s0=t.log,l0=t.unstable_setDisableYieldValue,xa=null,vn=null;function Hi(s){if(typeof s0=="function"&&l0(s),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(xa,s)}catch{}}var wr=Math.clz32?Math.clz32:u0,c0=Math.log,_u=Math.LN2;function u0(s){return s>>>=0,s===0?32:31-(c0(s)/_u|0)|0}var Ha=256,ic=262144,Rr=4194304;function $a(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function qa(s,u,h){var v=s.pendingLanes;if(v===0)return 0;var _=0,A=s.suspendedLanes,P=s.pingedLanes;s=s.warmLanes;var F=v&134217727;return F!==0?(v=F&~A,v!==0?_=$a(v):(P&=F,P!==0?_=$a(P):h||(h=F&~s,h!==0&&(_=$a(h))))):(F=v&~A,F!==0?_=$a(F):P!==0?_=$a(P):h||(h=v&~s,h!==0&&(_=$a(h)))),_===0?0:u!==0&&u!==_&&(u&A)===0&&(A=_&-_,h=u&-u,A>=h||A===32&&(h&4194048)!==0)?u:_}function ba(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function gy(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f0(){var s=Rr;return Rr<<=1,(Rr&62914560)===0&&(Rr=4194304),s}function Ga(s){for(var u=[],h=0;31>h;h++)u.push(s);return u}function ac(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function vy(s,u,h,v,_,A){var P=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var F=s.entanglements,q=s.expirationTimes,J=s.hiddenUpdates;for(h=P&~h;0<h;){var se=31-wr(h),fe=1<<se;F[se]=0,q[se]=-1;var te=J[se];if(te!==null)for(J[se]=null,se=0;se<te.length;se++){var ae=te[se];ae!==null&&(ae.lane&=-536870913)}h&=~fe}v!==0&&oc(s,v,0),A!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=A&~(P&~u))}function oc(s,u,h){s.pendingLanes|=u,s.suspendedLanes&=~u;var v=31-wr(u);s.entangledLanes|=u,s.entanglements[v]=s.entanglements[v]|1073741824|h&261930}function md(s,u){var h=s.entangledLanes|=u;for(s=s.entanglements;h;){var v=31-wr(h),_=1<<v;_&u|s[v]&u&&(s[v]|=u),h&=~_}}function yd(s,u){var h=u&-u;return h=(h&42)!==0?1:sc(h),(h&(s.suspendedLanes|u))!==0?0:h}function sc(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function No(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function d0(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:tI(s.type))}function _a(s,u){var h=re.p;try{return re.p=s,u()}finally{re.p=h}}var wa=Math.random().toString(36).slice(2),Pr="__reactFiber$"+wa,nn="__reactProps$"+wa,Wa="__reactContainer$"+wa,wu="__reactEvents$"+wa,my="__reactListeners$"+wa,h0="__reactHandles$"+wa,p0="__reactResources$"+wa,Ka="__reactMarker$"+wa;function Eu(s){delete s[Pr],delete s[nn],delete s[wu],delete s[my],delete s[h0]}function Xa(s){var u=s[Pr];if(u)return u;for(var h=s.parentNode;h;){if(u=h[Wa]||h[Pr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(s=U3(s);s!==null;){if(h=s[Pr])return h;s=U3(s)}return u}s=h,h=s.parentNode}return null}function $i(s){if(s=s[Pr]||s[Wa]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function _i(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(n(33))}function Ya(s){var u=s[p0];return u||(u=s[p0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Dr(s){s[Ka]=!0}var xd=new Set,bd={};function Qa(s,u){Za(s,u),Za(s+"Capture",u)}function Za(s,u){for(bd[s]=u,s=0;s<u.length;s++)xd.add(u[s])}var _d=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wd={},Ed={};function g0(s){return Or.call(Ed,s)?!0:Or.call(wd,s)?!1:_d.test(s)?Ed[s]=!0:(wd[s]=!0,!1)}function Au(s,u,h){if(g0(u))if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+h)}}function wi(s,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+h)}}function Nr(s,u,h,v){if(v===null)s.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(u,h,""+v)}}function an(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ds(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ad(s,u,h){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var _=v.get,A=v.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return _.call(this)},set:function(P){h=""+P,A.call(this,P)}}),Object.defineProperty(s,u,{enumerable:v.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function Rt(s){if(!s._valueTracker){var u=Ds(s)?"checked":"value";s._valueTracker=Ad(s,u,""+s[u])}}function lc(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var h=u.getValue(),v="";return s&&(v=Ds(s)?s.checked?"true":"false":s.value),s=v,s!==h?(u.setValue(s),!0):!1}function Ja(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var cc=/[\n"\\]/g;function ii(s){return s.replace(cc,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Su(s,u,h,v,_,A,P,F){s.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.type=P:s.removeAttribute("type"),u!=null?P==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+an(u)):s.value!==""+an(u)&&(s.value=""+an(u)):P!=="submit"&&P!=="reset"||s.removeAttribute("value"),u!=null?Sd(s,P,an(u)):h!=null?Sd(s,P,an(h)):v!=null&&s.removeAttribute("value"),_==null&&A!=null&&(s.defaultChecked=!!A),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+an(F):s.removeAttribute("name")}function v0(s,u,h,v,_,A,P,F){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),u!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||u!=null)){Rt(s);return}h=h!=null?""+an(h):"",u=u!=null?""+an(u):h,F||u===s.value||(s.value=u),s.defaultValue=u}v=v??_,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=F?s.checked:!!v,s.defaultChecked=!!v,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.name=P),Rt(s)}function Sd(s,u,h){u==="number"&&Ja(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function Ns(s,u,h,v){if(s=s.options,u){u={};for(var _=0;_<h.length;_++)u["$"+h[_]]=!0;for(h=0;h<s.length;h++)_=u.hasOwnProperty("$"+s[h].value),s[h].selected!==_&&(s[h].selected=_),_&&v&&(s[h].defaultSelected=!0)}else{for(h=""+an(h),u=null,_=0;_<s.length;_++){if(s[_].value===h){s[_].selected=!0,v&&(s[_].defaultSelected=!0);return}u!==null||s[_].disabled||(u=s[_])}u!==null&&(u.selected=!0)}}function m0(s,u,h){if(u!=null&&(u=""+an(u),u!==s.value&&(s.value=u),h==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=h!=null?""+an(h):""}function Ms(s,u,h,v){if(u==null){if(v!=null){if(h!=null)throw Error(n(92));if(ye(v)){if(1<v.length)throw Error(n(93));v=v[0]}h=v}h==null&&(h=""),u=h}h=an(u),s.defaultValue=h,v=s.textContent,v===h&&v!==""&&v!==null&&(s.value=v),Rt(s)}function ai(s,u){if(u){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=u;return}}s.textContent=u}var y0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cd(s,u,h){var v=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?v?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":v?s.setProperty(u,h):typeof h!="number"||h===0||y0.has(u)?u==="float"?s.cssFloat=h:s[u]=(""+h).trim():s[u]=h+"px"}function Td(s,u,h){if(u!=null&&typeof u!="object")throw Error(n(62));if(s=s.style,h!=null){for(var v in h)!h.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var _ in u)v=u[_],u.hasOwnProperty(_)&&h[_]!==v&&Cd(s,_,v)}else for(var A in u)u.hasOwnProperty(A)&&Cd(s,A,u[A])}function Cu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tu(s){return ks.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ea(){}var Id=null;function qi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var js=null,eo=null;function uc(s){var u=$i(s);if(u&&(s=u.stateNode)){var h=s[nn]||null;e:switch(s=u.stateNode,u.type){case"input":if(Su(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ii(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var v=h[u];if(v!==s&&v.form===s.form){var _=v[nn]||null;if(!_)throw Error(n(90));Su(v,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<h.length;u++)v=h[u],v.form===s.form&&lc(v)}break e;case"textarea":m0(s,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Ns(s,!!h.multiple,u,!1)}}}var Iu=!1;function Ls(s,u,h){if(Iu)return s(u,h);Iu=!0;try{var v=s(u);return v}finally{if(Iu=!1,(js!==null||eo!==null)&&(dg(),js&&(u=js,s=eo,eo=js=null,uc(u),s)))for(u=0;u<s.length;u++)uc(s[u])}}function Aa(s,u){var h=s.stateNode;if(h===null)return null;var v=h[nn]||null;if(v===null)return null;h=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(n(231,u,typeof h));return h}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(Gi)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){fc=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{fc=!1}var to=null,Od=null,dc=null;function Rd(){if(dc)return dc;var s,u=Od,h=u.length,v,_="value"in to?to.value:to.textContent,A=_.length;for(s=0;s<h&&u[s]===_[s];s++);var P=h-s;for(v=1;v<=P&&u[h-v]===_[A-v];v++);return dc=_.slice(s,1<v?1-v:void 0)}function hc(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function Mo(){return!0}function Sa(){return!1}function mn(s){function u(h,v,_,A,P){this._reactName=h,this._targetInst=_,this.type=v,this.nativeEvent=A,this.target=P,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(h=s[F],this[F]=h?h(A):A[F]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Mo:Sa,this.isPropagationStopped=Sa,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),u}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ro=mn(ko),Bs=p({},ko,{view:0,detail:0}),Pd=mn(Bs),Us,Ou,no,Ru=p({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==no&&(no&&s.type==="mousemove"?(Us=s.screenX-no.screenX,Ou=s.screenY-no.screenY):Ou=Us=0,no=s),Us)},movementY:function(s){return"movementY"in s?s.movementY:Ou}}),Dd=mn(Ru),pc=p({},Ru,{dataTransfer:0}),b0=mn(pc),_0=p({},Bs,{relatedTarget:0}),gc=mn(_0),Nd=p({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),w0=mn(Nd),Pu=p({},ko,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),E0=mn(Pu),A0=p({},ko,{data:0}),io=mn(A0),S0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I0(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=T0[s])?!!u[s]:!1}function Fs(){return I0}var Kn=p({},Bs,{key:function(s){if(s.key){var u=S0[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=hc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?C0[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(s){return s.type==="keypress"?hc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?hc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),O0=mn(Kn),R0=p({},Ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jo=mn(R0),x=p({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),T=mn(x),M=p({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),V=mn(M),Y=p({},Ru,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=mn(Y),ve=p({},ko,{newState:0,oldState:0}),We=mn(ve),Er=[9,13,27,32],_t=Gi&&"CompositionEvent"in window,nr=null;Gi&&"documentMode"in document&&(nr=document.documentMode);var Wi=Gi&&"TextEvent"in window&&!nr,ao=Gi&&(!_t||nr&&8<nr&&11>=nr),Ca=" ",Ta=!1;function vc(s,u){switch(s){case"keyup":return Er.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Du(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Nu=!1;function xB(s,u){switch(s){case"compositionend":return Du(u);case"keypress":return u.which!==32?null:(Ta=!0,Ca);case"textInput":return s=u.data,s===Ca&&Ta?null:s;default:return null}}function bB(s,u){if(Nu)return s==="compositionend"||!_t&&vc(s,u)?(s=Rd(),dc=Od=to=null,Nu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ao&&u.locale!=="ko"?null:u.data;default:return null}}var _B={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VC(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!_B[s.type]:u==="textarea"}function HC(s,u,h,v){js?eo?eo.push(v):eo=[v]:js=v,u=xg(u,"onChange"),0<u.length&&(h=new ro("onChange","change",null,h,v),s.push({event:h,listeners:u}))}var Md=null,kd=null;function wB(s){S3(s,0)}function P0(s){var u=_i(s);if(lc(u))return s}function $C(s,u){if(s==="change")return u}var qC=!1;if(Gi){var yy;if(Gi){var xy="oninput"in document;if(!xy){var GC=document.createElement("div");GC.setAttribute("oninput","return;"),xy=typeof GC.oninput=="function"}yy=xy}else yy=!1;qC=yy&&(!document.documentMode||9<document.documentMode)}function WC(){Md&&(Md.detachEvent("onpropertychange",KC),kd=Md=null)}function KC(s){if(s.propertyName==="value"&&P0(kd)){var u=[];HC(u,kd,s,qi(s)),Ls(wB,u)}}function EB(s,u,h){s==="focusin"?(WC(),Md=u,kd=h,Md.attachEvent("onpropertychange",KC)):s==="focusout"&&WC()}function AB(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return P0(kd)}function SB(s,u){if(s==="click")return P0(u)}function CB(s,u){if(s==="input"||s==="change")return P0(u)}function TB(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Ei=typeof Object.is=="function"?Object.is:TB;function jd(s,u){if(Ei(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var h=Object.keys(s),v=Object.keys(u);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var _=h[v];if(!Or.call(u,_)||!Ei(s[_],u[_]))return!1}return!0}function XC(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function YC(s,u){var h=XC(s);s=0;for(var v;h;){if(h.nodeType===3){if(v=s+h.textContent.length,s<=u&&v>=u)return{node:h,offset:u-s};s=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=XC(h)}}function QC(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?QC(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function ZC(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=Ja(s.document);u instanceof s.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)s=u.contentWindow;else break;u=Ja(s.document)}return u}function by(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var IB=Gi&&"documentMode"in document&&11>=document.documentMode,Mu=null,_y=null,Ld=null,wy=!1;function JC(s,u,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;wy||Mu==null||Mu!==Ja(v)||(v=Mu,"selectionStart"in v&&by(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ld&&jd(Ld,v)||(Ld=v,v=xg(_y,"onSelect"),0<v.length&&(u=new ro("onSelect","select",null,u,h),s.push({event:u,listeners:v}),u.target=Mu)))}function mc(s,u){var h={};return h[s.toLowerCase()]=u.toLowerCase(),h["Webkit"+s]="webkit"+u,h["Moz"+s]="moz"+u,h}var ku={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionrun:mc("Transition","TransitionRun"),transitionstart:mc("Transition","TransitionStart"),transitioncancel:mc("Transition","TransitionCancel"),transitionend:mc("Transition","TransitionEnd")},Ey={},eT={};Gi&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete ku.animationend.animation,delete ku.animationiteration.animation,delete ku.animationstart.animation),"TransitionEvent"in window||delete ku.transitionend.transition);function yc(s){if(Ey[s])return Ey[s];if(!ku[s])return s;var u=ku[s],h;for(h in u)if(u.hasOwnProperty(h)&&h in eT)return Ey[s]=u[h];return s}var tT=yc("animationend"),rT=yc("animationiteration"),nT=yc("animationstart"),OB=yc("transitionrun"),RB=yc("transitionstart"),PB=yc("transitioncancel"),iT=yc("transitionend"),aT=new Map,Ay="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ay.push("scrollEnd");function Ia(s,u){aT.set(s,u),Qa(u,[s])}var D0=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ki=[],ju=0,Sy=0;function N0(){for(var s=ju,u=Sy=ju=0;u<s;){var h=Ki[u];Ki[u++]=null;var v=Ki[u];Ki[u++]=null;var _=Ki[u];Ki[u++]=null;var A=Ki[u];if(Ki[u++]=null,v!==null&&_!==null){var P=v.pending;P===null?_.next=_:(_.next=P.next,P.next=_),v.pending=_}A!==0&&oT(h,_,A)}}function M0(s,u,h,v){Ki[ju++]=s,Ki[ju++]=u,Ki[ju++]=h,Ki[ju++]=v,Sy|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function Cy(s,u,h,v){return M0(s,u,h,v),k0(s)}function xc(s,u){return M0(s,null,null,u),k0(s)}function oT(s,u,h){s.lanes|=h;var v=s.alternate;v!==null&&(v.lanes|=h);for(var _=!1,A=s.return;A!==null;)A.childLanes|=h,v=A.alternate,v!==null&&(v.childLanes|=h),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(_=!0)),s=A,A=A.return;return s.tag===3?(A=s.stateNode,_&&u!==null&&(_=31-wr(h),s=A.hiddenUpdates,v=s[_],v===null?s[_]=[u]:v.push(u),u.lane=h|536870912),A):null}function k0(s){if(50<ah)throw ah=0,kx=null,Error(n(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var Lu={};function DB(s,u,h,v){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(s,u,h,v){return new DB(s,u,h,v)}function Ty(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Lo(s,u){var h=s.alternate;return h===null?(h=Ai(s.tag,u,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=u,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,u=s.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function sT(s,u){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,u=h.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function j0(s,u,h,v,_,A){var P=0;if(v=s,typeof s=="function")Ty(s)&&(P=1);else if(typeof s=="string")P=LU(s,h,we.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=Ai(31,h,u,_),s.elementType=L,s.lanes=A,s;case w:return bc(h.children,_,A,u);case E:P=8,_|=24;break;case S:return s=Ai(12,h,u,_|2),s.elementType=S,s.lanes=A,s;case k:return s=Ai(13,h,u,_),s.elementType=k,s.lanes=A,s;case B:return s=Ai(19,h,u,_),s.elementType=B,s.lanes=A,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:P=10;break e;case I:P=9;break e;case D:P=11;break e;case R:P=14;break e;case N:P=16,v=null;break e}P=29,h=Error(n(130,s===null?"null":typeof s,"")),v=null}return u=Ai(P,h,u,_),u.elementType=s,u.type=v,u.lanes=A,u}function bc(s,u,h,v){return s=Ai(7,s,v,u),s.lanes=h,s}function Iy(s,u,h){return s=Ai(6,s,null,u),s.lanes=h,s}function lT(s){var u=Ai(18,null,null,0);return u.stateNode=s,u}function Oy(s,u,h){return u=Ai(4,s.children!==null?s.children:[],s.key,u),u.lanes=h,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var cT=new WeakMap;function Xi(s,u){if(typeof s=="object"&&s!==null){var h=cT.get(s);return h!==void 0?h:(u={value:s,source:u,stack:Os(u)},cT.set(s,u),u)}return{value:s,source:u,stack:Os(u)}}var Bu=[],Uu=0,L0=null,Bd=0,Yi=[],Qi=0,zs=null,oo=1,so="";function Bo(s,u){Bu[Uu++]=Bd,Bu[Uu++]=L0,L0=s,Bd=u}function uT(s,u,h){Yi[Qi++]=oo,Yi[Qi++]=so,Yi[Qi++]=zs,zs=s;var v=oo;s=so;var _=32-wr(v)-1;v&=~(1<<_),h+=1;var A=32-wr(u)+_;if(30<A){var P=_-_%5;A=(v&(1<<P)-1).toString(32),v>>=P,_-=P,oo=1<<32-wr(u)+_|h<<_|v,so=A+s}else oo=1<<A|h<<_|v,so=s}function Ry(s){s.return!==null&&(Bo(s,1),uT(s,1,0))}function Py(s){for(;s===L0;)L0=Bu[--Uu],Bu[Uu]=null,Bd=Bu[--Uu],Bu[Uu]=null;for(;s===zs;)zs=Yi[--Qi],Yi[Qi]=null,so=Yi[--Qi],Yi[Qi]=null,oo=Yi[--Qi],Yi[Qi]=null}function fT(s,u){Yi[Qi++]=oo,Yi[Qi++]=so,Yi[Qi++]=zs,oo=u.id,so=u.overflow,zs=s}var yn=null,Qt=null,ft=!1,Vs=null,Zi=!1,Dy=Error(n(519));function Hs(s){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ud(Xi(u,s)),Dy}function dT(s){var u=s.stateNode,h=s.type,v=s.memoizedProps;switch(u[Pr]=s,u[nn]=v,h){case"dialog":nt("cancel",u),nt("close",u);break;case"iframe":case"object":case"embed":nt("load",u);break;case"video":case"audio":for(h=0;h<sh.length;h++)nt(sh[h],u);break;case"source":nt("error",u);break;case"img":case"image":case"link":nt("error",u),nt("load",u);break;case"details":nt("toggle",u);break;case"input":nt("invalid",u),v0(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":nt("invalid",u);break;case"textarea":nt("invalid",u),Ms(u,v.value,v.defaultValue,v.children)}h=v.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||v.suppressHydrationWarning===!0||O3(u.textContent,h)?(v.popover!=null&&(nt("beforetoggle",u),nt("toggle",u)),v.onScroll!=null&&nt("scroll",u),v.onScrollEnd!=null&&nt("scrollend",u),v.onClick!=null&&(u.onclick=Ea),u=!0):u=!1,u||Hs(s,!0)}function hT(s){for(yn=s.return;yn;)switch(yn.tag){case 5:case 31:case 13:Zi=!1;return;case 27:case 3:Zi=!0;return;default:yn=yn.return}}function Fu(s){if(s!==yn)return!1;if(!ft)return hT(s),ft=!0,!1;var u=s.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||Yx(s.type,s.memoizedProps)),h=!h),h&&Qt&&Hs(s),hT(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Qt=B3(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));Qt=B3(s)}else u===27?(u=Qt,nl(s.type)?(s=t2,t2=null,Qt=s):Qt=u):Qt=yn?ea(s.stateNode.nextSibling):null;return!0}function _c(){Qt=yn=null,ft=!1}function Ny(){var s=Vs;return s!==null&&(ci===null?ci=s:ci.push.apply(ci,s),Vs=null),s}function Ud(s){Vs===null?Vs=[s]:Vs.push(s)}var My=G(null),wc=null,Uo=null;function $s(s,u,h){xe(My,u._currentValue),u._currentValue=h}function Fo(s){s._currentValue=My.current,ee(My)}function ky(s,u,h){for(;s!==null;){var v=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),s===h)break;s=s.return}}function jy(s,u,h,v){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var A=_.dependencies;if(A!==null){var P=_.child;A=A.firstContext;e:for(;A!==null;){var F=A;A=_;for(var q=0;q<u.length;q++)if(F.context===u[q]){A.lanes|=h,F=A.alternate,F!==null&&(F.lanes|=h),ky(A.return,h,s),v||(P=null);break e}A=F.next}}else if(_.tag===18){if(P=_.return,P===null)throw Error(n(341));P.lanes|=h,A=P.alternate,A!==null&&(A.lanes|=h),ky(P,h,s),P=null}else P=_.child;if(P!==null)P.return=_;else for(P=_;P!==null;){if(P===s){P=null;break}if(_=P.sibling,_!==null){_.return=P.return,P=_;break}P=P.return}_=P}}function zu(s,u,h,v){s=null;for(var _=u,A=!1;_!==null;){if(!A){if((_.flags&524288)!==0)A=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var P=_.alternate;if(P===null)throw Error(n(387));if(P=P.memoizedProps,P!==null){var F=_.type;Ei(_.pendingProps.value,P.value)||(s!==null?s.push(F):s=[F])}}else if(_===at.current){if(P=_.alternate,P===null)throw Error(n(387));P.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(dh):s=[dh])}_=_.return}s!==null&&jy(u,s,h,v),u.flags|=262144}function B0(s){for(s=s.firstContext;s!==null;){if(!Ei(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ec(s){wc=s,Uo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function xn(s){return pT(wc,s)}function U0(s,u){return wc===null&&Ec(s),pT(s,u)}function pT(s,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Uo===null){if(s===null)throw Error(n(308));Uo=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else Uo=Uo.next=u;return h}var NB=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(h,v){s.push(v)}};this.abort=function(){u.aborted=!0,s.forEach(function(h){return h()})}},MB=t.unstable_scheduleCallback,kB=t.unstable_NormalPriority,Mr={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ly(){return{controller:new NB,data:new Map,refCount:0}}function Fd(s){s.refCount--,s.refCount===0&&MB(kB,function(){s.controller.abort()})}var zd=null,By=0,Vu=0,Hu=null;function jB(s,u){if(zd===null){var h=zd=[];By=0,Vu=zx(),Hu={status:"pending",value:void 0,then:function(v){h.push(v)}}}return By++,u.then(gT,gT),u}function gT(){if(--By===0&&zd!==null){Hu!==null&&(Hu.status="fulfilled");var s=zd;zd=null,Vu=0,Hu=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function LB(s,u){var h=[],v={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return s.then(function(){v.status="fulfilled",v.value=u;for(var _=0;_<h.length;_++)(0,h[_])(u)},function(_){for(v.status="rejected",v.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),v}var vT=X.S;X.S=function(s,u){J4=Wn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&jB(s,u),vT!==null&&vT(s,u)};var Ac=G(null);function Uy(){var s=Ac.current;return s!==null?s:$t.pooledCache}function F0(s,u){u===null?xe(Ac,Ac.current):xe(Ac,u.pool)}function mT(){var s=Uy();return s===null?null:{parent:Mr._currentValue,pool:s}}var $u=Error(n(460)),Fy=Error(n(474)),z0=Error(n(542)),V0={then:function(){}};function yT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function xT(s,u,h){switch(h=s[h],h===void 0?s.push(u):h!==u&&(u.then(Ea,Ea),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,_T(s),s;default:if(typeof u.status=="string")u.then(Ea,Ea);else{if(s=$t,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=u,s.status="pending",s.then(function(v){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=v}},function(v){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,_T(s),s}throw Cc=u,$u}}function Sc(s){try{var u=s._init;return u(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Cc=h,$u):h}}var Cc=null;function bT(){if(Cc===null)throw Error(n(459));var s=Cc;return Cc=null,s}function _T(s){if(s===$u||s===z0)throw Error(n(483))}var qu=null,Vd=0;function H0(s){var u=Vd;return Vd+=1,qu===null&&(qu=[]),xT(qu,s,u)}function Hd(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function $0(s,u){throw u.$$typeof===g?Error(n(525)):(s=Object.prototype.toString.call(u),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function wT(s){function u(K,W){if(s){var Z=K.deletions;Z===null?(K.deletions=[W],K.flags|=16):Z.push(W)}}function h(K,W){if(!s)return null;for(;W!==null;)u(K,W),W=W.sibling;return null}function v(K){for(var W=new Map;K!==null;)K.key!==null?W.set(K.key,K):W.set(K.index,K),K=K.sibling;return W}function _(K,W){return K=Lo(K,W),K.index=0,K.sibling=null,K}function A(K,W,Z){return K.index=Z,s?(Z=K.alternate,Z!==null?(Z=Z.index,Z<W?(K.flags|=67108866,W):Z):(K.flags|=67108866,W)):(K.flags|=1048576,W)}function P(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function F(K,W,Z,le){return W===null||W.tag!==6?(W=Iy(Z,K.mode,le),W.return=K,W):(W=_(W,Z),W.return=K,W)}function q(K,W,Z,le){var Ne=Z.type;return Ne===w?se(K,W,Z.props.children,le,Z.key):W!==null&&(W.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===N&&Sc(Ne)===W.type)?(W=_(W,Z.props),Hd(W,Z),W.return=K,W):(W=j0(Z.type,Z.key,Z.props,null,K.mode,le),Hd(W,Z),W.return=K,W)}function J(K,W,Z,le){return W===null||W.tag!==4||W.stateNode.containerInfo!==Z.containerInfo||W.stateNode.implementation!==Z.implementation?(W=Oy(Z,K.mode,le),W.return=K,W):(W=_(W,Z.children||[]),W.return=K,W)}function se(K,W,Z,le,Ne){return W===null||W.tag!==7?(W=bc(Z,K.mode,le,Ne),W.return=K,W):(W=_(W,Z),W.return=K,W)}function fe(K,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Iy(""+W,K.mode,Z),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case m:return Z=j0(W.type,W.key,W.props,null,K.mode,Z),Hd(Z,W),Z.return=K,Z;case b:return W=Oy(W,K.mode,Z),W.return=K,W;case N:return W=Sc(W),fe(K,W,Z)}if(ye(W)||H(W))return W=bc(W,K.mode,Z,null),W.return=K,W;if(typeof W.then=="function")return fe(K,H0(W),Z);if(W.$$typeof===O)return fe(K,U0(K,W),Z);$0(K,W)}return null}function te(K,W,Z,le){var Ne=W!==null?W.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ne!==null?null:F(K,W,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:return Z.key===Ne?q(K,W,Z,le):null;case b:return Z.key===Ne?J(K,W,Z,le):null;case N:return Z=Sc(Z),te(K,W,Z,le)}if(ye(Z)||H(Z))return Ne!==null?null:se(K,W,Z,le,null);if(typeof Z.then=="function")return te(K,W,H0(Z),le);if(Z.$$typeof===O)return te(K,W,U0(K,Z),le);$0(K,Z)}return null}function ae(K,W,Z,le,Ne){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return K=K.get(Z)||null,F(W,K,""+le,Ne);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case m:return K=K.get(le.key===null?Z:le.key)||null,q(W,K,le,Ne);case b:return K=K.get(le.key===null?Z:le.key)||null,J(W,K,le,Ne);case N:return le=Sc(le),ae(K,W,Z,le,Ne)}if(ye(le)||H(le))return K=K.get(Z)||null,se(W,K,le,Ne,null);if(typeof le.then=="function")return ae(K,W,Z,H0(le),Ne);if(le.$$typeof===O)return ae(K,W,Z,U0(W,le),Ne);$0(W,le)}return null}function Te(K,W,Z,le){for(var Ne=null,vt=null,Re=W,Xe=W=0,st=null;Re!==null&&Xe<Z.length;Xe++){Re.index>Xe?(st=Re,Re=null):st=Re.sibling;var mt=te(K,Re,Z[Xe],le);if(mt===null){Re===null&&(Re=st);break}s&&Re&&mt.alternate===null&&u(K,Re),W=A(mt,W,Xe),vt===null?Ne=mt:vt.sibling=mt,vt=mt,Re=st}if(Xe===Z.length)return h(K,Re),ft&&Bo(K,Xe),Ne;if(Re===null){for(;Xe<Z.length;Xe++)Re=fe(K,Z[Xe],le),Re!==null&&(W=A(Re,W,Xe),vt===null?Ne=Re:vt.sibling=Re,vt=Re);return ft&&Bo(K,Xe),Ne}for(Re=v(Re);Xe<Z.length;Xe++)st=ae(Re,K,Xe,Z[Xe],le),st!==null&&(s&&st.alternate!==null&&Re.delete(st.key===null?Xe:st.key),W=A(st,W,Xe),vt===null?Ne=st:vt.sibling=st,vt=st);return s&&Re.forEach(function(ll){return u(K,ll)}),ft&&Bo(K,Xe),Ne}function Be(K,W,Z,le){if(Z==null)throw Error(n(151));for(var Ne=null,vt=null,Re=W,Xe=W=0,st=null,mt=Z.next();Re!==null&&!mt.done;Xe++,mt=Z.next()){Re.index>Xe?(st=Re,Re=null):st=Re.sibling;var ll=te(K,Re,mt.value,le);if(ll===null){Re===null&&(Re=st);break}s&&Re&&ll.alternate===null&&u(K,Re),W=A(ll,W,Xe),vt===null?Ne=ll:vt.sibling=ll,vt=ll,Re=st}if(mt.done)return h(K,Re),ft&&Bo(K,Xe),Ne;if(Re===null){for(;!mt.done;Xe++,mt=Z.next())mt=fe(K,mt.value,le),mt!==null&&(W=A(mt,W,Xe),vt===null?Ne=mt:vt.sibling=mt,vt=mt);return ft&&Bo(K,Xe),Ne}for(Re=v(Re);!mt.done;Xe++,mt=Z.next())mt=ae(Re,K,Xe,mt.value,le),mt!==null&&(s&&mt.alternate!==null&&Re.delete(mt.key===null?Xe:mt.key),W=A(mt,W,Xe),vt===null?Ne=mt:vt.sibling=mt,vt=mt);return s&&Re.forEach(function(KU){return u(K,KU)}),ft&&Bo(K,Xe),Ne}function zt(K,W,Z,le){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case m:e:{for(var Ne=Z.key;W!==null;){if(W.key===Ne){if(Ne=Z.type,Ne===w){if(W.tag===7){h(K,W.sibling),le=_(W,Z.props.children),le.return=K,K=le;break e}}else if(W.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===N&&Sc(Ne)===W.type){h(K,W.sibling),le=_(W,Z.props),Hd(le,Z),le.return=K,K=le;break e}h(K,W);break}else u(K,W);W=W.sibling}Z.type===w?(le=bc(Z.props.children,K.mode,le,Z.key),le.return=K,K=le):(le=j0(Z.type,Z.key,Z.props,null,K.mode,le),Hd(le,Z),le.return=K,K=le)}return P(K);case b:e:{for(Ne=Z.key;W!==null;){if(W.key===Ne)if(W.tag===4&&W.stateNode.containerInfo===Z.containerInfo&&W.stateNode.implementation===Z.implementation){h(K,W.sibling),le=_(W,Z.children||[]),le.return=K,K=le;break e}else{h(K,W);break}else u(K,W);W=W.sibling}le=Oy(Z,K.mode,le),le.return=K,K=le}return P(K);case N:return Z=Sc(Z),zt(K,W,Z,le)}if(ye(Z))return Te(K,W,Z,le);if(H(Z)){if(Ne=H(Z),typeof Ne!="function")throw Error(n(150));return Z=Ne.call(Z),Be(K,W,Z,le)}if(typeof Z.then=="function")return zt(K,W,H0(Z),le);if(Z.$$typeof===O)return zt(K,W,U0(K,Z),le);$0(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,W!==null&&W.tag===6?(h(K,W.sibling),le=_(W,Z),le.return=K,K=le):(h(K,W),le=Iy(Z,K.mode,le),le.return=K,K=le),P(K)):h(K,W)}return function(K,W,Z,le){try{Vd=0;var Ne=zt(K,W,Z,le);return qu=null,Ne}catch(Re){if(Re===$u||Re===z0)throw Re;var vt=Ai(29,Re,null,K.mode);return vt.lanes=le,vt.return=K,vt}finally{}}}var Tc=wT(!0),ET=wT(!1),qs=!1;function zy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vy(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ws(s,u,h){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(wt&2)!==0){var _=v.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),v.pending=u,u=k0(s),oT(s,null,h),u}return M0(s,v,u,h),k0(s)}function $d(s,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var v=u.lanes;v&=s.pendingLanes,h|=v,u.lanes=h,md(s,h)}}function Hy(s,u){var h=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var _=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var P={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?_=A=P:A=A.next=P,h=h.next}while(h!==null);A===null?_=A=u:A=A.next=u}else _=A=u;h={baseState:v.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=u:s.next=u,h.lastBaseUpdate=u}var $y=!1;function qd(){if($y){var s=Hu;if(s!==null)throw s}}function Gd(s,u,h,v){$y=!1;var _=s.updateQueue;qs=!1;var A=_.firstBaseUpdate,P=_.lastBaseUpdate,F=_.shared.pending;if(F!==null){_.shared.pending=null;var q=F,J=q.next;q.next=null,P===null?A=J:P.next=J,P=q;var se=s.alternate;se!==null&&(se=se.updateQueue,F=se.lastBaseUpdate,F!==P&&(F===null?se.firstBaseUpdate=J:F.next=J,se.lastBaseUpdate=q))}if(A!==null){var fe=_.baseState;P=0,se=J=q=null,F=A;do{var te=F.lane&-536870913,ae=te!==F.lane;if(ae?(ot&te)===te:(v&te)===te){te!==0&&te===Vu&&($y=!0),se!==null&&(se=se.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Te=s,Be=F;te=u;var zt=h;switch(Be.tag){case 1:if(Te=Be.payload,typeof Te=="function"){fe=Te.call(zt,fe,te);break e}fe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Be.payload,te=typeof Te=="function"?Te.call(zt,fe,te):Te,te==null)break e;fe=p({},fe,te);break e;case 2:qs=!0}}te=F.callback,te!==null&&(s.flags|=64,ae&&(s.flags|=8192),ae=_.callbacks,ae===null?_.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:F.tag,payload:F.payload,callback:F.callback,next:null},se===null?(J=se=ae,q=fe):se=se.next=ae,P|=te;if(F=F.next,F===null){if(F=_.shared.pending,F===null)break;ae=F,F=ae.next,ae.next=null,_.lastBaseUpdate=ae,_.shared.pending=null}}while(!0);se===null&&(q=fe),_.baseState=q,_.firstBaseUpdate=J,_.lastBaseUpdate=se,A===null&&(_.shared.lanes=0),Zs|=P,s.lanes=P,s.memoizedState=fe}}function AT(s,u){if(typeof s!="function")throw Error(n(191,s));s.call(u)}function ST(s,u){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)AT(h[s],u)}var Gu=G(null),q0=G(0);function CT(s,u){s=Xo,xe(q0,s),xe(Gu,u),Xo=s|u.baseLanes}function qy(){xe(q0,Xo),xe(Gu,Gu.current)}function Gy(){Xo=q0.current,ee(Gu),ee(q0)}var Si=G(null),Ji=null;function Ks(s){var u=s.alternate;xe(Ar,Ar.current&1),xe(Si,s),Ji===null&&(u===null||Gu.current!==null||u.memoizedState!==null)&&(Ji=s)}function Wy(s){xe(Ar,Ar.current),xe(Si,s),Ji===null&&(Ji=s)}function TT(s){s.tag===22?(xe(Ar,Ar.current),xe(Si,s),Ji===null&&(Ji=s)):Xs()}function Xs(){xe(Ar,Ar.current),xe(Si,Si.current)}function Ci(s){ee(Si),Ji===s&&(Ji=null),ee(Ar)}var Ar=G(0);function G0(s){for(var u=s;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Jx(h)||e2(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var zo=0,Ke=null,Ut=null,kr=null,W0=!1,Wu=!1,Ic=!1,K0=0,Wd=0,Ku=null,BB=0;function hr(){throw Error(n(321))}function Ky(s,u){if(u===null)return!1;for(var h=0;h<u.length&&h<s.length;h++)if(!Ei(s[h],u[h]))return!1;return!0}function Xy(s,u,h,v,_,A){return zo=A,Ke=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,X.H=s===null||s.memoizedState===null?u4:ux,Ic=!1,A=h(v,_),Ic=!1,Wu&&(A=OT(u,h,v,_)),IT(s),A}function IT(s){X.H=Yd;var u=Ut!==null&&Ut.next!==null;if(zo=0,kr=Ut=Ke=null,W0=!1,Wd=0,Ku=null,u)throw Error(n(300));s===null||jr||(s=s.dependencies,s!==null&&B0(s)&&(jr=!0))}function OT(s,u,h,v){Ke=s;var _=0;do{if(Wu&&(Ku=null),Wd=0,Wu=!1,25<=_)throw Error(n(301));if(_+=1,kr=Ut=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}X.H=f4,A=u(h,v)}while(Wu);return A}function UB(){var s=X.H,u=s.useState()[0];return u=typeof u.then=="function"?Kd(u):u,s=s.useState()[0],(Ut!==null?Ut.memoizedState:null)!==s&&(Ke.flags|=1024),u}function Yy(){var s=K0!==0;return K0=0,s}function Qy(s,u,h){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~h}function Zy(s){if(W0){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}W0=!1}zo=0,kr=Ut=Ke=null,Wu=!1,Wd=K0=0,Ku=null}function Xn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kr===null?Ke.memoizedState=kr=s:kr=kr.next=s,kr}function Sr(){if(Ut===null){var s=Ke.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var u=kr===null?Ke.memoizedState:kr.next;if(u!==null)kr=u,Ut=s;else{if(s===null)throw Ke.alternate===null?Error(n(467)):Error(n(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},kr===null?Ke.memoizedState=kr=s:kr=kr.next=s}return kr}function X0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kd(s){var u=Wd;return Wd+=1,Ku===null&&(Ku=[]),s=xT(Ku,s,u),u=Ke,(kr===null?u.memoizedState:kr.next)===null&&(u=u.alternate,X.H=u===null||u.memoizedState===null?u4:ux),s}function Y0(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Kd(s);if(s.$$typeof===O)return xn(s)}throw Error(n(438,String(s)))}function Jy(s){var u=null,h=Ke.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var v=Ke.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=X0(),Ke.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(s),v=0;v<s;v++)h[v]=U;return u.index++,h}function Vo(s,u){return typeof u=="function"?u(s):u}function Q0(s){var u=Sr();return ex(u,Ut,s)}function ex(s,u,h){var v=s.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=h;var _=s.baseQueue,A=v.pending;if(A!==null){if(_!==null){var P=_.next;_.next=A.next,A.next=P}u.baseQueue=_=A,v.pending=null}if(A=s.baseState,_===null)s.memoizedState=A;else{u=_.next;var F=P=null,q=null,J=u,se=!1;do{var fe=J.lane&-536870913;if(fe!==J.lane?(ot&fe)===fe:(zo&fe)===fe){var te=J.revertLane;if(te===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),fe===Vu&&(se=!0);else if((zo&te)===te){J=J.next,te===Vu&&(se=!0);continue}else fe={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},q===null?(F=q=fe,P=A):q=q.next=fe,Ke.lanes|=te,Zs|=te;fe=J.action,Ic&&h(A,fe),A=J.hasEagerState?J.eagerState:h(A,fe)}else te={lane:fe,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},q===null?(F=q=te,P=A):q=q.next=te,Ke.lanes|=fe,Zs|=fe;J=J.next}while(J!==null&&J!==u);if(q===null?P=A:q.next=F,!Ei(A,s.memoizedState)&&(jr=!0,se&&(h=Hu,h!==null)))throw h;s.memoizedState=A,s.baseState=P,s.baseQueue=q,v.lastRenderedState=A}return _===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function tx(s){var u=Sr(),h=u.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var v=h.dispatch,_=h.pending,A=u.memoizedState;if(_!==null){h.pending=null;var P=_=_.next;do A=s(A,P.action),P=P.next;while(P!==_);Ei(A,u.memoizedState)||(jr=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),h.lastRenderedState=A}return[A,v]}function RT(s,u,h){var v=Ke,_=Sr(),A=ft;if(A){if(h===void 0)throw Error(n(407));h=h()}else h=u();var P=!Ei((Ut||_).memoizedState,h);if(P&&(_.memoizedState=h,jr=!0),_=_.queue,ix(NT.bind(null,v,_,s),[s]),_.getSnapshot!==u||P||kr!==null&&kr.memoizedState.tag&1){if(v.flags|=2048,Xu(9,{destroy:void 0},DT.bind(null,v,_,h,u),null),$t===null)throw Error(n(349));A||(zo&127)!==0||PT(v,u,h)}return h}function PT(s,u,h){s.flags|=16384,s={getSnapshot:u,value:h},u=Ke.updateQueue,u===null?(u=X0(),Ke.updateQueue=u,u.stores=[s]):(h=u.stores,h===null?u.stores=[s]:h.push(s))}function DT(s,u,h,v){u.value=h,u.getSnapshot=v,MT(u)&&kT(s)}function NT(s,u,h){return h(function(){MT(u)&&kT(s)})}function MT(s){var u=s.getSnapshot;s=s.value;try{var h=u();return!Ei(s,h)}catch{return!0}}function kT(s){var u=xc(s,2);u!==null&&ui(u,s,2)}function rx(s){var u=Xn();if(typeof s=="function"){var h=s;if(s=h(),Ic){Hi(!0);try{h()}finally{Hi(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:s},u}function jT(s,u,h,v){return s.baseState=h,ex(s,Ut,typeof v=="function"?v:Vo)}function FB(s,u,h,v,_){if(eg(s))throw Error(n(485));if(s=u.action,s!==null){var A={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){A.listeners.push(P)}};X.T!==null?h(!0):A.isTransition=!1,v(A),h=u.pending,h===null?(A.next=u.pending=A,LT(u,A)):(A.next=h.next,u.pending=h.next=A)}}function LT(s,u){var h=u.action,v=u.payload,_=s.state;if(u.isTransition){var A=X.T,P={};X.T=P;try{var F=h(_,v),q=X.S;q!==null&&q(P,F),BT(s,u,F)}catch(J){nx(s,u,J)}finally{A!==null&&P.types!==null&&(A.types=P.types),X.T=A}}else try{A=h(_,v),BT(s,u,A)}catch(J){nx(s,u,J)}}function BT(s,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(v){UT(s,u,v)},function(v){return nx(s,u,v)}):UT(s,u,h)}function UT(s,u,h){u.status="fulfilled",u.value=h,FT(u),s.state=h,u=s.pending,u!==null&&(h=u.next,h===u?s.pending=null:(h=h.next,u.next=h,LT(s,h)))}function nx(s,u,h){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=h,FT(u),u=u.next;while(u!==v)}s.action=null}function FT(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function zT(s,u){return u}function VT(s,u){if(ft){var h=$t.formState;if(h!==null){e:{var v=Ke;if(ft){if(Qt){t:{for(var _=Qt,A=Zi;_.nodeType!==8;){if(!A){_=null;break t}if(_=ea(_.nextSibling),_===null){_=null;break t}}A=_.data,_=A==="F!"||A==="F"?_:null}if(_){Qt=ea(_.nextSibling),v=_.data==="F!";break e}}Hs(v)}v=!1}v&&(u=h[0])}}return h=Xn(),h.memoizedState=h.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zT,lastRenderedState:u},h.queue=v,h=s4.bind(null,Ke,v),v.dispatch=h,v=rx(!1),A=cx.bind(null,Ke,!1,v.queue),v=Xn(),_={state:u,dispatch:null,action:s,pending:null},v.queue=_,h=FB.bind(null,Ke,_,A,h),_.dispatch=h,v.memoizedState=s,[u,h,!1]}function HT(s){var u=Sr();return $T(u,Ut,s)}function $T(s,u,h){if(u=ex(s,u,zT)[0],s=Q0(Vo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=Kd(u)}catch(P){throw P===$u?z0:P}else v=u;u=Sr();var _=u.queue,A=_.dispatch;return h!==u.memoizedState&&(Ke.flags|=2048,Xu(9,{destroy:void 0},zB.bind(null,_,h),null)),[v,A,s]}function zB(s,u){s.action=u}function qT(s){var u=Sr(),h=Ut;if(h!==null)return $T(u,h,s);Sr(),u=u.memoizedState,h=Sr();var v=h.queue.dispatch;return h.memoizedState=s,[u,v,!1]}function Xu(s,u,h,v){return s={tag:s,create:h,deps:v,inst:u,next:null},u=Ke.updateQueue,u===null&&(u=X0(),Ke.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=s.next=s:(v=h.next,h.next=s,s.next=v,u.lastEffect=s),s}function GT(){return Sr().memoizedState}function Z0(s,u,h,v){var _=Xn();Ke.flags|=s,_.memoizedState=Xu(1|u,{destroy:void 0},h,v===void 0?null:v)}function J0(s,u,h,v){var _=Sr();v=v===void 0?null:v;var A=_.memoizedState.inst;Ut!==null&&v!==null&&Ky(v,Ut.memoizedState.deps)?_.memoizedState=Xu(u,A,h,v):(Ke.flags|=s,_.memoizedState=Xu(1|u,A,h,v))}function WT(s,u){Z0(8390656,8,s,u)}function ix(s,u){J0(2048,8,s,u)}function VB(s){Ke.flags|=4;var u=Ke.updateQueue;if(u===null)u=X0(),Ke.updateQueue=u,u.events=[s];else{var h=u.events;h===null?u.events=[s]:h.push(s)}}function KT(s){var u=Sr().memoizedState;return VB({ref:u,nextImpl:s}),function(){if((wt&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function XT(s,u){return J0(4,2,s,u)}function YT(s,u){return J0(4,4,s,u)}function QT(s,u){if(typeof u=="function"){s=s();var h=u(s);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function ZT(s,u,h){h=h!=null?h.concat([s]):null,J0(4,4,QT.bind(null,u,s),h)}function ax(){}function JT(s,u){var h=Sr();u=u===void 0?null:u;var v=h.memoizedState;return u!==null&&Ky(u,v[1])?v[0]:(h.memoizedState=[s,u],s)}function e4(s,u){var h=Sr();u=u===void 0?null:u;var v=h.memoizedState;if(u!==null&&Ky(u,v[1]))return v[0];if(v=s(),Ic){Hi(!0);try{s()}finally{Hi(!1)}}return h.memoizedState=[v,u],v}function ox(s,u,h){return h===void 0||(zo&1073741824)!==0&&(ot&261930)===0?s.memoizedState=u:(s.memoizedState=h,s=t3(),Ke.lanes|=s,Zs|=s,h)}function t4(s,u,h,v){return Ei(h,u)?h:Gu.current!==null?(s=ox(s,h,v),Ei(s,u)||(jr=!0),s):(zo&42)===0||(zo&1073741824)!==0&&(ot&261930)===0?(jr=!0,s.memoizedState=h):(s=t3(),Ke.lanes|=s,Zs|=s,u)}function r4(s,u,h,v,_){var A=re.p;re.p=A!==0&&8>A?A:8;var P=X.T,F={};X.T=F,cx(s,!1,u,h);try{var q=_(),J=X.S;if(J!==null&&J(F,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var se=LB(q,v);Xd(s,u,se,Oi(s))}else Xd(s,u,v,Oi(s))}catch(fe){Xd(s,u,{then:function(){},status:"rejected",reason:fe},Oi())}finally{re.p=A,P!==null&&F.types!==null&&(P.types=F.types),X.T=P}}function HB(){}function sx(s,u,h,v){if(s.tag!==5)throw Error(n(476));var _=n4(s).queue;r4(s,_,u,he,h===null?HB:function(){return i4(s),h(v)})}function n4(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:he},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:h},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function i4(s){var u=n4(s);u.next===null&&(u=s.alternate.memoizedState),Xd(s,u.next.queue,{},Oi())}function lx(){return xn(dh)}function a4(){return Sr().memoizedState}function o4(){return Sr().memoizedState}function $B(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var h=Oi();s=Gs(h);var v=Ws(u,s,h);v!==null&&(ui(v,u,h),$d(v,u,h)),u={cache:Ly()},s.payload=u;return}u=u.return}}function qB(s,u,h){var v=Oi();h={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},eg(s)?l4(u,h):(h=Cy(s,u,h,v),h!==null&&(ui(h,s,v),c4(h,u,v)))}function s4(s,u,h){var v=Oi();Xd(s,u,h,v)}function Xd(s,u,h,v){var _={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(eg(s))l4(u,_);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var P=u.lastRenderedState,F=A(P,h);if(_.hasEagerState=!0,_.eagerState=F,Ei(F,P))return M0(s,u,_,0),$t===null&&N0(),!1}catch{}finally{}if(h=Cy(s,u,_,v),h!==null)return ui(h,s,v),c4(h,u,v),!0}return!1}function cx(s,u,h,v){if(v={lane:2,revertLane:zx(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},eg(s)){if(u)throw Error(n(479))}else u=Cy(s,h,v,2),u!==null&&ui(u,s,2)}function eg(s){var u=s.alternate;return s===Ke||u!==null&&u===Ke}function l4(s,u){Wu=W0=!0;var h=s.pending;h===null?u.next=u:(u.next=h.next,h.next=u),s.pending=u}function c4(s,u,h){if((h&4194048)!==0){var v=u.lanes;v&=s.pendingLanes,h|=v,u.lanes=h,md(s,h)}}var Yd={readContext:xn,use:Y0,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useLayoutEffect:hr,useInsertionEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useSyncExternalStore:hr,useId:hr,useHostTransitionStatus:hr,useFormState:hr,useActionState:hr,useOptimistic:hr,useMemoCache:hr,useCacheRefresh:hr};Yd.useEffectEvent=hr;var u4={readContext:xn,use:Y0,useCallback:function(s,u){return Xn().memoizedState=[s,u===void 0?null:u],s},useContext:xn,useEffect:WT,useImperativeHandle:function(s,u,h){h=h!=null?h.concat([s]):null,Z0(4194308,4,QT.bind(null,u,s),h)},useLayoutEffect:function(s,u){return Z0(4194308,4,s,u)},useInsertionEffect:function(s,u){Z0(4,2,s,u)},useMemo:function(s,u){var h=Xn();u=u===void 0?null:u;var v=s();if(Ic){Hi(!0);try{s()}finally{Hi(!1)}}return h.memoizedState=[v,u],v},useReducer:function(s,u,h){var v=Xn();if(h!==void 0){var _=h(u);if(Ic){Hi(!0);try{h(u)}finally{Hi(!1)}}}else _=u;return v.memoizedState=v.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},v.queue=s,s=s.dispatch=qB.bind(null,Ke,s),[v.memoizedState,s]},useRef:function(s){var u=Xn();return s={current:s},u.memoizedState=s},useState:function(s){s=rx(s);var u=s.queue,h=s4.bind(null,Ke,u);return u.dispatch=h,[s.memoizedState,h]},useDebugValue:ax,useDeferredValue:function(s,u){var h=Xn();return ox(h,s,u)},useTransition:function(){var s=rx(!1);return s=r4.bind(null,Ke,s.queue,!0,!1),Xn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,h){var v=Ke,_=Xn();if(ft){if(h===void 0)throw Error(n(407));h=h()}else{if(h=u(),$t===null)throw Error(n(349));(ot&127)!==0||PT(v,u,h)}_.memoizedState=h;var A={value:h,getSnapshot:u};return _.queue=A,WT(NT.bind(null,v,A,s),[s]),v.flags|=2048,Xu(9,{destroy:void 0},DT.bind(null,v,A,h,u),null),h},useId:function(){var s=Xn(),u=$t.identifierPrefix;if(ft){var h=so,v=oo;h=(v&~(1<<32-wr(v)-1)).toString(32)+h,u="_"+u+"R_"+h,h=K0++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=BB++,u="_"+u+"r_"+h.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:lx,useFormState:VT,useActionState:VT,useOptimistic:function(s){var u=Xn();u.memoizedState=u.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=cx.bind(null,Ke,!0,h),h.dispatch=u,[s,u]},useMemoCache:Jy,useCacheRefresh:function(){return Xn().memoizedState=$B.bind(null,Ke)},useEffectEvent:function(s){var u=Xn(),h={impl:s};return u.memoizedState=h,function(){if((wt&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},ux={readContext:xn,use:Y0,useCallback:JT,useContext:xn,useEffect:ix,useImperativeHandle:ZT,useInsertionEffect:XT,useLayoutEffect:YT,useMemo:e4,useReducer:Q0,useRef:GT,useState:function(){return Q0(Vo)},useDebugValue:ax,useDeferredValue:function(s,u){var h=Sr();return t4(h,Ut.memoizedState,s,u)},useTransition:function(){var s=Q0(Vo)[0],u=Sr().memoizedState;return[typeof s=="boolean"?s:Kd(s),u]},useSyncExternalStore:RT,useId:a4,useHostTransitionStatus:lx,useFormState:HT,useActionState:HT,useOptimistic:function(s,u){var h=Sr();return jT(h,Ut,s,u)},useMemoCache:Jy,useCacheRefresh:o4};ux.useEffectEvent=KT;var f4={readContext:xn,use:Y0,useCallback:JT,useContext:xn,useEffect:ix,useImperativeHandle:ZT,useInsertionEffect:XT,useLayoutEffect:YT,useMemo:e4,useReducer:tx,useRef:GT,useState:function(){return tx(Vo)},useDebugValue:ax,useDeferredValue:function(s,u){var h=Sr();return Ut===null?ox(h,s,u):t4(h,Ut.memoizedState,s,u)},useTransition:function(){var s=tx(Vo)[0],u=Sr().memoizedState;return[typeof s=="boolean"?s:Kd(s),u]},useSyncExternalStore:RT,useId:a4,useHostTransitionStatus:lx,useFormState:qT,useActionState:qT,useOptimistic:function(s,u){var h=Sr();return Ut!==null?jT(h,Ut,s,u):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:Jy,useCacheRefresh:o4};f4.useEffectEvent=KT;function fx(s,u,h,v){u=s.memoizedState,h=h(v,u),h=h==null?u:p({},u,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var dx={enqueueSetState:function(s,u,h){s=s._reactInternals;var v=Oi(),_=Gs(v);_.payload=u,h!=null&&(_.callback=h),u=Ws(s,_,v),u!==null&&(ui(u,s,v),$d(u,s,v))},enqueueReplaceState:function(s,u,h){s=s._reactInternals;var v=Oi(),_=Gs(v);_.tag=1,_.payload=u,h!=null&&(_.callback=h),u=Ws(s,_,v),u!==null&&(ui(u,s,v),$d(u,s,v))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var h=Oi(),v=Gs(h);v.tag=2,u!=null&&(v.callback=u),u=Ws(s,v,h),u!==null&&(ui(u,s,h),$d(u,s,h))}};function d4(s,u,h,v,_,A,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,A,P):u.prototype&&u.prototype.isPureReactComponent?!jd(h,v)||!jd(_,A):!0}function h4(s,u,h,v){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,v),u.state!==s&&dx.enqueueReplaceState(u,u.state,null)}function Oc(s,u){var h=u;if("ref"in u){h={};for(var v in u)v!=="ref"&&(h[v]=u[v])}if(s=s.defaultProps){h===u&&(h=p({},h));for(var _ in s)h[_]===void 0&&(h[_]=s[_])}return h}function p4(s){D0(s)}function g4(s){console.error(s)}function v4(s){D0(s)}function tg(s,u){try{var h=s.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function m4(s,u,h){try{var v=s.onCaughtError;v(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function hx(s,u,h){return h=Gs(h),h.tag=3,h.payload={element:null},h.callback=function(){tg(s,u)},h}function y4(s){return s=Gs(s),s.tag=3,s}function x4(s,u,h,v){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var A=v.value;s.payload=function(){return _(A)},s.callback=function(){m4(u,h,v)}}var P=h.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(s.callback=function(){m4(u,h,v),typeof _!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var F=v.stack;this.componentDidCatch(v.value,{componentStack:F!==null?F:""})})}function GB(s,u,h,v,_){if(h.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=h.alternate,u!==null&&zu(u,h,_,!0),h=Si.current,h!==null){switch(h.tag){case 31:case 13:return Ji===null?hg():h.alternate===null&&pr===0&&(pr=3),h.flags&=-257,h.flags|=65536,h.lanes=_,v===V0?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([v]):u.add(v),Bx(s,v,_)),!1;case 22:return h.flags|=65536,v===V0?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([v]):h.add(v)),Bx(s,v,_)),!1}throw Error(n(435,h.tag))}return Bx(s,v,_),hg(),!1}if(ft)return u=Si.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,v!==Dy&&(s=Error(n(422),{cause:v}),Ud(Xi(s,h)))):(v!==Dy&&(u=Error(n(423),{cause:v}),Ud(Xi(u,h))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,v=Xi(v,h),_=hx(s.stateNode,v,_),Hy(s,_),pr!==4&&(pr=2)),!1;var A=Error(n(520),{cause:v});if(A=Xi(A,h),ih===null?ih=[A]:ih.push(A),pr!==4&&(pr=2),u===null)return!0;v=Xi(v,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,s=_&-_,h.lanes|=s,s=hx(h.stateNode,v,s),Hy(h,s),!1;case 1:if(u=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Js===null||!Js.has(A))))return h.flags|=65536,_&=-_,h.lanes|=_,_=y4(_),x4(_,s,h,v),Hy(h,_),!1}h=h.return}while(h!==null);return!1}var px=Error(n(461)),jr=!1;function bn(s,u,h,v){u.child=s===null?ET(u,null,h,v):Tc(u,s.child,h,v)}function b4(s,u,h,v,_){h=h.render;var A=u.ref;if("ref"in v){var P={};for(var F in v)F!=="ref"&&(P[F]=v[F])}else P=v;return Ec(u),v=Xy(s,u,h,P,A,_),F=Yy(),s!==null&&!jr?(Qy(s,u,_),Ho(s,u,_)):(ft&&F&&Ry(u),u.flags|=1,bn(s,u,v,_),u.child)}function _4(s,u,h,v,_){if(s===null){var A=h.type;return typeof A=="function"&&!Ty(A)&&A.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=A,w4(s,u,A,v,_)):(s=j0(h.type,null,v,u,u.mode,_),s.ref=u.ref,s.return=u,u.child=s)}if(A=s.child,!wx(s,_)){var P=A.memoizedProps;if(h=h.compare,h=h!==null?h:jd,h(P,v)&&s.ref===u.ref)return Ho(s,u,_)}return u.flags|=1,s=Lo(A,v),s.ref=u.ref,s.return=u,u.child=s}function w4(s,u,h,v,_){if(s!==null){var A=s.memoizedProps;if(jd(A,v)&&s.ref===u.ref)if(jr=!1,u.pendingProps=v=A,wx(s,_))(s.flags&131072)!==0&&(jr=!0);else return u.lanes=s.lanes,Ho(s,u,_)}return gx(s,u,h,v,_)}function E4(s,u,h,v){var _=v.children,A=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((u.flags&128)!==0){if(A=A!==null?A.baseLanes|h:h,s!==null){for(v=u.child=s.child,_=0;v!==null;)_=_|v.lanes|v.childLanes,v=v.sibling;v=_&~A}else v=0,u.child=null;return A4(s,u,A,h,v)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&F0(u,A!==null?A.cachePool:null),A!==null?CT(u,A):qy(),TT(u);else return v=u.lanes=536870912,A4(s,u,A!==null?A.baseLanes|h:h,h,v)}else A!==null?(F0(u,A.cachePool),CT(u,A),Xs(),u.memoizedState=null):(s!==null&&F0(u,null),qy(),Xs());return bn(s,u,_,h),u.child}function Qd(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function A4(s,u,h,v,_){var A=Uy();return A=A===null?null:{parent:Mr._currentValue,pool:A},u.memoizedState={baseLanes:h,cachePool:A},s!==null&&F0(u,null),qy(),TT(u),s!==null&&zu(s,u,v,!0),u.childLanes=_,null}function rg(s,u){return u=ig({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function S4(s,u,h){return Tc(u,s.child,null,h),s=rg(u,u.pendingProps),s.flags|=2,Ci(u),u.memoizedState=null,s}function WB(s,u,h){var v=u.pendingProps,_=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(ft){if(v.mode==="hidden")return s=rg(u,v),u.lanes=536870912,Qd(null,s);if(Wy(u),(s=Qt)?(s=L3(s,Zi),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:zs!==null?{id:oo,overflow:so}:null,retryLane:536870912,hydrationErrors:null},h=lT(s),h.return=u,u.child=h,yn=u,Qt=null)):s=null,s===null)throw Hs(u);return u.lanes=536870912,null}return rg(u,v)}var A=s.memoizedState;if(A!==null){var P=A.dehydrated;if(Wy(u),_)if(u.flags&256)u.flags&=-257,u=S4(s,u,h);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(n(558));else if(jr||zu(s,u,h,!1),_=(h&s.childLanes)!==0,jr||_){if(v=$t,v!==null&&(P=yd(v,h),P!==0&&P!==A.retryLane))throw A.retryLane=P,xc(s,P),ui(v,s,P),px;hg(),u=S4(s,u,h)}else s=A.treeContext,Qt=ea(P.nextSibling),yn=u,ft=!0,Vs=null,Zi=!1,s!==null&&fT(u,s),u=rg(u,v),u.flags|=4096;return u}return s=Lo(s.child,{mode:v.mode,children:v.children}),s.ref=u.ref,u.child=s,s.return=u,s}function ng(s,u){var h=u.ref;if(h===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(s===null||s.ref!==h)&&(u.flags|=4194816)}}function gx(s,u,h,v,_){return Ec(u),h=Xy(s,u,h,v,void 0,_),v=Yy(),s!==null&&!jr?(Qy(s,u,_),Ho(s,u,_)):(ft&&v&&Ry(u),u.flags|=1,bn(s,u,h,_),u.child)}function C4(s,u,h,v,_,A){return Ec(u),u.updateQueue=null,h=OT(u,v,h,_),IT(s),v=Yy(),s!==null&&!jr?(Qy(s,u,A),Ho(s,u,A)):(ft&&v&&Ry(u),u.flags|=1,bn(s,u,h,A),u.child)}function T4(s,u,h,v,_){if(Ec(u),u.stateNode===null){var A=Lu,P=h.contextType;typeof P=="object"&&P!==null&&(A=xn(P)),A=new h(v,A),u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=dx,u.stateNode=A,A._reactInternals=u,A=u.stateNode,A.props=v,A.state=u.memoizedState,A.refs={},zy(u),P=h.contextType,A.context=typeof P=="object"&&P!==null?xn(P):Lu,A.state=u.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(fx(u,h,P,v),A.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(P=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),P!==A.state&&dx.enqueueReplaceState(A,A.state,null),Gd(u,v,A,_),qd(),A.state=u.memoizedState),typeof A.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(s===null){A=u.stateNode;var F=u.memoizedProps,q=Oc(h,F);A.props=q;var J=A.context,se=h.contextType;P=Lu,typeof se=="object"&&se!==null&&(P=xn(se));var fe=h.getDerivedStateFromProps;se=typeof fe=="function"||typeof A.getSnapshotBeforeUpdate=="function",F=u.pendingProps!==F,se||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F||J!==P)&&h4(u,A,v,P),qs=!1;var te=u.memoizedState;A.state=te,Gd(u,v,A,_),qd(),J=u.memoizedState,F||te!==J||qs?(typeof fe=="function"&&(fx(u,h,fe,v),J=u.memoizedState),(q=qs||d4(u,h,q,v,te,J,P))?(se||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(u.flags|=4194308)):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=J),A.props=v,A.state=J,A.context=P,v=q):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{A=u.stateNode,Vy(s,u),P=u.memoizedProps,se=Oc(h,P),A.props=se,fe=u.pendingProps,te=A.context,J=h.contextType,q=Lu,typeof J=="object"&&J!==null&&(q=xn(J)),F=h.getDerivedStateFromProps,(J=typeof F=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(P!==fe||te!==q)&&h4(u,A,v,q),qs=!1,te=u.memoizedState,A.state=te,Gd(u,v,A,_),qd();var ae=u.memoizedState;P!==fe||te!==ae||qs||s!==null&&s.dependencies!==null&&B0(s.dependencies)?(typeof F=="function"&&(fx(u,h,F,v),ae=u.memoizedState),(se=qs||d4(u,h,se,v,te,ae,q)||s!==null&&s.dependencies!==null&&B0(s.dependencies))?(J||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,ae,q),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,ae,q)),typeof A.componentDidUpdate=="function"&&(u.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof A.componentDidUpdate!="function"||P===s.memoizedProps&&te===s.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&te===s.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=ae),A.props=v,A.state=ae,A.context=q,v=se):(typeof A.componentDidUpdate!="function"||P===s.memoizedProps&&te===s.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&te===s.memoizedState||(u.flags|=1024),v=!1)}return A=v,ng(s,u),v=(u.flags&128)!==0,A||v?(A=u.stateNode,h=v&&typeof h.getDerivedStateFromError!="function"?null:A.render(),u.flags|=1,s!==null&&v?(u.child=Tc(u,s.child,null,_),u.child=Tc(u,null,h,_)):bn(s,u,h,_),u.memoizedState=A.state,s=u.child):s=Ho(s,u,_),s}function I4(s,u,h,v){return _c(),u.flags|=256,bn(s,u,h,v),u.child}var vx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mx(s){return{baseLanes:s,cachePool:mT()}}function yx(s,u,h){return s=s!==null?s.childLanes&~h:0,u&&(s|=Ii),s}function O4(s,u,h){var v=u.pendingProps,_=!1,A=(u.flags&128)!==0,P;if((P=A)||(P=s!==null&&s.memoizedState===null?!1:(Ar.current&2)!==0),P&&(_=!0,u.flags&=-129),P=(u.flags&32)!==0,u.flags&=-33,s===null){if(ft){if(_?Ks(u):Xs(),(s=Qt)?(s=L3(s,Zi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:zs!==null?{id:oo,overflow:so}:null,retryLane:536870912,hydrationErrors:null},h=lT(s),h.return=u,u.child=h,yn=u,Qt=null)):s=null,s===null)throw Hs(u);return e2(s)?u.lanes=32:u.lanes=536870912,null}var F=v.children;return v=v.fallback,_?(Xs(),_=u.mode,F=ig({mode:"hidden",children:F},_),v=bc(v,_,h,null),F.return=u,v.return=u,F.sibling=v,u.child=F,v=u.child,v.memoizedState=mx(h),v.childLanes=yx(s,P,h),u.memoizedState=vx,Qd(null,v)):(Ks(u),xx(u,F))}var q=s.memoizedState;if(q!==null&&(F=q.dehydrated,F!==null)){if(A)u.flags&256?(Ks(u),u.flags&=-257,u=bx(s,u,h)):u.memoizedState!==null?(Xs(),u.child=s.child,u.flags|=128,u=null):(Xs(),F=v.fallback,_=u.mode,v=ig({mode:"visible",children:v.children},_),F=bc(F,_,h,null),F.flags|=2,v.return=u,F.return=u,v.sibling=F,u.child=v,Tc(u,s.child,null,h),v=u.child,v.memoizedState=mx(h),v.childLanes=yx(s,P,h),u.memoizedState=vx,u=Qd(null,v));else if(Ks(u),e2(F)){if(P=F.nextSibling&&F.nextSibling.dataset,P)var J=P.dgst;P=J,v=Error(n(419)),v.stack="",v.digest=P,Ud({value:v,source:null,stack:null}),u=bx(s,u,h)}else if(jr||zu(s,u,h,!1),P=(h&s.childLanes)!==0,jr||P){if(P=$t,P!==null&&(v=yd(P,h),v!==0&&v!==q.retryLane))throw q.retryLane=v,xc(s,v),ui(P,s,v),px;Jx(F)||hg(),u=bx(s,u,h)}else Jx(F)?(u.flags|=192,u.child=s.child,u=null):(s=q.treeContext,Qt=ea(F.nextSibling),yn=u,ft=!0,Vs=null,Zi=!1,s!==null&&fT(u,s),u=xx(u,v.children),u.flags|=4096);return u}return _?(Xs(),F=v.fallback,_=u.mode,q=s.child,J=q.sibling,v=Lo(q,{mode:"hidden",children:v.children}),v.subtreeFlags=q.subtreeFlags&65011712,J!==null?F=Lo(J,F):(F=bc(F,_,h,null),F.flags|=2),F.return=u,v.return=u,v.sibling=F,u.child=v,Qd(null,v),v=u.child,F=s.child.memoizedState,F===null?F=mx(h):(_=F.cachePool,_!==null?(q=Mr._currentValue,_=_.parent!==q?{parent:q,pool:q}:_):_=mT(),F={baseLanes:F.baseLanes|h,cachePool:_}),v.memoizedState=F,v.childLanes=yx(s,P,h),u.memoizedState=vx,Qd(s.child,v)):(Ks(u),h=s.child,s=h.sibling,h=Lo(h,{mode:"visible",children:v.children}),h.return=u,h.sibling=null,s!==null&&(P=u.deletions,P===null?(u.deletions=[s],u.flags|=16):P.push(s)),u.child=h,u.memoizedState=null,h)}function xx(s,u){return u=ig({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function ig(s,u){return s=Ai(22,s,null,u),s.lanes=0,s}function bx(s,u,h){return Tc(u,s.child,null,h),s=xx(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function R4(s,u,h){s.lanes|=u;var v=s.alternate;v!==null&&(v.lanes|=u),ky(s.return,u,h)}function _x(s,u,h,v,_,A){var P=s.memoizedState;P===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:_,treeForkCount:A}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=v,P.tail=h,P.tailMode=_,P.treeForkCount=A)}function P4(s,u,h){var v=u.pendingProps,_=v.revealOrder,A=v.tail;v=v.children;var P=Ar.current,F=(P&2)!==0;if(F?(P=P&1|2,u.flags|=128):P&=1,xe(Ar,P),bn(s,u,v,h),v=ft?Bd:0,!F&&s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&R4(s,h,u);else if(s.tag===19)R4(s,h,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(h=u.child,_=null;h!==null;)s=h.alternate,s!==null&&G0(s)===null&&(_=h),h=h.sibling;h=_,h===null?(_=u.child,u.child=null):(_=h.sibling,h.sibling=null),_x(u,!1,_,h,A,v);break;case"backwards":case"unstable_legacy-backwards":for(h=null,_=u.child,u.child=null;_!==null;){if(s=_.alternate,s!==null&&G0(s)===null){u.child=_;break}s=_.sibling,_.sibling=h,h=_,_=s}_x(u,!0,h,null,A,v);break;case"together":_x(u,!1,null,null,void 0,v);break;default:u.memoizedState=null}return u.child}function Ho(s,u,h){if(s!==null&&(u.dependencies=s.dependencies),Zs|=u.lanes,(h&u.childLanes)===0)if(s!==null){if(zu(s,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(n(153));if(u.child!==null){for(s=u.child,h=Lo(s,s.pendingProps),u.child=h,h.return=u;s.sibling!==null;)s=s.sibling,h=h.sibling=Lo(s,s.pendingProps),h.return=u;h.sibling=null}return u.child}function wx(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&B0(s)))}function KB(s,u,h){switch(u.tag){case 3:xr(u,u.stateNode.containerInfo),$s(u,Mr,s.memoizedState.cache),_c();break;case 27:case 5:He(u);break;case 4:xr(u,u.stateNode.containerInfo);break;case 10:$s(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Wy(u),null;break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(Ks(u),u.flags|=128,null):(h&u.child.childLanes)!==0?O4(s,u,h):(Ks(u),s=Ho(s,u,h),s!==null?s.sibling:null);Ks(u);break;case 19:var _=(s.flags&128)!==0;if(v=(h&u.childLanes)!==0,v||(zu(s,u,h,!1),v=(h&u.childLanes)!==0),_){if(v)return P4(s,u,h);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),xe(Ar,Ar.current),v)break;return null;case 22:return u.lanes=0,E4(s,u,h,u.pendingProps);case 24:$s(u,Mr,s.memoizedState.cache)}return Ho(s,u,h)}function D4(s,u,h){if(s!==null)if(s.memoizedProps!==u.pendingProps)jr=!0;else{if(!wx(s,h)&&(u.flags&128)===0)return jr=!1,KB(s,u,h);jr=(s.flags&131072)!==0}else jr=!1,ft&&(u.flags&1048576)!==0&&uT(u,Bd,u.index);switch(u.lanes=0,u.tag){case 16:e:{var v=u.pendingProps;if(s=Sc(u.elementType),u.type=s,typeof s=="function")Ty(s)?(v=Oc(s,v),u.tag=1,u=T4(null,u,s,v,h)):(u.tag=0,u=gx(null,u,s,v,h));else{if(s!=null){var _=s.$$typeof;if(_===D){u.tag=11,u=b4(null,u,s,v,h);break e}else if(_===R){u.tag=14,u=_4(null,u,s,v,h);break e}}throw u=ue(s)||s,Error(n(306,u,""))}}return u;case 0:return gx(s,u,u.type,u.pendingProps,h);case 1:return v=u.type,_=Oc(v,u.pendingProps),T4(s,u,v,_,h);case 3:e:{if(xr(u,u.stateNode.containerInfo),s===null)throw Error(n(387));v=u.pendingProps;var A=u.memoizedState;_=A.element,Vy(s,u),Gd(u,v,null,h);var P=u.memoizedState;if(v=P.cache,$s(u,Mr,v),v!==A.cache&&jy(u,[Mr],h,!0),qd(),v=P.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:P.cache},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){u=I4(s,u,v,h);break e}else if(v!==_){_=Xi(Error(n(424)),u),Ud(_),u=I4(s,u,v,h);break e}else{switch(s=u.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Qt=ea(s.firstChild),yn=u,ft=!0,Vs=null,Zi=!0,h=ET(u,null,v,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(_c(),v===_){u=Ho(s,u,h);break e}bn(s,u,v,h)}u=u.child}return u;case 26:return ng(s,u),s===null?(h=H3(u.type,null,u.pendingProps,null))?u.memoizedState=h:ft||(h=u.type,s=u.pendingProps,v=bg(Ge.current).createElement(h),v[Pr]=u,v[nn]=s,_n(v,h,s),Dr(v),u.stateNode=v):u.memoizedState=H3(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return He(u),s===null&&ft&&(v=u.stateNode=F3(u.type,u.pendingProps,Ge.current),yn=u,Zi=!0,_=Qt,nl(u.type)?(t2=_,Qt=ea(v.firstChild)):Qt=_),bn(s,u,u.pendingProps.children,h),ng(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&ft&&((_=v=Qt)&&(v=AU(v,u.type,u.pendingProps,Zi),v!==null?(u.stateNode=v,yn=u,Qt=ea(v.firstChild),Zi=!1,_=!0):_=!1),_||Hs(u)),He(u),_=u.type,A=u.pendingProps,P=s!==null?s.memoizedProps:null,v=A.children,Yx(_,A)?v=null:P!==null&&Yx(_,P)&&(u.flags|=32),u.memoizedState!==null&&(_=Xy(s,u,UB,null,null,h),dh._currentValue=_),ng(s,u),bn(s,u,v,h),u.child;case 6:return s===null&&ft&&((s=h=Qt)&&(h=SU(h,u.pendingProps,Zi),h!==null?(u.stateNode=h,yn=u,Qt=null,s=!0):s=!1),s||Hs(u)),null;case 13:return O4(s,u,h);case 4:return xr(u,u.stateNode.containerInfo),v=u.pendingProps,s===null?u.child=Tc(u,null,v,h):bn(s,u,v,h),u.child;case 11:return b4(s,u,u.type,u.pendingProps,h);case 7:return bn(s,u,u.pendingProps,h),u.child;case 8:return bn(s,u,u.pendingProps.children,h),u.child;case 12:return bn(s,u,u.pendingProps.children,h),u.child;case 10:return v=u.pendingProps,$s(u,u.type,v.value),bn(s,u,v.children,h),u.child;case 9:return _=u.type._context,v=u.pendingProps.children,Ec(u),_=xn(_),v=v(_),u.flags|=1,bn(s,u,v,h),u.child;case 14:return _4(s,u,u.type,u.pendingProps,h);case 15:return w4(s,u,u.type,u.pendingProps,h);case 19:return P4(s,u,h);case 31:return WB(s,u,h);case 22:return E4(s,u,h,u.pendingProps);case 24:return Ec(u),v=xn(Mr),s===null?(_=Uy(),_===null&&(_=$t,A=Ly(),_.pooledCache=A,A.refCount++,A!==null&&(_.pooledCacheLanes|=h),_=A),u.memoizedState={parent:v,cache:_},zy(u),$s(u,Mr,_)):((s.lanes&h)!==0&&(Vy(s,u),Gd(u,null,null,h),qd()),_=s.memoizedState,A=u.memoizedState,_.parent!==v?(_={parent:v,cache:v},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),$s(u,Mr,v)):(v=A.cache,$s(u,Mr,v),v!==_.cache&&jy(u,[Mr],h,!0))),bn(s,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function $o(s){s.flags|=4}function Ex(s,u,h,v,_){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(a3())s.flags|=8192;else throw Cc=V0,Fy}else s.flags&=-16777217}function N4(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!K3(u))if(a3())s.flags|=8192;else throw Cc=V0,Fy}function ag(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?f0():536870912,s.lanes|=u,Ju|=u)}function Zd(s,u){if(!ft)switch(s.tailMode){case"hidden":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function Zt(s){var u=s.alternate!==null&&s.alternate.child===s.child,h=0,v=0;if(u)for(var _=s.child;_!==null;)h|=_.lanes|_.childLanes,v|=_.subtreeFlags&65011712,v|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)h|=_.lanes|_.childLanes,v|=_.subtreeFlags,v|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=v,s.childLanes=h,u}function XB(s,u,h){var v=u.pendingProps;switch(Py(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(u),null;case 1:return Zt(u),null;case 3:return h=u.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),Fo(Mr),ge(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Fu(u)?$o(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Ny())),Zt(u),null;case 26:var _=u.type,A=u.memoizedState;return s===null?($o(u),A!==null?(Zt(u),N4(u,A)):(Zt(u),Ex(u,_,null,v,h))):A?A!==s.memoizedState?($o(u),Zt(u),N4(u,A)):(Zt(u),u.flags&=-16777217):(s=s.memoizedProps,s!==v&&$o(u),Zt(u),Ex(u,_,s,v,h)),null;case 27:if(Qe(u),h=Ge.current,_=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==v&&$o(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Zt(u),null}s=we.current,Fu(u)?dT(u):(s=F3(_,v,h),u.stateNode=s,$o(u))}return Zt(u),null;case 5:if(Qe(u),_=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==v&&$o(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Zt(u),null}if(A=we.current,Fu(u))dT(u);else{var P=bg(Ge.current);switch(A){case 1:A=P.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:A=P.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":A=P.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":A=P.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":A=P.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof v.is=="string"?P.createElement("select",{is:v.is}):P.createElement("select"),v.multiple?A.multiple=!0:v.size&&(A.size=v.size);break;default:A=typeof v.is=="string"?P.createElement(_,{is:v.is}):P.createElement(_)}}A[Pr]=u,A[nn]=v;e:for(P=u.child;P!==null;){if(P.tag===5||P.tag===6)A.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===u)break e;for(;P.sibling===null;){if(P.return===null||P.return===u)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}u.stateNode=A;e:switch(_n(A,_,v),_){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&$o(u)}}return Zt(u),Ex(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,h),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==v&&$o(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(n(166));if(s=Ge.current,Fu(u)){if(s=u.stateNode,h=u.memoizedProps,v=null,_=yn,_!==null)switch(_.tag){case 27:case 5:v=_.memoizedProps}s[Pr]=u,s=!!(s.nodeValue===h||v!==null&&v.suppressHydrationWarning===!0||O3(s.nodeValue,h)),s||Hs(u,!0)}else s=bg(s).createTextNode(v),s[Pr]=u,u.stateNode=s}return Zt(u),null;case 31:if(h=u.memoizedState,s===null||s.memoizedState!==null){if(v=Fu(u),h!==null){if(s===null){if(!v)throw Error(n(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[Pr]=u}else _c(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Zt(u),s=!1}else h=Ny(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return u.flags&256?(Ci(u),u):(Ci(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Zt(u),null;case 13:if(v=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=Fu(u),v!==null&&v.dehydrated!==null){if(s===null){if(!_)throw Error(n(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Pr]=u}else _c(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Zt(u),_=!1}else _=Ny(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(Ci(u),u):(Ci(u),null)}return Ci(u),(u.flags&128)!==0?(u.lanes=h,u):(h=v!==null,s=s!==null&&s.memoizedState!==null,h&&(v=u.child,_=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(_=v.alternate.memoizedState.cachePool.pool),A=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==_&&(v.flags|=2048)),h!==s&&h&&(u.child.flags|=8192),ag(u,u.updateQueue),Zt(u),null);case 4:return ge(),s===null&&qx(u.stateNode.containerInfo),Zt(u),null;case 10:return Fo(u.type),Zt(u),null;case 19:if(ee(Ar),v=u.memoizedState,v===null)return Zt(u),null;if(_=(u.flags&128)!==0,A=v.rendering,A===null)if(_)Zd(v,!1);else{if(pr!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(A=G0(s),A!==null){for(u.flags|=128,Zd(v,!1),s=A.updateQueue,u.updateQueue=s,ag(u,s),u.subtreeFlags=0,s=h,h=u.child;h!==null;)sT(h,s),h=h.sibling;return xe(Ar,Ar.current&1|2),ft&&Bo(u,v.treeForkCount),u.child}s=s.sibling}v.tail!==null&&Wn()>ug&&(u.flags|=128,_=!0,Zd(v,!1),u.lanes=4194304)}else{if(!_)if(s=G0(A),s!==null){if(u.flags|=128,_=!0,s=s.updateQueue,u.updateQueue=s,ag(u,s),Zd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!ft)return Zt(u),null}else 2*Wn()-v.renderingStartTime>ug&&h!==536870912&&(u.flags|=128,_=!0,Zd(v,!1),u.lanes=4194304);v.isBackwards?(A.sibling=u.child,u.child=A):(s=v.last,s!==null?s.sibling=A:u.child=A,v.last=A)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Wn(),s.sibling=null,h=Ar.current,xe(Ar,_?h&1|2:h&1),ft&&Bo(u,v.treeForkCount),s):(Zt(u),null);case 22:case 23:return Ci(u),Gy(),v=u.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(h&536870912)!==0&&(u.flags&128)===0&&(Zt(u),u.subtreeFlags&6&&(u.flags|=8192)):Zt(u),h=u.updateQueue,h!==null&&ag(u,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==h&&(u.flags|=2048),s!==null&&ee(Ac),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Fo(Mr),Zt(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function YB(s,u){switch(Py(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Fo(Mr),ge(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return Qe(u),null;case 31:if(u.memoizedState!==null){if(Ci(u),u.alternate===null)throw Error(n(340));_c()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if(Ci(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(n(340));_c()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return ee(Ar),null;case 4:return ge(),null;case 10:return Fo(u.type),null;case 22:case 23:return Ci(u),Gy(),s!==null&&ee(Ac),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return Fo(Mr),null;case 25:return null;default:return null}}function M4(s,u){switch(Py(u),u.tag){case 3:Fo(Mr),ge();break;case 26:case 27:case 5:Qe(u);break;case 4:ge();break;case 31:u.memoizedState!==null&&Ci(u);break;case 13:Ci(u);break;case 19:ee(Ar);break;case 10:Fo(u.type);break;case 22:case 23:Ci(u),Gy(),s!==null&&ee(Ac);break;case 24:Fo(Mr)}}function Jd(s,u){try{var h=u.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var _=v.next;h=_;do{if((h.tag&s)===s){v=void 0;var A=h.create,P=h.inst;v=A(),P.destroy=v}h=h.next}while(h!==_)}}catch(F){Dt(u,u.return,F)}}function Ys(s,u,h){try{var v=u.updateQueue,_=v!==null?v.lastEffect:null;if(_!==null){var A=_.next;v=A;do{if((v.tag&s)===s){var P=v.inst,F=P.destroy;if(F!==void 0){P.destroy=void 0,_=u;var q=h,J=F;try{J()}catch(se){Dt(_,q,se)}}}v=v.next}while(v!==A)}}catch(se){Dt(u,u.return,se)}}function k4(s){var u=s.updateQueue;if(u!==null){var h=s.stateNode;try{ST(u,h)}catch(v){Dt(s,s.return,v)}}}function j4(s,u,h){h.props=Oc(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(v){Dt(s,u,v)}}function eh(s,u){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof h=="function"?s.refCleanup=h(v):h.current=v}}catch(_){Dt(s,u,_)}}function lo(s,u){var h=s.ref,v=s.refCleanup;if(h!==null)if(typeof v=="function")try{v()}catch(_){Dt(s,u,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){Dt(s,u,_)}else h.current=null}function L4(s){var u=s.type,h=s.memoizedProps,v=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&v.focus();break e;case"img":h.src?v.src=h.src:h.srcSet&&(v.srcset=h.srcSet)}}catch(_){Dt(s,s.return,_)}}function Ax(s,u,h){try{var v=s.stateNode;yU(v,s.type,h,u),v[nn]=u}catch(_){Dt(s,s.return,_)}}function B4(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&nl(s.type)||s.tag===4}function Sx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||B4(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&nl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Cx(s,u,h){var v=s.tag;if(v===5||v===6)s=s.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(s),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=Ea));else if(v!==4&&(v===27&&nl(s.type)&&(h=s.stateNode,u=null),s=s.child,s!==null))for(Cx(s,u,h),s=s.sibling;s!==null;)Cx(s,u,h),s=s.sibling}function og(s,u,h){var v=s.tag;if(v===5||v===6)s=s.stateNode,u?h.insertBefore(s,u):h.appendChild(s);else if(v!==4&&(v===27&&nl(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(og(s,u,h),s=s.sibling;s!==null;)og(s,u,h),s=s.sibling}function U4(s){var u=s.stateNode,h=s.memoizedProps;try{for(var v=s.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);_n(u,v,h),u[Pr]=s,u[nn]=h}catch(A){Dt(s,s.return,A)}}var qo=!1,Lr=!1,Tx=!1,F4=typeof WeakSet=="function"?WeakSet:Set,on=null;function QB(s,u){if(s=s.containerInfo,Kx=Tg,s=ZC(s),by(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var _=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var P=0,F=-1,q=-1,J=0,se=0,fe=s,te=null;t:for(;;){for(var ae;fe!==h||_!==0&&fe.nodeType!==3||(F=P+_),fe!==A||v!==0&&fe.nodeType!==3||(q=P+v),fe.nodeType===3&&(P+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)te=fe,fe=ae;for(;;){if(fe===s)break t;if(te===h&&++J===_&&(F=P),te===A&&++se===v&&(q=P),(ae=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ae}h=F===-1||q===-1?null:{start:F,end:q}}else h=null}h=h||{start:0,end:0}}else h=null;for(Xx={focusedElem:s,selectionRange:h},Tg=!1,on=u;on!==null;)if(u=on,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,on=s;else for(;on!==null;){switch(u=on,A=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)_=s[h],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,h=u,_=A.memoizedProps,A=A.memoizedState,v=h.stateNode;try{var Te=Oc(h.type,_);s=v.getSnapshotBeforeUpdate(Te,A),v.__reactInternalSnapshotBeforeUpdate=s}catch(Be){Dt(h,h.return,Be)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,h=s.nodeType,h===9)Zx(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Zx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=u.sibling,s!==null){s.return=u.return,on=s;break}on=u.return}}function z4(s,u,h){var v=h.flags;switch(h.tag){case 0:case 11:case 15:Wo(s,h),v&4&&Jd(5,h);break;case 1:if(Wo(s,h),v&4)if(s=h.stateNode,u===null)try{s.componentDidMount()}catch(P){Dt(h,h.return,P)}else{var _=Oc(h.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(_,u,s.__reactInternalSnapshotBeforeUpdate)}catch(P){Dt(h,h.return,P)}}v&64&&k4(h),v&512&&eh(h,h.return);break;case 3:if(Wo(s,h),v&64&&(s=h.updateQueue,s!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{ST(s,u)}catch(P){Dt(h,h.return,P)}}break;case 27:u===null&&v&4&&U4(h);case 26:case 5:Wo(s,h),u===null&&v&4&&L4(h),v&512&&eh(h,h.return);break;case 12:Wo(s,h);break;case 31:Wo(s,h),v&4&&$4(s,h);break;case 13:Wo(s,h),v&4&&q4(s,h),v&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=oU.bind(null,h),CU(s,h))));break;case 22:if(v=h.memoizedState!==null||qo,!v){u=u!==null&&u.memoizedState!==null||Lr,_=qo;var A=Lr;qo=v,(Lr=u)&&!A?Ko(s,h,(h.subtreeFlags&8772)!==0):Wo(s,h),qo=_,Lr=A}break;case 30:break;default:Wo(s,h)}}function V4(s){var u=s.alternate;u!==null&&(s.alternate=null,V4(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&Eu(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ir=null,oi=!1;function Go(s,u,h){for(h=h.child;h!==null;)H4(s,u,h),h=h.sibling}function H4(s,u,h){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(xa,h)}catch{}switch(h.tag){case 26:Lr||lo(h,u),Go(s,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Lr||lo(h,u);var v=ir,_=oi;nl(h.type)&&(ir=h.stateNode,oi=!1),Go(s,u,h),ch(h.stateNode),ir=v,oi=_;break;case 5:Lr||lo(h,u);case 6:if(v=ir,_=oi,ir=null,Go(s,u,h),ir=v,oi=_,ir!==null)if(oi)try{(ir.nodeType===9?ir.body:ir.nodeName==="HTML"?ir.ownerDocument.body:ir).removeChild(h.stateNode)}catch(A){Dt(h,u,A)}else try{ir.removeChild(h.stateNode)}catch(A){Dt(h,u,A)}break;case 18:ir!==null&&(oi?(s=ir,k3(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),lf(s)):k3(ir,h.stateNode));break;case 4:v=ir,_=oi,ir=h.stateNode.containerInfo,oi=!0,Go(s,u,h),ir=v,oi=_;break;case 0:case 11:case 14:case 15:Ys(2,h,u),Lr||Ys(4,h,u),Go(s,u,h);break;case 1:Lr||(lo(h,u),v=h.stateNode,typeof v.componentWillUnmount=="function"&&j4(h,u,v)),Go(s,u,h);break;case 21:Go(s,u,h);break;case 22:Lr=(v=Lr)||h.memoizedState!==null,Go(s,u,h),Lr=v;break;default:Go(s,u,h)}}function $4(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{lf(s)}catch(h){Dt(u,u.return,h)}}}function q4(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{lf(s)}catch(h){Dt(u,u.return,h)}}function ZB(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new F4),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new F4),u;default:throw Error(n(435,s.tag))}}function sg(s,u){var h=ZB(s);u.forEach(function(v){if(!h.has(v)){h.add(v);var _=sU.bind(null,s,v);v.then(_,_)}})}function si(s,u){var h=u.deletions;if(h!==null)for(var v=0;v<h.length;v++){var _=h[v],A=s,P=u,F=P;e:for(;F!==null;){switch(F.tag){case 27:if(nl(F.type)){ir=F.stateNode,oi=!1;break e}break;case 5:ir=F.stateNode,oi=!1;break e;case 3:case 4:ir=F.stateNode.containerInfo,oi=!0;break e}F=F.return}if(ir===null)throw Error(n(160));H4(A,P,_),ir=null,oi=!1,A=_.alternate,A!==null&&(A.return=null),_.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)G4(u,s),u=u.sibling}var Oa=null;function G4(s,u){var h=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:si(u,s),li(s),v&4&&(Ys(3,s,s.return),Jd(3,s),Ys(5,s,s.return));break;case 1:si(u,s),li(s),v&512&&(Lr||h===null||lo(h,h.return)),v&64&&qo&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?v:h.concat(v))));break;case 26:var _=Oa;if(si(u,s),li(s),v&512&&(Lr||h===null||lo(h,h.return)),v&4){var A=h!==null?h.memoizedState:null;if(v=s.memoizedState,h===null)if(v===null)if(s.stateNode===null){e:{v=s.type,h=s.memoizedProps,_=_.ownerDocument||_;t:switch(v){case"title":A=_.getElementsByTagName("title")[0],(!A||A[Ka]||A[Pr]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=_.createElement(v),_.head.insertBefore(A,_.querySelector("head > title"))),_n(A,v,h),A[Pr]=s,Dr(A),v=A;break e;case"link":var P=G3("link","href",_).get(v+(h.href||""));if(P){for(var F=0;F<P.length;F++)if(A=P[F],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){P.splice(F,1);break t}}A=_.createElement(v),_n(A,v,h),_.head.appendChild(A);break;case"meta":if(P=G3("meta","content",_).get(v+(h.content||""))){for(F=0;F<P.length;F++)if(A=P[F],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){P.splice(F,1);break t}}A=_.createElement(v),_n(A,v,h),_.head.appendChild(A);break;default:throw Error(n(468,v))}A[Pr]=s,Dr(A),v=A}s.stateNode=v}else W3(_,s.type,s.stateNode);else s.stateNode=q3(_,v,s.memoizedProps);else A!==v?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,v===null?W3(_,s.type,s.stateNode):q3(_,v,s.memoizedProps)):v===null&&s.stateNode!==null&&Ax(s,s.memoizedProps,h.memoizedProps)}break;case 27:si(u,s),li(s),v&512&&(Lr||h===null||lo(h,h.return)),h!==null&&v&4&&Ax(s,s.memoizedProps,h.memoizedProps);break;case 5:if(si(u,s),li(s),v&512&&(Lr||h===null||lo(h,h.return)),s.flags&32){_=s.stateNode;try{ai(_,"")}catch(Te){Dt(s,s.return,Te)}}v&4&&s.stateNode!=null&&(_=s.memoizedProps,Ax(s,_,h!==null?h.memoizedProps:_)),v&1024&&(Tx=!0);break;case 6:if(si(u,s),li(s),v&4){if(s.stateNode===null)throw Error(n(162));v=s.memoizedProps,h=s.stateNode;try{h.nodeValue=v}catch(Te){Dt(s,s.return,Te)}}break;case 3:if(Eg=null,_=Oa,Oa=_g(u.containerInfo),si(u,s),Oa=_,li(s),v&4&&h!==null&&h.memoizedState.isDehydrated)try{lf(u.containerInfo)}catch(Te){Dt(s,s.return,Te)}Tx&&(Tx=!1,W4(s));break;case 4:v=Oa,Oa=_g(s.stateNode.containerInfo),si(u,s),li(s),Oa=v;break;case 12:si(u,s),li(s);break;case 31:si(u,s),li(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,sg(s,v)));break;case 13:si(u,s),li(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(cg=Wn()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,sg(s,v)));break;case 22:_=s.memoizedState!==null;var q=h!==null&&h.memoizedState!==null,J=qo,se=Lr;if(qo=J||_,Lr=se||q,si(u,s),Lr=se,qo=J,li(s),v&8192)e:for(u=s.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(h===null||q||qo||Lr||Rc(s)),h=null,u=s;;){if(u.tag===5||u.tag===26){if(h===null){q=h=u;try{if(A=q.stateNode,_)P=A.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{F=q.stateNode;var fe=q.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;F.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Te){Dt(q,q.return,Te)}}}else if(u.tag===6){if(h===null){q=u;try{q.stateNode.nodeValue=_?"":q.memoizedProps}catch(Te){Dt(q,q.return,Te)}}}else if(u.tag===18){if(h===null){q=u;try{var ae=q.stateNode;_?j3(ae,!0):j3(q.stateNode,!1)}catch(Te){Dt(q,q.return,Te)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=s.updateQueue,v!==null&&(h=v.retryQueue,h!==null&&(v.retryQueue=null,sg(s,h))));break;case 19:si(u,s),li(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,sg(s,v)));break;case 30:break;case 21:break;default:si(u,s),li(s)}}function li(s){var u=s.flags;if(u&2){try{for(var h,v=s.return;v!==null;){if(B4(v)){h=v;break}v=v.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var _=h.stateNode,A=Sx(s);og(s,A,_);break;case 5:var P=h.stateNode;h.flags&32&&(ai(P,""),h.flags&=-33);var F=Sx(s);og(s,F,P);break;case 3:case 4:var q=h.stateNode.containerInfo,J=Sx(s);Cx(s,J,q);break;default:throw Error(n(161))}}catch(se){Dt(s,s.return,se)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function W4(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;W4(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function Wo(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)z4(s,u.alternate,u),u=u.sibling}function Rc(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:Ys(4,u,u.return),Rc(u);break;case 1:lo(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&j4(u,u.return,h),Rc(u);break;case 27:ch(u.stateNode);case 26:case 5:lo(u,u.return),Rc(u);break;case 22:u.memoizedState===null&&Rc(u);break;case 30:Rc(u);break;default:Rc(u)}s=s.sibling}}function Ko(s,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,_=s,A=u,P=A.flags;switch(A.tag){case 0:case 11:case 15:Ko(_,A,h),Jd(4,A);break;case 1:if(Ko(_,A,h),v=A,_=v.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(J){Dt(v,v.return,J)}if(v=A,_=v.updateQueue,_!==null){var F=v.stateNode;try{var q=_.shared.hiddenCallbacks;if(q!==null)for(_.shared.hiddenCallbacks=null,_=0;_<q.length;_++)AT(q[_],F)}catch(J){Dt(v,v.return,J)}}h&&P&64&&k4(A),eh(A,A.return);break;case 27:U4(A);case 26:case 5:Ko(_,A,h),h&&v===null&&P&4&&L4(A),eh(A,A.return);break;case 12:Ko(_,A,h);break;case 31:Ko(_,A,h),h&&P&4&&$4(_,A);break;case 13:Ko(_,A,h),h&&P&4&&q4(_,A);break;case 22:A.memoizedState===null&&Ko(_,A,h),eh(A,A.return);break;case 30:break;default:Ko(_,A,h)}u=u.sibling}}function Ix(s,u){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Fd(h))}function Ox(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Fd(s))}function Ra(s,u,h,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)K4(s,u,h,v),u=u.sibling}function K4(s,u,h,v){var _=u.flags;switch(u.tag){case 0:case 11:case 15:Ra(s,u,h,v),_&2048&&Jd(9,u);break;case 1:Ra(s,u,h,v);break;case 3:Ra(s,u,h,v),_&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&Fd(s)));break;case 12:if(_&2048){Ra(s,u,h,v),s=u.stateNode;try{var A=u.memoizedProps,P=A.id,F=A.onPostCommit;typeof F=="function"&&F(P,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Dt(u,u.return,q)}}else Ra(s,u,h,v);break;case 31:Ra(s,u,h,v);break;case 13:Ra(s,u,h,v);break;case 23:break;case 22:A=u.stateNode,P=u.alternate,u.memoizedState!==null?A._visibility&2?Ra(s,u,h,v):th(s,u):A._visibility&2?Ra(s,u,h,v):(A._visibility|=2,Yu(s,u,h,v,(u.subtreeFlags&10256)!==0||!1)),_&2048&&Ix(P,u);break;case 24:Ra(s,u,h,v),_&2048&&Ox(u.alternate,u);break;default:Ra(s,u,h,v)}}function Yu(s,u,h,v,_){for(_=_&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var A=s,P=u,F=h,q=v,J=P.flags;switch(P.tag){case 0:case 11:case 15:Yu(A,P,F,q,_),Jd(8,P);break;case 23:break;case 22:var se=P.stateNode;P.memoizedState!==null?se._visibility&2?Yu(A,P,F,q,_):th(A,P):(se._visibility|=2,Yu(A,P,F,q,_)),_&&J&2048&&Ix(P.alternate,P);break;case 24:Yu(A,P,F,q,_),_&&J&2048&&Ox(P.alternate,P);break;default:Yu(A,P,F,q,_)}u=u.sibling}}function th(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=s,v=u,_=v.flags;switch(v.tag){case 22:th(h,v),_&2048&&Ix(v.alternate,v);break;case 24:th(h,v),_&2048&&Ox(v.alternate,v);break;default:th(h,v)}u=u.sibling}}var rh=8192;function Qu(s,u,h){if(s.subtreeFlags&rh)for(s=s.child;s!==null;)X4(s,u,h),s=s.sibling}function X4(s,u,h){switch(s.tag){case 26:Qu(s,u,h),s.flags&rh&&s.memoizedState!==null&&BU(h,Oa,s.memoizedState,s.memoizedProps);break;case 5:Qu(s,u,h);break;case 3:case 4:var v=Oa;Oa=_g(s.stateNode.containerInfo),Qu(s,u,h),Oa=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=rh,rh=16777216,Qu(s,u,h),rh=v):Qu(s,u,h));break;default:Qu(s,u,h)}}function Y4(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function nh(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];on=v,Z4(v,s)}Y4(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Q4(s),s=s.sibling}function Q4(s){switch(s.tag){case 0:case 11:case 15:nh(s),s.flags&2048&&Ys(9,s,s.return);break;case 3:nh(s);break;case 12:nh(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,lg(s)):nh(s);break;default:nh(s)}}function lg(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];on=v,Z4(v,s)}Y4(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:Ys(8,u,u.return),lg(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,lg(u));break;default:lg(u)}s=s.sibling}}function Z4(s,u){for(;on!==null;){var h=on;switch(h.tag){case 0:case 11:case 15:Ys(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var v=h.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Fd(h.memoizedState.cache)}if(v=h.child,v!==null)v.return=h,on=v;else e:for(h=s;on!==null;){v=on;var _=v.sibling,A=v.return;if(V4(v),v===h){on=null;break e}if(_!==null){_.return=A,on=_;break e}on=A}}}var JB={getCacheForType:function(s){var u=xn(Mr),h=u.data.get(s);return h===void 0&&(h=s(),u.data.set(s,h)),h},cacheSignal:function(){return xn(Mr).controller.signal}},eU=typeof WeakMap=="function"?WeakMap:Map,wt=0,$t=null,rt=null,ot=0,Pt=0,Ti=null,Qs=!1,Zu=!1,Rx=!1,Xo=0,pr=0,Zs=0,Pc=0,Px=0,Ii=0,Ju=0,ih=null,ci=null,Dx=!1,cg=0,J4=0,ug=1/0,fg=null,Js=null,qr=0,el=null,ef=null,Yo=0,Nx=0,Mx=null,e3=null,ah=0,kx=null;function Oi(){return(wt&2)!==0&&ot!==0?ot&-ot:X.T!==null?zx():d0()}function t3(){if(Ii===0)if((ot&536870912)===0||ft){var s=ic;ic<<=1,(ic&3932160)===0&&(ic=262144),Ii=s}else Ii=536870912;return s=Si.current,s!==null&&(s.flags|=32),Ii}function ui(s,u,h){(s===$t&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)&&(tf(s,0),tl(s,ot,Ii,!1)),ac(s,h),((wt&2)===0||s!==$t)&&(s===$t&&((wt&2)===0&&(Pc|=h),pr===4&&tl(s,ot,Ii,!1)),co(s))}function r3(s,u,h){if((wt&6)!==0)throw Error(n(327));var v=!h&&(u&127)===0&&(u&s.expiredLanes)===0||ba(s,u),_=v?nU(s,u):Lx(s,u,!0),A=v;do{if(_===0){Zu&&!v&&tl(s,u,0,!1);break}else{if(h=s.current.alternate,A&&!tU(h)){_=Lx(s,u,!1),A=!1;continue}if(_===2){if(A=u,s.errorRecoveryDisabledLanes&A)var P=0;else P=s.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){u=P;e:{var F=s;_=ih;var q=F.current.memoizedState.isDehydrated;if(q&&(tf(F,P).flags|=256),P=Lx(F,P,!1),P!==2){if(Rx&&!q){F.errorRecoveryDisabledLanes|=A,Pc|=A,_=4;break e}A=ci,ci=_,A!==null&&(ci===null?ci=A:ci.push.apply(ci,A))}_=P}if(A=!1,_!==2)continue}}if(_===1){tf(s,0),tl(s,u,0,!0);break}e:{switch(v=s,A=_,A){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:tl(v,u,Ii,!Qs);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(_=cg+300-Wn(),10<_)){if(tl(v,u,Ii,!Qs),qa(v,0,!0)!==0)break e;Yo=u,v.timeoutHandle=N3(n3.bind(null,v,h,ci,fg,Dx,u,Ii,Pc,Ju,Qs,A,"Throttled",-0,0),_);break e}n3(v,h,ci,fg,Dx,u,Ii,Pc,Ju,Qs,A,null,-0,0)}}break}while(!0);co(s)}function n3(s,u,h,v,_,A,P,F,q,J,se,fe,te,ae){if(s.timeoutHandle=-1,fe=u.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ea},X4(u,A,fe);var Te=(A&62914560)===A?cg-Wn():(A&4194048)===A?J4-Wn():0;if(Te=UU(fe,Te),Te!==null){Yo=A,s.cancelPendingCommit=Te(f3.bind(null,s,u,A,h,v,_,P,F,q,se,fe,null,te,ae)),tl(s,A,P,!J);return}}f3(s,u,A,h,v,_,P,F,q)}function tU(s){for(var u=s;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var v=0;v<h.length;v++){var _=h[v],A=_.getSnapshot;_=_.value;try{if(!Ei(A(),_))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function tl(s,u,h,v){u&=~Px,u&=~Pc,s.suspendedLanes|=u,s.pingedLanes&=~u,v&&(s.warmLanes|=u),v=s.expirationTimes;for(var _=u;0<_;){var A=31-wr(_),P=1<<A;v[A]=-1,_&=~P}h!==0&&oc(s,h,u)}function dg(){return(wt&6)===0?(oh(0),!1):!0}function jx(){if(rt!==null){if(Pt===0)var s=rt.return;else s=rt,Uo=wc=null,Zy(s),qu=null,Vd=0,s=rt;for(;s!==null;)M4(s.alternate,s),s=s.return;rt=null}}function tf(s,u){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,_U(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Yo=0,jx(),$t=s,rt=h=Lo(s.current,null),ot=u,Pt=0,Ti=null,Qs=!1,Zu=ba(s,u),Rx=!1,Ju=Ii=Px=Pc=Zs=pr=0,ci=ih=null,Dx=!1,(u&8)!==0&&(u|=u&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=u;0<v;){var _=31-wr(v),A=1<<_;u|=s[_],v&=~A}return Xo=u,N0(),h}function i3(s,u){Ke=null,X.H=Yd,u===$u||u===z0?(u=bT(),Pt=3):u===Fy?(u=bT(),Pt=4):Pt=u===px?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ti=u,rt===null&&(pr=1,tg(s,Xi(u,s.current)))}function a3(){var s=Si.current;return s===null?!0:(ot&4194048)===ot?Ji===null:(ot&62914560)===ot||(ot&536870912)!==0?s===Ji:!1}function o3(){var s=X.H;return X.H=Yd,s===null?Yd:s}function s3(){var s=X.A;return X.A=JB,s}function hg(){pr=4,Qs||(ot&4194048)!==ot&&Si.current!==null||(Zu=!0),(Zs&134217727)===0&&(Pc&134217727)===0||$t===null||tl($t,ot,Ii,!1)}function Lx(s,u,h){var v=wt;wt|=2;var _=o3(),A=s3();($t!==s||ot!==u)&&(fg=null,tf(s,u)),u=!1;var P=pr;e:do try{if(Pt!==0&&rt!==null){var F=rt,q=Ti;switch(Pt){case 8:jx(),P=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(u=!0);var J=Pt;if(Pt=0,Ti=null,rf(s,F,q,J),h&&Zu){P=0;break e}break;default:J=Pt,Pt=0,Ti=null,rf(s,F,q,J)}}rU(),P=pr;break}catch(se){i3(s,se)}while(!0);return u&&s.shellSuspendCounter++,Uo=wc=null,wt=v,X.H=_,X.A=A,rt===null&&($t=null,ot=0,N0()),P}function rU(){for(;rt!==null;)l3(rt)}function nU(s,u){var h=wt;wt|=2;var v=o3(),_=s3();$t!==s||ot!==u?(fg=null,ug=Wn()+500,tf(s,u)):Zu=ba(s,u);e:do try{if(Pt!==0&&rt!==null){u=rt;var A=Ti;t:switch(Pt){case 1:Pt=0,Ti=null,rf(s,u,A,1);break;case 2:case 9:if(yT(A)){Pt=0,Ti=null,c3(u);break}u=function(){Pt!==2&&Pt!==9||$t!==s||(Pt=7),co(s)},A.then(u,u);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:yT(A)?(Pt=0,Ti=null,c3(u)):(Pt=0,Ti=null,rf(s,u,A,7));break;case 5:var P=null;switch(rt.tag){case 26:P=rt.memoizedState;case 5:case 27:var F=rt;if(P?K3(P):F.stateNode.complete){Pt=0,Ti=null;var q=F.sibling;if(q!==null)rt=q;else{var J=F.return;J!==null?(rt=J,pg(J)):rt=null}break t}}Pt=0,Ti=null,rf(s,u,A,5);break;case 6:Pt=0,Ti=null,rf(s,u,A,6);break;case 8:jx(),pr=6;break e;default:throw Error(n(462))}}iU();break}catch(se){i3(s,se)}while(!0);return Uo=wc=null,X.H=v,X.A=_,wt=h,rt!==null?0:($t=null,ot=0,N0(),pr)}function iU(){for(;rt!==null&&!hy();)l3(rt)}function l3(s){var u=D4(s.alternate,s,Xo);s.memoizedProps=s.pendingProps,u===null?pg(s):rt=u}function c3(s){var u=s,h=u.alternate;switch(u.tag){case 15:case 0:u=C4(h,u,u.pendingProps,u.type,void 0,ot);break;case 11:u=C4(h,u,u.pendingProps,u.type.render,u.ref,ot);break;case 5:Zy(u);default:M4(h,u),u=rt=sT(u,Xo),u=D4(h,u,Xo)}s.memoizedProps=s.pendingProps,u===null?pg(s):rt=u}function rf(s,u,h,v){Uo=wc=null,Zy(u),qu=null,Vd=0;var _=u.return;try{if(GB(s,_,u,h,ot)){pr=1,tg(s,Xi(h,s.current)),rt=null;return}}catch(A){if(_!==null)throw rt=_,A;pr=1,tg(s,Xi(h,s.current)),rt=null;return}u.flags&32768?(ft||v===1?s=!0:Zu||(ot&536870912)!==0?s=!1:(Qs=s=!0,(v===2||v===9||v===3||v===6)&&(v=Si.current,v!==null&&v.tag===13&&(v.flags|=16384))),u3(u,s)):pg(u)}function pg(s){var u=s;do{if((u.flags&32768)!==0){u3(u,Qs);return}s=u.return;var h=XB(u.alternate,u,Xo);if(h!==null){rt=h;return}if(u=u.sibling,u!==null){rt=u;return}rt=u=s}while(u!==null);pr===0&&(pr=5)}function u3(s,u){do{var h=YB(s.alternate,s);if(h!==null){h.flags&=32767,rt=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(s=s.sibling,s!==null)){rt=s;return}rt=s=h}while(s!==null);pr=6,rt=null}function f3(s,u,h,v,_,A,P,F,q){s.cancelPendingCommit=null;do gg();while(qr!==0);if((wt&6)!==0)throw Error(n(327));if(u!==null){if(u===s.current)throw Error(n(177));if(A=u.lanes|u.childLanes,A|=Sy,vy(s,h,A,P,F,q),s===$t&&(rt=$t=null,ot=0),ef=u,el=s,Yo=h,Nx=A,Mx=_,e3=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,lU(Ps,function(){return v3(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=X.T,X.T=null,_=re.p,re.p=2,P=wt,wt|=4;try{QB(s,u,h)}finally{wt=P,re.p=_,X.T=v}}qr=1,d3(),h3(),p3()}}function d3(){if(qr===1){qr=0;var s=el,u=ef,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=X.T,X.T=null;var v=re.p;re.p=2;var _=wt;wt|=4;try{G4(u,s);var A=Xx,P=ZC(s.containerInfo),F=A.focusedElem,q=A.selectionRange;if(P!==F&&F&&F.ownerDocument&&QC(F.ownerDocument.documentElement,F)){if(q!==null&&by(F)){var J=q.start,se=q.end;if(se===void 0&&(se=J),"selectionStart"in F)F.selectionStart=J,F.selectionEnd=Math.min(se,F.value.length);else{var fe=F.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Te=F.textContent.length,Be=Math.min(q.start,Te),zt=q.end===void 0?Be:Math.min(q.end,Te);!ae.extend&&Be>zt&&(P=zt,zt=Be,Be=P);var K=YC(F,Be),W=YC(F,zt);if(K&&W&&(ae.rangeCount!==1||ae.anchorNode!==K.node||ae.anchorOffset!==K.offset||ae.focusNode!==W.node||ae.focusOffset!==W.offset)){var Z=fe.createRange();Z.setStart(K.node,K.offset),ae.removeAllRanges(),Be>zt?(ae.addRange(Z),ae.extend(W.node,W.offset)):(Z.setEnd(W.node,W.offset),ae.addRange(Z))}}}}for(fe=[],ae=F;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<fe.length;F++){var le=fe[F];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Tg=!!Kx,Xx=Kx=null}finally{wt=_,re.p=v,X.T=h}}s.current=u,qr=2}}function h3(){if(qr===2){qr=0;var s=el,u=ef,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=X.T,X.T=null;var v=re.p;re.p=2;var _=wt;wt|=4;try{z4(s,u.alternate,u)}finally{wt=_,re.p=v,X.T=h}}qr=3}}function p3(){if(qr===4||qr===3){qr=0,a0();var s=el,u=ef,h=Yo,v=e3;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?qr=5:(qr=0,ef=el=null,g3(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(Js=null),No(h),u=u.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(xa,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=X.T,_=re.p,re.p=2,X.T=null;try{for(var A=s.onRecoverableError,P=0;P<v.length;P++){var F=v[P];A(F.value,{componentStack:F.stack})}}finally{X.T=u,re.p=_}}(Yo&3)!==0&&gg(),co(s),_=s.pendingLanes,(h&261930)!==0&&(_&42)!==0?s===kx?ah++:(ah=0,kx=s):ah=0,oh(0)}}function g3(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,Fd(u)))}function gg(){return d3(),h3(),p3(),v3()}function v3(){if(qr!==5)return!1;var s=el,u=Nx;Nx=0;var h=No(Yo),v=X.T,_=re.p;try{re.p=32>h?32:h,X.T=null,h=Mx,Mx=null;var A=el,P=Yo;if(qr=0,ef=el=null,Yo=0,(wt&6)!==0)throw Error(n(331));var F=wt;if(wt|=4,Q4(A.current),K4(A,A.current,P,h),wt=F,oh(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(xa,A)}catch{}return!0}finally{re.p=_,X.T=v,g3(s,u)}}function m3(s,u,h){u=Xi(h,u),u=hx(s.stateNode,u,2),s=Ws(s,u,2),s!==null&&(ac(s,2),co(s))}function Dt(s,u,h){if(s.tag===3)m3(s,s,h);else for(;u!==null;){if(u.tag===3){m3(u,s,h);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Js===null||!Js.has(v))){s=Xi(h,s),h=y4(2),v=Ws(u,h,2),v!==null&&(x4(h,v,u,s),ac(v,2),co(v));break}}u=u.return}}function Bx(s,u,h){var v=s.pingCache;if(v===null){v=s.pingCache=new eU;var _=new Set;v.set(u,_)}else _=v.get(u),_===void 0&&(_=new Set,v.set(u,_));_.has(h)||(Rx=!0,_.add(h),s=aU.bind(null,s,u,h),u.then(s,s))}function aU(s,u,h){var v=s.pingCache;v!==null&&v.delete(u),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,$t===s&&(ot&h)===h&&(pr===4||pr===3&&(ot&62914560)===ot&&300>Wn()-cg?(wt&2)===0&&tf(s,0):Px|=h,Ju===ot&&(Ju=0)),co(s)}function y3(s,u){u===0&&(u=f0()),s=xc(s,u),s!==null&&(ac(s,u),co(s))}function oU(s){var u=s.memoizedState,h=0;u!==null&&(h=u.retryLane),y3(s,h)}function sU(s,u){var h=0;switch(s.tag){case 31:case 13:var v=s.stateNode,_=s.memoizedState;_!==null&&(h=_.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(u),y3(s,h)}function lU(s,u){return $r(s,u)}var vg=null,nf=null,Ux=!1,mg=!1,Fx=!1,rl=0;function co(s){s!==nf&&s.next===null&&(nf===null?vg=nf=s:nf=nf.next=s),mg=!0,Ux||(Ux=!0,uU())}function oh(s,u){if(!Fx&&mg){Fx=!0;do for(var h=!1,v=vg;v!==null;){if(s!==0){var _=v.pendingLanes;if(_===0)var A=0;else{var P=v.suspendedLanes,F=v.pingedLanes;A=(1<<31-wr(42|s)+1)-1,A&=_&~(P&~F),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,w3(v,A))}else A=ot,A=qa(v,v===$t?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||ba(v,A)||(h=!0,w3(v,A));v=v.next}while(h);Fx=!1}}function cU(){x3()}function x3(){mg=Ux=!1;var s=0;rl!==0&&bU()&&(s=rl);for(var u=Wn(),h=null,v=vg;v!==null;){var _=v.next,A=b3(v,u);A===0?(v.next=null,h===null?vg=_:h.next=_,_===null&&(nf=h)):(h=v,(s!==0||(A&3)!==0)&&(mg=!0)),v=_}qr!==0&&qr!==5||oh(s),rl!==0&&(rl=0)}function b3(s,u){for(var h=s.suspendedLanes,v=s.pingedLanes,_=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var P=31-wr(A),F=1<<P,q=_[P];q===-1?((F&h)===0||(F&v)!==0)&&(_[P]=gy(F,u)):q<=u&&(s.expiredLanes|=F),A&=~F}if(u=$t,h=ot,h=qa(s,s===u?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,h===0||s===u&&(Pt===2||Pt===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&Rs(v),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||ba(s,h)){if(u=h&-h,u===s.callbackPriority)return u;switch(v!==null&&Rs(v),No(h)){case 2:case 8:h=vd;break;case 32:h=Ps;break;case 268435456:h=o0;break;default:h=Ps}return v=_3.bind(null,s),h=$r(h,v),s.callbackPriority=u,s.callbackNode=h,u}return v!==null&&v!==null&&Rs(v),s.callbackPriority=2,s.callbackNode=null,2}function _3(s,u){if(qr!==0&&qr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(gg()&&s.callbackNode!==h)return null;var v=ot;return v=qa(s,s===$t?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(r3(s,v,u),b3(s,Wn()),s.callbackNode!=null&&s.callbackNode===h?_3.bind(null,s):null)}function w3(s,u){if(gg())return null;r3(s,u,!0)}function uU(){wU(function(){(wt&6)!==0?$r(gd,cU):x3()})}function zx(){if(rl===0){var s=Vu;s===0&&(s=Ha,Ha<<=1,(Ha&261888)===0&&(Ha=256)),rl=s}return rl}function E3(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Tu(""+s)}function A3(s,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,s.id&&h.setAttribute("form",s.id),u.parentNode.insertBefore(h,u),s=new FormData(s),h.parentNode.removeChild(h),s}function fU(s,u,h,v,_){if(u==="submit"&&h&&h.stateNode===_){var A=E3((_[nn]||null).action),P=v.submitter;P&&(u=(u=P[nn]||null)?E3(u.formAction):P.getAttribute("formAction"),u!==null&&(A=u,P=null));var F=new ro("action","action",null,v,_);s.push({event:F,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(rl!==0){var q=P?A3(_,P):new FormData(_);sx(h,{pending:!0,data:q,method:_.method,action:A},null,q)}}else typeof A=="function"&&(F.preventDefault(),q=P?A3(_,P):new FormData(_),sx(h,{pending:!0,data:q,method:_.method,action:A},A,q))},currentTarget:_}]})}}for(var Vx=0;Vx<Ay.length;Vx++){var Hx=Ay[Vx],dU=Hx.toLowerCase(),hU=Hx[0].toUpperCase()+Hx.slice(1);Ia(dU,"on"+hU)}Ia(tT,"onAnimationEnd"),Ia(rT,"onAnimationIteration"),Ia(nT,"onAnimationStart"),Ia("dblclick","onDoubleClick"),Ia("focusin","onFocus"),Ia("focusout","onBlur"),Ia(OB,"onTransitionRun"),Ia(RB,"onTransitionStart"),Ia(PB,"onTransitionCancel"),Ia(iT,"onTransitionEnd"),Za("onMouseEnter",["mouseout","mouseover"]),Za("onMouseLeave",["mouseout","mouseover"]),Za("onPointerEnter",["pointerout","pointerover"]),Za("onPointerLeave",["pointerout","pointerover"]),Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sh));function S3(s,u){u=(u&4)!==0;for(var h=0;h<s.length;h++){var v=s[h],_=v.event;v=v.listeners;e:{var A=void 0;if(u)for(var P=v.length-1;0<=P;P--){var F=v[P],q=F.instance,J=F.currentTarget;if(F=F.listener,q!==A&&_.isPropagationStopped())break e;A=F,_.currentTarget=J;try{A(_)}catch(se){D0(se)}_.currentTarget=null,A=q}else for(P=0;P<v.length;P++){if(F=v[P],q=F.instance,J=F.currentTarget,F=F.listener,q!==A&&_.isPropagationStopped())break e;A=F,_.currentTarget=J;try{A(_)}catch(se){D0(se)}_.currentTarget=null,A=q}}}}function nt(s,u){var h=u[wu];h===void 0&&(h=u[wu]=new Set);var v=s+"__bubble";h.has(v)||(C3(u,s,2,!1),h.add(v))}function $x(s,u,h){var v=0;u&&(v|=4),C3(h,s,v,u)}var yg="_reactListening"+Math.random().toString(36).slice(2);function qx(s){if(!s[yg]){s[yg]=!0,xd.forEach(function(h){h!=="selectionchange"&&(pU.has(h)||$x(h,!1,s),$x(h,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[yg]||(u[yg]=!0,$x("selectionchange",!1,u))}}function C3(s,u,h,v){switch(tI(u)){case 2:var _=VU;break;case 8:_=HU;break;default:_=o2}h=_.bind(null,u,h,s),_=void 0,!fc||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),v?_!==void 0?s.addEventListener(u,h,{capture:!0,passive:_}):s.addEventListener(u,h,!0):_!==void 0?s.addEventListener(u,h,{passive:_}):s.addEventListener(u,h,!1)}function Gx(s,u,h,v,_){var A=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var P=v.tag;if(P===3||P===4){var F=v.stateNode.containerInfo;if(F===_)break;if(P===4)for(P=v.return;P!==null;){var q=P.tag;if((q===3||q===4)&&P.stateNode.containerInfo===_)return;P=P.return}for(;F!==null;){if(P=Xa(F),P===null)return;if(q=P.tag,q===5||q===6||q===26||q===27){v=A=P;continue e}F=F.parentNode}}v=v.return}Ls(function(){var J=A,se=qi(h),fe=[];e:{var te=aT.get(s);if(te!==void 0){var ae=ro,Te=s;switch(s){case"keypress":if(hc(h)===0)break e;case"keydown":case"keyup":ae=O0;break;case"focusin":Te="focus",ae=gc;break;case"focusout":Te="blur",ae=gc;break;case"beforeblur":case"afterblur":ae=gc;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Dd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=b0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=T;break;case tT:case rT:case nT:ae=w0;break;case iT:ae=V;break;case"scroll":case"scrollend":ae=Pd;break;case"wheel":ae=ie;break;case"copy":case"cut":case"paste":ae=E0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=jo;break;case"toggle":case"beforetoggle":ae=We}var Be=(u&4)!==0,zt=!Be&&(s==="scroll"||s==="scrollend"),K=Be?te!==null?te+"Capture":null:te;Be=[];for(var W=J,Z;W!==null;){var le=W;if(Z=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Z===null||K===null||(le=Aa(W,K),le!=null&&Be.push(lh(W,le,Z))),zt)break;W=W.return}0<Be.length&&(te=new ae(te,Te,null,h,se),fe.push({event:te,listeners:Be}))}}if((u&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ae=s==="mouseout"||s==="pointerout",te&&h!==Id&&(Te=h.relatedTarget||h.fromElement)&&(Xa(Te)||Te[Wa]))break e;if((ae||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Te=h.relatedTarget||h.toElement,ae=J,Te=Te?Xa(Te):null,Te!==null&&(zt=a(Te),Be=Te.tag,Te!==zt||Be!==5&&Be!==27&&Be!==6)&&(Te=null)):(ae=null,Te=J),ae!==Te)){if(Be=Dd,le="onMouseLeave",K="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Be=jo,le="onPointerLeave",K="onPointerEnter",W="pointer"),zt=ae==null?te:_i(ae),Z=Te==null?te:_i(Te),te=new Be(le,W+"leave",ae,h,se),te.target=zt,te.relatedTarget=Z,le=null,Xa(se)===J&&(Be=new Be(K,W+"enter",Te,h,se),Be.target=Z,Be.relatedTarget=zt,le=Be),zt=le,ae&&Te)t:{for(Be=gU,K=ae,W=Te,Z=0,le=K;le;le=Be(le))Z++;le=0;for(var Ne=W;Ne;Ne=Be(Ne))le++;for(;0<Z-le;)K=Be(K),Z--;for(;0<le-Z;)W=Be(W),le--;for(;Z--;){if(K===W||W!==null&&K===W.alternate){Be=K;break t}K=Be(K),W=Be(W)}Be=null}else Be=null;ae!==null&&T3(fe,te,ae,Be,!1),Te!==null&&zt!==null&&T3(fe,zt,Te,Be,!0)}}e:{if(te=J?_i(J):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var vt=$C;else if(VC(te))if(qC)vt=CB;else{vt=AB;var Re=EB}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&Cu(J.elementType)&&(vt=$C):vt=SB;if(vt&&(vt=vt(s,J))){HC(fe,vt,h,se);break e}Re&&Re(s,te,J),s==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Sd(te,"number",te.value)}switch(Re=J?_i(J):window,s){case"focusin":(VC(Re)||Re.contentEditable==="true")&&(Mu=Re,_y=J,Ld=null);break;case"focusout":Ld=_y=Mu=null;break;case"mousedown":wy=!0;break;case"contextmenu":case"mouseup":case"dragend":wy=!1,JC(fe,h,se);break;case"selectionchange":if(IB)break;case"keydown":case"keyup":JC(fe,h,se)}var Xe;if(_t)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Nu?vc(s,h)&&(st="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(st="onCompositionStart");st&&(ao&&h.locale!=="ko"&&(Nu||st!=="onCompositionStart"?st==="onCompositionEnd"&&Nu&&(Xe=Rd()):(to=se,Od="value"in to?to.value:to.textContent,Nu=!0)),Re=xg(J,st),0<Re.length&&(st=new io(st,s,null,h,se),fe.push({event:st,listeners:Re}),Xe?st.data=Xe:(Xe=Du(h),Xe!==null&&(st.data=Xe)))),(Xe=Wi?xB(s,h):bB(s,h))&&(st=xg(J,"onBeforeInput"),0<st.length&&(Re=new io("onBeforeInput","beforeinput",null,h,se),fe.push({event:Re,listeners:st}),Re.data=Xe)),fU(fe,s,J,h,se)}S3(fe,u)})}function lh(s,u,h){return{instance:s,listener:u,currentTarget:h}}function xg(s,u){for(var h=u+"Capture",v=[];s!==null;){var _=s,A=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||A===null||(_=Aa(s,h),_!=null&&v.unshift(lh(s,_,A)),_=Aa(s,u),_!=null&&v.push(lh(s,_,A))),s.tag===3)return v;s=s.return}return[]}function gU(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function T3(s,u,h,v,_){for(var A=u._reactName,P=[];h!==null&&h!==v;){var F=h,q=F.alternate,J=F.stateNode;if(F=F.tag,q!==null&&q===v)break;F!==5&&F!==26&&F!==27||J===null||(q=J,_?(J=Aa(h,A),J!=null&&P.unshift(lh(h,J,q))):_||(J=Aa(h,A),J!=null&&P.push(lh(h,J,q)))),h=h.return}P.length!==0&&s.push({event:u,listeners:P})}var vU=/\r\n?/g,mU=/\u0000|\uFFFD/g;function I3(s){return(typeof s=="string"?s:""+s).replace(vU,`
`).replace(mU,"")}function O3(s,u){return u=I3(u),I3(s)===u}function Ft(s,u,h,v,_,A){switch(h){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||ai(s,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&ai(s,""+v);break;case"className":wi(s,"class",v);break;case"tabIndex":wi(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":wi(s,h,v);break;case"style":Td(s,v,A);break;case"data":if(u!=="object"){wi(s,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||h!=="href")){s.removeAttribute(h);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(h);break}v=Tu(""+v),s.setAttribute(h,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(u!=="input"&&Ft(s,u,"name",_.name,_,null),Ft(s,u,"formEncType",_.formEncType,_,null),Ft(s,u,"formMethod",_.formMethod,_,null),Ft(s,u,"formTarget",_.formTarget,_,null)):(Ft(s,u,"encType",_.encType,_,null),Ft(s,u,"method",_.method,_,null),Ft(s,u,"target",_.target,_,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(h);break}v=Tu(""+v),s.setAttribute(h,v);break;case"onClick":v!=null&&(s.onclick=Ea);break;case"onScroll":v!=null&&nt("scroll",s);break;case"onScrollEnd":v!=null&&nt("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(h=v.__html,h!=null){if(_.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}h=Tu(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(h,""+v):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":v===!0?s.setAttribute(h,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(h,v):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(h,v):s.removeAttribute(h);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(h):s.setAttribute(h,v);break;case"popover":nt("beforetoggle",s),nt("toggle",s),Au(s,"popover",v);break;case"xlinkActuate":Nr(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Nr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Nr(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Nr(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Nr(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Nr(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Au(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=x0.get(h)||h,Au(s,h,v))}}function Wx(s,u,h,v,_,A){switch(h){case"style":Td(s,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(h=v.__html,h!=null){if(_.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"children":typeof v=="string"?ai(s,v):(typeof v=="number"||typeof v=="bigint")&&ai(s,""+v);break;case"onScroll":v!=null&&nt("scroll",s);break;case"onScrollEnd":v!=null&&nt("scrollend",s);break;case"onClick":v!=null&&(s.onclick=Ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bd.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),u=h.slice(2,_?h.length-7:void 0),A=s[nn]||null,A=A!=null?A[h]:null,typeof A=="function"&&s.removeEventListener(u,A,_),typeof v=="function")){typeof A!="function"&&A!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(u,v,_);break e}h in s?s[h]=v:v===!0?s.setAttribute(h,""):Au(s,h,v)}}}function _n(s,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",s),nt("load",s);var v=!1,_=!1,A;for(A in h)if(h.hasOwnProperty(A)){var P=h[A];if(P!=null)switch(A){case"src":v=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Ft(s,u,A,P,h,null)}}_&&Ft(s,u,"srcSet",h.srcSet,h,null),v&&Ft(s,u,"src",h.src,h,null);return;case"input":nt("invalid",s);var F=A=P=_=null,q=null,J=null;for(v in h)if(h.hasOwnProperty(v)){var se=h[v];if(se!=null)switch(v){case"name":_=se;break;case"type":P=se;break;case"checked":q=se;break;case"defaultChecked":J=se;break;case"value":A=se;break;case"defaultValue":F=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(137,u));break;default:Ft(s,u,v,se,h,null)}}v0(s,A,F,q,J,P,_,!1);return;case"select":nt("invalid",s),v=P=A=null;for(_ in h)if(h.hasOwnProperty(_)&&(F=h[_],F!=null))switch(_){case"value":A=F;break;case"defaultValue":P=F;break;case"multiple":v=F;default:Ft(s,u,_,F,h,null)}u=A,h=P,s.multiple=!!v,u!=null?Ns(s,!!v,u,!1):h!=null&&Ns(s,!!v,h,!0);return;case"textarea":nt("invalid",s),A=_=v=null;for(P in h)if(h.hasOwnProperty(P)&&(F=h[P],F!=null))switch(P){case"value":v=F;break;case"defaultValue":_=F;break;case"children":A=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(n(91));break;default:Ft(s,u,P,F,h,null)}Ms(s,v,_,A);return;case"option":for(q in h)if(h.hasOwnProperty(q)&&(v=h[q],v!=null))switch(q){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ft(s,u,q,v,h,null)}return;case"dialog":nt("beforetoggle",s),nt("toggle",s),nt("cancel",s),nt("close",s);break;case"iframe":case"object":nt("load",s);break;case"video":case"audio":for(v=0;v<sh.length;v++)nt(sh[v],s);break;case"image":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"embed":case"source":case"link":nt("error",s),nt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in h)if(h.hasOwnProperty(J)&&(v=h[J],v!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Ft(s,u,J,v,h,null)}return;default:if(Cu(u)){for(se in h)h.hasOwnProperty(se)&&(v=h[se],v!==void 0&&Wx(s,u,se,v,h,void 0));return}}for(F in h)h.hasOwnProperty(F)&&(v=h[F],v!=null&&Ft(s,u,F,v,h,null))}function yU(s,u,h,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,A=null,P=null,F=null,q=null,J=null,se=null;for(ae in h){var fe=h[ae];if(h.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":q=fe;default:v.hasOwnProperty(ae)||Ft(s,u,ae,null,v,fe)}}for(var te in v){var ae=v[te];if(fe=h[te],v.hasOwnProperty(te)&&(ae!=null||fe!=null))switch(te){case"type":A=ae;break;case"name":_=ae;break;case"checked":J=ae;break;case"defaultChecked":se=ae;break;case"value":P=ae;break;case"defaultValue":F=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,u));break;default:ae!==fe&&Ft(s,u,te,ae,v,fe)}}Su(s,P,F,q,J,se,A,_);return;case"select":ae=P=F=te=null;for(A in h)if(q=h[A],h.hasOwnProperty(A)&&q!=null)switch(A){case"value":break;case"multiple":ae=q;default:v.hasOwnProperty(A)||Ft(s,u,A,null,v,q)}for(_ in v)if(A=v[_],q=h[_],v.hasOwnProperty(_)&&(A!=null||q!=null))switch(_){case"value":te=A;break;case"defaultValue":F=A;break;case"multiple":P=A;default:A!==q&&Ft(s,u,_,A,v,q)}u=F,h=P,v=ae,te!=null?Ns(s,!!h,te,!1):!!v!=!!h&&(u!=null?Ns(s,!!h,u,!0):Ns(s,!!h,h?[]:"",!1));return;case"textarea":ae=te=null;for(F in h)if(_=h[F],h.hasOwnProperty(F)&&_!=null&&!v.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Ft(s,u,F,null,v,_)}for(P in v)if(_=v[P],A=h[P],v.hasOwnProperty(P)&&(_!=null||A!=null))switch(P){case"value":te=_;break;case"defaultValue":ae=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==A&&Ft(s,u,P,_,v,A)}m0(s,te,ae);return;case"option":for(var Te in h)if(te=h[Te],h.hasOwnProperty(Te)&&te!=null&&!v.hasOwnProperty(Te))switch(Te){case"selected":s.selected=!1;break;default:Ft(s,u,Te,null,v,te)}for(q in v)if(te=v[q],ae=h[q],v.hasOwnProperty(q)&&te!==ae&&(te!=null||ae!=null))switch(q){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Ft(s,u,q,te,v,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in h)te=h[Be],h.hasOwnProperty(Be)&&te!=null&&!v.hasOwnProperty(Be)&&Ft(s,u,Be,null,v,te);for(J in v)if(te=v[J],ae=h[J],v.hasOwnProperty(J)&&te!==ae&&(te!=null||ae!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,u));break;default:Ft(s,u,J,te,v,ae)}return;default:if(Cu(u)){for(var zt in h)te=h[zt],h.hasOwnProperty(zt)&&te!==void 0&&!v.hasOwnProperty(zt)&&Wx(s,u,zt,void 0,v,te);for(se in v)te=v[se],ae=h[se],!v.hasOwnProperty(se)||te===ae||te===void 0&&ae===void 0||Wx(s,u,se,te,v,ae);return}}for(var K in h)te=h[K],h.hasOwnProperty(K)&&te!=null&&!v.hasOwnProperty(K)&&Ft(s,u,K,null,v,te);for(fe in v)te=v[fe],ae=h[fe],!v.hasOwnProperty(fe)||te===ae||te==null&&ae==null||Ft(s,u,fe,te,v,ae)}function R3(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xU(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,h=performance.getEntriesByType("resource"),v=0;v<h.length;v++){var _=h[v],A=_.transferSize,P=_.initiatorType,F=_.duration;if(A&&F&&R3(P)){for(P=0,F=_.responseEnd,v+=1;v<h.length;v++){var q=h[v],J=q.startTime;if(J>F)break;var se=q.transferSize,fe=q.initiatorType;se&&R3(fe)&&(q=q.responseEnd,P+=se*(q<F?1:(F-J)/(q-J)))}if(--v,u+=8*(A+P)/(_.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Kx=null,Xx=null;function bg(s){return s.nodeType===9?s:s.ownerDocument}function P3(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D3(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function Yx(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Qx=null;function bU(){var s=window.event;return s&&s.type==="popstate"?s===Qx?!1:(Qx=s,!0):(Qx=null,!1)}var N3=typeof setTimeout=="function"?setTimeout:void 0,_U=typeof clearTimeout=="function"?clearTimeout:void 0,M3=typeof Promise=="function"?Promise:void 0,wU=typeof queueMicrotask=="function"?queueMicrotask:typeof M3<"u"?function(s){return M3.resolve(null).then(s).catch(EU)}:N3;function EU(s){setTimeout(function(){throw s})}function nl(s){return s==="head"}function k3(s,u){var h=u,v=0;do{var _=h.nextSibling;if(s.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"||h==="/&"){if(v===0){s.removeChild(_),lf(u);return}v--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")v++;else if(h==="html")ch(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,ch(h);for(var A=h.firstChild;A;){var P=A.nextSibling,F=A.nodeName;A[Ka]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&A.rel.toLowerCase()==="stylesheet"||h.removeChild(A),A=P}}else h==="body"&&ch(s.ownerDocument.body);h=_}while(h);lf(u)}function j3(s,u){var h=s;s=0;do{var v=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=v}while(h)}function Zx(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Zx(h),Eu(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function AU(s,u,h,v){for(;s.nodeType===1;){var _=h;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Ka])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var A=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=ea(s.nextSibling),s===null)break}return null}function SU(s,u,h){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=ea(s.nextSibling),s===null))return null;return s}function L3(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=ea(s.nextSibling),s===null))return null;return s}function Jx(s){return s.data==="$?"||s.data==="$~"}function e2(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function CU(s,u){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||h.readyState!=="loading")u();else{var v=function(){u(),h.removeEventListener("DOMContentLoaded",v)};h.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function ea(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var t2=null;function B3(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(u===0)return ea(s.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}s=s.nextSibling}return null}function U3(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return s;u--}else h!=="/$"&&h!=="/&"||u++}s=s.previousSibling}return null}function F3(s,u,h){switch(u=bg(h),s){case"html":if(s=u.documentElement,!s)throw Error(n(452));return s;case"head":if(s=u.head,!s)throw Error(n(453));return s;case"body":if(s=u.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function ch(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);Eu(s)}var ta=new Map,z3=new Set;function _g(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Qo=re.d;re.d={f:TU,r:IU,D:OU,C:RU,L:PU,m:DU,X:MU,S:NU,M:kU};function TU(){var s=Qo.f(),u=dg();return s||u}function IU(s){var u=$i(s);u!==null&&u.tag===5&&u.type==="form"?i4(u):Qo.r(s)}var af=typeof document>"u"?null:document;function V3(s,u,h){var v=af;if(v&&typeof u=="string"&&u){var _=ii(u);_='link[rel="'+s+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),z3.has(_)||(z3.add(_),s={rel:s,crossOrigin:h,href:u},v.querySelector(_)===null&&(u=v.createElement("link"),_n(u,"link",s),Dr(u),v.head.appendChild(u)))}}function OU(s){Qo.D(s),V3("dns-prefetch",s,null)}function RU(s,u){Qo.C(s,u),V3("preconnect",s,u)}function PU(s,u,h){Qo.L(s,u,h);var v=af;if(v&&s&&u){var _='link[rel="preload"][as="'+ii(u)+'"]';u==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+ii(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+ii(h.imageSizes)+'"]')):_+='[href="'+ii(s)+'"]';var A=_;switch(u){case"style":A=of(s);break;case"script":A=sf(s)}ta.has(A)||(s=p({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:s,as:u},h),ta.set(A,s),v.querySelector(_)!==null||u==="style"&&v.querySelector(uh(A))||u==="script"&&v.querySelector(fh(A))||(u=v.createElement("link"),_n(u,"link",s),Dr(u),v.head.appendChild(u)))}}function DU(s,u){Qo.m(s,u);var h=af;if(h&&s){var v=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+ii(v)+'"][href="'+ii(s)+'"]',A=_;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=sf(s)}if(!ta.has(A)&&(s=p({rel:"modulepreload",href:s},u),ta.set(A,s),h.querySelector(_)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(fh(A)))return}v=h.createElement("link"),_n(v,"link",s),Dr(v),h.head.appendChild(v)}}}function NU(s,u,h){Qo.S(s,u,h);var v=af;if(v&&s){var _=Ya(v).hoistableStyles,A=of(s);u=u||"default";var P=_.get(A);if(!P){var F={loading:0,preload:null};if(P=v.querySelector(uh(A)))F.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":u},h),(h=ta.get(A))&&r2(s,h);var q=P=v.createElement("link");Dr(q),_n(q,"link",s),q._p=new Promise(function(J,se){q.onload=J,q.onerror=se}),q.addEventListener("load",function(){F.loading|=1}),q.addEventListener("error",function(){F.loading|=2}),F.loading|=4,wg(P,u,v)}P={type:"stylesheet",instance:P,count:1,state:F},_.set(A,P)}}}function MU(s,u){Qo.X(s,u);var h=af;if(h&&s){var v=Ya(h).hoistableScripts,_=sf(s),A=v.get(_);A||(A=h.querySelector(fh(_)),A||(s=p({src:s,async:!0},u),(u=ta.get(_))&&n2(s,u),A=h.createElement("script"),Dr(A),_n(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(_,A))}}function kU(s,u){Qo.M(s,u);var h=af;if(h&&s){var v=Ya(h).hoistableScripts,_=sf(s),A=v.get(_);A||(A=h.querySelector(fh(_)),A||(s=p({src:s,async:!0,type:"module"},u),(u=ta.get(_))&&n2(s,u),A=h.createElement("script"),Dr(A),_n(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(_,A))}}function H3(s,u,h,v){var _=(_=Ge.current)?_g(_):null;if(!_)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=of(h.href),h=Ya(_).hoistableStyles,v=h.get(u),v||(v={type:"style",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=of(h.href);var A=Ya(_).hoistableStyles,P=A.get(s);if(P||(_=_.ownerDocument||_,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,P),(A=_.querySelector(uh(s)))&&!A._p&&(P.instance=A,P.state.loading=5),ta.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ta.set(s,h),A||jU(_,s,h,P.state))),u&&v===null)throw Error(n(528,""));return P}if(u&&v!==null)throw Error(n(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=sf(h),h=Ya(_).hoistableScripts,v=h.get(u),v||(v={type:"script",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function of(s){return'href="'+ii(s)+'"'}function uh(s){return'link[rel="stylesheet"]['+s+"]"}function $3(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function jU(s,u,h,v){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=s.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),_n(u,"link",h),Dr(u),s.head.appendChild(u))}function sf(s){return'[src="'+ii(s)+'"]'}function fh(s){return"script[async]"+s}function q3(s,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var v=s.querySelector('style[data-href~="'+ii(h.href)+'"]');if(v)return u.instance=v,Dr(v),v;var _=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),Dr(v),_n(v,"style",_),wg(v,h.precedence,s),u.instance=v;case"stylesheet":_=of(h.href);var A=s.querySelector(uh(_));if(A)return u.state.loading|=4,u.instance=A,Dr(A),A;v=$3(h),(_=ta.get(_))&&r2(v,_),A=(s.ownerDocument||s).createElement("link"),Dr(A);var P=A;return P._p=new Promise(function(F,q){P.onload=F,P.onerror=q}),_n(A,"link",v),u.state.loading|=4,wg(A,h.precedence,s),u.instance=A;case"script":return A=sf(h.src),(_=s.querySelector(fh(A)))?(u.instance=_,Dr(_),_):(v=h,(_=ta.get(A))&&(v=p({},h),n2(v,_)),s=s.ownerDocument||s,_=s.createElement("script"),Dr(_),_n(_,"link",v),s.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,wg(v,h.precedence,s));return u.instance}function wg(s,u,h){for(var v=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=v.length?v[v.length-1]:null,A=_,P=0;P<v.length;P++){var F=v[P];if(F.dataset.precedence===u)A=F;else if(A!==_)break}A?A.parentNode.insertBefore(s,A.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(s,u.firstChild))}function r2(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function n2(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var Eg=null;function G3(s,u,h){if(Eg===null){var v=new Map,_=Eg=new Map;_.set(h,v)}else _=Eg,v=_.get(h),v||(v=new Map,_.set(h,v));if(v.has(s))return v;for(v.set(s,null),h=h.getElementsByTagName(s),_=0;_<h.length;_++){var A=h[_];if(!(A[Ka]||A[Pr]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var P=A.getAttribute(u)||"";P=s+P;var F=v.get(P);F?F.push(A):v.set(P,[A])}}return v}function W3(s,u,h){s=s.ownerDocument||s,s.head.insertBefore(h,u==="title"?s.querySelector("head > title"):null)}function LU(s,u,h){if(h===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return s=u.disabled,typeof u.precedence=="string"&&s==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function K3(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function BU(s,u,h,v){if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var _=of(v.href),A=u.querySelector(uh(_));if(A){u=A._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=Ag.bind(s),u.then(s,s)),h.state.loading|=4,h.instance=A,Dr(A);return}A=u.ownerDocument||u,v=$3(v),(_=ta.get(_))&&r2(v,_),A=A.createElement("link"),Dr(A);var P=A;P._p=new Promise(function(F,q){P.onload=F,P.onerror=q}),_n(A,"link",v),h.instance=A}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=Ag.bind(s),u.addEventListener("load",h),u.addEventListener("error",h))}}var i2=0;function UU(s,u){return s.stylesheets&&s.count===0&&Cg(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var v=setTimeout(function(){if(s.stylesheets&&Cg(s,s.stylesheets),s.unsuspend){var A=s.unsuspend;s.unsuspend=null,A()}},6e4+u);0<s.imgBytes&&i2===0&&(i2=62500*xU());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Cg(s,s.stylesheets),s.unsuspend)){var A=s.unsuspend;s.unsuspend=null,A()}},(s.imgBytes>i2?50:800)+u);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(_)}}:null}function Ag(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Sg=null;function Cg(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Sg=new Map,u.forEach(FU,s),Sg=null,Ag.call(s))}function FU(s,u){if(!(u.state.loading&4)){var h=Sg.get(s);if(h)var v=h.get(null);else{h=new Map,Sg.set(s,h);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<_.length;A++){var P=_[A];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(h.set(P.dataset.precedence,P),v=P)}v&&h.set(null,v)}_=u.instance,P=_.getAttribute("data-precedence"),A=h.get(P)||v,A===v&&h.set(null,_),h.set(P,_),this.count++,v=Ag.bind(this),_.addEventListener("load",v),_.addEventListener("error",v),A?A.parentNode.insertBefore(_,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),u.state.loading|=4}}var dh={$$typeof:O,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function zU(s,u,h,v,_,A,P,F,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ga(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ga(0),this.hiddenUpdates=Ga(null),this.identifierPrefix=v,this.onUncaughtError=_,this.onCaughtError=A,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function X3(s,u,h,v,_,A,P,F,q,J,se,fe){return s=new zU(s,u,h,P,q,J,se,fe,F),u=1,A===!0&&(u|=24),A=Ai(3,null,null,u),s.current=A,A.stateNode=s,u=Ly(),u.refCount++,s.pooledCache=u,u.refCount++,A.memoizedState={element:v,isDehydrated:h,cache:u},zy(A),s}function Y3(s){return s?(s=Lu,s):Lu}function Q3(s,u,h,v,_,A){_=Y3(_),v.context===null?v.context=_:v.pendingContext=_,v=Gs(u),v.payload={element:h},A=A===void 0?null:A,A!==null&&(v.callback=A),h=Ws(s,v,u),h!==null&&(ui(h,s,u),$d(h,s,u))}function Z3(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<u?h:u}}function a2(s,u){Z3(s,u),(s=s.alternate)&&Z3(s,u)}function J3(s){if(s.tag===13||s.tag===31){var u=xc(s,67108864);u!==null&&ui(u,s,67108864),a2(s,67108864)}}function eI(s){if(s.tag===13||s.tag===31){var u=Oi();u=sc(u);var h=xc(s,u);h!==null&&ui(h,s,u),a2(s,u)}}var Tg=!0;function VU(s,u,h,v){var _=X.T;X.T=null;var A=re.p;try{re.p=2,o2(s,u,h,v)}finally{re.p=A,X.T=_}}function HU(s,u,h,v){var _=X.T;X.T=null;var A=re.p;try{re.p=8,o2(s,u,h,v)}finally{re.p=A,X.T=_}}function o2(s,u,h,v){if(Tg){var _=s2(v);if(_===null)Gx(s,u,v,Ig,h),rI(s,v);else if(qU(_,s,u,h,v))v.stopPropagation();else if(rI(s,v),u&4&&-1<$U.indexOf(s)){for(;_!==null;){var A=$i(_);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var P=$a(A.pendingLanes);if(P!==0){var F=A;for(F.pendingLanes|=2,F.entangledLanes|=2;P;){var q=1<<31-wr(P);F.entanglements[1]|=q,P&=~q}co(A),(wt&6)===0&&(ug=Wn()+500,oh(0))}}break;case 31:case 13:F=xc(A,2),F!==null&&ui(F,A,2),dg(),a2(A,2)}if(A=s2(v),A===null&&Gx(s,u,v,Ig,h),A===_)break;_=A}_!==null&&v.stopPropagation()}else Gx(s,u,v,null,h)}}function s2(s){return s=qi(s),l2(s)}var Ig=null;function l2(s){if(Ig=null,s=Xa(s),s!==null){var u=a(s);if(u===null)s=null;else{var h=u.tag;if(h===13){if(s=o(u),s!==null)return s;s=null}else if(h===31){if(s=l(u),s!==null)return s;s=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return Ig=s,null}function tI(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nc()){case gd:return 2;case vd:return 8;case Ps:case py:return 32;case o0:return 268435456;default:return 32}default:return 32}}var c2=!1,il=null,al=null,ol=null,hh=new Map,ph=new Map,sl=[],$U="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rI(s,u){switch(s){case"focusin":case"focusout":il=null;break;case"dragenter":case"dragleave":al=null;break;case"mouseover":case"mouseout":ol=null;break;case"pointerover":case"pointerout":hh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ph.delete(u.pointerId)}}function gh(s,u,h,v,_,A){return s===null||s.nativeEvent!==A?(s={blockedOn:u,domEventName:h,eventSystemFlags:v,nativeEvent:A,targetContainers:[_]},u!==null&&(u=$i(u),u!==null&&J3(u)),s):(s.eventSystemFlags|=v,u=s.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),s)}function qU(s,u,h,v,_){switch(u){case"focusin":return il=gh(il,s,u,h,v,_),!0;case"dragenter":return al=gh(al,s,u,h,v,_),!0;case"mouseover":return ol=gh(ol,s,u,h,v,_),!0;case"pointerover":var A=_.pointerId;return hh.set(A,gh(hh.get(A)||null,s,u,h,v,_)),!0;case"gotpointercapture":return A=_.pointerId,ph.set(A,gh(ph.get(A)||null,s,u,h,v,_)),!0}return!1}function nI(s){var u=Xa(s.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){s.blockedOn=u,_a(s.priority,function(){eI(h)});return}}else if(u===31){if(u=l(h),u!==null){s.blockedOn=u,_a(s.priority,function(){eI(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Og(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var h=s2(s.nativeEvent);if(h===null){h=s.nativeEvent;var v=new h.constructor(h.type,h);Id=v,h.target.dispatchEvent(v),Id=null}else return u=$i(h),u!==null&&J3(u),s.blockedOn=h,!1;u.shift()}return!0}function iI(s,u,h){Og(s)&&h.delete(u)}function GU(){c2=!1,il!==null&&Og(il)&&(il=null),al!==null&&Og(al)&&(al=null),ol!==null&&Og(ol)&&(ol=null),hh.forEach(iI),ph.forEach(iI)}function Rg(s,u){s.blockedOn===u&&(s.blockedOn=null,c2||(c2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,GU)))}var Pg=null;function aI(s){Pg!==s&&(Pg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pg===s&&(Pg=null);for(var u=0;u<s.length;u+=3){var h=s[u],v=s[u+1],_=s[u+2];if(typeof v!="function"){if(l2(v||h)===null)continue;break}var A=$i(h);A!==null&&(s.splice(u,3),u-=3,sx(A,{pending:!0,data:_,method:h.method,action:v},v,_))}}))}function lf(s){function u(q){return Rg(q,s)}il!==null&&Rg(il,s),al!==null&&Rg(al,s),ol!==null&&Rg(ol,s),hh.forEach(u),ph.forEach(u);for(var h=0;h<sl.length;h++){var v=sl[h];v.blockedOn===s&&(v.blockedOn=null)}for(;0<sl.length&&(h=sl[0],h.blockedOn===null);)nI(h),h.blockedOn===null&&sl.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(v=0;v<h.length;v+=3){var _=h[v],A=h[v+1],P=_[nn]||null;if(typeof A=="function")P||aI(h);else if(P){var F=null;if(A&&A.hasAttribute("formAction")){if(_=A,P=A[nn]||null)F=P.formAction;else if(l2(_)!==null)continue}else F=P.action;typeof F=="function"?h[v+1]=F:(h.splice(v,3),v-=3),aI(h)}}}function oI(){function s(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(P){return _=P})},focusReset:"manual",scroll:"manual"})}function u(){_!==null&&(_(),_=null),v||setTimeout(h,20)}function h(){if(!v&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),_!==null&&(_(),_=null)}}}function u2(s){this._internalRoot=s}Dg.prototype.render=u2.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(n(409));var h=u.current,v=Oi();Q3(h,v,s,u,null,null)},Dg.prototype.unmount=u2.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;Q3(s.current,2,null,s,null,null),dg(),u[Wa]=null}};function Dg(s){this._internalRoot=s}Dg.prototype.unstable_scheduleHydration=function(s){if(s){var u=d0();s={blockedOn:null,target:s,priority:u};for(var h=0;h<sl.length&&u!==0&&u<sl[h].priority;h++);sl.splice(h,0,s),h===0&&nI(s)}};var sI=e.version;if(sI!=="19.2.0")throw Error(n(527,sI,"19.2.0"));re.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=f(u),s=s!==null?d(s):null,s=s===null?null:s.stateNode,s};var WU={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ng.isDisabled&&Ng.supportsFiber)try{xa=Ng.inject(WU),vn=Ng}catch{}}return mh.createRoot=function(s,u){if(!i(s))throw Error(n(299));var h=!1,v="",_=p4,A=g4,P=v4;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(P=u.onRecoverableError)),u=X3(s,1,!1,null,null,h,v,null,_,A,P,oI),s[Wa]=u.current,qx(s),new u2(u)},mh.hydrateRoot=function(s,u,h){if(!i(s))throw Error(n(299));var v=!1,_="",A=p4,P=g4,F=v4,q=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&(F=h.onRecoverableError),h.formState!==void 0&&(q=h.formState)),u=X3(s,1,!0,u,h??null,v,_,q,A,P,F,oI),u.context=Y3(null),h=u.current,v=Oi(),v=sc(v),_=Gs(v),_.callback=null,Ws(h,_,v),h=v,u.current.lanes=h,ac(u,h),co(u),s[Wa]=u.current,qx(s),new Dg(u)},mh.version="19.2.0",mh}var mI;function iF(){if(mI)return h2.exports;mI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),h2.exports=nF(),h2.exports}var aF=iF();const oF=To(aF),sF=({title:t})=>y.jsx("header",{children:t});var nD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yI=Hn.createContext&&Hn.createContext(nD),lF=["attr","size","title"];function cF(t,e){if(t==null)return{};var r=uF(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uF(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function O1(){return O1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O1.apply(this,arguments)}function xI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function R1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xI(Object(r),!0).forEach(function(n){fF(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fF(t,e,r){return e=dF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dF(t){var e=hF(t,"string");return typeof e=="symbol"?e:e+""}function hF(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iD(t){return t&&t.map((e,r)=>Hn.createElement(e.tag,R1({key:r},e.attr),iD(e.child)))}function Ee(t){return e=>Hn.createElement(pF,O1({attr:R1({},t.attr)},e),iD(t.child))}function pF(t){var e=r=>{var{attr:n,size:i,title:a}=t,o=cF(t,lF),l=i||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Hn.createElement("svg",O1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:R1(R1({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Hn.createElement("title",null,a),t.children)};return yI!==void 0?Hn.createElement(yI.Consumer,null,r=>e(r)):e(nD)}function gF(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function vF(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function Gv(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function mF(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function yF(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function Wv(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"},child:[]}]})(t)}function Kv(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}function xF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"},child:[]}]})(t)}function bF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15-5-2.18L7 18V5h10v13z"},child:[]}]})(t)}function _F(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function Xv(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(t)}function Yv(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function wF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function Kf(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function EF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"},child:[]}]})(t)}function aD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"},child:[]}]})(t)}function oD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},child:[]}]})(t)}function AF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function SF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(t)}function CF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2 11.7V16h-4v-2.3C8.48 12.63 7 11.53 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.49-1.51 3.65-3 4.7z"},child:[]}]})(t)}function El(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function TF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"},child:[]}]})(t)}function IF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function sD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"},child:[]}]})(t)}function lD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function OF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function Qv(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function RF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"},child:[]}]})(t)}function nE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(t)}function cD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function uD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function PF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"},child:[]}]})(t)}function DF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function fD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function Zv(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(t)}function NF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(t)}function P1(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function Cf(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2zm-5 12H9v-2h6v2zm5-7H4V4l16-.02V7z"},child:[]}]})(t)}function dD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"},child:[]}]})(t)}function iE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(t)}function MF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function kF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(t)}function jF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"},child:[]}]})(t)}function LF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"},child:[]}]})(t)}function BF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(t)}function D1(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function Jh(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m9.4 10.5 4.77-8.26a9.984 9.984 0 0 0-8.49 2.01l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25A9.91 9.91 0 0 0 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75A9.958 9.958 0 0 0 2.2 14h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35-.93 1.6z"},child:[]}]})(t)}function hD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function UF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function FF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3.2"},child:[]},{tag:"path",attr:{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},child:[]}]})(t)}function N1(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m8.1 13.34 2.83-2.83L3.91 3.5a4.008 4.008 0 0 0 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"},child:[]}]})(t)}function aE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"},child:[]}]})(t)}function wp(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(t)}function m2(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},child:[]}]})(t)}function zF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function pD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"},child:[]}]})(t)}function oE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"},child:[]}]})(t)}function cs(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function VF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function HF(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94A5.01 5.01 0 0 0 11 15.9V19H7v2h10v-2h-4v-3.1a5.01 5.01 0 0 0 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"},child:[]}]})(t)}function bI(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function gD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function sE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function lE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4zm3 2v2h6v-2h-6zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4z"},child:[]}]})(t)}function Tf(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function vD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(t)}function mD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"},child:[]}]})(t)}function $F(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"},child:[]}]})(t)}function __(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const qF=({currentScreen:t,onNavigate:e})=>{const r=[{screen:"home",icon:y.jsx(mF,{size:24}),label:"ホーム"},{screen:"meals",icon:y.jsx(aE,{size:24}),label:"食事"},{screen:"barcode",icon:y.jsx(vF,{size:24}),label:"スキャン"},{screen:"report",icon:y.jsx(gF,{size:24}),label:"レポート"},{screen:"social",icon:y.jsx(gD,{size:24}),label:"ソーシャル"},{screen:"settings",icon:y.jsx(yF,{size:24}),label:"設定"}];return y.jsx("nav",{id:"bottomNav",children:r.map(n=>y.jsxs("button",{className:`nav-item ${t===n.screen?"active":""}`,onClick:()=>e(n.screen),children:[y.jsx("span",{children:n.icon}),y.jsx("span",{children:n.label})]},n.screen))})},_I=t=>{let e;const r=new Set,n=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const g=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),r.forEach(m=>m(e,g))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>c,subscribe:f=>(r.add(f),()=>r.delete(f))},c=e=t(n,i,l);return l},GF=(t=>t?_I(t):_I),WF=t=>t;function KF(t,e=WF){const r=Hn.useSyncExternalStore(t.subscribe,Hn.useCallback(()=>e(t.getState()),[t,e]),Hn.useCallback(()=>e(t.getInitialState()),[t,e]));return Hn.useDebugValue(r),r}const wI=t=>{const e=GF(t),r=n=>KF(e,n);return Object.assign(r,e),r},hu=(t=>t?wI(t):wI);function Dl(t,e){try{const r=localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.error(`localStorage取得エラー (${t}):`,r),e}}function jt(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`localStorage保存エラー (${t}):`,r)}}const it={INTAKES:"intakes",EXPENSES:"expenses",STOCKS:"stocks",SHOPPING:"shopping",RECIPE_HISTORY:"recipeHistory",FAVORITE_RECIPES:"favoriteRecipes",SETTINGS:"settings",BADGES:"app-badges"},wn=[];for(let t=0;t<256;++t)wn.push((t+256).toString(16).slice(1));function XF(t,e=0){return(wn[t[e+0]]+wn[t[e+1]]+wn[t[e+2]]+wn[t[e+3]]+"-"+wn[t[e+4]]+wn[t[e+5]]+"-"+wn[t[e+6]]+wn[t[e+7]]+"-"+wn[t[e+8]]+wn[t[e+9]]+"-"+wn[t[e+10]]+wn[t[e+11]]+wn[t[e+12]]+wn[t[e+13]]+wn[t[e+14]]+wn[t[e+15]]).toLowerCase()}let y2;const YF=new Uint8Array(16);function QF(){if(!y2){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");y2=crypto.getRandomValues.bind(crypto)}return y2(YF)}const ZF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),EI={randomUUID:ZF};function JF(t,e,r){t=t||{};const n=t.random??t.rng?.()??QF();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,XF(n)}function ez(t,e,r){return EI.randomUUID&&!t?EI.randomUUID():JF(t)}function Al(){return ez()}const tz=()=>{};var AI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},rz=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],l=t[r++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},xD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,d=a>>2,p=(a&3)<<4|l>>4;let g=(l&15)<<2|f>>6,m=f&63;c||(m=64,o||(g=64)),n.push(r[d],r[p],r[g],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const f=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||l==null||f==null||p==null)throw new nz;const g=a<<2|l>>4;if(n.push(g),f!==64){const m=l<<4&240|f>>2;if(n.push(m),p!==64){const b=f<<6&192|p;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iz=function(t){const e=yD(t);return xD.encodeByteArray(e,!0)},M1=function(t){return iz(t).replace(/\./g,"")},bD=function(t){try{return xD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=()=>az().__FIREBASE_DEFAULTS__,sz=()=>{if(typeof process>"u"||typeof AI>"u")return;const t=AI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bD(t[1]);return e&&JSON.parse(e)},Jv=()=>{try{return tz()||oz()||sz()||lz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_D=t=>Jv()?.emulatorHosts?.[t],cE=t=>{const e=_D(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},wD=()=>Jv()?.config,ED=t=>Jv()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function em(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[M1(JSON.stringify(r)),M1(JSON.stringify(o)),""].join(".")}const $h={};function uz(){const t={prod:[],emulator:[]};for(const e of Object.keys($h))$h[e]?t.emulator.push(e):t.prod.push(e);return t}function fz(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let SI=!1;function tm(t,e){if(typeof window>"u"||typeof document>"u"||!Io(window.location.host)||$h[t]===e||$h[t]||SI)return;$h[t]=e;function r(g){return`__firebase__banner__${g}`}const n="__firebase__banner",a=uz().prod.length>0;function o(){const g=document.getElementById(n);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{SI=!0,o()},g}function d(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=fz(n),m=r("text"),b=document.getElementById(m)||document.createElement("span"),w=r("learnmore"),E=document.getElementById(w)||document.createElement("a"),S=r("preprendIcon"),I=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const O=g.element;l(O),d(E,w);const D=f();c(I,S),O.append(I,b,E,D),document.body.appendChild(O)}a?(b.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function hz(){const t=Jv()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mz(){const t=qn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yz(){return!hz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xz(){try{return typeof indexedDB=="object"}catch{return!1}}function bz(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z="FirebaseError";class za extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=_z,Object.setPrototypeOf(this,za.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ep.prototype.create)}}class Ep{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?wz(a,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new za(i,l,n)}}function wz(t,e){return t.replace(Ez,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Ez=/\{\$([^}]+)}/g;function Az(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tu(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(CI(a)&&CI(o)){if(!tu(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function CI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Dh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Nh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function Sz(t,e){const r=new Cz(t,e);return r.subscribe.bind(r)}class Cz{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Tz(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=x2),i.error===void 0&&(i.error=x2),i.complete===void 0&&(i.complete=x2);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tz(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function x2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iz=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new cz;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rz(e))try{this.getOrInitializeService({instanceIdentifier:kc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kc){return this.instances.has(e)}getOptions(e=kc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Oz(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=kc){return this.component?this.component.multipleInstances?e:kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Oz(t){return t===kc?void 0:t}function Rz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Iz(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const Dz={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},Nz=lt.INFO,Mz={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},kz=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=Mz[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uE{constructor(e){this.name=e,this._logLevel=Nz,this._logHandler=kz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const jz=(t,e)=>e.some(r=>t instanceof r);let TI,II;function Lz(){return TI||(TI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bz(){return II||(II=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SD=new WeakMap,w_=new WeakMap,CD=new WeakMap,b2=new WeakMap,fE=new WeakMap;function Uz(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Sl(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&SD.set(r,t)}).catch(()=>{}),fE.set(e,t),e}function Fz(t){if(w_.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});w_.set(t,e)}let E_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return w_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CD.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Sl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zz(t){E_=t(E_)}function Vz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(_2(this),e,...r);return CD.set(n,e.sort?e.sort():[e]),Sl(n)}:Bz().includes(t)?function(...e){return t.apply(_2(this),e),Sl(SD.get(this))}:function(...e){return Sl(t.apply(_2(this),e))}}function Hz(t){return typeof t=="function"?Vz(t):(t instanceof IDBTransaction&&Fz(t),jz(t,Lz())?new Proxy(t,E_):t)}function Sl(t){if(t instanceof IDBRequest)return Uz(t);if(b2.has(t))return b2.get(t);const e=Hz(t);return e!==t&&(b2.set(t,e),fE.set(e,t)),e}const _2=t=>fE.get(t);function $z(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=Sl(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Sl(o.result),c.oldVersion,c.newVersion,Sl(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const qz=["get","getKey","getAll","getAllKeys","count"],Gz=["put","add","delete","clear"],w2=new Map;function OI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(w2.get(e))return w2.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Gz.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||qz.includes(r)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return n&&(f=f.index(l.shift())),(await Promise.all([f[r](...l),i&&c.done]))[0]};return w2.set(e,a),a}zz(t=>({...t,get:(e,r,n)=>OI(e,r)||t.get(e,r,n),has:(e,r)=>!!OI(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Kz(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Kz(t){return t.getComponent()?.type==="VERSION"}const A_="@firebase/app",RI="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new uE("@firebase/app"),Xz="@firebase/app-compat",Yz="@firebase/analytics-compat",Qz="@firebase/analytics",Zz="@firebase/app-check-compat",Jz="@firebase/app-check",eV="@firebase/auth",tV="@firebase/auth-compat",rV="@firebase/database",nV="@firebase/data-connect",iV="@firebase/database-compat",aV="@firebase/functions",oV="@firebase/functions-compat",sV="@firebase/installations",lV="@firebase/installations-compat",cV="@firebase/messaging",uV="@firebase/messaging-compat",fV="@firebase/performance",dV="@firebase/performance-compat",hV="@firebase/remote-config",pV="@firebase/remote-config-compat",gV="@firebase/storage",vV="@firebase/storage-compat",mV="@firebase/firestore",yV="@firebase/ai",xV="@firebase/firestore-compat",bV="firebase",_V="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_="[DEFAULT]",wV={[A_]:"fire-core",[Xz]:"fire-core-compat",[Qz]:"fire-analytics",[Yz]:"fire-analytics-compat",[Jz]:"fire-app-check",[Zz]:"fire-app-check-compat",[eV]:"fire-auth",[tV]:"fire-auth-compat",[rV]:"fire-rtdb",[nV]:"fire-data-connect",[iV]:"fire-rtdb-compat",[aV]:"fire-fn",[oV]:"fire-fn-compat",[sV]:"fire-iid",[lV]:"fire-iid-compat",[cV]:"fire-fcm",[uV]:"fire-fcm-compat",[fV]:"fire-perf",[dV]:"fire-perf-compat",[hV]:"fire-rc",[pV]:"fire-rc-compat",[gV]:"fire-gcs",[vV]:"fire-gcs-compat",[mV]:"fire-fst",[xV]:"fire-fst-compat",[yV]:"fire-vertex","fire-js":"fire-js",[bV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new Map,EV=new Map,C_=new Map;function PI(t,e){try{t.container.addComponent(e)}catch(r){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Nl(t){const e=t.name;if(C_.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;C_.set(e,t);for(const r of k1.values())PI(r,t);for(const r of EV.values())PI(r,t);return!0}function Sp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ti(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cl=new Ep("app","Firebase",AV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=_V;function TD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:S_,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Cl.create("bad-app-name",{appName:String(i)});if(r||(r=wD()),!r)throw Cl.create("no-options");const a=k1.get(i);if(a){if(tu(r,a.options)&&tu(n,a.config))return a;throw Cl.create("duplicate-app",{appName:i})}const o=new Pz(i);for(const c of C_.values())o.addComponent(c);const l=new SV(r,n,o);return k1.set(i,l),l}function rm(t=S_){const e=k1.get(t);if(!e&&t===S_&&wD())return TD();if(!e)throw Cl.create("no-app",{appName:t});return e}function fa(t,e,r){let n=wV[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${n}" with version "${e}":`];i&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(o.join(" "));return}Nl(new us(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="firebase-heartbeat-database",TV=1,ep="firebase-heartbeat-store";let E2=null;function ID(){return E2||(E2=$z(CV,TV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ep)}catch(r){console.warn(r)}}}}).catch(t=>{throw Cl.create("idb-open",{originalErrorMessage:t.message})})),E2}async function IV(t){try{const r=(await ID()).transaction(ep),n=await r.objectStore(ep).get(OD(t));return await r.done,n}catch(e){if(e instanceof za)fs.warn(e.message);else{const r=Cl.create("idb-get",{originalErrorMessage:e?.message});fs.warn(r.message)}}}async function DI(t,e){try{const n=(await ID()).transaction(ep,"readwrite");await n.objectStore(ep).put(e,OD(t)),await n.done}catch(r){if(r instanceof za)fs.warn(r.message);else{const n=Cl.create("idb-set",{originalErrorMessage:r?.message});fs.warn(n.message)}}}function OD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=1024,RV=30;class PV{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new NV(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=NI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>RV){const i=MV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=NI(),{heartbeatsToSend:r,unsentEntries:n}=DV(this._heartbeatsCache.heartbeats),i=M1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return fs.warn(e),""}}}function NI(){return new Date().toISOString().substring(0,10)}function DV(t,e=OV){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),MI(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),MI(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class NV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xz()?bz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await IV(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return DI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return DI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function MI(t){return M1(JSON.stringify({version:2,heartbeats:t})).length}function MV(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){Nl(new us("platform-logger",e=>new Wz(e),"PRIVATE")),Nl(new us("heartbeat",e=>new PV(e),"PRIVATE")),fa(A_,RI,t),fa(A_,RI,"esm2020"),fa("fire-js","")}kV("");var kI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tl,RD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,N){function L(){}L.prototype=N.prototype,R.F=N.prototype,R.prototype=new L,R.prototype.constructor=R,R.D=function(U,z,H){for(var j=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)j[ue-2]=arguments[ue];return N.prototype[z].apply(U,j)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,N,L){L||(L=0);const U=Array(16);if(typeof N=="string")for(var z=0;z<16;++z)U[z]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(z=0;z<16;++z)U[z]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;N=R.g[0],L=R.g[1],z=R.g[2];let H=R.g[3],j;j=N+(H^L&(z^H))+U[0]+3614090360&4294967295,N=L+(j<<7&4294967295|j>>>25),j=H+(z^N&(L^z))+U[1]+3905402710&4294967295,H=N+(j<<12&4294967295|j>>>20),j=z+(L^H&(N^L))+U[2]+606105819&4294967295,z=H+(j<<17&4294967295|j>>>15),j=L+(N^z&(H^N))+U[3]+3250441966&4294967295,L=z+(j<<22&4294967295|j>>>10),j=N+(H^L&(z^H))+U[4]+4118548399&4294967295,N=L+(j<<7&4294967295|j>>>25),j=H+(z^N&(L^z))+U[5]+1200080426&4294967295,H=N+(j<<12&4294967295|j>>>20),j=z+(L^H&(N^L))+U[6]+2821735955&4294967295,z=H+(j<<17&4294967295|j>>>15),j=L+(N^z&(H^N))+U[7]+4249261313&4294967295,L=z+(j<<22&4294967295|j>>>10),j=N+(H^L&(z^H))+U[8]+1770035416&4294967295,N=L+(j<<7&4294967295|j>>>25),j=H+(z^N&(L^z))+U[9]+2336552879&4294967295,H=N+(j<<12&4294967295|j>>>20),j=z+(L^H&(N^L))+U[10]+4294925233&4294967295,z=H+(j<<17&4294967295|j>>>15),j=L+(N^z&(H^N))+U[11]+2304563134&4294967295,L=z+(j<<22&4294967295|j>>>10),j=N+(H^L&(z^H))+U[12]+1804603682&4294967295,N=L+(j<<7&4294967295|j>>>25),j=H+(z^N&(L^z))+U[13]+4254626195&4294967295,H=N+(j<<12&4294967295|j>>>20),j=z+(L^H&(N^L))+U[14]+2792965006&4294967295,z=H+(j<<17&4294967295|j>>>15),j=L+(N^z&(H^N))+U[15]+1236535329&4294967295,L=z+(j<<22&4294967295|j>>>10),j=N+(z^H&(L^z))+U[1]+4129170786&4294967295,N=L+(j<<5&4294967295|j>>>27),j=H+(L^z&(N^L))+U[6]+3225465664&4294967295,H=N+(j<<9&4294967295|j>>>23),j=z+(N^L&(H^N))+U[11]+643717713&4294967295,z=H+(j<<14&4294967295|j>>>18),j=L+(H^N&(z^H))+U[0]+3921069994&4294967295,L=z+(j<<20&4294967295|j>>>12),j=N+(z^H&(L^z))+U[5]+3593408605&4294967295,N=L+(j<<5&4294967295|j>>>27),j=H+(L^z&(N^L))+U[10]+38016083&4294967295,H=N+(j<<9&4294967295|j>>>23),j=z+(N^L&(H^N))+U[15]+3634488961&4294967295,z=H+(j<<14&4294967295|j>>>18),j=L+(H^N&(z^H))+U[4]+3889429448&4294967295,L=z+(j<<20&4294967295|j>>>12),j=N+(z^H&(L^z))+U[9]+568446438&4294967295,N=L+(j<<5&4294967295|j>>>27),j=H+(L^z&(N^L))+U[14]+3275163606&4294967295,H=N+(j<<9&4294967295|j>>>23),j=z+(N^L&(H^N))+U[3]+4107603335&4294967295,z=H+(j<<14&4294967295|j>>>18),j=L+(H^N&(z^H))+U[8]+1163531501&4294967295,L=z+(j<<20&4294967295|j>>>12),j=N+(z^H&(L^z))+U[13]+2850285829&4294967295,N=L+(j<<5&4294967295|j>>>27),j=H+(L^z&(N^L))+U[2]+4243563512&4294967295,H=N+(j<<9&4294967295|j>>>23),j=z+(N^L&(H^N))+U[7]+1735328473&4294967295,z=H+(j<<14&4294967295|j>>>18),j=L+(H^N&(z^H))+U[12]+2368359562&4294967295,L=z+(j<<20&4294967295|j>>>12),j=N+(L^z^H)+U[5]+4294588738&4294967295,N=L+(j<<4&4294967295|j>>>28),j=H+(N^L^z)+U[8]+2272392833&4294967295,H=N+(j<<11&4294967295|j>>>21),j=z+(H^N^L)+U[11]+1839030562&4294967295,z=H+(j<<16&4294967295|j>>>16),j=L+(z^H^N)+U[14]+4259657740&4294967295,L=z+(j<<23&4294967295|j>>>9),j=N+(L^z^H)+U[1]+2763975236&4294967295,N=L+(j<<4&4294967295|j>>>28),j=H+(N^L^z)+U[4]+1272893353&4294967295,H=N+(j<<11&4294967295|j>>>21),j=z+(H^N^L)+U[7]+4139469664&4294967295,z=H+(j<<16&4294967295|j>>>16),j=L+(z^H^N)+U[10]+3200236656&4294967295,L=z+(j<<23&4294967295|j>>>9),j=N+(L^z^H)+U[13]+681279174&4294967295,N=L+(j<<4&4294967295|j>>>28),j=H+(N^L^z)+U[0]+3936430074&4294967295,H=N+(j<<11&4294967295|j>>>21),j=z+(H^N^L)+U[3]+3572445317&4294967295,z=H+(j<<16&4294967295|j>>>16),j=L+(z^H^N)+U[6]+76029189&4294967295,L=z+(j<<23&4294967295|j>>>9),j=N+(L^z^H)+U[9]+3654602809&4294967295,N=L+(j<<4&4294967295|j>>>28),j=H+(N^L^z)+U[12]+3873151461&4294967295,H=N+(j<<11&4294967295|j>>>21),j=z+(H^N^L)+U[15]+530742520&4294967295,z=H+(j<<16&4294967295|j>>>16),j=L+(z^H^N)+U[2]+3299628645&4294967295,L=z+(j<<23&4294967295|j>>>9),j=N+(z^(L|~H))+U[0]+4096336452&4294967295,N=L+(j<<6&4294967295|j>>>26),j=H+(L^(N|~z))+U[7]+1126891415&4294967295,H=N+(j<<10&4294967295|j>>>22),j=z+(N^(H|~L))+U[14]+2878612391&4294967295,z=H+(j<<15&4294967295|j>>>17),j=L+(H^(z|~N))+U[5]+4237533241&4294967295,L=z+(j<<21&4294967295|j>>>11),j=N+(z^(L|~H))+U[12]+1700485571&4294967295,N=L+(j<<6&4294967295|j>>>26),j=H+(L^(N|~z))+U[3]+2399980690&4294967295,H=N+(j<<10&4294967295|j>>>22),j=z+(N^(H|~L))+U[10]+4293915773&4294967295,z=H+(j<<15&4294967295|j>>>17),j=L+(H^(z|~N))+U[1]+2240044497&4294967295,L=z+(j<<21&4294967295|j>>>11),j=N+(z^(L|~H))+U[8]+1873313359&4294967295,N=L+(j<<6&4294967295|j>>>26),j=H+(L^(N|~z))+U[15]+4264355552&4294967295,H=N+(j<<10&4294967295|j>>>22),j=z+(N^(H|~L))+U[6]+2734768916&4294967295,z=H+(j<<15&4294967295|j>>>17),j=L+(H^(z|~N))+U[13]+1309151649&4294967295,L=z+(j<<21&4294967295|j>>>11),j=N+(z^(L|~H))+U[4]+4149444226&4294967295,N=L+(j<<6&4294967295|j>>>26),j=H+(L^(N|~z))+U[11]+3174756917&4294967295,H=N+(j<<10&4294967295|j>>>22),j=z+(N^(H|~L))+U[2]+718787259&4294967295,z=H+(j<<15&4294967295|j>>>17),j=L+(H^(z|~N))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+N&4294967295,R.g[1]=R.g[1]+(z+(j<<21&4294967295|j>>>11))&4294967295,R.g[2]=R.g[2]+z&4294967295,R.g[3]=R.g[3]+H&4294967295}n.prototype.v=function(R,N){N===void 0&&(N=R.length);const L=N-this.blockSize,U=this.C;let z=this.h,H=0;for(;H<N;){if(z==0)for(;H<=L;)i(this,R,H),H+=this.blockSize;if(typeof R=="string"){for(;H<N;)if(U[z++]=R.charCodeAt(H++),z==this.blockSize){i(this,U),z=0;break}}else for(;H<N;)if(U[z++]=R[H++],z==this.blockSize){i(this,U),z=0;break}}this.h=z,this.o+=N},n.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var N=1;N<R.length-8;++N)R[N]=0;N=this.o*8;for(var L=R.length-8;L<R.length;++L)R[L]=N&255,N/=256;for(this.v(R),R=Array(16),N=0,L=0;L<4;++L)for(let U=0;U<32;U+=8)R[N++]=this.g[L]>>>U&255;return R};function a(R,N){var L=l;return Object.prototype.hasOwnProperty.call(L,R)?L[R]:L[R]=N(R)}function o(R,N){this.h=N;const L=[];let U=!0;for(let z=R.length-1;z>=0;z--){const H=R[z]|0;U&&H==N||(L[z]=H,U=!1)}this.g=L}var l={};function c(R){return-128<=R&&R<128?a(R,function(N){return new o([N|0],N<0?-1:0)}):new o([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return E(f(-R));const N=[];let L=1;for(let U=0;R>=L;U++)N[U]=R/L|0,L*=4294967296;return new o(N,0)}function d(R,N){if(R.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R.charAt(0)=="-")return E(d(R.substring(1),N));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=f(Math.pow(N,8));let U=p;for(let H=0;H<R.length;H+=8){var z=Math.min(8,R.length-H);const j=parseInt(R.substring(H,H+z),N);z<8?(z=f(Math.pow(N,z)),U=U.j(z).add(f(j))):(U=U.j(L),U=U.add(f(j)))}return U}var p=c(0),g=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-E(this).m();let R=0,N=1;for(let L=0;L<this.g.length;L++){const U=this.i(L);R+=(U>=0?U:4294967296+U)*N,N*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(w(this))return"-"+E(this).toString(R);const N=f(Math.pow(R,6));var L=this;let U="";for(;;){const z=D(L,N).g;L=S(L,z.j(N));let H=((L.g.length>0?L.g[0]:L.h)>>>0).toString(R);if(L=z,b(L))return H+U;for(;H.length<6;)H="0"+H;U=H+U}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(let N=0;N<R.g.length;N++)if(R.g[N]!=0)return!1;return!0}function w(R){return R.h==-1}t.l=function(R){return R=S(this,R),w(R)?-1:b(R)?0:1};function E(R){const N=R.g.length,L=[];for(let U=0;U<N;U++)L[U]=~R.g[U];return new o(L,~R.h).add(g)}t.abs=function(){return w(this)?E(this):this},t.add=function(R){const N=Math.max(this.g.length,R.g.length),L=[];let U=0;for(let z=0;z<=N;z++){let H=U+(this.i(z)&65535)+(R.i(z)&65535),j=(H>>>16)+(this.i(z)>>>16)+(R.i(z)>>>16);U=j>>>16,H&=65535,j&=65535,L[z]=j<<16|H}return new o(L,L[L.length-1]&-2147483648?-1:0)};function S(R,N){return R.add(E(N))}t.j=function(R){if(b(this)||b(R))return p;if(w(this))return w(R)?E(this).j(E(R)):E(E(this).j(R));if(w(R))return E(this.j(E(R)));if(this.l(m)<0&&R.l(m)<0)return f(this.m()*R.m());const N=this.g.length+R.g.length,L=[];for(var U=0;U<2*N;U++)L[U]=0;for(U=0;U<this.g.length;U++)for(let z=0;z<R.g.length;z++){const H=this.i(U)>>>16,j=this.i(U)&65535,ue=R.i(z)>>>16,ye=R.i(z)&65535;L[2*U+2*z]+=j*ye,I(L,2*U+2*z),L[2*U+2*z+1]+=H*ye,I(L,2*U+2*z+1),L[2*U+2*z+1]+=j*ue,I(L,2*U+2*z+1),L[2*U+2*z+2]+=H*ue,I(L,2*U+2*z+2)}for(R=0;R<N;R++)L[R]=L[2*R+1]<<16|L[2*R];for(R=N;R<2*N;R++)L[R]=0;return new o(L,0)};function I(R,N){for(;(R[N]&65535)!=R[N];)R[N+1]+=R[N]>>>16,R[N]&=65535,N++}function O(R,N){this.g=R,this.h=N}function D(R,N){if(b(N))throw Error("division by zero");if(b(R))return new O(p,p);if(w(R))return N=D(E(R),N),new O(E(N.g),E(N.h));if(w(N))return N=D(R,E(N)),new O(E(N.g),N.h);if(R.g.length>30){if(w(R)||w(N))throw Error("slowDivide_ only works with positive integers.");for(var L=g,U=N;U.l(R)<=0;)L=k(L),U=k(U);var z=B(L,1),H=B(U,1);for(U=B(U,2),L=B(L,2);!b(U);){var j=H.add(U);j.l(R)<=0&&(z=z.add(L),H=j),U=B(U,1),L=B(L,1)}return N=S(R,z.j(N)),new O(z,N)}for(z=p;R.l(N)>=0;){for(L=Math.max(1,Math.floor(R.m()/N.m())),U=Math.ceil(Math.log(L)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),H=f(L),j=H.j(N);w(j)||j.l(R)>0;)L-=U,H=f(L),j=H.j(N);b(H)&&(H=g),z=z.add(H),R=S(R,j)}return new O(z,R)}t.B=function(R){return D(this,R).h},t.and=function(R){const N=Math.max(this.g.length,R.g.length),L=[];for(let U=0;U<N;U++)L[U]=this.i(U)&R.i(U);return new o(L,this.h&R.h)},t.or=function(R){const N=Math.max(this.g.length,R.g.length),L=[];for(let U=0;U<N;U++)L[U]=this.i(U)|R.i(U);return new o(L,this.h|R.h)},t.xor=function(R){const N=Math.max(this.g.length,R.g.length),L=[];for(let U=0;U<N;U++)L[U]=this.i(U)^R.i(U);return new o(L,this.h^R.h)};function k(R){const N=R.g.length+1,L=[];for(let U=0;U<N;U++)L[U]=R.i(U)<<1|R.i(U-1)>>>31;return new o(L,R.h)}function B(R,N){const L=N>>5;N%=32;const U=R.g.length-L,z=[];for(let H=0;H<U;H++)z[H]=N>0?R.i(H+L)>>>N|R.i(H+L+1)<<32-N:R.i(H+L);return new o(z,R.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,RD=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,Tl=o}).apply(typeof kI<"u"?kI:typeof self<"u"?self:typeof window<"u"?window:{});var Mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PD,Mh,DD,p1,T_,ND,MD,kD;(function(){var t,e=Object.defineProperty;function r(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mg=="object"&&Mg];for(var T=0;T<x.length;++T){var M=x[T];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var n=r(this);function i(x,T){if(T)e:{var M=n;x=x.split(".");for(var V=0;V<x.length-1;V++){var Y=x[V];if(!(Y in M))break e;M=M[Y]}x=x[x.length-1],V=M[x],T=T(V),T!=V&&T!=null&&e(M,x,{configurable:!0,writable:!0,value:T})}}i("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(x){return x||function(T){var M=[],V;for(V in T)Object.prototype.hasOwnProperty.call(T,V)&&M.push([V,T[V]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(x){var T=typeof x;return T=="object"&&x!=null||T=="function"}function c(x,T,M){return x.call.apply(x.bind,arguments)}function f(x,T,M){return f=c,f.apply(null,arguments)}function d(x,T){var M=Array.prototype.slice.call(arguments,1);return function(){var V=M.slice();return V.push.apply(V,arguments),x.apply(this,V)}}function p(x,T){function M(){}M.prototype=T.prototype,x.Z=T.prototype,x.prototype=new M,x.prototype.constructor=x,x.Ob=function(V,Y,ie){for(var ve=Array(arguments.length-2),We=2;We<arguments.length;We++)ve[We-2]=arguments[We];return T.prototype[Y].apply(V,ve)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function m(x){const T=x.length;if(T>0){const M=Array(T);for(let V=0;V<T;V++)M[V]=x[V];return M}return[]}function b(x,T){for(let V=1;V<arguments.length;V++){const Y=arguments[V];var M=typeof Y;if(M=M!="object"?M:Y?Array.isArray(Y)?"array":M:"null",M=="array"||M=="object"&&typeof Y.length=="number"){M=x.length||0;const ie=Y.length||0;x.length=M+ie;for(let ve=0;ve<ie;ve++)x[M+ve]=Y[ve]}else x.push(Y)}}class w{constructor(T,M){this.i=T,this.j=M,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function E(x){o.setTimeout(()=>{throw x},0)}function S(){var x=R;let T=null;return x.g&&(T=x.g,x.g=x.g.next,x.g||(x.h=null),T.next=null),T}class I{constructor(){this.h=this.g=null}add(T,M){const V=O.get();V.set(T,M),this.h?this.h.next=V:this.g=V,this.h=V}}var O=new w(()=>new D,x=>x.reset());class D{constructor(){this.next=this.g=this.h=null}set(T,M){this.h=T,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let k,B=!1,R=new I,N=()=>{const x=Promise.resolve(void 0);k=()=>{x.then(L)}};function L(){for(var x;x=S();){try{x.h.call(x.g)}catch(M){E(M)}var T=O;T.j(x),T.h<100&&(T.h++,x.next=T.g,T.g=x)}B=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(x,T){this.type=x,this.g=this.target=T,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var x=!1,T=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const M=()=>{};o.addEventListener("test",M,T),o.removeEventListener("test",M,T)}catch{}return x})();function j(x){return/^[\s\xa0]*$/.test(x)}function ue(x,T){z.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,T)}p(ue,z),ue.prototype.init=function(x,T){const M=this.type=x.type,V=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=T,T=x.relatedTarget,T||(M=="mouseover"?T=x.fromElement:M=="mouseout"&&(T=x.toElement)),this.relatedTarget=T,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),X=0;function re(x,T,M,V,Y){this.listener=x,this.proxy=null,this.src=T,this.type=M,this.capture=!!V,this.ha=Y,this.key=++X,this.da=this.fa=!1}function he(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ae(x,T,M){for(const V in x)T.call(M,x[V],V,x)}function ke(x,T){for(const M in x)T.call(void 0,x[M],M,x)}function G(x){const T={};for(const M in x)T[M]=x[M];return T}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(x,T){let M,V;for(let Y=1;Y<arguments.length;Y++){V=arguments[Y];for(M in V)x[M]=V[M];for(let ie=0;ie<ee.length;ie++)M=ee[ie],Object.prototype.hasOwnProperty.call(V,M)&&(x[M]=V[M])}}function we(x){this.src=x,this.g={},this.h=0}we.prototype.add=function(x,T,M,V,Y){const ie=x.toString();x=this.g[ie],x||(x=this.g[ie]=[],this.h++);const ve=Ge(x,T,V,Y);return ve>-1?(T=x[ve],M||(T.fa=!1)):(T=new re(T,this.src,ie,!!V,Y),T.fa=M,x.push(T)),T};function Pe(x,T){const M=T.type;if(M in x.g){var V=x.g[M],Y=Array.prototype.indexOf.call(V,T,void 0),ie;(ie=Y>=0)&&Array.prototype.splice.call(V,Y,1),ie&&(he(T),x.g[M].length==0&&(delete x.g[M],x.h--))}}function Ge(x,T,M,V){for(let Y=0;Y<x.length;++Y){const ie=x[Y];if(!ie.da&&ie.listener==T&&ie.capture==!!M&&ie.ha==V)return Y}return-1}var at="closure_lm_"+(Math.random()*1e6|0),xr={};function ge(x,T,M,V,Y){if(Array.isArray(T)){for(let ie=0;ie<T.length;ie++)ge(x,T[ie],M,V,Y);return null}return M=Os(M),x&&x[ye]?x.J(T,M,l(V)?!!V.capture:!1,Y):He(x,T,M,!1,V,Y)}function He(x,T,M,V,Y,ie){if(!T)throw Error("Invalid event type");const ve=l(Y)?!!Y.capture:!!Y;let We=_r(x);if(We||(x[at]=We=new we(x)),M=We.add(T,M,V,ve,ie),M.proxy)return M;if(V=Qe(),M.proxy=V,V.src=x,V.listener=M,x.addEventListener)H||(Y=ve),Y===void 0&&(Y=!1),x.addEventListener(T.toString(),V,Y);else if(x.attachEvent)x.attachEvent(tt(T.toString()),V);else if(x.addListener&&x.removeListener)x.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Qe(){function x(M){return T.call(x.src,x.listener,M)}const T=Hr;return x}function pe(x,T,M,V,Y){if(Array.isArray(T))for(var ie=0;ie<T.length;ie++)pe(x,T[ie],M,V,Y);else V=l(V)?!!V.capture:!!V,M=Os(M),x&&x[ye]?(x=x.i,ie=String(T).toString(),ie in x.g&&(T=x.g[ie],M=Ge(T,M,V,Y),M>-1&&(he(T[M]),Array.prototype.splice.call(T,M,1),T.length==0&&(delete x.g[ie],x.h--)))):x&&(x=_r(x))&&(T=x.g[T.toString()],x=-1,T&&(x=Ge(T,M,V,Y)),(M=x>-1?T[x]:null)&&br(M))}function br(x){if(typeof x!="number"&&x&&!x.da){var T=x.src;if(T&&T[ye])Pe(T.i,x);else{var M=x.type,V=x.proxy;T.removeEventListener?T.removeEventListener(M,V,x.capture):T.detachEvent?T.detachEvent(tt(M),V):T.addListener&&T.removeListener&&T.removeListener(V),(M=_r(T))?(Pe(M,x),M.h==0&&(M.src=null,T[at]=null)):he(x)}}}function tt(x){return x in xr?xr[x]:xr[x]="on"+x}function Hr(x,T){if(x.da)x=!0;else{T=new ue(T,this);const M=x.listener,V=x.ha||x.src;x.fa&&br(x),x=M.call(V,T)}return x}function _r(x){return x=x[at],x instanceof we?x:null}var bi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Os(x){return typeof x=="function"?x:(x[bi]||(x[bi]=function(T){return x.handleEvent(T)}),x[bi])}function Or(){U.call(this),this.i=new we(this),this.M=this,this.G=null}p(Or,U),Or.prototype[ye]=!0,Or.prototype.removeEventListener=function(x,T,M,V){pe(this,x,T,M,V)};function $r(x,T){var M,V=x.G;if(V)for(M=[];V;V=V.G)M.push(V);if(x=x.M,V=T.type||T,typeof T=="string")T=new z(T,x);else if(T instanceof z)T.target=T.target||x;else{var Y=T;T=new z(V,x),xe(T,Y)}Y=!0;let ie,ve;if(M)for(ve=M.length-1;ve>=0;ve--)ie=T.g=M[ve],Y=Rs(ie,V,!0,T)&&Y;if(ie=T.g=x,Y=Rs(ie,V,!0,T)&&Y,Y=Rs(ie,V,!1,T)&&Y,M)for(ve=0;ve<M.length;ve++)ie=T.g=M[ve],Y=Rs(ie,V,!1,T)&&Y}Or.prototype.N=function(){if(Or.Z.N.call(this),this.i){var x=this.i;for(const T in x.g){const M=x.g[T];for(let V=0;V<M.length;V++)he(M[V]);delete x.g[T],x.h--}}this.G=null},Or.prototype.J=function(x,T,M,V){return this.i.add(String(x),T,!1,M,V)},Or.prototype.K=function(x,T,M,V){return this.i.add(String(x),T,!0,M,V)};function Rs(x,T,M,V){if(T=x.i.g[String(T)],!T)return!0;T=T.concat();let Y=!0;for(let ie=0;ie<T.length;++ie){const ve=T[ie];if(ve&&!ve.da&&ve.capture==M){const We=ve.listener,Er=ve.ha||ve.src;ve.fa&&Pe(x.i,ve),Y=We.call(Er,V)!==!1&&Y}}return Y&&!V.defaultPrevented}function hy(x,T){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:o.setTimeout(x,T||0)}function a0(x){x.g=hy(()=>{x.g=null,x.i&&(x.i=!1,a0(x))},x.l);const T=x.h;x.h=null,x.m.apply(null,T)}class Wn extends U{constructor(T,M){super(),this.m=T,this.l=M,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:a0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nc(x){U.call(this),this.h=x,this.g={}}p(nc,U);var gd=[];function vd(x){Ae(x.g,function(T,M){this.g.hasOwnProperty(M)&&br(T)},x),x.g={}}nc.prototype.N=function(){nc.Z.N.call(this),vd(this)},nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ps=o.JSON.stringify,py=o.JSON.parse,o0=class{stringify(x){return o.JSON.stringify(x,void 0)}parse(x){return o.JSON.parse(x,void 0)}};function s0(){}function l0(){}var xa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vn(){z.call(this,"d")}p(vn,z);function Hi(){z.call(this,"c")}p(Hi,z);var wr={},c0=null;function _u(){return c0=c0||new Or}wr.Ia="serverreachability";function u0(x){z.call(this,wr.Ia,x)}p(u0,z);function Ha(x){const T=_u();$r(T,new u0(T))}wr.STAT_EVENT="statevent";function ic(x,T){z.call(this,wr.STAT_EVENT,x),this.stat=T}p(ic,z);function Rr(x){const T=_u();$r(T,new ic(T,x))}wr.Ja="timingevent";function $a(x,T){z.call(this,wr.Ja,x),this.size=T}p($a,z);function qa(x,T){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){x()},T)}function ba(){this.g=!0}ba.prototype.ua=function(){this.g=!1};function gy(x,T,M,V,Y,ie){x.info(function(){if(x.g)if(ie){var ve="",We=ie.split("&");for(let _t=0;_t<We.length;_t++){var Er=We[_t].split("=");if(Er.length>1){const nr=Er[0];Er=Er[1];const Wi=nr.split("_");ve=Wi.length>=2&&Wi[1]=="type"?ve+(nr+"="+Er+"&"):ve+(nr+"=redacted&")}}}else ve=null;else ve=ie;return"XMLHTTP REQ ("+V+") [attempt "+Y+"]: "+T+`
`+M+`
`+ve})}function f0(x,T,M,V,Y,ie,ve){x.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Y+"]: "+T+`
`+M+`
`+ie+" "+ve})}function Ga(x,T,M,V){x.info(function(){return"XMLHTTP TEXT ("+T+"): "+vy(x,M)+(V?" "+V:"")})}function ac(x,T){x.info(function(){return"TIMEOUT: "+T})}ba.prototype.info=function(){};function vy(x,T){if(!x.g)return T;if(!T)return null;try{const ie=JSON.parse(T);if(ie){for(x=0;x<ie.length;x++)if(Array.isArray(ie[x])){var M=ie[x];if(!(M.length<2)){var V=M[1];if(Array.isArray(V)&&!(V.length<1)){var Y=V[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ve=1;ve<V.length;ve++)V[ve]=""}}}}return Ps(ie)}catch{return T}}var oc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},md={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yd;function sc(){}p(sc,s0),sc.prototype.g=function(){return new XMLHttpRequest},yd=new sc;function No(x){return encodeURIComponent(String(x))}function d0(x){var T=1;x=x.split(":");const M=[];for(;T>0&&x.length;)M.push(x.shift()),T--;return x.length&&M.push(x.join(":")),M}function _a(x,T,M,V){this.j=x,this.i=T,this.l=M,this.S=V||1,this.V=new nc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wa}function wa(){this.i=null,this.g="",this.h=!1}var Pr={},nn={};function Wa(x,T,M){x.M=1,x.A=lc(Nr(T)),x.u=M,x.R=!0,wu(x,null)}function wu(x,T){x.F=Date.now(),Ka(x),x.B=Nr(x.A);var M=x.B,V=x.S;Array.isArray(V)||(V=[String(V)]),Cu(M.i,"t",V),x.C=0,M=x.j.L,x.h=new wa,x.g=T0(x.j,M?T:null,!x.u),x.P>0&&(x.O=new Wn(f(x.Y,x,x.g),x.P)),T=x.V,M=x.g,V=x.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(gd[0]=Y.toString()),Y=gd);for(let ie=0;ie<Y.length;ie++){const ve=ge(M,Y[ie],V||T.handleEvent,!1,T.h||T);if(!ve)break;T.g[ve.key]=ve}T=x.J?G(x.J):{},x.u?(x.v||(x.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,T)):(x.v="GET",x.g.ea(x.B,x.v,null,T)),Ha(),gy(x.i,x.v,x.B,x.l,x.S,x.u)}_a.prototype.ba=function(x){x=x.target;const T=this.O;T&&Sa(x)==3?T.j():this.Y(x)},_a.prototype.Y=function(x){try{if(x==this.g)e:{const We=Sa(this.g),Er=this.g.ya(),_t=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||mn(this.g)))){this.K||We!=4||Er==7||(Er==8||_t<=0?Ha(3):Ha(2)),Xa(this);var T=this.g.ca();this.X=T;var M=my(this);if(this.o=T==200,f0(this.i,this.v,this.B,this.l,this.S,We,T),this.o){if(this.U&&!this.L){t:{if(this.g){var V,Y=this.g;if((V=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(V)){var ie=V;break t}}ie=null}if(x=ie)Ga(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ya(this,x);else{this.o=!1,this.m=3,Rr(12),_i(this),$i(this);break e}}if(this.R){x=!0;let nr;for(;!this.K&&this.C<M.length;)if(nr=p0(this,M),nr==nn){We==4&&(this.m=4,Rr(14),x=!1),Ga(this.i,this.l,null,"[Incomplete Response]");break}else if(nr==Pr){this.m=4,Rr(15),Ga(this.i,this.l,M,"[Invalid Chunk]"),x=!1;break}else Ga(this.i,this.l,nr,null),Ya(this,nr);if(h0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||M.length!=0||this.h.h||(this.m=1,Rr(16),x=!1),this.o=this.o&&x,!x)Ga(this.i,this.l,M,"[Invalid Chunked Response]"),_i(this),$i(this);else if(M.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),Nd(ve),ve.P=!0,Rr(11))}}else Ga(this.i,this.l,M,null),Ya(this,M);We==4&&_i(this),this.o&&!this.K&&(We==4?E0(this.j,this):(this.o=!1,Ka(this)))}else ko(this.g),T==400&&M.indexOf("Unknown SID")>0?(this.m=3,Rr(12)):(this.m=0,Rr(13)),_i(this),$i(this)}}}catch{}finally{}};function my(x){if(!h0(x))return x.g.la();const T=mn(x.g);if(T==="")return"";let M="";const V=T.length,Y=Sa(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return _i(x),$i(x),"";x.h.i=new o.TextDecoder}for(let ie=0;ie<V;ie++)x.h.h=!0,M+=x.h.i.decode(T[ie],{stream:!(Y&&ie==V-1)});return T.length=0,x.h.g+=M,x.C=0,x.h.g}function h0(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function p0(x,T){var M=x.C,V=T.indexOf(`
`,M);return V==-1?nn:(M=Number(T.substring(M,V)),isNaN(M)?Pr:(V+=1,V+M>T.length?nn:(T=T.slice(V,V+M),x.C=V+M,T)))}_a.prototype.cancel=function(){this.K=!0,_i(this)};function Ka(x){x.T=Date.now()+x.H,Eu(x,x.H)}function Eu(x,T){if(x.D!=null)throw Error("WatchDog timer not null");x.D=qa(f(x.aa,x),T)}function Xa(x){x.D&&(o.clearTimeout(x.D),x.D=null)}_a.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(ac(this.i,this.B),this.M!=2&&(Ha(),Rr(17)),_i(this),this.m=2,$i(this)):Eu(this,this.T-x)};function $i(x){x.j.I==0||x.K||E0(x.j,x)}function _i(x){Xa(x);var T=x.O;T&&typeof T.dispose=="function"&&T.dispose(),x.O=null,vd(x.V),x.g&&(T=x.g,x.g=null,T.abort(),T.dispose())}function Ya(x,T){try{var M=x.j;if(M.I!=0&&(M.g==x||Za(M.h,x))){if(!x.L&&Za(M.h,x)&&M.I==3){try{var V=M.Ba.g.parse(T)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Y=V;if(Y[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<x.F)Pu(M),Us(M);else break e;gc(M),Rr(18)}}else M.xa=Y[1],0<M.xa-M.K&&Y[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=qa(f(M.Va,M),6e3));Qa(M.h)<=1&&M.ta&&(M.ta=void 0)}else io(M,11)}else if((x.L||M.g==x)&&Pu(M),!j(T))for(Y=M.Ba.g.parse(T),T=0;T<Y.length;T++){let _t=Y[T];const nr=_t[0];if(!(nr<=M.K))if(M.K=nr,_t=_t[1],M.I==2)if(_t[0]=="c"){M.M=_t[1],M.ba=_t[2];const Wi=_t[3];Wi!=null&&(M.ka=Wi,M.j.info("VER="+M.ka));const ao=_t[4];ao!=null&&(M.za=ao,M.j.info("SVER="+M.za));const Ca=_t[5];Ca!=null&&typeof Ca=="number"&&Ca>0&&(V=1.5*Ca,M.O=V,M.j.info("backChannelRequestTimeoutMs_="+V)),V=M;const Ta=x.g;if(Ta){const vc=Ta.g?Ta.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vc){var ie=V.h;ie.g||vc.indexOf("spdy")==-1&&vc.indexOf("quic")==-1&&vc.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(_d(ie,ie.h),ie.h=null))}if(V.G){const Du=Ta.g?Ta.g.getResponseHeader("X-HTTP-Session-Id"):null;Du&&(V.wa=Du,Rt(V.J,V.G,Du))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-x.F,M.j.info("Handshake RTT: "+M.T+"ms")),V=M;var ve=x;if(V.na=C0(V,V.L?V.ba:null,V.W),ve.L){wd(V.h,ve);var We=ve,Er=V.O;Er&&(We.H=Er),We.D&&(Xa(We),Ka(We)),V.g=ve}else _0(V);M.i.length>0&&no(M)}else _t[0]!="stop"&&_t[0]!="close"||io(M,7);else M.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?io(M,7):Pd(M):_t[0]!="noop"&&M.l&&M.l.qa(_t),M.A=0)}}Ha(4)}catch{}}var Dr=class{constructor(x,T){this.g=x,this.map=T}};function xd(x){this.l=x||10,o.PerformanceNavigationTiming?(x=o.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bd(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Qa(x){return x.h?1:x.g?x.g.size:0}function Za(x,T){return x.h?x.h==T:x.g?x.g.has(T):!1}function _d(x,T){x.g?x.g.add(T):x.h=T}function wd(x,T){x.h&&x.h==T?x.h=null:x.g&&x.g.has(T)&&x.g.delete(T)}xd.prototype.cancel=function(){if(this.i=Ed(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Ed(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let T=x.i;for(const M of x.g.values())T=T.concat(M.G);return T}return m(x.i)}var g0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Au(x,T){if(x){x=x.split("&");for(let M=0;M<x.length;M++){const V=x[M].indexOf("=");let Y,ie=null;V>=0?(Y=x[M].substring(0,V),ie=x[M].substring(V+1)):Y=x[M],T(Y,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function wi(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;x instanceof wi?(this.l=x.l,an(this,x.j),this.o=x.o,this.g=x.g,Ds(this,x.u),this.h=x.h,Ad(this,x0(x.i)),this.m=x.m):x&&(T=String(x).match(g0))?(this.l=!1,an(this,T[1]||"",!0),this.o=Ja(T[2]||""),this.g=Ja(T[3]||"",!0),Ds(this,T[4]),this.h=Ja(T[5]||"",!0),Ad(this,T[6]||"",!0),this.m=Ja(T[7]||"")):(this.l=!1,this.i=new Ms(null,this.l))}wi.prototype.toString=function(){const x=[];var T=this.j;T&&x.push(cc(T,Su,!0),":");var M=this.g;return(M||T=="file")&&(x.push("//"),(T=this.o)&&x.push(cc(T,Su,!0),"@"),x.push(No(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&x.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&x.push("/"),x.push(cc(M,M.charAt(0)=="/"?Sd:v0,!0))),(M=this.i.toString())&&x.push("?",M),(M=this.m)&&x.push("#",cc(M,m0)),x.join("")},wi.prototype.resolve=function(x){const T=Nr(this);let M=!!x.j;M?an(T,x.j):M=!!x.o,M?T.o=x.o:M=!!x.g,M?T.g=x.g:M=x.u!=null;var V=x.h;if(M)Ds(T,x.u);else if(M=!!x.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var Y=T.h.lastIndexOf("/");Y!=-1&&(V=T.h.slice(0,Y+1)+V)}if(Y=V,Y==".."||Y==".")V="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){V=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const ie=[];for(let ve=0;ve<Y.length;){const We=Y[ve++];We=="."?V&&ve==Y.length&&ie.push(""):We==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),V&&ve==Y.length&&ie.push("")):(ie.push(We),V=!0)}V=ie.join("/")}else V=Y}return M?T.h=V:M=x.i.toString()!=="",M?Ad(T,x0(x.i)):M=!!x.m,M&&(T.m=x.m),T};function Nr(x){return new wi(x)}function an(x,T,M){x.j=M?Ja(T,!0):T,x.j&&(x.j=x.j.replace(/:$/,""))}function Ds(x,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);x.u=T}else x.u=null}function Ad(x,T,M){T instanceof Ms?(x.i=T,Tu(x.i,x.l)):(M||(T=cc(T,Ns)),x.i=new Ms(T,x.l))}function Rt(x,T,M){x.i.set(T,M)}function lc(x){return Rt(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function Ja(x,T){return x?T?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function cc(x,T,M){return typeof x=="string"?(x=encodeURI(x).replace(T,ii),M&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function ii(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Su=/[#\/\?@]/g,v0=/[#\?:]/g,Sd=/[#\?]/g,Ns=/[#\?@]/g,m0=/#/g;function Ms(x,T){this.h=this.g=null,this.i=x||null,this.j=!!T}function ai(x){x.g||(x.g=new Map,x.h=0,x.i&&Au(x.i,function(T,M){x.add(decodeURIComponent(T.replace(/\+/g," ")),M)}))}t=Ms.prototype,t.add=function(x,T){ai(this),this.i=null,x=ks(this,x);let M=this.g.get(x);return M||this.g.set(x,M=[]),M.push(T),this.h+=1,this};function y0(x,T){ai(x),T=ks(x,T),x.g.has(T)&&(x.i=null,x.h-=x.g.get(T).length,x.g.delete(T))}function Cd(x,T){return ai(x),T=ks(x,T),x.g.has(T)}t.forEach=function(x,T){ai(this),this.g.forEach(function(M,V){M.forEach(function(Y){x.call(T,Y,V,this)},this)},this)};function Td(x,T){ai(x);let M=[];if(typeof T=="string")Cd(x,T)&&(M=M.concat(x.g.get(ks(x,T))));else for(x=Array.from(x.g.values()),T=0;T<x.length;T++)M=M.concat(x[T]);return M}t.set=function(x,T){return ai(this),this.i=null,x=ks(this,x),Cd(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[T]),this.h+=1,this},t.get=function(x,T){return x?(x=Td(this,x),x.length>0?String(x[0]):T):T};function Cu(x,T,M){y0(x,T),M.length>0&&(x.i=null,x.g.set(ks(x,T),m(M)),x.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],T=Array.from(this.g.keys());for(let V=0;V<T.length;V++){var M=T[V];const Y=No(M);M=Td(this,M);for(let ie=0;ie<M.length;ie++){let ve=Y;M[ie]!==""&&(ve+="="+No(M[ie])),x.push(ve)}}return this.i=x.join("&")};function x0(x){const T=new Ms;return T.i=x.i,x.g&&(T.g=new Map(x.g),T.h=x.h),T}function ks(x,T){return T=String(T),x.j&&(T=T.toLowerCase()),T}function Tu(x,T){T&&!x.j&&(ai(x),x.i=null,x.g.forEach(function(M,V){const Y=V.toLowerCase();V!=Y&&(y0(this,V),Cu(this,Y,M))},x)),x.j=T}function Ea(x,T){const M=new ba;if(o.Image){const V=new Image;V.onload=d(qi,M,"TestLoadImage: loaded",!0,T,V),V.onerror=d(qi,M,"TestLoadImage: error",!1,T,V),V.onabort=d(qi,M,"TestLoadImage: abort",!1,T,V),V.ontimeout=d(qi,M,"TestLoadImage: timeout",!1,T,V),o.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=x}else T(!1)}function Id(x,T){const M=new ba,V=new AbortController,Y=setTimeout(()=>{V.abort(),qi(M,"TestPingServer: timeout",!1,T)},1e4);fetch(x,{signal:V.signal}).then(ie=>{clearTimeout(Y),ie.ok?qi(M,"TestPingServer: ok",!0,T):qi(M,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Y),qi(M,"TestPingServer: error",!1,T)})}function qi(x,T,M,V,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),V(M)}catch{}}function js(){this.g=new o0}function eo(x){this.i=x.Sb||null,this.h=x.ab||!1}p(eo,s0),eo.prototype.g=function(){return new uc(this.i,this.h)};function uc(x,T){Or.call(this),this.H=x,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(uc,Or),t=uc.prototype,t.open=function(x,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=T,this.readyState=1,Aa(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(T.body=x),(this.H||o).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},t.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Iu(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Iu(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}t.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var T=x.value?x.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!x.done}))&&(this.response=this.responseText+=T)}x.done?Ls(this):Aa(this),this.readyState==3&&Iu(this)}},t.Oa=function(x){this.g&&(this.response=this.responseText=x,Ls(this))},t.Na=function(x){this.g&&(this.response=x,Ls(this))},t.ga=function(){this.g&&Ls(this)};function Ls(x){x.readyState=4,x.l=null,x.j=null,x.B=null,Aa(x)}t.setRequestHeader=function(x,T){this.A.append(x,T)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],T=this.h.entries();for(var M=T.next();!M.done;)M=M.value,x.push(M[0]+": "+M[1]),M=T.next();return x.join(`\r
`)};function Aa(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Gi(x){let T="";return Ae(x,function(M,V){T+=V,T+=":",T+=M,T+=`\r
`}),T}function fc(x,T,M){e:{for(V in M){var V=!1;break e}V=!0}V||(M=Gi(M),typeof x=="string"?M!=null&&No(M):Rt(x,T,M))}function Bt(x){Or.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Bt,Or);var to=/^https?$/i,Od=["POST","PUT"];t=Bt.prototype,t.Fa=function(x){this.H=x},t.ea=function(x,T,M,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);T=T?T.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yd.g(),this.g.onreadystatechange=g(f(this.Ca,this));try{this.B=!0,this.g.open(T,String(x),!0),this.B=!1}catch(ie){dc(this,ie);return}if(x=M||"",M=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Y in V)M.set(Y,V[Y]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ie of V.keys())M.set(ie,V.get(ie));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(M.keys()).find(ie=>ie.toLowerCase()=="content-type"),Y=o.FormData&&x instanceof o.FormData,!(Array.prototype.indexOf.call(Od,T,void 0)>=0)||V||Y||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,ve]of M)this.g.setRequestHeader(ie,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(ie){dc(this,ie)}};function dc(x,T){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=T,x.o=5,Rd(x),Mo(x)}function Rd(x){x.A||(x.A=!0,$r(x,"complete"),$r(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,$r(this,"complete"),$r(this,"abort"),Mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mo(this,!0)),Bt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?hc(this):this.Xa())},t.Xa=function(){hc(this)};function hc(x){if(x.h&&typeof a<"u"){if(x.v&&Sa(x)==4)setTimeout(x.Ca.bind(x),0);else if($r(x,"readystatechange"),Sa(x)==4){x.h=!1;try{const ie=x.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var M;if(!(M=T)){var V;if(V=ie===0){let ve=String(x.D).match(g0)[1]||null;!ve&&o.self&&o.self.location&&(ve=o.self.location.protocol.slice(0,-1)),V=!to.test(ve?ve.toLowerCase():"")}M=V}if(M)$r(x,"complete"),$r(x,"success");else{x.o=6;try{var Y=Sa(x)>2?x.g.statusText:""}catch{Y=""}x.l=Y+" ["+x.ca()+"]",Rd(x)}}finally{Mo(x)}}}}function Mo(x,T){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const M=x.g;x.g=null,T||$r(x,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Sa(x){return x.g?x.g.readyState:0}t.ca=function(){try{return Sa(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(x){if(this.g){var T=this.g.responseText;return x&&T.indexOf(x)==0&&(T=T.substring(x.length)),py(T)}};function mn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function ko(x){const T={};x=(x.g&&Sa(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<x.length;V++){if(j(x[V]))continue;var M=d0(x[V]);const Y=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const ie=T[Y]||[];T[Y]=ie,ie.push(M)}ke(T,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ro(x,T,M){return M&&M.internalChannelParams&&M.internalChannelParams[x]||T}function Bs(x){this.za=0,this.i=[],this.j=new ba,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ro("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ro("baseRetryDelayMs",5e3,x),this.Za=ro("retryDelaySeedMs",1e4,x),this.Ta=ro("forwardChannelMaxRetries",2,x),this.va=ro("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new xd(x&&x.concurrentRequestLimit),this.Ba=new js,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Bs.prototype,t.ka=8,t.I=1,t.connect=function(x,T,M,V){Rr(0),this.W=x,this.H=T||{},M&&V!==void 0&&(this.H.OSID=M,this.H.OAID=V),this.F=this.X,this.J=C0(this,null,this.W),no(this)};function Pd(x){if(Ou(x),x.I==3){var T=x.V++,M=Nr(x.J);if(Rt(M,"SID",x.M),Rt(M,"RID",T),Rt(M,"TYPE","terminate"),pc(x,M),T=new _a(x,x.j,T),T.M=2,T.A=lc(Nr(M)),M=!1,o.navigator&&o.navigator.sendBeacon)try{M=o.navigator.sendBeacon(T.A.toString(),"")}catch{}!M&&o.Image&&(new Image().src=T.A,M=!0),M||(T.g=T0(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Ka(T)}S0(x)}function Us(x){x.g&&(Nd(x),x.g.cancel(),x.g=null)}function Ou(x){Us(x),x.v&&(o.clearTimeout(x.v),x.v=null),Pu(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&o.clearTimeout(x.m),x.m=null)}function no(x){if(!bd(x.h)&&!x.m){x.m=!0;var T=x.Ea;k||N(),B||(k(),B=!0),R.add(T,x),x.D=0}}function Ru(x,T){return Qa(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=T.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=qa(f(x.Ea,x,T),A0(x,x.D)),x.D++,!0)}t.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const Y=new _a(this,this.j,x);let ie=this.o;if(this.U&&(ie?(ie=G(ie),xe(ie,this.U)):ie=this.U),this.u!==null||this.R||(Y.J=ie,ie=null),this.S)e:{for(var T=0,M=0;M<this.i.length;M++){t:{var V=this.i[M];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(T+=V,T>4096){T=M;break e}if(T===4096||M===this.i.length-1){T=M+1;break e}}T=1e3}else T=1e3;T=b0(this,Y,T),M=Nr(this.J),Rt(M,"RID",x),Rt(M,"CVER",22),this.G&&Rt(M,"X-HTTP-Session-Id",this.G),pc(this,M),ie&&(this.R?T="headers="+No(Gi(ie))+"&"+T:this.u&&fc(M,this.u,ie)),_d(this.h,Y),this.Ra&&Rt(M,"TYPE","init"),this.S?(Rt(M,"$req",T),Rt(M,"SID","null"),Y.U=!0,Wa(Y,M,null)):Wa(Y,M,T),this.I=2}}else this.I==3&&(x?Dd(this,x):this.i.length==0||bd(this.h)||Dd(this))};function Dd(x,T){var M;T?M=T.l:M=x.V++;const V=Nr(x.J);Rt(V,"SID",x.M),Rt(V,"RID",M),Rt(V,"AID",x.K),pc(x,V),x.u&&x.o&&fc(V,x.u,x.o),M=new _a(x,x.j,M,x.D+1),x.u===null&&(M.J=x.o),T&&(x.i=T.G.concat(x.i)),T=b0(x,M,1e3),M.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),_d(x.h,M),Wa(M,V,T)}function pc(x,T){x.H&&Ae(x.H,function(M,V){Rt(T,V,M)}),x.l&&Ae({},function(M,V){Rt(T,V,M)})}function b0(x,T,M){M=Math.min(x.i.length,M);const V=x.l?f(x.l.Ka,x.l,x):null;e:{var Y=x.i;let We=-1;for(;;){const Er=["count="+M];We==-1?M>0?(We=Y[0].g,Er.push("ofs="+We)):We=0:Er.push("ofs="+We);let _t=!0;for(let nr=0;nr<M;nr++){var ie=Y[nr].g;const Wi=Y[nr].map;if(ie-=We,ie<0)We=Math.max(0,Y[nr].g-100),_t=!1;else try{ie="req"+ie+"_"||"";try{var ve=Wi instanceof Map?Wi:Object.entries(Wi);for(const[ao,Ca]of ve){let Ta=Ca;l(Ca)&&(Ta=Ps(Ca)),Er.push(ie+ao+"="+encodeURIComponent(Ta))}}catch(ao){throw Er.push(ie+"type="+encodeURIComponent("_badmap")),ao}}catch{V&&V(Wi)}}if(_t){ve=Er.join("&");break e}}ve=void 0}return x=x.i.splice(0,M),T.G=x,ve}function _0(x){if(!x.g&&!x.v){x.Y=1;var T=x.Da;k||N(),B||(k(),B=!0),R.add(T,x),x.A=0}}function gc(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=qa(f(x.Da,x),A0(x,x.A)),x.A++,!0)}t.Da=function(){if(this.v=null,w0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=qa(f(this.Wa,this),x)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rr(10),Us(this),w0(this))};function Nd(x){x.B!=null&&(o.clearTimeout(x.B),x.B=null)}function w0(x){x.g=new _a(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var T=Nr(x.na);Rt(T,"RID","rpc"),Rt(T,"SID",x.M),Rt(T,"AID",x.K),Rt(T,"CI",x.F?"0":"1"),!x.F&&x.ia&&Rt(T,"TO",x.ia),Rt(T,"TYPE","xmlhttp"),pc(x,T),x.u&&x.o&&fc(T,x.u,x.o),x.O&&(x.g.H=x.O);var M=x.g;x=x.ba,M.M=1,M.A=lc(Nr(T)),M.u=null,M.R=!0,wu(M,x)}t.Va=function(){this.C!=null&&(this.C=null,Us(this),gc(this),Rr(19))};function Pu(x){x.C!=null&&(o.clearTimeout(x.C),x.C=null)}function E0(x,T){var M=null;if(x.g==T){Pu(x),Nd(x),x.g=null;var V=2}else if(Za(x.h,T))M=T.G,wd(x.h,T),V=1;else return;if(x.I!=0){if(T.o)if(V==1){M=T.u?T.u.length:0,T=Date.now()-T.F;var Y=x.D;V=_u(),$r(V,new $a(V,M)),no(x)}else _0(x);else if(Y=T.m,Y==3||Y==0&&T.X>0||!(V==1&&Ru(x,T)||V==2&&gc(x)))switch(M&&M.length>0&&(T=x.h,T.i=T.i.concat(M)),Y){case 1:io(x,5);break;case 4:io(x,10);break;case 3:io(x,6);break;default:io(x,2)}}}function A0(x,T){let M=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(M*=2),M*T}function io(x,T){if(x.j.info("Error code "+T),T==2){var M=f(x.bb,x),V=x.Ua;const Y=!V;V=new wi(V||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||an(V,"https"),lc(V),Y?Ea(V.toString(),M):Id(V.toString(),M)}else Rr(2);x.I=0,x.l&&x.l.pa(T),S0(x),Ou(x)}t.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Rr(2)):(this.j.info("Failed to ping google.com"),Rr(1))};function S0(x){if(x.I=0,x.ja=[],x.l){const T=Ed(x.h);(T.length!=0||x.i.length!=0)&&(b(x.ja,T),b(x.ja,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.oa()}}function C0(x,T,M){var V=M instanceof wi?Nr(M):new wi(M);if(V.g!="")T&&(V.g=T+"."+V.g),Ds(V,V.u);else{var Y=o.location;V=Y.protocol,T=T?T+"."+Y.hostname:Y.hostname,Y=+Y.port;const ie=new wi(null);V&&an(ie,V),T&&(ie.g=T),Y&&Ds(ie,Y),M&&(ie.h=M),V=ie}return M=x.G,T=x.wa,M&&T&&Rt(V,M,T),Rt(V,"VER",x.ka),pc(x,V),V}function T0(x,T,M){if(T&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=x.Aa&&!x.ma?new Bt(new eo({ab:M})):new Bt(x.ma),T.Fa(x.L),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function I0(){}t=I0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fs(){}Fs.prototype.g=function(x,T){return new Kn(x,T)};function Kn(x,T){Or.call(this),this.g=new Bs(T),this.l=x,this.h=T&&T.messageUrlParams||null,x=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(x?x["X-WebChannel-Content-Type"]=T.messageContentType:x={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(x?x["X-WebChannel-Client-Profile"]=T.sa:x={"X-WebChannel-Client-Profile":T.sa}),this.g.U=x,(x=T&&T.Qb)&&!j(x)&&(this.g.u=x),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!j(T)&&(this.g.G=T,x=this.h,x!==null&&T in x&&(x=this.h,T in x&&delete x[T])),this.j=new jo(this)}p(Kn,Or),Kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Pd(this.g)},Kn.prototype.o=function(x){var T=this.g;if(typeof x=="string"){var M={};M.__data__=x,x=M}else this.v&&(M={},M.__data__=Ps(x),x=M);T.i.push(new Dr(T.Ya++,x)),T.I==3&&no(T)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Pd(this.g),delete this.g,Kn.Z.N.call(this)};function O0(x){vn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var T=x.__sm__;if(T){e:{for(const M in T){x=M;break e}x=void 0}(this.i=x)&&(x=this.i,T=T!==null&&x in T?T[x]:void 0),this.data=T}else this.data=x}p(O0,vn);function R0(){Hi.call(this),this.status=1}p(R0,Hi);function jo(x){this.g=x}p(jo,I0),jo.prototype.ra=function(){$r(this.g,"a")},jo.prototype.qa=function(x){$r(this.g,new O0(x))},jo.prototype.pa=function(x){$r(this.g,new R0)},jo.prototype.oa=function(){$r(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,kD=function(){return new Fs},MD=function(){return _u()},ND=wr,T_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oc.NO_ERROR=0,oc.TIMEOUT=8,oc.HTTP_ERROR=6,p1=oc,md.COMPLETE="complete",DD=md,l0.EventType=xa,xa.OPEN="a",xa.CLOSE="b",xa.ERROR="c",xa.MESSAGE="d",Or.prototype.listen=Or.prototype.J,Mh=l0,Bt.prototype.listenOnce=Bt.prototype.K,Bt.prototype.getLastError=Bt.prototype.Ha,Bt.prototype.getLastErrorCode=Bt.prototype.ya,Bt.prototype.getStatus=Bt.prototype.ca,Bt.prototype.getResponseJson=Bt.prototype.La,Bt.prototype.getResponseText=Bt.prototype.la,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Fa,PD=Bt}).apply(typeof Mg<"u"?Mg:typeof self<"u"?self:typeof window<"u"?window:{});const jI="@firebase/firestore",LI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new uE("@firebase/firestore");function df(){return ru.logLevel}function Se(t,...e){if(ru.logLevel<=lt.DEBUG){const r=e.map(dE);ru.debug(`Firestore (${Xf}): ${t}`,...r)}}function ds(t,...e){if(ru.logLevel<=lt.ERROR){const r=e.map(dE);ru.error(`Firestore (${Xf}): ${t}`,...r)}}function If(t,...e){if(ru.logLevel<=lt.WARN){const r=e.map(dE);ru.warn(`Firestore (${Xf}): ${t}`,...r)}}function dE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,jD(t,n,r)}function jD(t,e,r){let n=`FIRESTORE (${Xf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw ds(n),new Error(n)}function Ot(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||jD(e,i,n)}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends za{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Fn.UNAUTHENTICATED)))}shutdown(){}}class LV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class BV{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ot(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new as;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new as,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new as)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ot(typeof n.accessToken=="string",31837,{l:n}),new LD(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class UV{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class FV{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new UV(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable((()=>r(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class BI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zV{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ti(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Ot(this.o===void 0,3512);const n=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new BI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Ot(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new BI(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=VV(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function ct(t,e){return t<e?-1:t>e?1:0}function I_(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return A2(i)===A2(a)?ct(i,a):A2(i)?1:-1}return ct(t.length,e.length)}const HV=55296,$V=57343;function A2(t){const e=t.charCodeAt(0);return e>=HV&&e<=$V}function Of(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="__name__";class uo{constructor(e,r,n){r===void 0?r=0:r>e.length&&Fe(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Fe(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return uo.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof uo?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=uo.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return ct(e.length,r.length)}static compareSegments(e,r){const n=uo.isNumericId(e),i=uo.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?uo.extractNumericId(e).compare(uo.extractNumericId(r)):I_(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tl.fromString(e.substring(4,e.length-2))}}class Kt extends uo{construct(e,r,n){return new Kt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new _e(ce.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new Kt(r)}static emptyPath(){return new Kt([])}}const qV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends uo{construct(e,r,n){return new In(e,r,n)}static isValidIdentifier(e){return qV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UI}static keyField(){return new In([UI])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new _e(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new _e(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(a(),i++)}if(a(),o)throw new _e(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(r)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Kt.fromString(e))}static fromName(e){return new Me(Kt.fromString(e).popFirst(5))}static empty(){return new Me(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Kt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t,e,r){if(!r)throw new _e(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GV(t,e,r,n){if(e===!0&&n===!0)throw new _e(ce.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function FI(t){if(!Me.isDocumentKey(t))throw new _e(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zI(t){if(Me.isDocumentKey(t))throw new _e(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function UD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function mi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=nm(t);throw new _e(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function WV(t,e){if(e<=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e){const r={typeString:t};return e&&(r.value=e),r}function Cp(t,e){if(!UD(t))throw new _e(ce.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(i&&typeof o!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new _e(ce.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=-62135596800,HI=1e6;class rr{static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*HI);return new rr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<VI)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HI}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cp(e,rr._jsonSchema))return new rr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-VI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rr._jsonSchemaVersion="firestore/timestamp/1.0",rr._jsonSchema={type:Fr("string",rr._jsonSchemaVersion),seconds:Fr("number"),nanoseconds:Fr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new rr(0,0))}static max(){return new Ve(new rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=-1;function KV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(n===1e9?new rr(r+1,0):new rr(r,n));return new Ml(i,Me.empty(),e)}function XV(t){return new Ml(t.readTime,t.key,tp)}class Ml{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Ml(Ve.min(),Me.empty(),tp)}static max(){return new Ml(Ve.max(),Me.empty(),tp)}}function YV(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Me.comparator(t.documentKey,e.documentKey),r!==0?r:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yf(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==QV)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new de(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof de?r:de.resolve(r)}catch(r){return de.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):de.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):de.reject(r)}static resolve(e){return new de(((r,n)=>{r(e)}))}static reject(e){return new de(((r,n)=>{n(e)}))}static waitFor(e){return new de(((r,n)=>{let i=0,a=0,o=!1;e.forEach((l=>{++i,l.next((()=>{++a,o&&a===i&&r()}),(c=>n(c)))})),o=!0,a===i&&r()}))}static or(e){let r=de.resolve(!1);for(const n of e)r=r.next((i=>i?de.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,a)=>{n.push(r.call(this,i,a))})),this.waitFor(n)}static mapArray(e,r){return new de(((n,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const f=c;r(e[f]).next((d=>{o[f]=d,++l,l===a&&n(o)}),(d=>i(d)))}}))}static doWhile(e,r){return new de(((n,i)=>{const a=()=>{e()===!0?r().next((()=>{a()}),i):n()};a()}))}}function JV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Qf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}im.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=-1;function am(t){return t==null}function j1(t){return t===0&&1/t==-1/0}function eH(t){return typeof t=="number"&&Number.isInteger(t)&&!j1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="";function tH(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=$I(e)),e=rH(t.get(r),e);return $I(e)}function rH(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case FD:r+="";break;default:r+=a}}return r}function $I(t){return t+FD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Wl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function zD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,r){this.comparator=e,this.root=r||Cn.EMPTY}insert(e,r){return new ur(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kg(this.root,e,this.comparator,!1)}getReverseIterator(){return new kg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kg(this.root,e,this.comparator,!0)}}class kg{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??Cn.RED,this.left=i??Cn.EMPTY,this.right=a??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new Cn(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Cn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new Cn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new GI(this.data.getIterator())}getIteratorFrom(e){return new GI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Jr(this.comparator);return r.data=e,r}}class GI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new ki([])}unionWith(e){let r=new Jr(In.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ki(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Of(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new VD("Invalid base64 string: "+a):a}})(e);return new Pn(r)}static fromUint8Array(e){const r=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new Pn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const nH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kl(t){if(Ot(!!t,39018),typeof t=="string"){let e=0;const r=nH.exec(t);if(Ot(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Tr(t.seconds),nanos:Tr(t.nanos)}}function Tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function jl(t){return typeof t=="string"?Pn.fromBase64String(t):Pn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="server_timestamp",$D="__type__",qD="__previous_value__",GD="__local_write_time__";function gE(t){return(t?.mapValue?.fields||{})[$D]?.stringValue===HD}function om(t){const e=t.mapValue.fields[qD];return gE(e)?om(e):e}function rp(t){const e=kl(t.mapValue.fields[GD].timestampValue);return new rr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e,r,n,i,a,o,l,c,f,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const L1="(default)";class np{constructor(e,r){this.projectId=e,this.database=r||L1}static empty(){return new np("","")}get isDefaultDatabase(){return this.database===L1}isEqual(e){return e instanceof np&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="__type__",aH="__max__",jg={mapValue:{}},KD="__vector__",B1="value";function Ll(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gE(t)?4:sH(t)?9007199254740991:oH(t)?10:11:Fe(28295,{value:t})}function wo(t,e){if(t===e)return!0;const r=Ll(t);if(r!==Ll(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rp(t).isEqual(rp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=kl(i.timestampValue),l=kl(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return jl(i.bytesValue).isEqual(jl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Tr(i.geoPointValue.latitude)===Tr(a.geoPointValue.latitude)&&Tr(i.geoPointValue.longitude)===Tr(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Tr(i.integerValue)===Tr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Tr(i.doubleValue),l=Tr(a.doubleValue);return o===l?j1(o)===j1(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return Of(t.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(qI(o)!==qI(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!wo(o[c],l[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function ip(t,e){return(t.values||[]).find((r=>wo(r,e)))!==void 0}function Rf(t,e){if(t===e)return 0;const r=Ll(t),n=Ll(e);if(r!==n)return ct(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const l=Tr(a.integerValue||a.doubleValue),c=Tr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return WI(t.timestampValue,e.timestampValue);case 4:return WI(rp(t),rp(e));case 5:return I_(t.stringValue,e.stringValue);case 6:return(function(a,o){const l=jl(a),c=jl(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const l=a.split("/"),c=o.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ct(l[f],c[f]);if(d!==0)return d}return ct(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const l=ct(Tr(a.latitude),Tr(o.latitude));return l!==0?l:ct(Tr(a.longitude),Tr(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return KI(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const l=a.fields||{},c=o.fields||{},f=l[B1]?.arrayValue,d=c[B1]?.arrayValue,p=ct(f?.values?.length||0,d?.values?.length||0);return p!==0?p:KI(f,d)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===jg.mapValue&&o===jg.mapValue)return 0;if(a===jg.mapValue)return 1;if(o===jg.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),f=o.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=I_(c[p],d[p]);if(g!==0)return g;const m=Rf(l[c[p]],f[d[p]]);if(m!==0)return m}return ct(c.length,d.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:r})}}function WI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const r=kl(t),n=kl(e),i=ct(r.seconds,n.seconds);return i!==0?i:ct(r.nanos,n.nanos)}function KI(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Rf(r[i],n[i]);if(a)return a}return ct(r.length,n.length)}function Pf(t){return O_(t)}function O_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=kl(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return jl(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return Me.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=O_(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${O_(r.fields[o])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function g1(t){switch(Ll(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=om(t);return e?16+g1(e):16;case 5:return 2*t.stringValue.length;case 6:return jl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,a)=>i+g1(a)),0)})(t.arrayValue);case 10:case 11:return(function(n){let i=0;return Wl(n.fields,((a,o)=>{i+=a.length+g1(o)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function XI(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function R_(t){return!!t&&"integerValue"in t}function vE(t){return!!t&&"arrayValue"in t}function YI(t){return!!t&&"nullValue"in t}function QI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function v1(t){return!!t&&"mapValue"in t}function oH(t){return(t?.mapValue?.fields||{})[WD]?.stringValue===KD}function qh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wl(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=qh(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=qh(t.arrayValue.values[r]);return e}return{...t}}function sH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!v1(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=qh(r)}setAll(e){let r=In.emptyPath(),n={},i=[];e.forEach(((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=l.popLast()}o?n[l.lastSegment()]=qh(o):i.push(l.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());v1(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return wo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];v1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Wl(r,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new pi(qh(this.value))}}function XD(t){const e=[];return Wl(t.fields,((r,n)=>{const i=new In([r]);if(v1(n)){const a=XD(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new ki(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,r,n,i,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new zn(e,0,Ve.min(),Ve.min(),Ve.min(),pi.empty(),0)}static newFoundDocument(e,r,n,i){return new zn(e,1,r,Ve.min(),n,i,0)}static newNoDocument(e,r){return new zn(e,2,r,Ve.min(),Ve.min(),pi.empty(),0)}static newUnknownDocument(e,r){return new zn(e,3,r,Ve.min(),Ve.min(),pi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,r){this.position=e,this.inclusive=r}}function ZI(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=Me.comparator(Me.fromName(o.referenceValue),r.key):n=Rf(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function JI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!wo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,r="asc"){this.field=e,this.dir=r}}function lH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{}class Ur extends YD{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new uH(e,r,n):r==="array-contains"?new hH(e,n):r==="in"?new pH(e,n):r==="not-in"?new gH(e,n):r==="array-contains-any"?new vH(e,n):new Ur(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new fH(e,n):new dH(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Rf(r,this.value)):r!==null&&Ll(this.value)===Ll(r)&&this.matchesComparison(Rf(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ua extends YD{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Ua(e,r)}matches(e){return QD(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QD(t){return t.op==="and"}function ZD(t){return cH(t)&&QD(t)}function cH(t){for(const e of t.filters)if(e instanceof Ua)return!1;return!0}function P_(t){if(t instanceof Ur)return t.field.canonicalString()+t.op.toString()+Pf(t.value);if(ZD(t))return t.filters.map((e=>P_(e))).join(",");{const e=t.filters.map((r=>P_(r))).join(",");return`${t.op}(${e})`}}function JD(t,e){return t instanceof Ur?(function(n,i){return i instanceof Ur&&n.op===i.op&&n.field.isEqual(i.field)&&wo(n.value,i.value)})(t,e):t instanceof Ua?(function(n,i){return i instanceof Ua&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,o,l)=>a&&JD(o,i.filters[l])),!0):!1})(t,e):void Fe(19439)}function eN(t){return t instanceof Ur?(function(r){return`${r.field.canonicalString()} ${r.op} ${Pf(r.value)}`})(t):t instanceof Ua?(function(r){return r.op.toString()+" {"+r.getFilters().map(eN).join(" ,")+"}"})(t):"Filter"}class uH extends Ur{constructor(e,r,n){super(e,r,n),this.key=Me.fromName(n.referenceValue)}matches(e){const r=Me.comparator(e.key,this.key);return this.matchesComparison(r)}}class fH extends Ur{constructor(e,r){super(e,"in",r),this.keys=tN("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class dH extends Ur{constructor(e,r){super(e,"not-in",r),this.keys=tN("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function tN(t,e){return(e.arrayValue?.values||[]).map((r=>Me.fromName(r.referenceValue)))}class hH extends Ur{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return vE(r)&&ip(r.arrayValue,this.value)}}class pH extends Ur{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ip(this.value.arrayValue,r)}}class gH extends Ur{constructor(e,r){super(e,"not-in",r)}matches(e){if(ip(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!ip(this.value.arrayValue,r)}}class vH extends Ur{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!vE(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>ip(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,r=null,n=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function eO(t,e=null,r=[],n=[],i=null,a=null,o=null){return new mH(t,e,r,n,i,a,o)}function mE(t){const e=qe(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>P_(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),am(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Pf(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Pf(n))).join(",")),e.Te=r}return e.Te}function yE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!lH(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!JD(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JI(t.startAt,e.startAt)&&JI(t.endAt,e.endAt)}function D_(t){return Me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,r=null,n=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yH(t,e,r,n,i,a,o,l){return new Zf(t,e,r,n,i,a,o,l)}function sm(t){return new Zf(t)}function tO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rN(t){return t.collectionGroup!==null}function Gh(t){const e=qe(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Jr(In.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new ap(a,n))})),r.has(In.keyField().canonicalString())||e.Ie.push(new ap(In.keyField(),n))}return e.Ie}function vo(t){const e=qe(t);return e.Ee||(e.Ee=xH(e,Gh(t))),e.Ee}function xH(t,e){if(t.limitType==="F")return eO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new ap(i.field,a)}));const r=t.endAt?new U1(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new U1(t.startAt.position,t.startAt.inclusive):null;return eO(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function N_(t,e){const r=t.filters.concat([e]);return new Zf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function F1(t,e,r){return new Zf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function lm(t,e){return yE(vo(t),vo(e))&&t.limitType===e.limitType}function nN(t){return`${mE(vo(t))}|lt:${t.limitType}`}function hf(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>eN(i))).join(", ")}]`),am(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>Pf(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>Pf(i))).join(",")),`Target(${n})`})(vo(t))}; limitType=${t.limitType})`}function cm(t,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Me.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,i){for(const a of Gh(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(o,l,c){const f=ZI(o,l,c);return o.inclusive?f<=0:f<0})(n.startAt,Gh(n),i)||n.endAt&&!(function(o,l,c){const f=ZI(o,l,c);return o.inclusive?f>=0:f>0})(n.endAt,Gh(n),i))})(t,e)}function bH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iN(t){return(e,r)=>{let n=!1;for(const i of Gh(t)){const a=_H(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function _H(t,e,r){const n=t.field.isKeyField()?Me.comparator(e.key,r.key):(function(a,o,l){const c=o.data.field(a),f=l.data.field(a);return c!==null&&f!==null?Rf(c,f):Fe(42886)})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,((r,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return zD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=new ur(Me.comparator);function hs(){return wH}const aN=new ur(Me.comparator);function kh(...t){let e=aN;for(const r of t)e=e.insert(r.key,r);return e}function oN(t){let e=aN;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function Fc(){return Wh()}function sN(){return Wh()}function Wh(){return new gu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const EH=new ur(Me.comparator),AH=new Jr(Me.comparator);function ut(...t){let e=AH;for(const r of t)e=e.add(r);return e}const SH=new Jr(ct);function CH(){return SH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:j1(e)?"-0":e}}function lN(t){return{integerValue:""+t}}function cN(t,e){return eH(e)?lN(e):xE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this._=void 0}}function TH(t,e,r){return t instanceof op?(function(i,a){const o={fields:{[$D]:{stringValue:HD},[GD]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&gE(a)&&(a=om(a)),a&&(o.fields[qD]=a),{mapValue:o}})(r,e):t instanceof sp?fN(t,e):t instanceof lp?dN(t,e):(function(i,a){const o=uN(i,a),l=rO(o)+rO(i.Ae);return R_(o)&&R_(i.Ae)?lN(l):xE(i.serializer,l)})(t,e)}function IH(t,e,r){return t instanceof sp?fN(t,e):t instanceof lp?dN(t,e):r}function uN(t,e){return t instanceof cp?(function(n){return R_(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class op extends um{}class sp extends um{constructor(e){super(),this.elements=e}}function fN(t,e){const r=hN(e);for(const n of t.elements)r.some((i=>wo(i,n)))||r.push(n);return{arrayValue:{values:r}}}class lp extends um{constructor(e){super(),this.elements=e}}function dN(t,e){let r=hN(e);for(const n of t.elements)r=r.filter((i=>!wo(i,n)));return{arrayValue:{values:r}}}class cp extends um{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function rO(t){return Tr(t.integerValue||t.doubleValue)}function hN(t){return vE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,r){this.field=e,this.transform=r}}function OH(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof sp&&i instanceof sp||n instanceof lp&&i instanceof lp?Of(n.elements,i.elements,wo):n instanceof cp&&i instanceof cp?wo(n.Ae,i.Ae):n instanceof op&&i instanceof op})(t.transform,e.transform)}class RH{constructor(e,r){this.version=e,this.transformResults=r}}class da{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new da}static exists(e){return new da(void 0,e)}static updateTime(e){return new da(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function m1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fm{}function gN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bE(t.key,da.none()):new Tp(t.key,t.data,da.none());{const r=t.data,n=pi.empty();let i=new Jr(In.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new Kl(t.key,n,new ki(i.toArray()),da.none())}}function PH(t,e,r){t instanceof Tp?(function(i,a,o){const l=i.value.clone(),c=iO(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,r):t instanceof Kl?(function(i,a,o){if(!m1(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=iO(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(vN(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Kh(t,e,r,n){return t instanceof Tp?(function(a,o,l,c){if(!m1(a.precondition,o))return l;const f=a.value.clone(),d=aO(a.fieldTransforms,c,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(t,e,r,n):t instanceof Kl?(function(a,o,l,c){if(!m1(a.precondition,o))return l;const f=aO(a.fieldTransforms,c,o),d=o.data;return d.setAll(vN(a)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(a,o,l){return m1(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,r)}function DH(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=uN(n.transform,i||null);a!=null&&(r===null&&(r=pi.empty()),r.set(n.field,a))}return r||null}function nO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Of(n,i,((a,o)=>OH(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tp extends fm{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kl extends fm{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vN(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function iO(t,e,r){const n=new Map;Ot(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);n.set(a.field,IH(o,l,r[i]))}return n}function aO(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,TH(a,o,e))}return n}class bE extends fm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NH extends fm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&PH(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Kh(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Kh(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=sN();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(i.key)?null:l;const c=gN(o,l);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ve.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),ut())}isEqual(e){return this.batchId===e.batchId&&Of(this.mutations,e.mutations,((r,n)=>nO(r,n)))&&Of(this.baseMutations,e.baseMutations,((r,n)=>nO(r,n)))}}class _E{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Ot(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return EH})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new _E(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Br,dt;function LH(t){switch(t){case ce.OK:return Fe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function mN(t){if(t===void 0)return ds("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Br.OK:return ce.OK;case Br.CANCELLED:return ce.CANCELLED;case Br.UNKNOWN:return ce.UNKNOWN;case Br.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Br.INTERNAL:return ce.INTERNAL;case Br.UNAVAILABLE:return ce.UNAVAILABLE;case Br.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Br.NOT_FOUND:return ce.NOT_FOUND;case Br.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Br.ABORTED:return ce.ABORTED;case Br.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Br.DATA_LOSS:return ce.DATA_LOSS;default:return Fe(39323,{code:t})}}(dt=Br||(Br={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH=new Tl([4294967295,4294967295],0);function oO(t){const e=BH().encode(t),r=new RD;return r.update(e),new Uint8Array(r.digest())}function sO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Tl([r,n],0),new Tl([i,a],0)]}class wE{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new jh(`Invalid padding: ${r}`);if(n<0)throw new jh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new jh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new jh(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Tl.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(Tl.fromNumber(n)));return i.compare(UH)===1&&(i=new Tl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=oO(e),[n,i]=sO(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);if(!this.we(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new wE(a,i,r);return n.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const r=oO(e),[n,i]=sO(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class jh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Ip.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new dm(Ve.min(),i,new ur(ct),hs(),ut())}}class Ip{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Ip(n,r,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class yN{constructor(e,r){this.targetId=e,this.Ce=r}}class xN{constructor(e,r,n=Pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class lO{constructor(){this.ve=0,this.Fe=cO(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),r=ut(),n=ut();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Fe(38017,{changeType:a})}})),new Ip(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=cO()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FH{constructor(e){this.Ge=e,this.ze=new Map,this.je=hs(),this.Je=Lg(),this.He=Lg(),this.Ye=new ur(ct)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,(r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach(((n,i)=>{this.rt(i)&&r(i)}))}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(D_(a))if(n===0){const o=new Me(a.path);this.et(r,o,zn.newNoDocument(o,Ve.min()))}else Ot(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,f)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,l;try{o=jl(n).toUint8Array()}catch(c){if(c instanceof VD)return If("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new wE(o,i,a)}catch(c){return If(c instanceof jh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach((a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(r,a,null),i++)})),i}Tt(e){const r=new Map;this.ze.forEach(((a,o)=>{const l=this.ot(o);if(l){if(a.current&&D_(l.target)){const c=new Me(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,zn.newNoDocument(c,e))}a.Be&&(r.set(o,a.ke()),a.qe())}}));let n=ut();this.He.forEach(((a,o)=>{let l=!0;o.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(n=n.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new dm(e,r,this.Ye,this.je,n);return this.je=hs(),this.Je=Lg(),this.He=Lg(),this.Ye=new ur(ct),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new lO,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Jr(ct),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Jr(ct),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Se("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lO),this.Ge.getRemoteKeysForTarget(e).forEach((r=>{this.et(e,r,null)}))}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Lg(){return new ur(Me.comparator)}function cO(){return new ur(Me.comparator)}const zH={asc:"ASCENDING",desc:"DESCENDING"},VH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HH={and:"AND",or:"OR"};class $H{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function M_(t,e){return t.useProto3Json||am(e)?e:{value:e}}function z1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qH(t,e){return z1(t,e.toTimestamp())}function mo(t){return Ot(!!t,49232),Ve.fromTimestamp((function(r){const n=kl(r);return new rr(n.seconds,n.nanos)})(t))}function EE(t,e){return k_(t,e).canonicalString()}function k_(t,e){const r=(function(i){return new Kt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function _N(t){const e=Kt.fromString(t);return Ot(CN(e),10190,{key:e.toString()}),e}function j_(t,e){return EE(t.databaseId,e.path)}function S2(t,e){const r=_N(e);if(r.get(1)!==t.databaseId.projectId)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Me(EN(r))}function wN(t,e){return EE(t.databaseId,e)}function GH(t){const e=_N(t);return e.length===4?Kt.emptyPath():EN(e)}function L_(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EN(t){return Ot(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uO(t,e,r){return{name:j_(t,e),fields:r.value.mapValue.fields}}function WH(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Fe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,d){return f.useProto3Json?(Ot(d===void 0||typeof d=="string",58123),Pn.fromBase64String(d||"")):(Ot(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Pn.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(f){const d=f.code===void 0?ce.UNKNOWN:mN(f.code);return new _e(d,f.message||"")})(o);r=new xN(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=S2(t,n.document.name),a=mo(n.document.updateTime),o=n.document.createTime?mo(n.document.createTime):Ve.min(),l=new pi({mapValue:{fields:n.document.fields}}),c=zn.newFoundDocument(i,a,o,l),f=n.targetIds||[],d=n.removedTargetIds||[];r=new y1(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=S2(t,n.document),a=n.readTime?mo(n.readTime):Ve.min(),o=zn.newNoDocument(i,a),l=n.removedTargetIds||[];r=new y1([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=S2(t,n.document),a=n.removedTargetIds||[];r=new y1([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new jH(i,a),l=n.targetId;r=new yN(l,o)}}return r}function KH(t,e){let r;if(e instanceof Tp)r={update:uO(t,e.key,e.value)};else if(e instanceof bE)r={delete:j_(t,e.key)};else if(e instanceof Kl)r={update:uO(t,e.key,e.data),updateMask:n$(e.fieldMask)};else{if(!(e instanceof NH))return Fe(16599,{Vt:e.type});r={verify:j_(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,o){const l=o.transform;if(l instanceof op)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof sp)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof lp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cp)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Fe(20930,{transform:o.transform})})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:qH(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),r}function XH(t,e){return t&&t.length>0?(Ot(e!==void 0,14353),t.map((r=>(function(i,a){let o=i.updateTime?mo(i.updateTime):mo(a);return o.isEqual(Ve.min())&&(o=mo(a)),new RH(o,i.transformResults||[])})(r,e)))):[]}function YH(t,e){return{documents:[wN(t,e.path)]}}function QH(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=wN(t,i);const a=(function(f){if(f.length!==0)return SN(Ua.create(f,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const o=(function(f){if(f.length!==0)return f.map((d=>(function(g){return{field:pf(g.field),direction:e$(g.dir)}})(d)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=M_(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:r,parent:i}}function ZH(t){let e=GH(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Ot(n===1,65062);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=(function(p){const g=AN(p);return g instanceof Ua&&ZD(g)?g.getFilters():[g]})(r.where));let o=[];r.orderBy&&(o=(function(p){return p.map((g=>(function(b){return new ap(gf(b.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(r.orderBy));let l=null;r.limit&&(l=(function(p){let g;return g=typeof p=="object"?p.value:p,am(g)?null:g})(r.limit));let c=null;r.startAt&&(c=(function(p){const g=!!p.before,m=p.values||[];return new U1(m,g)})(r.startAt));let f=null;return r.endAt&&(f=(function(p){const g=!p.before,m=p.values||[];return new U1(m,g)})(r.endAt)),yH(e,i,o,a,l,"F",c,f)}function JH(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function AN(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=gf(r.unaryFilter.field);return Ur.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=gf(r.unaryFilter.field);return Ur.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=gf(r.unaryFilter.field);return Ur.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gf(r.unaryFilter.field);return Ur.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(r){return Ur.create(gf(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Ua.create(r.compositeFilter.filters.map((n=>AN(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(r.compositeFilter.op))})(t):Fe(30097,{filter:t})}function e$(t){return zH[t]}function t$(t){return VH[t]}function r$(t){return HH[t]}function pf(t){return{fieldPath:t.canonicalString()}}function gf(t){return In.fromServerFormat(t.fieldPath)}function SN(t){return t instanceof Ur?(function(r){if(r.op==="=="){if(QI(r.value))return{unaryFilter:{field:pf(r.field),op:"IS_NAN"}};if(YI(r.value))return{unaryFilter:{field:pf(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(QI(r.value))return{unaryFilter:{field:pf(r.field),op:"IS_NOT_NAN"}};if(YI(r.value))return{unaryFilter:{field:pf(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pf(r.field),op:t$(r.op),value:r.value}}})(t):t instanceof Ua?(function(r){const n=r.getFilters().map((i=>SN(i)));return n.length===1?n[0]:{compositeFilter:{op:r$(r.op),filters:n}}})(t):Fe(54877,{filter:t})}function n$(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function CN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,r,n,i,a=Ve.min(),o=Ve.min(),l=Pn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new wl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.yt=e}}function a$(t){const e=ZH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?F1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(){this.Cn=new s$}addToCollectionParentIndex(e,r){return this.Cn.add(r),de.resolve()}getCollectionParents(e,r){return de.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return de.resolve()}deleteFieldIndex(e,r){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,r){return de.resolve()}getDocumentsMatchingTarget(e,r){return de.resolve(null)}getIndexType(e,r){return de.resolve(0)}getFieldIndexes(e,r){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,r){return de.resolve(Ml.min())}getMinOffsetFromCollectionGroup(e,r){return de.resolve(Ml.min())}updateCollectionGroup(e,r,n){return de.resolve()}updateIndexEntries(e,r){return de.resolve()}}class s${constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new Jr(Kt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Jr(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TN=41943040;class hi{static withCacheSize(e){return new hi(e,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hi.DEFAULT_COLLECTION_PERCENTILE=10,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hi.DEFAULT=new hi(TN,hi.DEFAULT_COLLECTION_PERCENTILE,hi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hi.DISABLED=new hi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Df(0)}static cr(){return new Df(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="LruGarbageCollector",l$=1048576;function hO([t,e],[r,n]){const i=ct(t,r);return i===0?ct(e,n):i}class c${constructor(e){this.Ir=e,this.buffer=new Jr(hO),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();hO(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class u${constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(dO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Qf(r)?Se(dO,"Ignoring IndexedDB error during garbage collection: ",r):await Yf(r)}await this.Vr(3e5)}))}}class f${constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return de.resolve(im.ce);const n=new c$(r);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(fO)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fO):this.yr(e,r)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,o,l,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,l=Date.now(),this.removeTargets(e,n,r)))).next((p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(f=Date.now(),df()<=lt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function d$(t,e){return new f$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(){this.changes=new gu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?de.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&Kh(n.mutation,i,ki.empty(),rr.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,ut()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=ut()){const i=Fc();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((a=>{let o=kh();return a.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=Fc();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,ut())))}populateOverlays(e,r,n){const i=[];return n.forEach((a=>{r.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,l)=>{r.set(o,l)}))}))}computeViews(e,r,n,i){let a=hs();const o=Wh(),l=(function(){return Wh()})();return r.forEach(((c,f)=>{const d=n.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Kl)?a=a.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),Kh(d.mutation,f,d.mutation.getFieldMask(),rr.now())):o.set(f.key,ki.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((f,d)=>o.set(f,d))),r.forEach(((f,d)=>l.set(f,new p$(d,o.get(f)??null)))),l)))}recalculateAndSaveOverlays(e,r){const n=Wh();let i=new ur(((o,l)=>o-l)),a=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const l of o)l.keys().forEach((c=>{const f=r.get(c);if(f===null)return;let d=n.get(c)||ki.empty();d=l.applyToLocalView(f,d),n.set(c,d);const p=(i.get(l.batchId)||ut()).add(c);i=i.insert(l.batchId,p)}))})).next((()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,p=sN();d.forEach((g=>{if(!a.has(g)){const m=gN(r.get(g),n.get(g));m!==null&&p.set(g,m),a=a.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return de.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(o){return Me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):rN(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):de.resolve(Fc());let l=tp,c=a;return o.next((f=>de.forEach(f,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),a.get(d)?de.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,c,f,ut()))).next((d=>({batchId:l,changes:oN(d)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Me(r)).next((n=>{let i=kh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=kh();return this.indexManager.getCollectionParents(e,a).next((l=>de.forEach(l,(c=>{const f=(function(p,g){return new Zf(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,n,i).next((d=>{d.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i)))).next((o=>{a.forEach(((c,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,zn.newInvalidDocument(d)))}));let l=kh();return o.forEach(((c,f)=>{const d=a.get(c);d!==void 0&&Kh(d.mutation,f,ki.empty(),rr.now()),cm(r,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return de.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:mo(i.createTime)}})(r)),de.resolve()}getNamedQuery(e,r){return de.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,(function(i){return{name:i.name,query:a$(i.bundledQuery),readTime:mo(i.readTime)}})(r)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(){this.overlays=new ur(Me.comparator),this.qr=new Map}getOverlay(e,r){return de.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Fc();return de.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,a)=>{this.St(e,r,a)})),de.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),de.resolve()}getOverlaysForCollection(e,r,n){const i=Fc(),a=r.length+1,o=new Me(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!r.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>n&&i.set(c.getKey(),c)}return de.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new ur(((f,d)=>f-d));const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===r&&f.largestBatchId>n){let d=a.get(f.largestBatchId);d===null&&(d=Fc(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Fc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=i)););return de.resolve(l)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new kH(r,n));let a=this.qr.get(r);a===void 0&&(a=ut(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.Qr=new Jr(cn.$r),this.Ur=new Jr(cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new cn(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Gr(new cn(e,r))}zr(e,r){e.forEach((n=>this.removeReference(n,r)))}jr(e){const r=new Me(new Kt([])),n=new cn(r,e),i=new cn(r,e+1),a=[];return this.Ur.forEachInRange([n,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new Me(new Kt([])),n=new cn(r,e),i=new cn(r,e+1);let a=ut();return this.Ur.forEachInRange([n,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const r=new cn(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class cn{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return Me.comparator(e.key,r.key)||ct(e.Yr,r.Yr)}static Kr(e,r){return ct(e.Yr,r.Yr)||Me.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Jr(cn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MH(a,r,n,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new cn(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,r){return de.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?pE:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new cn(r,0),i=new cn(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],(o=>{const l=this.Xr(o.Yr);a.push(l)})),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Jr(ct);return r.forEach((i=>{const a=new cn(i,0),o=new cn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(l=>{n=n.add(l.Yr)}))})),de.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;Me.isDocumentKey(a)||(a=a.child(""));const o=new cn(new Me(a),0);let l=new Jr(ct);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!n.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Yr)),!0)}),o),de.resolve(this.ti(l))}ti(e){const r=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){Ot(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return de.forEach(r.mutations,(i=>{const a=new cn(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,r){const n=new cn(r,0),i=this.Zr.firstAfterOrEqual(n);return de.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.ri=e,this.docs=(function(){return new ur(Me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return de.resolve(n?n.document.mutableCopy():zn.newInvalidDocument(r))}getEntries(e,r){let n=hs();return r.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))})),de.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=hs();const o=r.path,l=new Me(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||YV(XV(d),n)<=0||(i.has(d.key)||cm(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,r,n,i){Fe(9500)}ii(e,r){return de.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new _$(this)}getSize(e){return de.resolve(this.size)}}class _$ extends h${constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),de.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.persistence=e,this.si=new gu((r=>mE(r)),yE),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new AE,this.targetCount=0,this.ai=Df.ur()}forEachTarget(e,r){return this.si.forEach(((n,i)=>r(i))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),de.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Df(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,de.resolve()}updateTargetData(e,r){return this.Pr(r),de.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),de.waitFor(a).next((()=>i))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return de.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),de.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),de.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),de.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return de.resolve(n)}containsKey(e,r){return de.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,r){this.ui={},this.overlays={},this.ci=new im(0),this.li=!1,this.li=!0,this.hi=new y$,this.referenceDelegate=e(this),this.Pi=new w$(this),this.indexManager=new o$,this.remoteDocumentCache=(function(i){return new b$(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new i$(r),this.Ii=new v$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new m$,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new x$(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Se("MemoryPersistence","Starting transaction:",e);const i=new E$(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,r){return de.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,r))))}}class E$ extends ZV{constructor(e){super(),this.currentSequenceNumber=e}}class SE{constructor(e){this.persistence=e,this.Ri=new AE,this.Vi=null}static mi(e){return new SE(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),de.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),de.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),de.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(n=>{const i=Me.fromPath(n);return this.gi(e,i).next((a=>{a||r.removeEntry(i,Ve.min())}))})).next((()=>(this.Vi=null,r.apply(e))))}updateLimboDocument(e,r){return this.gi(e,r).next((n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(e){return 0}gi(e,r){return de.or([()=>de.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class V1{constructor(e,r){this.persistence=e,this.pi=new gu((n=>tH(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=d$(this,r)}static mi(e,r){return new V1(e,r)}Ei(){}di(e){return de.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}wr(e){let r=0;return this.pr(e,(n=>{r++})).next((()=>r))}pr(e,r){return de.forEach(this.pi,((n,i)=>this.br(e,n,i).next((a=>a?de.resolve():r(i)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,r).next((l=>{l||(n++,a.removeEntry(o,Ve.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=g1(e.data.value)),r}br(e,r,n){return de.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return de.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=ut(),i=ut();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new CE(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return yz()?8:JV(qn())>0?6:4})()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,r,i,n).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new A$;return this.Ss(e,r,o).next((l=>{if(a.result=l,this.Vs)return this.bs(e,r,o,l.size)}))})).next((()=>a.result))}bs(e,r,n,i){return n.documentReadCount<this.fs?(df()<=lt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",hf(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(df()<=lt.DEBUG&&Se("QueryEngine","Query:",hf(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(df()<=lt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",hf(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vo(r))):de.resolve())}ys(e,r){if(tO(r))return de.resolve(null);let n=vo(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=F1(r,null,"F"),n=vo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const o=ut(...a);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,n).next((c=>{const f=this.Ds(r,l);return this.Cs(r,f,o,c.readTime)?this.ys(e,F1(r,null,"F")):this.vs(e,f,r,c)}))))})))))}ws(e,r,n,i){return tO(r)||i.isEqual(Ve.min())?de.resolve(null):this.ps.getDocuments(e,n).next((a=>{const o=this.Ds(r,a);return this.Cs(r,o,n,i)?de.resolve(null):(df()<=lt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hf(r)),this.vs(e,o,r,KV(i,tp)).next((l=>l)))}))}Ds(e,r){let n=new Jr(iN(e));return r.forEach(((i,a)=>{cm(e,a)&&(n=n.add(a))})),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return df()<=lt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",hf(r)),this.ps.getDocumentsMatchingQuery(e,r,Ml.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((a=>(r.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="LocalStore",C$=3e8;class T${constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new ur(ct),this.xs=new gu((a=>mE(a)),yE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.Ms)))}}function I$(t,e,r,n){return new T$(t,e,r,n)}async function ON(t,e){const r=qe(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const o=[],l=[];let c=ut();for(const f of i){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next((f=>({Ls:f,removedBatchIds:o,addedBatchIds:l})))}))}))}function O$(t,e){const r=qe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,d){const p=f.batch,g=p.keys();let m=de.resolve();return g.forEach((b=>{m=m.next((()=>d.getEntry(c,b))).next((w=>{const E=f.docVersions.get(b);Ot(E!==null,48541),w.version.compareTo(E)<0&&(p.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),d.addEntry(w)))}))})),m.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(l){let c=ut();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function RN(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Pi.getLastRemoteSnapshotVersion(r)))}function R$(t,e){const r=qe(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const l=[];e.targetChanges.forEach(((d,p)=>{const g=i.get(p);if(!g)return;l.push(r.Pi.removeMatchingKeys(a,d.removedDocuments,p).next((()=>r.Pi.addMatchingKeys(a,d.addedDocuments,p))));let m=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(Pn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),i=i.insert(p,m),(function(w,E,S){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=C$?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,m,d)&&l.push(r.Pi.updateTargetData(a,m))}));let c=hs(),f=ut();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))})),l.push(P$(a,o,e.documentUpdates).next((d=>{c=d.ks,f=d.qs}))),!n.isEqual(Ve.min())){const d=r.Pi.getLastRemoteSnapshotVersion(a).next((p=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));l.push(d)}return de.waitFor(l).next((()=>o.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,c,f))).next((()=>c))})).then((a=>(r.Ms=i,a)))}function P$(t,e,r){let n=ut(),i=ut();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let o=hs();return r.forEach(((l,c)=>{const f=a.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Se(TE,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{ks:o,qs:i}}))}function D$(t,e){const r=qe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=pE),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function N$(t,e){const r=qe(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Pi.getTargetData(n,e).next((a=>a?(i=a,de.resolve(i)):r.Pi.allocateTargetId(n).next((o=>(i=new wl(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n}))}async function B_(t,e,r){const n=qe(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(o=>n.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qf(o))throw o;Se(TE,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function pO(t,e,r){const n=qe(t);let i=Ve.min(),a=ut();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,f,d){const p=qe(c),g=p.xs.get(d);return g!==void 0?de.resolve(p.Ms.get(g)):p.Pi.getTargetData(f,d)})(n,o,vo(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{a=c}))})).next((()=>n.Fs.getDocumentsMatchingQuery(o,e,r?i:Ve.min(),r?a:ut()))).next((l=>(M$(n,bH(e),l),{documents:l,Qs:a})))))}function M$(t,e,r){let n=t.Os.get(e)||Ve.min();r.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.Os.set(e,n)}class gO{constructor(){this.activeTargetIds=CH()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k${constructor(){this.Mo=new gO,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new gO,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="ConnectivityMonitor";class mO{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(vO,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(vO,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bg=null;function U_(){return Bg===null?Bg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bg++,"0x"+Bg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="RestConnection",L$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class B${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===L1?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const o=U_(),l=this.zo(e,r.toUriEncodedString());Se(C2,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:f}=new URL(l),d=Io(f);return this.Jo(e,l,c,n,d).then((p=>(Se(C2,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw If(C2,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",n),p}))}Ho(e,r,n,i,a,o){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xf})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((i,a)=>e[a]=i)),n&&n.headers.forEach(((i,a)=>e[a]=i))}zo(e,r){const n=L$[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection";class F$ extends B${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const o=U_();return new Promise(((l,c)=>{const f=new PD;f.setWithCredentials(!0),f.listenOnce(DD.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case p1.NO_ERROR:const p=f.getResponseJson();Se(Ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case p1.TIMEOUT:Se(Ln,`RPC '${e}' ${o} timed out`),c(new _e(ce.DEADLINE_EXCEEDED,"Request time out"));break;case p1.HTTP_ERROR:const g=f.getStatus();if(Se(Ln,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let m=f.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m?.error;if(b&&b.status&&b.message){const w=(function(S){const I=S.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(I)>=0?I:ce.UNKNOWN})(b.status);c(new _e(w,b.message))}else c(new _e(ce.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new _e(ce.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:o,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Se(Ln,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(i);Se(Ln,`RPC '${e}' ${o} sending request:`,i),f.send(r,"POST",d,n,15)}))}T_(e,r,n){const i=U_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kD(),l=MD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=a.join("");Se(Ln,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);this.I_(p);let g=!1,m=!1;const b=new U$({Yo:E=>{m?Se(Ln,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Se(Ln,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Se(Ln,`RPC '${e}' stream ${i} sending:`,E),p.send(E))},Zo:()=>p.close()}),w=(E,S,I)=>{E.listen(S,(O=>{try{I(O)}catch(D){setTimeout((()=>{throw D}),0)}}))};return w(p,Mh.EventType.OPEN,(()=>{m||(Se(Ln,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),w(p,Mh.EventType.CLOSE,(()=>{m||(m=!0,Se(Ln,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(p))})),w(p,Mh.EventType.ERROR,(E=>{m||(m=!0,If(Ln,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new _e(ce.UNAVAILABLE,"The operation could not be completed")))})),w(p,Mh.EventType.MESSAGE,(E=>{if(!m){const S=E.data[0];Ot(!!S,16349);const I=S,O=I?.error||I[0]?.error;if(O){Se(Ln,`RPC '${e}' stream ${i} received error:`,O);const D=O.status;let k=(function(N){const L=Br[N];if(L!==void 0)return mN(L)})(D),B=O.message;k===void 0&&(k=ce.INTERNAL,B="Unknown error status: "+D+" with message "+O.message),m=!0,b.a_(new _e(k,B)),p.close()}else Se(Ln,`RPC '${e}' stream ${i} received:`,S),b.u_(S)}})),w(l,ND.STAT_EVENT,(E=>{E.stat===T_.PROXY?Se(Ln,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===T_.NOPROXY&&Se(Ln,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((r=>r===e))}}function T2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t){return new $H(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="PersistentStream";class DN{constructor(e,r,n,i,a,o,l,c){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PN(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ce.RESOURCE_EXHAUSTED?(ds(r.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===r&&this.G_(n,i)}),(n=>{e((()=>{const i=new _e(ce.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(yO,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget((()=>this.D_===e?r():(Se(yO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class z$ extends DN{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=WH(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Ve.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?mo(o.readTime):Ve.min()})(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=L_(this.serializer),r.addTarget=(function(a,o){let l;const c=o.target;if(l=D_(c)?{documents:YH(a,c)}:{query:QH(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=bN(a,o.resumeToken);const f=M_(a,o.expectedCount);f!==null&&(l.expectedCount=f)}else if(o.snapshotVersion.compareTo(Ve.min())>0){l.readTime=z1(a,o.snapshotVersion.toTimestamp());const f=M_(a,o.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const n=JH(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=L_(this.serializer),r.removeTarget=e,this.q_(r)}}class V$ extends DN{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=XH(e.writeResults,e.commitTime),n=mo(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=L_(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>KH(this.serializer,n)))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${}class $$ extends H${constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,k_(r,n),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(ce.UNKNOWN,a.toString())}))}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,k_(r,n),i,o,l,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ce.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class q${constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ds(r),this.aa=!1):Se("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="RemoteStore";class G${constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{n.enqueueAndForget((async()=>{vu(this)&&(Se(nu,"Restarting streams for network reachability change."),await(async function(c){const f=qe(c);f.Ea.add(4),await Op(f),f.Ra.set("Unknown"),f.Ea.delete(4),await pm(f)})(this))}))})),this.Ra=new q$(n,i)}}async function pm(t){if(vu(t))for(const e of t.da)await e(!0)}async function Op(t){for(const e of t.da)await e(!1)}function NN(t,e){const r=qe(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),PE(r)?RE(r):Jf(r).O_()&&OE(r,e))}function IE(t,e){const r=qe(t),n=Jf(r);r.Ia.delete(e),n.O_()&&MN(r,e),r.Ia.size===0&&(n.O_()?n.L_():vu(r)&&r.Ra.set("Unknown"))}function OE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Jf(t).Y_(e)}function MN(t,e){t.Va.Ue(e),Jf(t).Z_(e)}function RE(t){t.Va=new FH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Jf(t).start(),t.Ra.ua()}function PE(t){return vu(t)&&!Jf(t).x_()&&t.Ia.size>0}function vu(t){return qe(t).Ea.size===0}function kN(t){t.Va=void 0}async function W$(t){t.Ra.set("Online")}async function K$(t){t.Ia.forEach(((e,r)=>{OE(t,e)}))}async function X$(t,e){kN(t),PE(t)?(t.Ra.ha(e),RE(t)):t.Ra.set("Unknown")}async function Y$(t,e,r){if(t.Ra.set("Online"),e instanceof xN&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))})(t,e)}catch(n){Se(nu,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await H1(t,n)}else if(e instanceof y1?t.Va.Ze(e):e instanceof yN?t.Va.st(e):t.Va.tt(e),!r.isEqual(Ve.min()))try{const n=await RN(t.localStore);r.compareTo(n)>=0&&await(function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(f);d&&a.Ia.set(f,d.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,f)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(Pn.EMPTY_BYTE_STRING,d.snapshotVersion)),MN(a,c);const p=new wl(d.target,c,f,d.sequenceNumber);OE(a,p)})),a.remoteSyncer.applyRemoteEvent(l)})(t,r)}catch(n){Se(nu,"Failed to raise snapshot:",n),await H1(t,n)}}async function H1(t,e,r){if(!Qf(e))throw e;t.Ea.add(1),await Op(t),t.Ra.set("Offline"),r||(r=()=>RN(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(nu,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await pm(t)}))}function jN(t,e){return e().catch((r=>H1(t,r,e)))}async function gm(t){const e=qe(t),r=Bl(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pE;for(;Q$(e);)try{const i=await D$(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,Z$(e,i)}catch(i){await H1(e,i)}LN(e)&&BN(e)}function Q$(t){return vu(t)&&t.Ta.length<10}function Z$(t,e){t.Ta.push(e);const r=Bl(t);r.O_()&&r.X_&&r.ea(e.mutations)}function LN(t){return vu(t)&&!Bl(t).x_()&&t.Ta.length>0}function BN(t){Bl(t).start()}async function J$(t){Bl(t).ra()}async function eq(t){const e=Bl(t);for(const r of t.Ta)e.ea(r.mutations)}async function tq(t,e,r){const n=t.Ta.shift(),i=_E.from(n,e,r);await jN(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await gm(t)}async function rq(t,e){e&&Bl(t).X_&&await(async function(n,i){if((function(o){return LH(o)&&o!==ce.ABORTED})(i.code)){const a=n.Ta.shift();Bl(n).B_(),await jN(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await gm(n)}})(t,e),LN(t)&&BN(t)}async function xO(t,e){const r=qe(t);r.asyncQueue.verifyOperationInProgress(),Se(nu,"RemoteStore received new credentials");const n=vu(r);r.Ea.add(3),await Op(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await pm(r)}async function nq(t,e){const r=qe(t);e?(r.Ea.delete(2),await pm(r)):e||(r.Ea.add(2),await Op(r),r.Ra.set("Unknown"))}function Jf(t){return t.ma||(t.ma=(function(r,n,i){const a=qe(r);return a.sa(),new z$(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:W$.bind(null,t),t_:K$.bind(null,t),r_:X$.bind(null,t),H_:Y$.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),PE(t)?RE(t):t.Ra.set("Unknown")):(await t.ma.stop(),kN(t))}))),t.ma}function Bl(t){return t.fa||(t.fa=(function(r,n,i){const a=qe(r);return a.sa(),new V$(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:J$.bind(null,t),r_:rq.bind(null,t),ta:eq.bind(null,t),na:tq.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await gm(t)):(await t.fa.stop(),t.Ta.length>0&&(Se(nu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,l=new DE(e,r,o,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function NE(t,e){if(ds("AsyncQueue",`${e}: ${t}`),Qf(t))return new _e(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{static emptySet(e){return new xf(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||Me.comparator(r.key,n.key):(r,n)=>Me.comparator(r.key,n.key),this.keyedMap=kh(),this.sortedSet=new ur(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof xf)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new xf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.ga=new ur(Me.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Nf{constructor(e,r,n,i,a,o,l,c,f){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach((l=>{o.push({type:0,doc:l})})),new Nf(e,r,xf.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class aq{constructor(){this.queries=_O(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=qe(r),a=i.queries;i.queries=_O(),a.forEach(((o,l)=>{for(const c of l.Sa)c.onError(n)}))})(this,new _e(ce.ABORTED,"Firestore shutting down"))}}function _O(){return new gu((t=>nN(t)),lm)}async function ME(t,e){const r=qe(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new iq,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const l=NE(o,`Initialization of query '${hf(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&jE(r)}async function kE(t,e){const r=qe(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function oq(t,e){const r=qe(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const l of o.Sa)l.Fa(i)&&(n=!0);o.wa=i}}n&&jE(r)}function sq(t,e,r){const n=qe(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function jE(t){t.Ca.forEach((e=>{e.next()}))}var F_,wO;(wO=F_||(F_={})).Ma="default",wO.Cache="cache";class LE{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Nf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Nf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==F_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.key=e}}class FN{constructor(e){this.key=e}}class lq{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=iN(e),this.tu=new xf(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new bO,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const g=i.get(d),m=cm(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;g&&m?g.data.isEqual(m.data)?b!==w&&(n.track({type:3,doc:m}),E=!0):this.su(g,m)||(n.track({type:2,doc:m}),E=!0,(c&&this.eu(m,c)>0||f&&this.eu(m,f)<0)&&(l=!0)):!g&&m?(n.track({type:0,doc:m}),E=!0):g&&!m&&(n.track({type:1,doc:g}),E=!0,(c||f)&&(l=!0)),E&&(m?(o=o.add(m),a=w?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,p)=>(function(m,b){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:E})}};return w(m)-w(b)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(n),i=i??!1;const l=r&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,o.length!==0||f?{snapshot:new Nf(this.query,e.tu,a,o,e.mutatedKeys,c===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ut(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const r=[];return e.forEach((n=>{this.Xa.has(n)||r.push(new FN(n))})),this.Xa.forEach((n=>{e.has(n)||r.push(new UN(n))})),r}cu(e){this.Ya=e.Qs,this.Xa=ut();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Nf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const BE="SyncEngine";class cq{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class uq{constructor(e){this.key=e,this.hu=!1}}class fq{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new gu((l=>nN(l)),lm),this.Iu=new Map,this.Eu=new Set,this.du=new ur(Me.comparator),this.Au=new Map,this.Ru=new AE,this.Vu={},this.mu=new Map,this.fu=Df.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dq(t,e,r=!0){const n=GN(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await zN(n,e,r,!0),i}async function hq(t,e){const r=GN(t);await zN(r,e,!0,!1)}async function zN(t,e,r,n){const i=await N$(t.localStore,vo(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await pq(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&NN(t.remoteStore,i),l}async function pq(t,e,r,n,i){t.pu=(p,g,m)=>(async function(w,E,S,I){let O=E.view.ru(S);O.Cs&&(O=await pO(w.localStore,E.query,!1).then((({documents:R})=>E.view.ru(R,O))));const D=I&&I.targetChanges.get(E.targetId),k=I&&I.targetMismatches.get(E.targetId)!=null,B=E.view.applyChanges(O,w.isPrimaryClient,D,k);return AO(w,E.targetId,B.au),B.snapshot})(t,p,g,m);const a=await pO(t.localStore,e,!0),o=new lq(e,a.Qs),l=o.ru(a.documents),c=Ip.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),f=o.applyChanges(l,t.isPrimaryClient,c);AO(t,r,f.au);const d=new cq(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),f.snapshot}async function gq(t,e,r){const n=qe(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter((o=>!lm(o,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await B_(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&IE(n.remoteStore,i.targetId),z_(n,i.targetId)})).catch(Yf)):(z_(n,i.targetId),await B_(n.localStore,i.targetId,!0))}async function vq(t,e){const r=qe(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),IE(r.remoteStore,n.targetId))}async function mq(t,e,r){const n=Aq(t);try{const i=await(function(o,l){const c=qe(o),f=rr.now(),d=l.reduce(((m,b)=>m.add(b.key)),ut());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(m=>{let b=hs(),w=ut();return c.Ns.getEntries(m,d).next((E=>{b=E,b.forEach(((S,I)=>{I.isValidDocument()||(w=w.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(m,b))).next((E=>{p=E;const S=[];for(const I of l){const O=DH(I,p.get(I.key).overlayedDocument);O!=null&&S.push(new Kl(I.key,O,XD(O.value.mapValue),da.exists(!0)))}return c.mutationQueue.addMutationBatch(m,f,S,l)})).next((E=>{g=E;const S=E.applyToLocalDocumentSet(p,w);return c.documentOverlayCache.saveOverlays(m,E.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:oN(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(o,l,c){let f=o.Vu[o.currentUser.toKey()];f||(f=new ur(ct)),f=f.insert(l,c),o.Vu[o.currentUser.toKey()]=f})(n,i.batchId,r),await Rp(n,i.changes),await gm(n.remoteStore)}catch(i){const a=NE(i,"Failed to persist write");r.reject(a)}}async function VN(t,e){const r=qe(t);try{const n=await R$(r.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=r.Au.get(a);o&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ot(o.hu,14607):i.removedDocuments.size>0&&(Ot(o.hu,42227),o.hu=!1))})),await Rp(r,n,e)}catch(n){await Yf(n)}}function EO(t,e,r){const n=qe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach(((a,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(o,l){const c=qe(o);c.onlineState=l;let f=!1;c.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(l)&&(f=!0)})),f&&jE(c)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function yq(t,e,r){const n=qe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let o=new ur(Me.comparator);o=o.insert(a,zn.newNoDocument(a,Ve.min()));const l=ut().add(a),c=new dm(Ve.min(),new Map,new ur(ct),o,l);await VN(n,c),n.du=n.du.remove(a),n.Au.delete(e),UE(n)}else await B_(n.localStore,e,!1).then((()=>z_(n,e,r))).catch(Yf)}async function xq(t,e){const r=qe(t),n=e.batch.batchId;try{const i=await O$(r.localStore,e);$N(r,n,null),HN(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Rp(r,i)}catch(i){await Yf(i)}}async function bq(t,e,r){const n=qe(t);try{const i=await(function(o,l){const c=qe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return c.mutationQueue.lookupMutationBatch(f,l).next((p=>(Ot(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>c.localDocuments.getDocuments(f,d)))}))})(n.localStore,e);$N(n,e,r),HN(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Rp(n,i)}catch(i){await Yf(i)}}function HN(t,e){(t.mu.get(e)||[]).forEach((r=>{r.resolve()})),t.mu.delete(e)}function $N(t,e,r){const n=qe(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function z_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((n=>{t.Ru.containsKey(n)||qN(t,n)}))}function qN(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(IE(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),UE(t))}function AO(t,e,r){for(const n of r)n instanceof UN?(t.Ru.addReference(n.key,e),_q(t,n)):n instanceof FN?(Se(BE,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||qN(t,n.key)):Fe(19791,{wu:n})}function _q(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Se(BE,"New document in limbo: "+r),t.Eu.add(n),UE(t))}function UE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new Me(Kt.fromString(e)),n=t.fu.next();t.Au.set(n,new uq(r)),t.du=t.du.insert(r,n),NN(t.remoteStore,new wl(vo(sm(r.path)),n,"TargetPurposeLimboResolution",im.ce))}}async function Rp(t,e,r){const n=qe(t),i=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach(((l,c)=>{o.push(n.pu(c,e,r).then((f=>{if((f||r)&&n.isPrimaryClient){const d=f?!f.fromCache:r?.targetChanges.get(c.targetId)?.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(f){i.push(f);const d=CE.As(c.targetId,f);a.push(d)}})))})),await Promise.all(o),n.Pu.H_(i),await(async function(c,f){const d=qe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>de.forEach(f,(g=>de.forEach(g.Es,(m=>d.persistence.referenceDelegate.addReference(p,g.targetId,m))).next((()=>de.forEach(g.ds,(m=>d.persistence.referenceDelegate.removeReference(p,g.targetId,m)))))))))}catch(p){if(!Qf(p))throw p;Se(TE,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const m=d.Ms.get(g),b=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(g,w)}}})(n.localStore,a))}async function wq(t,e){const r=qe(t);if(!r.currentUser.isEqual(e)){Se(BE,"User change. New user:",e.toKey());const n=await ON(r.localStore,e);r.currentUser=e,(function(a,o){a.mu.forEach((l=>{l.forEach((c=>{c.reject(new _e(ce.CANCELLED,o))}))})),a.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Rp(r,n.Ls)}}function Eq(t,e){const r=qe(t),n=r.Au.get(e);if(n&&n.hu)return ut().add(n.key);{let i=ut();const a=r.Iu.get(e);if(!a)return i;for(const o of a){const l=r.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function GN(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yq.bind(null,e),e.Pu.H_=oq.bind(null,e.eventManager),e.Pu.yu=sq.bind(null,e.eventManager),e}function Aq(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bq.bind(null,e),e}class $1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return I$(this.persistence,new S$,e.initialUser,this.serializer)}Cu(e){return new IN(SE.mi,this.serializer)}Du(e){return new k$}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$1.provider={build:()=>new $1};class Sq extends $1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Ot(this.persistence.referenceDelegate instanceof V1,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new u$(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?hi.withCacheSize(this.cacheSizeBytes):hi.DEFAULT;return new IN((n=>V1.mi(n,r)),this.serializer)}}class V_{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>EO(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=wq.bind(null,this.syncEngine),await nq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aq})()}createDatastore(e){const r=hm(e.databaseInfo.databaseId),n=(function(a){return new F$(a)})(e.databaseInfo);return(function(a,o,l,c){return new $$(a,o,l,c)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,a,o,l){return new G$(n,i,a,o,l)})(this.localStore,this.datastore,e.asyncQueue,(r=>EO(this.syncEngine,r,0)),(function(){return mO.v()?new mO:new j$})())}createSyncEngine(e,r){return(function(i,a,o,l,c,f,d){const p=new fq(i,a,o,l,c,f);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const n=qe(r);Se(nu,"RemoteStore shutting down."),n.Ea.add(5),await Op(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}V_.provider={build:()=>new V_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="FirestoreClient";class Cq{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Fn.UNAUTHENTICATED,this.clientId=hE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async o=>{Se(Ul,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Se(Ul,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=NE(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function I2(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Ul,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await ON(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function SO(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Tq(t);Se(Ul,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>xO(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>xO(e.remoteStore,i))),t._onlineComponents=e}async function Tq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Ul,"Using user provided OfflineComponentProvider");try{await I2(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ce.FAILED_PRECONDITION||i.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;If("Error using user provided cache. Falling back to memory cache: "+r),await I2(t,new $1)}}else Se(Ul,"Using default OfflineComponentProvider"),await I2(t,new Sq(void 0));return t._offlineComponents}async function WN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Ul,"Using user provided OnlineComponentProvider"),await SO(t,t._uninitializedComponentsProvider._online)):(Se(Ul,"Using default OnlineComponentProvider"),await SO(t,new V_))),t._onlineComponents}function Iq(t){return WN(t).then((e=>e.syncEngine))}async function q1(t){const e=await WN(t),r=e.eventManager;return r.onListen=dq.bind(null,e.syncEngine),r.onUnlisten=gq.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=hq.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=vq.bind(null,e.syncEngine),r}function Oq(t,e,r={}){const n=new as;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,l,c,f){const d=new FE({next:g=>{d.Nu(),o.enqueueAndForget((()=>kE(a,p)));const m=g.docs.has(l);!m&&g.fromCache?f.reject(new _e(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?f.reject(new _e(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new LE(sm(l.path),d,{includeMetadataChanges:!0,qa:!0});return ME(a,p)})(await q1(t),t.asyncQueue,e,r,n))),n.promise}function Rq(t,e,r={}){const n=new as;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,l,c,f){const d=new FE({next:g=>{d.Nu(),o.enqueueAndForget((()=>kE(a,p))),g.fromCache&&c.source==="server"?f.reject(new _e(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new LE(l,d,{includeMetadataChanges:!0,qa:!0});return ME(a,p)})(await q1(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firestore.googleapis.com",TO=!0;class IO{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XN,this.ssl=TO}else this.host=e.host,this.ssl=e.ssl??TO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l$)throw new _e(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KN(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new jV;switch(n.type){case"firstParty":return new FV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new _e(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=CO.get(r);n&&(Se("ComponentProvider","Removing Datastore"),CO.delete(r),n.terminate())})(this),Promise.resolve()}}function Pq(t,e,r,n={}){t=mi(t,vm);const i=Io(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;i&&(em(`https://${l}`),tm("Firestore",!0)),a.host!==XN&&a.host!==l&&If("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:i,emulatorOptions:n};if(!tu(c,o)&&(t._setSettings(c),n.mockUserToken)){let f,d;if(typeof n.mockUserToken=="string")f=n.mockUserToken,d=Fn.MOCK_USER;else{f=AD(n.mockUserToken,t._app?.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new _e(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Fn(p)}t._authCredentials=new LV(new LD(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class vr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Il(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}toJSON(){return{type:vr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Cp(r,vr._jsonSchema))return new vr(e,n||null,new Me(Kt.fromString(r.referencePath)))}}vr._jsonSchemaVersion="firestore/documentReference/1.0",vr._jsonSchema={type:Fr("string",vr._jsonSchemaVersion),referencePath:Fr("string")};class Il extends bs{constructor(e,r,n){super(e,r,sm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new Me(e))}withConverter(e){return new Il(this.firestore,e,this._path)}}function ze(t,e,...r){if(t=Gt(t),BD("collection","path",e),t instanceof vm){const n=Kt.fromString(e,...r);return zI(n),new Il(t,null,n)}{if(!(t instanceof vr||t instanceof Il))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kt.fromString(e,...r));return zI(n),new Il(t.firestore,null,n)}}function Ye(t,e,...r){if(t=Gt(t),arguments.length===1&&(e=hE.newId()),BD("doc","path",e),t instanceof vm){const n=Kt.fromString(e,...r);return FI(n),new vr(t,null,new Me(n))}{if(!(t instanceof vr||t instanceof Il))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kt.fromString(e,...r));return FI(n),new vr(t.firestore,t instanceof Il?t.converter:null,new Me(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="AsyncQueue";class RO{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PN(this,"async_queue_retry"),this._c=()=>{const n=T2();n&&Se(OO,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=T2();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=T2();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qf(e))throw e;Se(OO,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const r=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ds("INTERNAL UNHANDLED ERROR: ",PO(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=DE.createAndSchedule(this,e,r,n,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:PO(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function PO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class ps extends vm{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new RO,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new RO(e),this._firestoreClient=void 0,await e}}}function Dq(t,e){const r=typeof t=="object"?t:rm(),n=typeof t=="string"?t:L1,i=Sp(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=cE("firestore");a&&Pq(i,...a)}return i}function mm(t){if(t._terminated)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Nq(t),t._firestoreClient}function Nq(t){const e=t._freezeSettings(),r=(function(i,a,o,l){return new iH(i,a,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,KN(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Cq(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(Pn.fromBase64String(e))}catch(r){throw new _e(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new la(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:la._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cp(e,la._jsonSchema))return la.fromBase64String(e.bytes)}}la._jsonSchemaVersion="firestore/bytes/1.0",la._jsonSchema={type:Fr("string",la._jsonSchemaVersion),bytes:Fr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new _e(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new _e(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new _e(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yo._jsonSchemaVersion}}static fromJSON(e){if(Cp(e,yo._jsonSchema))return new yo(e.latitude,e.longitude)}}yo._jsonSchemaVersion="firestore/geoPoint/1.0",yo._jsonSchema={type:Fr("string",yo._jsonSchemaVersion),latitude:Fr("number"),longitude:Fr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cp(e,xo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((r=>typeof r=="number")))return new xo(e.vectorValues);throw new _e(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xo._jsonSchemaVersion="firestore/vectorValue/1.0",xo._jsonSchema={type:Fr("string",xo._jsonSchemaVersion),vectorValues:Fr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq=/^__.*__$/;class kq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Kl(e,this.data,this.fieldMask,r,this.fieldTransforms):new Tp(e,this.data,r,this.fieldTransforms)}}class YN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Kl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function QN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:t})}}class zE{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return G1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QN(this.Ac)&&Mq.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jq{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||hm(e)}Cc(e,r,n,i=!1){return new zE({Ac:e,methodName:r,Dc:n,path:In.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xm(t){const e=t._freezeSettings(),r=hm(t._databaseId);return new jq(t._databaseId,!!e.ignoreUndefinedProperties,r)}function ZN(t,e,r,n,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);$E("Data must be an object, but it was:",o,n);const l=JN(n,o);let c,f;if(a.merge)c=new ki(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const g=H_(e,p,r);if(!o.contains(g))throw new _e(ce.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);tM(d,g)||d.push(g)}c=new ki(d),f=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=o.fieldTransforms;return new kq(new pi(l),c,f)}class bm extends Pp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}class VE extends Pp{_toFieldTransform(e){return new pN(e.path,new op)}isEqual(e){return e instanceof VE}}class HE extends Pp{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new cp(e.serializer,cN(e.serializer,this.Fc));return new pN(e.path,r)}isEqual(e){return e instanceof HE&&this.Fc===e.Fc}}function Lq(t,e,r,n){const i=t.Cc(1,e,r);$E("Data must be an object, but it was:",i,n);const a=[],o=pi.empty();Wl(n,((c,f)=>{const d=qE(e,c,r);f=Gt(f);const p=i.yc(d);if(f instanceof bm)a.push(d);else{const g=Dp(f,p);g!=null&&(a.push(d),o.set(d,g))}}));const l=new ki(a);return new YN(o,l,i.fieldTransforms)}function Bq(t,e,r,n,i,a){const o=t.Cc(1,e,r),l=[H_(e,n,r)],c=[i];if(a.length%2!=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)l.push(H_(e,a[g])),c.push(a[g+1]);const f=[],d=pi.empty();for(let g=l.length-1;g>=0;--g)if(!tM(f,l[g])){const m=l[g];let b=c[g];b=Gt(b);const w=o.yc(m);if(b instanceof bm)f.push(m);else{const E=Dp(b,w);E!=null&&(f.push(m),d.set(m,E))}}const p=new ki(f);return new YN(d,p,o.fieldTransforms)}function Uq(t,e,r,n=!1){return Dp(r,t.Cc(n?4:3,e))}function Dp(t,e){if(eM(t=Gt(t)))return $E("Unsupported field value:",e,t),JN(t,e);if(t instanceof Pp)return(function(n,i){if(!QN(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const a=[];let o=0;for(const l of n){let c=Dp(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}})(t,e)}return(function(n,i){if((n=Gt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return cN(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=rr.fromDate(n);return{timestampValue:z1(i.serializer,a)}}if(n instanceof rr){const a=new rr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:z1(i.serializer,a)}}if(n instanceof yo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof la)return{bytesValue:bN(i.serializer,n._byteString)};if(n instanceof vr){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:EE(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof xo)return(function(o,l){return{mapValue:{fields:{[WD]:{stringValue:KD},[B1]:{arrayValue:{values:o.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return xE(l.serializer,f)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${nm(n)}`)})(t,e)}function JN(t,e){const r={};return zD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(t,((n,i)=>{const a=Dp(i,e.mc(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function eM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rr||t instanceof yo||t instanceof la||t instanceof vr||t instanceof Pp||t instanceof xo)}function $E(t,e,r){if(!eM(r)||!UD(r)){const n=nm(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function H_(t,e,r){if((e=Gt(e))instanceof ym)return e._internalPath;if(typeof e=="string")return qE(t,e);throw G1("Field path arguments must be of type string or ",t,!1,void 0,r)}const Fq=new RegExp("[~\\*/\\[\\]]");function qE(t,e,r){if(e.search(Fq)>=0)throw G1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ym(...e.split("."))._internalPath}catch{throw G1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function G1(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new _e(ce.INVALID_ARGUMENT,l+t+c)}function tM(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(_m("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class zq extends rM{data(){return super.data()}}function _m(t,e){return typeof e=="string"?qE(t,e):e instanceof ym?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GE{}class WE extends GE{}function Lt(t,e,...r){let n=[];e instanceof GE&&n.push(e),n=n.concat(r),(function(a){const o=a.filter((c=>c instanceof KE)).length,l=a.filter((c=>c instanceof wm)).length;if(o>1||o>0&&l>0)throw new _e(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class wm extends WE{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new wm(e,r,n)}_apply(e){const r=this._parse(e);return iM(e._query,r),new bs(e.firestore,e.converter,N_(e._query,r))}_parse(e){const r=xm(e.firestore);return(function(a,o,l,c,f,d,p){let g;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){MO(p,d);const b=[];for(const w of p)b.push(NO(c,a,w));g={arrayValue:{values:b}}}else g=NO(c,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||MO(p,d),g=Uq(l,o,p,d==="in"||d==="not-in");return Ur.create(f,d,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function On(t,e,r){const n=e,i=_m("where",t);return wm._create(i,n,r)}class KE extends GE{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new KE(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Ua.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)iM(o,c),o=N_(o,c)})(e._query,r),new bs(e.firestore,e.converter,N_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class XE extends WE{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new XE(e,r)}_apply(e){const r=(function(i,a,o){if(i.startAt!==null)throw new _e(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _e(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ap(a,o)})(e._query,this._field,this._direction);return new bs(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new Zf(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function Dn(t,e="asc"){const r=e,n=_m("orderBy",t);return XE._create(n,r)}class YE extends WE{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new YE(e,r,n)}_apply(e){return new bs(e.firestore,e.converter,F1(e._query,this._limit,this._limitType))}}function Fl(t){return WV("limit",t),YE._create("limit",t,"F")}function NO(t,e,r){if(typeof(r=Gt(r))=="string"){if(r==="")throw new _e(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rN(e)&&r.indexOf("/")!==-1)throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Kt.fromString(r));if(!Me.isDocumentKey(n))throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return XI(t,new Me(n))}if(r instanceof vr)return XI(t,r._key);throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(r)}.`)}function MO(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iM(t,e){const r=(function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Vq{convertValue(e,r="none"){switch(Ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Wl(e,((i,a)=>{n[i]=this.convertValue(a,r)})),n}convertVectorValue(e){const r=e.fields?.[B1].arrayValue?.values?.map((n=>Tr(n.doubleValue)));return new xo(r)}convertGeoPoint(e){return new yo(Tr(e.latitude),Tr(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=om(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const r=kl(e);return new rr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Kt.fromString(e);Ot(CN(n),9688,{name:e});const i=new np(n.get(1),n.get(3)),a=new Me(n.popFirst(5));return i.isEqual(r)||ds(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Lh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends rM{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new x1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(_m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Wc._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Wc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wc._jsonSchema={type:Fr("string",Wc._jsonSchemaVersion),bundleSource:Fr("string","DocumentSnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class x1 extends Wc{data(e={}){return super.data(e)}}class Kc{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Lh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new x1(this._firestore,this._userDataWriter,n.key,n,new Lh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new _e(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((l=>{const c=new x1(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lh(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const c=new x1(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Lh(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return l.type!==0&&(f=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Hq(l.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Hq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){t=mi(t,vr);const e=mi(t.firestore,ps);return Oq(mm(e),t._key).then((r=>oM(e,t,r)))}Kc._jsonSchemaVersion="firestore/querySnapshot/1.0",Kc._jsonSchema={type:Fr("string",Kc._jsonSchemaVersion),bundleSource:Fr("string","QuerySnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class QE extends Vq{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,r)}}function St(t){t=mi(t,bs);const e=mi(t.firestore,ps),r=mm(e),n=new QE(e);return nM(t._query),Rq(r,t._query).then((i=>new Kc(e,n,t,i)))}function Xl(t,e,r){t=mi(t,vr);const n=mi(t.firestore,ps),i=aM(t.converter,e);return Em(n,[ZN(xm(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,da.none())])}function Nn(t,e,r,...n){t=mi(t,vr);const i=mi(t.firestore,ps),a=xm(i);let o;return o=typeof(e=Gt(e))=="string"||e instanceof ym?Bq(a,"updateDoc",t._key,e,r,n):Lq(a,"updateDoc",t._key,e),Em(i,[o.toMutation(t._key,da.exists(!0))])}function Bi(t){return Em(mi(t.firestore,ps),[new bE(t._key,da.none())])}function ed(t,e){const r=mi(t.firestore,ps),n=Ye(t),i=aM(t.converter,e);return Em(r,[ZN(xm(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,da.exists(!1))]).then((()=>n))}function td(t,...e){t=Gt(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||DO(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(DO(e[n])){const c=e[n];e[n]=c.next?.bind(c),e[n+1]=c.error?.bind(c),e[n+2]=c.complete?.bind(c)}let a,o,l;if(t instanceof vr)o=mi(t.firestore,ps),l=sm(t._key.path),a={next:c=>{e[n]&&e[n](oM(o,t,c))},error:e[n+1],complete:e[n+2]};else{const c=mi(t,bs);o=mi(c.firestore,ps),l=c._query;const f=new QE(o);a={next:d=>{e[n]&&e[n](new Kc(o,f,c,d))},error:e[n+1],complete:e[n+2]},nM(t._query)}return(function(f,d,p,g){const m=new FE(g),b=new LE(d,m,p);return f.asyncQueue.enqueueAndForget((async()=>ME(await q1(f),b))),()=>{m.Nu(),f.asyncQueue.enqueueAndForget((async()=>kE(await q1(f),b)))}})(mm(o),l,i,a)}function Em(t,e){return(function(n,i){const a=new as;return n.asyncQueue.enqueueAndForget((async()=>mq(await Iq(n),i,a))),a.promise})(mm(t),e)}function oM(t,e,r){const n=r.docs.get(e._key),i=new QE(t);return new Wc(t,i,e._key,n,new Lh(r.hasPendingWrites,r.fromCache),e.converter)}function $q(){return new VE("serverTimestamp")}function Eo(t){return new HE("increment",t)}(function(e,r=!0){(function(i){Xf=i})(pu),Nl(new us("firestore",((n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new ps(new BV(n.getProvider("auth-internal")),new zV(o,n.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new _e(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new np(f.options.projectId,d)})(o,i),o);return a={useFetchStreams:r,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),fa(jI,LI,e),fa(jI,LI,"esm2020")})();var qq="firebase",Gq="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fa(qq,Gq,"app");function sM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wq=sM,lM=new Ep("auth","Firebase",sM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new uE("@firebase/auth");function Kq(t,...e){W1.logLevel<=lt.WARN&&W1.warn(`Auth (${pu}): ${t}`,...e)}function b1(t,...e){W1.logLevel<=lt.ERROR&&W1.error(`Auth (${pu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t,...e){throw JE(t,...e)}function Ba(t,...e){return JE(t,...e)}function ZE(t,e,r){const n={...Wq(),[e]:r};return new Ep("auth","Firebase",n).create(e,{appName:t.name})}function os(t){return ZE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xq(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&pa(t,"argument-error"),ZE(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function JE(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return lM.create(t,...e)}function Ue(t,e,...r){if(!t)throw JE(e,...r)}function ts(t){const e="INTERNAL ASSERTION FAILED: "+t;throw b1(e),new Error(e)}function gs(t,e){t||ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(){return typeof self<"u"&&self.location?.href||""}function Yq(){return kO()==="http:"||kO()==="https:"}function kO(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yq()||gz()||"connection"in navigator)?navigator.onLine:!0}function Zq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,r){this.shortDelay=e,this.longDelay=r,gs(r>e,"Short delay should be less than long delay!"),this.isMobile=dz()||vz()}get(){return Qq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e){gs(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tG=new Np(3e4,6e4);function Yl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _s(t,e,r,n,i={}){return uM(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=Ap({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...a};return pz()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Io(t.emulatorConfig.host)&&(f.credentials="include"),cM.fetch()(await fM(t,t.config.apiHost,r,l),f)})}async function uM(t,e,r){t._canInitEmulator=!1;const n={...Jq,...e};try{const i=new nG(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Ug(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ug(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ug(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ug(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ZE(t,d,f);pa(t,d)}}catch(i){if(i instanceof za)throw i;pa(t,"network-request-failed",{message:String(i)})}}async function Mp(t,e,r,n,i={}){const a=await _s(t,e,r,n,i);return"mfaPendingCredential"in a&&pa(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function fM(t,e,r,n){const i=`${e}${r}?${n}`,a=t,o=a.config.emulator?eA(t.config,i):`${t.config.apiScheme}://${i}`;return eG.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function rG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ba(this.auth,"network-request-failed")),tG.get())})}}function Ug(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Ba(t,e,n);return i.customData._tokenResponse=r,i}function jO(t){return t!==void 0&&t.enterprise!==void 0}class iG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return rG(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aG(t,e){return _s(t,"GET","/v2/recaptchaConfig",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oG(t,e){return _s(t,"POST","/v1/accounts:delete",e)}async function K1(t,e){return _s(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sG(t,e=!1){const r=Gt(t),n=await r.getIdToken(e),i=tA(n);Ue(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:n,authTime:Xh(O2(i.auth_time)),issuedAtTime:Xh(O2(i.iat)),expirationTime:Xh(O2(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function O2(t){return Number(t)*1e3}function tA(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return b1("JWT malformed, contained fewer than 3 sections"),null;try{const i=bD(r);return i?JSON.parse(i):(b1("Failed to decode base64 JWT payload"),null)}catch(i){return b1("Caught error parsing JWT payload as JSON",i?.toString()),null}}function LO(t){const e=tA(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof za&&lG(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function lG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xh(this.lastLoginAt),this.creationTime=Xh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t){const e=t.auth,r=await t.getIdToken(),n=await Mf(t,K1(e,{idToken:r}));Ue(n?.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?dM(i.providerUserInfo):[],o=fG(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!o?.length,f=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new q_(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,d)}async function uG(t){const e=Gt(t);await X1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fG(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function dM(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dG(t,e){const r=await uM(t,{},async()=>{const n=Ap({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await fM(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&Io(t.emulatorConfig.host)&&(c.credentials="include"),cM.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function hG(t,e){return _s(t,"POST","/v2/accounts:revokeToken",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const r=LO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await dG(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new bf;return n&&(Ue(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(Ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Ue(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bf,this.toJSON())}_performRefresh(){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class La{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new cG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new q_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Mf(this,this.stsTokenManager.getToken(this.auth,e));return Ue(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return sG(this,e)}reload(){return uG(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new La({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await X1(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await Mf(this,oG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,f=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:m,providerData:b,stsTokenManager:w}=r;Ue(p&&w,e,"internal-error");const E=bf.fromJSON(this.name,w);Ue(typeof p=="string",e,"internal-error"),cl(n,e.name),cl(i,e.name),Ue(typeof g=="boolean",e,"internal-error"),Ue(typeof m=="boolean",e,"internal-error"),cl(a,e.name),cl(o,e.name),cl(l,e.name),cl(c,e.name),cl(f,e.name),cl(d,e.name);const S=new La({uid:p,auth:e,email:i,emailVerified:g,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:E,createdAt:f,lastLoginAt:d});return b&&Array.isArray(b)&&(S.providerData=b.map(I=>({...I}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,r,n=!1){const i=new bf;i.updateFromServerResponse(r);const a=new La({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await X1(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Ue(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?dM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,l=new bf;l.updateFromIdToken(n);const c=new La({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new q_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new Map;function rs(t){gs(t instanceof Function,"Expected a class definition");let e=BO.get(t);return e?(gs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}hM.type="NONE";const UO=hM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t,e,r){return`firebase:${t}:${e}:${r}`}class _f{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=_1(this.userKey,i.apiKey,a),this.fullPersistenceKey=_1("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await K1(this.auth,{idToken:e}).catch(()=>{});return r?La._fromGetAccountInfoResponse(this.auth,r,e):null}return La._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new _f(rs(UO),e,n);const i=(await Promise.all(r.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||rs(UO);const o=_1(n,e.config.apiKey,e.name);let l=null;for(const f of r)try{const d=await f._get(o);if(d){let p;if(typeof d=="string"){const g=await K1(e,{idToken:d}).catch(()=>{});if(!g)break;p=await La._fromGetAccountInfoResponse(e,g,d)}else p=La._fromJSON(e,d);f!==a&&(l=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new _f(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new _f(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xM(e))return"Blackberry";if(bM(e))return"Webos";if(gM(e))return"Safari";if((e.includes("chrome/")||vM(e))&&!e.includes("edge/"))return"Chrome";if(yM(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function pM(t=qn()){return/firefox\//i.test(t)}function gM(t=qn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vM(t=qn()){return/crios\//i.test(t)}function mM(t=qn()){return/iemobile/i.test(t)}function yM(t=qn()){return/android/i.test(t)}function xM(t=qn()){return/blackberry/i.test(t)}function bM(t=qn()){return/webos/i.test(t)}function rA(t=qn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pG(t=qn()){return rA(t)&&!!window.navigator?.standalone}function gG(){return mz()&&document.documentMode===10}function _M(t=qn()){return rA(t)||yM(t)||bM(t)||xM(t)||/windows phone/i.test(t)||mM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t,e=[]){let r;switch(t){case"Browser":r=FO(qn());break;case"Worker":r=`${FO(qn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${pu}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mG(t,e={}){return _s(t,"GET","/v2/passwordPolicy",Yl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG=6;class xG{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??yG,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zO(this),this.idTokenSubscription=new zO(this),this.beforeStateQueue=new vG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=rs(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _f.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await K1(this,{idToken:e}),n=await La._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ti(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=n?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&l?.user&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await X1(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Zq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(os(this));const r=e?Gt(e):null;return r&&Ue(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mG(this),r=new xG(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ep("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await hG(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&rs(e)||this._popupRedirectResolver;Ue(r,this,"argument-error"),this.redirectPersistenceManager=await _f.create(this,[rs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Kq(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ql(t){return Gt(t)}class zO{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sz(r=>this.observer=r)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Am={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _G(t){Am=t}function EM(t){return Am.loadJS(t)}function wG(){return Am.recaptchaEnterpriseScript}function EG(){return Am.gapiScript}function AG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class SG{constructor(){this.enterprise=new CG}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class CG{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const TG="recaptcha-enterprise",AM="NO_RECAPTCHA";class IG{constructor(e){this.type=TG,this.auth=Ql(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{aG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new iG(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;jO(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(AM)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SG().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&jO(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=wG();c.length!==0&&(c+=l),EM(c).then(()=>{i(l,a,o)}).catch(f=>{o(f)})}}).catch(l=>{o(l)})})}}async function VO(t,e,r,n=!1,i=!1){const a=new IG(t);let o;if(i)o=AM;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function G_(t,e,r,n,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await VO(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await VO(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(t,e){const r=Sp(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(tu(a,e??{}))return i;pa(i,"already-initialized")}return r.initialize({options:e})}function RG(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(rs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function PG(t,e,r){const n=Ql(t);Ue(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=SM(e),{host:o,port:l}=DG(e),c=l===null?"":`:${l}`,f={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Ue(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ue(tu(f,n.config.emulator)&&tu(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Io(o)?(em(`${a}//${o}${c}`),tm("Auth",!0)):NG()}function SM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DG(t){const e=SM(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:HO(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:HO(o)}}}function HO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function NG(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,r){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}async function MG(t,e){return _s(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kG(t,e){return Mp(t,"POST","/v1/accounts:signInWithPassword",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jG(t,e){return Mp(t,"POST","/v1/accounts:signInWithEmailLink",Yl(t,e))}async function LG(t,e){return Mp(t,"POST","/v1/accounts:signInWithEmailLink",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends nA{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new up(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new up(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G_(e,r,"signInWithPassword",kG);case"emailLink":return jG(e,{email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G_(e,n,"signUpPassword",MG);case"emailLink":return LG(e,{idToken:r,email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(t,e){return Mp(t,"POST","/v1/accounts:signInWithIdp",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG="http://localhost";class iu extends nA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new iu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):pa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const o=new iu(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return wf(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,wf(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,wf(e,r)}buildRequest(){const e={requestUri:BG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ap(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FG(t){const e=Dh(Nh(t)).link,r=e?Dh(Nh(e)).deep_link_id:null,n=Dh(Nh(t)).deep_link_id;return(n?Dh(Nh(n)).link:null)||n||r||e||t}class iA{constructor(e){const r=Dh(Nh(e)),n=r.apiKey??null,i=r.oobCode??null,a=UG(r.mode??null);Ue(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=FG(e);try{return new iA(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this.providerId=rd.PROVIDER_ID}static credential(e,r){return up._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=iA.parseLink(r);return Ue(n,"argument-error"),up._fromEmailAndCode(e,n.code,n.tenantId)}}rd.PROVIDER_ID="password";rd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp extends aA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml extends kp{constructor(){super("facebook.com")}static credential(e){return iu._fromParams({providerId:ml.PROVIDER_ID,signInMethod:ml.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ml.credentialFromTaggedObject(e)}static credentialFromError(e){return ml.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ml.credential(e.oauthAccessToken)}catch{return null}}}ml.FACEBOOK_SIGN_IN_METHOD="facebook.com";ml.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends kp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return iu._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Zo.credential(r,n)}catch{return null}}}Zo.GOOGLE_SIGN_IN_METHOD="google.com";Zo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends kp{constructor(){super("github.com")}static credential(e){return iu._fromParams({providerId:yl.PROVIDER_ID,signInMethod:yl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yl.credentialFromTaggedObject(e)}static credentialFromError(e){return yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yl.credential(e.oauthAccessToken)}catch{return null}}}yl.GITHUB_SIGN_IN_METHOD="github.com";yl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends kp{constructor(){super("twitter.com")}static credential(e,r){return iu._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return xl.credential(r,n)}catch{return null}}}xl.TWITTER_SIGN_IN_METHOD="twitter.com";xl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zG(t,e){return Mp(t,"POST","/v1/accounts:signUp",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await La._fromIdTokenResponse(e,n,i),o=$O(n);return new au({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=$O(n);return new au({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function $O(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1 extends za{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Y1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Y1(e,r,n,i)}}function CM(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Y1._fromErrorAndOperation(t,a,e,n):a})}async function VG(t,e,r=!1){const n=await Mf(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return au._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HG(t,e,r=!1){const{auth:n}=t;if(ti(n.app))return Promise.reject(os(n));const i="reauthenticate";try{const a=await Mf(t,CM(n,i,e,t),r);Ue(a.idToken,n,"internal-error");const o=tA(a.idToken);Ue(o,n,"internal-error");const{sub:l}=o;return Ue(t.uid===l,n,"user-mismatch"),au._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&pa(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t,e,r=!1){if(ti(t.app))return Promise.reject(os(t));const n="signIn",i=await CM(t,n,e),a=await au._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function $G(t,e){return TM(Ql(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(t){const e=Ql(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qG(t,e,r){if(ti(t.app))return Promise.reject(os(t));const n=Ql(t),o=await G_(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zG).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&IM(t),c}),l=await au._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function GG(t,e,r){return ti(t.app)?Promise.reject(os(t)):$G(Gt(t),rd.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&IM(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WG(t,e){return _s(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Gt(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await Mf(n,WG(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function KG(t,e,r,n){return Gt(t).onIdTokenChanged(e,r,n)}function XG(t,e,r){return Gt(t).beforeAuthStateChanged(e,r)}function YG(t,e,r,n){return Gt(t).onAuthStateChanged(e,r,n)}function QG(t){return Gt(t).signOut()}const Q1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Q1,"1"),this.storage.removeItem(Q1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZG=1e3,JG=10;class PM extends RM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_M(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);gG()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JG):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},ZG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}PM.type="LOCAL";const eW=PM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM extends RM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}DM.type="SESSION";const NM=DM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Sm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(o).map(async f=>f(r.origin,a)),c=await tW(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const f=oA("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(g.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(){return window}function nW(t){bo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(){return typeof bo().WorkerGlobalScope<"u"&&typeof bo().importScripts=="function"}async function iW(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aW(){return navigator?.serviceWorker?.controller||null}function oW(){return MM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="firebaseLocalStorageDb",sW=1,Z1="firebaseLocalStorage",jM="fbase_key";class jp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Cm(t,e){return t.transaction([Z1],e?"readwrite":"readonly").objectStore(Z1)}function lW(){const t=indexedDB.deleteDatabase(kM);return new jp(t).toPromise()}function W_(){const t=indexedDB.open(kM,sW);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Z1,{keyPath:jM})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Z1)?e(n):(n.close(),await lW(),e(await W_()))})})}async function qO(t,e,r){const n=Cm(t,!0).put({[jM]:e,value:r});return new jp(n).toPromise()}async function cW(t,e){const r=Cm(t,!1).get(e),n=await new jp(r).toPromise();return n===void 0?null:n.value}function GO(t,e){const r=Cm(t,!0).delete(e);return new jp(r).toPromise()}const uW=800,fW=3;class LM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await W_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>fW)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sm._getInstance(oW()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await iW(),!this.activeServiceWorker)return;this.sender=new rW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await W_();return await qO(e,Q1,"1"),await GO(e,Q1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>qO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>cW(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>GO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Cm(i,!1).getAll();return new jp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LM.type="LOCAL";const dW=LM;new Np(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t,e){return e?rs(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA extends nA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wf(e,this._buildIdpRequest())}_linkToIdToken(e,r){return wf(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return wf(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function hW(t){return TM(t.auth,new sA(t),t.bypassAuthState)}function pW(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),HG(r,new sA(t),t.bypassAuthState)}async function gW(t){const{auth:e,user:r}=t;return Ue(r,e,"internal-error"),VG(r,new sA(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hW;case"linkViaPopup":case"linkViaRedirect":return gW;case"reauthViaPopup":case"reauthViaRedirect":return pW;default:pa(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW=new Np(2e3,1e4);async function mW(t,e,r){if(ti(t.app))return Promise.reject(Ba(t,"operation-not-supported-in-this-environment"));const n=Ql(t);Xq(t,e,aA);const i=BM(n,r);return new zc(n,"signInViaPopup",e,i).executeNotNull()}class zc extends UM{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,zc.currentPopupAction&&zc.currentPopupAction.cancel(),zc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=oA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ba(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ba(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ba(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vW.get())};e()}}zc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="pendingRedirect",w1=new Map;class xW extends UM{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=w1.get(this.auth._key());if(!e){try{const n=await bW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}w1.set(this.auth._key(),e)}return this.bypassAuthState||w1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bW(t,e){const r=EW(e),n=wW(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function _W(t,e){w1.set(t._key(),e)}function wW(t){return rs(t._redirectPersistence)}function EW(t){return _1(yW,t.config.apiKey,t.name)}async function AW(t,e,r=!1){if(ti(t.app))return Promise.reject(os(t));const n=Ql(t),i=BM(n,e),o=await new xW(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=600*1e3;class CW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TW(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!FM(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(Ba(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SW&&this.cachedEventUids.clear(),this.cachedEventUids.has(WO(e))}saveEventToCache(e){this.cachedEventUids.add(WO(e)),this.lastProcessedEventTime=Date.now()}}function WO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function TW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(t,e={}){return _s(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RW=/^https?/;async function PW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IW(t);for(const r of e)try{if(DW(r))return}catch{}pa(t,"unauthorized-domain")}function DW(t){const e=$_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!RW.test(r))return!1;if(OW.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW=new Np(3e4,6e4);function KO(){const t=bo().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function MW(t){return new Promise((e,r)=>{function n(){KO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KO(),r(Ba(t,"network-request-failed"))},timeout:NW.get()})}if(bo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(bo().gapi?.load)n();else{const i=AG("iframefcb");return bo()[i]=()=>{gapi.load?n():r(Ba(t,"network-request-failed"))},EM(`${EG()}?onload=${i}`).catch(a=>r(a))}}).catch(e=>{throw E1=null,e})}let E1=null;function kW(t){return E1=E1||MW(t),E1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW=new Np(5e3,15e3),LW="__/auth/iframe",BW="emulator/auth/iframe",UW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zW(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?eA(e,BW):`https://${t.config.authDomain}/${LW}`,n={apiKey:e.apiKey,appName:t.name,v:pu},i=FW.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Ap(n).slice(1)}`}async function VW(t){const e=await kW(t),r=bo().gapi;return Ue(r,t,"internal-error"),e.open({where:document.body,url:zW(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UW,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=Ba(t,"network-request-failed"),l=bo().setTimeout(()=>{a(o)},jW.get());function c(){bo().clearTimeout(l),i(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$W=500,qW=600,GW="_blank",WW="http://localhost";class XO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KW(t,e,r,n=$W,i=qW){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...HW,width:n.toString(),height:i.toString(),top:a,left:o},f=qn().toLowerCase();r&&(l=vM(f)?GW:r),pM(f)&&(e=e||WW,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[m,b])=>`${g}${m}=${b},`,"");if(pG(f)&&l!=="_self")return XW(e||"",l),new XO(null);const p=window.open(e||"",l,d);Ue(p,t,"popup-blocked");try{p.focus()}catch{}return new XO(p)}function XW(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW="__/auth/handler",QW="emulator/auth/handler",ZW=encodeURIComponent("fac");async function YO(t,e,r,n,i,a){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:pu,eventId:i};if(e instanceof aA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Az(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof kp){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),f=c?`#${ZW}=${encodeURIComponent(c)}`:"";return`${JW(t)}?${Ap(l).slice(1)}${f}`}function JW({config:t}){return t.emulator?eA(t,QW):`https://${t.authDomain}/${YW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="webStorageSupport";class eK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NM,this._completeRedirectFn=AW,this._overrideRedirectResult=_W}async _openPopup(e,r,n,i){gs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await YO(e,r,n,$_(),i);return KW(e,a,oA())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await YO(e,r,n,$_(),i);return nW(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(gs(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await VW(e),n=new CW(e);return r.register("authEvent",i=>(Ue(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(R2,{type:R2},i=>{const a=i?.[0]?.[R2];a!==void 0&&r(!!a),pa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=PW(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return _M()||gM()||rA()}}const tK=eK;var QO="@firebase/auth",ZO="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iK(t){Nl(new us("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wM(t)},f=new bG(n,i,a,c);return RG(f,r),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Nl(new us("auth-internal",e=>{const r=Ql(e.getProvider("auth").getImmediate());return(n=>new rK(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),fa(QO,ZO,nK(t)),fa(QO,ZO,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=300,oK=ED("authIdTokenMaxAge")||aK;let JO=null;const sK=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>oK)return;const i=r?.token;JO!==i&&(JO=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function lK(t=rm()){const e=Sp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=OG(t,{popupRedirectResolver:tK,persistence:[dW,eW,NM]}),n=ED("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=sK(a.toString());XG(r,o,()=>o(r.currentUser)),KG(r,l=>o(l))}}const i=_D("auth");return i&&PG(r,`http://${i}`),r}function cK(){return document.getElementsByTagName("head")?.[0]??document}_G({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Ba("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",cK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iK("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK="type.googleapis.com/google.protobuf.Int64Value",fK="type.googleapis.com/google.protobuf.UInt64Value";function zM(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function J1(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>J1(e));if(typeof t=="function"||typeof t=="object")return zM(t,e=>J1(e));throw new Error("Data cannot be encoded in JSON: "+t)}function kf(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case uK:case fK:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>kf(e)):typeof t=="function"||typeof t=="object"?zM(t,e=>kf(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ri extends za{constructor(e,r,n){super(`${lA}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,ri.prototype)}}function dK(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ev(t,e){let r=dK(t),n=r,i;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!e6[o])return new ri("internal","internal");r=e6[o],n=o}const l=a.message;typeof l=="string"&&(n=l),i=a.details,i!==void 0&&(i=kf(i))}}catch{}return r==="ok"?null:new ri(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor(e,r,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ti(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="us-central1",pK=/^data: (.*?)(?:\n|$)/;function gK(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new ri("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class vK{constructor(e,r,n,i,a=K_,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new hK(e,r,n,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=K_}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function mK(t,e,r){const n=Io(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(em(t.emulatorOrigin+"/backends"),tm("Functions",!0))}function yK(t,e,r){const n=i=>bK(t,e,i,r||{});return n.stream=(i,a)=>wK(t,e,i,a),n}function VM(t){return t.emulatorOrigin&&Io(t.emulatorOrigin)?"include":void 0}async function xK(t,e,r,n,i){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r,credentials:VM(i)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function HM(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function bK(t,e,r,n){const i=t._url(e);return _K(t,i,r,n)}async function _K(t,e,r,n){r=J1(r);const i={data:r},a=await HM(t,n),o=n.timeout||7e4,l=gK(o),c=await Promise.race([xK(e,i,a,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new ri("cancelled","Firebase Functions instance was deleted.");const f=ev(c.status,c.json);if(f)throw f;if(!c.json)throw new ri("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ri("internal","Response is missing data field.");return{data:kf(d)}}function wK(t,e,r,n){const i=t._url(e);return EK(t,i,r,n||{})}async function EK(t,e,r,n){r=J1(r);const i={data:r},a=await HM(t,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:n?.signal,credentials:VM(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new ri("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const m=ev(0,null);return{data:Promise.reject(m),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(m)}}}}}}let l,c;const f=new Promise((g,m)=>{l=g,c=m});n?.signal?.addEventListener("abort",()=>{const g=new ri("cancelled","Request was cancelled.");c(g)});const d=o.body.getReader(),p=AK(d,l,c,n?.signal);return{stream:{[Symbol.asyncIterator](){const g=p.getReader();return{async next(){const{value:m,done:b}=await g.read();return{value:m,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:f}}function AK(t,e,r,n){const i=(o,l)=>{const c=o.match(pK);if(!c)return;const f=c[1];try{const d=JSON.parse(f);if("result"in d){e(kf(d.result));return}if("message"in d){l.enqueue(kf(d.message));return}if("error"in d){const p=ev(0,d);l.error(p),r(p);return}}catch(d){if(d instanceof ri){l.error(d),r(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(n?.aborted){const f=new ri("cancelled","Request was cancelled");return o.error(f),r(f),Promise.resolve()}try{const{value:f,done:d}=await t.read();if(d){l.trim()&&i(l.trim(),o),o.close();return}if(n?.aborted){const g=new ri("cancelled","Request was cancelled");o.error(g),r(g),await t.cancel();return}l+=a.decode(f,{stream:!0});const p=l.split(`
`);l=p.pop()||"";for(const g of p)g.trim()&&i(g.trim(),o);return c()}catch(f){const d=f instanceof ri?f:ev(0,null);o.error(d),r(d)}}},cancel(){return t.cancel()}})}const t6="@firebase/functions",r6="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK="auth-internal",CK="app-check-internal",TK="messaging-internal";function IK(t){const e=(r,{instanceIdentifier:n})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(SK),o=r.getProvider(TK),l=r.getProvider(CK);return new vK(i,a,o,l,n)};Nl(new us(lA,e,"PUBLIC").setMultipleInstances(!0)),fa(t6,r6,t),fa(t6,r6,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t=rm(),e=K_){const n=Sp(Gt(t),lA).getImmediate({identifier:e}),i=cE("functions");return i&&qM(n,...i),n}function qM(t,e,r){mK(Gt(t),e,r)}function OK(t,e,r){return yK(Gt(t),e,r)}IK();const cA=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:ri,connectFunctionsEmulator:qM,getFunctions:$M,httpsCallable:OK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="firebasestorage.googleapis.com",WM="storageBucket",RK=120*1e3,PK=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends za{constructor(e,r,n=0){super(P2(e),`Firebase Storage: ${r} (${P2(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return P2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mr||(mr={}));function P2(t){return"storage/"+t}function uA(){const t="An unknown error occurred, please check the error payload for server response.";return new yr(mr.UNKNOWN,t)}function DK(t){return new yr(mr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function NK(t){return new yr(mr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function MK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yr(mr.UNAUTHENTICATED,t)}function kK(){return new yr(mr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function jK(t){return new yr(mr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function LK(){return new yr(mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BK(){return new yr(mr.CANCELED,"User canceled the upload/download.")}function UK(t){return new yr(mr.INVALID_URL,"Invalid URL '"+t+"'.")}function FK(t){return new yr(mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function zK(){return new yr(mr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WM+"' property when initializing the app?")}function VK(){return new yr(mr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function HK(){return new yr(mr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $K(t){return new yr(mr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function X_(t){return new yr(mr.INVALID_ARGUMENT,t)}function KM(){return new yr(mr.APP_DELETED,"The Firebase app was deleted.")}function qK(t){return new yr(mr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yh(t,e){return new yr(mr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yh(t){throw new yr(mr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ji.makeFromUrl(e,r)}catch{return new ji(e,"")}if(n.path==="")return n;throw FK(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),b={bucket:1,path:3},w=r===GM?"(?:storage.googleapis.com|storage.cloud.google.com)":r,E="([^?#]*)",S=new RegExp(`^https?://${w}/${i}/${E}`,"i"),O=[{regex:l,indices:c,postModify:a},{regex:m,indices:b,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<O.length;D++){const k=O[D],B=k.regex.exec(e);if(B){const R=B[k.indices.bucket];let N=B[k.indices.path];N||(N=""),n=new ji(R,N),k.postModify(n);break}}if(n==null)throw UK(e);return n}}class GK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WK(t,e,r){let n=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let f=!1;function d(...E){f||(f=!0,e.apply(null,E))}function p(E){i=setTimeout(()=>{i=null,t(m,c())},E)}function g(){a&&clearTimeout(a)}function m(E,...S){if(f){g();return}if(E){g(),d.call(null,E,...S);return}if(c()||o){g(),d.call(null,E,...S);return}n<64&&(n*=2);let O;l===1?(l=2,O=0):O=(n+Math.random())*1e3,p(O)}let b=!1;function w(E){b||(b=!0,g(),!f&&(i!==null?(E||(l=2),clearTimeout(i),p(0)):E||(l=1)))}return p(0),a=setTimeout(()=>{o=!0,w(!0)},r),w}function KK(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XK(t){return t!==void 0}function YK(t){return typeof t=="object"&&!Array.isArray(t)}function fA(t){return typeof t=="string"||t instanceof String}function n6(t){return dA()&&t instanceof Blob}function dA(){return typeof Blob<"u"}function i6(t,e,r,n){if(n<e)throw X_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw X_(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function XM(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var Xc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xc||(Xc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QK(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e,r,n,i,a,o,l,c,f,d,p,g=!0,m=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,w)=>{this.resolve_=b,this.reject_=w,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Fg(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Xc.NO_ERROR,c=a.getStatus();if(!l||QK(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Xc.ABORT;n(!1,new Fg(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;n(!0,new Fg(f,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());XK(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=uA();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?KM():BK();o(c)}else{const c=LK();o(c)}};this.canceled_?r(!1,new Fg(!1,null,!0)):this.backoffId_=WK(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&KK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fg{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function JK(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eX(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tX(t,e){e&&(t["X-Firebase-GMPID"]=e)}function rX(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function nX(t,e,r,n,i,a,o=!0,l=!1){const c=XM(t.urlParams),f=t.url+c,d=Object.assign({},t.headers);return tX(d,e),JK(d,r),eX(d,a),rX(d,n),new ZK(f,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iX(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aX(...t){const e=iX();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(dA())return new Blob(t);throw new yr(mr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oX(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sX(t){if(typeof atob>"u")throw $K("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class D2{constructor(e,r){this.data=e,this.contentType=r||null}}function lX(t,e){switch(t){case fo.RAW:return new D2(YM(e));case fo.BASE64:case fo.BASE64URL:return new D2(QM(t,e));case fo.DATA_URL:return new D2(uX(e),fX(e))}throw uA()}function YM(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function cX(t){let e;try{e=decodeURIComponent(t)}catch{throw Yh(fo.DATA_URL,"Malformed data URL.")}return YM(e)}function QM(t,e){switch(t){case fo.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Yh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case fo.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Yh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=sX(e)}catch(i){throw i.message.includes("polyfill")?i:Yh(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class ZM{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Yh(fo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=dX(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function uX(t){const e=new ZM(t);return e.base64?QM(fo.BASE64,e.rest):cX(e.rest)}function fX(t){return new ZM(t).contentType}function dX(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,r){let n=0,i="";n6(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(n6(this.data_)){const n=this.data_,i=oX(n,e,r);return i===null?null:new bl(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new bl(n,!0)}}static getBlob(...e){if(dA()){const r=e.map(n=>n instanceof bl?n.data_:n);return new bl(aX.apply(null,r))}else{const r=e.map(o=>fA(o)?lX(fo.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)i[a++]=o[l]}),new bl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){let e;try{e=JSON.parse(t)}catch{return null}return YK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hX(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function pX(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function ek(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gX(t,e){return e}class Yn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||gX}}let zg=null;function vX(t){return!fA(t)||t.length<2?t:ek(t)}function tk(){if(zg)return zg;const t=[];t.push(new Yn("bucket")),t.push(new Yn("generation")),t.push(new Yn("metageneration")),t.push(new Yn("name","fullPath",!0));function e(a,o){return vX(o)}const r=new Yn("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const i=new Yn("size");return i.xform=n,t.push(i),t.push(new Yn("timeCreated")),t.push(new Yn("updated")),t.push(new Yn("md5Hash",null,!0)),t.push(new Yn("cacheControl",null,!0)),t.push(new Yn("contentDisposition",null,!0)),t.push(new Yn("contentEncoding",null,!0)),t.push(new Yn("contentLanguage",null,!0)),t.push(new Yn("contentType",null,!0)),t.push(new Yn("metadata","customMetadata",!0)),zg=t,zg}function mX(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new ji(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function yX(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return mX(n,t),n}function rk(t,e,r){const n=JM(e);return n===null?null:yX(t,n,r)}function xX(t,e,r,n){const i=JM(e);if(i===null||!fA(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(f=>{const d=t.bucket,p=t.fullPath,g="/b/"+o(d)+"/o/"+o(p),m=hA(g,r,n),b=XM({alt:"media",token:f});return m+b})[0]}function bX(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class nk{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){if(!t)throw uA()}function _X(t,e){function r(n,i){const a=rk(t,i,e);return ik(a!==null),a}return r}function wX(t,e){function r(n,i){const a=rk(t,i,e);return ik(a!==null),xX(a,i,t.host,t._protocol)}return r}function ak(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=kK():i=MK():r.getStatus()===402?i=NK(t.bucket):r.getStatus()===403?i=jK(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function EX(t){const e=ak(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=DK(t.path)),a.serverResponse=i.serverResponse,a}return r}function AX(t,e,r){const n=e.fullServerUrl(),i=hA(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new nk(i,a,wX(t,r),o);return l.errorHandler=EX(e),l}function SX(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function CX(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=SX(null,e)),n}function TX(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let O="";for(let D=0;D<2;D++)O=O+Math.random().toString().slice(2);return O}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const f=CX(e,n,i),d=bX(f,r),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,g=`\r
--`+c+"--",m=bl.getBlob(p,n,g);if(m===null)throw VK();const b={name:f.fullPath},w=hA(a,t.host,t._protocol),E="POST",S=t.maxUploadRetryTime,I=new nk(w,E,_X(t,r),S);return I.urlParams=b,I.headers=o,I.body=m.uploadData(),I.errorHandler=ak(e),I}class IX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i,a){if(this.sent_)throw yh("cannot .send() more than once");if(Io(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class OX extends IX{initXhr(){this.xhr_.responseType="text"}}function ok(){return new OX}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,r){this._service=e,r instanceof ji?this._location=r:this._location=ji.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new ou(e,r)}get root(){const e=new ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ek(this._location.path)}get storage(){return this._service}get parent(){const e=hX(this._location.path);if(e===null)return null;const r=new ji(this._location.bucket,e);return new ou(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw qK(e)}}function RX(t,e,r){t._throwIfRoot("uploadBytes");const n=TX(t.storage,t._location,tk(),new bl(e,!0),r);return t.storage.makeRequestWithTokens(n,ok).then(i=>({metadata:i,ref:t}))}function PX(t){t._throwIfRoot("getDownloadURL");const e=AX(t.storage,t._location,tk());return t.storage.makeRequestWithTokens(e,ok).then(r=>{if(r===null)throw HK();return r})}function DX(t,e){const r=pX(t._location.path,e),n=new ji(t._location.bucket,r);return new ou(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NX(t){return/^[A-Za-z]+:\/\//.test(t)}function MX(t,e){return new ou(t,e)}function sk(t,e){if(t instanceof pA){const r=t;if(r._bucket==null)throw zK();const n=new ou(r,r._bucket);return e!=null?sk(n,e):n}else return e!==void 0?DX(t,e):t}function kX(t,e){if(e&&NX(e)){if(t instanceof pA)return MX(t,e);throw X_("To use ref(service, url), the first argument must be a Storage instance.")}else return sk(t,e)}function a6(t,e){const r=e?.[WM];return r==null?null:ji.makeFromBucketSpec(r,t)}function jX(t,e,r,n={}){t.host=`${e}:${r}`;const i=Io(e);i&&(em(`https://${t.host}/b`),tm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:AD(a,t.app.options.projectId))}class pA{constructor(e,r,n,i,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=GM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=RK,this._maxUploadRetryTime=PK,this._requests=new Set,i!=null?this._bucket=ji.makeFromBucketSpec(i,this._host):this._bucket=a6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ji.makeFromBucketSpec(this._url,e):this._bucket=a6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i6("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i6("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ou(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new GK(KM());{const o=nX(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const o6="@firebase/storage",s6="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="storage";function gA(t,e,r){return t=Gt(t),RX(t,e,r)}function vA(t){return t=Gt(t),PX(t)}function mA(t,e){return t=Gt(t),kX(t,e)}function LX(t=rm(),e){t=Gt(t);const n=Sp(t,lk).getImmediate({identifier:e}),i=cE("storage");return i&&BX(n,...i),n}function BX(t,e,r,n={}){jX(t,e,r,n)}function UX(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new pA(r,n,i,e,pu)}function FX(){Nl(new us(lk,UX,"PUBLIC").setMultipleInstances(!0)),fa(o6,s6,""),fa(o6,s6,"esm2020")}FX();const zX={apiKey:"AIzaSyB_23qGagKyn6SqpNh1u7_EMqJWMN9MZuo",authDomain:"oshi-para.firebaseapp.com",projectId:"oshi-para",storageBucket:"oshi-para.firebasestorage.app",messagingSenderId:"123159056695",appId:"1:123159056695:web:b2226933dc6f6095220ab2"},Lp=TD(zX),Je=lK(Lp),be=Dq(Lp);$M(Lp);const Tm=LX(Lp),yA=Object.freeze(Object.defineProperty({__proto__:null,auth:Je,db:be,default:Lp,storage:Tm},Symbol.toStringTag,{value:"Module"})),Tt={INTAKES:"intakes",EXPENSES:"expenses",STOCKS:"stocks",SHOPPING:"shopping",RECIPES:"recipes",SETTINGS:"settings"},It=(t,e)=>`users/${t}/${e}`,xh={getAll:async t=>{const e=Lt(ze(be,It(t,Tt.INTAKES)),Dn("createdAt","desc"));return(await St(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await ed(ze(be,It(t,Tt.INTAKES)),e)).id,update:async(t,e,r)=>{const n=Ye(be,It(t,Tt.INTAKES),e);await Nn(n,r)},delete:async(t,e)=>{const r=Ye(be,It(t,Tt.INTAKES),e);await Bi(r)},subscribe:(t,e)=>{const r=Lt(ze(be,It(t,Tt.INTAKES)),Dn("createdAt","desc"));return td(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},N2={getAll:async t=>{const e=Lt(ze(be,It(t,Tt.EXPENSES)),Dn("createdAt","desc"));return(await St(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await ed(ze(be,It(t,Tt.EXPENSES)),e)).id,update:async(t,e,r)=>{const n=Ye(be,It(t,Tt.EXPENSES),e);await Nn(n,r)},delete:async(t,e)=>{const r=Ye(be,It(t,Tt.EXPENSES),e);await Bi(r)},subscribe:(t,e)=>{const r=Lt(ze(be,It(t,Tt.EXPENSES)),Dn("createdAt","desc"));return td(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},Vg={getAll:async t=>{const e=Lt(ze(be,It(t,Tt.STOCKS)),Dn("createdAt","desc"));return(await St(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await ed(ze(be,It(t,Tt.STOCKS)),e)).id,update:async(t,e,r)=>{const n=Ye(be,It(t,Tt.STOCKS),e);await Nn(n,r)},delete:async(t,e)=>{const r=Ye(be,It(t,Tt.STOCKS),e);await Bi(r)},subscribe:(t,e)=>{const r=Lt(ze(be,It(t,Tt.STOCKS)),Dn("createdAt","desc"));return td(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},bh={getAll:async t=>{const e=Lt(ze(be,It(t,Tt.SHOPPING)),Dn("createdAt","desc"));return(await St(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await ed(ze(be,It(t,Tt.SHOPPING)),e)).id,update:async(t,e,r)=>{const n=Ye(be,It(t,Tt.SHOPPING),e);await Nn(n,r)},delete:async(t,e)=>{const r=Ye(be,It(t,Tt.SHOPPING),e);await Bi(r)},subscribe:(t,e)=>{const r=Lt(ze(be,It(t,Tt.SHOPPING)),Dn("createdAt","desc"));return td(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},Hg={getAll:async t=>{const e=Lt(ze(be,It(t,Tt.RECIPES)),Dn("createdAt","desc"));return(await St(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await ed(ze(be,It(t,Tt.RECIPES)),e)).id,update:async(t,e,r)=>{const n=Ye(be,It(t,Tt.RECIPES),e);await Nn(n,r)},delete:async(t,e)=>{const r=Ye(be,It(t,Tt.RECIPES),e);await Bi(r)},subscribe:(t,e)=>{const r=Lt(ze(be,It(t,Tt.RECIPES)),Dn("createdAt","desc"));return td(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},$g={get:async t=>{const e=Lt(ze(be,It(t,Tt.SETTINGS))),r=await St(e);return r.empty?null:r.docs[0].data()},set:async(t,e)=>{const r=Lt(ze(be,It(t,Tt.SETTINGS))),n=await St(r);if(n.empty)return(await ed(ze(be,It(t,Tt.SETTINGS)),e)).id;{const i=Ye(be,It(t,Tt.SETTINGS),n.docs[0].id);return await Nn(i,e),n.docs[0].id}},subscribe:(t,e)=>{const r=Lt(ze(be,It(t,Tt.SETTINGS)));return td(r,n=>{if(n.empty)e(null);else{const i=n.docs[0].data();e(i)}})}},Oo=hu((t,e)=>({intakes:Dl(it.INTAKES,[]),loading:!1,initialized:!1,unsubscribe:null,setIntakes:r=>t({intakes:r}),setLoading:r=>t({loading:r}),setInitialized:r=>t({initialized:r}),addIntake:async r=>{const n=Je.currentUser,i={id:Al(),...r,date:new Date().toISOString(),createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.intakes,i];return jt(it.INTAKES,o),{intakes:o}}),n)try{await xh.add(n.uid,i)}catch(a){console.error("Failed to add intake to Firestore:",a)}},updateIntake:async(r,n)=>{const i=Je.currentUser,a={...n,updatedAt:new Date().toISOString()};if(t(o=>{const l=o.intakes.map(c=>c.id===r?{...c,...a}:c);return jt(it.INTAKES,l),{intakes:l}}),i)try{await xh.update(i.uid,r,a)}catch(o){console.error("Failed to update intake in Firestore:",o)}},deleteIntake:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.intakes.filter(o=>o.id!==r);return jt(it.INTAKES,a),{intakes:a}}),n)try{await xh.delete(n.uid,r)}catch(i){console.error("Failed to delete intake from Firestore:",i)}},getIntakesByDate:r=>e().intakes.filter(i=>i.date.startsWith(r)),getTotalCaloriesByDate:r=>e().getIntakesByDate(r).reduce((i,a)=>i+a.calories,0),getTotalPriceByDate:r=>e().getIntakesByDate(r).reduce((i,a)=>i+a.price,0),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[IntakeStore] Syncing data for user: ${r.uid}`);const n=await xh.getAll(r.uid);console.log(`[IntakeStore] Loaded ${n.length} intakes from Firestore`),t({intakes:n,loading:!1,initialized:!0}),jt(it.INTAKES,n)}catch(n){console.error("Failed to sync intakes with Firestore:",n),t({loading:!1})}},subscribeToFirestore:()=>{const r=Je.currentUser;if(!r)return;const n=e().unsubscribe;n&&n(),console.log(`[IntakeStore] Starting realtime sync for user: ${r.uid}`);const i=xh.subscribe(r.uid,a=>{console.log(`[IntakeStore] Realtime update: ${a.length} intakes`),t({intakes:a}),jt(it.INTAKES,a)});t({unsubscribe:i})},unsubscribeFromFirestore:()=>{const r=e().unsubscribe;r&&(console.log("[IntakeStore] Stopping realtime sync"),r(),t({unsubscribe:null}))}})),Ro=hu((t,e)=>({expenses:Dl(it.EXPENSES,[]),loading:!1,initialized:!1,setExpenses:r=>t({expenses:r}),addExpense:async r=>{const n=Je.currentUser,i={id:Al(),...r,date:r.date||new Date().toISOString(),createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.expenses,i];return jt(it.EXPENSES,o),{expenses:o}}),n)try{await N2.add(n.uid,i)}catch(a){console.error("Failed to add expense to Firestore:",a)}},deleteExpense:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.expenses.filter(o=>o.id!==r);return jt(it.EXPENSES,a),{expenses:a}}),n)try{await N2.delete(n.uid,r)}catch(i){console.error("Failed to delete expense from Firestore:",i)}},getExpensesByMonth:(r,n)=>e().expenses.filter(a=>{const o=new Date(a.date);return o.getFullYear()===r&&o.getMonth()+1===n}),getTotalByMonth:(r,n)=>e().getExpensesByMonth(r,n).reduce((a,o)=>a+o.amount,0),getTotalByCategory:(r,n,i)=>e().getExpensesByMonth(n,i).filter(o=>o.category===r).reduce((o,l)=>o+l.amount,0),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await N2.getAll(r.uid);t({expenses:n,loading:!1,initialized:!0}),jt(it.EXPENSES,n)}catch(n){console.error("Failed to sync expenses with Firestore:",n),t({loading:!1})}}})),Po=hu((t,e)=>({stocks:Dl(it.STOCKS,[]),loading:!1,initialized:!1,setStocks:r=>t({stocks:r}),addStock:async r=>{const n=Je.currentUser,i={id:Al(),...r,createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.stocks,i];return jt(it.STOCKS,o),{stocks:o}}),n)try{await Vg.add(n.uid,i)}catch(a){console.error("Failed to add stock to Firestore:",a)}},updateStock:async(r,n)=>{const i=Je.currentUser,a={...n,updatedAt:new Date().toISOString()};if(t(o=>{const l=o.stocks.map(c=>c.id===r?{...c,...a}:c);return jt(it.STOCKS,l),{stocks:l}}),i)try{await Vg.update(i.uid,r,a)}catch(o){console.error("Failed to update stock in Firestore:",o)}},deleteStock:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.stocks.filter(o=>o.id!==r);return jt(it.STOCKS,a),{stocks:a}}),n)try{await Vg.delete(n.uid,r)}catch(i){console.error("Failed to delete stock from Firestore:",i)}},getExpiringStocks:r=>e().stocks.filter(i=>i.daysRemaining<=r),getStockIngredients:()=>e().stocks.map(n=>n.name),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await Vg.getAll(r.uid);t({stocks:n,loading:!1,initialized:!0}),jt(it.STOCKS,n)}catch(n){console.error("Failed to sync stocks with Firestore:",n),t({loading:!1})}}})),VX=[{name:"米",quantity:1,category:"staple"},{name:"卵",quantity:10,category:"protein"},{name:"牛乳",quantity:1,category:"dairy"},{name:"パン",quantity:1,category:"staple"},{name:"鶏肉",quantity:1,category:"protein"},{name:"豚肉",quantity:1,category:"protein"},{name:"玉ねぎ",quantity:3,category:"vegetable"},{name:"にんじん",quantity:3,category:"vegetable"},{name:"じゃがいも",quantity:3,category:"vegetable"},{name:"トマト",quantity:3,category:"vegetable"},{name:"バナナ",quantity:1,category:"fruit"},{name:"ヨーグルト",quantity:1,category:"dairy"},{name:"醤油",quantity:1,category:"seasoning"},{name:"塩",quantity:1,category:"seasoning"}],mu=hu((t,e)=>({items:Dl(it.SHOPPING,[]),loading:!1,initialized:!1,setItems:r=>t({items:r}),addItem:async r=>{const n=Je.currentUser;if(e().items.find(o=>o.name===r.name&&!o.checked))return;const a={id:Al(),...r,checked:!1,createdAt:new Date().toISOString()};if(t(o=>{const l=[...o.items,a];return jt(it.SHOPPING,l),{items:l}}),n)try{await bh.add(n.uid,a)}catch(o){console.error("Failed to add shopping item to Firestore:",o)}},toggleItem:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.items.map(o=>o.id===r?{...o,checked:!o.checked,updatedAt:new Date().toISOString()}:o);return jt(it.SHOPPING,a),{items:a}}),n)try{const i=e().items.find(a=>a.id===r);i&&await bh.update(n.uid,r,{checked:i.checked,updatedAt:new Date().toISOString()})}catch(i){console.error("Failed to toggle shopping item in Firestore:",i)}},deleteItem:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.items.filter(o=>o.id!==r);return jt(it.SHOPPING,a),{items:a}}),n)try{await bh.delete(n.uid,r)}catch(i){console.error("Failed to delete shopping item from Firestore:",i)}},clearCompleted:async()=>{const r=Je.currentUser,n=e().items.filter(i=>i.checked).map(i=>i.id);if(t(i=>{const a=i.items.filter(o=>!o.checked);return jt(it.SHOPPING,a),{items:a}}),r)try{await Promise.all(n.map(i=>bh.delete(r.uid,i)))}catch(i){console.error("Failed to clear completed items from Firestore:",i)}},addWeeklyEssentials:()=>{t(r=>{const n=r.items,i=[...n];return VX.forEach(a=>{n.find(l=>l.name===a.name&&!l.checked)||i.push({id:Al(),name:a.name,quantity:a.quantity,category:a.category,checked:!1,createdAt:new Date().toISOString()})}),jt(it.SHOPPING,i),{items:i}})},addLowStockItems:r=>{t(n=>{const i=n.items,a=[...i];return r.forEach(o=>{i.find(c=>c.name===o.name&&!c.checked)||a.push({id:Al(),name:o.name,quantity:1,category:o.category,checked:!1,createdAt:new Date().toISOString()})}),jt(it.SHOPPING,a),{items:a}})},syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await bh.getAll(r.uid);t({items:n,loading:!1,initialized:!0}),jt(it.SHOPPING,n)}catch(n){console.error("Failed to sync shopping items with Firestore:",n),t({loading:!1})}}})),HX=10,Bp=hu((t,e)=>({recipeHistory:Dl(it.RECIPE_HISTORY,[]),favoriteRecipes:Dl(it.FAVORITE_RECIPES,[]),loading:!1,initialized:!1,setRecipes:(r,n)=>t({recipeHistory:r,favoriteRecipes:n}),addToHistory:async r=>{const n=Je.currentUser,i={id:Al(),recipe:r,generatedAt:new Date().toISOString()};if(t(a=>{const o=[i,...a.recipeHistory].slice(0,HX);return jt(it.RECIPE_HISTORY,o),{recipeHistory:o}}),n)try{await Hg.add(n.uid,i)}catch(a){console.error("Failed to add recipe history to Firestore:",a)}},addToFavorites:async r=>{const n=Je.currentUser;if(e().favoriteRecipes.find(o=>o.id===r.id))return;const a={...r,isFavorite:!0};if(t(o=>{const l=[a,...o.favoriteRecipes];return jt(it.FAVORITE_RECIPES,l),{favoriteRecipes:l}}),n)try{await Hg.add(n.uid,a)}catch(o){console.error("Failed to add favorite recipe to Firestore:",o)}},removeFromFavorites:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.favoriteRecipes.filter(o=>o.id!==r);return jt(it.FAVORITE_RECIPES,a),{favoriteRecipes:a}}),n)try{await Hg.delete(n.uid,r)}catch(i){console.error("Failed to delete favorite recipe from Firestore:",i)}},isFavorite:r=>e().favoriteRecipes.some(i=>i.id===r),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[RecipeStore] Syncing data for user: ${r.uid}`);const i=await Hg.getAll(r.uid),a=[];console.log(`[RecipeStore] Loaded ${i.length} recipes from Firestore`),t({recipeHistory:a,favoriteRecipes:i,loading:!1,initialized:!0}),jt(it.RECIPE_HISTORY,a),jt(it.FAVORITE_RECIPES,i)}catch(n){console.error("Failed to sync recipes with Firestore:",n),t({loading:!1})}}})),l6={monthlyBudget:3e4,darkMode:!1,firstTime:!0},tv=hu((t,e)=>({settings:{...l6,...Dl(it.SETTINGS,l6)},loading:!1,initialized:!1,updateSettings:async r=>{const n=Je.currentUser;if(t(i=>{const a={...i.settings,...r};return jt(it.SETTINGS,a),"darkMode"in r&&document.body.classList.toggle("dark-mode",r.darkMode),{settings:a}}),n)try{const i=e().settings;await $g.set(n.uid,i)}catch(i){console.error("Failed to update settings in Firestore:",i)}},toggleDarkMode:async()=>{const r=Je.currentUser,n=!e().settings.darkMode;if(t(i=>{const a={...i.settings,darkMode:n};return jt(it.SETTINGS,a),document.body.classList.toggle("dark-mode",n),{settings:a}}),r)try{const i=e().settings;await $g.set(r.uid,i)}catch(i){console.error("Failed to toggle dark mode in Firestore:",i)}},setFirstTime:r=>t(n=>{const i={...n.settings,firstTime:r};return jt(it.SETTINGS,i),{settings:i}}),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[SettingsStore] Syncing data for user: ${r.uid}`);const n=await $g.get(r.uid);if(n)console.log("[SettingsStore] Loaded settings from Firestore"),t({settings:n,loading:!1,initialized:!0}),jt(it.SETTINGS,n),document.body.classList.toggle("dark-mode",n.darkMode);else{console.log("[SettingsStore] No settings found, using defaults");const i=e().settings;await $g.set(r.uid,i),t({loading:!1,initialized:!0})}}catch(n){console.error("Failed to sync settings with Firestore:",n),t({loading:!1})}}})),rv=[{id:"streak-3",name:"3日連続記録",description:"3日間連続で食事を記録しました",icon:"🔥",category:"streak",requirement:"3日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=3},{id:"streak-7",name:"1週間継続",description:"7日間連続で食事を記録しました",icon:"🎯",category:"streak",requirement:"7日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=7},{id:"streak-14",name:"2週間チャンピオン",description:"14日間連続で食事を記録しました",icon:"🏆",category:"streak",requirement:"14日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=14},{id:"streak-30",name:"1ヶ月マスター",description:"30日間連続で食事を記録しました",icon:"👑",category:"streak",requirement:"30日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=30},{id:"milestone-10-intakes",name:"記録の第一歩",description:"食事記録が10件に達しました",icon:"📝",category:"milestone",requirement:"食事記録10件",checkCondition:t=>t.intakesCount>=10},{id:"milestone-50-intakes",name:"記録マスター",description:"食事記録が50件に達しました",icon:"📚",category:"milestone",requirement:"食事記録50件",checkCondition:t=>t.intakesCount>=50},{id:"milestone-100-intakes",name:"記録の達人",description:"食事記録が100件に達しました",icon:"🎓",category:"milestone",requirement:"食事記録100件",checkCondition:t=>t.intakesCount>=100},{id:"goal-budget-first",name:"節約家デビュー",description:"先月の支出が予算内に収まりました！",icon:"💰",category:"goal",requirement:"月次予算達成（毎月1日に先月分を判定）",checkCondition:t=>t.budgetAchieved},{id:"feature-recipe-first",name:"AIシェフデビュー",description:"初めてAIレシピを生成しました",icon:"👨‍🍳",category:"feature",requirement:"AIレシピ生成1回",checkCondition:t=>t.recipesGenerated>=1},{id:"feature-recipe-10",name:"レシピマスター",description:"AIレシピを10回生成しました",icon:"🍳",category:"feature",requirement:"AIレシピ生成10回",checkCondition:t=>t.recipesGenerated>=10},{id:"feature-barcode-first",name:"スキャナーデビュー",description:"初めてバーコードをスキャンしました",icon:"📱",category:"feature",requirement:"バーコードスキャン1回",checkCondition:t=>t.barcodesScanned>=1},{id:"feature-barcode-10",name:"スキャンマスター",description:"バーコードを10回スキャンしました",icon:"🔍",category:"feature",requirement:"バーコードスキャン10回",checkCondition:t=>t.barcodesScanned>=10},{id:"milestone-all-features",name:"フル活用マスター",description:"すべての機能を使いこなしています",icon:"⭐",category:"milestone",requirement:"全機能の使用",checkCondition:t=>t.intakesCount>=5&&t.expensesCount>=5&&t.stocksCount>=3&&t.recipesGenerated>=1&&t.barcodesScanned>=1}];function $X(t){return rv.find(e=>e.id===t)}const xA=hu((t,e)=>({badges:Dl(it.BADGES,[]),newBadges:[],loading:!1,checkAndUnlockBadges:r=>{const n=e().badges,i=n.map(o=>o.id),a=[];return rv.forEach(o=>{if(!i.includes(o.id)&&o.checkCondition(r)){const l={id:o.id,name:o.name,description:o.description,icon:o.icon,category:o.category,requirement:o.requirement,unlockedAt:new Date().toISOString()};n.push(l),a.push(o.id)}}),a.length>0&&(t({badges:n,newBadges:a}),jt(it.BADGES,n)),a},clearNewBadges:()=>{t({newBadges:[]})},getBadge:r=>e().badges.find(n=>n.id===r),isUnlocked:r=>e().badges.some(n=>n.id===r),getUnlockedCount:()=>e().badges.length,getTotalCount:()=>rv.length})),qX=()=>{const{getTotalCaloriesByDate:t}=Oo(),{getTotalByMonth:e}=Ro(),r=C.useMemo(()=>{const i=new Date().toISOString().split("T")[0];return t(i)},[t]),n=C.useMemo(()=>{const i=new Date;return e(i.getFullYear(),i.getMonth()+1)},[e]);return y.jsxs("div",{className:"summary-box",children:[y.jsxs("div",{className:"summary-row",children:[y.jsx("span",{className:"summary-label",children:"今日のカロリー"}),y.jsxs("span",{className:"summary-value",children:[r," kcal"]})]}),y.jsxs("div",{className:"summary-row",children:[y.jsx("span",{className:"summary-label",children:"今月の支出"}),y.jsxs("span",{className:"summary-value positive",children:["¥",n.toLocaleString()]})]})]})},GX=({onNavigate:t})=>{const e=[{screen:"meals",icon:y.jsx(aE,{size:32}),label:"食事記録",color:"#3b82f6"},{screen:"barcode",icon:y.jsx(Jh,{size:32}),label:"スキャン",color:"#8b5cf6"},{screen:"expense",icon:y.jsx(jF,{size:32}),label:"家計簿",color:"#10b981"},{screen:"stock",icon:y.jsx(Cf,{size:32}),label:"在庫管理",color:"#f59e0b"},{screen:"recipe",icon:y.jsx(N1,{size:32}),label:"AIレシピ",color:"#ef4444"},{screen:"shopping",icon:y.jsx(Qv,{size:32}),label:"買い物",color:"#06b6d4"},{screen:"report",icon:y.jsx(LF,{size:32}),label:"レポート",color:"#6366f1"},{screen:"badges",icon:y.jsx(HF,{size:32}),label:"バッジ",color:"#f59e0b"},{screen:"settings",icon:y.jsx(OF,{size:32}),label:"設定",color:"#64748b"}],r=n=>{n.onClick?n.onClick():n.screen&&t(n.screen)};return y.jsx("div",{className:"function-grid",children:e.map((n,i)=>y.jsxs("button",{className:"function-card",style:{"--card-color":n.color},onClick:()=>r(n),children:[y.jsx("div",{className:"function-icon",style:{color:n.color},children:n.icon}),y.jsx("div",{className:"function-label",children:n.label})]},i))})},c6=({onNavigate:t})=>y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"ホーム"}),y.jsx(qX,{}),y.jsx(GX,{onNavigate:t})]}),WX=()=>{const{addIntake:t}=Oo(),[e,r]=C.useState(""),[n,i]=C.useState(""),[a,o]=C.useState(""),l=()=>{if(!e||!n||!a){alert("すべての項目を入力してください");return}t({name:e,calories:Number(n),price:Number(a)}),r(""),i(""),o(""),alert("食事を記録しました！")};return y.jsxs("div",{className:"card",children:[y.jsx("label",{children:"食品名"}),y.jsx("input",{value:e,onChange:c=>r(c.target.value),placeholder:"例: 牛乳"}),y.jsx("label",{children:"カロリー(kcal)"}),y.jsx("input",{type:"number",value:n,onChange:c=>i(c.target.value),placeholder:"200"}),y.jsx("label",{children:"金額(円)"}),y.jsx("input",{type:"number",value:a,onChange:c=>o(c.target.value),placeholder:"150"}),y.jsx("button",{className:"submit",onClick:l,children:"記録する"})]})},KX=()=>{const{intakes:t,deleteIntake:e,getTotalCaloriesByDate:r,getTotalPriceByDate:n}=Oo(),i=C.useMemo(()=>{const f=new Date().toISOString().split("T")[0];return t.filter(d=>d.date.startsWith(f))},[t]),a=new Date().toISOString().split("T")[0],o=r(a),l=n(a),c=f=>{confirm("この記録を削除しますか？")&&e(f)};return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"今日の記録"}),i.length===0?y.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"まだ記録がありません"}):y.jsxs(y.Fragment,{children:[y.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:i.map(f=>y.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[y.jsxs("div",{style:{flex:1},children:[y.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:f.name}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[f.calories," kcal · ¥",f.price]})]}),y.jsx("button",{onClick:()=>c(f.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},children:y.jsx(Kf,{size:20})})]},f.id))}),y.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--card)",borderRadius:"8px",display:"flex",justifyContent:"space-between"},children:[y.jsxs("span",{children:[y.jsx("strong",{children:"合計カロリー:"})," ",o," kcal"]}),y.jsxs("span",{children:[y.jsx("strong",{children:"合計金額:"})," ¥",l]})]})]})]})},XX=()=>y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"食事記録"}),y.jsx(WX,{}),y.jsx(KX,{})]}),YX=async(t,e)=>{try{return{user:(await GG(Je,t,e)).user,error:null}}catch(r){return{user:null,error:r.message}}},QX=async()=>{const t=new Zo;try{return{user:(await mW(Je,t)).user,error:null}}catch(e){return{user:null,error:e.message}}},ZX=async()=>{try{return await QG(Je),localStorage.clear(),{error:null}}catch(t){return{error:t.message}}},JX=t=>YG(Je,t),ws=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!0);return C.useEffect(()=>{const i=JX(a=>{e(a),n(!1)});return()=>i()},[]),{user:t,loading:r}},bA=async(t,e,r)=>{try{const n={uid:t,displayName:r,username:`user${t.slice(0,8)}`,email:e,bio:"",avatarUrl:"",coverUrl:"",websiteUrl:"",isPublic:!0,createdAt:new Date().toISOString(),stats:{postCount:0,followerCount:0,followingCount:0,recipeCount:0,likeCount:0}};console.log("📝 Creating user profile for:",t),console.log("📝 Profile data:",n);const i=Ye(be,"users",t,"profile","data");console.log("📝 Profile document path:",i.path),await Xl(i,n),console.log("✅ User profile created successfully:",t)}catch(n){throw console.error("❌ Failed to create user profile:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),console.error("Error details:",JSON.stringify(n,null,2)),new Error(`プロフィール作成に失敗しました: ${n.message||n.code||"不明なエラー"}`)}},ga=async t=>{try{const e=await Fa(Ye(be,"users",t,"profile","data"));return e.exists()?e.data():null}catch(e){throw console.error("Get profile error:",e),new Error("プロフィールの取得に失敗しました")}},eY=async(t,e)=>{try{await Nn(Ye(be,"users",t,"profile","data"),e),e.displayName&&Je.currentUser&&await OM(Je.currentUser,{displayName:e.displayName,photoURL:e.avatarUrl||Je.currentUser.photoURL}),console.log("✅ Profile updated:",t)}catch(r){throw console.error("Update profile error:",r),new Error("プロフィールの更新に失敗しました")}},tY=async(t,e)=>{try{const r=ze(be,"users"),n=Lt(r),i=await St(n);for(const a of i.docs){if(a.id===e)continue;const o=Ye(be,"users",a.id,"profile","data");try{const l=await Fa(o);if(l.exists()&&l.data().username===t)return!1}catch{console.log(`No profile for user ${a.id}`)}}return!0}catch(r){return console.error("Username check error:",r),!0}},rY=t=>t.length<3||t.length>20?{valid:!1,error:"ユーザー名は3〜20文字で入力してください"}:/^[a-zA-Z0-9_]+$/.test(t)?/^[a-zA-Z]/.test(t)?{valid:!0}:{valid:!1,error:"ユーザー名は英字で始める必要があります"}:{valid:!1,error:"ユーザー名は英数字とアンダースコア(_)のみ使用できます"},nY=async t=>{try{const e=ze(be,"users"),r=await St(e);for(const n of r.docs){const i=Ye(be,"users",n.id,"profile","data"),a=await Fa(i);if(a.exists()){const o=a.data();if(o.username.toLowerCase()===t.toLowerCase())return o.uid}}return null}catch(e){return console.error("Get user ID by username error:",e),null}},_A=async(t,e,r,n,i)=>{try{const a=Ye(ze(be,`users/${n}/followers`)),o={id:a.id,followerId:t,followerName:e,followerAvatar:r,followingId:n,followingName:i,createdAt:new Date().toISOString()};await Xl(a,o);const l=Ye(be,`users/${t}/profile/data`);(await Fa(l)).exists()&&await Nn(l,{"stats.followingCount":Eo(1)});const f=Ye(be,`users/${n}/profile/data`);(await Fa(f)).exists()&&await Nn(f,{"stats.followerCount":Eo(1)}),console.log(`✅ ${t} followed ${n}`)}catch(a){throw console.error("Follow error:",a),a}},wA=async(t,e)=>{try{const r=ze(be,`users/${e}/followers`),n=await St(r);for(const c of n.docs)c.data().followerId===t&&await Bi(c.ref);const i=Ye(be,`users/${t}/profile/data`);(await Fa(i)).exists()&&await Nn(i,{"stats.followingCount":Eo(-1)});const o=Ye(be,`users/${e}/profile/data`);(await Fa(o)).exists()&&await Nn(o,{"stats.followerCount":Eo(-1)}),console.log(`✅ ${t} unfollowed ${e}`)}catch(r){throw console.error("Unfollow error:",r),r}},EA=async(t,e)=>{try{const r=ze(be,`users/${e}/followers`),n=await St(r);for(const i of n.docs)if(i.data().followerId===t)return!0;return!1}catch(r){return console.error("Check follow error:",r),!1}},iY=async t=>{try{const e=ze(be,`users/${t}/followers`),r=await St(e),n=[],i=Je.currentUser;for(const a of r.docs){const o=a.data(),l=await ga(o.followerId);if(l){let c=!1;i&&i.uid!==t&&(c=await EA(i.uid,o.followerId)),n.push({uid:l.uid,displayName:l.displayName,username:l.username,avatarUrl:l.avatarUrl,bio:l.bio,isFollowing:c})}}return n.sort((a,o)=>a.displayName.localeCompare(o.displayName))}catch(e){return console.error("Get followers error:",e),[]}},ck=async t=>{try{const e=ze(be,"users"),r=await St(e),n=[],i=Je.currentUser;for(const a of r.docs){const o=ze(be,`users/${a.id}/followers`),l=await St(o);for(const c of l.docs)if(c.data().followerId===t){const d=await ga(a.id);if(d){let p=!1;i&&i.uid!==t&&(p=await EA(i.uid,d.uid)),n.push({uid:d.uid,displayName:d.displayName,username:d.username,avatarUrl:d.avatarUrl,bio:d.bio,isFollowing:p})}}}return n.sort((a,o)=>a.displayName.localeCompare(o.displayName))}catch(e){return console.error("Get following error:",e),[]}},AA=(t,e,r)=>new Promise((n,i)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=o=>{const l=new Image;l.src=o.target?.result,l.onload=()=>{const c=document.createElement("canvas");let f=l.width,d=l.height;f>d?f>e&&(d=d*e/f,f=e):d>r&&(f=f*r/d,d=r),c.width=f,c.height=d,c.getContext("2d")?.drawImage(l,0,0,f,d),c.toBlob(g=>{g?n(g):i(new Error("画像のリサイズに失敗しました"))},t.type)},l.onerror=()=>i(new Error("画像の読み込みに失敗しました"))},a.onerror=()=>i(new Error("ファイルの読み込みに失敗しました"))}),aY=async(t,e)=>{try{const r=await AA(e,512,512),n=mA(Tm,`avatars/${t}/${Date.now()}_avatar.jpg`);await gA(n,r);const i=await vA(n);return console.log("✅ Avatar uploaded:",i),i}catch(r){throw console.error("Avatar upload error:",r),new Error("プロフィール画像のアップロードに失敗しました")}},oY=async(t,e)=>{try{const r=await AA(e,1200,400),n=mA(Tm,`covers/${t}/${Date.now()}_cover.jpg`);await gA(n,r);const i=await vA(n);return console.log("✅ Cover uploaded:",i),i}catch(r){throw console.error("Cover upload error:",r),new Error("カバー画像のアップロードに失敗しました")}},sY=async(t,e)=>{try{const r=await AA(e,1080,1080),n=mA(Tm,`posts/${t}/${Date.now()}_${e.name}`);await gA(n,r);const i=await vA(n);return console.log("✅ Post image uploaded:",i),i}catch(r){throw console.error("Post image upload error:",r),new Error("投稿画像のアップロードに失敗しました")}},u6=t=>t.size>10485760?{valid:!1,error:"画像サイズは10MB以下にしてください"}:["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)?{valid:!0}:{valid:!1,error:"対応している画像形式: JPEG, PNG, GIF, WebP"},lY=({onBack:t})=>{const[e,r]=C.useState(null),[n,i]=C.useState(""),[a,o]=C.useState(""),[l,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(!0),[m,b]=C.useState(""),[w,E]=C.useState(""),[S,I]=C.useState(!1),[O,D]=C.useState(!1),[k,B]=C.useState(!1),[R,N]=C.useState(""),[L,U]=C.useState(""),z=C.useRef(null),H=C.useRef(null);C.useEffect(()=>{j()},[]);const j=async()=>{try{const re=Je.currentUser;if(!re)return;const he=await ga(re.uid);he&&(r(he),i(he.displayName),o(he.username),c(he.bio||""),d(he.websiteUrl||""),g(he.isPublic),b(he.avatarUrl||""),E(he.coverUrl||""))}catch(re){console.error("Load profile error:",re),N("プロフィールの読み込みに失敗しました")}},ue=async re=>{const he=re.target.files?.[0];if(!he)return;const Ae=u6(he);if(!Ae.valid){N(Ae.error||"");return}D(!0),N("");try{const ke=Je.currentUser;if(!ke)throw new Error("ログインが必要です");const G=await aY(ke.uid,he);b(G),U("アイコン画像をアップロードしました")}catch(ke){console.error("Avatar upload error:",ke),N(ke.message||"アイコン画像のアップロードに失敗しました")}finally{D(!1)}},ye=async re=>{const he=re.target.files?.[0];if(!he)return;const Ae=u6(he);if(!Ae.valid){N(Ae.error||"");return}B(!0),N("");try{const ke=Je.currentUser;if(!ke)throw new Error("ログインが必要です");const G=await oY(ke.uid,he);E(G),U("カバー画像をアップロードしました")}catch(ke){console.error("Cover upload error:",ke),N(ke.message||"カバー画像のアップロードに失敗しました")}finally{B(!1)}},X=async()=>{N(""),U(""),I(!0);try{const re=Je.currentUser;if(!re)throw new Error("ログインが必要です");if(!n.trim()){N("表示名を入力してください"),I(!1);return}const he=rY(a);if(!he.valid){N(he.error||""),I(!1);return}if(a!==e?.username&&!await tY(a,re.uid)){N("このユーザー名は既に使用されています"),I(!1);return}await eY(re.uid,{displayName:n.trim(),username:a,bio:l.trim(),websiteUrl:f.trim(),isPublic:p,avatarUrl:m,coverUrl:w}),U("プロフィールを更新しました！"),setTimeout(()=>U(""),3e3)}catch(re){console.error("Save profile error:",re),N(re.message||"プロフィールの更新に失敗しました")}finally{I(!1)}};return y.jsxs("div",{className:"profile-edit-screen",children:[y.jsxs("div",{className:"profile-edit-header",children:[y.jsxs("button",{onClick:t,className:"back-button",children:[y.jsx(wp,{})," 戻る"]}),y.jsx("h2",{children:"プロフィール編集"}),y.jsxs("button",{onClick:X,className:"save-button",disabled:S,children:[y.jsx(iE,{})," ",S?"保存中...":"保存"]})]}),R&&y.jsx("div",{className:"error-message",children:R}),L&&y.jsx("div",{className:"success-message",children:L}),y.jsx("div",{className:"cover-section",children:y.jsxs("div",{className:"cover-image",style:{backgroundImage:w?`url(${w})`:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)"},children:[y.jsxs("button",{onClick:()=>H.current?.click(),className:"cover-upload-button",disabled:k,children:[y.jsx(Jh,{})," ",k?"アップロード中...":"カバー画像を変更"]}),y.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:ye,style:{display:"none"}})]})}),y.jsx("div",{className:"avatar-section",children:y.jsxs("div",{className:"avatar-image",children:[m?y.jsx("img",{src:m,alt:"Avatar"}):y.jsx("div",{className:"avatar-placeholder",children:y.jsx(Tf,{size:60})}),y.jsx("button",{onClick:()=>z.current?.click(),className:"avatar-upload-button",disabled:O,children:y.jsx(Jh,{})}),y.jsx("input",{ref:z,type:"file",accept:"image/*",onChange:ue,style:{display:"none"}})]})}),y.jsxs("div",{className:"profile-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(Tf,{})," 表示名"]}),y.jsx("input",{type:"text",value:n,onChange:re=>i(re.target.value),placeholder:"山田太郎",maxLength:50}),y.jsxs("span",{className:"char-count",children:[n.length,"/50"]})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(Zv,{})," ユーザー名"]}),y.jsxs("div",{className:"username-input",children:[y.jsx("span",{className:"username-prefix",children:"@"}),y.jsx("input",{type:"text",value:a,onChange:re=>o(re.target.value.toLowerCase()),placeholder:"yamada_taro",maxLength:20})]}),y.jsx("span",{className:"hint",children:"英数字とアンダースコア（_）のみ使用可能"})]}),y.jsxs("div",{className:"form-group",children:[y.jsx("label",{children:"自己紹介"}),y.jsx("textarea",{value:l,onChange:re=>c(re.target.value),placeholder:"あなたについて教えてください...",maxLength:200,rows:4}),y.jsxs("span",{className:"char-count",children:[l.length,"/200"]})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(dD,{})," WebサイトURL"]}),y.jsx("input",{type:"url",value:f,onChange:re=>d(re.target.value),placeholder:"https://example.com"})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{className:"toggle-label",children:[p?y.jsx(vD,{}):y.jsx(El,{}),"プロフィールを公開する",y.jsx("input",{type:"checkbox",checked:p,onChange:re=>g(re.target.checked),className:"toggle-switch"})]}),y.jsx("span",{className:"hint",children:p?"誰でもあなたのプロフィールを閲覧できます":"フォロワーのみプロフィールを閲覧できます"})]})]}),y.jsx("style",{children:`
        .profile-edit-screen {
          min-height: 100vh;
          background: var(--background);
          padding-bottom: 80px;
        }

        .profile-edit-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 16px;
          background: var(--card);
          border-bottom: 1px solid var(--border);
          position: sticky;
          top: 0;
          z-index: 10;
        }

        .profile-edit-header h2 {
          color: var(--text);
          font-size: 20px;
          margin: 0;
        }

        .back-button,
        .save-button {
          padding: 8px 16px;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button {
          background: var(--background);
          color: var(--text);
        }

        .back-button:hover {
          background: var(--border);
        }

        .save-button {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
        }

        .save-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .save-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .error-message {
          margin: 16px;
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .success-message {
          margin: 16px;
          padding: 12px;
          background: #e8f5e9;
          color: #2e7d32;
          border-radius: 8px;
          font-size: 14px;
        }

        body.dark-mode .success-message {
          background: #1b5e20;
          color: #a5d6a7;
        }

        .cover-section {
          position: relative;
        }

        .cover-image {
          width: 100%;
          height: 200px;
          background-size: cover;
          background-position: center;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .cover-upload-button {
          padding: 10px 20px;
          background: rgba(0, 0, 0, 0.6);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .cover-upload-button:hover:not(:disabled) {
          background: rgba(0, 0, 0, 0.8);
        }

        .cover-upload-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .avatar-section {
          display: flex;
          justify-content: center;
          margin-top: -60px;
          padding: 0 16px;
        }

        .avatar-image {
          position: relative;
          width: 120px;
          height: 120px;
          border-radius: 50%;
          border: 4px solid var(--card);
          background: var(--background);
          overflow: hidden;
        }

        .avatar-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .avatar-placeholder {
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          background: var(--border);
        }

        .avatar-upload-button {
          position: absolute;
          bottom: 0;
          right: 0;
          width: 36px;
          height: 36px;
          border-radius: 50%;
          background: var(--primary);
          color: white;
          border: 2px solid var(--card);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all 0.3s;
        }

        .avatar-upload-button:hover:not(:disabled) {
          transform: scale(1.1);
        }

        .avatar-upload-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .profile-form {
          padding: 32px 16px;
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input,
        .form-group textarea {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .form-group textarea {
          resize: vertical;
          font-family: inherit;
        }

        .username-input {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .username-prefix {
          color: var(--text-secondary);
          font-size: 16px;
          font-weight: 500;
        }

        .username-input input {
          flex: 1;
        }

        .char-count,
        .hint {
          color: var(--text-secondary);
          font-size: 12px;
        }

        .toggle-label {
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
        }

        .toggle-switch {
          margin-left: auto;
          width: 50px;
          height: 26px;
          appearance: none;
          background: var(--border);
          border-radius: 13px;
          position: relative;
          cursor: pointer;
          transition: background 0.3s;
        }

        .toggle-switch:checked {
          background: var(--primary);
        }

        .toggle-switch::before {
          content: '';
          position: absolute;
          width: 22px;
          height: 22px;
          border-radius: 50%;
          background: white;
          top: 2px;
          left: 2px;
          transition: transform 0.3s;
        }

        .toggle-switch:checked::before {
          transform: translateX(24px);
        }

        @media (max-width: 480px) {
          .cover-image {
            height: 150px;
          }

          .avatar-image {
            width: 100px;
            height: 100px;
          }

          .profile-form {
            padding: 24px 12px;
          }
        }
      `})]})},cY=()=>{const{settings:t,updateSettings:e,toggleDarkMode:r}=tv(),{intakes:n}=Oo(),{expenses:i}=Ro(),{stocks:a}=Po(),{user:o}=ws(),[l,c]=C.useState((t.monthlyBudget??3e4).toString()),[f,d]=C.useState(!1),p=()=>{e({monthlyBudget:Number(l)}),alert("設定を保存しました！")},g=()=>{const w=["種類,名前,カロリー,金額,日付",...n.map(I=>`食事記録,${I.name},${I.calories},${I.price},${I.date}`)].join(`
`),E=new Blob([w],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(E),S.download=`健康家計アプリ_${new Date().toISOString().split("T")[0]}.csv`,S.click()},m=()=>{const w={intakes:n,expenses:i,stocks:a,settings:t,exportedAt:new Date().toISOString()},E=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),S=document.createElement("a");S.href=URL.createObjectURL(E),S.download=`健康家計アプリ_${new Date().toISOString().split("T")[0]}.json`,S.click()},b=async()=>{if(window.confirm("ログアウトしますか？")){const w=await ZX();w.error&&alert("ログアウトに失敗しました: "+w.error)}};return f?y.jsx(lY,{onBack:()=>d(!1)}):y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"設定"}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"プロフィール"}),y.jsxs("button",{className:"profile-edit-button",onClick:()=>d(!0),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px 16px",background:"var(--background)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s",marginBottom:"12px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[y.jsx(Tf,{size:24,color:"var(--primary)"}),y.jsx("span",{style:{color:"var(--text)",fontSize:"16px",fontWeight:"500"},children:"プロフィールを編集"})]}),y.jsx(oE,{size:24,color:"var(--text-secondary)"})]}),y.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",margin:"0"},children:"アイコン、名前、自己紹介などを編集"})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"月間予算"}),y.jsx("input",{type:"number",value:l,onChange:w=>c(w.target.value),placeholder:"30000"}),y.jsxs("button",{className:"submit",onClick:p,children:[y.jsx(iE,{size:18,style:{marginRight:"8px"}}),"保存"]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"外観"}),y.jsxs("div",{className:"setting-item",children:[y.jsxs("div",{className:"setting-item-left",children:[y.jsx("div",{className:"setting-icon",children:y.jsx(kF,{size:24})}),y.jsx("span",{className:"setting-label",children:"ダークモード"})]}),y.jsxs("label",{className:"toggle-switch",children:[y.jsx("input",{type:"checkbox",checked:t.darkMode,onChange:r}),y.jsx("span",{className:"toggle-slider"})]})]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"データエクスポート"}),y.jsxs("div",{style:{display:"flex",gap:"8px"},children:[y.jsxs("button",{className:"submit",onClick:g,style:{flex:1},children:[y.jsx(EF,{size:18,style:{marginRight:"8px"}}),"CSV"]}),y.jsxs("button",{className:"submit",onClick:m,style:{flex:1},children:[y.jsx(wF,{size:18,style:{marginRight:"8px"}}),"JSON"]})]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"データ統計"}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)"},children:[y.jsxs("p",{children:["食事記録: ",n.length,"件"]}),y.jsxs("p",{children:["支出記録: ",i.length,"件"]}),y.jsxs("p",{children:["在庫アイテム: ",a.length,"件"]})]})]}),y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"アカウント"}),y.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)",marginBottom:"12px"},children:y.jsxs("p",{children:["ログイン: ",o?.email]})}),y.jsxs("button",{className:"submit",onClick:b,style:{background:"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)",width:"100%"},children:[y.jsx(IF,{size:18,style:{marginRight:"8px"}}),"ログアウト"]})]})]})},uY=()=>{const{addStock:t}=Po(),[e,r]=C.useState(""),[n,i]=C.useState(""),[a,o]=C.useState("1"),l=()=>{if(!e||!n){alert("品目名と残り日数を入力してください");return}t({name:e,daysRemaining:Number(n),quantity:Number(a)}),r(""),i(""),o("1"),alert("在庫を追加しました！")};return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"手動で追加"}),y.jsx("label",{children:"品目"}),y.jsx("input",{value:e,onChange:c=>r(c.target.value),placeholder:"例: 牛乳"}),y.jsx("label",{children:"残り日数"}),y.jsx("input",{type:"number",value:n,onChange:c=>i(c.target.value),placeholder:"例: 3"}),y.jsx("label",{children:"数量"}),y.jsx("input",{type:"number",value:a,onChange:c=>o(c.target.value),placeholder:"1"}),y.jsx("button",{className:"submit",onClick:l,children:"在庫に登録"})]})},fY=()=>{const{stocks:t,deleteStock:e}=Po(),{addItem:r}=mu(),n=l=>{confirm("この在庫を削除しますか？")&&e(l)},i=(l,c)=>{r({name:l,quantity:c}),alert(`「${l}」を買い物リストに追加しました！`)},a=l=>l<=0?"#ef4444":l<=1?"#f59e0b":l<=3?"#eab308":"#10b981",o=l=>l<=0?"期限切れ！":l===1?"明日期限":`残り${l}日`;return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"在庫一覧"}),t.length===0?y.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"在庫がありません"}):y.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:t.map(l=>y.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[y.jsxs("div",{style:{flex:1},children:[y.jsxs("div",{style:{fontWeight:500,marginBottom:"4px"},children:[l.name,l.quantity>1&&y.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"8px"},children:["x",l.quantity]})]}),y.jsx("div",{style:{fontSize:"0.85rem",color:a(l.daysRemaining),fontWeight:600},children:o(l.daysRemaining)})]}),y.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[y.jsx("button",{onClick:()=>i(l.name,l.quantity),className:"delete-btn",style:{background:"transparent",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"18px"},title:"買い物リストに追加",children:y.jsx(Qv,{size:20})}),y.jsx("button",{onClick:()=>n(l.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},title:"削除",children:y.jsx(Kf,{size:20})})]})]},l.id))})]})},dY=()=>{const{getExpiringStocks:t}=Po(),{addItem:e}=mu(),r=C.useMemo(()=>t(0),[t]),n=C.useMemo(()=>t(1),[t]),i=()=>{const a=[...r,...n];a.length!==0&&confirm(`期限切れ間近の商品 ${a.length}個を買い物リストに追加しますか？`)&&(a.forEach(o=>{e({name:o.name,quantity:o.quantity})}),alert(`${a.length}個の商品を買い物リストに追加しました！`))};return r.length===0&&n.length===0?null:y.jsxs(y.Fragment,{children:[r.length>0&&y.jsxs("div",{className:"card",style:{background:"#fee2e2",borderLeft:"4px solid #ef4444",color:"#991b1b"},children:[y.jsx("h3",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:"🚨 今日使うべき食材"}),y.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:r.map(a=>y.jsx("li",{children:a.name},a.id))})]}),n.length>0&&y.jsxs("div",{className:"card",style:{background:"#fef3c7",borderLeft:"4px solid #f59e0b",color:"#92400e"},children:[y.jsx("h3",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:"⏰ 明日期限切れ"}),y.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:n.map(a=>y.jsx("li",{children:a.name},a.id))})]}),y.jsx("div",{className:"card",style:{padding:"12px"},children:y.jsxs("button",{onClick:i,className:"submit",style:{background:"#3b82f6",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px"},children:[y.jsx(Qv,{size:20}),"期限切れ間近の商品を買い物リストに追加"]})})]})},hY=()=>y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"在庫管理"}),y.jsx(dY,{}),y.jsx(uY,{}),y.jsx(fY,{})]}),pY=()=>{const{addWeeklyEssentials:t,addLowStockItems:e}=mu(),{getExpiringStocks:r}=Po(),n=()=>{t(),alert("1週間分の買い物リストを追加しました！")},i=()=>{const a=r(2);if(a.length===0){alert("在庫が少ない商品はありません");return}e(a.map(o=>({name:o.name,category:o.category}))),alert(`${a.length}件の商品を追加しました！`)};return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"🔰 初心者向けサポート"}),y.jsx("button",{className:"submit",onClick:n,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",marginBottom:"8px"},children:"📅 1週間分の買い物リストを生成"}),y.jsx("button",{className:"submit",onClick:i,style:{background:"linear-gradient(135deg, #f59e0b, #d97706)"},children:"⚠️ 在庫が少ない商品を追加"})]})},gY=[{keywords:["ポテトチップス","チップス","スナック菓子","かっぱえびせん","ドリトス"],category:"スナック菓子",reason:"高カロリー・高脂質で、塩分も多く含まれています。",alternatives:["素焼きアーモンド","無塩ミックスナッツ","焼き野菜チップス","ドライフルーツ"]},{keywords:["コーラ","サイダー","炭酸飲料","ファンタ","ペプシ","ソーダ"],category:"清涼飲料水",reason:"糖分が非常に多く、虫歯や肥満の原因になります。",alternatives:["炭酸水","無糖の紅茶","麦茶","フレーバーウォーター（無糖）"]},{keywords:["カップラーメン","カップ麺","インスタントラーメン","カップ焼きそば"],category:"インスタント食品",reason:"塩分・脂質が多く、栄養バランスが偏りがちです。",alternatives:["生麺","冷凍うどん","乾麺（そば・パスタ）","低塩分インスタント麺"]},{keywords:["チョコレート","チョコ","ポッキー","きのこの山","たけのこの里"],category:"チョコレート菓子",reason:"糖分・脂質が多く、カロリーが高めです。",alternatives:["高カカオチョコレート（カカオ70%以上）","ドライフルーツ","ナッツ"]},{keywords:["唐揚げ","フライドチキン","とんかつ","天ぷら","フライドポテト","コロッケ"],category:"揚げ物",reason:"高カロリー・高脂質で、酸化した油が健康に悪影響を及ぼす可能性があります。",alternatives:["グリルチキン","蒸し鶏","焼き魚","ノンフライ調理品"]},{keywords:["ハンバーガー","ピザ","フライドポテト","ドーナツ"],category:"ファストフード",reason:"高カロリー・高脂質・高塩分で、栄養バランスが偏ります。",alternatives:["サンドイッチ（全粒粉パン）","サラダラップ","手作りピザ（薄皮）"]},{keywords:["アイスクリーム","アイス","ジェラート","ソフトクリーム"],category:"アイスクリーム",reason:"糖分・脂質が多く、食べ過ぎは肥満の原因になります。",alternatives:["フローズンヨーグルト","シャーベット","果物（冷凍）","低脂肪アイス"]},{keywords:["ケーキ","シュークリーム","ドーナツ","タルト","パウンドケーキ"],category:"洋菓子",reason:"糖分・脂質が非常に多く、カロリーが高いです。",alternatives:["和菓子（どら焼き、大福）","フルーツ","ヨーグルト","低糖質スイーツ"]},{keywords:["ベーコン","ソーセージ","ハム","サラミ","ウインナー"],category:"加工肉",reason:"塩分・添加物が多く、WHO（世界保健機関）が発がん性を指摘しています。",alternatives:["生肉（鶏むね肉、豚ヒレ肉）","魚","豆腐","納豆"]},{keywords:["エナジードリンク","レッドブル","モンスター","リアルゴールド"],category:"エナジードリンク",reason:"カフェイン・糖分が多く、心臓への負担や不眠の原因になります。",alternatives:["ブラックコーヒー","緑茶","麦茶","スポーツドリンク（無糖）"]},{keywords:["缶詰","缶コーン","缶ピーチ","フルーツ缶"],category:"缶詰（シロップ漬け）",reason:"シロップに糖分が多く含まれています。",alternatives:["生のフルーツ","冷凍フルーツ","水煮缶","ドライフルーツ"]},{keywords:["マヨネーズ","マーガリン","バター","ラード"],category:"高脂質調味料",reason:"脂質・カロリーが非常に高く、使いすぎは肥満の原因になります。",alternatives:["オリーブオイル","ごま油（少量）","低脂肪マヨネーズ","酢","レモン汁"]}];function vY(t){const e=t.toLowerCase();for(const r of gY)for(const n of r.keywords)if(e.includes(n.toLowerCase()))return{type:"warning",category:r.category,reason:r.reason,alternatives:r.alternatives};return null}async function mY(t,e){try{const r=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`「${t}」という商品の健康面での懸念点を分析し、より健康的な代替案を3つ提案してください。

以下のJSON形式で回答してください：
{
  "category": "商品カテゴリ",
  "reason": "健康面での懸念点（簡潔に）",
  "alternatives": ["代替案1", "代替案2", "代替案3"]
}

懸念点がない場合は null を返してください。`}]}]})});if(!r.ok)throw new Error("AI分析に失敗しました");const i=(await r.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!i)return null;const a=i.match(/\{[\s\S]*\}/);if(!a)return null;const o=JSON.parse(a[0]);return!o||o===null?null:{type:"warning",category:o.category||"不明",reason:o.reason||"",alternatives:o.alternatives||[]}}catch(r){return console.error("AI健康分析エラー:",r),null}}const yY=({productName:t,warning:e,onClose:r,onAddAlternative:n,onContinueAnyway:i})=>{const[a,o]=C.useState(!1),[l,c]=C.useState(null),[f,d]=C.useState(!1),p=async()=>{d(!0);const b=await mY(t,"AIzaSyBSqmtDaNAqF09NTYYKQsTKm-3fLl1LMr0");c(b),o(!0),d(!1)},g=a&&l?l:e;return y.jsx("div",{className:"modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:r,children:y.jsxs("div",{className:"modal-content",style:{background:"var(--card)",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"100%",maxHeight:"80vh",overflowY:"auto",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},onClick:m=>m.stopPropagation(),children:[y.jsx("button",{onClick:r,style:{position:"absolute",top:"16px",right:"16px",background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text-secondary)"},children:y.jsx(cs,{size:24})}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[y.jsx(uD,{size:32,color:"#f59e0b"}),y.jsx("h3",{style:{margin:0,fontSize:"1.25rem"},children:"健康アドバイス"})]}),y.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-secondary)"},children:["「",y.jsx("strong",{children:t}),"」について"]})]}),y.jsxs("div",{style:{background:"#fef3c7",padding:"16px",borderRadius:"12px",marginBottom:"20px",borderLeft:"4px solid #f59e0b"},children:[y.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1rem",color:"#92400e"},children:["📊 カテゴリ: ",g.category]}),y.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#78350f",lineHeight:"1.6"},children:g.reason})]}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(CF,{size:20,color:"#10b981"}),"より健康的な代替案"]}),y.jsx("div",{style:{display:"grid",gap:"8px"},children:g.alternatives.map((m,b)=>y.jsxs("button",{onClick:()=>n(m),style:{background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"8px",padding:"12px",cursor:"pointer",textAlign:"left",fontSize:"0.9rem",color:"#15803d",fontWeight:500,transition:"all 0.2s"},onMouseEnter:w=>{w.currentTarget.style.background="#dcfce7",w.currentTarget.style.transform="translateX(4px)"},onMouseLeave:w=>{w.currentTarget.style.background="#f0fdf4",w.currentTarget.style.transform="translateX(0)"},children:["✓ ",m]},b))})]}),!a&&y.jsxs("button",{onClick:p,disabled:f,style:{width:"100%",padding:"12px",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"white",border:"none",borderRadius:"8px",cursor:f?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:600,marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:f?.6:1},children:[y.jsx(D1,{size:20}),f?"AI分析中...":"AIで詳しく分析する"]}),y.jsxs("div",{style:{display:"grid",gap:"8px"},children:[y.jsx("button",{onClick:i,style:{padding:"12px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:"このまま追加する"}),y.jsx("button",{onClick:r,style:{padding:"12px",background:"transparent",color:"var(--text-secondary)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"キャンセル"})]})]})})},xY=()=>{const{addItem:t}=mu(),[e,r]=C.useState(""),[n,i]=C.useState("1"),[a,o]=C.useState(null),[l,c]=C.useState(null),f=()=>{if(!e){alert("商品名を入力してください");return}const b=vY(e);if(b){o(b),c({name:e,quantity:Number(n)});return}d(e,Number(n))},d=(b,w)=>{t({name:b,quantity:w}),r(""),i("1")},p=()=>{o(null),c(null)},g=b=>{l&&d(b,l.quantity),p()},m=()=>{l&&d(l.name,l.quantity),p()};return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"手動で追加"}),y.jsx("label",{children:"商品名"}),y.jsx("input",{value:e,onChange:b=>r(b.target.value),placeholder:"例: 牛乳",onKeyDown:b=>b.key==="Enter"&&f()}),y.jsx("label",{children:"数量"}),y.jsx("input",{type:"number",value:n,onChange:b=>i(b.target.value),placeholder:"1"}),y.jsx("button",{className:"submit",onClick:f,children:"リストに追加"})]}),a&&l&&y.jsx(yY,{productName:l.name,warning:a,onClose:p,onAddAlternative:g,onContinueAnyway:m})]})},bY=()=>{const{items:t,toggleItem:e,deleteItem:r,clearCompleted:n}=mu(),{addStock:i}=Po(),[a,o]=C.useState(!1),l=()=>{confirm("チェック済みのアイテムをすべて削除しますか？")&&n()},c=()=>{const f=t.filter(d=>d.checked);if(f.length===0){alert("チェック済みのアイテムがありません");return}confirm(`チェック済みのアイテム ${f.length}個を在庫に追加しますか？
（賞味期限は7日後に設定されます）`)&&(f.forEach(d=>{i({name:d.name,quantity:d.quantity,daysRemaining:7})}),n(),o(!0),setTimeout(()=>{o(!1)},3e3))};return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"買い物リスト"}),t.length===0?y.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"リストが空です"}):y.jsxs(y.Fragment,{children:[y.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:t.map(f=>y.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[y.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[y.jsx("input",{type:"checkbox",checked:f.checked,onChange:()=>e(f.id),style:{width:"18px",height:"18px"}}),y.jsx("div",{style:{flex:1},children:y.jsxs("div",{style:{fontWeight:500,textDecoration:f.checked?"line-through":"none",color:f.checked?"#999":"inherit"},children:[f.name,f.quantity>1&&y.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"8px"},children:["x",f.quantity]})]})})]}),y.jsx("button",{onClick:()=>r(f.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},children:y.jsx(Kf,{size:20})})]},f.id))}),t.some(f=>f.checked)&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"white",fontSize:"0.9rem",fontWeight:500},children:[y.jsx(Cf,{size:20}),y.jsx("span",{children:"買い物完了後はこちら！"})]}),y.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",margin:"0 0 12px 0",lineHeight:"1.5"},children:["チェックした商品を在庫に一括追加できます。",y.jsx("br",{}),"賞味期限は自動で7日後に設定されます。"]}),y.jsxs("button",{className:"submit",onClick:c,style:{background:"white",color:"#10b981",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1rem",fontWeight:600,padding:"14px",border:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[y.jsx(Cf,{size:22}),"在庫に追加（",t.filter(f=>f.checked).length,"個）"]})]}),y.jsx("button",{className:"submit",onClick:l,style:{background:"transparent",color:"#ef4444",border:"2px solid #ef4444",marginTop:"8px",width:"100%"},children:"チェック済みをクリア"})]}),a&&y.jsxs("div",{style:{position:"fixed",top:"80px",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.4)",display:"flex",alignItems:"center",gap:"12px",zIndex:1e3,animation:"slideDown 0.3s ease-out",fontSize:"1rem",fontWeight:600},children:[y.jsx(Yv,{size:28}),y.jsx("span",{children:"在庫に追加しました！"})]})]})]})},_Y=()=>y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"買い物リスト"}),y.jsx(pY,{}),y.jsx(xY,{}),y.jsx(bY,{})]}),Ef="AIzaSyBSqmtDaNAqF09NTYYKQsTKm-3fLl1LMr0",uk=Ef!=="YOUR_GEMINI_API_KEY_HERE";let cf=[];function SA(t){const e=Date.now();cf.push({type:t,timestamp:e}),cf=cf.filter(a=>e-a.timestamp<6e4);const r=cf.filter(a=>a.type==="recipe").length,n=cf.filter(a=>a.type==="receipt").length,i=cf.length;console.log(`[API Usage] 直近1分間の合計リクエスト数: ${i}回`),console.log(`  - レシピ生成: ${r}回`),console.log(`  - レシートOCR: ${n}回`),console.log(`  - 残り制限枠: ${15-i}回 (Free Tier: 15回/分)`)}async function wY(t,e="none",r="none",n=""){if(console.log("[Gemini] API呼び出し開始",{ingredients:t,dietaryRestriction:e,difficulty:r,customRequest:n,API_ENABLED:uk,apiKeyPrefix:Ef.substring(0,10)+"..."}),!t||t.length===0)throw new Error("材料を指定してください。");try{const i=e==="vegetarian"?"ベジタリアン":e==="vegan"?"ヴィーガン":"";let a="";r==="super_easy"?a=`

**重要**: 料理初心者でも絶対に失敗しない超簡単なレシピにしてください。調理工程は3ステップ以内、特別な道具や技術は不要にしてください。`:r==="under_5min"?a=`

**重要**: 調理時間5分以内で完成するレシピにしてください。`:r==="under_10min"?a=`

**重要**: 調理時間10分以内で完成するレシピにしてください。`:r==="no_fire"&&(a=`

**重要**: 火を使わずに作れるレシピにしてください（電子レンジやトースターは可）。`);const o=n?`

**追加のリクエスト**: ${n}`:"",l=`
あなたは日本語で答えるプロの料理アドバイザーです。
必ず日本語で回答してください。英語は使わないでください。

次の食材を使った${i}向けの家庭向けレシピを1つ提案してください。
料理名・材料・手順・ポイントを含めて出力してください。${a}${o}

食材: ${t.join("、")}

出力フォーマットは以下の形式でお願いします：

---
【料理名】
（料理名）

【材料】
（材料一覧）

【作り方】
1.
2.
3.

【ポイント】
（料理のコツやアドバイス）
---
`.trim(),c=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${Ef}`;SA("recipe"),console.log("[Gemini] APIリクエスト送信",{url:c.replace(Ef,"HIDDEN")});const f=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:l}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}})});if(console.log("[Gemini] APIレスポンス受信",{status:f.status,ok:f.ok}),console.log("[Gemini] Rate Limit Info:",{limit:f.headers.get("x-ratelimit-limit"),remaining:f.headers.get("x-ratelimit-remaining"),reset:f.headers.get("x-ratelimit-reset"),retryAfter:f.headers.get("retry-after")}),!f.ok){const p=await f.text();let g;try{g=JSON.parse(p)}catch{g={rawError:p}}console.error("[Gemini] APIエラー詳細",{status:f.status,statusText:f.statusText,errorData:g});let m=`Gemini API エラー (${f.status})`;throw g.error?.message&&(m+=`: ${g.error.message}`),new Error(m)}const d=await f.json();if(console.log("[Gemini] レスポンスデータ",d),d.candidates&&d.candidates.length>0){const p=d.candidates[0];if(p.content?.parts&&p.content.parts.length>0){const g=p.content.parts[0].text;return console.log("[Gemini] レシピ生成成功"),g.trim()}}throw console.error("[Gemini] レスポンス形式が不正",d),new Error("Gemini APIからレシピを取得できませんでした。")}catch(i){return console.error("[Gemini] エラー発生:",i),console.warn("[Gemini] モックデータを使用します。"),console.info("[Gemini] 新しいAPIキーが必要な場合: https://aistudio.google.com/app/apikey"),i instanceof Error&&i.message.includes("403")&&console.error("[Gemini] 403エラー: APIキーが無効または期限切れです。新しいキーを取得してください。"),SY(t,e,r)}}async function EY(t){console.log("[Gemini Text] テキスト生成開始");try{const e=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${Ef}`;SA("recipe"),console.log("[Gemini Text] APIリクエスト送信");const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}})});if(console.log("[Gemini Text] APIレスポンス受信",{status:r.status}),!r.ok){const i=await r.text();throw console.error("[Gemini Text] APIエラー",i),new Error(`Gemini API エラー: ${r.status}`)}const n=await r.json();if(console.log("[Gemini Text] レスポンスデータ受信"),n.candidates&&n.candidates.length>0){const i=n.candidates[0];if(i.content?.parts&&i.content.parts.length>0){const a=i.content.parts[0].text.trim();return console.log("[Gemini Text] テキスト生成成功"),a}}throw new Error("テキストを生成できませんでした")}catch(e){throw console.error("[Gemini Text] エラー:",e),e}}const AY=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const a=n.result.split(",")[1];e(a)},n.onerror=r,n.readAsDataURL(t)});let f6=0;const d6=5e3;async function h6(t){console.log("[Gemini Receipt] OCR処理開始",{fileName:t.name,fileSize:t.size,API_ENABLED:uk});const e=Date.now(),r=e-f6;if(r<d6){const n=Math.ceil((d6-r)/1e3);throw new Error(`レート制限: ${n}秒後に再試行してください`)}try{f6=e;const n=await AY(t),i=`
あなたは日本語のレシート解析の専門家です。
このレシート画像から商品名と価格を正確に抽出してください。

以下のJSON形式で出力してください：
{
  "storeName": "店舗名（わかれば）",
  "date": "日付（YYYY-MM-DD形式、わかれば）",
  "total": 合計金額（数値、わかれば）,
  "items": [
    {
      "name": "商品名",
      "price": 価格（数値）,
      "quantity": 数量（数値、デフォルトは1）
    }
  ]
}

**重要な指示:**
1. 商品名と価格は必ず正確に抽出してください
2. 価格は数値のみ（円記号やカンマは除く）
3. 同じ商品が複数ある場合はquantityで表現
4. 合計金額や税金などの行は除外
5. 不明な項目は省略してOK
6. 必ずJSONのみを返してください（説明文は不要）
`.trim(),a=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=${Ef}`;SA("receipt"),console.log("[Gemini Receipt] APIリクエスト送信");const o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i},{inlineData:{mimeType:t.type||"image/jpeg",data:n}}]}],generationConfig:{temperature:.1,topK:32,topP:1,maxOutputTokens:2048}})});if(console.log("[Gemini Receipt] APIレスポンス受信",{status:o.status}),console.log("[Gemini Receipt] Rate Limit Info:",{limit:o.headers.get("x-ratelimit-limit"),remaining:o.headers.get("x-ratelimit-remaining"),reset:o.headers.get("x-ratelimit-reset"),retryAfter:o.headers.get("retry-after")}),!o.ok){const c=await o.text();throw console.error("[Gemini Receipt] APIエラー",c),o.status===429?new Error("レート制限に達しました。数秒後に再試行してください。"):new Error(`Gemini API エラー: ${o.status}`)}const l=await o.json();if(console.log("[Gemini Receipt] レスポンスデータ",l),l.candidates&&l.candidates.length>0){const c=l.candidates[0];if(c.content?.parts&&c.content.parts.length>0){const f=c.content.parts[0].text.trim();console.log("[Gemini Receipt] 抽出テキスト:",f);let d=f;const p=f.match(/```json\s*([\s\S]*?)\s*```/);if(p)d=p[1];else if(f.includes("```")){const b=f.match(/```\s*([\s\S]*?)\s*```/);b&&(d=b[1])}const g=JSON.parse(d),m={items:g.items||[],total:g.total,storeName:g.storeName,date:g.date,rawText:f};return console.log("[Gemini Receipt] OCR成功",m),m}}throw new Error("レシートからテキストを抽出できませんでした")}catch(n){throw console.error("[Gemini Receipt] エラー:",n),n}}function SY(t,e,r="none"){const n=e==="vegetarian"?"ベジタリアン":e==="vegan"?"ヴィーガン":"",i=r==="super_easy"?"（超簡単）":r==="under_5min"?"（5分）":r==="under_10min"?"（10分）":r==="no_fire"?"（火を使わない）":"";return`
【料理名】
${t.join("と")}の${n}炒め${i}

【材料】
${t.map(a=>`・${a} 適量`).join(`
`)}
・塩、こしょう 少々
・サラダ油 大さじ1

【作り方】
1. ${t[0]||"材料"}を食べやすい大きさに切ります。
2. フライパンに油を熱し、材料を炒めます。
3. 塩、こしょうで味を調えて完成です。

【ポイント】
シンプルな炒め物なので、お好みで醤油やにんにくを加えても美味しいです。
野菜の食感を残すため、強火でサッと炒めるのがコツです。

※ このレシピはデモ用のモックデータです。実際のGemini APIキーを設定すると、AIが本格的なレシピを生成します。
※ 403エラーが発生しています。新しいAPIキーを https://aistudio.google.com/app/apikey で取得してください。
`.trim()}function Im(t){return Ee({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a.5.5 0 0 1-.5-.5v-1.293l-.646.647a.5.5 0 0 1-.707-.708L7.5 12.793V8.866l-3.4 1.963-.496 1.85a.5.5 0 1 1-.966-.26l.237-.882-1.12.646a.5.5 0 0 1-.5-.866l1.12-.646-.884-.237a.5.5 0 1 1 .26-.966l1.848.495L7 8 3.6 6.037l-1.85.495a.5.5 0 0 1-.258-.966l.883-.237-1.12-.646a.5.5 0 1 1 .5-.866l1.12.646-.237-.883a.5.5 0 1 1 .966-.258l.495 1.849L7.5 7.134V3.207L6.147 1.854a.5.5 0 1 1 .707-.708l.646.647V.5a.5.5 0 1 1 1 0v1.293l.647-.647a.5.5 0 1 1 .707.708L8.5 3.207v3.927l3.4-1.963.496-1.85a.5.5 0 1 1 .966.26l-.236.882 1.12-.646a.5.5 0 0 1 .5.866l-1.12.646.883.237a.5.5 0 1 1-.26.966l-1.848-.495L9 8l3.4 1.963 1.849-.495a.5.5 0 0 1 .259.966l-.883.237 1.12.646a.5.5 0 0 1-.5.866l-1.12-.646.236.883a.5.5 0 1 1-.966.258l-.495-1.849-3.4-1.963v3.927l1.353 1.353a.5.5 0 0 1-.707.708l-.647-.647V15.5a.5.5 0 0 1-.5.5z"},child:[]}]})(t)}const CY=({onRecipeGenerated:t,isLoading:e,setIsLoading:r})=>{const{stocks:n}=Po(),{addToHistory:i}=Bp(),[a,o]=C.useState(""),[l,c]=C.useState("none"),[f,d]=C.useState("none"),[p,g]=C.useState(""),m=[{value:"none",label:"指定なし",icon:y.jsx(D1,{size:16})},{value:"super_easy",label:"超簡単",icon:y.jsx(Wv,{size:16})},{value:"under_5min",label:"5分以内",icon:y.jsx(Kv,{size:16})},{value:"under_10min",label:"10分以内",icon:y.jsx(Gv,{size:16})},{value:"no_fire",label:"火を使わない",icon:y.jsx(Im,{size:16})}],b=[{value:"none",label:"指定なし",icon:y.jsx(N1,{size:16})},{value:"vegetarian",label:"ベジタリアン",icon:y.jsx("span",{children:"🥗"})},{value:"vegan",label:"ヴィーガン",icon:y.jsx("span",{children:"🌱"})}],w=()=>{const S=n.filter(I=>I.quantity>0).map(I=>I.name).slice(0,10).join(", ");o(S)},E=async()=>{if(!a.trim()){alert("材料を入力してください");return}r(!0);try{const S=a.split(/[,、]/).map(D=>D.trim()).filter(D=>D.length>0),I=await wY(S,f,l,p),O={id:Al(),title:`${S.slice(0,3).join("、")}を使ったレシピ`,content:I,ingredients:S,difficulty:l,dietaryRestriction:f,customRequest:p,isFavorite:!1,createdAt:new Date().toISOString()};i(O),t(O)}catch(S){console.error("レシピ生成エラー:",S),alert("レシピの生成に失敗しました。もう一度お試しください。")}finally{r(!1)}};return y.jsxs("div",{className:"card",children:[y.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(N1,{size:20}),"レシピを生成"]}),y.jsx("label",{children:"材料（カンマ区切り）"}),y.jsx("input",{value:a,onChange:S=>o(S.target.value),placeholder:"例: 鶏肉, じゃがいも, 玉ねぎ",disabled:e}),y.jsxs("button",{onClick:w,style:{background:"#10b981",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",marginBottom:"16px"},disabled:e,children:[y.jsx(Cf,{size:18,style:{marginRight:"6px"}}),"在庫の材料を使う"]}),y.jsx("label",{children:"難易度"}),y.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:m.map(S=>y.jsx("button",{onClick:()=>c(S.value),style:{padding:"8px 16px",borderRadius:"20px",border:`2px solid ${l===S.value?"var(--primary)":"var(--border)"}`,background:l===S.value?"var(--primary)":"var(--card)",color:l===S.value?"white":"var(--text)",cursor:"pointer",fontSize:"0.85rem",fontWeight:l===S.value?600:400},disabled:e,children:y.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.icon," ",S.label]})},S.value))}),y.jsx("label",{children:"食事制限"}),y.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:b.map(S=>y.jsx("button",{onClick:()=>d(S.value),style:{padding:"8px 16px",borderRadius:"20px",border:`2px solid ${f===S.value?"var(--primary)":"var(--border)"}`,background:f===S.value?"var(--primary)":"var(--card)",color:f===S.value?"white":"var(--text)",cursor:"pointer",fontSize:"0.85rem",fontWeight:f===S.value?600:400},disabled:e,children:y.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.icon," ",S.label]})},S.value))}),y.jsx("label",{children:"カスタムリクエスト（任意）"}),y.jsx("textarea",{value:p,onChange:S=>g(S.target.value),placeholder:"例: 辛めに作りたい、子供向けに優しい味で",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--text)",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"},disabled:e}),y.jsxs("button",{className:"submit",onClick:E,disabled:e,children:[y.jsx(D1,{size:18,style:{marginRight:"8px"}}),"レシピを生成する"]})]})},TY=({recipe:t,onAttachToPost:e})=>{const{addToHistory:r,addToFavorites:n,removeFromFavorites:i,favoriteRecipes:a}=Bp(),{addStock:o}=Po(),{addItem:l}=mu(),c=a.some(g=>g.id===t.id),f=()=>{c?i(t.id):(n(t),r(t))},d=()=>{confirm(`材料 ${t.ingredients.length} 個を在庫に追加しますか？
（賞味期限は7日後に設定されます）`)&&(t.ingredients.forEach(g=>{o({name:g,quantity:1,daysRemaining:7})}),alert(`${t.ingredients.length}個の材料を在庫に追加しました！`))},p=()=>{confirm(`材料 ${t.ingredients.length} 個を買い物リストに追加しますか？`)&&(t.ingredients.forEach(g=>{l({name:g,quantity:1})}),alert(`${t.ingredients.length}個の材料を買い物リストに追加しました！`))};return y.jsxs("div",{className:"card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[y.jsx("h3",{children:t.title}),y.jsx("button",{onClick:f,style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px",color:c?"#fbbf24":"var(--text-secondary)"},title:c?"お気に入りから削除":"お気に入りに追加",children:c?y.jsx(__,{size:28}):y.jsx($F,{size:28})})]}),y.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[t.difficulty&&t.difficulty!=="none"&&y.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",background:"#f0fdf4",color:"#15803d",fontSize:"0.85rem",fontWeight:500},children:y.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:{super_easy:y.jsxs(y.Fragment,{children:[y.jsx(Wv,{size:14})," 超簡単"]}),under_5min:y.jsxs(y.Fragment,{children:[y.jsx(Kv,{size:14})," 5分以内"]}),under_10min:y.jsxs(y.Fragment,{children:[y.jsx(Gv,{size:14})," 10分以内"]}),no_fire:y.jsxs(y.Fragment,{children:[y.jsx(Im,{size:14})," 火を使わない"]}),none:""}[t.difficulty]})}),t.dietaryRestriction&&t.dietaryRestriction!=="none"&&y.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",background:"#fef3c7",color:"#92400e",fontSize:"0.85rem",fontWeight:500},children:{vegetarian:"🥗 ベジタリアン",vegan:"🌱 ヴィーガン",none:""}[t.dietaryRestriction]})]}),y.jsx("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"12px",marginBottom:"16px",whiteSpace:"pre-wrap",fontSize:"0.95rem",lineHeight:"1.6"},children:t.content}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:e?"1fr 1fr 1fr":"1fr 1fr",gap:"8px"},children:[y.jsxs("button",{onClick:d,style:{background:"#10b981",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[y.jsx(Cf,{size:18})," 在庫に追加"]}),y.jsxs("button",{onClick:p,style:{background:"#3b82f6",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[y.jsx(Qv,{size:18})," 買い物リストへ"]}),e&&y.jsxs("button",{onClick:()=>e(t),style:{background:"var(--primary)",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[y.jsx(mD,{size:18})," 投稿に添付"]})]})]})},IY=({onRecipeSelect:t})=>{const{recipeHistory:e}=Bp();if(e.length===0)return null;const r=n=>{const i=new Date(n),o=new Date().getTime()-i.getTime(),l=Math.floor(o/6e4),c=Math.floor(o/36e5),f=Math.floor(o/864e5);return l<1?"たった今":l<60?`${l}分前`:c<24?`${c}時間前`:f<7?`${f}日前`:i.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})};return y.jsxs("div",{className:"card",children:[y.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(AF,{size:20}),"レシピ履歴"]}),y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(n=>y.jsxs("div",{onClick:()=>t(n.recipe),style:{padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s ease",background:"var(--card)"},onMouseEnter:i=>{i.currentTarget.style.background="var(--background)",i.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:i=>{i.currentTarget.style.background="var(--card)",i.currentTarget.style.transform="translateY(0)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[y.jsx("div",{style:{fontWeight:500,fontSize:"0.95rem",flex:1},children:n.recipe.title}),y.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary, #999)",whiteSpace:"nowrap",marginLeft:"8px"},children:r(n.generatedAt)})]}),y.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary, #666)",display:"flex",gap:"4px",flexWrap:"wrap"},children:[n.recipe.ingredients&&n.recipe.ingredients.slice(0,3).map((i,a)=>y.jsxs("span",{children:[i,a<Math.min((n.recipe.ingredients?.length||0)-1,2)?"、":""]},a)),n.recipe.ingredients&&n.recipe.ingredients.length>3&&y.jsxs("span",{style:{color:"var(--text-secondary, #999)"},children:["他",n.recipe.ingredients.length-3,"個"]})]}),(n.recipe.difficulty!=="none"||n.recipe.dietaryRestriction!=="none")&&y.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"6px",flexWrap:"wrap"},children:[n.recipe.difficulty&&n.recipe.difficulty!=="none"&&y.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",background:"#f0fdf4",color:"#15803d",fontSize:"0.75rem"},children:{super_easy:y.jsx(Wv,{size:12}),under_5min:y.jsx(Kv,{size:12}),under_10min:y.jsx(Gv,{size:12}),no_fire:y.jsx(Im,{size:12}),none:""}[n.recipe.difficulty]}),n.recipe.dietaryRestriction&&n.recipe.dietaryRestriction!=="none"&&y.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",background:"#fef3c7",color:"#92400e",fontSize:"0.75rem"},children:{vegetarian:"🥗",vegan:"🌱",none:""}[n.recipe.dietaryRestriction]})]})]},n.id))})]})},OY=({onRecipeSelect:t})=>{const{favoriteRecipes:e,removeFromFavorites:r}=Bp();if(e.length===0)return null;const n=(i,a)=>{i.stopPropagation(),confirm("お気に入りから削除しますか？")&&r(a)};return y.jsxs("div",{className:"card",children:[y.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(__,{size:20,color:"#fbbf24"}),"お気に入りレシピ"]}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"},children:e.map(i=>y.jsxs("div",{onClick:()=>t(i),style:{padding:"16px",borderRadius:"12px",border:"2px solid var(--border)",cursor:"pointer",transition:"all 0.2s ease",background:"var(--card)",position:"relative"},onMouseEnter:a=>{a.currentTarget.style.background="var(--background)",a.currentTarget.style.borderColor="var(--primary)",a.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:a=>{a.currentTarget.style.background="var(--card)",a.currentTarget.style.borderColor="var(--border)",a.currentTarget.style.transform="translateY(0)"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[y.jsx("div",{style:{fontWeight:600,fontSize:"1rem",flex:1},children:i.title}),y.jsx("button",{onClick:a=>n(a,i.id),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",padding:"0 4px",color:"#fbbf24"},title:"お気に入りから削除",children:y.jsx(__,{size:24})})]}),y.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)",marginBottom:"8px",display:"flex",gap:"6px",flexWrap:"wrap"},children:[y.jsx("span",{style:{fontWeight:500},children:"材料:"}),i.ingredients&&i.ingredients.slice(0,4).map((a,o)=>y.jsxs("span",{children:[a,o<Math.min((i.ingredients?.length||0)-1,3)?"、":""]},o)),i.ingredients&&i.ingredients.length>4&&y.jsxs("span",{style:{color:"var(--text-secondary, #999)"},children:["他",i.ingredients.length-4,"個"]})]}),(i.difficulty&&i.difficulty!=="none"||i.dietaryRestriction&&i.dietaryRestriction!=="none")&&y.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",flexWrap:"wrap"},children:[i.difficulty&&i.difficulty!=="none"&&y.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",background:"#f0fdf4",color:"#15803d",fontSize:"0.8rem",fontWeight:500},children:y.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:{super_easy:y.jsxs(y.Fragment,{children:[y.jsx(Wv,{size:14})," 超簡単"]}),under_5min:y.jsxs(y.Fragment,{children:[y.jsx(Kv,{size:14})," 5分以内"]}),under_10min:y.jsxs(y.Fragment,{children:[y.jsx(Gv,{size:14})," 10分以内"]}),no_fire:y.jsxs(y.Fragment,{children:[y.jsx(Im,{size:14})," 火を使わない"]}),none:""}[i.difficulty]})}),i.dietaryRestriction&&i.dietaryRestriction!=="none"&&y.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",background:"#fef3c7",color:"#92400e",fontSize:"0.8rem",fontWeight:500},children:{vegetarian:"🥗 ベジタリアン",vegan:"🌱 ヴィーガン",none:""}[i.dietaryRestriction]})]}),i.customRequest&&y.jsxs("div",{style:{marginTop:"8px",fontSize:"0.85rem",color:"var(--text-secondary, #666)",fontStyle:"italic",padding:"6px 10px",background:"var(--background)",borderRadius:"6px",display:"flex",alignItems:"flex-start",gap:"6px"},children:[y.jsx(DF,{size:14,style:{marginTop:"2px",flexShrink:0}}),i.customRequest]})]},i.id))})]})},RY=t=>{const e=/#[\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]+/g,r=t.match(e);return r?r.map(n=>n.slice(1)):[]},PY=t=>{const e=/@([a-zA-Z0-9_]+)/g,r=t.match(e);return r?[...new Set(r.map(n=>n.substring(1)))]:[]},ho=t=>t?typeof t=="string"?t:t.toDate().toISOString():new Date().toISOString(),DY=async(t,e)=>{try{const r=await ga(t);if(!r)throw new Error("プロフィールが見つかりません");const n=[];if(e.images&&e.images.length>0)for(const f of e.images){const d=await sY(t,f);n.push(d)}const i=RY(e.content),a=PY(e.content),o=Ye(ze(be,"posts")),l=o.id,c={id:l,content:e.content,images:n,authorId:t,authorName:r.displayName,authorAvatar:r.avatarUrl||"",likes:0,commentCount:0,repostCount:0,hashtags:i,visibility:e.visibility,createdAt:$q()};return a.length>0&&(c.mentions=a),e.quotedPostId&&(c.quotedPostId=e.quotedPostId),e.recipeData&&(c.recipeData=e.recipeData),await Xl(o,c),console.log("投稿を作成しました:",l),l}catch(r){throw console.error("投稿の作成に失敗しました:",r),r}},zl=async t=>{try{const e=Ye(be,"posts",t),r=await Fa(e);if(!r.exists())return null;const n=r.data();let i;if(n.quotedPostId){const a=await zl(n.quotedPostId);a&&(i=a)}return{id:r.id,content:n.content,images:n.images||[],authorId:n.authorId,authorName:n.authorName,authorAvatar:n.authorAvatar||"",likes:n.likes||0,commentCount:n.commentCount||0,repostCount:n.repostCount||0,hashtags:n.hashtags||[],mentions:n.mentions||[],quotedPostId:n.quotedPostId,quotedPost:i,recipeData:n.recipeData,visibility:n.visibility,createdAt:ho(n.createdAt),updatedAt:n.updatedAt?ho(n.updatedAt):void 0}}catch(e){return console.error("投稿の取得に失敗しました:",e),null}},NY=async(t,e=20)=>{try{console.log(`[getUserPosts] Fetching posts for user: ${t}`);const r=ze(be,"posts");let n;try{const a=Lt(r,On("authorId","==",t),Dn("createdAt","desc"),Fl(e));console.log("[getUserPosts] Executing query with index..."),n=await St(a)}catch{console.warn("[getUserPosts] Index not found, using fallback query...");const o=Lt(r,On("authorId","==",t)),c=(await St(o)).docs.sort((f,d)=>{const p=f.data().createdAt,g=d.data().createdAt;return!p||!g?0:g.seconds-p.seconds});n={docs:c.slice(0,e),empty:c.length===0,size:Math.min(c.length,e)}}console.log(`[getUserPosts] Query returned ${n.docs.length} documents`);const i=[];for(const a of n.docs){const o=a.data();let l;if(o.quotedPostId){const c=await zl(o.quotedPostId);c&&(l={...c,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:l,recipeData:o.recipeData,visibility:o.visibility,createdAt:ho(o.createdAt),updatedAt:o.updatedAt?ho(o.updatedAt):void 0})}return console.log(`[getUserPosts] Successfully processed ${i.length} posts`),i}catch(r){return console.error("[getUserPosts] ユーザーの投稿取得に失敗しました:",r),[]}},MY=async(t=20)=>{console.log("🔍 getTimelinePosts: Starting to fetch timeline posts...");try{const e=ze(be,"posts");console.log("📁 getTimelinePosts: Creating query with visibility=public, orderBy createdAt desc");const r=Lt(e,On("visibility","==","public"),Dn("createdAt","desc"),Fl(t));console.log("⚡ getTimelinePosts: Executing query...");const n=await St(r);console.log(`📊 getTimelinePosts: Query returned ${n.size} documents`);const i=[];for(const a of n.docs){const o=a.data();console.log(`📄 Processing post ${a.id}:`,{authorId:o.authorId,authorName:o.authorName,visibility:o.visibility,createdAt:o.createdAt});let l;if(o.quotedPostId){const c=await zl(o.quotedPostId);c&&(l={...c,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:l,recipeData:o.recipeData,visibility:o.visibility,createdAt:ho(o.createdAt),updatedAt:o.updatedAt?ho(o.updatedAt):void 0})}return console.log(`✅ getTimelinePosts: Successfully processed ${i.length} posts`),i}catch(e){if(console.error("❌ getTimelinePosts: Error occurred:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e.code==="failed-precondition"&&e.message?.includes("index")){console.warn("⚠️ Firestoreインデックスが未作成です。フォールバッククエリを使用します。"),console.warn("インデックス作成URL:",e.message);try{console.log("🔄 getTimelinePosts: Trying fallback query (orderBy createdAt only)...");const r=ze(be,"posts"),n=Lt(r,Dn("createdAt","desc"),Fl(t*3)),i=await St(n);console.log(`📊 Fallback query returned ${i.size} documents`);const a=[];for(const l of i.docs){const c=l.data();let f;if(c.quotedPostId){const d=await zl(c.quotedPostId);d&&(f={...d,quotedPost:void 0})}a.push({id:l.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,hashtags:c.hashtags||[],mentions:c.mentions||[],quotedPostId:c.quotedPostId,quotedPost:f,recipeData:c.recipeData,visibility:c.visibility,createdAt:ho(c.createdAt),updatedAt:c.updatedAt?ho(c.updatedAt):void 0})}const o=a.filter(l=>l.visibility==="public").slice(0,t);return console.log(`✅ Fallback: Filtered to ${o.length} public posts`),o}catch(r){return console.error("❌ フォールバッククエリもエラー:",r),console.error("Fallback error code:",r.code),console.error("Fallback error message:",r.message),[]}}return console.error("❌ タイムラインの取得に失敗しました（詳細）:",e),[]}},kY=async(t,e)=>{try{const r=await zl(t);if(!r)throw new Error("投稿が見つかりません");if(r.authorId!==e)throw new Error("自分の投稿のみ削除できます");const n=Ye(be,"posts",t);await Bi(n),console.log("投稿を削除しました:",t)}catch(r){throw console.error("投稿の削除に失敗しました:",r),r}},nv=t=>{const e=new Date,r=new Date(t),n=e.getTime()-r.getTime(),i=Math.floor(n/6e4);return i<1?"たった今":i<60?`${i}分前`:i<1440?`${Math.floor(i/60)}時間前`:i<43200?`${Math.floor(i/1440)}日前`:r.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})},fk=async(t,e,r,n)=>{try{const i=Ye(ze(be,`posts/${t}/likes`)),o={id:i.id,postId:t,userId:e,userName:r,createdAt:new Date().toISOString()};n&&(o.userAvatar=n),await Xl(i,o);const l=Ye(be,"posts",t);await Nn(l,{likes:Eo(1)}),console.log("いいねを追加しました")}catch(i){throw console.error("いいねの追加に失敗しました:",i),i}},dk=async(t,e)=>{try{const r=ze(be,`posts/${t}/likes`),n=Lt(r,On("userId","==",e)),i=await St(n);for(const o of i.docs)await Bi(o.ref);const a=Ye(be,"posts",t);await Nn(a,{likes:Eo(-1)}),console.log("いいねを削除しました")}catch(r){throw console.error("いいねの削除に失敗しました:",r),r}},hk=async(t,e)=>{try{const r=ze(be,`posts/${t}/likes`),n=Lt(r,On("userId","==",e));return!(await St(n)).empty}catch(r){return console.error("いいね確認に失敗しました:",r),!1}},jY=async(t,e,r,n,i)=>{try{const a=Ye(ze(be,`posts/${t}/comments`)),l={id:a.id,postId:t,userId:e,userName:r,content:n,createdAt:new Date().toISOString()};i&&(l.userAvatar=i),await Xl(a,l);const c=Ye(be,"posts",t);await Nn(c,{commentCount:Eo(1)}),console.log("コメントを追加しました")}catch(a){throw console.error("コメントの追加に失敗しました:",a),a}},LY=async(t,e,r)=>{try{const n=Ye(be,`posts/${t}/comments/${e}`),i=await Fa(n);if(!i.exists())throw new Error("コメントが見つかりません");if(i.data().userId!==r)throw new Error("自分のコメントのみ削除できます");await Bi(n);const a=Ye(be,"posts",t);await Nn(a,{commentCount:Eo(-1)}),console.log("コメントを削除しました")}catch(n){throw console.error("コメントの削除に失敗しました:",n),n}},M2=async t=>{try{const e=ze(be,`posts/${t}/comments`),r=Lt(e,Dn("createdAt","asc")),n=await St(r),i=[];return n.forEach(a=>{const o=a.data();i.push({id:a.id,postId:t,userId:o.userId,userName:o.userName,userAvatar:o.userAvatar,content:o.content,createdAt:o.createdAt,updatedAt:o.updatedAt})}),i}catch(e){return console.error("コメント一覧の取得に失敗しました:",e),[]}},BY=async(t,e)=>{try{const r=Ye(be,`users/${e}/bookmarks/${t}`),n={id:t,postId:t,userId:e,createdAt:new Date().toISOString()};await Xl(r,n),console.log("ブックマークを追加しました")}catch(r){throw console.error("ブックマークの追加に失敗しました:",r),r}},UY=async(t,e)=>{try{const r=Ye(be,`users/${e}/bookmarks/${t}`);await Bi(r),console.log("ブックマークを削除しました")}catch(r){throw console.error("ブックマークの削除に失敗しました:",r),r}},FY=async(t,e)=>{try{const r=Ye(be,`users/${e}/bookmarks/${t}`);return(await Fa(r)).exists()}catch(r){return console.error("ブックマーク確認に失敗しました:",r),!1}},zY=async(t,e,r,n)=>{try{const i=Ye(ze(be,`posts/${t}/reposts`)),o={id:i.id,postId:t,userId:e,userName:r,createdAt:new Date().toISOString()};n&&(o.userAvatar=n),await Xl(i,o);const l=Ye(be,"posts",t);await Nn(l,{repostCount:Eo(1)}),console.log("リポストを追加しました")}catch(i){throw console.error("リポストの追加に失敗しました:",i),i}},VY=async(t,e)=>{try{const r=ze(be,`posts/${t}/reposts`),n=Lt(r,On("userId","==",e)),i=await St(n);for(const o of i.docs)await Bi(o.ref);const a=Ye(be,"posts",t);await Nn(a,{repostCount:Eo(-1)}),console.log("リポストを削除しました")}catch(r){throw console.error("リポストの削除に失敗しました:",r),r}},HY=async(t,e)=>{try{const r=ze(be,`posts/${t}/reposts`),n=Lt(r,On("userId","==",e));return!(await St(n)).empty}catch(r){return console.error("リポスト確認に失敗しました:",r),!1}},$Y=async(t,e=20)=>{try{console.log(`[getFollowingPosts] Fetching following posts for user: ${t}`);const r=await ck(t);if(console.log(`[getFollowingPosts] Found ${r.length} following users`),r.length===0)return[];const n=r.map(l=>l.uid),i=ze(be,"posts"),a=[];for(let l=0;l<n.length;l+=10){const c=n.slice(l,l+10),f=Lt(i,On("authorId","in",c),On("visibility","in",["public","followers"])),d=await St(f);for(const p of d.docs){const g=p.data();let m;if(g.quotedPostId){const b=await zl(g.quotedPostId);b&&(m={...b,quotedPost:void 0})}a.push({id:p.id,content:g.content,images:g.images||[],authorId:g.authorId,authorName:g.authorName,authorAvatar:g.authorAvatar||"",likes:g.likes||0,commentCount:g.commentCount||0,repostCount:g.repostCount||0,hashtags:g.hashtags||[],mentions:g.mentions||[],quotedPostId:g.quotedPostId,quotedPost:m,recipeData:g.recipeData,visibility:g.visibility,createdAt:ho(g.createdAt),updatedAt:g.updatedAt?ho(g.updatedAt):void 0})}}a.sort((l,c)=>new Date(c.createdAt).getTime()-new Date(l.createdAt).getTime());const o=a.slice(0,e);return console.log(`[getFollowingPosts] Returning ${o.length} posts`),o}catch(r){return console.error("[getFollowingPosts] フォロー中の投稿取得に失敗しました:",r),[]}},ul=280,qg=4,pk=({onClose:t,onPostCreated:e,quotedPostId:r,recipeData:n})=>{const{user:i}=ws(),[a,o]=C.useState(""),[l,c]=C.useState([]),[f,d]=C.useState([]),[p,g]=C.useState("public"),[m,b]=C.useState(!1),[w,E]=C.useState(""),[S,I]=C.useState(null);C.useEffect(()=>{(async()=>{if(r){const N=await zl(r);I(N)}})()},[r]);const O=R=>{const N=Array.from(R.target.files||[]);if(N.length===0)return;if(l.length+N.length>qg){E(`画像は最大${qg}枚まで添付できます`);return}const L=[];N.forEach(U=>{const z=new FileReader;z.onloadend=()=>{L.push(z.result),L.length===N.length&&d([...f,...L])},z.readAsDataURL(U)}),c([...l,...N]),E("")},D=R=>{c(l.filter((N,L)=>L!==R)),d(f.filter((N,L)=>L!==R))},k=async()=>{if(!i){E("ログインしてください");return}if(!a.trim()){E("投稿内容を入力してください");return}if(a.length>ul){E(`投稿は${ul}文字以内で入力してください`);return}b(!0),E("");try{console.log("📝 Checking user profile before posting...");let R=await ga(i.uid);if(!R){console.log("⚠️ プロフィールが存在しません。自動作成します...");try{await bA(i.uid,i.email||"",i.displayName||`User${i.uid.slice(0,8)}`),console.log("✅ プロフィールを作成しました"),R=await ga(i.uid)}catch(L){console.error("❌ プロフィール作成に失敗しました:",L),E("プロフィール作成に失敗しました。設定画面からプロフィールを作成してください。"),b(!1);return}}const N={content:a.trim(),images:l,visibility:p,quotedPostId:r,recipeData:n};await DY(i.uid,N),alert("投稿しました！"),e(),t()}catch(R){console.error("投稿の作成に失敗しました:",R),E("投稿の作成に失敗しました。もう一度お試しください。")}finally{b(!1)}},B=[{value:"public",label:"全体公開",icon:vD,description:"誰でも見られます"},{value:"followers",label:"フォロワー",icon:gD,description:"フォロワーのみ"},{value:"private",label:"非公開",icon:El,description:"自分のみ"}];return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"16px"},onClick:t,children:y.jsxs("div",{style:{background:"var(--card)",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},onClick:R=>R.stopPropagation(),children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid var(--border)"},children:[y.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text)",margin:0},children:"投稿を作成"}),y.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:R=>{R.currentTarget.style.background="var(--border)"},onMouseLeave:R=>{R.currentTarget.style.background="none"},children:y.jsx(cs,{size:24})})]}),y.jsxs("div",{style:{padding:"20px"},children:[y.jsx("textarea",{value:a,onChange:R=>o(R.target.value),placeholder:"今何してる？",style:{width:"100%",minHeight:"120px",padding:"12px",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"16px",color:"var(--text)",background:"var(--background)",resize:"vertical",fontFamily:"inherit",marginBottom:"12px"}}),S&&y.jsxs("div",{style:{padding:"12px",background:"var(--background)",border:"1px solid var(--border)",borderRadius:"12px",marginBottom:"12px"},children:[y.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"引用元:"}),y.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:S.authorName}),y.jsxs("div",{style:{fontSize:"14px",color:"var(--text)",marginTop:"4px"},children:[S.content.substring(0,100),S.content.length>100?"...":""]})]}),n&&y.jsxs("div",{style:{padding:"12px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",border:"2px solid var(--primary)",borderRadius:"12px",marginBottom:"12px"},children:[y.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"添付レシピ:"}),y.jsxs("div",{style:{fontWeight:700,fontSize:"16px",color:"var(--text)"},children:["👨‍🍳 ",n.title]}),y.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginTop:"4px"},children:n.description})]}),y.jsxs("div",{style:{textAlign:"right",fontSize:"14px",color:a.length>ul?"#f44336":"var(--text-secondary)",marginBottom:"16px"},children:[a.length," / ",ul]}),f.length>0&&y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:f.map((R,N)=>y.jsxs("div",{style:{position:"relative",paddingBottom:"100%",borderRadius:"12px",overflow:"hidden",background:"var(--border)"},children:[y.jsx("img",{src:R,alt:`プレビュー ${N+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}),y.jsx("button",{onClick:()=>D(N),style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0, 0, 0, 0.6)",border:"none",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:y.jsx(cs,{size:18})})]},N))}),l.length<qg&&y.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--background)",border:"2px solid var(--border)",borderRadius:"12px",cursor:"pointer",color:"var(--primary)",fontSize:"14px",fontWeight:500,marginBottom:"16px",transition:"background 0.2s"},onMouseEnter:R=>{R.currentTarget.style.background="var(--border)"},onMouseLeave:R=>{R.currentTarget.style.background="var(--background)"},children:[y.jsx(UF,{size:20}),"画像を追加 (",l.length,"/",qg,")",y.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:O,style:{display:"none"}})]}),y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("label",{style:{display:"block",fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px",fontWeight:500},children:"公開範囲"}),y.jsx("select",{value:p,onChange:R=>g(R.target.value),style:{width:"100%",padding:"12px",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"15px",color:"var(--text)",background:"var(--background)",cursor:"pointer"},children:B.map(R=>y.jsxs("option",{value:R.value,children:[R.label," - ",R.description]},R.value))})]}),w&&y.jsx("div",{style:{padding:"12px",background:"#ffebee",color:"#c62828",borderRadius:"8px",fontSize:"14px",marginBottom:"16px"},children:w}),y.jsx("button",{onClick:k,disabled:m||!a.trim()||a.length>ul,style:{width:"100%",padding:"14px",background:m||!a.trim()||a.length>ul?"var(--border)":"linear-gradient(135deg, var(--primary), #81c784)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:600,cursor:m||!a.trim()||a.length>ul?"not-allowed":"pointer",transition:"transform 0.2s"},onMouseEnter:R=>{!m&&a.trim()&&a.length<=ul&&(R.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:R=>{R.currentTarget.style.transform="translateY(0)"},children:m?"投稿中...":"投稿する"})]})]})})},qY=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!1),[i,a]=C.useState(!1),[o,l]=C.useState(null),c=p=>{let g="easy";p.difficulty==="super_easy"||p.difficulty==="under_5min"?g="easy":p.difficulty==="under_10min"?g="medium":p.difficulty==="no_fire"&&(g="easy");const m={title:p.title,description:p.content.substring(0,100),ingredients:p.ingredients,instructions:p.content.split(`

`).slice(1),difficulty:g,servings:2,preparationTime:15,cookingTime:30};l(m),a(!0)},f=()=>{a(!1),l(null)},d=()=>{a(!1),l(null),alert("レシピを投稿しました！")};return y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"AIレシピ生成"}),y.jsx(CY,{onRecipeGenerated:e,isLoading:r,setIsLoading:n}),r&&y.jsxs("div",{className:"card",style:{textAlign:"center",padding:"32px"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",color:"var(--primary)"},children:y.jsx(N1,{size:48})}),y.jsx("div",{style:{fontWeight:600,marginBottom:"8px"},children:"レシピを生成中..."}),y.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)"},children:"AIがレシピを考えています"})]}),t&&!r&&y.jsx(TY,{recipe:t,onAttachToPost:c}),y.jsx(IY,{onRecipeSelect:e}),y.jsx(OY,{onRecipeSelect:e}),i&&y.jsx(pk,{onClose:f,onPostCreated:d,recipeData:o||void 0})]})};function GY(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function WY(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var KY=(function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),XY=(function(t){KY(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),GY(a,i.prototype),WY(a),a}return e})(Error),YY=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yi=(function(t){YY(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e})(XY),QY=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Da=(function(t){QY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(yi),ZY=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Le=(function(t){ZY(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(yi),JY=(function(){function t(e){if(this.binarizer=e,e===null)throw new Le("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var a=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),eQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),fn=(function(t){eQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(yi),tQ=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),Xt=(function(){function t(){}return t.arraycopy=function(e,r,n,i,a){for(;a--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t})(),rQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),CA=(function(t){rQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(yi),nQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),p6=(function(t){nQ(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(CA),iQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qr=(function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new Le("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new p6(r);if(n>e)throw new p6(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var a=iQ(e),o=a.next();!o.done;o=a.next()){var l=o.value;i=31*i+l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,a=new Int32Array(i);return Xt.arraycopy(e,r,a,0,i),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,l=n(r,e[o]);if(l>0)i=o+1;else if(l<0)a=o-1;else return o}return-i-1},t.numberComparator=function(e,r){return e-r},t})(),et=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),dn=(function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Xt.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=n[i]}var l=i*32+et.numberOfTrailingZeros(a);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=~n[i]}var l=i*32+et.numberOfTrailingZeros(a);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Le;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),a=this.bits,o=n;o<=i;o++){var l=o>n?0:e&31,c=o<i?31:r&31,f=(2<<c)-(1<<l);a[o]|=f}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Le;if(r===e)return!0;r--;for(var i=Math.floor(e/32),a=Math.floor(r/32),o=this.bits,l=i;l<=a;l++){var c=l>i?0:e&31,f=l<a?31:r&31,d=(2<<f)-(1<<c)&4294967295;if((o[l]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Le("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Le("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var a=0;a<i;a++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;r[n+a]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,a=0;a<n;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-a]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,a=1;a<n;a++){var f=e[a];c|=f<<32-l,e[a-1]=c,c=f>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Qr.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Qr.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t})(),Y_;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Y_||(Y_={}));const or=Y_;var aQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),me=(function(t){aQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(yi),oQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Nt||(Nt={}));var Yr=(function(){function t(e,r,n){for(var i,a,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var p=c[f];t.VALUES_TO_ECI.set(p,this)}try{for(var g=oQ(o),m=g.next();!m.done;m=g.next()){var b=m.value;t.NAME_TO_ECI.set(b,this)}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new me("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new me("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new me("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Nt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Nt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Nt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Nt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Nt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Nt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Nt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Nt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Nt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Nt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Nt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Nt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Nt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Nt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Nt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Nt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Nt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Nt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Nt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Nt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Nt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Nt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Nt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Nt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Nt.Big5,28,"Big5"),t.GB18030=new t(Nt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Nt.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),sQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),A1=(function(t){sQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(yi),ha=(function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Yr?e:Yr.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",a=0,o=e.length;a<o;a++){var l=e[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(n.equals(Yr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new A1("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Yr.UTF8)||e.equals(Yr.ISO8859_1)||e.equals(Yr.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},t})(),ht=(function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return ha.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(or.CHARACTER_SET)!==void 0)return r.get(or.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,o=!0,l=0,c=0,f=0,d=0,p=0,g=0,m=0,b=0,w=0,E=0,S=0,I=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,O=0;O<n&&(i||a||o);O++){var D=e[O]&255;o&&(l>0?(D&128)===0?o=!1:l--:(D&128)!==0&&((D&64)===0?o=!1:(l++,(D&32)===0?c++:(l++,(D&16)===0?f++:(l++,(D&8)===0?d++:o=!1))))),i&&(D>127&&D<160?i=!1:D>159&&(D<192||D===215||D===247)&&S++),a&&(p>0?D<64||D===127||D>252?a=!1:p--:D===128||D===160||D>239?a=!1:D>160&&D<224?(g++,b=0,m++,m>w&&(w=m)):D>127?(p++,m=0,b++,b>E&&(E=b)):(m=0,b=0))}return o&&l>0&&(o=!1),a&&p>0&&(a=!1),o&&(I||c+f+d>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||w>=3||E>=3)?t.SHIFT_JIS:i&&a?w===2&&g===2||S*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function a(l,c,f,d,p,g){if(l==="%%")return"%";if(r[++i]!==void 0){l=d?parseInt(d.substr(1)):void 0;var m=p?parseInt(p.substr(1)):void 0,b;switch(g){case"s":b=r[i];break;case"c":b=r[i][0];break;case"f":b=parseFloat(r[i]).toFixed(l);break;case"p":b=parseFloat(r[i]).toPrecision(l);break;case"e":b=parseFloat(r[i]).toExponential(l);break;case"x":b=parseInt(r[i]).toString(m||16);break;case"d":b=parseFloat(parseInt(r[i],m||10).toPrecision(l)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(m);for(var w=parseInt(f),E=f&&f[0]+""=="0"?"0":" ";b.length<w;)b=c!==void 0?b+E:E+b;return b}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},t.getBytes=function(e,r){return ha.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Yr.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Yr.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Yr.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),Ze=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ht.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t})(),Ao=(function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new Le("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),a=0;a<r;a++)for(var o=e[a],l=0;l<n;l++)o[l]&&i.set(l,a);return i},t.parseFromString=function(e,r,n){if(e===null)throw new Le("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,l=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(l===-1)l=a-o;else if(a-o!==l)throw new Le("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!0,a++;else if(e.substring(f,f+n.length)===n)f+=n.length,i[a]=!1,a++;else throw new Le("illegal character encountered: "+e.substring(f));if(a>o){if(l===-1)l=a-o;else if(a-o!==l)throw new Le("row lengths do not match");c++}for(var d=new t(l,c),p=0;p<a;p++)i[p]&&d.set(Math.floor(p%l),Math.floor(p/l));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Le("input matrix dimensions do not match");for(var r=new dn(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var l=a*n,c=e.getRow(a,r).getBitArray(),f=0;f<n;f++)i[l+f]^=c[f]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new Le("Left and top must be nonnegative");if(i<1||n<1)throw new Le("Height and width must be at least 1");var a=e+n,o=r+i;if(o>this.height||a>this.width)throw new Le("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,f=r;f<o;f++)for(var d=f*l,p=e;p<a;p++)c[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new dn(this.width):r.clear();for(var n=this.rowSize,i=this.bits,a=e*n,o=0;o<n;o++)r.setBulk(o*32,i[a+o]);return r},t.prototype.setRow=function(e,r){Xt.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new dn(e),i=new dn(e),a=0,o=Math.floor((r+1)/2);a<o;a++)n=this.getRow(a,n),i=this.getRow(r-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,a=e,o=r,l=-1,c=-1,f=0;f<r;f++)for(var d=0;d<n;d++){var p=i[f*n+d];if(p!==0){if(f<o&&(o=f),f>c&&(c=f),d*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;d*32+g<a&&(a=d*32+g)}if(d*32+31>l){for(var g=31;!(p>>>g);)g--;d*32+g>l&&(l=d*32+g)}}}return l<a||c<o?null:Int32Array.from([a,o,l-a+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,a=n%e*32,o=r[n],l=0;(o<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,o=r[n],l=31;!(o>>>l);)l--;return a+=l,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Qr.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Qr.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new Ze,a=0,o=this.height;a<o;a++){for(var l=0,c=this.width;l<c;l++)i.append(this.get(l,a)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),lQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),oe=(function(t){lQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(yi),cQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uQ=(function(t){cQ(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new dn(a):n.clear(),this.initArrays(a);for(var o=i.getRow(r,this.luminances),l=this.buckets,c=0;c<a;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(l);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&n.set(c);else for(var d=o[0]&255,p=o[1]&255,c=1;c<a-1;c++){var g=o[c+1]&255;(p*4-d-g)/2<f&&n.set(c),d=p,p=g}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),a=new Ao(n,i);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(i*l/5),f=r.getRow(c,this.luminances),d=Math.floor(n*4/5),p=Math.floor(n/5);p<d;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(o),b=r.getMatrix(),l=0;l<i;l++)for(var w=l*n,p=0;p<n;p++){var g=b[w+p]&255;g<m&&a.set(p,l)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,a=0,o=0,l=0;l<n;l++)r[l]>o&&(a=l,o=r[l]),r[l]>i&&(i=r[l]);for(var c=0,f=0,l=0;l<n;l++){var d=l-a,p=r[l]*d*d;p>f&&(c=l,f=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=n/16)throw new oe;for(var m=c-1,b=-1,l=c-1;l>a;l--){var w=l-a,p=w*w*(c-l)*(i-r[l]);p>b&&(m=l,b=p)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(tQ),fQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dQ=(function(t){fQ(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var l=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&l++;var c=e.calculateBlackPoints(a,o,l,n,i),f=new Ao(n,i);e.calculateThresholdForBlock(a,o,l,n,i,c,f),this.matrix=f}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,a,o,l,c){for(var f=o-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var m=e.cap(p,2,i-3),b=0;b<n;b++){var w=b<<e.BLOCK_SIZE_POWER;w>d&&(w=d);for(var E=e.cap(b,2,n-3),S=0,I=-2;I<=2;I++){var O=l[m+I];S+=O[E-2]+O[E-1]+O[E]+O[E+1]+O[E+2]}var D=S/25;e.thresholdBlock(r,w,g,D,a,c)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,a,o,l){for(var c=0,f=i*o+n;c<e.BLOCK_SIZE;c++,f+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[f+d]&255)<=a&&l.set(n+d,i+c)},e.calculateBlackPoints=function(r,n,i,a,o){for(var l=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(n);var p=d<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var g=0;g<n;g++){var m=g<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var b=0,w=255,E=0,S=0,I=p*a+m;S<e.BLOCK_SIZE;S++,I+=a){for(var O=0;O<e.BLOCK_SIZE;O++){var D=r[I+O]&255;b+=D,D<w&&(w=D),D>E&&(E=D)}if(E-w>e.MIN_DYNAMIC_RANGE)for(S++,I+=a;S<e.BLOCK_SIZE;S++,I+=a)for(var O=0;O<e.BLOCK_SIZE;O++)b+=r[I+O]&255}var k=b>>e.BLOCK_SIZE_POWER*2;if(E-w<=e.MIN_DYNAMIC_RANGE&&(k=w/2,d>0&&g>0)){var B=(f[d-1][g]+2*f[d][g-1]+f[d-1][g-1])/4;w<B&&(k=B)}f[d][g]=k}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(uQ),Om=(function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new A1("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new A1("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new A1("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Ze,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var o=i[a]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t})(),hQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),TA=(function(t){hQ(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(r[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,a){return new e(this.delegate.crop(r,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Om),pQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gQ=(function(t){pQ(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var l=0,c=0,f=r.length;l<f;l+=4,c++){var d=void 0,p=r[l+3];if(p===0)d=255;else{var g=r[l],m=r[l+1],b=r[l+2];d=306*g+601*m+117*b+512>>10}o[c]=d}else for(var l=0,c=0,w=r.length;l<w;l+=4,c++){var d=void 0,p=r[l+3];if(p===0)d=255;else{var g=r[l],m=r[l+1],b=r[l+2];d=306*g+601*m+117*b+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Le("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*l),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*l);return n.width=c,n.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new TA(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Om),vQ=(function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Qn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{f(n.next(d))}catch(p){o(p)}}function c(d){try{f(n.throw(d))}catch(p){o(p)}}function f(d){d.done?a(d.value):i(d.value).then(l,c)}f((n=n.apply(t,e||[])).next())})},Zn=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(d){return c([f,d])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(d){f=[6,d],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},mQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nd=(function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Qn(this,void 0,void 0,function(){var e,r,n,i,a,o,l,c,f,d,p,g;return Zn(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),r=[];try{for(n=mQ(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(l=a.deviceId||a.id,c=a.label||"Video device "+(r.length+1),f=a.groupId,d={deviceId:l,label:c,kind:o,groupId:f},r.push(d))}catch(b){p={error:b}}finally{try{i&&!i.done&&(g=n.return)&&g.call(n)}finally{if(p)throw p.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Qn(this,void 0,void 0,function(){var e;return Zn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new vQ(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Qn(this,void 0,void 0,function(){var r;return Zn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Qn(this,void 0,void 0,function(){return Zn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Qn(this,void 0,void 0,function(){var n,i;return Zn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Qn(this,void 0,void 0,function(){var n;return Zn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Qn(this,void 0,void 0,function(){var n,i;return Zn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Qn(this,void 0,void 0,function(){return Zn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Qn(this,void 0,void 0,function(){var i,a;return Zn(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Qn(this,void 0,void 0,function(){var i;return Zn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Qn(this,void 0,void 0,function(){var i;return Zn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Qn(this,void 0,void 0,function(){var n;return Zn(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Qn(this,void 0,void 0,function(){return Zn(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Da("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Da("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Da("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Da("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Da("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Da("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Da("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Da("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Da("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Da("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Qn(this,void 0,void 0,function(){return Zn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Qn(this,void 0,void 0,function(){return Zn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(o,l){if(i._stopAsyncDecode){l(new oe("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(g){var f=r&&g instanceof oe,d=g instanceof fn||g instanceof me,p=d&&n;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,l);l(g)}};return new Promise(function(o,l){return a(o,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof fn||c instanceof me,l=c instanceof oe;(o||l)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new gQ(n,r),a=new dQ(i);return new JY(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),Gn=(function(){function t(e,r,n,i,a,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=Xt.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Xt.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Xt.arraycopy(r,0,n,0,r.length),Xt.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),Q_;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Q_||(Q_={}));const je=Q_;var Z_;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Z_||(Z_={}));const Rn=Z_;var Rm=(function(){function t(e,r,n,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),Bh=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t})(),Ol=(function(){function t(e,r){if(r.length===0)throw new Le;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Xt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,a=r.length;i!==a;i++){var o=r[i];n=Bh.addOrSubtract(n,o)}return n}n=r[0];for(var l=r.length,c=this.field,i=1;i<l;i++)n=Bh.addOrSubtract(c.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;Xt.arraycopy(n,0,a,0,o);for(var l=o;l<n.length;l++)a[l]=Bh.addOrSubtract(r[l-o],n[l]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),l=this.field,c=0;c<n;c++)for(var f=r[c],d=0;d<a;d++)o[c+d]=Bh.addOrSubtract(o[c+d],l.multiply(f,i[d]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),a=this.coefficients,o=0;o<r;o++)i[o]=n.multiply(a[o],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Le;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),o=this.field,l=0;l<i;l++)a[l]=o.multiply(n[l],r);return new t(o,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Le("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=r.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var l=i.getDegree()-e.getDegree(),c=r.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(l,c),d=r.buildMonomial(l,c);n=n.addOrSubtract(d),i=i.addOrSubtract(f)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t})(),yQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gk=(function(t){yQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(yi),xQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gi=(function(t){xQ(e,t);function e(r,n,i){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=i;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);a.expTable=o;for(var f=new Int32Array(n),c=0;c<n-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new Ol(a,Int32Array.from([0])),a.one=new Ol(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Le;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Ol(this,i)},e.prototype.inverse=function(r){if(r===0)throw new gk;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+et.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Bh),bQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Gg=(function(t){bQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(yi),_Q=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Up=(function(t){_Q(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(yi),Pm=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new Ol(n,e),a=new Int32Array(r),o=!0,l=0;l<r;l++){var c=i.evaluateAt(n.exp(l+n.getGeneratorBase()));a[a.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var f=new Ol(n,a),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),f,r),p=d[0],g=d[1],m=this.findErrorLocations(p),b=this.findErrorMagnitudes(g,m),l=0;l<m.length;l++){var w=e.length-1-n.log(m[l]);if(w<0)throw new Gg("Bad error location");e[w]=gi.addOrSubtract(e[w],b[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=this.field,o=e,l=r,c=a.getZero(),f=a.getOne();l.getDegree()>=(n/2|0);){var d=o,p=c;if(o=l,c=f,o.isZero())throw new Gg("r_{i-1} was zero");l=d;for(var g=a.getZero(),m=o.getCoefficient(o.getDegree()),b=a.inverse(m);l.getDegree()>=o.getDegree()&&!l.isZero();){var w=l.getDegree()-o.getDegree(),E=a.multiply(l.getCoefficient(l.getDegree()),b);g=g.addOrSubtract(a.buildMonomial(w,E)),l=l.addOrSubtract(o.multiplyByMonomial(w,E))}if(f=g.multiply(c).addOrSubtract(p),l.getDegree()>=o.getDegree())throw new Up("Division algorithm failed to reduce polynomial?")}var S=f.getCoefficient(0);if(S===0)throw new Gg("sigmaTilde(0) was zero");var I=a.inverse(S),O=f.multiplyScalar(I),D=l.multiplyScalar(I);return[O,D]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,a=this.field,o=1;o<a.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=a.inverse(o),i++);if(i!==r)throw new Gg("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),a=this.field,o=0;o<n;o++){for(var l=a.inverse(r[o]),c=1,f=0;f<n;f++)if(o!==f){var d=a.multiply(r[f],l),p=(d&1)===0?d|1:d&-2;c=a.multiply(c,p)}i[o]=a.multiply(e.evaluateAt(l),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],l))}return i},t})(),En;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(En||(En={}));var g6=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),a=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),l=new Rm(a,o,null,null);return l.setNumBits(i.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=En.UPPER,i=En.UPPER,a="",o=0;o<r;)if(i===En.BINARY){if(r-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(r-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(r-o<8){o=r;break}var f=t.readCode(e,o,8);a+=ht.castAsNonUtf8Char(f),o+=8}i=n}else{var d=i===En.DIGIT?4:5;if(r-o<d)break;var f=t.readCode(e,o,d);o+=d;var p=t.getCharacter(i,f);p.startsWith("CTRL_")?(n=i,i=t.getTable(p.charAt(5)),p.charAt(6)==="L"&&(n=i)):(a+=p,i=n)}return a},t.getTable=function(e){switch(e){case"L":return En.LOWER;case"P":return En.PUNCT;case"M":return En.MIXED;case"D":return En.DIGIT;case"B":return En.BINARY;case"U":default:return En.UPPER}},t.getCharacter=function(e,r){switch(e){case En.UPPER:return t.UPPER_TABLE[r];case En.LOWER:return t.LOWER_TABLE[r];case En.MIXED:return t.MIXED_TABLE[r];case En.PUNCT:return t.PUNCT_TABLE[r];case En.DIGIT:return t.DIGIT_TABLE[r];default:throw new Up("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=gi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=gi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=gi.AZTEC_DATA_10):(n=12,r=gi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new me;for(var o=e.length%n,l=new Int32Array(a),c=0;c<a;c++,o+=n)l[c]=t.readCode(e,o,n);try{var f=new Pm(r);f.decode(l,a-i)}catch(E){throw new me(E)}for(var d=(1<<n)-1,p=0,c=0;c<i;c++){var g=l[c];if(g===0||g===d)throw new me;(g===1||g===d-1)&&p++}for(var m=new Array(i*n-p),b=0,c=0;c<i;c++){var g=l[c];if(g===1||g===d-1)m.fill(g>1,b,b+n-1),b+=n-1;else for(var w=n-1;w>=0;--w)m[b++]=(g&1<<w)!==0}return m},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<a.length;l++)a[l]=l;else for(var c=i+1+2*et.truncDivision(et.truncDivision(i,2)-1,15),f=i/2,d=et.truncDivision(c,2),l=0;l<f;l++){var p=l+et.truncDivision(l,15);a[f-l-1]=d-p-1,a[f+l]=d+p+1}for(var l=0,g=0;l<n;l++){for(var m=(n-l)*4+(r?9:12),b=l*2,w=i-1-b,E=0;E<m;E++)for(var S=E*2,I=0;I<2;I++)o[g+S+I]=e.get(a[b+I],a[b+E]),o[g+2*m+S+I]=e.get(a[b+E],a[w-I]),o[g+4*m+S+I]=e.get(a[w-I],a[w-E]),o[g+6*m+S+I]=e.get(a[w-E],a[b+I]);g+=m*8}return o},t.readCode=function(e,r,n){for(var i=0,a=r;a<r+n;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),yt=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var a=e-n,o=r-i;return Math.sqrt(a*a+o*o)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var a=e[n];r+=a}return r},t})(),J_=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),Ie=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*J_.floatToIntBits(this.x)+J_.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,l;if(n>=r&&n>=i?(o=e[0],a=e[1],l=e[2]):i>=n&&i>=r?(o=e[1],a=e[0],l=e[2]):(o=e[2],a=e[0],l=e[1]),this.crossProductZ(a,o,l)<0){var c=a;a=l,l=c}e[0]=a,e[1]=o,e[2]=l},t.distance=function(e,r){return yt.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,a=r.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},t})(),IA=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),wQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),EQ=(function(t){wQ(e,t);function e(r,n,i,a,o){var l=t.call(this,r,n)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(IA),ew=(function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,a=!1,o=!0,l=!1,c=!1,f=!1,d=!1,p=!1,g=this.width,m=this.height;o;){o=!1;for(var b=!0;(b||!c)&&r<g;)b=this.containsBlackPoint(n,i,r,!1),b?(r++,o=!0,c=!0):c||r++;if(r>=g){a=!0;break}for(var w=!0;(w||!f)&&i<m;)w=this.containsBlackPoint(e,r,i,!0),w?(i++,o=!0,f=!0):f||i++;if(i>=m){a=!0;break}for(var E=!0;(E||!d)&&e>=0;)E=this.containsBlackPoint(n,i,e,!1),E?(e--,o=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var S=!0;(S||!p)&&n>=0;)S=this.containsBlackPoint(e,r,n,!0),S?(n--,o=!0,p=!0):p||n--;if(n<0){a=!0;break}o&&(l=!0)}if(!a&&l){for(var I=r-e,O=null,D=1;O===null&&D<I;D++)O=this.getBlackPointOnSegment(e,i-D,e+D,i);if(O==null)throw new oe;for(var k=null,D=1;k===null&&D<I;D++)k=this.getBlackPointOnSegment(e,n+D,e+D,n);if(k==null)throw new oe;for(var B=null,D=1;B===null&&D<I;D++)B=this.getBlackPointOnSegment(r,n+D,r-D,n);if(B==null)throw new oe;for(var R=null,D=1;R===null&&D<I;D++)R=this.getBlackPointOnSegment(r,i-D,r-D,i);if(R==null)throw new oe;return this.centerEdges(R,O,B,k)}else throw new oe},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var a=yt.round(yt.distance(e,r,n,i)),o=(n-e)/a,l=(i-r)/a,c=this.image,f=0;f<a;f++){var d=yt.round(e+f*o),p=yt.round(r+f*l);if(c.get(d,p))return new Ie(d,p)}return null},t.prototype.centerEdges=function(e,r,n,i){var a=e.getX(),o=e.getY(),l=r.getX(),c=r.getY(),f=n.getX(),d=n.getY(),p=i.getX(),g=i.getY(),m=t.CORR;return a<this.width/2?[new Ie(p-m,g+m),new Ie(l+m,c+m),new Ie(f-m,d-m),new Ie(a+m,o-m)]:[new Ie(p+m,g+m),new Ie(l+m,c-m),new Ie(f-m,d+m),new Ie(a-m,o-m)]},t.prototype.containsBlackPoint=function(e,r,n,i){var a=this.image;if(i){for(var o=e;o<=r;o++)if(a.get(o,n))return!0}else for(var l=e;l<=r;l++)if(a.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),v6=(function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<r.length&&a;o+=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>i)throw new oe;a=!1,l===-1?(r[o]=0,a=!0):l===n&&(r[o]=n-1,a=!0),c===-1?(r[o+1]=0,a=!0):c===i&&(r[o+1]=i-1,a=!0)}a=!0;for(var o=r.length-2;o>=0&&a;o-=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>i)throw new oe;a=!1,l===-1?(r[o]=0,a=!0):l===n&&(r[o]=n-1,a=!0),c===-1?(r[o+1]=0,a=!0):c===i&&(r[o+1]=i-1,a=!0)}},t})(),vk=(function(){function t(e,r,n,i,a,o,l,c,f){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=a,this.a32=o,this.a13=l,this.a23=c,this.a33=f}return t.quadrilateralToQuadrilateral=function(e,r,n,i,a,o,l,c,f,d,p,g,m,b,w,E){var S=t.quadrilateralToSquare(e,r,n,i,a,o,l,c),I=t.squareToQuadrilateral(f,d,p,g,m,b,w,E);return I.times(S)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,a=this.a13,o=this.a21,l=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=0;g<r;g+=2){var m=e[g],b=e[g+1],w=a*m+c*b+p;e[g]=(n*m+o*b+f)/w,e[g+1]=(i*m+l*b+d)/w}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,a=this.a13,o=this.a21,l=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=e.length,m=0;m<g;m++){var b=e[m],w=r[m],E=a*b+c*w+p;e[m]=(n*b+o*w+f)/E,r[m]=(i*b+l*w+d)/E}},t.squareToQuadrilateral=function(e,r,n,i,a,o,l,c){var f=e-n+a-l,d=r-i+o-c;if(f===0&&d===0)return new t(n-e,a-n,e,i-r,o-i,r,0,0,1);var p=n-a,g=l-a,m=i-o,b=c-o,w=p*b-g*m,E=(f*b-g*d)/w,S=(p*d-f*m)/w;return new t(n-e+E*n,l-e+S*l,e,i-r+E*i,c-r+S*c,r,E,S,1)},t.quadrilateralToSquare=function(e,r,n,i,a,o,l,c){return t.squareToQuadrilateral(e,r,n,i,a,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),AQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),SQ=(function(t){AQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,a,o,l,c,f,d,p,g,m,b,w,E,S,I,O,D){var k=vk.quadrilateralToQuadrilateral(a,o,l,c,f,d,p,g,m,b,w,E,S,I,O,D);return this.sampleGridWithTransform(r,n,i,k)},e.prototype.sampleGridWithTransform=function(r,n,i,a){if(n<=0||i<=0)throw new oe;for(var o=new Ao(n,i),l=new Float32Array(2*n),c=0;c<i;c++){for(var f=l.length,d=c+.5,p=0;p<f;p+=2)l[p]=p/2+.5,l[p+1]=d;a.transformPoints(l),v6.checkAndNudgePoints(r,l);try{for(var p=0;p<f;p+=2)r.get(Math.floor(l[p]),Math.floor(l[p+1]))&&o.set(p/2,c)}catch{throw new oe}}return o},e})(v6),OA=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new SQ,t})(),fi=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Ie(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),CQ=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new EQ(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new oe;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,a=0;a<4;a++){var o=n[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,o,l){var c=(a>>r-2<<1)+(a&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(et.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new oe},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var a=n-i,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new Pm(gi.AZTEC_PARAM);c.decode(o,a)}catch{throw new oe}for(var f=0,l=0;l<i;l++)f=(f<<4)+o[l];return f},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),f=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,l)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(l,c,f,d))break}r=l,n=c,i=f,a=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;var g=new Ie(r.getX()+.5,r.getY()-.5),m=new Ie(n.getX()+.5,n.getY()+.5),b=new Ie(i.getX()-.5,i.getY()+.5),w=new Ie(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,m,b,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var a=new ew(this.image).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new fi(o+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new fi(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new fi(o-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new fi(o-7,l-7),!1,-1,-1).toResultPoint()}var c=yt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),f=yt.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var a=new ew(this.image,15,c,f).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new fi(c+7,f-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new fi(c+7,f+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new fi(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new fi(c-7,f-7),!1,-1,-1).toResultPoint()}return c=yt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),f=yt.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new fi(c,f)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,a){var o=OA.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,f=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,f,c,f,f,c,f,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,a=this.distanceResultPoint(e,r),o=a/n,l=e.getX(),c=e.getY(),f=o*(r.getX()-e.getX())/a,d=o*(r.getY()-e.getY())/a,p=0;p<n;p++)this.image.get(yt.round(l+p*f),yt.round(c+p*d))&&(i|=1<<n-p-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var a=3;e=new fi(e.getX()-a,e.getY()+a),r=new fi(r.getX()-a,r.getY()-a),n=new fi(n.getX()+a,n.getY()-a),i=new fi(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var l=this.getColor(e,r);return l!==o||(l=this.getColor(r,n),l!==o)?!1:(l=this.getColor(n,i),l===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),p=0;p<d;p++)l+=i,c+=a,this.image.get(yt.round(l),yt.round(c))!==f&&o++;var g=o/n;return g>.1&&g<.9?0:g<=.1===f?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var a=e.getX()+n,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n,o+=i;for(a-=n,o-=i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n;for(a-=n;this.isValid(a,o)&&this.image.get(a,o)===r;)o+=i;return o-=i,new fi(a,o)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Ie(l+i*a,c+i*o),d=new Ie(l-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Ie(l+i*a,c+i*o),g=new Ie(l-i*a,c-i*o),m=[f,p,d,g];return m},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=yt.round(e.getX()),n=yt.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return yt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return yt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(et.truncDivision(this.nbLayers-4,8)+1)+15},t})(),tw=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new CQ(e.getBlackMatrix()),a=null,o=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(r,a),o=new g6().decode(l)}catch(p){n=p}if(o==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(r,a),o=new g6().decode(l)}catch(p){throw n??p}var c=new Gn(o.getText(),o.getRawBytes(),o.getNumBits(),a,je.AZTEC,Xt.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(Rn.BYTE_SEGMENTS,f);var d=o.getECLevel();return d!=null&&c.putMetadata(Rn.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(or.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,a,o){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t})(),TQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){TQ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new tw,r)||this}return e})(nd);var Zr=(function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(or.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,r),o=a.getResultMetadata(),l=270;o!==null&&o.get(Rn.ORIENTATION)===!0&&(l=l+o.get(Rn.ORIENTATION)%360),a.putMetadata(Rn.ORIENTATION,l);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Ie(f-c[d].getY()-1,c[d].getX());return a}else throw new oe}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),a=new dn(n),o=r&&r.get(or.TRY_HARDER)===!0,l=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var p=Math.trunc((d+1)/2),g=(d&1)===0,m=f+l*(g?p:-p);if(m<0||m>=i)break;try{a=e.getBlackRow(m,a)}catch{continue}for(var b=function(I){if(I===1&&(a.reverse(),r&&r.get(or.NEED_RESULT_POINT_CALLBACK)===!0)){var O=new Map;r.forEach(function(B,R){return O.set(R,B)}),O.delete(or.NEED_RESULT_POINT_CALLBACK),r=O}try{var D=w.decodeRow(m,a,r);if(I===1){D.putMetadata(Rn.ORIENTATION,180);var k=D.getResultPoints();k!==null&&(k[0]=new Ie(n-k[0].getX()-1,k[0].getY()),k[1]=new Ie(n-k[1].getX()-1,k[1].getY()))}return{value:D}}catch{}},w=this,E=0;E<2;E++){var S=b(E);if(typeof S=="object")return S.value}}throw new oe},t.recordPattern=function(e,r,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var o=e.getSize();if(r>=o)throw new oe;for(var l=!e.get(r),c=0,f=r;f<o;){if(e.get(f)!==l)n[c]++;else{if(++c===i)break;n[c]=1,l=!l}f++}if(!(c===i||c===i-1&&f===o))throw new oe},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,a=e.get(r);r>0&&i>=0;)e.get(--r)!==a&&(i--,a=!a);if(i>=0)throw new oe;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,l=0;l<i;l++)a+=e[l],o+=r[l];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;n*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=r[d]*c,m=p>g?p-g:g-p;if(m>n)return Number.POSITIVE_INFINITY;f+=m}return f/a},t})(),IQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),m6=(function(t){IQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),l=i,c=!1,f=6,d=i;d<n;d++)if(r.get(d)!==c)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var b=Zr.patternMatchVariance(o,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);b<p&&(p=b,g=m)}if(g>=0&&r.isRange(Math.max(0,l-(d-l)/2),l,!1))return Int32Array.from([l,d,g]);l+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new oe},e.decodeCode=function(r,n,i){Zr.recordPattern(r,i,n);for(var a=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],f=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=l)}if(o>=0)return o;throw new oe},e.prototype.decodeRow=function(r,n,i){var a=i&&i.get(or.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,f=new Uint8Array(20);f[c++]=l;var d;switch(l){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new me}for(var p=!1,g=!1,m="",b=o[0],w=o[1],E=Int32Array.from([0,0,0,0,0,0]),S=0,I=0,O=l,D=0,k=!0,B=!1,R=!1;!p;){var N=g;switch(g=!1,S=I,I=e.decodeCode(n,E,w),f[c++]=I,I!==e.CODE_STOP&&(k=!0),I!==e.CODE_STOP&&(D++,O+=D*I),b=w,w+=E.reduce(function(re,he){return re+he},0),I){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new me}switch(d){case e.CODE_CODE_A:if(I<64)R===B?m+=String.fromCharCode(32+I):m+=String.fromCharCode(32+I+128),R=!1;else if(I<96)R===B?m+=String.fromCharCode(I-64):m+=String.fromCharCode(I+64),R=!1;else switch(I!==e.CODE_STOP&&(k=!1),I){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&R?(B=!0,R=!1):B&&R?(B=!1,R=!1):R=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(I<96)R===B?m+=String.fromCharCode(32+I):m+=String.fromCharCode(32+I+128),R=!1;else switch(I!==e.CODE_STOP&&(k=!1),I){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&R?(B=!0,R=!1):B&&R?(B=!1,R=!1):R=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(I<100)I<10&&(m+="0"),m+=I;else switch(I!==e.CODE_STOP&&(k=!1),I){case e.CODE_FNC_1:a&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}N&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var L=w-b;if(w=n.getNextUnset(w),!n.isRange(w,Math.min(n.getSize(),w+(w-b)/2),!1))throw new oe;if(O-=D*S,O%103!==S)throw new fn;var U=m.length;if(U===0)throw new oe;U>0&&k&&(d===e.CODE_CODE_C?m=m.substring(0,U-2):m=m.substring(0,U-1));for(var z=(o[1]+o[0])/2,H=b+L/2,j=f.length,ue=new Uint8Array(j),ye=0;ye<j;ye++)ue[ye]=f[ye];var X=[new Ie(z,r),new Ie(H,r)];return new Gn(m,ue,0,X,je.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Zr),OQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),k2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y6=(function(t){OQ(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var a,o,l,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,f),p=n.getNextSet(d[1]),g=n.getSize(),m,b;do{e.recordPattern(n,p,f);var w=e.toNarrowWidePattern(f);if(w<0)throw new oe;m=e.patternToChar(w),this.decodeRowResult+=m,b=p;try{for(var E=(a=void 0,k2(f)),S=E.next();!S.done;S=E.next()){var I=S.value;p+=I}}catch(j){a={error:j}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}p=n.getNextSet(p)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var D=k2(f),k=D.next();!k.done;k=D.next()){var I=k.value;O+=I}}catch(j){l={error:j}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(l)throw l.error}}var B=p-b-O;if(p!==g&&B*2<O)throw new oe;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,N=0,L=0;L<R;L++)N+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(L));if(this.decodeRowResult.charAt(R)!==e.ALPHABET_STRING.charAt(N%43))throw new fn;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new oe;var U;this.extendedMode?U=e.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;var z=(d[1]+d[0])/2,H=b+O/2;return new Gn(U,null,0,[new Ie(z,r),new Ie(H,r)],je.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),a=r.getNextSet(0),o=0,l=a,c=!1,f=n.length,d=a;d<i;d++)if(r.get(d)!==c)n[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((d-l)/2)),l,!1))return[l,d];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new oe},e.toNarrowWidePattern=function(r){var n,i,a=r.length,o=0,l;do{var c=2147483647;try{for(var f=(n=void 0,k2(r)),d=f.next();!d.done;d=f.next()){var p=d.value;p<c&&p>o&&(c=p)}}catch(w){n={error:w}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}o=c,l=0;for(var g=0,m=0,b=0;b<a;b++){var p=r[b];p>o&&(m|=1<<a-1-b,l++,g+=p)}if(l===3){for(var b=0;b<a&&l>0;b++){var p=r[b];if(p>o&&(l--,p*2>=g))return-1}return m}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new oe},e.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=r.charAt(a+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new me;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new me;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new me;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new me;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Zr),RQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),j2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x6=(function(t){RQ(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var a,o,l,c,f=this.findAsteriskPattern(n),d=n.getNextSet(f[1]),p=n.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var m,b;do{e.recordPattern(n,d,g);var w=this.toPattern(g);if(w<0)throw new oe;m=this.patternToChar(w),this.decodeRowResult+=m,b=d;try{for(var E=(a=void 0,j2(g)),S=E.next();!S.done;S=E.next()){var I=S.value;d+=I}}catch(L){a={error:L}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}d=n.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var D=j2(g),k=D.next();!k.done;k=D.next()){var I=k.value;O+=I}}catch(L){l={error:L}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(l)throw l.error}}if(d===p||!n.get(d))throw new oe;if(this.decodeRowResult.length<2)throw new oe;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),R=(f[1]+f[0])/2,N=b+O/2;return new Gn(B,null,0,[new Ie(R,r),new Ie(N,r)],je.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,l=!1,c=a.length,f=0,d=i;d<n;d++)if(r.get(d)!==l)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,l=!l}throw new oe},e.prototype.toPattern=function(r){var n,i,a=0;try{for(var o=j2(r),l=o.next();!l.done;l=o.next()){var c=l.value;a+=c}}catch(b){n={error:b}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var f=0,d=r.length,p=0;p<d;p++){var g=Math.round(r[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var m=0;m<g;m++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new oe},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o>="a"&&o<="d"){if(a>=n-1)throw new me;var l=r.charAt(a+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new me;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new me;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new me;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new me;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var a=1,o=0,l=n-1;l>=0;l--)o+=a*e.ALPHABET_STRING.indexOf(r.charAt(l)),++a>i&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new fn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Zr),PQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),DQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b6=(function(t){PQ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var a,o,l=this.decodeStart(n),c=this.decodeEnd(n),f=new Ze;e.decodeMiddle(n,l[1],c[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(or.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=d.length,m=!1,b=0;try{for(var w=DQ(p),E=w.next();!E.done;E=w.next()){var S=E.value;if(g===S){m=!0;break}S>b&&(b=S)}}catch(D){a={error:D}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}if(!m&&g>b&&(m=!0),!m)throw new me;var I=[new Ie(l[1],r),new Ie(c[0],r)],O=new Gn(d,null,0,I,je.ITF,new Date().getTime());return O},e.decodeMiddle=function(r,n,i,a){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<i;){Zr.recordPattern(r,n,o);for(var f=0;f<5;f++){var d=2*f;l[f]=o[d],c[f]=o[d+1]}var p=e.decodeDigit(l);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),o.forEach(function(g){n+=g})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!r.get(a);a--)i--;if(i!==0)throw new oe},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new oe;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof oe&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var a=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-a,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var a=i.length,o=new Int32Array(a),l=r.getSize(),c=!1,f=0,d=n;o.fill(0);for(var p=n;p<l;p++)if(r.get(p)!==c)o[f]++;else{if(f===a-1){if(Zr.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=o[0]+o[1],Xt.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new oe},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var l=e.PATTERNS[o],c=Zr.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,i=o):c===n&&(i=-1)}if(i>=0)return i%10;throw new oe},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Zr),NQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),jf=(function(t){NQ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,o);var l=i[0];a=i[1];var c=l-(a-l);c>=0&&(n=r.isRange(c,l,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new me;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new me;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,a){return this.findGuardPattern(r,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,i,a,o){var l=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var c=0,f=n,d=a.length,p=i,g=n;g<l;g++)if(r.get(g)!==p)o[c]++;else{if(c===d-1){if(Zr.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var m=o.slice(2,o.length),b=0;b<c-1;b++)o[b]=m[b];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new oe},e.decodeDigit=function(r,n,i,a){this.recordPattern(r,i,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=a.length,f=0;f<c;f++){var d=a[f],p=Zr.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,l=f)}if(l>=0)return l;throw new oe},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Zr),MQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kQ=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),l=t.parseExtensionString(o),c=[new Ie((n[0]+n[1])/2,e),new Ie(a,e)],f=new Gn(o,null,0,c,je.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&f.putAllMetadata(l),f},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],f=0,d=0;d<5&&c<l;d++){var p=jf.decodeDigit(e,o,c,jf.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,MQ(o)),m=g.next();!m.done;m=g.next()){var b=m.value;c+=b}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new oe;var w=this.determineCheckDigit(f);if(t.extensionChecksum(n.toString())!==w)throw new oe;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new oe},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Rn.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,o=a<10?"0"+a:a.toString();return r+i+"."+o},t})(),jQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LQ=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),l=t.parseExtensionString(o),c=[new Ie((n[0]+n[1])/2,e),new Ie(a,e)],f=new Gn(o,null,0,c,je.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&f.putAllMetadata(l),f},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],f=0,d=0;d<2&&c<l;d++){var p=jf.decodeDigit(e,o,c,jf.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,jQ(o)),m=g.next();!m.done;m=g.next()){var b=m.value;c+=b}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new oe;if(parseInt(n.toString())%4!==f)throw new oe;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Rn.ISSUE_NUMBER,parseInt(e)]])},t})(),BQ=(function(){function t(){}return t.decodeRow=function(e,r,n){var i=jf.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new kQ;return a.decodeRow(e,r,i)}catch{var o=new LQ;return o.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),UQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Kr=(function(t){UQ(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,i){var a=e.findStartGuardPattern(n),o=i==null?null:i.get(or.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new Ie((a[0]+a[1])/2,r);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(o!=null){var p=new Ie(f,r);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(n,f);if(o!=null){var m=new Ie((g[0]+g[1])/2,r);o.foundPossibleResultPoint(m)}var b=g[1],w=b+(b-g[0]);if(w>=n.getSize()||!n.isRange(b,w,!1))throw new oe;var E=d.toString();if(E.length<8)throw new me;if(!e.checkChecksum(E))throw new fn;var S=(a[1]+a[0])/2,I=(g[1]+g[0])/2,O=this.getBarcodeFormat(),D=[new Ie(S,r),new Ie(I,r)],k=new Gn(E,null,0,D,O,new Date().getTime()),B=0;try{var R=BQ.decodeRow(r,n,g[1]);k.putMetadata(Rn.UPC_EAN_EXTENSION,R.getText()),k.putAllMetadata(R.getResultMetadata()),k.addResultPoints(R.getResultPoints()),B=R.getText().length}catch{}var N=i==null?null:i.get(or.ALLOWED_EAN_EXTENSIONS);if(N!=null){var L=!1;for(var U in N)if(B.toString()===U){L=!0;break}if(!L)throw new oe}return O===je.EAN_13||je.UPC_A,k},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new me;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new me;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(jf),FQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rw=(function(t){FQ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,l,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=r.getSize(),p=n[1],g=0,m=0;m<6&&p<d;m++){var b=Kr.decodeDigit(r,f,p,Kr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);try{for(var w=(a=void 0,_6(f)),E=w.next();!E.done;E=w.next()){var S=E.value;p+=S}}catch(k){a={error:k}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}b>=10&&(g|=1<<5-m)}i=e.determineFirstDigit(i,g);var I=Kr.findGuardPattern(r,p,!0,Kr.MIDDLE_PATTERN,new Int32Array(Kr.MIDDLE_PATTERN.length).fill(0));p=I[1];for(var m=0;m<6&&p<d;m++){var b=Kr.decodeDigit(r,f,p,Kr.L_PATTERNS);i+=String.fromCharCode(48+b);try{for(var O=(l=void 0,_6(f)),D=O.next();!D.done;D=O.next()){var S=D.value;p+=S}}catch(R){l={error:R}}finally{try{D&&!D.done&&(c=O.return)&&c.call(O)}finally{if(l)throw l.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return je.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new oe},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Kr),zQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),w6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E6=(function(t){zQ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,l,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=r.getSize(),p=n[1],g=0;g<4&&p<d;g++){var m=Kr.decodeDigit(r,f,p,Kr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var b=(a=void 0,w6(f)),w=b.next();!w.done;w=b.next()){var E=w.value;p+=E}}catch(D){a={error:D}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}}var S=Kr.findGuardPattern(r,p,!0,Kr.MIDDLE_PATTERN,new Int32Array(Kr.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var g=0;g<4&&p<d;g++){var m=Kr.decodeDigit(r,f,p,Kr.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var I=(l=void 0,w6(f)),O=I.next();!O.done;O=I.next()){var E=O.value;p+=E}}catch(B){l={error:B}}finally{try{O&&!O.done&&(c=I.return)&&c.call(I)}finally{if(l)throw l.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return je.EAN_8},e})(Kr),VQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),A6=(function(t){VQ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new rw,r}return e.prototype.getBarcodeFormat=function(){return je.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new Gn(n.substring(1),null,null,r.getResultPoints(),je.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new oe},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Kr),HQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),$Q=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S6=(function(t){HQ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,l=this.decodeMiddleCounters.map(function(E){return E});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),f=n[1],d=0,p=0;p<6&&f<c;p++){var g=e.decodeDigit(r,l,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(a=void 0,$Q(l)),b=m.next();!b.done;b=m.next()){var w=b.value;f+=w}}catch(E){a={error:E}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}g>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Ze(i),d),f},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Kr.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){r.insert(0,"0"+i),r.append("0"+a);return}throw oe.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return je.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new Ze;i.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Kr),qQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),C6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L2=(function(t){qQ(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(or.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(je.EAN_13)>-1&&a.push(new rw),i.indexOf(je.UPC_A)>-1&&a.push(new A6),i.indexOf(je.EAN_8)>-1&&a.push(new E6),i.indexOf(je.UPC_E)>-1&&a.push(new S6)),a.length===0&&(a.push(new rw),a.push(new A6),a.push(new E6),a.push(new S6)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,i){var a,o;try{for(var l=C6(this.readers),c=l.next();!c.done;c=l.next()){var f=c.value;try{var d=f.decodeRow(r,n,i),p=d.getBarcodeFormat()===je.EAN_13&&d.getText().charAt(0)==="0",g=i==null?null:i.get(or.POSSIBLE_FORMATS),m=g==null||g.includes(je.UPC_A);if(p&&m){var b=d.getRawBytes(),w=new Gn(d.getText().substring(1),b,b?b.length:null,d.getResultPoints(),je.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}}}catch(E){a={error:E}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}throw new oe},e.prototype.reset=function(){var r,n;try{for(var i=C6(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e})(Zr),GQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),WQ=(function(t){GQ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var a=this.getValidRowData(n);if(!a)throw new oe;var o=this.codaBarDecodeRow(a.row);if(!o)throw new oe;return new Gn(o,null,0,[new Ie(a.left,r),new Ie(a.right,r)],je.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var o=[],l=n[0],c=1,f=1;f<n.length;f++)n[f]===l?c++:(l=n[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(c,f){return(c+f)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e})(Zr),KQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),XQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jc=(function(t){KQ(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(Zr.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new oe},e.count=function(r){return yt.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]>a&&(a=n[o],i=o);r[i]++},e.decrement=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]<a&&(a=n[o],i=o);r[i]--},e.isFinderPattern=function(r){var n,i,a=r[0]+r[1],o=a+r[2]+r[3],l=a/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=XQ(r),p=d.next();!p.done;p=d.next()){var g=p.value;g>f&&(f=g),g<c&&(c=g)}}catch(m){n={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Zr),iv=(function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),mk=(function(){function t(e,r,n,i,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ie(n,a)),this.resultPoints.push(new Ie(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t})(),YQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vf=(function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,a,o=0;try{for(var l=YQ(e),c=l.next();!c.done;c=l.next()){var f=c.value;o+=f}}catch(I){i={error:I}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var d=0,p=0,g=e.length,m=0;m<g-1;m++){var b=void 0;for(b=1,p|=1<<m;b<e[m];b++,p&=~(1<<m)){var w=t.combins(o-b-1,g-m-2);if(n&&p===0&&o-b-(g-m-1)>=g-m-1&&(w-=t.combins(o-b-(g-m),g-m-2)),g-m-1>1){for(var E=0,S=o-b-(g-m-2);S>r;S--)E+=t.combins(o-b-S-1,g-m-3);w-=E*(g-1-m)}else o-b>r&&w--;d+=w}o-=b}return d},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var a=1,o=1,l=e;l>n;l--)a*=l,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},t})(),QQ=(function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new dn(n),a=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)(l&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},t})(),Dc=(function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),RA=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),ZQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Pa=(function(t){ZQ(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(RA),JQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Nc=(function(t){JQ(e,t);function e(r,n,i){var a=t.call(this,r)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(RA),eZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uf=(function(t){eZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new me;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(RA),Wg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tZ=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,a,o,l,c,f;if(!e)return null;if(e.length<2)throw new oe;var d=e.substring(0,2);try{for(var p=Wg(t.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var m=g.value;if(m[0]===d)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,m[2],e):t.processFixedAI(2,m[1],e)}}catch(B){r={error:B}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}if(e.length<3)throw new oe;var b=e.substring(0,3);try{for(var w=Wg(t.THREE_DIGIT_DATA_LENGTH),E=w.next();!E.done;E=w.next()){var m=E.value;if(m[0]===b)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,m[2],e):t.processFixedAI(3,m[1],e)}}catch(B){i={error:B}}finally{try{E&&!E.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var S=Wg(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),I=S.next();!I.done;I=S.next()){var m=I.value;if(m[0]===b)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,m[2],e):t.processFixedAI(4,m[1],e)}}catch(B){o={error:B}}finally{try{I&&!I.done&&(l=S.return)&&l.call(S)}finally{if(o)throw o.error}}if(e.length<4)throw new oe;var O=e.substring(0,4);try{for(var D=Wg(t.FOUR_DIGIT_DATA_LENGTH),k=D.next();!k.done;k=D.next()){var m=k.value;if(m[0]===O)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,m[2],e):t.processFixedAI(4,m[1],e)}}catch(B){c={error:B}}finally{try{k&&!k.done&&(f=D.return)&&f.call(D)}finally{if(c)throw c.error}}throw new oe},t.processFixedAI=function(e,r,n){if(n.length<e)throw new oe;var i=n.substring(0,e);if(n.length<e+r)throw new oe;var a=n.substring(e,e+r),o=n.substring(e+r),l="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var o=n.substring(e,a),l=n.substring(a),c="("+i+")"+o,f=t.parseFieldsInGeneralPurpose(l);return f==null?c:c+f},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),S1=(function(){function t(e){this.buffer=new Ze,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var a=this.decodeGeneralPurposeField(n,i),o=tZ.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new uf(this.information.getSize(),uf.FNC1,uf.FNC1):new uf(this.information.getSize(),r-1,uf.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new uf(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,a=0;a<n;++a)e.get(r+a)&&(i|=1<<n-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Nc(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Nc(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Nc(this.current.getPosition(),this.buffer.toString()):r=new Nc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Dc(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dc(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dc(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dc(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Pa(e+5,Pa.FNC1);if(r>=5&&r<15)return new Pa(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Pa(e+7,""+(n+1));if(n>=90&&n<116)return new Pa(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new me}return new Pa(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Pa(e+5,Pa.FNC1);if(r>=5&&r<15)return new Pa(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Pa(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Up("Decoding invalid alphanumeric value: "+n)}return new Pa(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t})(),yk=(function(){function t(e){this.information=e,this.generalDecoder=new S1(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),rZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Na=(function(t){rZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,a=0;a<13;a++){var o=r.charAt(a+n).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e})(yk),nZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),iZ=(function(t){nZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ze;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Na),aZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),oZ=(function(t){aZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ze;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(yk),sZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),C1=(function(t){sZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,a);for(var o=this.checkWeight(a),l=1e5,c=0;c<5;++c)o/l===0&&r.append("0"),l/=10;r.append(o)},e})(Na),lZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xk=(function(t){lZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+C1.GTIN_SIZE+e.WEIGHT_SIZE)throw new oe;var r=new Ze;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+C1.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(C1),cZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uZ=(function(t){cZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e})(xk),fZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dZ=(function(t){fZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e})(xk),hZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pZ=(function(t){hZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Na.GTIN_SIZE)throw new oe;var r=new Ze;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Na),gZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vZ=(function(t){gZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Na.GTIN_SIZE)throw new oe;var r=new Ze;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Na.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Na),mZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),fl=(function(t){mZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new oe;var r=new Ze;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var l=i;l/10===0&&r.append("0"),r.append(l),o/10===0&&r.append("0"),r.append(o),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(C1);function yZ(t){try{if(t.get(1))return new iZ(t);if(!t.get(2))return new oZ(t);var e=S1.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new uZ(t);case 5:return new dZ(t)}var r=S1.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new pZ(t);case 13:return new vZ(t)}var n=S1.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new fl(t,"310","11");case 57:return new fl(t,"320","11");case 58:return new fl(t,"310","13");case 59:return new fl(t,"320","13");case 60:return new fl(t,"310","15");case 61:return new fl(t,"320","15");case 62:return new fl(t,"310","17");case 63:return new fl(t,"320","17")}}catch(i){throw console.log(i),new Up("unknown decoder: "+t)}}var T6=(function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),xZ=(function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,a){r.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t})(),bZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_Z=(function(t){bZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof oe){if(!this.pairs.length)throw new oe;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new oe},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,a,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,dl(r)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(r);p.push(l);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new oe},e.isValidSequence=function(r){var n,i;try{for(var a=dl(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var l=o.value;if(!(r.length>l.length)){for(var c=!0,f=0;f<r.length;f++)if(r[f].getFinderPattern().getValue()!==l[f]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,a=!1,o=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>r){o=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new xZ(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,a,o,l,c,f;try{for(var d=dl(n),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getPairs().length!==r.length){var m=!0;try{for(var b=(o=void 0,dl(g.getPairs())),w=b.next();!w.done;w=b.next()){var E=w.value,S=!1;try{for(var I=(c=void 0,dl(r)),O=I.next();!O.done;O=I.next()){var D=O.value;if(T6.equals(E,D)){S=!0;break}}}catch(k){c={error:k}}finally{try{O&&!O.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}S||(m=!1)}}catch(k){o={error:k}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}}}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,a,o,l,c,f;try{for(var d=dl(n),p=d.next();!p.done;p=d.next()){var g=p.value,m=!0;try{for(var b=(o=void 0,dl(r)),w=b.next();!w.done;w=b.next()){var E=w.value,S=!1;try{for(var I=(c=void 0,dl(g.getPairs())),O=I.next();!O.done;O=I.next()){var D=O.value;if(E.equals(D)){S=!0;break}}}catch(k){c={error:k}}finally{try{O&&!O.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}if(!S){m=!1;break}}}catch(k){o={error:k}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(o)throw o.error}}if(m)return!0}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=QQ.buildBitArray(r),i=yZ(n),a=i.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new Gn(a,null,null,c,je.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var d=211*(o-4)+a;return d===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var o,l=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,i,a),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var f=this.decodeDataCharacter(r,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new oe;var d;try{d=this.decodeDataCharacter(r,o,a,!1)}catch(p){d=null,console.log(p)}return new T6(f,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=r.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var f=n.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;l<o&&(d=!r.get(l),!!d);)l++;for(var p=0,g=l,m=l;m<o;m++)if(r.get(m)!==d)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=m;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,d=!d}throw new oe},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var a=r[i];r[i]=r[n-i-1],r[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,i){var a,o,l;if(i){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var f=this.getDecodeFinderCounters();Xt.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new mk(d,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(r,n,i,a){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var d=o[c];o[c]=o[f],o[f]=d}}var p=17,g=yt.sum(new Int32Array(o))/p,m=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(g-m)/m>.3)throw new oe;for(var b=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var I=1*o[c]/g,O=I+.5;if(O<1){if(I<.3)throw new oe;O=1}else if(O>8){if(I>8.7)throw new oe;O=8}var D=c/2;(c&1)===0?(b[D]=O,E[D]=I-O):(w[D]=O,S[D]=I-O)}this.adjustOddEvenCounts(p);for(var k=4*n.getValue()+(i?0:2)+(a?0:1)-1,B=0,R=0,c=b.length-1;c>=0;c--){if(e.isNotA1left(n,i,a)){var N=e.WEIGHTS[k][2*c];R+=b[c]*N}B+=b[c]}for(var L=0,c=w.length-1;c>=0;c--)if(e.isNotA1left(n,i,a)){var N=e.WEIGHTS[k][2*c+1];L+=w[c]*N}var U=R+L;if((B&1)!==0||B>13||B<4)throw new oe;var z=(13-B)/2,H=e.SYMBOL_WIDEST[z],j=9-H,ue=vf.getRSSvalue(b,H,!0),ye=vf.getRSSvalue(w,j,!1),X=e.EVEN_TOTAL_SUBSET[z],re=e.GSUM[z],he=ue*X+ye+re;return new iv(he,U)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=yt.sum(new Int32Array(this.getOddCounts())),i=yt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;n>13?o=!0:n<4&&(a=!0);var l=!1,c=!1;i>13?c=!0:i<4&&(l=!0);var f=n+i-r,d=(n&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new oe;o=!0}else{if(!p)throw new oe;c=!0}else if(f===-1)if(d){if(p)throw new oe;a=!0}else{if(!p)throw new oe;l=!0}else if(f===0){if(d){if(!p)throw new oe;n<i?(a=!0,c=!0):(o=!0,l=!0)}else if(p)throw new oe}else throw new oe;if(a){if(o)throw new oe;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new oe;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(jc),wZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),EZ=(function(t){wZ(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(iv),AZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),B2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I6=(function(t){AZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var a,o,l,c,f=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,f),n.reverse();var d=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var p=B2(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.getCount()>1)try{for(var b=(l=void 0,B2(this.possibleRightPairs)),w=b.next();!w.done;w=b.next()){var E=w.value;if(E.getCount()>1&&e.checkChecksum(m,E))return e.constructResult(m,E)}}catch(S){l={error:S}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}}catch(S){a={error:S}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new oe},e.addOrTally=function(r,n){var i,a;if(n!=null){var o=!1;try{for(var l=B2(r),c=l.next();!c.done;c=l.next()){var f=c.value;if(f.getValue()===n.getValue()){f.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),a=new String(i).toString(),o=new Ze,l=13-a.length;l>0;l--)o.append("0");o.append(a);for(var c=0,l=0;l<13;l++){var f=o.charAt(l).charCodeAt(0)-48;c+=(l&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),p=n.getFinderPattern().getResultPoints();return new Gn(o.toString(),null,0,[d[0],d[1],p[0],p[1]],je.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(r,n,i,a){try{var o=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,i,n,o),c=a==null?null:a.get(or.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;n&&(f=r.getSize()-1-f),c.foundPossibleResultPoint(new Ie(f,i))}var d=this.decodeDataCharacter(r,l,!0),p=this.decodeDataCharacter(r,l,!1);return new EZ(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)Zr.recordPatternInReverse(r,n.getStartEnd()[0],a);else{Zr.recordPattern(r,n.getStartEnd()[1]+1,a);for(var l=0,c=a.length-1;l<c;l++,c--){var f=a[l];a[l]=a[c],a[c]=f}}for(var d=i?16:15,p=yt.sum(new Int32Array(a))/d,g=this.getOddCounts(),m=this.getEvenCounts(),b=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var E=a[l]/p,S=Math.floor(E+.5);S<1?S=1:S>8&&(S=8);var I=Math.floor(l/2);(l&1)===0?(g[I]=S,b[I]=E-S):(m[I]=S,w[I]=E-S)}this.adjustOddEvenCounts(i,d);for(var O=0,D=0,l=g.length-1;l>=0;l--)D*=9,D+=g[l],O+=g[l];for(var k=0,B=0,l=m.length-1;l>=0;l--)k*=9,k+=m[l],B+=m[l];var R=D+3*k;if(i){if((O&1)!==0||O>12||O<4)throw new oe;var N=(12-O)/2,L=e.OUTSIDE_ODD_WIDEST[N],U=9-L,z=vf.getRSSvalue(g,L,!1),H=vf.getRSSvalue(m,U,!0),j=e.OUTSIDE_EVEN_TOTAL_SUBSET[N],ue=e.OUTSIDE_GSUM[N];return new iv(z*j+H+ue,R)}else{if((B&1)!==0||B>10||B<4)throw new oe;var N=(10-B)/2,L=e.INSIDE_ODD_WIDEST[N],U=9-L,z=vf.getRSSvalue(g,L,!0),H=vf.getRSSvalue(m,U,!1),ye=e.INSIDE_ODD_TOTAL_SUBSET[N],ue=e.INSIDE_GSUM[N];return new iv(H*ye+z+ue,R)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=r.getSize(),o=!1,l=0;l<a&&(o=!r.get(l),n!==o);)l++;for(var c=0,f=l,d=l;d<a;d++)if(r.get(d)!==o)i[c]++;else{if(c===3){if(jc.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new oe},e.prototype.parseFoundFinderPattern=function(r,n,i,a){for(var o=r.get(a[0]),l=a[0]-1;l>=0&&o!==r.get(l);)l--;l++;var c=a[0]-l,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);Xt.arraycopy(f,0,d,1,f.length-1),d[0]=c;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),g=l,m=a[1];return i&&(g=r.getSize()-1-g,m=r.getSize()-1-m),new mk(p,[l,a[1]],g,m,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=yt.sum(new Int32Array(this.getOddCounts())),a=yt.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,f=!1;r?(i>12?l=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?l=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-n,p=(i&1)===(r?1:0),g=(a&1)===1;if(d===1)if(p){if(g)throw new oe;l=!0}else{if(!g)throw new oe;f=!0}else if(d===-1)if(p){if(g)throw new oe;o=!0}else{if(!g)throw new oe;c=!0}else if(d===0){if(p){if(!g)throw new oe;i<a?(o=!0,f=!0):(l=!0,c=!0)}else if(g)throw new oe}else throw new oe;if(o){if(l)throw new oe;jc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&jc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new oe;jc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&jc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(jc),SZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Uh=(function(t){SZ(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(or.POSSIBLE_FORMATS):null,a=r&&r.get(or.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(or.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(je.EAN_13)||i.includes(je.UPC_A)||i.includes(je.EAN_8)||i.includes(je.UPC_E))&&n.readers.push(new L2(r)),i.includes(je.CODE_39)&&n.readers.push(new y6(a,o)),i.includes(je.CODE_93)&&n.readers.push(new x6),i.includes(je.CODE_128)&&n.readers.push(new m6),i.includes(je.ITF)&&n.readers.push(new b6),i.includes(je.CODABAR)&&n.readers.push(new WQ),i.includes(je.RSS_14)&&n.readers.push(new I6),i.includes(je.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new _Z))),n.readers.length===0&&(n.readers.push(new L2(r)),n.readers.push(new y6),n.readers.push(new x6),n.readers.push(new L2(r)),n.readers.push(new m6),n.readers.push(new b6),n.readers.push(new I6)),n}return e.prototype.decodeRow=function(r,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,i)}catch{}throw new oe},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e})(Zr),CZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){CZ(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Uh(n),r,n)||this}return e})(nd);var O6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=(function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),Et=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),TZ=(function(){function t(e,r,n,i,a,o){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,d=o.getECCodewords(),p=o.getECBlocks();try{for(var g=O6(p),m=g.next();!m.done;m=g.next()){var b=m.value;f+=b.getCount()*(b.getDataCodewords()+d)}}catch(w){l={error:w}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(l)throw l.error}}this.totalCodewords=f}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if((e&1)!==0||(r&1)!==0)throw new me;try{for(var a=O6(t.VERSIONS),o=a.next();!o.done;o=a.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new me},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Ct(5,new Et(1,3))),new t(2,12,12,10,10,new Ct(7,new Et(1,5))),new t(3,14,14,12,12,new Ct(10,new Et(1,8))),new t(4,16,16,14,14,new Ct(12,new Et(1,12))),new t(5,18,18,16,16,new Ct(14,new Et(1,18))),new t(6,20,20,18,18,new Ct(18,new Et(1,22))),new t(7,22,22,20,20,new Ct(20,new Et(1,30))),new t(8,24,24,22,22,new Ct(24,new Et(1,36))),new t(9,26,26,24,24,new Ct(28,new Et(1,44))),new t(10,32,32,14,14,new Ct(36,new Et(1,62))),new t(11,36,36,16,16,new Ct(42,new Et(1,86))),new t(12,40,40,18,18,new Ct(48,new Et(1,114))),new t(13,44,44,20,20,new Ct(56,new Et(1,144))),new t(14,48,48,22,22,new Ct(68,new Et(1,174))),new t(15,52,52,24,24,new Ct(42,new Et(2,102))),new t(16,64,64,14,14,new Ct(56,new Et(2,140))),new t(17,72,72,16,16,new Ct(36,new Et(4,92))),new t(18,80,80,18,18,new Ct(48,new Et(4,114))),new t(19,88,88,20,20,new Ct(56,new Et(4,144))),new t(20,96,96,22,22,new Ct(68,new Et(4,174))),new t(21,104,104,24,24,new Ct(56,new Et(6,136))),new t(22,120,120,18,18,new Ct(68,new Et(6,175))),new t(23,132,132,20,20,new Ct(62,new Et(8,163))),new t(24,144,144,22,22,new Ct(62,new Et(8,156),new Et(2,155))),new t(25,8,18,6,16,new Ct(7,new Et(1,5))),new t(26,8,32,6,14,new Ct(11,new Et(1,10))),new t(27,12,26,10,24,new Ct(14,new Et(1,16))),new t(28,12,36,10,16,new Ct(18,new Et(1,22))),new t(29,16,36,14,16,new Ct(24,new Et(1,32))),new t(30,16,48,14,22,new Ct(28,new Et(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),IZ=(function(){function t(e){var r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new me;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ao(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return TZ.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,f=!1,d=!1;do if(n===a&&i===0&&!l)e[r++]=this.readCorner1(a,o)&255,n-=2,i+=2,l=!0;else if(n===a-2&&i===0&&(o&3)!==0&&!c)e[r++]=this.readCorner2(a,o)&255,n-=2,i+=2,c=!0;else if(n===a+4&&i===2&&(o&7)===0&&!f)e[r++]=this.readCorner3(a,o)&255,n-=2,i+=2,f=!0;else if(n===a-2&&i===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(a,o)&255,n-=2,i+=2,d=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<o);if(r!==this.version.getTotalCodewords())throw new me;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var a=0;return this.readModule(e-2,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r,n,i)&&(a|=1),a<<=1,this.readModule(e,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e,r,n,i)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Le("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=r/i|0,l=n/a|0,c=o*i,f=l*a,d=new Ao(f,c),p=0;p<o;++p)for(var g=p*i,m=0;m<l;++m)for(var b=m*a,w=0;w<i;++w)for(var E=p*(i+2)+1+w,S=g+w,I=0;I<a;++I){var O=m*(a+2)+1+I;if(e.get(O,E)){var D=b+I;d.set(D,S)}}return d},t})(),R6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OZ=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,a,o,l=r.getECBlocks(),c=0,f=l.getECBlocks();try{for(var d=R6(f),p=d.next();!p.done;p=d.next()){var g=p.value;c+=g.getCount()}}catch(ue){n={error:ue}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var m=new Array(c),b=0;try{for(var w=R6(f),E=w.next();!E.done;E=w.next())for(var g=E.value,S=0;S<g.getCount();S++){var I=g.getDataCodewords(),O=l.getECCodewords()+I;m[b++]=new t(I,new Uint8Array(O))}}catch(ue){a={error:ue}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}for(var D=m[0].codewords.length,k=D-l.getECCodewords(),B=k-1,R=0,S=0;S<B;S++)for(var N=0;N<b;N++)m[N].codewords[S]=e[R++];for(var L=r.getVersionNumber()===24,U=L?8:b,N=0;N<U;N++)m[N].codewords[k-1]=e[R++];for(var z=m[0].codewords.length,S=k;S<z;S++)for(var N=0;N<b;N++){var H=L?(N+8)%b:N,j=L&&H>7?S-1:S;m[H].codewords[j]=e[R++]}if(R!==e.length)throw new Le;return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),bk=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Le(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,f=255>>8-l<<c;r=(a[i]&f)>>c,e-=l,n+=l,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;r=r<<e|(a[i]&f)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),Gr;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gr||(Gr={}));var RZ=(function(){function t(){}return t.decode=function(e){var r=new bk(e),n=new Ze,i=new Ze,a=new Array,o=Gr.ASCII_ENCODE;do if(o===Gr.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,i);else{switch(o){case Gr.C40_ENCODE:this.decodeC40Segment(r,n);break;case Gr.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Gr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Gr.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Gr.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new me}o=Gr.ASCII_ENCODE}while(o!==Gr.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new Rm(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new me;if(a<=128)return i&&(a+=128),r.append(String.fromCharCode(a-1)),Gr.ASCII_ENCODE;if(a===129)return Gr.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&r.append("0"),r.append(""+o)}else switch(a){case 230:return Gr.C40_ENCODE;case 231:return Gr.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Gr.ANSIX12_ENCODE;case 239:return Gr.TEXT_ENCODE;case 240:return Gr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new me;break}}while(e.available()>0);return Gr.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else throw new me;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new me}a=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),a=0;break;default:throw new me}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else throw new me;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new me}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f),a=0}else throw new me;break;default:throw new me}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var o=n[a];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new me;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new me;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new me;l[c]=this.unrandomize255State(e.readBits(8),i++)}n.push(l);try{r.append(ha.decode(l,ht.ISO88591))}catch(f){throw new Up("Platform does not support required encoding: "+f.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),PZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DZ=(function(){function t(){this.rsDecoder=new Pm(gi.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new IZ(e),a=i.getVersion(),o=i.readCodewords(),l=OZ.getDataBlocks(o,a),c=0;try{for(var f=PZ(l),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getNumDataCodewords()}}catch(O){r={error:O}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}for(var g=new Uint8Array(c),m=l.length,b=0;b<m;b++){var w=l[b],E=w.getCodewords(),S=w.getNumDataCodewords();this.correctErrors(E,S);for(var I=0;I<S;I++)g[I*m+b]=E[I]}return RZ.decode(g)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new fn}for(var i=0;i<r;i++)e[i]=n[i]},t})(),NZ=(function(){function t(e){this.image=e,this.rectangleDetector=new ew(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new oe;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],a=r[2],o=r[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(a,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var f=t.sampleGrid(this.image,n,i,a,o,l,c);return new IA(f,[n,i,a,o])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new Ie(e.getX()+i,e.getY()+a)},t.moveAway=function(e,r,n){var i=e.getX(),a=e.getY();return i<r?i-=1:i+=1,a<n?a-=1:a+=1,new Ie(i,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],a=e[2],o=this.transitionsBetween(r,n),l=this.transitionsBetween(n,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,r),d=o,p=[a,r,n,i];return d>l&&(d=l,p[0]=r,p[1]=n,p[2]=i,p[3]=a),d>c&&(d=c,p[0]=n,p[1]=i,p[2]=a,p[3]=r),d>f&&(p[0]=i,p[1]=a,p[2]=r,p[3]=n),p},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),l=t.shiftPoint(n,i,(o+1)*4),c=t.shiftPoint(i,n,(o+1)*4),f=this.transitionsBetween(l,r),d=this.transitionsBetween(c,a);return f<d?(e[0]=r,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),l=this.transitionsBetween(n,a),c=t.shiftPoint(r,n,(l+1)*4),f=t.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(c,a),l=this.transitionsBetween(f,a);var d=new Ie(a.getX()+(i.getX()-n.getX())/(o+1),a.getY()+(i.getY()-n.getY())/(o+1)),p=new Ie(a.getX()+(r.getX()-n.getX())/(l+1),a.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var g=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),m=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return g>m?d:p},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(i,a)+1,c=t.shiftPoint(r,n,l*4),f=t.shiftPoint(i,n,o*4);o=this.transitionsBetween(c,a)+1,l=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var d=(r.getX()+n.getX()+i.getX()+a.getX())/4,p=(r.getY()+n.getY()+i.getY()+a.getY())/4;r=t.moveAway(r,d,p),n=t.moveAway(n,d,p),i=t.moveAway(i,d,p),a=t.moveAway(a,d,p);var g,m;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,a,o*4),g=t.shiftPoint(n,r,l*4),g=t.shiftPoint(g,i,o*4),f=t.shiftPoint(i,a,l*4),f=t.shiftPoint(f,n,o*4),m=t.shiftPoint(a,i,l*4),m=t.shiftPoint(m,r,o*4),[c,g,f,m]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,a,o,l){var c=OA.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(r.getX()),o=Math.trunc(r.getY()),l=Math.abs(o-i)>Math.abs(a-n);if(l){var c=n;n=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-n),d=Math.abs(o-i),p=-f/2,g=i<o?1:-1,m=n<a?1:-1,b=0,w=this.image.get(l?i:n,l?n:i),E=n,S=i;E!==a;E+=m){var I=this.image.get(l?S:E,l?E:S);if(I!==w&&(b++,w=I),p+=d,p>0){if(S===o)break;S+=g,p-=f}}return b},t})(),nw=(function(){function t(){this.decoder=new DZ}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(or.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=t.NO_POINTS}else{var o=new NZ(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var l=n.getRawBytes(),c=new Gn(n.getText(),l,8*l.length,i,je.DATA_MATRIX,Xt.currentTimeMillis()),f=n.getByteSegments();f!=null&&c.putMetadata(Rn.BYTE_SEGMENTS,f);var d=n.getECLevel();return d!=null&&c.putMetadata(Rn.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new oe;var i=this.moduleSize(r,e),a=r[1],o=n[1],l=r[0],c=n[0],f=(c-l+1)/i,d=(o-a+1)/i;if(f<=0||d<=0)throw new oe;var p=i/2;a+=p,l+=p;for(var g=new Ao(f,d),m=0;m<d;m++)for(var b=a+m*i,w=0;w<f;w++)e.get(l+w*i,b)&&g.set(w,m);return g},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],a=e[1];i<n&&r.get(i,a);)i++;if(i===n)throw new oe;var o=i-e[0];if(o===0)throw new oe;return o},t.NO_POINTS=[],t})(),MZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){MZ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new nw,r)||this}return e})(nd);var mf;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(mf||(mf={}));var kZ=(function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Da(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Le;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(mf.L,"L",1),t.M=new t(mf.M,"M",0),t.Q=new t(mf.Q,"Q",3),t.H=new t(mf.H,"H",2),t})(),jZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_k=(function(){function t(e){this.errorCorrectionLevel=kZ.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return et.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=jZ(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var f=c.value,d=f[0];if(d===e||d===r)return new t(f[1]);var p=t.numBitsDiffering(e,d);p<a&&(o=f[1],a=p),e!==r&&(p=t.numBitsDiffering(r,d),p<a&&(o=f[1],a=p))}}catch(g){n={error:g}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return a<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),LZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=(function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var a=LZ(i),o=a.next();!o.done;o=a.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),$=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),BZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yc=(function(){function t(e,r){for(var n,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var l=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=BZ(f),p=d.next();!p.done;p=d.next()){var g=p.value;l+=g.getCount()*(g.getDataCodewords()+c)}}catch(m){n={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new me;try{return this.getVersionForNumber((e-17)/4)}catch{throw new me}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Le;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var o=_k.numBitsDiffering(e,a);o<r&&(n=i+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Ao(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Q(7,new $(1,19)),new Q(10,new $(1,16)),new Q(13,new $(1,13)),new Q(17,new $(1,9))),new t(2,Int32Array.from([6,18]),new Q(10,new $(1,34)),new Q(16,new $(1,28)),new Q(22,new $(1,22)),new Q(28,new $(1,16))),new t(3,Int32Array.from([6,22]),new Q(15,new $(1,55)),new Q(26,new $(1,44)),new Q(18,new $(2,17)),new Q(22,new $(2,13))),new t(4,Int32Array.from([6,26]),new Q(20,new $(1,80)),new Q(18,new $(2,32)),new Q(26,new $(2,24)),new Q(16,new $(4,9))),new t(5,Int32Array.from([6,30]),new Q(26,new $(1,108)),new Q(24,new $(2,43)),new Q(18,new $(2,15),new $(2,16)),new Q(22,new $(2,11),new $(2,12))),new t(6,Int32Array.from([6,34]),new Q(18,new $(2,68)),new Q(16,new $(4,27)),new Q(24,new $(4,19)),new Q(28,new $(4,15))),new t(7,Int32Array.from([6,22,38]),new Q(20,new $(2,78)),new Q(18,new $(4,31)),new Q(18,new $(2,14),new $(4,15)),new Q(26,new $(4,13),new $(1,14))),new t(8,Int32Array.from([6,24,42]),new Q(24,new $(2,97)),new Q(22,new $(2,38),new $(2,39)),new Q(22,new $(4,18),new $(2,19)),new Q(26,new $(4,14),new $(2,15))),new t(9,Int32Array.from([6,26,46]),new Q(30,new $(2,116)),new Q(22,new $(3,36),new $(2,37)),new Q(20,new $(4,16),new $(4,17)),new Q(24,new $(4,12),new $(4,13))),new t(10,Int32Array.from([6,28,50]),new Q(18,new $(2,68),new $(2,69)),new Q(26,new $(4,43),new $(1,44)),new Q(24,new $(6,19),new $(2,20)),new Q(28,new $(6,15),new $(2,16))),new t(11,Int32Array.from([6,30,54]),new Q(20,new $(4,81)),new Q(30,new $(1,50),new $(4,51)),new Q(28,new $(4,22),new $(4,23)),new Q(24,new $(3,12),new $(8,13))),new t(12,Int32Array.from([6,32,58]),new Q(24,new $(2,92),new $(2,93)),new Q(22,new $(6,36),new $(2,37)),new Q(26,new $(4,20),new $(6,21)),new Q(28,new $(7,14),new $(4,15))),new t(13,Int32Array.from([6,34,62]),new Q(26,new $(4,107)),new Q(22,new $(8,37),new $(1,38)),new Q(24,new $(8,20),new $(4,21)),new Q(22,new $(12,11),new $(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Q(30,new $(3,115),new $(1,116)),new Q(24,new $(4,40),new $(5,41)),new Q(20,new $(11,16),new $(5,17)),new Q(24,new $(11,12),new $(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Q(22,new $(5,87),new $(1,88)),new Q(24,new $(5,41),new $(5,42)),new Q(30,new $(5,24),new $(7,25)),new Q(24,new $(11,12),new $(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Q(24,new $(5,98),new $(1,99)),new Q(28,new $(7,45),new $(3,46)),new Q(24,new $(15,19),new $(2,20)),new Q(30,new $(3,15),new $(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Q(28,new $(1,107),new $(5,108)),new Q(28,new $(10,46),new $(1,47)),new Q(28,new $(1,22),new $(15,23)),new Q(28,new $(2,14),new $(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Q(30,new $(5,120),new $(1,121)),new Q(26,new $(9,43),new $(4,44)),new Q(28,new $(17,22),new $(1,23)),new Q(28,new $(2,14),new $(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Q(28,new $(3,113),new $(4,114)),new Q(26,new $(3,44),new $(11,45)),new Q(26,new $(17,21),new $(4,22)),new Q(26,new $(9,13),new $(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Q(28,new $(3,107),new $(5,108)),new Q(26,new $(3,41),new $(13,42)),new Q(30,new $(15,24),new $(5,25)),new Q(28,new $(15,15),new $(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Q(28,new $(4,116),new $(4,117)),new Q(26,new $(17,42)),new Q(28,new $(17,22),new $(6,23)),new Q(30,new $(19,16),new $(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Q(28,new $(2,111),new $(7,112)),new Q(28,new $(17,46)),new Q(30,new $(7,24),new $(16,25)),new Q(24,new $(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Q(30,new $(4,121),new $(5,122)),new Q(28,new $(4,47),new $(14,48)),new Q(30,new $(11,24),new $(14,25)),new Q(30,new $(16,15),new $(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Q(30,new $(6,117),new $(4,118)),new Q(28,new $(6,45),new $(14,46)),new Q(30,new $(11,24),new $(16,25)),new Q(30,new $(30,16),new $(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Q(26,new $(8,106),new $(4,107)),new Q(28,new $(8,47),new $(13,48)),new Q(30,new $(7,24),new $(22,25)),new Q(30,new $(22,15),new $(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Q(28,new $(10,114),new $(2,115)),new Q(28,new $(19,46),new $(4,47)),new Q(28,new $(28,22),new $(6,23)),new Q(30,new $(33,16),new $(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Q(30,new $(8,122),new $(4,123)),new Q(28,new $(22,45),new $(3,46)),new Q(30,new $(8,23),new $(26,24)),new Q(30,new $(12,15),new $(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new $(3,117),new $(10,118)),new Q(28,new $(3,45),new $(23,46)),new Q(30,new $(4,24),new $(31,25)),new Q(30,new $(11,15),new $(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new $(7,116),new $(7,117)),new Q(28,new $(21,45),new $(7,46)),new Q(30,new $(1,23),new $(37,24)),new Q(30,new $(19,15),new $(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new $(5,115),new $(10,116)),new Q(28,new $(19,47),new $(10,48)),new Q(30,new $(15,24),new $(25,25)),new Q(30,new $(23,15),new $(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new $(13,115),new $(3,116)),new Q(28,new $(2,46),new $(29,47)),new Q(30,new $(42,24),new $(1,25)),new Q(30,new $(23,15),new $(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new $(17,115)),new Q(28,new $(10,46),new $(23,47)),new Q(30,new $(10,24),new $(35,25)),new Q(30,new $(19,15),new $(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new $(17,115),new $(1,116)),new Q(28,new $(14,46),new $(21,47)),new Q(30,new $(29,24),new $(19,25)),new Q(30,new $(11,15),new $(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new $(13,115),new $(6,116)),new Q(28,new $(14,46),new $(23,47)),new Q(30,new $(44,24),new $(7,25)),new Q(30,new $(59,16),new $(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new $(12,121),new $(7,122)),new Q(28,new $(12,47),new $(26,48)),new Q(30,new $(39,24),new $(14,25)),new Q(30,new $(22,15),new $(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new $(6,121),new $(14,122)),new Q(28,new $(6,47),new $(34,48)),new Q(30,new $(46,24),new $(10,25)),new Q(30,new $(2,15),new $(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new $(17,122),new $(4,123)),new Q(28,new $(29,46),new $(14,47)),new Q(30,new $(49,24),new $(10,25)),new Q(30,new $(24,15),new $(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new $(4,122),new $(18,123)),new Q(28,new $(13,46),new $(32,47)),new Q(30,new $(48,24),new $(14,25)),new Q(30,new $(42,15),new $(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new $(20,117),new $(4,118)),new Q(28,new $(40,47),new $(7,48)),new Q(30,new $(43,24),new $(22,25)),new Q(30,new $(10,15),new $(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new $(19,118),new $(6,119)),new Q(28,new $(18,47),new $(31,48)),new Q(30,new $(34,24),new $(34,25)),new Q(30,new $(20,15),new $(61,16)))],t})(),sn;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(sn||(sn={}));var P6=(function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[sn.DATA_MASK_000,new t(sn.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[sn.DATA_MASK_001,new t(sn.DATA_MASK_001,function(e,r){return(e&1)===0})],[sn.DATA_MASK_010,new t(sn.DATA_MASK_010,function(e,r){return r%3===0})],[sn.DATA_MASK_011,new t(sn.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[sn.DATA_MASK_100,new t(sn.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[sn.DATA_MASK_101,new t(sn.DATA_MASK_101,function(e,r){return e*r%6===0})],[sn.DATA_MASK_110,new t(sn.DATA_MASK_110,function(e,r){return e*r%6<3})],[sn.DATA_MASK_111,new t(sn.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t})(),UZ=(function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new me;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,n=i-1;n>=o;n--)a=this.copyBit(8,n,a);for(var r=i-8;r<i;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=_k.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new me},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Yc.getVersionForNumber(r);for(var n=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,a,n);var l=Yc.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(o,a,n);if(l=Yc.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new me},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=P6.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=r.buildFunctionPattern(),o=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var m=o?i-1-g:g,b=0;b<2;b++)a.get(p-b,m)||(d++,f<<=1,this.bitMatrix.get(p-b,m)&&(f|=1),d===8&&(l[c++]=f,d=0,f=0));o=!o}if(c!==r.getTotalCodewords())throw new me;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=P6.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,a=e.getHeight();i<a;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t})(),D6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FZ=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,a,o,l;if(e.length!==r.getTotalCodewords())throw new Le;var c=r.getECBlocksForLevel(n),f=0,d=c.getECBlocks();try{for(var p=D6(d),g=p.next();!g.done;g=p.next()){var m=g.value;f+=m.getCount()}}catch(j){i={error:j}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var b=new Array(f),w=0;try{for(var E=D6(d),S=E.next();!S.done;S=E.next())for(var m=S.value,I=0;I<m.getCount();I++){var O=m.getDataCodewords(),D=c.getECCodewordsPerBlock()+O;b[w++]=new t(O,new Uint8Array(D))}}catch(j){o={error:j}}finally{try{S&&!S.done&&(l=E.return)&&l.call(E)}finally{if(o)throw o.error}}for(var k=b[0].codewords.length,B=b.length-1;B>=0;){var R=b[B].codewords.length;if(R===k)break;B--}B++;for(var N=k-c.getECCodewordsPerBlock(),L=0,I=0;I<N;I++)for(var U=0;U<w;U++)b[U].codewords[I]=e[L++];for(var U=B;U<w;U++)b[U].codewords[N]=e[L++];for(var z=b[0].codewords.length,I=N;I<z;I++)for(var U=0;U<w;U++){var H=U<B?I:I+1;b[U].codewords[H]=e[L++]}return b},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),oa;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(oa||(oa={}));var er=(function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Le;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(oa.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(oa.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(oa.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(oa.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(oa.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(oa.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(oa.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(oa.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(oa.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(oa.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),zZ=(function(){function t(){}return t.decode=function(e,r,n,i){var a=new bk(e),o=new Ze,l=new Array,c=-1,f=-1;try{var d=null,p=!1,g=void 0;do{if(a.available()<4)g=er.TERMINATOR;else{var m=a.readBits(4);g=er.forBits(m)}switch(g){case er.TERMINATOR:break;case er.FNC1_FIRST_POSITION:case er.FNC1_SECOND_POSITION:p=!0;break;case er.STRUCTURED_APPEND:if(a.available()<16)throw new me;c=a.readBits(8),f=a.readBits(8);break;case er.ECI:var b=t.parseECIValue(a);if(d=Yr.getCharacterSetECIByValue(b),d===null)throw new me;break;case er.HANZI:var w=a.readBits(4),E=a.readBits(g.getCharacterCountBits(r));w===t.GB2312_SUBSET&&t.decodeHanziSegment(a,o,E);break;default:var S=a.readBits(g.getCharacterCountBits(r));switch(g){case er.NUMERIC:t.decodeNumericSegment(a,o,S);break;case er.ALPHANUMERIC:t.decodeAlphanumericSegment(a,o,S,p);break;case er.BYTE:t.decodeByteSegment(a,o,S,d,l,i);break;case er.KANJI:t.decodeKanjiSegment(a,o,S);break;default:throw new me}break}}while(g!==er.TERMINATOR)}catch{throw new me}return new Rm(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,f)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new me;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,n--}try{r.append(ha.decode(i,ht.GB2312))}catch(c){throw new me(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new me;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,n--}try{r.append(ha.decode(i,ht.SHIFT_JIS))}catch(c){throw new me(c)}},t.decodeByteSegment=function(e,r,n,i,a,o){if(8*n>e.available())throw new me;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var f;i===null?f=ht.guessEncoding(l,o):f=i.getName();try{r.append(ha.decode(l,f))}catch(d){throw new me(d)}a.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new me;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var a=r.length();n>1;){if(e.available()<11)throw new me;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new me;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var l=a;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new me;var i=e.readBits(10);if(i>=1e3)throw new me;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new me;var a=e.readBits(7);if(a>=100)throw new me;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new me;var o=e.readBits(4);if(o>=10)throw new me;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new me},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),wk=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t})(),N6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VZ=(function(){function t(){this.rsDecoder=new Pm(gi.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Ao.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new UZ(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new wk(!0)),a}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,a,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=FZ.getDataBlocks(f,l,c),p=0;try{for(var g=N6(d),m=g.next();!m.done;m=g.next()){var b=m.value;p+=b.getNumDataCodewords()}}catch(B){n={error:B}}finally{try{m&&!m.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}var w=new Uint8Array(p),E=0;try{for(var S=N6(d),I=S.next();!I.done;I=S.next()){var b=I.value,O=b.getCodewords(),D=b.getNumDataCodewords();this.correctErrors(O,D);for(var k=0;k<D;k++)w[E++]=O[k]}}catch(B){a={error:B}}finally{try{I&&!I.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}return zZ.decode(w,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new fn}for(var i=0;i<r;i++)e[i]=n[i]},t})(),HZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),$Z=(function(t){HZ(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=(this.getX()+n)/2,o=(this.getY()+r)/2,l=(this.estimatedModuleSize+i)/2;return new e(a,o,l)},e})(Ie),qZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GZ=(function(){function t(e,r,n,i,a,o,l){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,a=this.startY+r/2,o=new Int32Array(3),l=this.image,c=0;c<r;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!l.get(d,f);)d++;for(var p=0;d<i;){if(l.get(d,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,d);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;d++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var a=this.image,o=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&a.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!a.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&a.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!a.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var f=l[0]+l[1]+l[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,a,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=qZ(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.aboutEquals(f,c,l))return g.combineEstimate(c,l,f)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var m=new $Z(l,c,f);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},t})(),WZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),KZ=(function(t){WZ(e,t);function e(r,n,i,a){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=this.count+1,o=(this.count*this.getX()+n)/a,l=(this.count*this.getY()+r)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,l,c,a)},e})(Ie),XZ=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),_h=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YZ=(function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(or.TRY_HARDER)!==void 0,n=e!=null&&e.get(or.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),l=Math.floor(3*a/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=l-1;d<a&&!c;d+=l){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(t.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,g,n);if(m===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var b=this.findRowSkip();b>f[2]&&(d+=b-f[2]-l,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(t.foundPatternCross(f)){var m=this.handlePossibleCenter(f,d,o,n);m===!0&&(l=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Ie.orderBestPatterns(w),new XZ(w)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var a=r/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var a=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&r>=o&&l.get(r-o,e-o);)a[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!l.get(r-o,e-o)&&a[1]<=n;)a[1]++,o++;if(e<o||r<o||a[1]>n)return!1;for(;e>=o&&r>=o&&l.get(r-o,e-o)&&a[0]<=n;)a[0]++,o++;if(a[0]>n)return!1;var c=l.getHeight(),f=l.getWidth();for(o=1;e+o<c&&r+o<f&&l.get(r+o,e+o);)a[2]++,o++;if(e+o>=c||r+o>=f)return!1;for(;e+o<c&&r+o<f&&!l.get(r+o,e+o)&&a[3]<n;)a[3]++,o++;if(e+o>=c||r+o>=f||a[3]>=n)return!1;for(;e+o<c&&r+o<f&&l.get(r+o,e+o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var a=this.image,o=a.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&a.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&a.get(r,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&a.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var f=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(f-i)>=2*i?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var a=this.image,o=a.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&a.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&a.get(c,r);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&a.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var f=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(f-i)>=i?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(o),e[2],a);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,p=0,g=d.length;p<g;p++){var m=d[p];if(m.aboutEquals(c,l,o)){d[p]=m.combineEstimate(l,o,c),f=!0;break}}if(!f){var b=new KZ(o,l,c);d.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=_h(this.possibleCenters),o=a.next();!o.done;o=a.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,a=0,o=0,l=this.possibleCenters.length;try{for(var c=_h(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=t.CENTER_QUORUM&&(a++,o+=d.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/l,g=0;try{for(var m=_h(this.possibleCenters),b=m.next();!b.done;b=m.next()){var d=b.value;g+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(w){n={error:w}}finally{try{b&&!b.done&&(i=m.return)&&i.call(m)}finally{if(n)throw n.error}}return g<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,i,a=this.possibleCenters.length;if(a<3)throw new oe;var o=this.possibleCenters,l;if(a>3){var c=0,f=0;try{for(var d=_h(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value,m=g.getEstimatedModuleSize();c+=m,f+=m*m}}catch(k){e={error:k}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}l=c/a;var b=Math.sqrt(f/a-l*l);o.sort(function(k,B){var R=Math.abs(B.getEstimatedModuleSize()-l),N=Math.abs(k.getEstimatedModuleSize()-l);return R<N?-1:R>N?1:0});for(var w=Math.max(.2*l,b),E=0;E<o.length&&o.length>3;E++){var S=o[E];Math.abs(S.getEstimatedModuleSize()-l)>w&&(o.splice(E,1),E--)}}if(o.length>3){var c=0;try{for(var I=_h(o),O=I.next();!O.done;O=I.next()){var D=O.value;c+=D.getEstimatedModuleSize()}}catch(B){n={error:B}}finally{try{O&&!O.done&&(i=I.return)&&i.call(I)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function(B,R){if(R.getCount()===B.getCount()){var N=Math.abs(R.getEstimatedModuleSize()-l),L=Math.abs(B.getEstimatedModuleSize()-l);return N<L?1:N>L?-1:0}else return R.getCount()-B.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),QZ=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(or.NEED_RESULT_POINT_CALLBACK);var r=new YZ(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(r,n,i);if(a<1)throw new oe("No pattern found in proccess finder.");var o=t.computeDimension(r,n,i,a),l=Yc.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,f=null;if(l.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+i.getX(),p=n.getY()-r.getY()+i.getY(),g=1-3/c,m=Math.floor(r.getX()+g*(d-r.getX())),b=Math.floor(r.getY()+g*(p-r.getY())),w=4;w<=16;w<<=1)try{f=this.findAlignmentInRegion(a,m,b,w);break}catch(O){if(!(O instanceof oe))throw O}var E=t.createTransform(r,n,i,f,o),S=t.sampleGrid(this.image,E,o),I;return f===null?I=[i,r,n]:I=[i,r,n,f],new IA(S,I)},t.createTransform=function(e,r,n,i,a){var o=a-3.5,l,c,f,d;return i!==null?(l=i.getX(),c=i.getY(),f=o-3,d=f):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),f=o,d=o),vk.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=OA.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var a=yt.round(Ie.distance(e,r)/i),o=yt.round(Ie.distance(e,n)/i),l=Math.floor((a+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new oe("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,i),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(i-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var a=Math.abs(i-r)>Math.abs(n-e);if(a){var o=e;e=r,r=o,o=n,n=i,i=o}for(var l=Math.abs(n-e),c=Math.abs(i-r),f=-l/2,d=e<n?1:-1,p=r<i?1:-1,g=0,m=n+d,b=e,w=r;b!==m;b+=d){var E=a?w:b,S=a?b:w;if(g===1===this.image.get(E,S)){if(g===2)return yt.distance(b,w,e,r);g++}if(f+=c,f>0){if(w===i)break;w+=p,f-=l}}return g===2?yt.distance(n+d,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var a=Math.floor(i*e),o=Math.max(0,r-a),l=Math.min(this.image.getWidth()-1,r+a);if(l-o<e*3)throw new oe("Alignment top exceeds estimated module size.");var c=Math.max(0,n-a),f=Math.min(this.image.getHeight()-1,n+a);if(f-c<e*3)throw new oe("Alignment bottom exceeds estimated module size.");var d=new GZ(this.image,o,c,l-o,f-c,e,this.resultPointCallback);return d.find()},t})(),iw=(function(){function t(){this.decoder=new VZ}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(or.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),i=t.NO_POINTS}else{var o=new QZ(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),i=o.getPoints()}n.getOther()instanceof wk&&n.getOther().applyMirroredCorrection(i);var l=new Gn(n.getText(),n.getRawBytes(),void 0,i,je.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(Rn.BYTE_SEGMENTS,c);var f=n.getECLevel();return f!==null&&l.putMetadata(Rn.ERROR_CORRECTION_LEVEL,f),n.hasStructuredAppend()&&(l.putMetadata(Rn.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Rn.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new oe;var i=this.moduleSize(r,e),a=r[1],o=n[1],l=r[0],c=n[0];if(l>=c||a>=o)throw new oe;if(o-a!==c-l&&(c=l+(o-a),c>=e.getWidth()))throw new oe;var f=Math.round((c-l+1)/i),d=Math.round((o-a+1)/i);if(f<=0||d<=0)throw new oe;if(d!==f)throw new oe;var p=Math.floor(i/2);a+=p,l+=p;var g=l+Math.floor((f-1)*i)-c;if(g>0){if(g>p)throw new oe;l-=g}var m=a+Math.floor((d-1)*i)-o;if(m>0){if(m>p)throw new oe;a-=m}for(var b=new Ao(f,d),w=0;w<d;w++)for(var E=a+Math.floor(w*i),S=0;S<f;S++)e.get(l+Math.floor(S*i),E)&&b.set(S,w);return b},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),a=e[0],o=e[1],l=!0,c=0;a<i&&o<n;){if(l!==r.get(a,o)){if(++c===5)break;l=!l}a++,o++}if(a===i||o===n)throw new oe;return(a-e[0])/7},t.NO_POINTS=new Array,t})(),ZZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gt=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return yt.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=ZZ(e),l=o.next();!l.done;l=o.next()){var c=l.value;i[a++]=c}}catch(f){r={error:f}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=Qr.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),JZ=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),eJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tJ=(function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),a=t.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(n,i)),new JZ(i,a)},t.detect=function(e,r){for(var n,i,a=new Array,o=0,l=0,c=!1;o<r.getHeight();){var f=t.findVertices(r,o,l);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,l=0;try{for(var d=(n=void 0,eJ(a)),p=d.next();!p.done;p=d.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(m){n={error:m}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(l=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(l=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},t.findVertices=function(e,r,n){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,a,o){for(var l=new Array(4),c=!1,f=new Int32Array(o.length);i<r;i+=t.ROW_STEP){var d=t.findGuardPattern(e,a,i,n,!1,o,f);if(d!=null){for(;i>0;){var p=t.findGuardPattern(e,a,--i,n,!1,o,f);if(p!=null)d=p;else{i++;break}}l[0]=new Ie(d[0],i),l[1]=new Ie(d[1],i),c=!0;break}}var g=i+1;if(c){for(var m=0,p=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);g<r;g++){var d=t.findGuardPattern(e,p[0],g,n,!1,o,f);if(d!=null&&Math.abs(p[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<t.MAX_PATTERN_DRIFT)p=d,m=0;else{if(m>t.SKIPPED_ROW_COUNT_MAX)break;m++}}g-=m+1,l[2]=new Ie(p[0],g),l[3]=new Ie(p[1],g)}return g-i<t.BARCODE_MIN_HEIGHT&&Qr.fill(l,null),l},t.findGuardPattern=function(e,r,n,i,a,o,l){Qr.fillWithin(l,0,l.length,0);for(var c=r,f=0;e.get(c,n)&&c>0&&f++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,p=0,g=o.length,m=a;d<i;d++){var b=e.get(d,n);if(b!==m)l[p]++;else{if(p===g-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=l[0]+l[1],Xt.arraycopy(l,2,l,0,p-1),l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,m=!m}}return p===g-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,l=0;l<i;l++)a+=e[l],o+=r[l];if(a<o)return 1/0;var c=a/o;n*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=r[d]*c,m=p>g?p-g:g-p;if(m>n)return 1/0;f+=m}return f/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),rJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vc=(function(){function t(e,r){if(r.length===0)throw new Le;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Xt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=rJ(this.coefficients),o=a.next();!o.done;o=a.next()){var l=o.value;i=this.field.add(i,l)}}catch(p){r={error:p}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;Xt.arraycopy(n,0,a,0,o);for(var l=o;l<n.length;l++)a[l]=this.field.add(r[l-o],n[l]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),l=0;l<n;l++)for(var c=r[l],f=0;f<a;f++)o[l+f]=this.field.add(o[l+f],this.field.multiply(c,i[f]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Le;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new Ze,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t})(),nJ=(function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new gk;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),iJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),aJ=(function(t){iJ(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var a=1,o=0;o<r;o++)i.expTable[o]=a,a=a*n%r;for(var o=0;o<r-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Vc(i,new Int32Array([0])),i.one=new Vc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Le;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Vc(this,i)},e.PDF417_GF=new e(gt.NUMBER_OF_CODEWORDS,3),e})(nJ),oJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sJ=(function(){function t(){this.field=aJ.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,a,o=new Vc(this.field,e),l=new Int32Array(r),c=!1,f=r;f>0;f--){var d=o.evaluateAt(this.field.exp(f));l[r-f]=d,d!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(n!=null)try{for(var g=oJ(n),m=g.next();!m.done;m=g.next()){var b=m.value,w=this.field.exp(e.length-1-b),E=new Vc(this.field,new Int32Array([this.field.subtract(0,w),1]));p=p.multiply(E)}}catch(N){i={error:N}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var S=new Vc(this.field,l),I=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),S,r),O=I[0],D=I[1],k=this.findErrorLocations(O),B=this.findErrorMagnitudes(D,O,k),f=0;f<k.length;f++){var R=e.length-1-this.field.log(k[f]);if(R<0)throw fn.getChecksumInstance();e[R]=this.field.subtract(e[R],B[f])}return k.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=e,o=r,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var f=a,d=l;if(a=o,l=c,a.isZero())throw fn.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),m=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),w=this.field.multiply(o.getCoefficient(o.getDegree()),m);p=p.add(this.field.buildMonomial(b,w)),o=o.subtract(a.multiplyByMonomial(b,w))}c=p.multiply(l).subtract(d).negative()}var E=c.getCoefficient(0);if(E===0)throw fn.getChecksumInstance();var S=this.field.inverse(E),I=c.multiply(S),O=o.multiply(S);return[I,O]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,a=1;a<this.field.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==r)throw fn.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,r.getCoefficient(o));for(var l=new Vc(this.field,a),c=n.length,f=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),p=this.field.subtract(0,e.evaluateAt(d)),g=this.field.inverse(l.evaluateAt(d));f[o]=this.field.multiply(p,g)}return f},t})(),aw=(function(){function t(e,r,n,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,a)}return t.prototype.constructor_1=function(e,r,n,i,a){var o=r==null||n==null,l=i==null||a==null;if(o&&l)throw new oe;o?(r=new Ie(0,i.getY()),n=new Ie(0,a.getY())):l&&(i=new Ie(e.getWidth()-1,r.getY()),a=new Ie(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var d=new Ie(c.getX(),f);n?i=d:o=d}if(r>0){var p=n?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+r);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var m=new Ie(p.getX(),g);n?a=m:l=m}return new t(this.image,i,a,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),lJ=(function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),PA=(function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(o,l,c,f,d,p){if(o==="%%")return"%";if(r[++n]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,m;switch(p){case"s":m=r[n];break;case"c":m=r[n][0];break;case"f":m=parseFloat(r[n]).toFixed(o);break;case"p":m=parseFloat(r[n]).toPrecision(o);break;case"e":m=parseFloat(r[n]).toExponential(o);break;case"x":m=parseInt(r[n]).toString(g||16);break;case"d":m=parseFloat(parseInt(r[n],g||10).toPrecision(o)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(g);for(var b=parseInt(c),w=c&&c[0]+""=="0"?"0":" ";m.length<b;)m=l!==void 0?m+w:w+m;return m}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t})(),cJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ek=(function(){function t(e){this.boundingBox=new aw(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new PA,i=0;try{for(var a=cJ(this.codewords),o=a.next();!o.done;o=a.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),uJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fJ=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Fh=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,a=function(p,g){var m={getKey:function(){return p},getValue:function(){return g}};m.getValue()>n?(n=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===n&&i.push(m.getKey())};try{for(var o=uJ(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=fJ(l.value,2),f=c[0],d=c[1];a(f,d)}}catch(p){e={error:p}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return gt.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),dJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),U2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M6=(function(t){dJ(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=U2(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,d=1,p=0,g=l;g<c;g++)if(n[g]!=null){var m=n[g],b=m.getRowNumber()-f;if(b===0)p++;else if(b===1)d=Math.max(d,p),p=1,f=m.getRowNumber();else if(b<0||m.getRowNumber()>=r.getRowCount()||b>g)n[g]=null;else{var w=void 0;d>2?w=(d-2)*b:w=b;for(var E=w>=g,S=1;S<=w&&!E;S++)E=n[g-S]!=null;E?n[g]=null:(f=m.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=U2(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=o;d<l;d++)if(c[d]!=null){var p=c[d];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=r.getRowCount()?c[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),a=new Fh,o=new Fh,l=new Fh,c=new Fh;try{for(var f=U2(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,m=p.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),l.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(w){r={error:w}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(a.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<gt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>gt.MAX_ROWS_IN_BARCODE)return null;var b=new lJ(a.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,b),b},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(r[i]!=null){var o=a.getValue()%30,l=a.getRowNumber();if(l>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:o+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(Ek),hJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pJ=(function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=gt.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(a=t.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(a=t.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=l[r],f[3]=c[r],r>0&&(f[0]=n[r-1],f[4]=l[r-1],f[5]=c[r-1]),r>1&&(f[8]=n[r-2],f[10]=l[r-2],f[11]=c[r-2]),r<n.length-1&&(f[1]=n[r+1],f[6]=l[r+1],f[7]=c[r+1]),r<n.length-2&&(f[9]=n[r+2],f[12]=l[r+2],f[13]=c[r+2]);try{for(var d=hJ(f),p=d.next();!p.done;p=d.next()){var g=p.value;if(t.adjustRowNumber(o,g))return}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new PA,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t})(),gJ=(function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),vJ=(function(){function t(){}return t.initialize=function(){for(var e=0;e<gt.SYMBOL_TABLE.length;e++)for(var r=gt.SYMBOL_TABLE[e],n=r&1,i=0;i<gt.BARS_IN_MODULE;i++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(gt.BARS_IN_MODULE)),t.RATIOS_TABLE[e][gt.BARS_IN_MODULE-i-1]=Math.fround(a/gt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=yt.sum(e),n=new Int32Array(gt.BARS_IN_MODULE),i=0,a=0,o=0;o<gt.MODULES_IN_CODEWORD;o++){var l=r/(2*gt.MODULES_IN_CODEWORD)+o*r/gt.MODULES_IN_CODEWORD;a+e[i]<=l&&(a+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return gt.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=yt.sum(e),n=new Array(gt.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var a=J_.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,f=t.RATIOS_TABLE[l],d=0;d<gt.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-n[d]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,o=gt.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(gt.SYMBOL_TABLE.length).map(function(e){return new Array(gt.BARS_IN_MODULE)}),t})(),mJ=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),k6=(function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t})(),yJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xJ=(function(t){yJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(yi),bJ=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new xJ;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new CA;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),_J=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),wJ=(function(t){_J(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(yi),EJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),AJ=(function(t){EJ(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Le("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new wJ;i=et.MAX_VALUE}this.buf=Qr.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new CA;this.ensureCapacity(this.count+i),Xt.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Qr.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e})(bJ),Ht;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ht||(Ht={}));function Ak(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Kg;function pl(t){if(typeof Kg>"u"&&(Kg=Ak()),Kg===null)throw new Error("BigInt is not supported!");return Kg(t)}function SJ(){var t=[];t[0]=pl(1);var e=pl(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var CJ=(function(){function t(){}return t.decode=function(e,r){var n=new Ze(""),i=Yr.ISO8859_1;n.enableDecoding(i);for(var a=1,o=e[a++],l=new mJ;a<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(o,e,i,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:Yr.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new me;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)o=e[a++];else throw me.getFormatInstance()}if(n.length()===0)throw me.getFormatInstance();var c=new Rm(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw me.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)i[a]=e[r];n.setSegmentIndex(et.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Ze;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ze;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new Ze;r=t.textCompaction(e,r+1,f),n.setSender(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Ze;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Ze;r=t.numericCompaction(e,r+1,p),n.setSegmentCount(et.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new Ze;r=t.numericCompaction(e,r+1,g),n.setTimestamp(k6.parseLong(g.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new Ze;r=t.numericCompaction(e,r+1,m),n.setChecksum(et.parseInt(m.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var b=new Ze;r=t.numericCompaction(e,r+1,b),n.setFileSize(k6.parseLong(b.toString()));break;default:throw me.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw me.getFormatInstance()}if(l!==-1){var w=r-l;n.isLastSegment()&&w--,n.setOptionalData(Qr.copyOfRange(e,l,l+w))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),o=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],a[o]=c,o++;break}}return t.decodeTextCompaction(i,a,o,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var a=Ht.ALPHA,o=Ht.ALPHA,l=0;l<n;){var c=e[l],f="";switch(a){case Ht.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case t.LL:a=Ht.LOWER;break;case t.ML:a=Ht.MIXED;break;case t.PS:o=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case t.AS:o=a,a=Ht.ALPHA_SHIFT;break;case t.ML:a=Ht.MIXED;break;case t.PS:o=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.MIXED:if(c<t.PL)f=t.MIXED_CHARS[c];else switch(c){case t.PL:a=Ht.PUNCT;break;case 26:f=" ";break;case t.LL:a=Ht.LOWER;break;case t.AL:a=Ht.ALPHA;break;case t.PS:o=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.PUNCT:if(c<t.PAL)f=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=Ht.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.PUNCT_SHIFT:if(a=o,c<t.PAL)f=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=Ht.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break}f!==""&&i.append(f),l++}},t.byteCompaction=function(e,r,n,i,a){var o=new AJ,l=0,c=0,f=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=r[i++];i<r[0]&&!f;)switch(d[l++]=p,c=900*c+p,p=r[i++],p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(l%5===0&&l>0){for(var g=0;g<6;++g)o.write(Number(pl(c)>>pl(8*(5-g))));c=0,l=0}break}i===r[0]&&p<t.TEXT_COMPACTION_MODE_LATCH&&(d[l++]=p);for(var m=0;m<l;m++)o.write(d[m]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!f;){var b=r[i++];if(b<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+b;else switch(b){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(l%5===0&&l>0){for(var g=0;g<6;++g)o.write(Number(pl(c)>>pl(8*(5-g))));c=0,l=0}}break}return a.append(ha.decode(o.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,a=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var l=e[r++];if(r===e[0]&&(a=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[i]=l,i++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(t.decodeBase900toBase10(o,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=pl(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*pl(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new me;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Ak()?SJ():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),wh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TJ=(function(){function t(){}return t.decode=function(e,r,n,i,a,o,l){for(var c=new aw(e,r,n,i,a),f=null,d=null,p,g=!0;;g=!1){if(r!=null&&(f=t.getRowIndicatorColumn(e,c,r,!0,o,l)),i!=null&&(d=t.getRowIndicatorColumn(e,c,i,!1,o,l)),p=t.merge(f,d),p==null)throw oe.getNotFoundInstance();var m=p.getBoundingBox();if(g&&m!=null&&(m.getMinY()<c.getMinY()||m.getMaxY()>c.getMaxY()))c=m;else break}p.setBoundingBox(c);var b=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(b,d);for(var w=f!=null,E=1;E<=b;E++){var S=w?E:b-E;if(p.getDetectionResultColumn(S)===void 0){var I=void 0;S===0||S===b?I=new M6(c,S===0):I=new Ek(c),p.setDetectionResultColumn(S,I);for(var O=-1,D=O,k=c.getMinY();k<=c.getMaxY();k++){if(O=t.getStartColumn(p,S,k,w),O<0||O>c.getMaxX()){if(D===-1)continue;O=D}var B=t.detectCodeword(e,c.getMinX(),c.getMaxX(),w,O,k,o,l);B!=null&&(I.setCodeword(k,B),D=O,o=Math.min(o,B.getWidth()),l=Math.max(l,B.getWidth()))}}}return t.createDecoderResult(p)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=aw.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new pJ(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),o=0;try{for(var l=wh(i),c=l.next();!c.done;c=l.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(m){r={error:m}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),p=0;o>0&&d[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=d.length-1;g>0&&d[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var a=wh(e),o=a.next();!o.done;o=a.next()){var l=o.value;i=Math.max(i,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,a,o){for(var l=new M6(r,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),p=Math.trunc(Math.trunc(n.getY()));p<=r.getMaxY()&&p>=r.getMinY();p+=f){var g=t.detectCodeword(e,0,e.getWidth(),i,d,p,a,o);g!=null&&(l.setCodeword(p,g),i?d=g.getStartX():d=g.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>gt.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=r[l][c+1].getValue(),d=l*e.getBarcodeColumnCount()+c;f.length===0?n.push(d):f.length===1?i[d]=f[0]:(o.push(d),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,gt.toIntArray(n),gt.toIntArray(o),p)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,a){for(var o=new Int32Array(i.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)r[i[c]]=a[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var f=d instanceof fn;if(!f)throw d}if(o.length===0)throw fn.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw fn.getChecksumInstance()}throw fn.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new Fh;var f=0;try{for(var d=wh(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)try{for(var m=(i=void 0,wh(g.getCodewords())),b=m.next();!b.done;b=m.next()){var w=b.value;if(w!=null){var E=w.getRowNumber();if(E>=0){if(E>=o.length)continue;o[E][f].setValue(w.getValue())}}}}catch(S){i={error:S}}finally{try{b&&!b.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}f++}}catch(S){r={error:S}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var a,o,l=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var d=(a=void 0,wh(e.getDetectionResultColumn(r).getCodewords())),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+l*f*(g.getEndX()-g.getStartX())}}catch(m){a={error:m}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,a,o,l,c){a=t.adjustCodewordStartColumn(e,r,n,i,a,o);var f=t.getModuleBitCount(e,r,n,i,a,o);if(f==null)return null;var d,p=yt.sum(f);if(i)d=a+p;else{for(var g=0;g<f.length/2;g++){var m=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=m}d=a,a=d-p}if(!t.checkCodewordSkew(p,l,c))return null;var b=vJ.getDecodedValue(f),w=gt.getCodeword(b);return w===-1?null:new gJ(a,d,t.getCodewordBucketNumber(b),w)},t.getModuleBitCount=function(e,r,n,i,a,o){for(var l=a,c=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?l<n:l>=r)&&f<c.length;)e.get(l,o)===p?(c[f]++,l+=d):(f++,p=!p);return f===c.length||l===(i?n:r)&&f===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,a,o){for(var l=a,c=i?-1:1,f=0;f<2;f++){for(;(i?l>=r:l<n)&&i===e.get(l,o);){if(Math.abs(a-l)>t.CODEWORD_SKEW_SIZE)return a;l+=c}c=-c,i=!i}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw me.getFormatInstance();var i=1<<r+1,a=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var o=CJ.decode(e,""+r);return o.setErrorsCorrected(a),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw fn.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw me.getFormatInstance();var n=e[0];if(n>e.length)throw me.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw me.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new PA,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new sJ,t})(),IJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ow=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw oe.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof me||n instanceof fn?oe.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,a,o=new Array,l=tJ.detectMultiple(e,r,n);try{for(var c=IJ(l.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,p=TJ.decode(l.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),g=new Gn(p.getText(),p.getRawBytes(),void 0,d,je.PDF_417);g.putMetadata(Rn.ERROR_CORRECTION_LEVEL,p.getECLevel());var m=p.getOther();m!=null&&g.putMetadata(Rn.PDF417_EXTRA_METADATA,m),o.push(g)}}catch(b){i={error:b}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(b){return b})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?et.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),OJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),j6=(function(t){OJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(yi),L6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RJ=(function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(or.TRY_HARDER)!==void 0,n=e==null?null:e.get(or.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(o){return o===je.UPC_A||o===je.UPC_E||o===je.EAN_13||o===je.EAN_8||o===je.CODABAR||o===je.CODE_39||o===je.CODE_93||o===je.CODE_128||o===je.ITF||o===je.RSS_14||o===je.RSS_EXPANDED});a&&!r&&i.push(new Uh(e)),n.includes(je.QR_CODE)&&i.push(new iw),n.includes(je.DATA_MATRIX)&&i.push(new nw),n.includes(je.AZTEC)&&i.push(new tw),n.includes(je.PDF_417)&&i.push(new ow),a&&r&&i.push(new Uh(e))}i.length===0&&(r||i.push(new Uh(e)),i.push(new iw),i.push(new nw),i.push(new tw),i.push(new ow),r&&i.push(new Uh(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=L6(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new j6("No readers where selected, nothing can be read.");try{for(var i=L6(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof j6)continue}}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new oe("No MultiFormat Readers were able to detect the code.")},t})(),PJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),DJ=(function(t){PJ(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,a=new RJ;return a.setHints(r),i=t.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(nd),NJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){NJ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new ow,r)||this}return e})(nd);var MJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){MJ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new iw,r)||this}return e})(nd);var sw;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(sw||(sw={}));const Xg=sw;var Sk=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ol(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,a=r.length;a<=e;a++){var o=n.multiply(new Ol(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Le("No error correction bytes");var n=e.length-r;if(n<=0)throw new Le("No data bytes provided");var i=this.buildGenerator(r),a=new Int32Array(n);Xt.arraycopy(e,0,a,0,n);var o=new Ol(this.field,a);o=o.multiplyByMonomial(r,1);for(var l=o.divide(i)[1],c=l.getCoefficients(),f=r-c.length,d=0;d<f;d++)e[n+d]=0;Xt.arraycopy(c,0,e,n+f,c.length)},t})(),zh=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var l=n[o],c=0;c<i-1;c++){var f=l[c];f===l[c+1]&&f===n[o+1][c]&&f===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var l=0;l<i;l++){var c=n[o];l+6<i&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,o+6<a&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var l=n[o],c=0;c<i;c++)l[c]===1&&r++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-f)*10/f);return d*t.N4},t.getDataMaskBit=function(e,r,n){var i,a;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,i=(a&1)+a%3;break;case 6:a=n*r,i=(a&1)+a%3&1;break;case 7:a=n*r,i=a%3+(n+r&1)&1;break;default:throw new Le("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<i;l++){for(var c=0,f=-1,d=0;d<a;d++){var p=r?o[l][d]:o[d][l];p===f?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,f=p)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),kJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jJ=(function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=kJ(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;Qr.fill(o,e)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],o=r.bytes[n],l=0,c=this.width;l<c;++l)if(a[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new Ze,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),lw=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Ze;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),LJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Jt=(function(t){LJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(yi),B6=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,i,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new dn;t.makeTypeInfoBits(e,r,i);for(var a=0,o=i.getSize();a<o;++a){var l=i.get(i.getSize()-1-a),c=t.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(n.setBoolean(f,d,l),a<8){var p=n.getWidth()-a-1,g=8;n.setBoolean(p,g,l)}else{var p=8,g=n.getHeight()-7+(a-8);n.setBoolean(p,g,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new dn;t.makeVersionInfoBits(e,n);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var l=n.get(i);i--,r.setBoolean(a,r.getHeight()-11+o,l),r.setBoolean(r.getHeight()-11+o,a,l)}}},t.embedDataBits=function(e,r,n){for(var i=0,a=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(t.isEmpty(n.get(f,l))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,r!==255&&zh.getDataMaskBit(r,f,l)&&(d=!d),n.setBoolean(f,l,d)}}l+=a}a=-a,l+=a,o-=2}if(i!==e.getSize())throw new Jt("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-et.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Le("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!lw.isValidMaskPattern(r))throw new Jt("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(a,10);var o=new dn;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Jt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Jt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Jt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new Jt;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new Jt;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,o=i.length;a!==o;a++){var l=i[a];if(l>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&t.isEmpty(r.get(f,l))&&t.embedPositionAdjustmentPattern(f-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),BJ=(function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),U6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return zh.applyMaskPenaltyRule1(e)+zh.applyMaskPenaltyRule2(e)+zh.applyMaskPenaltyRule3(e)+zh.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(Xg.CHARACTER_SET)!==void 0;a&&(i=n.get(Xg.CHARACTER_SET).toString());var o=this.chooseMode(e,i),l=new dn;if(o===er.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Yr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var f=new dn;this.appendBytes(e,o,f,i);var d;if(n!==null&&n.get(Xg.QR_VERSION)!==void 0){var p=Number.parseInt(n.get(Xg.QR_VERSION).toString(),10);d=Yc.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,l,f,d);if(!this.willFit(g,d,r))throw new Jt("Data too big for requested version")}else d=this.recommendVersion(r,o,l,f);var m=new dn;m.appendBitArray(l);var b=o===er.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(b,d,o,m),m.appendBitArray(f);var w=d.getECBlocksForLevel(r),E=d.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(E,m);var S=this.interleaveWithECBytes(m,d.getTotalCodewords(),E,w.getNumBlocks()),I=new lw;I.setECLevel(r),I.setMode(o),I.setVersion(d);var O=d.getDimensionForVersion(),D=new jJ(O,O),k=this.chooseMaskPattern(S,r,d,D);return I.setMaskPattern(k),B6.buildMatrix(S,r,d,k,D),I.setMatrix(D),I},t.recommendVersion=function(e,r,n,i){var a=this.calculateBitsNeeded(r,n,i,Yc.getVersionForNumber(1)),o=this.chooseVersion(a,e),l=this.calculateBitsNeeded(r,n,i,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Yr.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return er.KANJI;for(var n=!1,i=!1,a=0,o=e.length;a<o;++a){var l=e.charAt(a);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return er.BYTE}return i?er.ALPHANUMERIC:n?er.NUMERIC:er.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=ha.encode(e,Yr.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=r[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<lw.NUM_MASK_PATTERNS;l++){B6.buildMatrix(e,r,n,l,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=l)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=Yc.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new Jt("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),o=a.getTotalECCodewords(),l=i-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Jt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var i=a;i<8;i++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),i=0;i<o;++i)r.appendBits((i&1)===0?236:17,8);if(r.getSize()!==n)throw new Jt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,a,o){if(i>=n)throw new Jt("Block ID too large");var l=e%n,c=n-l,f=Math.floor(e/n),d=f+1,p=Math.floor(r/n),g=p+1,m=f-p,b=d-g;if(m!==b)throw new Jt("EC bytes mismatch");if(n!==c+l)throw new Jt("RS blocks mismatch");if(e!==(p+m)*c+(g+b)*l)throw new Jt("Total bytes mismatch");i<c?(a[0]=p,o[0]=m):(a[0]=g,o[0]=b)},t.interleaveWithECBytes=function(e,r,n,i){var a,o,l,c;if(e.getSizeInBytes()!==n)throw new Jt("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,g=new Array,m=0;m<i;++m){var b=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,m,b,w);var E=b[0],S=new Uint8Array(E);e.toBytes(8*f,S,0,E);var I=t.generateECBytes(S,w[0]);g.push(new BJ(S,I)),d=Math.max(d,E),p=Math.max(p,I.length),f+=b[0]}if(n!==f)throw new Jt("Data bytes does not match offset");for(var O=new dn,m=0;m<d;++m)try{for(var D=(a=void 0,U6(g)),k=D.next();!k.done;k=D.next()){var B=k.value,S=B.getDataBytes();m<S.length&&O.appendBits(S[m],8)}}catch(U){a={error:U}}finally{try{k&&!k.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}for(var m=0;m<p;++m)try{for(var R=(l=void 0,U6(g)),N=R.next();!N.done;N=R.next()){var B=N.value,I=B.getErrorCorrectionBytes();m<I.length&&O.appendBits(I[m],8)}}catch(U){l={error:U}}finally{try{N&&!N.done&&(c=R.return)&&c.call(R)}finally{if(l)throw l.error}}if(r!==O.getSizeInBytes())throw new Jt("Interleaving error: "+r+" and "+O.getSizeInBytes()+" differ.");return O},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),a=0;a<n;a++)i[a]=e[a]&255;new Sk(gi.QR_CODE_FIELD_256).encode(i,r);for(var o=new Uint8Array(r),a=0;a<r;a++)o[a]=i[n+a];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new Jt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,r,n,i){switch(r){case er.NUMERIC:t.appendNumericBytes(e,n);break;case er.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case er.BYTE:t.append8BitBytes(e,n,i);break;case er.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Jt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getDigit(e.charAt(i));if(i+2<n){var o=t.getDigit(e.charAt(i+1)),l=t.getDigit(e.charAt(i+2));r.appendBits(a*100+o*10+l,10),i+=3}else if(i+1<n){var o=t.getDigit(e.charAt(i+1));r.appendBits(a*10+o,7),i+=2}else r.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Jt;if(i+1<n){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Jt;r.appendBits(a*45+o,11),i+=2}else r.appendBits(a,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=ha.encode(e,n)}catch(c){throw new Jt(c)}for(var a=0,o=i.length;a!==o;a++){var l=i[a];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=ha.encode(e,Yr.SJIS)}catch(p){throw new Jt(p)}for(var i=n.length,a=0;a<i;a+=2){var o=n[a]&255,l=n[a+1]&255,c=o<<8&4294967295|l,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Jt("Invalid byte sequence");var d=(f>>8)*192+(f&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(er.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Yr.UTF8.getName(),t})();var UJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){UJ(e,t);function e(r,n,i,a,o,l,c,f){var d=t.call(this,l,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=i,d.left=a,d.top=o,a+l>n||o+c>i)throw new Le("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(l,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Le("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Xt.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Xt.arraycopy(this.yuvData,o,a,0,i),a;for(var l=0;l<n;l++){var c=l*r;Xt.arraycopy(this.yuvData,o,a,c,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),a=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,f=0;f<r;f++){var d=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<n;a++,o+=this.dataWidth)for(var l=o+r/2,c=o,f=o+r-1;c<l;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},e.prototype.invert=function(){return new TA(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Om);var FJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){FJ(e,t);function e(r,n,i,a,o,l,c){var f=t.call(this,n,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=l,f.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*i,p=new Uint8ClampedArray(d),g=0;g<d;g++){var m=r[g],b=m>>16&255,w=m>>7&510,E=m&255;p[g]=(b+w+E)/4&255}f.luminances=p}else f.luminances=r;if(a===void 0&&(f.dataWidth=n),o===void 0&&(f.dataHeight=i),l===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+n>f.dataWidth||f.top+i>f.dataHeight)throw new Le("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Le("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Xt.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Xt.arraycopy(this.luminances,o,a,0,i),a;for(var l=0;l<n;l++){var c=l*r;Xt.arraycopy(this.luminances,o,a,c,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new TA(this)},e})(Om);var zJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),VJ=(function(t){zJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e})(Yr),HJ=(function(){function t(){}return t.ISO_8859_1=Yr.ISO8859_1,t})(),cw,$J=301,qJ=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=$J);return{LOG:t,ALOG:e}};cw=qJ([],[]),cw.LOG;cw.ALOG;var F6;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(F6||(F6={}));var z6=129,Ck=230,GJ=231,WJ=235,KJ=236,XJ=237,YJ=238,QJ=239,ZJ=240,F2=254,JJ=254,V6="[)>05",H6="[)>06",$6="",Mt=0,An=1,Jn=2,Wr=3,ln=4,Bn=5,eee=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Mt},t.prototype.encode=function(e){var r=Ma.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=Ma.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Bn:e.writeCodeword(GJ),e.signalEncoderChange(Bn);return;case An:e.writeCodeword(Ck),e.signalEncoderChange(An);return;case Wr:e.writeCodeword(YJ),e.signalEncoderChange(Wr);break;case Jn:e.writeCodeword(QJ),e.signalEncoderChange(Jn);break;case ln:e.writeCodeword(ZJ),e.signalEncoderChange(ln);break;default:throw new Error("Illegal mode: "+i)}else Ma.isExtendedASCII(n)?(e.writeCodeword(WJ),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Ma.isDigit(e)&&Ma.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t})(),tee=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Bn},t.prototype.encode=function(e){var r=new Ze;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=Ma.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}var a=r.length()-1,o=1,l=e.getCodewordCount()+a+o;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(a<=249)r.setCharAt(0,ht.getCharAt(a));else if(a<=1555)r.setCharAt(0,ht.getCharAt(Math.floor(a/250)+249)),r.insert(1,ht.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,n=r.length();f<n;f++)e.writeCodeword(this.randomize255State(r.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t})(),DA=(function(){function t(){}return t.prototype.getEncodingMode=function(){return An},t.prototype.encodeMaximal=function(e){for(var r=new Ze,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(i=e.pos,a=r.length())}if(a!==r.length()){var l=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&f!==2||d===1&&(n>3||f!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(Ck),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Ze;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var l=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Ze;for(r.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(e,r,c,i));r.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(e,r,c,i);break}var f=r.length();if(f%3===0){var d=Ma.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var a=r.length(),o=r.toString().substring(0,a-i);r.setLengthToZero(),r.append(o),e.pos--;var l=e.getCurrentChar();return i=this.encodeChar(l,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(F2)}else if(o===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(F2),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(F2)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Mt)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,a=new Ze;return a.append(n),a.append(i),a.toString()},t})(),ree=(function(){function t(){}return t.prototype.getEncodingMode=function(){return ln},t.prototype.encode=function(e){for(var r=new Ze;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var o=Ma.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Mt);break}}}r.append(ht.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,l=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(l)}finally{e.signalEncoderChange(Mt)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(ht.getCharAt(e-64)):Ma.illegalCharacter(ht.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(i<<12)+(a<<6)+o,c=l>>16&255,f=l>>8&255,d=l&255,p=new Ze;return p.append(c),r>=2&&p.append(f),r>=3&&p.append(d),p.toString()},t})(),nee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),iee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},At=(function(){function t(e,r,n,i,a,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return t.lookup=function(e,r,n,i,a){var o,l;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=iee(oee),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){o={error:p}}finally{try{f&&!f.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),aee=(function(t){nee(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e})(At),oee=[new At(!1,3,5,8,8,1),new At(!1,5,7,10,10,1),new At(!0,5,7,16,6,1),new At(!1,8,10,12,12,1),new At(!0,10,11,14,6,2),new At(!1,12,12,14,14,1),new At(!0,16,14,24,10,1),new At(!1,18,14,16,16,1),new At(!1,22,18,18,18,1),new At(!0,22,18,16,10,2),new At(!1,30,20,20,20,1),new At(!0,32,24,16,14,2),new At(!1,36,24,22,22,1),new At(!1,44,28,24,24,1),new At(!0,49,28,22,14,2),new At(!1,62,36,14,14,4),new At(!1,86,42,16,16,4),new At(!1,114,48,18,18,4),new At(!1,144,56,20,20,4),new At(!1,174,68,22,22,4),new At(!1,204,84,24,24,4,102,42),new At(!1,280,112,14,14,16,140,56),new At(!1,368,144,16,16,16,92,36),new At(!1,456,192,18,18,16,114,48),new At(!1,576,224,20,20,16,144,56),new At(!1,696,272,22,22,16,174,68),new At(!1,816,336,24,24,16,136,56),new At(!1,1050,408,18,18,36,175,68),new At(!1,1304,496,20,20,36,163,62),new aee],see=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(l){return l.charCodeAt(0)}),n=new Ze,i=0,a=r.length;i<a;i++){var o=String.fromCharCode(r[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Ze,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=At.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),lee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),cee=(function(t){lee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Wr},e.prototype.encode=function(r){for(var n=new Ze;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var o=Ma.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Mt);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Ma.illegalCharacter(ht.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(JJ),r.getNewEncoding()<0&&r.signalEncoderChange(Mt)},e})(DA),uee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),fee=(function(t){uee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Jn},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e})(DA),Ma=(function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=z6+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new DA,l=[new eee,o,new fee,new cee,new ree,new tee],c=new see(e);c.setSymbolShape(r),c.setSizeConstraints(n,i),e.startsWith(V6)&&e.endsWith($6)?(c.writeCodeword(KJ),c.setSkipAtEnd(2),c.pos+=V6.length):e.startsWith(H6)&&e.endsWith($6)&&(c.writeCodeword(XJ),c.setSkipAtEnd(2),c.pos+=H6.length);var f=Mt;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();d<p&&f!==Mt&&f!==Bn&&f!==ln&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append(z6);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===Wr&&i===Wr){for(var a=Math.min(r+3,e.length),o=r;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Mt}else if(n===ln&&i===ln){for(var a=Math.min(r+4,e.length),o=r;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Mt}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===Mt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,o=new Uint8Array(6),l=[];;){if(r+a===e.length){Qr.fill(o,0),Qr.fill(l,0);var c=this.findMinimums(i,l,et.MAX_VALUE,o),f=this.getMinimumCount(o);if(l[Mt]===c)return Mt;if(f===1){if(o[Bn]>0)return Bn;if(o[ln]>0)return ln;if(o[Jn]>0)return Jn;if(o[Wr]>0)return Wr}return An}var d=e.charCodeAt(r+a);if(a++,this.isDigit(d)?i[Mt]+=.5:this.isExtendedASCII(d)?(i[Mt]=Math.ceil(i[Mt]),i[Mt]+=2):(i[Mt]=Math.ceil(i[Mt]),i[Mt]++),this.isNativeC40(d)?i[An]+=2/3:this.isExtendedASCII(d)?i[An]+=8/3:i[An]+=4/3,this.isNativeText(d)?i[Jn]+=2/3:this.isExtendedASCII(d)?i[Jn]+=8/3:i[Jn]+=4/3,this.isNativeX12(d)?i[Wr]+=2/3:this.isExtendedASCII(d)?i[Wr]+=13/3:i[Wr]+=10/3,this.isNativeEDIFACT(d)?i[ln]+=3/4:this.isExtendedASCII(d)?i[ln]+=17/4:i[ln]+=13/4,this.isSpecialB256(d)?i[Bn]+=4:i[Bn]++,a>=4){if(Qr.fill(o,0),Qr.fill(l,0),this.findMinimums(i,l,et.MAX_VALUE,o),l[Mt]<this.min(l[Bn],l[An],l[Jn],l[Wr],l[ln]))return Mt;if(l[Bn]<l[Mt]||l[Bn]+1<this.min(l[An],l[Jn],l[Wr],l[ln]))return Bn;if(l[ln]+1<this.min(l[Bn],l[An],l[Jn],l[Wr],l[Mt]))return ln;if(l[Jn]+1<this.min(l[Bn],l[An],l[ln],l[Wr],l[Mt]))return Jn;if(l[Wr]+1<this.min(l[Bn],l[An],l[ln],l[Jn],l[Mt]))return Wr;if(l[An]+1<this.min(l[Mt],l[Bn],l[ln],l[Jn])){if(l[An]<l[Wr])return An;if(l[An]===l[Wr]){for(var p=r+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Wr;if(!this.isNativeX12(g))break;p++}return An}}}}},t.min=function(e,r,n,i,a){var o=Math.min(e,Math.min(r,Math.min(n,i)));return a===void 0?o:Math.min(o,a)},t.findMinimums=function(e,r,n,i){for(var a=0;a<6;a++){var o=r[a]=Math.ceil(e[a]);n>o&&(n=o,Qr.fill(i,0)),n===o&&(i[a]=i[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=et.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t})(),z2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q6=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return ha.encode(e,this.charset)!=null}catch{return!1}},t})(),dee=(function(){function t(e,r,n){var i,a,o,l,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(L){return new q6(VJ.forName(L))}),this.encoders=[];var d=[];d.push(new q6(HJ.ISO_8859_1));for(var p=r!=null&&r.name.startsWith("UTF"),g=0;g<e.length;g++){var m=!1;try{for(var b=(i=void 0,z2(d)),w=b.next();!w.done;w=b.next()){var E=w.value,S=e.charAt(g),I=S.charCodeAt(0);if(I===n||E.canEncode(S)){m=!0;break}}}catch(L){i={error:L}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}if(!m)try{for(var O=(o=void 0,z2(this.ENCODERS)),D=O.next();!D.done;D=O.next()){var E=D.value;if(E.canEncode(e.charAt(g))){d.push(E),m=!0;break}}}catch(L){o={error:L}}finally{try{D&&!D.done&&(l=O.return)&&l.call(O)}finally{if(o)throw o.error}}m||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var k=0;try{for(var B=z2(d),R=B.next();!R.done;R=B.next()){var E=R.value;this.encoders[k++]=E}}catch(L){c={error:L}}finally{try{R&&!R.done&&(f=B.return)&&f.call(B)}finally{if(c)throw c.error}}}var N=-1;if(r!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&r.name===this.encoders[g].name){N=g;break}}this.priorityEncoderIndex=N}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return ha.encode(ht.getCharAt(e),this.encoders[r].name)},t})(),hee=3,pee=(function(){function t(e,r,n){this.fnc1=n;var i=new dee(e,r,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Ze,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,a,o){var l=e.charAt(i).charCodeAt(0),c=0,f=r.length();r.getPriorityEncoderIndex()>=0&&(l===o||r.canEncode(l,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(l===o||r.canEncode(l,d))&&this.addEdge(n,i+1,new G6(l,r,d,a,o))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,a=new G6[i+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var o=1;o<=i;o++){for(var l=0;l<r.length();l++)a[o][l]!=null&&o<i&&this.addEdges(e,r,a,o,a[o][l],n);for(var l=0;l<r.length();l++)a[o-1][l]=null}for(var c=-1,f=et.MAX_VALUE,l=0;l<r.length();l++)if(a[i][l]!=null){var d=a[i][l];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var m=r.encode(g.c,g.encoderIndex),o=m.length-1;o>=0;o--)p.unshift(m[o]&255);var b=g.previous===null?0:g.previous.encoderIndex;b!==g.encoderIndex&&p.unshift(256+r.getECIValue(g.encoderIndex)),g=g.previous}for(var w=[],o=0;o<w.length;o++)w[o]=p[o];return w},t})(),G6=(function(){function t(e,r,n,i,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,l=i===null?0:i.encoderIndex;l!==n&&(o+=hee),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),gee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();var W6;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(W6||(W6={}));(function(t){gee(e,t);function e(r,n,i,a,o){var l=t.call(this,r,n,i)||this;return l.shape=a,l.macroId=o,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(pee);var vee=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),K6=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t})(),mee=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),yee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),NA=(function(t){yee(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+et.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e})(mee),xee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bee=(function(t){xee(e,t);function e(r,n,i){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(NA);function _ee(t,e,r){return new bee(t,e,r)}function Eh(t,e,r){return new NA(t,e,r)}var wee=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rl=0,av=1,ca=2,Tk=3,po=4,Eee=new NA(null,0,0),V2=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Aee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function See(t){var e,r;try{for(var n=Aee(t),i=n.next();!i.done;i=n.next()){var a=i.value;Qr.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[Rl][po]=0,t[av][po]=0,t[av][Rl]=28,t[Tk][po]=0,t[ca][po]=0,t[ca][Rl]=15,t}var Ik=See(Qr.createInt32Array(6,6)),Cee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tee=(function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=V2[this.mode][e];i=Eh(i,a&65535,a>>16),n+=a>>16}var o=e===ca?4:5;return i=Eh(i,r,o),new t(i,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===ca?4:5;return n=Eh(n,Ik[this.mode][e],i),n=Eh(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===po||this.mode===ca){var a=V2[n][Rl];r=Eh(r,a&65535,a>>16),i+=a>>16,n=Rl}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,i+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=_ee(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(V2[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new dn;try{for(var l=Cee(i),c=l.next();!c.done;c=l.next()){var f=c.value;f.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return ht.format("%s bits=%d bytes=%d",wee[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(Eee,Rl,0,0),t})();function Iee(t){var e=ht.getCharCode(" "),r=ht.getCharCode("."),n=ht.getCharCode(",");t[Rl][e]=1;for(var i=ht.getCharCode("Z"),a=ht.getCharCode("A"),o=a;o<=i;o++)t[Rl][o]=o-a+2;t[av][e]=1;for(var l=ht.getCharCode("z"),c=ht.getCharCode("a"),o=c;o<=l;o++)t[av][o]=o-c+2;t[ca][e]=1;for(var f=ht.getCharCode("9"),d=ht.getCharCode("0"),o=d;o<=f;o++)t[ca][o]=o-d+2;t[ca][n]=12,t[ca][r]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)t[Tk][ht.getCharCode(p[g])]=g;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<m.length;g++)ht.getCharCode(m[g])>0&&(t[po][ht.getCharCode(m[g])]=g);return t}var H2=Iee(Qr.createInt32Array(5,256)),Yg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oee=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=ht.getCharCode(" "),r=ht.getCharCode(`
`),n=K6.singletonList(Tee.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ht.getCharCode("\r"):a=o===r?2:0;break;case ht.getCharCode("."):a=o===e?3:0;break;case ht.getCharCode(","):a=o===e?4:0;break;case ht.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var l=K6.min(n,function(c,f){return c.getBitCount()-f.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,a=[];try{for(var o=Yg(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,r,a)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,a=H2[e.getMode()][i]>0,o=null,l=0;l<=po;l++){var c=H2[l][i];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!a||l===e.getMode()||l===ca){var f=o.latchAndAppend(l,c);n.push(f)}if(!a&&Ik[e.getMode()][l]>=0){var d=o.shiftAndAppend(l,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||H2[e.getMode()][i]===0){var p=e.addBinaryShiftChar(r);n.push(p)}},t.updateStateListForPair=function(e,r,n){var i,a,o=[];try{for(var l=Yg(e),c=l.next();!c.done;c=l.next()){var f=c.value;this.updateStateForPair(f,r,n,o)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,i){var a=e.endBinaryShift(r);if(i.push(a.latchAndAppend(po,n)),e.getMode()!==po&&i.push(a.shiftAndAppend(po,n)),n===3||n===4){var o=a.latchAndAppend(ca,16-n).latchAndAppend(ca,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(l)}},t.simplifyStates=function(e){var r,n,i,a,o=[];try{for(var l=Yg(e),c=l.next();!c.done;c=l.next()){var f=c.value,d=!0,p=function(E){if(E.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(E)&&(o=o.filter(function(S){return S!==E}))};try{for(var g=(i=void 0,Yg(o)),m=g.next();!m.done;m=g.next()){var b=m.value,w=p(b);if(w==="break")break}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}d&&o.push(f)}}catch(E){r={error:E}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t})(),Ree=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new Oee(e).encode(),a=et.truncDivision(i.getSize()*r,100)+11,o=i.getSize()+a,l,c,f,d,p;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Le(ht.format("Illegal value %s for layers",n));f=t.totalBitsInLayer(c,l),d=t.WORD_SIZE[c];var g=f-f%d;if(p=t.stuffBits(i,d),p.getSize()+a>g)throw new Le("Data to large for user specified layer");if(l&&p.getSize()>d*64)throw new Le("Data to large for user specified layer")}else{d=0,p=null;for(var m=0;;m++){if(m>t.MAX_NB_BITS)throw new Le("Data too large for an Aztec code");if(l=m<=3,c=l?m+1:m,f=t.totalBitsInLayer(c,l),!(o>f)){(p==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],p=t.stuffBits(i,d));var g=f-f%d;if(!(l&&p.getSize()>d*64)&&p.getSize()+a<=g)break}}}var b=t.generateCheckWords(p,f,d),w=p.getSize()/d,E=t.generateModeMessage(l,c,w),S=(l?11:14)+c*4,I=new Int32Array(S),O;if(l){O=S;for(var m=0;m<I.length;m++)I[m]=m}else{O=S+1+2*et.truncDivision(et.truncDivision(S,2)-1,15);for(var D=et.truncDivision(S,2),k=et.truncDivision(O,2),m=0;m<D;m++){var B=m+et.truncDivision(m,15);I[D-m-1]=k-B-1,I[D+m]=k+B+1}}for(var R=new Ao(O),m=0,N=0;m<c;m++){for(var L=(c-m)*4+(l?9:12),U=0;U<L;U++)for(var z=U*2,H=0;H<2;H++)b.get(N+z+H)&&R.set(I[m*2+H],I[m*2+U]),b.get(N+L*2+z+H)&&R.set(I[m*2+U],I[S-1-m*2-H]),b.get(N+L*4+z+H)&&R.set(I[S-1-m*2-H],I[S-1-m*2-U]),b.get(N+L*6+z+H)&&R.set(I[S-1-m*2-U],I[m*2+H]);N+=L*8}if(t.drawModeMessage(R,l,O,E),l)t.drawBullsEye(R,et.truncDivision(O,2),5);else{t.drawBullsEye(R,et.truncDivision(O,2),7);for(var m=0,U=0;m<et.truncDivision(S,2)-1;m+=15,U+=16)for(var H=et.truncDivision(O,2)&1;H<O;H+=2)R.set(et.truncDivision(O,2)-U,H),R.set(et.truncDivision(O,2)+U,H),R.set(H,et.truncDivision(O,2)-U),R.set(H,et.truncDivision(O,2)+U)}var j=new vee;return j.setCompact(l),j.setSize(O),j.setLayers(c),j.setCodeWords(w),j.setMatrix(R),j},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var a=r-i;a<=r+i;a++)e.set(a,r-i),e.set(a,r+i),e.set(r-i,a),e.set(r+i,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new dn;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var a=et.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var l=a-3+o;i.get(o)&&e.set(l,a-5),i.get(o+7)&&e.set(a+5,l),i.get(20-o)&&e.set(l,a+5),i.get(27-o)&&e.set(a-5,l)}else for(var o=0;o<10;o++){var l=a-5+o+et.truncDivision(o,5);i.get(o)&&e.set(l,a-7),i.get(o+10)&&e.set(a+7,l),i.get(29-o)&&e.set(l,a+7),i.get(39-o)&&e.set(a-7,l)}},t.generateCheckWords=function(e,r,n){var i,a,o=e.getSize()/n,l=new Sk(t.getGF(n)),c=et.truncDivision(r,n),f=t.bitsToWords(e,n,c);l.encode(f,c-o);var d=r%n,p=new dn;p.appendBits(0,d);try{for(var g=Ree(Array.from(f)),m=g.next();!m.done;m=g.next()){var b=m.value;p.appendBits(b,n)}}catch(w){i={error:w}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),a,o;for(a=0,o=e.getSize()/r;a<o;a++){for(var l=0,c=0;c<r;c++)l|=e.get(a*r+c)?1<<r-c-1:0;i[a]=l}return i},t.getGF=function(e){switch(e){case 4:return gi.AZTEC_PARAM;case 6:return gi.AZTEC_DATA_6;case 8:return gi.AZTEC_DATA_8;case 10:return gi.AZTEC_DATA_10;case 12:return gi.AZTEC_DATA_12;default:throw new Le("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new dn,i=e.getSize(),a=(1<<r)-2,o=0;o<i;o+=r){for(var l=0,c=0;c<r;c++)(o+c>=i||e.get(o+c))&&(l|=1<<r-1-c);(l&a)===a?(n.appendBits(l&a,r),o--):(l&a)===0?(n.appendBits(l|1,r),o--):n.appendBits(l,r)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const Ok="YOUR_RAKUTEN_APP_ID_HERE",Pee="b72c14dc75bcde18fb7d3628bf7e92b7";async function Dee(t){console.log(`[商品検索] JANコード: ${t}`);try{const e=await Nee(t);if(e)return console.log("[商品検索] 楽天市場APIで商品発見"),e}catch(e){console.warn("[商品検索] 楽天市場API失敗:",e)}try{const e=await Mee(t);if(e)return console.log("[商品検索] 楽天商品APIで商品発見"),e}catch(e){console.warn("[商品検索] 楽天商品API失敗:",e)}try{const e=await kee(t);if(e)return console.log("[商品検索] JAN Code Lookup APIで商品発見"),e}catch(e){console.warn("[商品検索] JAN Code Lookup API失敗:",e)}try{const e=await jee(t);if(e)return console.log("[商品検索] Open Food Facts APIで商品発見"),e}catch(e){console.warn("[商品検索] Open Food Facts API失敗:",e)}return console.warn("[商品検索] すべてのAPIで商品が見つかりませんでした。モックデータを使用します。"),Lee(t)}async function Nee(t){const e=new URL("https://app.rakuten.co.jp/services/api/IchibaItem/Search/20220601");e.searchParams.set("applicationId",Ok),e.searchParams.set("keyword",t),e.searchParams.set("hits","1");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.Items||n.Items.length===0)return null;const i=n.Items[0].Item;return{barcode:t,name:i.itemName,price:i.itemPrice,manufacturer:i.shopName||"",imageUrl:i.mediumImageUrls?.[0]?.imageUrl||"",source:"rakuten_ichiba"}}async function Mee(t){const e=new URL("https://app.rakuten.co.jp/services/api/Product/Search/20170426");e.searchParams.set("applicationId",Ok),e.searchParams.set("keyword",t),e.searchParams.set("hits","1");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.Products||n.Products.length===0)return null;const i=n.Products[0].Product;return{barcode:t,name:i.productName,price:i.minPrice||0,manufacturer:i.makerName||"",imageUrl:i.mediumImageUrl||"",source:"rakuten_product"}}async function kee(t){const e=new URL("https://api.jancodelookup.com/");e.searchParams.set("appId",Pee),e.searchParams.set("query",t),e.searchParams.set("type","code");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.product||n.product.length===0)return null;const i=n.product[0];return{barcode:t,name:i.itemName||"",price:0,manufacturer:i.makerName||i.brandName||"",imageUrl:i.itemImageUrl||"",source:"jancode_lookup"}}async function jee(t){const e=`https://world.openfoodfacts.org/api/v0/product/${t}.json`,r=await fetch(e);if(!r.ok)return null;const n=await r.json();if(n.status!==1||!n.product)return null;const i=n.product;return{barcode:t,name:i.product_name||i.product_name_ja||"",calories:i.nutriments?.["energy-kcal_100g"],price:0,manufacturer:i.brands||"",imageUrl:i.image_url||"",source:"openfoodfacts"}}function Lee(t){const r={"4902102072453":{name:"明治おいしい牛乳 900ml",price:258,calories:67,manufacturer:"明治",imageUrl:""},"4901777313989":{name:"サントリー天然水 2L",price:138,calories:0,manufacturer:"サントリー",imageUrl:""},"4902430479318":{name:"ポカリスエット 500ml",price:148,calories:125,manufacturer:"大塚製薬",imageUrl:""}}[t];return r?{barcode:t,...r,source:"mock"}:{barcode:t,name:`商品 (${t})`,price:0,manufacturer:"不明",source:"mock"}}const Bee=({onProductFound:t,onClose:e})=>{const r=C.useRef(null),[n,i]=C.useState(null),[a,o]=C.useState(null),[l,c]=C.useState(!1),f=C.useRef(null);C.useEffect(()=>(d(),()=>{p()}),[]);const d=async()=>{try{i(null);const m=new DJ;f.current=m;const b=await m.listVideoInputDevices();if(b.length===0)throw new Error("カメラが見つかりません");const w=b.find(S=>{const I=S.label.toLowerCase();return I.includes("back")||I.includes("rear")||I.includes("environment")||I.includes("camera")&&I.includes("0")}),E=w?w.deviceId:b[b.length-1].deviceId;console.log("使用するカメラ:",w?w.label:b[b.length-1].label),m.decodeFromVideoDevice(E,r.current,async(S,I)=>{if(S&&!l){const O=S.getText();if(O===a)return;o(O),c(!0);try{const D=await Dee(O);D?(t(D),p()):(i(`商品情報が見つかりませんでした: ${O}`),c(!1),setTimeout(()=>{i(null),o(null)},3e3))}catch(D){console.error("商品情報取得エラー:",D),i("商品情報の取得に失敗しました"),c(!1),setTimeout(()=>{i(null),o(null)},3e3)}}I&&!(I instanceof oe)&&console.error("スキャンエラー:",I)})}catch(m){console.error("カメラ起動エラー:",m),i(m instanceof Error?m.message:"カメラの起動に失敗しました")}},p=()=>{f.current&&(f.current.reset(),f.current=null)},g=()=>{p(),e()};return y.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",zIndex:9999,display:"flex",flexDirection:"column"},children:[y.jsxs("div",{style:{padding:"16px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("h2",{style:{margin:0,fontSize:"1.2rem",fontWeight:600},children:"バーコードスキャン"}),y.jsx("button",{onClick:g,style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px"},children:"✕"})]}),y.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[y.jsx("video",{ref:r,style:{width:"100%",height:"100%",objectFit:"cover"}}),y.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"300px",height:"150px",border:"2px solid #22c55e",borderRadius:"8px",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}}),l&&y.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.8)",color:"#fff",padding:"20px 32px",borderRadius:"12px",fontSize:"1rem",fontWeight:600},children:"商品情報を取得中..."}),n&&y.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(239, 68, 68, 0.95)",color:"#fff",padding:"12px 24px",borderRadius:"8px",fontSize:"0.9rem",maxWidth:"90%",textAlign:"center"},children:n})]}),y.jsx("div",{style:{padding:"16px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",textAlign:"center"},children:y.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#999"},children:"バーコードを枠内に合わせてください"})})]})},Uee=({product:t,onAdded:e,onNavigateToStock:r})=>{const{addIntake:n}=Oo(),{addStock:i}=Po(),[a,o]=C.useState(""),[l,c]=C.useState(t.price?.toString()||""),[f,d]=C.useState("7"),p=()=>{if(!a){alert("カロリーを入力してください");return}if(!l){alert("金額を入力してください");return}n({name:t.name,calories:Number(a),price:Number(l)}),alert("食事記録に追加しました！"),e()},g=()=>{if(!f){alert("賞味期限までの日数を入力してください");return}i({name:t.name,quantity:1,daysRemaining:Number(f),price:l?Number(l):void 0}),r?(e(),setTimeout(()=>{r()},100)):(alert("在庫管理に追加しました！"),e())};return y.jsxs("div",{className:"card",children:[y.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(Yv,{size:24,color:"#10b981"}),"商品情報を取得しました"]}),y.jsxs("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"12px",marginBottom:"20px"},children:[y.jsxs("div",{style:{marginBottom:"12px"},children:[y.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"商品名"}),y.jsx("div",{style:{fontWeight:600,fontSize:"1.05rem"},children:t.name})]}),t.manufacturer&&y.jsxs("div",{style:{marginBottom:"12px"},children:[y.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"メーカー"}),y.jsx("div",{style:{fontWeight:500},children:t.manufacturer})]}),y.jsxs("div",{style:{marginBottom:"12px"},children:[y.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"バーコード"}),y.jsx("div",{style:{fontFamily:"monospace",color:"#666"},children:t.barcode})]}),t.price&&y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"価格（参考）"}),y.jsxs("div",{style:{fontWeight:600,color:"var(--primary)"},children:["¥",t.price.toLocaleString()]})]}),y.jsxs("div",{style:{marginTop:"12px",padding:"8px 12px",background:t.source==="rakuten_ichiba"||t.source==="rakuten_product"?"#bf0000":t.source==="jancode_lookup"?"#3b82f6":"#10b981",color:"#fff",borderRadius:"6px",fontSize:"0.75rem",fontWeight:500,display:"inline-block"},children:[t.source==="rakuten_ichiba"&&"楽天市場",t.source==="rakuten_product"&&"楽天商品検索",t.source==="jancode_lookup"&&"JAN Code Lookup",t.source==="openfoodfacts"&&"Open Food Facts",t.source==="mock"&&"モックデータ"]})]}),y.jsxs("div",{style:{marginBottom:"24px"},children:[y.jsxs("h4",{style:{marginBottom:"12px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"6px"},children:[y.jsx(aE,{size:18}),"食事記録に追加"]}),y.jsx("label",{children:"カロリー (kcal)"}),y.jsx("input",{type:"number",value:a,onChange:m=>o(m.target.value),placeholder:"例: 200"}),y.jsx("label",{children:"金額 (円)"}),y.jsx("input",{type:"number",value:l,onChange:m=>c(m.target.value),placeholder:"例: 150"}),y.jsx("button",{className:"submit",onClick:p,style:{background:"#3b82f6"},children:"食事記録に追加"})]}),y.jsxs("div",{children:[y.jsxs("h4",{style:{marginBottom:"12px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"6px"},children:[y.jsx(Cf,{size:18}),"在庫管理に追加"]}),y.jsx("label",{children:"賞味期限までの日数"}),y.jsx("input",{type:"number",value:f,onChange:m=>d(m.target.value),placeholder:"例: 7"}),y.jsx("button",{className:"submit",onClick:g,style:{background:"#10b981"},children:r?"在庫管理に追加して画面移動":"在庫管理に追加"})]}),y.jsx("button",{onClick:e,style:{marginTop:"16px",width:"100%",padding:"12px",background:"transparent",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"#666"},children:"キャンセル"})]})},Fee=({onReceiptScanned:t,onClose:e})=>{const r=C.useRef(null),n=C.useRef(null),i=C.useRef(null),[a,o]=C.useState(!1),[l,c]=C.useState(null),[f,d]=C.useState(null),p=async()=>{try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});r.current&&(r.current.srcObject=w,d(w))}catch(w){console.error("カメラアクセスエラー:",w),c("カメラにアクセスできません。ファイル選択をお試しください。")}};Hn.useEffect(()=>(p(),()=>{f&&f.getTracks().forEach(w=>w.stop())}),[]);const g=async()=>{if(!(!r.current||!n.current)){o(!0),c(null);try{const w=r.current,E=n.current,S=E.getContext("2d");if(!S)throw new Error("Canvas context が取得できません");E.width=w.videoWidth,E.height=w.videoHeight,S.drawImage(w,0,0);const I=await new Promise((k,B)=>{E.toBlob(R=>{R?k(R):B(new Error("Blob変換に失敗しました"))},"image/jpeg",.95)}),O=new File([I],"receipt.jpg",{type:"image/jpeg"}),D=await h6(O);f&&f.getTracks().forEach(k=>k.stop()),t(D)}catch(w){console.error("OCRエラー:",w),c(w.message||"レシートの読み取りに失敗しました")}finally{o(!1)}}},m=async w=>{const E=w.target.files?.[0];if(E){o(!0),c(null);try{const S=await h6(E);f&&f.getTracks().forEach(I=>I.stop()),t(S)}catch(S){console.error("OCRエラー:",S),c(S.message||"レシートの読み取りに失敗しました")}finally{o(!1)}}},b=()=>{f&&f.getTracks().forEach(w=>w.stop()),e()};return y.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",zIndex:1e3,display:"flex",flexDirection:"column"},children:[y.jsxs("div",{style:{background:"rgba(0,0,0,0.8)",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("h3",{style:{color:"white",margin:0},children:"レシートをスキャン"}),y.jsx("button",{onClick:b,style:{background:"transparent",border:"none",color:"white",cursor:"pointer",padding:"8px"},disabled:a,children:y.jsx(cs,{size:24})})]}),y.jsxs("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:[y.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),y.jsx("canvas",{ref:n,style:{display:"none"}}),y.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"60%",border:"2px dashed rgba(255, 255, 255, 0.8)",borderRadius:"8px",pointerEvents:"none"},children:y.jsx("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.7)",color:"white",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",whiteSpace:"nowrap"},children:"レシートを枠内に収めてください"})}),l&&y.jsx("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"#ef4444",color:"white",padding:"12px 20px",borderRadius:"8px",maxWidth:"80%",textAlign:"center"},children:l})]}),y.jsxs("div",{style:{background:"rgba(0,0,0,0.8)",padding:"20px",display:"flex",justifyContent:"center",gap:"16px"},children:[y.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:m,style:{display:"none"}}),y.jsxs("button",{onClick:()=>i.current?.click(),disabled:a,style:{background:"#6366f1",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px",opacity:a?.5:1},children:[y.jsx(FF,{size:20}),"ファイル選択"]}),y.jsx("button",{onClick:g,disabled:a,style:{background:"#10b981",color:"white",border:"none",padding:"16px 32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",fontWeight:"bold",opacity:a?.5:1,width:"80px",height:"80px",display:"flex",alignItems:"center",justifyContent:"center"},children:a?"...":y.jsx(Jh,{size:32})})]})]})},zee=({result:t,onClose:e})=>{const{addExpense:r}=Ro(),[n,i]=C.useState(t.items),[a,o]=C.useState(null),[l,c]=C.useState(""),[f,d]=C.useState(""),p=n.reduce((O,D)=>O+D.price*(D.quantity||1),0),g=O=>{const D=n[O];o(O),c(D.name),d(D.price.toString())},m=()=>{if(a===null)return;const O=parseInt(f,10);if(isNaN(O)||O<=0){alert("正しい金額を入力してください");return}const D=[...n];D[a]={...D[a],name:l.trim(),price:O},i(D),o(null),c(""),d("")},b=()=>{o(null),c(""),d("")},w=O=>{if(window.confirm("この商品を削除しますか？")){const D=n.filter((k,B)=>B!==O);i(D)}},E=()=>{const O=window.prompt("商品名を入力してください");if(!O||!O.trim())return;const D=window.prompt("金額を入力してください");if(!D)return;const k=parseInt(D,10);if(isNaN(k)||k<=0){alert("正しい金額を入力してください");return}i([...n,{name:O.trim(),price:k,quantity:1}])},S=()=>{if(n.length===0){alert("商品が1つもありません");return}if(!window.confirm(`${n.length}個の商品を家計簿に登録しますか？
合計金額: ¥${p.toLocaleString()}`))return;const O=new Date().toISOString();n.forEach(D=>{const k=D.quantity||1;for(let B=0;B<k;B++)r({category:"food",amount:D.price,memo:D.name,date:t.date||O})}),alert("家計簿に登録しました！"),e()},I=O=>new Intl.NumberFormat("ja-JP").format(O);return y.jsxs("div",{className:"card",children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[y.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[y.jsx(sD,{size:20}),"レシート内容"]}),y.jsxs("button",{onClick:E,style:{background:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"4px"},children:[y.jsx(P1,{size:18}),"追加"]})]}),y.jsxs("div",{style:{background:"var(--background)",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:[t.storeName&&y.jsxs("div",{style:{marginBottom:"4px"},children:[y.jsx("strong",{children:"店舗:"})," ",t.storeName]}),t.date&&y.jsxs("div",{children:[y.jsx("strong",{children:"日付:"})," ",t.date]})]}),n.length===0?y.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"商品が検出されませんでした。「追加」ボタンから手動で追加してください。"}):y.jsx("div",{style:{marginBottom:"16px"},children:n.map((O,D)=>y.jsx("div",{style:{padding:"12px",borderBottom:D<n.length-1?"1px solid var(--border)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:a===D?y.jsxs("div",{style:{flex:1,display:"flex",gap:"8px",alignItems:"center"},children:[y.jsx("input",{value:l,onChange:k=>c(k.target.value),placeholder:"商品名",style:{flex:1,padding:"6px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"14px"}}),y.jsx("input",{value:f,onChange:k=>d(k.target.value),type:"number",placeholder:"金額",style:{width:"80px",padding:"6px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"14px"}}),y.jsx("button",{onClick:m,style:{background:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:y.jsx(iE,{size:16})}),y.jsx("button",{onClick:b,style:{background:"#6b7280",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"×"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{flex:1},children:[y.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:O.name}),O.quantity&&O.quantity>1&&y.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["数量: ",O.quantity,"個"]})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[y.jsxs("span",{style:{fontSize:"16px",fontWeight:"bold",color:"var(--danger)"},children:["¥",I(O.price*(O.quantity||1))]}),y.jsx("button",{onClick:()=>g(D),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",color:"var(--primary)"},children:y.jsx(hD,{size:18})}),y.jsx("button",{onClick:()=>w(D),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",color:"#ef4444"},children:y.jsx(Kf,{size:18})})]})]})},D))}),y.jsxs("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"8px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:"合計"}),y.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",color:"var(--danger)"},children:["¥",I(p)]})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[y.jsx("button",{onClick:e,style:{background:"var(--border)",color:"var(--text)",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:"キャンセル"}),y.jsx("button",{onClick:S,className:"submit",disabled:n.length===0,style:{opacity:n.length===0?.5:1},children:"家計簿に登録"})]}),y.jsxs("details",{style:{marginTop:"16px"},children:[y.jsx("summary",{style:{cursor:"pointer",fontSize:"12px",color:"var(--text-secondary)"},children:"OCR生テキストを表示"}),y.jsx("pre",{style:{marginTop:"8px",padding:"12px",background:"var(--background)",borderRadius:"4px",fontSize:"11px",overflow:"auto",maxHeight:"200px",whiteSpace:"pre-wrap"},children:t.rawText})]})]})},Vee=({onNavigateToStock:t})=>{const[e,r]=C.useState("select"),[n,i]=C.useState(!1),[a,o]=C.useState(null),[l,c]=C.useState(null),f=()=>{r("barcode"),i(!0),o(null)},d=()=>{r("receipt"),i(!0),c(null)},p=E=>{o(E),i(!1)},g=E=>{c(E),i(!1)},m=()=>{o(null),r("select")},b=()=>{c(null),r("select")},w=()=>{r("select"),i(!1),o(null),c(null)};return y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"スキャン"}),e==="select"&&!n&&!a&&!l&&y.jsx(y.Fragment,{children:y.jsxs("div",{className:"card",children:[y.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(Jh,{size:20}),"スキャンモードを選択"]}),y.jsx("p",{style:{color:"#666",marginBottom:"20px",lineHeight:"1.6"},children:"バーコードまたはレシートをスキャンできます"}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[y.jsxs("button",{onClick:f,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"24px 16px",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",fontWeight:500,fontSize:"16px"},children:[y.jsx(NF,{size:48}),y.jsx("span",{children:"バーコード"}),y.jsx("span",{style:{fontSize:"12px",opacity:.9},children:"JANコード"})]}),y.jsxs("button",{onClick:d,style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",border:"none",padding:"24px 16px",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",fontWeight:500,fontSize:"16px"},children:[y.jsx(sD,{size:48}),y.jsx("span",{children:"レシート"}),y.jsx("span",{style:{fontSize:"12px",opacity:.9},children:"OCR読み取り"})]})]})]})}),e==="barcode"&&n&&y.jsx(Bee,{onProductFound:p,onClose:w}),e==="barcode"&&a&&y.jsx(Uee,{product:a,onAdded:m,onNavigateToStock:t}),e==="receipt"&&n&&y.jsx(Fee,{onReceiptScanned:g,onClose:w}),e==="receipt"&&l&&y.jsx(zee,{result:l,onClose:b})]})};function X6(t,e,r){return t.filter(n=>{const i=new Date(n.date);return i.getFullYear()===e&&i.getMonth()+1===r})}function Y6(t,e,r,n){const i=X6(r,t,e),a=X6(n,t,e),o=i.reduce((d,p)=>d+p.calories,0),l=i.reduce((d,p)=>d+(p.price||0),0),c=a.reduce((d,p)=>d+p.amount,0),f={};return a.forEach(d=>{f[d.category]=(f[d.category]||0)+d.amount}),{year:t,month:e,intakes:{count:i.length,totalCalories:o,avgCalories:i.length>0?o/i.length:0,totalPrice:l},expenses:{count:a.length,total:c,byCategory:f}}}function Hee(t,e,r,n){const i=Y6(t,e,r,n);let a=t,o=e-1;o===0&&(o=12,a-=1);const l=Y6(a,o,r,n),c=(f,d)=>d===0?f>0?100:0:(f-d)/d*100;return{current:i,previous:l,changes:{intakesCount:c(i.intakes.count,l.intakes.count),totalCalories:c(i.intakes.totalCalories,l.intakes.totalCalories),avgCalories:c(i.intakes.avgCalories,l.intakes.avgCalories),totalExpenses:c(i.expenses.total,l.expenses.total)}}}function $ee(t){const{current:e,previous:r,changes:n}=t;return`以下のユーザーの月次健康・家計データを分析し、3〜5つの具体的な改善提案をしてください。

【今月のデータ（${e.year}年${e.month}月）】
- 食事記録: ${e.intakes.count}回
- 総カロリー: ${e.intakes.totalCalories.toLocaleString()}kcal
- 平均カロリー: ${Math.round(e.intakes.avgCalories)}kcal/食
- 食費: ¥${e.intakes.totalPrice.toLocaleString()}
- 総支出: ¥${e.expenses.total.toLocaleString()}

【先月のデータ（${r.year}年${r.month}月）】
- 食事記録: ${r.intakes.count}回
- 総カロリー: ${r.intakes.totalCalories.toLocaleString()}kcal
- 平均カロリー: ${Math.round(r.intakes.avgCalories)}kcal/食
- 総支出: ¥${r.expenses.total.toLocaleString()}

【先月比の変化】
- 食事記録回数: ${n.intakesCount>0?"+":""}${n.intakesCount.toFixed(1)}%
- 総カロリー: ${n.totalCalories>0?"+":""}${n.totalCalories.toFixed(1)}%
- 平均カロリー: ${n.avgCalories>0?"+":""}${n.avgCalories.toFixed(1)}%
- 総支出: ${n.totalExpenses>0?"+":""}${n.totalExpenses.toFixed(1)}%

【お願い】
1. データの傾向を簡潔に分析してください
2. 健康面での改善提案を2〜3点
3. 家計面での改善提案を1〜2点
4. 具体的で実行可能なアドバイスをお願いします
5. 日本語で、親しみやすくわかりやすい表現で回答してください`}function qee(){const{intakes:t}=Oo(),{expenses:e}=Ro(),r=new Date,[n,i]=C.useState(r.getFullYear()),[a,o]=C.useState(r.getMonth()+1),[l,c]=C.useState(null),[f,d]=C.useState(""),[p,g]=C.useState(!1);C.useEffect(()=>{const D=Hee(n,a,t,e);c(D)},[n,a,t,e]);const m=async()=>{if(l){g(!0);try{const D=$ee(l),k=await EY(D);d(k)}catch(D){console.error("AI提案生成エラー:",D),alert("AI提案の生成に失敗しました")}finally{g(!1)}}},b=()=>{a===1?(i(n-1),o(12)):o(a-1),d("")},w=()=>{a===12?(i(n+1),o(1)):o(a+1),d("")},E=D=>{if(D===0)return y.jsx("span",{className:"change-neutral",children:"±0%"});const k=D>0?y.jsx(nE,{}):y.jsx(RF,{}),B=D>0?"change-up":"change-down";return y.jsxs("span",{className:`change ${B}`,children:[k," ",D>0?"+":"",D.toFixed(1),"%"]})};if(!l)return y.jsx("div",{className:"card",children:"データを読み込み中..."});const{current:S,previous:I,changes:O}=l;return y.jsx("div",{className:"monthly-report",children:y.jsxs("div",{className:"card",children:[y.jsxs("div",{className:"report-header",children:[y.jsx("h3",{children:"📊 月次レポート"}),y.jsxs("div",{className:"month-selector",children:[y.jsx("button",{className:"month-nav-btn",onClick:b,children:"◀"}),y.jsxs("span",{className:"current-month",children:[n,"年",a,"月"]}),y.jsx("button",{className:"month-nav-btn",onClick:w,children:"▶"})]})]}),y.jsxs("div",{className:"report-section",children:[y.jsx("h4",{children:"今月の記録"}),y.jsxs("div",{className:"stats-grid",children:[y.jsxs("div",{className:"stat-item",children:[y.jsx("div",{className:"stat-label",children:"食事記録"}),y.jsxs("div",{className:"stat-value",children:[S.intakes.count,"回"]}),E(O.intakesCount)]}),y.jsxs("div",{className:"stat-item",children:[y.jsx("div",{className:"stat-label",children:"平均カロリー"}),y.jsxs("div",{className:"stat-value",children:[Math.round(S.intakes.avgCalories),"kcal"]}),E(O.avgCalories)]}),y.jsxs("div",{className:"stat-item",children:[y.jsx("div",{className:"stat-label",children:"総カロリー"}),y.jsxs("div",{className:"stat-value",children:[S.intakes.totalCalories.toLocaleString(),"kcal"]}),E(O.totalCalories)]}),y.jsxs("div",{className:"stat-item",children:[y.jsx("div",{className:"stat-label",children:"総支出"}),y.jsxs("div",{className:"stat-value",children:["¥",S.expenses.total.toLocaleString()]}),E(O.totalExpenses)]})]})]}),y.jsxs("div",{className:"report-section",children:[y.jsxs("h4",{children:["先月（",I.year,"年",I.month,"月）との比較"]}),y.jsxs("div",{className:"comparison-grid",children:[y.jsxs("div",{className:"comparison-item",children:[y.jsx("div",{className:"comparison-label",children:"食事記録"}),y.jsxs("div",{className:"comparison-values",children:[y.jsxs("span",{className:"prev-value",children:[I.intakes.count,"回"]}),y.jsx(m2,{}),y.jsxs("span",{className:"curr-value",children:[S.intakes.count,"回"]})]})]}),y.jsxs("div",{className:"comparison-item",children:[y.jsx("div",{className:"comparison-label",children:"平均カロリー"}),y.jsxs("div",{className:"comparison-values",children:[y.jsxs("span",{className:"prev-value",children:[Math.round(I.intakes.avgCalories),"kcal"]}),y.jsx(m2,{}),y.jsxs("span",{className:"curr-value",children:[Math.round(S.intakes.avgCalories),"kcal"]})]})]}),y.jsxs("div",{className:"comparison-item",children:[y.jsx("div",{className:"comparison-label",children:"総支出"}),y.jsxs("div",{className:"comparison-values",children:[y.jsxs("span",{className:"prev-value",children:["¥",I.expenses.total.toLocaleString()]}),y.jsx(m2,{}),y.jsxs("span",{className:"curr-value",children:["¥",S.expenses.total.toLocaleString()]})]})]})]})]}),y.jsxs("div",{className:"report-section",children:[y.jsxs("h4",{children:[y.jsx(D1,{size:20,style:{marginRight:"8px"}}),"AI改善提案"]}),f?y.jsxs("div",{className:"ai-suggestions",children:[y.jsx("div",{className:"suggestions-content",children:f}),y.jsx("button",{className:"submit",onClick:m,disabled:p,style:{marginTop:"12px"},children:"再生成"})]}):y.jsx("button",{className:"submit",onClick:m,disabled:p||S.intakes.count===0,style:{width:"100%"},children:p?"提案を生成中...":"AI改善提案を生成"}),S.intakes.count===0&&y.jsx("p",{className:"no-data-message",children:"データがありません。食事記録を追加してください。"})]})]})})}function Rk(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Rk(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function xt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Rk(t))&&(n&&(n+=" "),n+=e);return n}var $2={},q2={},Q6;function Gee(){return Q6||(Q6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(q2)),q2}var G2={},Z6;function Pk(){return Z6||(Z6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(G2)),G2}var W2={},J6;function MA(){return J6||(J6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=e})(W2)),W2}var K2={},X2={},e8;function Wee(){return e8||(e8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(X2)),X2}var t8;function kA(){return t8||(t8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wee(),r=MA();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],o=i.length;if(o===0)return a;let l=0,c="",f="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<o;){const p=i[l];f?p==="\\"&&l+1<o?(l++,c+=i[l]):p===f?f="":c+=p:d?p==='"'||p==="'"?f=p:p==="]"?(d=!1,a.push(c),c=""):c+=p:p==="["?(d=!0,c&&(a.push(c),c="")):p==="."?c&&(a.push(c),c=""):c+=p,l++}return c&&a.push(c),a}t.toPath=n})(K2)),K2}var r8;function jA(){return r8||(r8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gee(),r=Pk(),n=MA(),i=kA();function a(l,c,f){if(l==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const d=l[c];return d===void 0?r.isDeepKey(c)?a(l,i.toPath(c),f):f:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?f:d}default:{if(Array.isArray(c))return o(l,c,f);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const d=l[c];return d===void 0?f:d}}}function o(l,c,f){if(c.length===0)return f;let d=l;for(let p=0;p<c.length;p++){if(d==null||e.isUnsafeProperty(c[p]))return f;d=d[c[p]]}return d===void 0?f:d}t.get=a})($2)),$2}var Y2,n8;function Kee(){return n8||(n8=1,Y2=jA().get),Y2}var Xee=Kee();const su=To(Xee);var Q2={exports:{}},Vt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i8;function Yee(){if(i8)return Vt;i8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function b(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case t:switch(w=w.type,w){case r:case i:case n:case c:case f:case g:return w;default:switch(w=w&&w.$$typeof,w){case o:case l:case p:case d:return w;case a:return w;default:return E}}case e:return E}}}return Vt.ContextConsumer=a,Vt.ContextProvider=o,Vt.Element=t,Vt.ForwardRef=l,Vt.Fragment=r,Vt.Lazy=p,Vt.Memo=d,Vt.Portal=e,Vt.Profiler=i,Vt.StrictMode=n,Vt.Suspense=c,Vt.SuspenseList=f,Vt.isContextConsumer=function(w){return b(w)===a},Vt.isContextProvider=function(w){return b(w)===o},Vt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},Vt.isForwardRef=function(w){return b(w)===l},Vt.isFragment=function(w){return b(w)===r},Vt.isLazy=function(w){return b(w)===p},Vt.isMemo=function(w){return b(w)===d},Vt.isPortal=function(w){return b(w)===e},Vt.isProfiler=function(w){return b(w)===i},Vt.isStrictMode=function(w){return b(w)===n},Vt.isSuspense=function(w){return b(w)===c},Vt.isSuspenseList=function(w){return b(w)===f},Vt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===i||w===n||w===c||w===f||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===d||w.$$typeof===o||w.$$typeof===a||w.$$typeof===l||w.$$typeof===m||w.getModuleId!==void 0)},Vt.typeOf=b,Vt}var a8;function Qee(){return a8||(a8=1,Q2.exports=Yee()),Q2.exports}var Zee=Qee(),hn=t=>t===0?0:t>0?1:-1,Ui=t=>typeof t=="number"&&t!=+t,Hc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,De=t=>(typeof t=="number"||t instanceof Number)&&!Ui(t),So=t=>De(t)||typeof t=="string",Jee=0,fp=t=>{var e=++Jee;return"".concat(t||"").concat(e)},$n=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(e)&&typeof e!="string")return n;var a;if(Hc(e)){if(r==null)return n;var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return Ui(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},Dk=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function gr(t,e,r){return De(t)&&De(e)?t+r*(e-t):e}function Nk(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):su(n,e))===r)}var lr=t=>t===null||typeof t>"u",Fp=t=>lr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),ete=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function LA(t){if(typeof t!="string")return!1;var e=ete;return e.includes(t)}var tte=["viewBox","children"],o8=["points","pathLength"],Z2={svg:tte,polygon:o8,polyline:o8},BA=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(C.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{LA(i)&&(n[i]=(a=>r[i](r,a)))}),n},rte=(t,e,r)=>n=>(t(e,r,n),null),zp=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var a=t[i];LA(i)&&typeof a=="function"&&(n||(n={}),n[i]=rte(a,e,r))}),n},nte=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Mk(t){if(typeof t!="string")return!1;var e=nte;return e.includes(t)}function Do(t){var e=Object.entries(t).filter(r=>{var[n]=r;return Mk(n)});return Object.fromEntries(e)}var s8=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",l8=null,J2=null,kk=t=>{if(t===l8&&Array.isArray(J2))return J2;var e=[];return C.Children.forEach(t,r=>{lr(r)||(Zee.isFragment(r)?e=e.concat(kk(r.props.children)):e.push(r))}),J2=e,l8=t,e};function UA(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>s8(i)):n=[s8(e)],kk(t).forEach(i=>{var a=su(i,"type.displayName")||su(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}var jk=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,ite=(t,e,r,n)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var a=(i=n&&Z2?.[n])!==null&&i!==void 0?i:[],o=e.startsWith("data-"),l=typeof t!="function"&&(!!n&&a.includes(e)||Mk(e)),c=!!r&&LA(e);return o||l||c},fr=(t,e,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{var o;ite((o=n)===null||o===void 0?void 0:o[a],a,e,r)&&(i[a]=n[a])}),i},ate=["children","width","height","viewBox","className","style","title","desc"];function uw(){return uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uw.apply(null,arguments)}function ote(t,e){if(t==null)return{};var r,n,i=ste(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ste(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var FA=C.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:a,className:o,style:l,title:c,desc:f}=t,d=ote(t,ate),p=a||{width:n,height:i,x:0,y:0},g=xt("recharts-surface",o);return C.createElement("svg",uw({},fr(d,!0,"svg"),{className:g,width:n,height:i,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),C.createElement("title",null,c),C.createElement("desc",null,f),r)}),lte=["children","className"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fw.apply(null,arguments)}function cte(t,e){if(t==null)return{};var r,n,i=ute(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ute(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Mn=C.forwardRef((t,e)=>{var{children:r,className:n}=t,i=cte(t,lte),a=xt("recharts-layer",n);return C.createElement("g",fw({className:a},fr(i,!0),{ref:e}),r)}),Lk=rD(),Bk=C.createContext(null),fte=()=>C.useContext(Bk);function Wt(t){return function(){return t}}const Uk=Math.cos,ov=Math.sin,Va=Math.sqrt,sv=Math.PI,Dm=2*sv,dw=Math.PI,hw=2*dw,Lc=1e-6,dte=hw-Lc;function Fk(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function hte(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Fk;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class pte{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Fk:hte(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=n-e,f=i-r,d=o-e,p=l-r,g=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(g>Lc)if(!(Math.abs(p*c-f*d)>Lc)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,b=i-l,w=c*c+f*f,E=m*m+b*b,S=Math.sqrt(w),I=Math.sqrt(g),O=a*Math.tan((dw-Math.acos((w+g-E)/(2*S*I)))/2),D=O/I,k=O/S;Math.abs(D-1)>Lc&&this._append`L${e+D*d},${r+D*p}`,this._append`A${a},${a},0,0,${+(p*m>d*b)},${this._x1=e+k*c},${this._y1=r+k*f}`}}arc(e,r,n,i,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),f=e+l,d=r+c,p=1^o,g=o?i-a:a-i;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Lc||Math.abs(this._y1-d)>Lc)&&this._append`L${f},${d}`,n&&(g<0&&(g=g%hw+hw),g>dte?this._append`A${n},${n},0,1,${p},${e-l},${r-c}A${n},${n},0,1,${p},${this._x1=f},${this._y1=d}`:g>Lc&&this._append`A${n},${n},0,${+(g>=dw)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function zA(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new pte(e)}function VA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zk(t){this._context=t}zk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Nm(t){return new zk(t)}function Vk(t){return t[0]}function Hk(t){return t[1]}function $k(t,e){var r=Wt(!0),n=null,i=Nm,a=null,o=zA(l);t=typeof t=="function"?t:t===void 0?Vk:Wt(t),e=typeof e=="function"?e:e===void 0?Hk:Wt(e);function l(c){var f,d=(c=VA(c)).length,p,g=!1,m;for(n==null&&(a=i(m=o())),f=0;f<=d;++f)!(f<d&&r(p=c[f],f,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(p,f,c),+e(p,f,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Wt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Wt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Wt(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),l):n},l}function Qg(t,e,r){var n=null,i=Wt(!0),a=null,o=Nm,l=null,c=zA(f);t=typeof t=="function"?t:t===void 0?Vk:Wt(+t),e=typeof e=="function"?e:Wt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Hk:Wt(+r);function f(p){var g,m,b,w=(p=VA(p)).length,E,S=!1,I,O=new Array(w),D=new Array(w);for(a==null&&(l=o(I=c())),g=0;g<=w;++g){if(!(g<w&&i(E=p[g],g,p))===S)if(S=!S)m=g,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=g-1;b>=m;--b)l.point(O[b],D[b]);l.lineEnd(),l.areaEnd()}S&&(O[g]=+t(E,g,p),D[g]=+e(E,g,p),l.point(n?+n(E,g,p):O[g],r?+r(E,g,p):D[g]))}if(I)return l=null,I+""||null}function d(){return $k().defined(i).curve(o).context(a)}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),n=null,f):t},f.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),f):t},f.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Wt(+p),f):n},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),r=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),f):e},f.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Wt(+p),f):r},f.lineX0=f.lineY0=function(){return d().x(t).y(e)},f.lineY1=function(){return d().x(t).y(r)},f.lineX1=function(){return d().x(n).y(e)},f.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Wt(!!p),f):i},f.curve=function(p){return arguments.length?(o=p,a!=null&&(l=o(a)),f):o},f.context=function(p){return arguments.length?(p==null?a=l=null:l=o(a=p),f):a},f}class qk{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function gte(t){return new qk(t,!0)}function vte(t){return new qk(t,!1)}const HA={draw(t,e){const r=Va(e/sv);t.moveTo(r,0),t.arc(0,0,r,0,Dm)}},mte={draw(t,e){const r=Va(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Gk=Va(1/3),yte=Gk*2,xte={draw(t,e){const r=Va(e/yte),n=r*Gk;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},bte={draw(t,e){const r=Va(e),n=-r/2;t.rect(n,n,r,r)}},_te=.8908130915292852,Wk=ov(sv/10)/ov(7*sv/10),wte=ov(Dm/10)*Wk,Ete=-Uk(Dm/10)*Wk,Ate={draw(t,e){const r=Va(e*_te),n=wte*r,i=Ete*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const o=Dm*a/5,l=Uk(o),c=ov(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*i,c*n+l*i)}t.closePath()}},eb=Va(3),Ste={draw(t,e){const r=-Va(e/(eb*3));t.moveTo(0,r*2),t.lineTo(-eb*r,-r),t.lineTo(eb*r,-r),t.closePath()}},ra=-.5,na=Va(3)/2,pw=1/Va(12),Cte=(pw/2+1)*3,Tte={draw(t,e){const r=Va(e/Cte),n=r/2,i=r*pw,a=n,o=r*pw+r,l=-a,c=o;t.moveTo(n,i),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(ra*n-na*i,na*n+ra*i),t.lineTo(ra*a-na*o,na*a+ra*o),t.lineTo(ra*l-na*c,na*l+ra*c),t.lineTo(ra*n+na*i,ra*i-na*n),t.lineTo(ra*a+na*o,ra*o-na*a),t.lineTo(ra*l+na*c,ra*c-na*l),t.closePath()}};function Ite(t,e){let r=null,n=zA(i);t=typeof t=="function"?t:Wt(t||HA),e=typeof e=="function"?e:Wt(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Wt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Wt(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function lv(){}function cv(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Kk(t){this._context=t}Kk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ote(t){return new Kk(t)}function Xk(t){this._context=t}Xk.prototype={areaStart:lv,areaEnd:lv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:cv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rte(t){return new Xk(t)}function Yk(t){this._context=t}Yk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:cv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Pte(t){return new Yk(t)}function Qk(t){this._context=t}Qk.prototype={areaStart:lv,areaEnd:lv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Dte(t){return new Qk(t)}function c8(t){return t<0?-1:1}function u8(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),l=(a*i+o*n)/(n+i);return(c8(a)+c8(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function f8(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function tb(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,l=(a-n)/3;t._context.bezierCurveTo(n+l,i+l*e,a-l,o-l*r,a,o)}function uv(t){this._context=t}uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tb(this,this._t0,f8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,tb(this,f8(this,r=u8(this,t,e)),r);break;default:tb(this,this._t0,r=u8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Zk(t){this._context=new Jk(t)}(Zk.prototype=Object.create(uv.prototype)).point=function(t,e){uv.prototype.point.call(this,e,t)};function Jk(t){this._context=t}Jk.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function Nte(t){return new uv(t)}function Mte(t){return new Zk(t)}function e9(t){this._context=t}e9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=d8(t),i=d8(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function d8(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function kte(t){return new e9(t)}function Mm(t,e){this._context=t,this._t=e}Mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function jte(t){return new Mm(t,.5)}function Lte(t){return new Mm(t,0)}function Bte(t){return new Mm(t,1)}function Lf(t,e){if((o=t.length)>1)for(var r=1,n,i,a=t[e[0]],o,l=a.length;r<o;++r)for(i=a,a=t[e[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function gw(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ute(t,e){return t[e]}function Fte(t){const e=[];return e.key=t,e}function zte(){var t=Wt([]),e=gw,r=Lf,n=Ute;function i(a){var o=Array.from(t.apply(this,arguments),Fte),l,c=o.length,f=-1,d;for(const p of a)for(l=0,++f;l<c;++l)(o[l][f]=[0,+n(p,o[l].key,f,a)]).data=p;for(l=0,d=VA(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Wt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Wt(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?gw:typeof a=="function"?a:Wt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??Lf,i):r},i}function Vte(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}Lf(t,e)}}function Hte(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var o=0,l=0;o<i;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Lf(t,e)}}function $te(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var l=0,c=0,f=0;l<o;++l){for(var d=t[e[l]],p=d[n][1]||0,g=d[n-1][1]||0,m=(p-g)/2,b=0;b<l;++b){var w=t[e[b]],E=w[n][1]||0,S=w[n-1][1]||0;m+=E-S}c+=p,f+=m*p}i[n-1][1]+=i[n-1][0]=r,c&&(r-=f/c)}i[n-1][1]+=i[n-1][0]=r,Lf(t,e)}}var qte=["type","size","sizeType"];function vw(){return vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vw.apply(null,arguments)}function h8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function p8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?h8(Object(r),!0).forEach(function(n){Gte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gte(t,e,r){return(e=Wte(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wte(t){var e=Kte(t,"string");return typeof e=="symbol"?e:e+""}function Kte(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xte(t,e){if(t==null)return{};var r,n,i=Yte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Yte(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var t9={symbolCircle:HA,symbolCross:mte,symbolDiamond:xte,symbolSquare:bte,symbolStar:Ate,symbolTriangle:Ste,symbolWye:Tte},Qte=Math.PI/180,Zte=t=>{var e="symbol".concat(Fp(t));return t9[e]||HA},Jte=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*Qte;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},ere=(t,e)=>{t9["symbol".concat(Fp(t))]=e},$A=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=Xte(t,qte),a=p8(p8({},i),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var g=Zte(o),m=Ite().type(g).size(Jte(r,n,o));return m()},{className:c,cx:f,cy:d}=a,p=fr(a,!0);return f===+f&&d===+d&&r===+r?C.createElement("path",vw({},p,{className:xt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(d,")"),d:l()})):null};$A.registerSymbol=ere;function mw(){return mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mw.apply(null,arguments)}function g8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tre(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?g8(Object(r),!0).forEach(function(n){qA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qA(t,e,r){return(e=rre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rre(t){var e=nre(t,"string");return typeof e=="symbol"?e:e+""}function nre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ia=32;class GA extends C.PureComponent{renderIcon(e,r){var{inactiveColor:n}=this.props,i=ia/2,a=ia/6,o=ia/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:ia,y2:i,className:"recharts-legend-icon"});if(c==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(ia,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return C.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ia/8,"h").concat(ia,"v").concat(ia*3/4,"h").concat(-ia,"z"),className:"recharts-legend-icon"});if(C.isValidElement(e.legendIcon)){var f=tre({},e);return delete f.legendIcon,C.cloneElement(e.legendIcon,f)}return C.createElement($A,{fill:l,cx:i,cy:i,size:ia,sizeType:"diameter",type:c})}renderItems(){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:o}=this.props,l={x:0,y:0,width:ia,height:ia},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,p)=>{var g=d.formatter||i,m=xt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:d.inactive});if(d.type==="none")return null;var b=d.inactive?a:d.color,w=g?g(d.value,d,p):d.value;return C.createElement("li",mw({className:m,style:c,key:"legend-item-".concat(p)},zp(this.props,d,p)),C.createElement(FA,{width:r,height:r,viewBox:l,style:f,"aria-label":"".concat(w," legend icon")},this.renderIcon(d,o)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},w))})}render(){var{payload:e,layout:r,align:n}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}qA(GA,"displayName","Legend");qA(GA,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var rb={},nb={},v8;function ire(){return v8||(v8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let a=0;a<r.length;a++){const o=r[a],l=n(o);i.has(l)||i.set(l,o)}return Array.from(i.values())}t.uniqBy=e})(nb)),nb}var ib={},m8;function r9(){return m8||(m8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(ib)),ib}var ab={},ob={},sb={},y8;function are(){return y8||(y8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(sb)),sb}var x8;function WA(){return x8||(x8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=are();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(ob)),ob}var lb={},b8;function ore(){return b8||(b8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(lb)),lb}var _8;function sre(){return _8||(_8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WA(),r=ore();function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(ab)),ab}var cb={},ub={},w8;function lre(){return w8||(w8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jA();function r(n){return function(i){return e.get(i,n)}}t.property=r})(ub)),ub}var fb={},db={},hb={},pb={},E8;function n9(){return E8||(E8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(pb)),pb}var gb={},A8;function i9(){return A8||(A8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(gb)),gb}var vb={},S8;function a9(){return S8||(S8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(vb)),vb}var C8;function cre(){return C8||(C8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KA(),r=n9(),n=i9(),i=a9();function a(p,g,m){return typeof m!="function"?e.isMatch(p,g):o(p,g,function b(w,E,S,I,O,D){const k=m(w,E,S,I,O,D);return k!==void 0?!!k:o(w,E,b,D)},new Map)}function o(p,g,m,b){if(g===p)return!0;switch(typeof g){case"object":return l(p,g,m,b);case"function":return Object.keys(g).length>0?o(p,{...g},m,b):i.eq(p,g);default:return r.isObject(p)?typeof g=="string"?g==="":!0:i.eq(p,g)}}function l(p,g,m,b){if(g==null)return!0;if(Array.isArray(g))return f(p,g,m,b);if(g instanceof Map)return c(p,g,m,b);if(g instanceof Set)return d(p,g,m,b);const w=Object.keys(g);if(p==null)return w.length===0;if(w.length===0)return!0;if(b&&b.has(g))return b.get(g)===p;b&&b.set(g,p);try{for(let E=0;E<w.length;E++){const S=w[E];if(!n.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!m(p[S],g[S],S,p,g,b))return!1}return!0}finally{b&&b.delete(g)}}function c(p,g,m,b){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[w,E]of g.entries()){const S=p.get(w);if(m(S,E,w,p,g,b)===!1)return!1}return!0}function f(p,g,m,b){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const w=new Set;for(let E=0;E<g.length;E++){const S=g[E];let I=!1;for(let O=0;O<p.length;O++){if(w.has(O))continue;const D=p[O];let k=!1;if(m(D,S,E,p,g,b)&&(k=!0),k){w.add(O),I=!0;break}}if(!I)return!1}return!0}function d(p,g,m,b){return g.size===0?!0:p instanceof Set?f([...p],[...g],m,b):!1}t.isMatchWith=a,t.isSetMatch=d})(hb)),hb}var T8;function KA(){return T8||(T8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cre();function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(db)),db}var mb={},yb={},xb={},I8;function ure(){return I8||(I8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(xb)),xb}var bb={},O8;function o9(){return O8||(O8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(bb)),bb}var _b={},R8;function s9(){return R8||(R8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",f="[object Set]",d="[object Array]",p="[object Function]",g="[object ArrayBuffer]",m="[object Object]",b="[object Error]",w="[object DataView]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",I="[object Uint16Array]",O="[object Uint32Array]",D="[object BigUint64Array]",k="[object Int8Array]",B="[object Int16Array]",R="[object Int32Array]",N="[object BigInt64Array]",L="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=d,t.bigInt64ArrayTag=N,t.bigUint64ArrayTag=D,t.booleanTag=i,t.dataViewTag=w,t.dateTag=l,t.errorTag=b,t.float32ArrayTag=L,t.float64ArrayTag=U,t.functionTag=p,t.int16ArrayTag=B,t.int32ArrayTag=R,t.int8ArrayTag=k,t.mapTag=c,t.numberTag=n,t.objectTag=m,t.regexpTag=e,t.setTag=f,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=I,t.uint32ArrayTag=O,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=S})(_b)),_b}var wb={},P8;function fre(){return P8||(P8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(wb)),wb}var D8;function l9(){return D8||(D8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ure(),r=o9(),n=s9(),i=i9(),a=fre();function o(d,p){return l(d,void 0,d,new Map,p)}function l(d,p,g,m=new Map,b=void 0){const w=b?.(d,p,g,m);if(w!==void 0)return w;if(i.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const E=new Array(d.length);m.set(d,E);for(let S=0;S<d.length;S++)E[S]=l(d[S],S,g,m,b);return Object.hasOwn(d,"index")&&(E.index=d.index),Object.hasOwn(d,"input")&&(E.input=d.input),E}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const E=new RegExp(d.source,d.flags);return E.lastIndex=d.lastIndex,E}if(d instanceof Map){const E=new Map;m.set(d,E);for(const[S,I]of d)E.set(S,l(I,S,g,m,b));return E}if(d instanceof Set){const E=new Set;m.set(d,E);for(const S of d)E.add(l(S,void 0,g,m,b));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const E=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,E);for(let S=0;S<d.length;S++)E[S]=l(d[S],S,g,m,b);return E}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const E=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,E),c(E,d,g,m,b),E}if(typeof File<"u"&&d instanceof File){const E=new File([d],d.name,{type:d.type});return m.set(d,E),c(E,d,g,m,b),E}if(typeof Blob<"u"&&d instanceof Blob){const E=new Blob([d],{type:d.type});return m.set(d,E),c(E,d,g,m,b),E}if(d instanceof Error){const E=new d.constructor;return m.set(d,E),E.message=d.message,E.name=d.name,E.stack=d.stack,E.cause=d.cause,c(E,d,g,m,b),E}if(d instanceof Boolean){const E=new Boolean(d.valueOf());return m.set(d,E),c(E,d,g,m,b),E}if(d instanceof Number){const E=new Number(d.valueOf());return m.set(d,E),c(E,d,g,m,b),E}if(d instanceof String){const E=new String(d.valueOf());return m.set(d,E),c(E,d,g,m,b),E}if(typeof d=="object"&&f(d)){const E=Object.create(Object.getPrototypeOf(d));return m.set(d,E),c(E,d,g,m,b),E}return d}function c(d,p,g=d,m,b){const w=[...Object.keys(p),...e.getSymbols(p)];for(let E=0;E<w.length;E++){const S=w[E],I=Object.getOwnPropertyDescriptor(d,S);(I==null||I.writable)&&(d[S]=l(p[S],S,g,m,b))}}function f(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(yb)),yb}var N8;function dre(){return N8||(N8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l9();function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(mb)),mb}var M8;function hre(){return M8||(M8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KA(),r=dre();function n(i){return i=r.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=n})(fb)),fb}var Eb={},Ab={},Sb={},k8;function pre(){return k8||(k8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l9(),r=s9();function n(i,a){return e.cloneDeepWith(i,(o,l,c,f)=>{const d=a?.(o,l,c,f);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new i.constructor(i?.valueOf());return e.copyProperties(p,i),p}case r.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=n})(Sb)),Sb}var j8;function gre(){return j8||(j8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pre();function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Ab)),Ab}var Cb={},Tb={},L8;function c9(){return L8||(L8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(Tb)),Tb}var Ib={},B8;function vre(){return B8||(B8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o9();function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Ib)),Ib}var U8;function mre(){return U8||(U8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pk(),r=c9(),n=vre(),i=kA();function a(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&o?.[l]==null?c=i.toPath(l):c=[l],c.length===0)return!1;let f=o;for(let d=0;d<c.length;d++){const p=c[d];if((f==null||!Object.hasOwn(f,p))&&!((Array.isArray(f)||n.isArguments(f))&&r.isIndex(p)&&p<f.length))return!1;f=f[p]}return!0}t.has=a})(Cb)),Cb}var F8;function yre(){return F8||(F8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KA(),r=MA(),n=gre(),i=jA(),a=mre();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(f){const d=i.get(f,l);return d===void 0?a.has(f,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(Eb)),Eb}var z8;function xre(){return z8||(z8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r9(),r=lre(),n=hre(),i=yre();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=a})(cb)),cb}var V8;function bre(){return V8||(V8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ire(),r=r9(),n=sre(),i=xre();function a(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(l)):[]}t.uniqBy=a})(rb)),rb}var Ob,H8;function _re(){return H8||(H8=1,Ob=bre().uniqBy),Ob}var wre=_re();const $8=To(wre);function u9(t,e,r){return e===!0?$8(t,r):typeof e=="function"?$8(t,e):t}var Rb={exports:{}},Pb={},Db={exports:{}},Nb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q8;function Ere(){if(q8)return Nb;q8=1;var t=Wf();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function l(p,g){var m=g(),b=n({inst:{value:m,getSnapshot:g}}),w=b[0].inst,E=b[1];return a(function(){w.value=m,w.getSnapshot=g,c(w)&&E({inst:w})},[p,m,g]),i(function(){return c(w)&&E({inst:w}),p(function(){c(w)&&E({inst:w})})},[p]),o(m),m}function c(p){var g=p.getSnapshot;p=p.value;try{var m=g();return!r(p,m)}catch{return!0}}function f(p,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Nb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,Nb}var G8;function Are(){return G8||(G8=1,Db.exports=Ere()),Db.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W8;function Sre(){if(W8)return Pb;W8=1;var t=Wf(),e=Are();function r(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,l=t.useMemo,c=t.useDebugValue;return Pb.useSyncExternalStoreWithSelector=function(f,d,p,g,m){var b=a(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=l(function(){function S(B){if(!I){if(I=!0,O=B,B=g(B),m!==void 0&&w.hasValue){var R=w.value;if(m(R,B))return D=R}return D=B}if(R=D,n(O,B))return R;var N=g(B);return m!==void 0&&m(R,N)?(O=B,R):(O=B,D=N)}var I=!1,O,D,k=p===void 0?null:p;return[function(){return S(d())},k===null?void 0:function(){return S(k())}]},[d,p,g,m]);var E=i(f,b[0],b[1]);return o(function(){w.hasValue=!0,w.value=E},[E]),c(E),E},Pb}var K8;function Cre(){return K8||(K8=1,Rb.exports=Sre()),Rb.exports}var Tre=Cre(),XA=C.createContext(null),Ire=t=>t,dr=()=>{var t=C.useContext(XA);return t?t.store.dispatch:Ire},T1=()=>{},Ore=()=>T1,Rre=(t,e)=>t===e;function Oe(t){var e=C.useContext(XA);return Tre.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Ore,e?e.store.getState:T1,e?e.store.getState:T1,e?t:T1,Rre)}function Pre(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Dre(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Nre(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var X8=t=>Array.isArray(t)?t:[t];function Mre(t){const e=Array.isArray(t[0])?t[0]:t;return Nre(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function kre(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var jre=class{constructor(t){this.value=t}deref(){return this.value}},Lre=typeof WeakRef<"u"?WeakRef:jre,Bre=0,Y8=1;function Zg(){return{s:Bre,v:void 0,o:null,p:null}}function f9(t,e={}){let r=Zg();const{resultEqualityCheck:n}=e;let i,a=0;function o(){let l=r;const{length:c}=arguments;for(let p=0,g=c;p<g;p++){const m=arguments[p];if(typeof m=="function"||typeof m=="object"&&m!==null){let b=l.o;b===null&&(l.o=b=new WeakMap);const w=b.get(m);w===void 0?(l=Zg(),b.set(m,l)):l=w}else{let b=l.p;b===null&&(l.p=b=new Map);const w=b.get(m);w===void 0?(l=Zg(),b.set(m,l)):l=w}}const f=l;let d;if(l.s===Y8)d=l.v;else if(d=t.apply(null,arguments),a++,n){const p=i?.deref?.()??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Lre(d):d}return f.s=Y8,f.v=d,d}return o.clearCache=()=>{r=Zg(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Ure(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,o=0,l,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),Pre(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const d={...r,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:m=f9,argsMemoizeOptions:b=[]}=d,w=X8(g),E=X8(b),S=Mre(i),I=p(function(){return a++,f.apply(null,arguments)},...w),O=m(function(){o++;const k=kre(S,arguments);return l=I.apply(null,k),l},...E);return Object.assign(O,{resultFunc:f,memoizedResultFunc:I,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var ne=Ure(f9),Fre=Object.assign((t,e=ne)=>{Dre(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>Fre}),Mb={},kb={},jb={},Q8;function zre(){return Q8||(Q8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const o=e(n),l=e(i);if(o===l&&o===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?l-o:o-l}return 0};t.compareValues=r})(jb)),jb}var Lb={},Bb={},Z8;function d9(){return Z8||(Z8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(Bb)),Bb}var J8;function Vre(){return J8||(J8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=d9(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=i})(Lb)),Lb}var eR;function Hre(){return eR||(eR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zre(),r=Vre(),n=kA();function i(a,o,l,c){if(a==null)return[];l=c?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const f=(m,b)=>{let w=m;for(let E=0;E<b.length&&w!=null;++E)w=w[b[E]];return w},d=(m,b)=>b==null||m==null?b:typeof m=="object"&&"key"in m?Object.hasOwn(b,m.key)?b[m.key]:f(b,m.path):typeof m=="function"?m(b):Array.isArray(m)?f(b,m):typeof b=="object"?b[m]:b,p=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return a.map(m=>({original:m,criteria:p.map(b=>d(b,m))})).slice().sort((m,b)=>{for(let w=0;w<p.length;w++){const E=e.compareValues(m.criteria[w],b.criteria[w],l[w]);if(E!==0)return E}return 0}).map(m=>m.original)}t.orderBy=i})(kb)),kb}var Ub={},tR;function $re(){return tR||(tR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],a=Math.floor(n),o=(l,c)=>{for(let f=0;f<l.length;f++){const d=l[f];Array.isArray(d)&&c<a?o(d,c+1):i.push(d)}};return o(r,0),i}t.flatten=e})(Ub)),Ub}var Fb={},rR;function h9(){return rR||(rR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=c9(),r=WA(),n=n9(),i=a9();function a(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],o):!1}t.isIterateeCall=a})(Fb)),Fb}var nR;function qre(){return nR||(nR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hre(),r=$re(),n=h9();function i(a,...o){const l=o.length;return l>1&&n.isIterateeCall(a,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,r.flatten(o),["asc"])}t.sortBy=i})(Mb)),Mb}var zb,iR;function Gre(){return iR||(iR=1,zb=qre().sortBy),zb}var Wre=Gre();const km=To(Wre);var p9=t=>t.legend.settings,Kre=t=>t.legend.size,Xre=t=>t.legend.payload,Yre=ne([Xre,p9],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?km(n,r):n});function Qre(){return Oe(Yre)}var Jg=1;function g9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=C.useState({height:0,left:0,top:0,width:0}),n=C.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>Jg||Math.abs(o.left-e.left)>Jg||Math.abs(o.top-e.top)>Jg||Math.abs(o.width-e.width)>Jg)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function Sn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Zre=typeof Symbol=="function"&&Symbol.observable||"@@observable",aR=Zre,Vb=()=>Math.random().toString(36).substring(7).split("").join("."),Jre={INIT:`@@redux/INIT${Vb()}`,REPLACE:`@@redux/REPLACE${Vb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Vb()}`},fv=Jre;function YA(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function v9(t,e,r){if(typeof t!="function")throw new Error(Sn(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Sn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Sn(1));return r(v9)(t,e)}let n=t,i=e,a=new Map,o=a,l=0,c=!1;function f(){o===a&&(o=new Map,a.forEach((E,S)=>{o.set(S,E)}))}function d(){if(c)throw new Error(Sn(3));return i}function p(E){if(typeof E!="function")throw new Error(Sn(4));if(c)throw new Error(Sn(5));let S=!0;f();const I=l++;return o.set(I,E),function(){if(S){if(c)throw new Error(Sn(6));S=!1,f(),o.delete(I),a=null}}}function g(E){if(!YA(E))throw new Error(Sn(7));if(typeof E.type>"u")throw new Error(Sn(8));if(typeof E.type!="string")throw new Error(Sn(17));if(c)throw new Error(Sn(9));try{c=!0,i=n(i,E)}finally{c=!1}return(a=o).forEach(I=>{I()}),E}function m(E){if(typeof E!="function")throw new Error(Sn(10));n=E,g({type:fv.REPLACE})}function b(){const E=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Sn(11));function I(){const D=S;D.next&&D.next(d())}return I(),{unsubscribe:E(I)}},[aR](){return this}}}return g({type:fv.INIT}),{dispatch:g,subscribe:p,getState:d,replaceReducer:m,[aR]:b}}function ene(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:fv.INIT})>"u")throw new Error(Sn(12));if(typeof r(void 0,{type:fv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Sn(13))})}function m9(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{ene(r)}catch(a){i=a}return function(o={},l){if(i)throw i;let c=!1;const f={};for(let d=0;d<n.length;d++){const p=n[d],g=r[p],m=o[p],b=g(m,l);if(typeof b>"u")throw l&&l.type,new Error(Sn(14));f[p]=b,c=c||b!==m}return c=c||n.length!==Object.keys(o).length,c?f:o}}function dv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function tne(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(Sn(15))};const o={getState:i.getState,dispatch:(c,...f)=>a(c,...f)},l=t.map(c=>c(o));return a=dv(...l)(i.dispatch),{...i,dispatch:a}}}function y9(t){return YA(t)&&"type"in t&&typeof t.type=="string"}var x9=Symbol.for("immer-nothing"),oR=Symbol.for("immer-draftable"),Fi=Symbol.for("immer-state");function ka(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Bf=Object.getPrototypeOf;function lu(t){return!!t&&!!t[Fi]}function vs(t){return t?b9(t)||Array.isArray(t)||!!t[oR]||!!t.constructor?.[oR]||Vp(t)||Lm(t):!1}var rne=Object.prototype.constructor.toString();function b9(t){if(!t||typeof t!="object")return!1;const e=Bf(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===rne}function hv(t,e){jm(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function jm(t){const e=t[Fi];return e?e.type_:Array.isArray(t)?1:Vp(t)?2:Lm(t)?3:0}function yw(t,e){return jm(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function _9(t,e,r){const n=jm(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function nne(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Vp(t){return t instanceof Map}function Lm(t){return t instanceof Set}function Bc(t){return t.copy_||t.base_}function xw(t,e){if(Vp(t))return new Map(t);if(Lm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=b9(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Fi];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(Bf(t),n)}else{const n=Bf(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function QA(t,e=!1){return Bm(t)||lu(t)||!vs(t)||(jm(t)>1&&Object.defineProperties(t,{set:{value:e1},add:{value:e1},clear:{value:e1},delete:{value:e1}}),Object.freeze(t),e&&Object.values(t).forEach(r=>QA(r,!0))),t}function e1(){ka(2)}function Bm(t){return Object.isFrozen(t)}var ine={};function cu(t){const e=ine[t];return e||ka(0,t),e}var dp;function w9(){return dp}function ane(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sR(t,e){e&&(cu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function bw(t){_w(t),t.drafts_.forEach(one),t.drafts_=null}function _w(t){t===dp&&(dp=t.parent_)}function lR(t){return dp=ane(dp,t)}function one(t){const e=t[Fi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function cR(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Fi].modified_&&(bw(e),ka(4)),vs(t)&&(t=pv(e,t),e.parent_||gv(e,t)),e.patches_&&cu("Patches").generateReplacementPatches_(r[Fi].base_,t,e.patches_,e.inversePatches_)):t=pv(e,r,[]),bw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==x9?t:void 0}function pv(t,e,r){if(Bm(e))return e;const n=e[Fi];if(!n)return hv(e,(i,a)=>uR(t,n,e,i,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return gv(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),hv(a,(l,c)=>uR(t,n,i,l,c,r,o)),gv(t,i,!1),r&&t.patches_&&cu("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function uR(t,e,r,n,i,a,o){if(lu(i)){const l=a&&e&&e.type_!==3&&!yw(e.assigned_,n)?a.concat(n):void 0,c=pv(t,i,l);if(_9(r,n,c),lu(c))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(vs(i)&&!Bm(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;pv(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Vp(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&gv(t,i)}}function gv(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&QA(e,r)}function sne(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:w9(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=ZA;r&&(i=[n],a=hp);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return n.draft_=l,n.revoke_=o,l}var ZA={get(t,e){if(e===Fi)return t;const r=Bc(t);if(!yw(r,e))return lne(t,r,e);const n=r[e];return t.finalized_||!vs(n)?n:n===Hb(t.base_,e)?($b(t),t.copy_[e]=Ew(n,t)):n},has(t,e){return e in Bc(t)},ownKeys(t){return Reflect.ownKeys(Bc(t))},set(t,e,r){const n=E9(Bc(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=Hb(Bc(t),e),a=i?.[Fi];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(nne(r,i)&&(r!==void 0||yw(t.base_,e)))return!0;$b(t),ww(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Hb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,$b(t),ww(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Bc(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){ka(11)},getPrototypeOf(t){return Bf(t.base_)},setPrototypeOf(){ka(12)}},hp={};hv(ZA,(t,e)=>{hp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});hp.deleteProperty=function(t,e){return hp.set.call(this,t,e,void 0)};hp.set=function(t,e,r){return ZA.set.call(this,t[0],e,r,t[0])};function Hb(t,e){const r=t[Fi];return(r?Bc(r):t)[e]}function lne(t,e,r){const n=E9(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function E9(t,e){if(!(e in t))return;let r=Bf(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Bf(r)}}function ww(t){t.modified_||(t.modified_=!0,t.parent_&&ww(t.parent_))}function $b(t){t.copy_||(t.copy_=xw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var cne=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const o=this;return function(c=a,...f){return o.produce(c,d=>r.call(this,d,...f))}}typeof r!="function"&&ka(6),n!==void 0&&typeof n!="function"&&ka(7);let i;if(vs(e)){const a=lR(this),o=Ew(e,void 0);let l=!0;try{i=r(o),l=!1}finally{l?bw(a):_w(a)}return sR(a,n),cR(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===x9&&(i=void 0),this.autoFreeze_&&QA(i,!0),n){const a=[],o=[];cu("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else ka(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,i;return[this.produce(e,r,(o,l)=>{n=o,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){vs(t)||ka(8),lu(t)&&(t=ss(t));const e=lR(this),r=Ew(t,void 0);return r[Fi].isManual_=!0,_w(e),r}finishDraft(t,e){const r=t&&t[Fi];(!r||!r.isManual_)&&ka(9);const{scope_:n}=r;return sR(n,e),cR(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=cu("Patches").applyPatches_;return lu(t)?n(t,e):this.produce(t,i=>n(i,e))}};function Ew(t,e){const r=Vp(t)?cu("MapSet").proxyMap_(t,e):Lm(t)?cu("MapSet").proxySet_(t,e):sne(t,e);return(e?e.scope_:w9()).drafts_.push(r),r}function ss(t){return lu(t)||ka(10,t),A9(t)}function A9(t){if(!vs(t)||Bm(t))return t;const e=t[Fi];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=xw(t,e.scope_.immer_.useStrictShallowCopy_)}else r=xw(t,!0);return hv(r,(n,i)=>{_9(r,n,A9(i))}),e&&(e.finalized_=!1),r}var une=new cne,S9=une.produce;function C9(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var fne=C9(),dne=C9,hne=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dv:dv.apply(null,arguments)};function va(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(Li(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>y9(n)&&n.type===t,r}var T9=class Vh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Vh.prototype)}static get[Symbol.species](){return Vh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Vh(...e[0].concat(this)):new Vh(...e.concat(this))}};function fR(t){return vs(t)?S9(t,()=>{}):t}function t1(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function pne(t){return typeof t=="boolean"}var gne=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new T9;return r&&(pne(r)?o.push(fne):o.push(dne(r.extraArgument))),o},vne="RTK_autoBatch",dR=t=>e=>{setTimeout(e,t)},mne=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:dR(10):t.type==="callback"?t.queueNotification:dR(t.timeout),f=()=>{o=!1,a&&(a=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const p=()=>i&&d(),g=n.subscribe(p);return l.add(d),()=>{g(),l.delete(d)}},dispatch(d){try{return i=!d?.meta?.[vne],a=!i,a&&(o||(o=!0,c(f))),n.dispatch(d)}finally{i=!0}}})},yne=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new T9(t);return n&&i.push(mne(typeof n=="object"?n:void 0)),i};function xne(t){const e=gne(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(YA(r))l=m9(r);else throw new Error(Li(1));let c;typeof n=="function"?c=n(e):c=e();let f=dv;i&&(f=hne({trace:!1,...typeof i=="object"&&i}));const d=tne(...c),p=yne(d);let g=typeof o=="function"?o(p):p();const m=f(...g);return v9(l,a,m)}function I9(t){const e={},r=[];let n;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(Li(28));if(l in e)throw new Error(Li(29));return e[l]=o,i},addAsyncThunk(a,o){return o.pending&&(e[a.pending.type]=o.pending),o.rejected&&(e[a.rejected.type]=o.rejected),o.fulfilled&&(e[a.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function bne(t){return typeof t=="function"}function _ne(t,e){let[r,n,i]=I9(e),a;if(bne(t))a=()=>fR(t());else{const l=fR(t);a=()=>l}function o(l=a(),c){let f=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return f.filter(d=>!!d).length===0&&(f=[i]),f.reduce((d,p)=>{if(p)if(lu(d)){const m=p(d,c);return m===void 0?d:m}else{if(vs(d))return S9(d,g=>p(g,c));{const g=p(d,c);if(g===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return d},l)}return o.getInitialState=a,o}var wne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ene=(t=21)=>{let e="",r=t;for(;r--;)e+=wne[Math.random()*64|0];return e},Ane=Symbol.for("rtk-slice-createasyncthunk");function Sne(t,e){return`${t}/${e}`}function Cne({creators:t}={}){const e=t?.asyncThunk?.[Ane];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(Li(11));const o=(typeof n.reducers=="function"?n.reducers(Ine()):n.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,D){const k=typeof O=="string"?O:O.type;if(!k)throw new Error(Li(12));if(k in c.sliceCaseReducersByType)throw new Error(Li(13));return c.sliceCaseReducersByType[k]=D,f},addMatcher(O,D){return c.sliceMatchers.push({matcher:O,reducer:D}),f},exposeAction(O,D){return c.actionCreators[O]=D,f},exposeCaseReducer(O,D){return c.sliceCaseReducersByName[O]=D,f}};l.forEach(O=>{const D=o[O],k={reducerName:O,type:Sne(i,O),createNotation:typeof n.reducers=="function"};Rne(D)?Dne(k,D,f,e):One(k,D,f)});function d(){const[O={},D=[],k=void 0]=typeof n.extraReducers=="function"?I9(n.extraReducers):[n.extraReducers],B={...O,...c.sliceCaseReducersByType};return _ne(n.initialState,R=>{for(let N in B)R.addCase(N,B[N]);for(let N of c.sliceMatchers)R.addMatcher(N.matcher,N.reducer);for(let N of D)R.addMatcher(N.matcher,N.reducer);k&&R.addDefaultCase(k)})}const p=O=>O,g=new Map,m=new WeakMap;let b;function w(O,D){return b||(b=d()),b(O,D)}function E(){return b||(b=d()),b.getInitialState()}function S(O,D=!1){function k(R){let N=R[O];return typeof N>"u"&&D&&(N=t1(m,k,E)),N}function B(R=p){const N=t1(g,D,()=>new WeakMap);return t1(N,R,()=>{const L={};for(const[U,z]of Object.entries(n.selectors??{}))L[U]=Tne(z,R,()=>t1(m,R,E),D);return L})}return{reducerPath:O,getSelectors:B,get selectors(){return B(k)},selectSlice:k}}const I={name:i,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:E,...S(a),injectInto(O,{reducerPath:D,...k}={}){const B=D??a;return O.inject({reducerPath:B,reducer:w},k),{...I,...S(B,!0)}}};return I}}function Tne(t,e,r,n){function i(a,...o){let l=e(a);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return i.unwrapped=t,i}var Vi=Cne();function Ine(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function One({type:t,reducerName:e,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!Pne(n))throw new Error(Li(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?va(t,o):va(t))}function Rne(t){return t._reducerDefinitionType==="asyncThunk"}function Pne(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Dne({type:t,reducerName:e},r,n,i){if(!i)throw new Error(Li(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:c,settled:f,options:d}=r,p=i(t,a,d);n.exposeAction(e,p),o&&n.addCase(p.fulfilled,o),l&&n.addCase(p.pending,l),c&&n.addCase(p.rejected,c),f&&n.addMatcher(p.settled,f),n.exposeCaseReducer(e,{fulfilled:o||r1,pending:l||r1,rejected:c||r1,settled:f||r1})}function r1(){}var Nne="task",O9="listener",R9="completed",JA="cancelled",Mne=`task-${JA}`,kne=`task-${R9}`,Aw=`${O9}-${JA}`,jne=`${O9}-${R9}`,Um=class{constructor(t){this.code=t,this.message=`${Nne} ${JA} (reason: ${t})`}name="TaskAbortError";message},eS=(t,e)=>{if(typeof t!="function")throw new TypeError(Li(32))},vv=()=>{},P9=(t,e=vv)=>(t.catch(e),t),D9=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Qc=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Zc=t=>{if(t.aborted){const{reason:e}=t;throw new Um(e)}};function N9(t,e){let r=vv;return new Promise((n,i)=>{const a=()=>i(new Um(t.reason));if(t.aborted){a();return}r=D9(t,a),e.finally(()=>r()).then(n,i)}).finally(()=>{r=vv})}var Lne=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof Um?"cancelled":"rejected",error:r}}finally{e?.()}},mv=t=>e=>P9(N9(t,e).then(r=>(Zc(t),r))),M9=t=>{const e=mv(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Af}=Object,hR={},Fm="listenerMiddleware",Bne=(t,e)=>{const r=n=>D9(t,()=>Qc(n,t.reason));return(n,i)=>{eS(n);const a=new AbortController;r(a);const o=Lne(async()=>{Zc(t),Zc(a.signal);const l=await n({pause:mv(a.signal),delay:M9(a.signal),signal:a.signal});return Zc(a.signal),l},()=>Qc(a,kne));return i?.autoJoin&&e.push(o.catch(vv)),{result:mv(t)(o),cancel(){Qc(a,Mne)}}}},Une=(t,e)=>{const r=async(n,i)=>{Zc(e);let a=()=>{};const l=[new Promise((c,f)=>{let d=t({predicate:n,effect:(p,g)=>{g.unsubscribe(),c([p,g.getState(),g.getOriginalState()])}});a=()=>{d(),f()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await N9(e,Promise.race(l));return Zc(e),c}finally{a()}};return(n,i)=>P9(r(n,i))},k9=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=va(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Li(21));return eS(a),{predicate:i,type:e,effect:a}},j9=Af(t=>{const{type:e,predicate:r,effect:n}=k9(t);return{id:Ene(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Li(22))}}},{withTypes:()=>j9}),pR=(t,e)=>{const{type:r,effect:n,predicate:i}=k9(e);return Array.from(t.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},Sw=t=>{t.pending.forEach(e=>{Qc(e,Aw)})},Fne=t=>()=>{t.forEach(Sw),t.clear()},gR=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},L9=Af(va(`${Fm}/add`),{withTypes:()=>L9}),zne=va(`${Fm}/removeAll`),B9=Af(va(`${Fm}/remove`),{withTypes:()=>B9}),Vne=(...t)=>{console.error(`${Fm}/error`,...t)},Hp=(t={})=>{const e=new Map,{extra:r,onError:n=Vne}=t;eS(n);const i=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),p=>{d.unsubscribe(),p?.cancelActive&&Sw(d)}),a=d=>{const p=pR(e,d)??j9(d);return i(p)};Af(a,{withTypes:()=>a});const o=d=>{const p=pR(e,d);return p&&(p.unsubscribe(),d.cancelActive&&Sw(p)),!!p};Af(o,{withTypes:()=>o});const l=async(d,p,g,m)=>{const b=new AbortController,w=Une(a,b.signal),E=[];try{d.pending.add(b),await Promise.resolve(d.effect(p,Af({},g,{getOriginalState:m,condition:(S,I)=>w(S,I).then(Boolean),take:w,delay:M9(b.signal),pause:mv(b.signal),extra:r,signal:b.signal,fork:Bne(b.signal,E),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((S,I,O)=>{S!==b&&(Qc(S,Aw),O.delete(S))})},cancel:()=>{Qc(b,Aw),d.pending.delete(b)},throwIfCancelled:()=>{Zc(b.signal)}})))}catch(S){S instanceof Um||gR(n,S,{raisedBy:"effect"})}finally{await Promise.all(E),Qc(b,jne),d.pending.delete(b)}},c=Fne(e);return{middleware:d=>p=>g=>{if(!y9(g))return p(g);if(L9.match(g))return a(g.payload);if(zne.match(g)){c();return}if(B9.match(g))return o(g.payload);let m=d.getState();const b=()=>{if(m===hR)throw new Error(Li(23));return m};let w;try{if(w=p(g),e.size>0){const E=d.getState(),S=Array.from(e.values());for(const I of S){let O=!1;try{O=I.predicate(g,E,m)}catch(D){O=!1,gR(n,D,{raisedBy:"predicate"})}O&&l(I,g,d,b)}}}finally{m=hR}return w},startListening:a,stopListening:o,clearListeners:c}};function Li(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Hne={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},U9=Vi({name:"chartLayout",initialState:Hne,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,a;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:$ne,setLayout:qne,setChartSize:Gne,setScale:Wne}=U9.actions,Kne=U9.reducer;function vR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vR(Object(r),!0).forEach(function(n){Xne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xne(t,e,r){return(e=Yne(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yne(t){var e=Qne(t,"string");return typeof e=="symbol"?e:e+""}function Qne(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yv=Math.PI/180,Zne=t=>t*180/Math.PI,zr=(t,e,r,n)=>({x:t+Math.cos(-yv*n)*r,y:e+Math.sin(-yv*n)*r}),F9=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Jne=(t,e)=>{var{x:r,y:n}=t,{x:i,y:a}=e;return Math.sqrt((r-i)**2+(n-a)**2)},eie=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:a}=e,o=Jne({x:r,y:n},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var l=(r-i)/o,c=Math.acos(l);return n>a&&(c=2*Math.PI-c),{radius:o,angle:Zne(c),angleInRadian:c}},tie=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:r-a*360}},rie=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return t+o*360},nie=(t,e)=>{var{x:r,y:n}=t,{radius:i,angle:a}=eie({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(i<o||i>l||i===0)return null;var{startAngle:c,endAngle:f}=tie(e),d=a,p;if(c<=f){for(;d>f;)d-=360;for(;d<c;)d+=360;p=d>=c&&d<=f}else{for(;d>c;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=c}return p?mR(mR({},e),{},{radius:i,angle:rie(d,e)}):null};function z9(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function yR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yR(Object(r),!0).forEach(function(n){iie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iie(t,e,r){return(e=aie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aie(t){var e=oie(t,"string");return typeof e=="symbol"?e:e+""}function oie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yt(t,e,r){return lr(t)||lr(e)?r:So(e)?su(t,e,r):typeof e=="function"?e(t):r}var sie=(t,e,r,n,i)=>{var a,o=-1,l=(a=e?.length)!==null&&a!==void 0?a:0;if(l<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var f=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,p=c>=l-1?r[0].coordinate:r[c+1].coordinate,g=void 0;if(hn(d-f)!==hn(p-d)){var m=[];if(hn(p-d)===hn(i[1]-i[0])){g=p;var b=d+i[1]-i[0];m[0]=Math.min(b,(b+f)/2),m[1]=Math.max(b,(b+f)/2)}else{g=f;var w=p+i[1]-i[0];m[0]=Math.min(d,(w+d)/2),m[1]=Math.max(d,(w+d)/2)}var E=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(t>E[0]&&t<=E[1]||t>=m[0]&&t<=m[1]){({index:o}=r[c]);break}}else{var S=Math.min(f,p),I=Math.max(f,p);if(t>(S+d)/2&&t<=(I+d)/2){({index:o}=r[c]);break}}}else if(e){for(var O=0;O<l;O++)if(O===0&&t<=(e[O].coordinate+e[O+1].coordinate)/2||O>0&&O<l-1&&t>(e[O].coordinate+e[O-1].coordinate)/2&&t<=(e[O].coordinate+e[O+1].coordinate)/2||O===l-1&&t>(e[O].coordinate+e[O-1].coordinate)/2){({index:o}=e[O]);break}}return o},lie=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:a,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&a!=="center"&&De(t[a]))return sa(sa({},t),{},{[a]:t[a]+(n||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&o!=="middle"&&De(t[o]))return sa(sa({},t),{},{[o]:t[o]+(i||0)})}return t},Zl=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",V9=(t,e,r,n)=>{if(n)return t.map(l=>l.coordinate);var i,a,o=t.map(l=>(l.coordinate===e&&(i=!0),l.coordinate===r&&(a=!0),l.coordinate));return i||o.push(e),a||o.push(r),o},H9=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:a,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:f,tickCount:d,ticks:p,niceTicks:g,axisType:m}=t;if(!o)return null;var b=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=i==="category"&&o.bandwidth?o.bandwidth()/b:0;if(w=m==="angleAxis"&&a&&a.length>=2?hn(a[0]-a[1])*2*w:w,p||g){var E=(p||g||[]).map((S,I)=>{var O=n?n.indexOf(S):S;return{coordinate:o(O)+w,value:S,offset:w,index:I}});return E.filter(S=>!Ui(S.coordinate))}return c&&f?f.map((S,I)=>({coordinate:o(S)+w,value:S,index:I,offset:w})):o.ticks&&d!=null?o.ticks(d).map((S,I)=>({coordinate:o(S)+w,value:S,offset:w,index:I})):o.domain().map((S,I)=>({coordinate:o(S)+w,value:n?n[S]:S,index:I,offset:w}))},xR=1e-4,cie=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-xR,a=Math.max(n[0],n[1])+xR,o=t(e[0]),l=t(e[r-1]);(o<i||o>a||l<i||l>a)&&t.domain([e[0],e[r-1]])}},uie=(t,e)=>{if(!e||e.length!==2||!De(e[0])||!De(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!De(t[0])||t[0]<r)&&(i[0]=r),(!De(t[1])||t[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},fie=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0,o=0;o<e;++o){var l=Ui(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=a,t[o][r][1]=a+l,a=t[o][r][1])}},die=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0;a<e;++a){var o=Ui(t[a][r][1])?t[a][r][0]:t[a][r][1];o>=0?(t[a][r][0]=i,t[a][r][1]=i+o,i=t[a][r][1]):(t[a][r][0]=0,t[a][r][1]=0)}},hie={sign:fie,expand:Vte,none:Lf,silhouette:Hte,wiggle:$te,positive:die},pie=(t,e,r)=>{var n=hie[r],i=zte().keys(e).value((a,o)=>+Yt(a,o,0)).order(gw).offset(n);return i(t)};function gie(t){return t==null?void 0:String(t)}function bR(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:a,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!lr(i[e.dataKey])){var l=Nk(r,"value",i[e.dataKey]);if(l)return l.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Yt(i,lr(o)?e.dataKey:o);return lr(c)?null:e.scale(c)}var _R=t=>{var{axis:e,ticks:r,offset:n,bandSize:i,entry:a,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=Yt(a,e.dataKey,e.scale.domain()[o]);return lr(l)?null:e.scale(l)-i/2+n},vie=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},mie=t=>{var e=t.flat(2).filter(De);return[Math.min(...e),Math.max(...e)]},yie=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],xie=(t,e,r)=>{if(t!=null)return yie(Object.keys(t).reduce((n,i)=>{var a=t[i],{stackedData:o}=a,l=o.reduce((c,f)=>{var d=z9(f,e,r),p=mie(d);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},wR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ER=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pp=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=km(e,d=>d.coordinate),a=1/0,o=1,l=i.length;o<l;o++){var c=i[o],f=i[o-1];a=Math.min((c.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function AR(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:a}=t;return sa(sa({},e),{},{dataKey:r,payload:n,value:i,name:a})}function id(t,e){if(t)return String(t);if(typeof e=="string")return e}function bie(t,e,r,n,i){if(r==="horizontal"||r==="vertical"){var a=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return a?{x:t,y:e}:null}return n?nie({x:t,y:e},n):null}var _ie=(t,e,r,n)=>{var i=e.find(f=>f&&f.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.y};if(t==="vertical")return{x:n.x,y:i.coordinate};if(t==="centric"){var a=i.coordinate,{radius:o}=n;return sa(sa(sa({},n),zr(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var l=i.coordinate,{angle:c}=n;return sa(sa(sa({},n),zr(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},wie=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Es=t=>t.layout.width,As=t=>t.layout.height,Eie=t=>t.layout.scale,$9=t=>t.layout.margin,zm=ne(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Vm=ne(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),q9="data-recharts-item-index",G9="data-recharts-item-data-key",$p=60;function SR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function n1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SR(Object(r),!0).forEach(function(n){Aie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Aie(t,e,r){return(e=Sie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sie(t){var e=Cie(t,"string");return typeof e=="symbol"?e:e+""}function Cie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tie=t=>t.brush.height;function Iie(t){var e=Vm(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:$p;return r+i}return r},0)}function Oie(t){var e=Vm(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:$p;return r+i}return r},0)}function Rie(t){var e=zm(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Pie(t){var e=zm(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var en=ne([Es,As,$9,Tie,Iie,Oie,Rie,Pie,p9,Kre],(t,e,r,n,i,a,o,l,c,f)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},p={top:(r.top||0)+o,bottom:(r.bottom||0)+l},g=n1(n1({},p),d),m=g.bottom;g.bottom+=n,g=lie(g,c,f);var b=t-g.left-g.right,w=e-g.top-g.bottom;return n1(n1({brushBottom:m},g),{},{width:Math.max(b,0),height:Math.max(w,0)})}),Die=ne(en,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),tS=ne(Es,As,(t,e)=>({x:0,y:0,width:t,height:e})),Nie=C.createContext(null),xi=()=>C.useContext(Nie)!=null,Hm=t=>t.brush,$m=ne([Hm,en,$9],(t,e,r)=>({height:t.height,x:De(t.x)?t.x:e.left,y:De(t.y)?t.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:De(t.width)?t.width:e.width})),rS=()=>{var t,e=xi(),r=Oe(Die),n=Oe($m),i=(t=Oe(Hm))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},Mie={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},W9=()=>{var t;return(t=Oe(en))!==null&&t!==void 0?t:Mie},nS=()=>Oe(Es),iS=()=>Oe(As),kie=()=>Oe(t=>t.layout.margin),pt=t=>t.layout.layoutType,qm=()=>Oe(pt),jie={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},K9=Vi({name:"legend",initialState:jie,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var r=ss(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:CR,setLegendSettings:Lie,addLegendPayload:X9,removeLegendPayload:Y9}=K9.actions,Bie=K9.reducer,Uie=["contextPayload"];function Cw(){return Cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cw.apply(null,arguments)}function TR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Uf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TR(Object(r),!0).forEach(function(n){aS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aS(t,e,r){return(e=Fie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fie(t){var e=zie(t,"string");return typeof e=="symbol"?e:e+""}function zie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vie(t,e){if(t==null)return{};var r,n,i=Hie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Hie(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function $ie(t){return t.value}function qie(t){var{contextPayload:e}=t,r=Vie(t,Uie),n=u9(e,t.payloadUniqBy,$ie),i=Uf(Uf({},r),{},{payload:n});return C.isValidElement(t.content)?C.cloneElement(t.content,i):typeof t.content=="function"?C.createElement(t.content,i):C.createElement(GA,i)}function Gie(t,e,r,n,i,a){var{layout:o,align:l,verticalAlign:c}=e,f,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?f={left:((n||0)-a.width)/2}:f=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((i||0)-a.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Uf(Uf({},f),d)}function Wie(t){var e=dr();return C.useEffect(()=>{e(Lie(t))},[e,t]),null}function Kie(t){var e=dr();return C.useEffect(()=>(e(CR(t)),()=>{e(CR({width:0,height:0}))}),[e,t]),null}function Xie(t){var e=Qre(),r=fte(),n=kie(),{width:i,height:a,wrapperStyle:o,portal:l}=t,[c,f]=g9([e]),d=nS(),p=iS();if(d==null||p==null)return null;var g=d-(n.left||0)-(n.right||0),m=Gm.getWidthOrHeight(t.layout,a,i,g),b=l?o:Uf(Uf({position:"absolute",width:m?.width||i||"auto",height:m?.height||a||"auto"},Gie(o,t,n,d,p,c)),o),w=l??r;if(w==null)return null;var E=C.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:f},C.createElement(Wie,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),C.createElement(Kie,{width:c.width,height:c.height}),C.createElement(qie,Cw({},t,m,{margin:n,chartWidth:d,chartHeight:p,contextPayload:e})));return Lk.createPortal(E,w)}class Gm extends C.PureComponent{static getWidthOrHeight(e,r,n,i){return e==="vertical"&&De(r)?{height:r}:e==="horizontal"?{width:n||i}:null}render(){return C.createElement(Xie,this.props)}}aS(Gm,"displayName","Legend");aS(Gm,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Tw(){return Tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tw.apply(null,arguments)}function IR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(r),!0).forEach(function(n){Yie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yie(t,e,r){return(e=Qie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qie(t){var e=Zie(t,"string");return typeof e=="symbol"?e:e+""}function Zie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jie(t){return Array.isArray(t)&&So(t[0])&&So(t[1])?t.join(" ~ "):t}var eae=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:f,label:d,labelFormatter:p,accessibilityLayer:g=!1}=t,m=()=>{if(a&&a.length){var k={padding:0,margin:0},B=(l?km(a,l):a).map((R,N)=>{if(R.type==="none")return null;var L=R.formatter||o||Jie,{value:U,name:z}=R,H=U,j=z;if(L){var ue=L(U,z,R,N,a);if(Array.isArray(ue))[H,j]=ue;else if(ue!=null)H=ue;else return null}var ye=qb({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:ye},So(j)?C.createElement("span",{className:"recharts-tooltip-item-name"},j):null,So(j)?C.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,C.createElement("span",{className:"recharts-tooltip-item-value"},H),C.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:k},B)}return null},b=qb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=qb({margin:0},i),E=!lr(d),S=E?d:"",I=xt("recharts-default-tooltip",c),O=xt("recharts-tooltip-label",f);E&&p&&a!==void 0&&a!==null&&(S=p(d,a));var D=g?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",Tw({className:I,style:b},D),C.createElement("p",{className:O,style:w},C.isValidElement(S)?S:"".concat(S)),m())},Ah="recharts-tooltip-wrapper",tae={visibility:"hidden"};function rae(t){var{coordinate:e,translateX:r,translateY:n}=t;return xt(Ah,{["".concat(Ah,"-right")]:De(r)&&e&&De(e.x)&&r>=e.x,["".concat(Ah,"-left")]:De(r)&&e&&De(e.x)&&r<e.x,["".concat(Ah,"-bottom")]:De(n)&&e&&De(e.y)&&n>=e.y,["".concat(Ah,"-top")]:De(n)&&e&&De(e.y)&&n<e.y})}function OR(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:f}=t;if(a&&De(a[n]))return a[n];var d=r[n]-l-(i>0?i:0),p=r[n]+i;if(e[n])return o[n]?d:p;var g=c[n];if(g==null)return 0;if(o[n]){var m=d,b=g;return m<b?Math.max(p,g):Math.max(d,g)}if(f==null)return 0;var w=p+l,E=g+f;return w>E?Math.max(d,g):Math.max(p,g)}function nae(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function iae(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,f,d,p;return o.height>0&&o.width>0&&r?(d=OR({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=OR({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),f=nae({translateX:d,translateY:p,useTranslate3d:l})):f=tae,{cssProperties:f,cssClasses:rae({translateX:d,translateY:p,coordinate:r})}}function RR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function i1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RR(Object(r),!0).forEach(function(n){Iw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Iw(t,e,r){return(e=aae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aae(t){var e=oae(t,"string");return typeof e=="symbol"?e:e+""}function oae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class sae extends C.PureComponent{constructor(){super(...arguments),Iw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Iw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:o,hasPayload:l,isAnimationActive:c,offset:f,position:d,reverseDirection:p,useTranslate3d:g,viewBox:m,wrapperStyle:b,lastBoundingBox:w,innerRef:E,hasPortalFromProps:S}=this.props,{cssClasses:I,cssProperties:O}=iae({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:f,position:d,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:m}),D=S?{}:i1(i1({transition:c&&e?"transform ".concat(n,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=i1(i1({},D),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:I,style:k,ref:E},a)}}var lae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Jl={devToolsEnabled:!1,isSsr:lae()},Q9=()=>Oe(t=>t.rootProps.accessibilityLayer);function zi(t){return Number.isFinite(t)}function Ff(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ow.apply(null,arguments)}function PR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function DR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PR(Object(r),!0).forEach(function(n){cae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cae(t,e,r){return(e=uae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uae(t){var e=fae(t,"string");return typeof e=="symbol"?e:e+""}function fae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NR={curveBasisClosed:Rte,curveBasisOpen:Pte,curveBasis:Ote,curveBumpX:gte,curveBumpY:vte,curveLinearClosed:Dte,curveLinear:Nm,curveMonotoneX:Nte,curveMonotoneY:Mte,curveNatural:kte,curveStep:jte,curveStepAfter:Bte,curveStepBefore:Lte},a1=t=>zi(t.x)&&zi(t.y),Sh=t=>t.x,Ch=t=>t.y,dae=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Fp(t));return(r==="curveMonotone"||r==="curveBump")&&e?NR["".concat(r).concat(e==="vertical"?"Y":"X")]:NR[r]||Nm},hae=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=t,o=dae(e,i),l=a?r.filter(a1):r,c;if(Array.isArray(n)){var f=a?n.filter(p=>a1(p)):n,d=l.map((p,g)=>DR(DR({},p),{},{base:f[g]}));return i==="vertical"?c=Qg().y(Ch).x1(Sh).x0(p=>p.base.x):c=Qg().x(Sh).y1(Ch).y0(p=>p.base.y),c.defined(a1).curve(o),c(d)}return i==="vertical"&&De(n)?c=Qg().y(Ch).x1(Sh).x0(n):De(n)?c=Qg().x(Sh).y1(Ch).y0(n):c=$k().x(Sh).y(Ch),c.defined(a1).curve(o),c(l)},oS=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var a=r&&r.length?hae(t):n;return C.createElement("path",Ow({},Do(t),BA(t),{className:xt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},pae=["x","y","top","left","width","height","className"];function Rw(){return Rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rw.apply(null,arguments)}function MR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function gae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(r),!0).forEach(function(n){vae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vae(t,e,r){return(e=mae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mae(t){var e=yae(t,"string");return typeof e=="symbol"?e:e+""}function yae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xae(t,e){if(t==null)return{};var r,n,i=bae(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function bae(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var _ae=(t,e,r,n,i,a)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(r),wae=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:a=0,height:o=0,className:l}=t,c=xae(t,pae),f=gae({x:e,y:r,top:n,left:i,width:a,height:o},c);return!De(e)||!De(r)||!De(a)||!De(o)||!De(n)||!De(i)?null:C.createElement("path",Rw({},fr(f,!0),{className:xt("recharts-cross",l),d:_ae(e,r,a,o,n,i)}))};function Eae(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function kR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Aae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(r),!0).forEach(function(n){Sae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sae(t,e,r){return(e=Cae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cae(t){var e=Tae(t,"string");return typeof e=="symbol"?e:e+""}function Tae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kn(t,e){var r=Aae({},t),n=e,i=Object.keys(e),a=i.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return a}function Iae(){}function jR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jR(Object(r),!0).forEach(function(n){Oae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Oae(t,e,r){return(e=Rae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rae(t){var e=Pae(t,"string");return typeof e=="symbol"?e:e+""}function Pae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Z9=(t,e,r)=>t.map(n=>"".concat(Dae(n)," ").concat(e,"ms ").concat(r)).join(","),Nae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),gp=(t,e)=>Object.keys(e).reduce((r,n)=>LR(LR({},r),{},{[n]:t(n,e[n])}),{});function BR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BR(Object(r),!0).forEach(function(n){Mae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mae(t,e,r){return(e=kae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kae(t){var e=jae(t,"string");return typeof e=="symbol"?e:e+""}function jae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xv=(t,e,r)=>t+(e-t)*r,Pw=t=>{var{from:e,to:r}=t;return e!==r},J9=(t,e,r)=>{var n=gp((i,a)=>{if(Pw(a)){var[o,l]=t(a.from,a.to,a.velocity);return Tn(Tn({},a),{},{from:o,velocity:l})}return a},e);return r<1?gp((i,a)=>Pw(a)?Tn(Tn({},a),{},{velocity:xv(a.velocity,n[i].velocity,r),from:xv(a.from,n[i].from,r)}):a,e):J9(t,n,r-1)};function Lae(t,e,r,n,i,a){var o,l=n.reduce((g,m)=>Tn(Tn({},g),{},{[m]:{from:t[m],velocity:0,to:e[m]}}),{}),c=()=>gp((g,m)=>m.from,l),f=()=>!Object.values(l).filter(Pw).length,d=null,p=g=>{o||(o=g);var m=g-o,b=m/r.dt;l=J9(r,l,b),i(Tn(Tn(Tn({},t),e),c())),o=g,f()||(d=a.setTimeout(p))};return()=>(d=a.setTimeout(p),()=>{d()})}function Bae(t,e,r,n,i,a,o){var l=null,c=i.reduce((p,g)=>Tn(Tn({},p),{},{[g]:[t[g],e[g]]}),{}),f,d=p=>{f||(f=p);var g=(p-f)/n,m=gp((w,E)=>xv(...E,r(g)),c);if(a(Tn(Tn(Tn({},t),e),m)),g<1)l=o.setTimeout(d);else{var b=gp((w,E)=>xv(...E,r(1)),c);a(Tn(Tn(Tn({},t),e),b))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Uae=(t,e,r,n,i,a)=>{var o=Nae(t,e);return r.isStepper===!0?Lae(t,e,r,o,i,a):Bae(t,e,r,n,o,i,a)};var bv=1e-4,e7=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],t7=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),UR=(t,e)=>r=>{var n=e7(t,e);return t7(n,r)},Fae=(t,e)=>r=>{var n=e7(t,e),i=[...n.map((a,o)=>a*o).slice(1),0];return t7(i,r)},FR=function(){for(var e,r,n,i,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[e,n,r,i]=[0,0,1,1];break;case"ease":[e,n,r,i]=[.25,.1,.25,1];break;case"ease-in":[e,n,r,i]=[.42,0,1,1];break;case"ease-out":[e,n,r,i]=[.42,0,.58,1];break;case"ease-in-out":[e,n,r,i]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,n,r,i]=c[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else o.length===4&&([e,n,r,i]=o);var f=UR(e,r),d=UR(n,i),p=Fae(e,r),g=b=>b>1?1:b<0?0:b,m=b=>{for(var w=b>1?1:b,E=w,S=0;S<8;++S){var I=f(E)-w,O=p(E);if(Math.abs(I-w)<bv||O<bv)return d(E);E=g(E-I/O)}return d(E)};return m.isStepper=!1,m},zae=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,a=(o,l,c)=>{var f=-(o-l)*r,d=c*n,p=c+(f-d)*i/1e3,g=c*i/1e3+o;return Math.abs(g-l)<bv&&Math.abs(p)<bv?[l,0]:[g,p]};return a.isStepper=!0,a.dt=i,a},Vae=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return FR(t);case"spring":return zae();default:if(t.split("(")[0]==="cubic-bezier")return FR(t)}return typeof t=="function"?t:null};function Hae(t){var e,r=()=>null,n=!1,i=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...f]=l;if(typeof c=="number"){i=t.setTimeout(a.bind(null,f),c);return}a(c),i=t.setTimeout(a.bind(null,f));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),a(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class $ae{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function qae(){return Hae(new $ae)}var Gae=C.createContext(qae);function Wae(t,e){var r=C.useContext(Gae);return C.useMemo(()=>e??r(t),[t,e,r])}var Kae={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},zR={t:0},Gb={t:1};function qp(t){var e=kn(t,Kae),{isActive:r,canBegin:n,duration:i,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:c,children:f}=e,d=Wae(e.animationId,e.animationManager),[p,g]=C.useState(r?zR:Gb),m=C.useRef(null);return C.useEffect(()=>{r||g(Gb)},[r]),C.useEffect(()=>{if(!r||!n)return Iae;var b=Uae(zR,Gb,Vae(a),i,g,d.getTimeoutController()),w=()=>{m.current=b()};return d.start([c,o,w,i,l]),()=>{d.stop(),m.current&&m.current(),l()}},[r,n,i,a,o,c,l,d]),f(p.t)}function Gp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=C.useRef(fp(e)),n=C.useRef(t);return n.current!==t&&(r.current=fp(e),n.current=t),r.current}function VR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VR(Object(r),!0).forEach(function(n){Xae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xae(t,e,r){return(e=Yae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yae(t){var e=Qae(t,"string");return typeof e=="symbol"?e:e+""}function Qae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_v.apply(null,arguments)}var $R=(t,e,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,f;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,g=4;p<g;p++)d[p]=i[p]>a?a:i[p];f="M".concat(t,",").concat(e+o*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+l*d[0],",").concat(e)),f+="L ".concat(t+r-l*d[1],",").concat(e),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(e+o*d[1])),f+="L ".concat(t+r,",").concat(e+n-o*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-l*d[2],",").concat(e+n)),f+="L ".concat(t+l*d[3],",").concat(e+n),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+n-o*d[3])),f+="Z"}else if(a>0&&i===+i&&i>0){var m=Math.min(a,i);f="M ".concat(t,",").concat(e+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+l*m,",").concat(e,`
            L `).concat(t+r-l*m,",").concat(e,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+r,",").concat(e+o*m,`
            L `).concat(t+r,",").concat(e+n-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t+r-l*m,",").concat(e+n,`
            L `).concat(t+l*m,",").concat(e+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(t,",").concat(e+n-o*m," Z")}else f="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return f},Zae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r7=t=>{var e=kn(t,Zae),r=C.useRef(null),[n,i]=C.useState(-1);C.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ue=r.current.getTotalLength();ue&&i(ue)}catch{}},[]);var{x:a,y:o,width:l,height:c,radius:f,className:d}=e,{animationEasing:p,animationDuration:g,animationBegin:m,isAnimationActive:b,isUpdateAnimationActive:w}=e,E=C.useRef(l),S=C.useRef(c),I=C.useRef(a),O=C.useRef(o),D=C.useMemo(()=>({x:a,y:o,width:l,height:c,radius:f}),[a,o,l,c,f]),k=Gp(D,"rectangle-");if(a!==+a||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var B=xt("recharts-rectangle",d);if(!w)return C.createElement("path",_v({},fr(e,!0),{className:B,d:$R(a,o,l,c,f)}));var R=E.current,N=S.current,L=I.current,U=O.current,z="0px ".concat(n===-1?1:n,"px"),H="".concat(n,"px 0px"),j=Z9(["strokeDasharray"],g,typeof p=="string"?p:void 0);return C.createElement(qp,{animationId:k,key:k,canBegin:n>0,duration:g,easing:p,isActive:w,begin:m},ue=>{var ye=gr(R,l,ue),X=gr(N,c,ue),re=gr(L,a,ue),he=gr(U,o,ue);r.current&&(E.current=ye,S.current=X,I.current=re,O.current=he);var Ae;return b?ue>0?Ae={transition:j,strokeDasharray:H}:Ae={strokeDasharray:z}:Ae={strokeDasharray:H},C.createElement("path",_v({},fr(e,!0),{className:B,d:$R(re,he,ye,X,f),ref:r,style:HR(HR({},Ae),e.style)}))})};function n7(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:a}=t,o=zr(e,r,n,i),l=zr(e,r,n,a);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dw.apply(null,arguments)}var Jae=(t,e)=>{var r=hn(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},o1=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:a,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,f=l*(o?1:-1)+n,d=Math.asin(l/f)/yv,p=c?i:i+a*d,g=zr(e,r,f,p),m=zr(e,r,n,p),b=c?i-a*d:i,w=zr(e,r,f*Math.cos(d*yv),b);return{center:g,circleTangency:m,lineTangency:w,theta:d}},i7=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:o}=t,l=Jae(a,o),c=a+l,f=zr(e,r,i,a),d=zr(e,r,i,c),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var g=zr(e,r,n,a),m=zr(e,r,n,c);p+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(e,",").concat(r," Z");return p},eoe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:f}=t,d=hn(f-c),{circleTangency:p,lineTangency:g,theta:m}=o1({cx:e,cy:r,radius:i,angle:c,sign:d,cornerRadius:a,cornerIsExternal:l}),{circleTangency:b,lineTangency:w,theta:E}=o1({cx:e,cy:r,radius:i,angle:f,sign:-d,cornerRadius:a,cornerIsExternal:l}),S=l?Math.abs(c-f):Math.abs(c-f)-m-E;if(S<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):i7({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:c,endAngle:f});var I="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:O,lineTangency:D,theta:k}=o1({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:B,lineTangency:R,theta:N}=o1({cx:e,cy:r,radius:n,angle:f,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),L=l?Math.abs(c-f):Math.abs(c-f)-k-N;if(L<0&&a===0)return"".concat(I,"L").concat(e,",").concat(r,"Z");I+="L".concat(R.x,",").concat(R.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(d>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(D.x,",").concat(D.y,"Z")}else I+="L".concat(e,",").concat(r,"Z");return I},toe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},a7=t=>{var e=kn(t,toe),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:d,className:p}=e;if(a<i||f===d)return null;var g=xt("recharts-sector",p),m=a-i,b=$n(o,m,0,!0),w;return b>0&&Math.abs(f-d)<360?w=eoe({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:d}):w=i7({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:f,endAngle:d}),C.createElement("path",Dw({},fr(e,!0),{className:g,d:w}))};function roe(t,e,r){var n,i,a,o;if(t==="horizontal")n=e.x,a=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:l,cy:c,innerRadius:f,outerRadius:d,angle:p}=e,g=zr(l,c,f,p),m=zr(l,c,d,p);n=g.x,i=g.y,a=m.x,o=m.y}else return n7(e);return[{x:n,y:i},{x:a,y:o}]}var Wb={},Kb={},Xb={},qR;function noe(){return qR||(qR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=d9();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Xb)),Xb}var GR;function ioe(){return GR||(GR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=noe();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Kb)),Kb}var WR;function aoe(){return WR||(WR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h9(),r=ioe();function n(i,a,o){o&&typeof o!="number"&&e.isIterateeCall(i,a,o)&&(a=o=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),o=o===void 0?i<a?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((a-i)/(o||1)),0),c=new Array(l);for(let f=0;f<l;f++)c[f]=i,i+=o;return c}t.range=n})(Wb)),Wb}var Yb,KR;function ooe(){return KR||(KR=1,Yb=aoe().range),Yb}var soe=ooe();const o7=To(soe);function Pl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function loe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function sS(t){let e,r,n;t.length!==2?(e=Pl,r=(l,c)=>Pl(t(l),c),n=(l,c)=>t(l)-c):(e=t===Pl||t===loe?t:coe,r=t,n=t);function i(l,c,f=0,d=l.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;r(l[p],c)<0?f=p+1:d=p}while(f<d)}return f}function a(l,c,f=0,d=l.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;r(l[p],c)<=0?f=p+1:d=p}while(f<d)}return f}function o(l,c,f=0,d=l.length){const p=i(l,c,f,d-1);return p>f&&n(l[p-1],c)>-n(l[p],c)?p-1:p}return{left:i,center:o,right:a}}function coe(){return 0}function s7(t){return t===null?NaN:+t}function*uoe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const foe=sS(Pl),Wp=foe.right;sS(s7).center;class XR extends Map{constructor(e,r=poe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(YR(this,e))}has(e){return super.has(YR(this,e))}set(e,r){return super.set(doe(this,e),r)}delete(e){return super.delete(hoe(this,e))}}function YR({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function doe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function hoe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function poe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function goe(t=Pl){if(t===Pl)return l7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function l7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const voe=Math.sqrt(50),moe=Math.sqrt(10),yoe=Math.sqrt(2);function wv(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=voe?10:a>=moe?5:a>=yoe?2:1;let l,c,f;return i<0?(f=Math.pow(10,-i)/o,l=Math.round(t*f),c=Math.round(e*f),l/f<t&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*o,l=Math.round(t/f),c=Math.round(e/f),l*f<t&&++l,c*f>e&&--c),c<l&&.5<=r&&r<2?wv(t,e,r*2):[l,c,f]}function Nw(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?wv(e,t,r):wv(t,e,r);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(n)if(o<0)for(let f=0;f<l;++f)c[f]=(a-f)/-o;else for(let f=0;f<l;++f)c[f]=(a-f)*o;else if(o<0)for(let f=0;f<l;++f)c[f]=(i+f)/-o;else for(let f=0;f<l;++f)c[f]=(i+f)*o;return c}function Mw(t,e,r){return e=+e,t=+t,r=+r,wv(t,e,r)[2]}function kw(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?Mw(e,t,r):Mw(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function QR(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function ZR(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function c7(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?l7:goe(i);n>r;){if(n-r>600){const c=n-r+1,f=e-r+1,d=Math.log(c),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(c-p)/c)*(f-c/2<0?-1:1),m=Math.max(r,Math.floor(e-f*p/c+g)),b=Math.min(n,Math.floor(e+(c-f)*p/c+g));c7(t,e,m,b,i)}const a=t[e];let o=r,l=n;for(Th(t,r,e),i(t[n],a)>0&&Th(t,r,n);o<l;){for(Th(t,o,l),++o,--l;i(t[o],a)<0;)++o;for(;i(t[l],a)>0;)--l}i(t[r],a)===0?Th(t,r,l):(++l,Th(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Th(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function xoe(t,e,r){if(t=Float64Array.from(uoe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return ZR(t);if(e>=1)return QR(t);var n,i=(n-1)*e,a=Math.floor(i),o=QR(c7(t,a).subarray(0,a+1)),l=ZR(t.subarray(a+1));return o+(l-o)*(i-a)}}function boe(t,e,r=s7){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),l=+r(t[a+1],a+1,t);return o+(l-o)*(i-a)}}function _oe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function ya(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ss(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const jw=Symbol("implicit");function lS(){var t=new XR,e=[],r=[],n=jw;function i(a){let o=t.get(a);if(o===void 0){if(n!==jw)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new XR;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return lS(e,r).unknown(n)},ya.apply(i,arguments),i}function cS(){var t=lS().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,o,l=!1,c=0,f=0,d=.5;delete t.unknown;function p(){var g=e().length,m=i<n,b=m?i:n,w=m?n:i;a=(w-b)/Math.max(1,g-c+f*2),l&&(a=Math.floor(a)),b+=(w-b-a*(g-c))*d,o=a*(1-c),l&&(b=Math.round(b),o=Math.round(o));var E=_oe(g).map(function(S){return b+a*S});return r(m?E.reverse():E)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([n,i]=g,n=+n,i=+i,p()):[n,i]},t.rangeRound=function(g){return[n,i]=g,n=+n,i=+i,l=!0,p()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(g){return arguments.length?(l=!!g,p()):l},t.padding=function(g){return arguments.length?(c=Math.min(1,f=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(f=+g,p()):f},t.align=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),p()):d},t.copy=function(){return cS(e(),[n,i]).round(l).paddingInner(c).paddingOuter(f).align(d)},ya.apply(p(),arguments)}function u7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return u7(e())},t}function woe(){return u7(cS.apply(null,arguments).paddingInner(1))}function uS(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function f7(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Kp(){}var vp=.7,Ev=1/vp,Sf="\\s*([+-]?\\d+)\\s*",mp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Eoe=/^#([0-9a-f]{3,8})$/,Aoe=new RegExp(`^rgb\\(${Sf},${Sf},${Sf}\\)$`),Soe=new RegExp(`^rgb\\(${_o},${_o},${_o}\\)$`),Coe=new RegExp(`^rgba\\(${Sf},${Sf},${Sf},${mp}\\)$`),Toe=new RegExp(`^rgba\\(${_o},${_o},${_o},${mp}\\)$`),Ioe=new RegExp(`^hsl\\(${mp},${_o},${_o}\\)$`),Ooe=new RegExp(`^hsla\\(${mp},${_o},${_o},${mp}\\)$`),JR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uS(Kp,yp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:eP,formatHex:eP,formatHex8:Roe,formatHsl:Poe,formatRgb:tP,toString:tP});function eP(){return this.rgb().formatHex()}function Roe(){return this.rgb().formatHex8()}function Poe(){return d7(this).formatHsl()}function tP(){return this.rgb().formatRgb()}function yp(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Eoe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?rP(e):r===3?new vi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?s1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?s1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Aoe.exec(t))?new vi(e[1],e[2],e[3],1):(e=Soe.exec(t))?new vi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Coe.exec(t))?s1(e[1],e[2],e[3],e[4]):(e=Toe.exec(t))?s1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ioe.exec(t))?aP(e[1],e[2]/100,e[3]/100,1):(e=Ooe.exec(t))?aP(e[1],e[2]/100,e[3]/100,e[4]):JR.hasOwnProperty(t)?rP(JR[t]):t==="transparent"?new vi(NaN,NaN,NaN,0):null}function rP(t){return new vi(t>>16&255,t>>8&255,t&255,1)}function s1(t,e,r,n){return n<=0&&(t=e=r=NaN),new vi(t,e,r,n)}function Doe(t){return t instanceof Kp||(t=yp(t)),t?(t=t.rgb(),new vi(t.r,t.g,t.b,t.opacity)):new vi}function Lw(t,e,r,n){return arguments.length===1?Doe(t):new vi(t,e,r,n??1)}function vi(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}uS(vi,Lw,f7(Kp,{brighter(t){return t=t==null?Ev:Math.pow(Ev,t),new vi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vp:Math.pow(vp,t),new vi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vi(Jc(this.r),Jc(this.g),Jc(this.b),Av(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nP,formatHex:nP,formatHex8:Noe,formatRgb:iP,toString:iP}));function nP(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}`}function Noe(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}${$c((isNaN(this.opacity)?1:this.opacity)*255)}`}function iP(){const t=Av(this.opacity);return`${t===1?"rgb(":"rgba("}${Jc(this.r)}, ${Jc(this.g)}, ${Jc(this.b)}${t===1?")":`, ${t})`}`}function Av(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $c(t){return t=Jc(t),(t<16?"0":"")+t.toString(16)}function aP(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ja(t,e,r,n)}function d7(t){if(t instanceof ja)return new ja(t.h,t.s,t.l,t.opacity);if(t instanceof Kp||(t=yp(t)),!t)return new ja;if(t instanceof ja)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,l=a-i,c=(a+i)/2;return l?(e===a?o=(r-n)/l+(r<n)*6:r===a?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new ja(o,l,c,t.opacity)}function Moe(t,e,r,n){return arguments.length===1?d7(t):new ja(t,e,r,n??1)}function ja(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}uS(ja,Moe,f7(Kp,{brighter(t){return t=t==null?Ev:Math.pow(Ev,t),new ja(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vp:Math.pow(vp,t),new ja(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new vi(Qb(t>=240?t-240:t+120,i,n),Qb(t,i,n),Qb(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new ja(oP(this.h),l1(this.s),l1(this.l),Av(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Av(this.opacity);return`${t===1?"hsl(":"hsla("}${oP(this.h)}, ${l1(this.s)*100}%, ${l1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function oP(t){return t=(t||0)%360,t<0?t+360:t}function l1(t){return Math.max(0,Math.min(1,t||0))}function Qb(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const fS=t=>()=>t;function koe(t,e){return function(r){return t+r*e}}function joe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Loe(t){return(t=+t)==1?h7:function(e,r){return r-e?joe(e,r,t):fS(isNaN(e)?r:e)}}function h7(t,e){var r=e-t;return r?koe(t,r):fS(isNaN(t)?e:t)}const sP=(function t(e){var r=Loe(e);function n(i,a){var o=r((i=Lw(i)).r,(a=Lw(a)).r),l=r(i.g,a.g),c=r(i.b,a.b),f=h7(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=f(d),i+""}}return n.gamma=t,n})(1);function Boe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Uoe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Foe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=ad(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(l){for(o=0;o<n;++o)a[o]=i[o](l);return a}}function zoe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Sv(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Voe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=ad(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Bw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zb=new RegExp(Bw.source,"g");function Hoe(t){return function(){return t}}function $oe(t){return function(e){return t(e)+""}}function qoe(t,e){var r=Bw.lastIndex=Zb.lastIndex=0,n,i,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=Bw.exec(t))&&(i=Zb.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Sv(n,i)})),r=Zb.lastIndex;return r<e.length&&(a=e.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?$oe(c[0].x):Hoe(e):(e=c.length,function(f){for(var d=0,p;d<e;++d)l[(p=c[d]).i]=p.x(f);return l.join("")})}function ad(t,e){var r=typeof e,n;return e==null||r==="boolean"?fS(e):(r==="number"?Sv:r==="string"?(n=yp(e))?(e=n,sP):qoe:e instanceof yp?sP:e instanceof Date?zoe:Uoe(e)?Boe:Array.isArray(e)?Foe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Voe:Sv)(t,e)}function dS(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Goe(t,e){e===void 0&&(e=t,t=ad);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[l](o-l)}}function Woe(t){return function(){return t}}function Cv(t){return+t}var lP=[0,1];function ni(t){return t}function Uw(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Woe(isNaN(e)?NaN:.5)}function Koe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Xoe(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=Uw(i,n),a=r(o,a)):(n=Uw(n,i),a=r(a,o)),function(l){return a(n(l))}}function Yoe(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=Uw(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(l){var c=Wp(t,l,1,n)-1;return a[c](i[c](l))}}function Xp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Wm(){var t=lP,e=lP,r=ad,n,i,a,o=ni,l,c,f;function d(){var g=Math.min(t.length,e.length);return o!==ni&&(o=Koe(t[0],t[g-1])),l=g>2?Yoe:Xoe,c=f=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=l(t.map(n),e,r)))(n(o(g)))}return p.invert=function(g){return o(i((f||(f=l(e,t.map(n),Sv)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Cv),d()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),d()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),r=dS,d()},p.clamp=function(g){return arguments.length?(o=g?!0:ni,d()):o!==ni},p.interpolate=function(g){return arguments.length?(r=g,d()):r},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,m){return n=g,i=m,d()}}function hS(){return Wm()(ni,ni)}function Qoe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Tv(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function zf(t){return t=Tv(Math.abs(t)),t?t[1]:NaN}function Zoe(t,e){return function(r,n){for(var i=r.length,a=[],o=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),a.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Joe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var ese=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xp(t){if(!(e=ese.exec(t)))throw new Error("invalid format: "+t);var e;return new pS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xp.prototype=pS.prototype;function pS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function tse(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var p7;function rse(t,e){var r=Tv(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(p7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Tv(t,Math.max(0,e+a-1))[0]}function cP(t,e){var r=Tv(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const uP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Qoe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cP(t*100,e),r:cP,s:rse,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fP(t){return t}var dP=Array.prototype.map,hP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nse(t){var e=t.grouping===void 0||t.thousands===void 0?fP:Zoe(dP.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?fP:Joe(dP.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(p){p=xp(p);var g=p.fill,m=p.align,b=p.sign,w=p.symbol,E=p.zero,S=p.width,I=p.comma,O=p.precision,D=p.trim,k=p.type;k==="n"?(I=!0,k="g"):uP[k]||(O===void 0&&(O=12),D=!0,k="g"),(E||g==="0"&&m==="=")&&(E=!0,g="0",m="=");var B=w==="$"?r:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",R=w==="$"?n:/[%p]/.test(k)?o:"",N=uP[k],L=/[defgprs%]/.test(k);O=O===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function U(z){var H=B,j=R,ue,ye,X;if(k==="c")j=N(z)+j,z="";else{z=+z;var re=z<0||1/z<0;if(z=isNaN(z)?c:N(Math.abs(z),O),D&&(z=tse(z)),re&&+z==0&&b!=="+"&&(re=!1),H=(re?b==="("?b:l:b==="-"||b==="("?"":b)+H,j=(k==="s"?hP[8+p7/3]:"")+j+(re&&b==="("?")":""),L){for(ue=-1,ye=z.length;++ue<ye;)if(X=z.charCodeAt(ue),48>X||X>57){j=(X===46?i+z.slice(ue+1):z.slice(ue))+j,z=z.slice(0,ue);break}}}I&&!E&&(z=e(z,1/0));var he=H.length+z.length+j.length,Ae=he<S?new Array(S-he+1).join(g):"";switch(I&&E&&(z=e(Ae+z,Ae.length?S-j.length:1/0),Ae=""),m){case"<":z=H+z+j+Ae;break;case"=":z=H+Ae+z+j;break;case"^":z=Ae.slice(0,he=Ae.length>>1)+H+z+j+Ae.slice(he);break;default:z=Ae+H+z+j;break}return a(z)}return U.toString=function(){return p+""},U}function d(p,g){var m=f((p=xp(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(zf(g)/3)))*3,w=Math.pow(10,-b),E=hP[8+b/3];return function(S){return m(w*S)+E}}return{format:f,formatPrefix:d}}var c1,gS,g7;ise({thousands:",",grouping:[3],currency:["$",""]});function ise(t){return c1=nse(t),gS=c1.format,g7=c1.formatPrefix,c1}function ase(t){return Math.max(0,-zf(Math.abs(t)))}function ose(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zf(e)/3)))*3-zf(Math.abs(t)))}function sse(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zf(e)-zf(t))+1}function v7(t,e,r,n){var i=kw(t,e,r),a;switch(n=xp(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=ose(i,o))&&(n.precision=a),g7(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=sse(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=ase(i))&&(n.precision=a-(n.type==="%")*2);break}}return gS(n)}function ec(t){var e=t.domain;return t.ticks=function(r){var n=e();return Nw(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return v7(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],l=n[a],c,f,d=10;for(l<o&&(f=o,o=l,l=f,f=i,i=a,a=f);d-- >0;){if(f=Mw(o,l,r),f===c)return n[i]=o,n[a]=l,e(n);if(f>0)o=Math.floor(o/f)*f,l=Math.ceil(l/f)*f;else if(f<0)o=Math.ceil(o*f)/f,l=Math.floor(l*f)/f;else break;c=f}return t},t}function m7(){var t=hS();return t.copy=function(){return Xp(t,m7())},ya.apply(t,arguments),ec(t)}function y7(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Cv),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return y7(t).unknown(e)},t=arguments.length?Array.from(t,Cv):[0,1],ec(r)}function x7(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function pP(t){return Math.log(t)}function gP(t){return Math.exp(t)}function lse(t){return-Math.log(-t)}function cse(t){return-Math.exp(-t)}function use(t){return isFinite(t)?+("1e"+t):t<0?0:t}function fse(t){return t===10?use:t===Math.E?Math.exp:e=>Math.pow(t,e)}function dse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function vP(t){return(e,r)=>-t(-e,r)}function vS(t){const e=t(pP,gP),r=e.domain;let n=10,i,a;function o(){return i=dse(n),a=fse(n),r()[0]<0?(i=vP(i),a=vP(a),t(lse,cse)):t(pP,gP),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let f=c[0],d=c[c.length-1];const p=d<f;p&&([f,d]=[d,f]);let g=i(f),m=i(d),b,w;const E=l==null?10:+l;let S=[];if(!(n%1)&&m-g<E){if(g=Math.floor(g),m=Math.ceil(m),f>0){for(;g<=m;++g)for(b=1;b<n;++b)if(w=g<0?b/a(-g):b*a(g),!(w<f)){if(w>d)break;S.push(w)}}else for(;g<=m;++g)for(b=n-1;b>=1;--b)if(w=g>0?b/a(-g):b*a(g),!(w<f)){if(w>d)break;S.push(w)}S.length*2<E&&(S=Nw(f,d,E))}else S=Nw(g,m,Math.min(m-g,E)).map(a);return p?S.reverse():S},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=xp(c)).precision==null&&(c.trim=!0),c=gS(c)),l===1/0)return c;const f=Math.max(1,n*l/e.ticks().length);return d=>{let p=d/a(Math.round(i(d)));return p*n<n-.5&&(p*=n),p<=f?c(d):""}},e.nice=()=>r(x7(r(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function b7(){const t=vS(Wm()).domain([1,10]);return t.copy=()=>Xp(t,b7()).base(t.base()),ya.apply(t,arguments),t}function mP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function yP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function mS(t){var e=1,r=t(mP(e),yP(e));return r.constant=function(n){return arguments.length?t(mP(e=+n),yP(e)):e},ec(r)}function _7(){var t=mS(Wm());return t.copy=function(){return Xp(t,_7()).constant(t.constant())},ya.apply(t,arguments)}function xP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function hse(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function pse(t){return t<0?-t*t:t*t}function yS(t){var e=t(ni,ni),r=1;function n(){return r===1?t(ni,ni):r===.5?t(hse,pse):t(xP(r),xP(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ec(e)}function xS(){var t=yS(Wm());return t.copy=function(){return Xp(t,xS()).exponent(t.exponent())},ya.apply(t,arguments),t}function gse(){return xS.apply(null,arguments).exponent(.5)}function bP(t){return Math.sign(t)*t*t}function vse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function w7(){var t=hS(),e=[0,1],r=!1,n;function i(a){var o=vse(t(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return t.invert(bP(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Cv)).map(bP)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return w7(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},ya.apply(i,arguments),ec(i)}function E7(){var t=[],e=[],r=[],n;function i(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=boe(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?n:e[Wp(r,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Pl),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return E7().domain(t).range(e).unknown(n)},ya.apply(a,arguments)}function A7(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[Wp(n,c,0,r)]:a}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,n[0]]:f>=r?[n[r-1],e]:[n[f-1],n[f]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return A7().domain([t,e]).range(i).unknown(a)},ya.apply(ec(o),arguments)}function S7(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[Wp(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return S7().domain(t).range(e).unknown(r)},ya.apply(i,arguments)}const Jb=new Date,e_=new Date;function tn(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let f;do c.push(f=new Date(+a)),e(a,l),t(a);while(f<a&&a<o);return c},i.filter=a=>tn(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(Jb.setTime(+a),e_.setTime(+o),t(Jb),t(e_),Math.floor(r(Jb,e_))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Iv=tn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Iv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?tn(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Iv);Iv.range;const ns=1e3,ua=ns*60,is=ua*60,ms=is*24,bS=ms*7,_P=ms*30,t_=ms*365,qc=tn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ns)},(t,e)=>(e-t)/ns,t=>t.getUTCSeconds());qc.range;const _S=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ns)},(t,e)=>{t.setTime(+t+e*ua)},(t,e)=>(e-t)/ua,t=>t.getMinutes());_S.range;const wS=tn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ua)},(t,e)=>(e-t)/ua,t=>t.getUTCMinutes());wS.range;const ES=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ns-t.getMinutes()*ua)},(t,e)=>{t.setTime(+t+e*is)},(t,e)=>(e-t)/is,t=>t.getHours());ES.range;const AS=tn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*is)},(t,e)=>(e-t)/is,t=>t.getUTCHours());AS.range;const Yp=tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ua)/ms,t=>t.getDate()-1);Yp.range;const Km=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ms,t=>t.getUTCDate()-1);Km.range;const C7=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ms,t=>Math.floor(t/ms));C7.range;function yu(t){return tn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ua)/bS)}const Xm=yu(0),Ov=yu(1),mse=yu(2),yse=yu(3),Vf=yu(4),xse=yu(5),bse=yu(6);Xm.range;Ov.range;mse.range;yse.range;Vf.range;xse.range;bse.range;function xu(t){return tn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/bS)}const Ym=xu(0),Rv=xu(1),_se=xu(2),wse=xu(3),Hf=xu(4),Ese=xu(5),Ase=xu(6);Ym.range;Rv.range;_se.range;wse.range;Hf.range;Ese.range;Ase.range;const SS=tn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());SS.range;const CS=tn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());CS.range;const ys=tn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ys.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ys.range;const xs=tn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());xs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});xs.range;function T7(t,e,r,n,i,a){const o=[[qc,1,ns],[qc,5,5*ns],[qc,15,15*ns],[qc,30,30*ns],[a,1,ua],[a,5,5*ua],[a,15,15*ua],[a,30,30*ua],[i,1,is],[i,3,3*is],[i,6,6*is],[i,12,12*is],[n,1,ms],[n,2,2*ms],[r,1,bS],[e,1,_P],[e,3,3*_P],[t,1,t_]];function l(f,d,p){const g=d<f;g&&([f,d]=[d,f]);const m=p&&typeof p.range=="function"?p:c(f,d,p),b=m?m.range(f,+d+1):[];return g?b.reverse():b}function c(f,d,p){const g=Math.abs(d-f)/p,m=sS(([,,E])=>E).right(o,g);if(m===o.length)return t.every(kw(f/t_,d/t_,p));if(m===0)return Iv.every(Math.max(kw(f,d,p),1));const[b,w]=o[g/o[m-1][2]<o[m][2]/g?m-1:m];return b.every(w)}return[l,c]}const[Sse,Cse]=T7(xs,CS,Ym,C7,AS,wS),[Tse,Ise]=T7(ys,SS,Xm,Yp,ES,_S);function r_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function n_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ih(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Ose(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,f=Oh(i),d=Rh(i),p=Oh(a),g=Rh(a),m=Oh(o),b=Rh(o),w=Oh(l),E=Rh(l),S=Oh(c),I=Rh(c),O={a:re,A:he,b:Ae,B:ke,c:null,d:TP,e:TP,f:Zse,g:lle,G:ule,H:Xse,I:Yse,j:Qse,L:I7,m:Jse,M:ele,p:G,q:ee,Q:RP,s:PP,S:tle,u:rle,U:nle,V:ile,w:ale,W:ole,x:null,X:null,y:sle,Y:cle,Z:fle,"%":OP},D={a:xe,A:we,b:Pe,B:Ge,c:null,d:IP,e:IP,f:gle,g:Sle,G:Tle,H:dle,I:hle,j:ple,L:R7,m:vle,M:mle,p:at,q:xr,Q:RP,s:PP,S:yle,u:xle,U:ble,V:_le,w:wle,W:Ele,x:null,X:null,y:Ale,Y:Cle,Z:Ile,"%":OP},k={a:U,A:z,b:H,B:j,c:ue,d:SP,e:SP,f:qse,g:AP,G:EP,H:CP,I:CP,j:zse,L:$se,m:Fse,M:Vse,p:L,q:Use,Q:Wse,s:Kse,S:Hse,u:Mse,U:kse,V:jse,w:Nse,W:Lse,x:ye,X,y:AP,Y:EP,Z:Bse,"%":Gse};O.x=B(r,O),O.X=B(n,O),O.c=B(e,O),D.x=B(r,D),D.X=B(n,D),D.c=B(e,D);function B(ge,He){return function(Qe){var pe=[],br=-1,tt=0,Hr=ge.length,_r,bi,Os;for(Qe instanceof Date||(Qe=new Date(+Qe));++br<Hr;)ge.charCodeAt(br)===37&&(pe.push(ge.slice(tt,br)),(bi=wP[_r=ge.charAt(++br)])!=null?_r=ge.charAt(++br):bi=_r==="e"?" ":"0",(Os=He[_r])&&(_r=Os(Qe,bi)),pe.push(_r),tt=br+1);return pe.push(ge.slice(tt,br)),pe.join("")}}function R(ge,He){return function(Qe){var pe=Ih(1900,void 0,1),br=N(pe,ge,Qe+="",0),tt,Hr;if(br!=Qe.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(He&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(tt=n_(Ih(pe.y,0,1)),Hr=tt.getUTCDay(),tt=Hr>4||Hr===0?Rv.ceil(tt):Rv(tt),tt=Km.offset(tt,(pe.V-1)*7),pe.y=tt.getUTCFullYear(),pe.m=tt.getUTCMonth(),pe.d=tt.getUTCDate()+(pe.w+6)%7):(tt=r_(Ih(pe.y,0,1)),Hr=tt.getDay(),tt=Hr>4||Hr===0?Ov.ceil(tt):Ov(tt),tt=Yp.offset(tt,(pe.V-1)*7),pe.y=tt.getFullYear(),pe.m=tt.getMonth(),pe.d=tt.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),Hr="Z"in pe?n_(Ih(pe.y,0,1)).getUTCDay():r_(Ih(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(Hr+5)%7:pe.w+pe.U*7-(Hr+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,n_(pe)):r_(pe)}}function N(ge,He,Qe,pe){for(var br=0,tt=He.length,Hr=Qe.length,_r,bi;br<tt;){if(pe>=Hr)return-1;if(_r=He.charCodeAt(br++),_r===37){if(_r=He.charAt(br++),bi=k[_r in wP?He.charAt(br++):_r],!bi||(pe=bi(ge,Qe,pe))<0)return-1}else if(_r!=Qe.charCodeAt(pe++))return-1}return pe}function L(ge,He,Qe){var pe=f.exec(He.slice(Qe));return pe?(ge.p=d.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function U(ge,He,Qe){var pe=m.exec(He.slice(Qe));return pe?(ge.w=b.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function z(ge,He,Qe){var pe=p.exec(He.slice(Qe));return pe?(ge.w=g.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function H(ge,He,Qe){var pe=S.exec(He.slice(Qe));return pe?(ge.m=I.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function j(ge,He,Qe){var pe=w.exec(He.slice(Qe));return pe?(ge.m=E.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function ue(ge,He,Qe){return N(ge,e,He,Qe)}function ye(ge,He,Qe){return N(ge,r,He,Qe)}function X(ge,He,Qe){return N(ge,n,He,Qe)}function re(ge){return o[ge.getDay()]}function he(ge){return a[ge.getDay()]}function Ae(ge){return c[ge.getMonth()]}function ke(ge){return l[ge.getMonth()]}function G(ge){return i[+(ge.getHours()>=12)]}function ee(ge){return 1+~~(ge.getMonth()/3)}function xe(ge){return o[ge.getUTCDay()]}function we(ge){return a[ge.getUTCDay()]}function Pe(ge){return c[ge.getUTCMonth()]}function Ge(ge){return l[ge.getUTCMonth()]}function at(ge){return i[+(ge.getUTCHours()>=12)]}function xr(ge){return 1+~~(ge.getUTCMonth()/3)}return{format:function(ge){var He=B(ge+="",O);return He.toString=function(){return ge},He},parse:function(ge){var He=R(ge+="",!1);return He.toString=function(){return ge},He},utcFormat:function(ge){var He=B(ge+="",D);return He.toString=function(){return ge},He},utcParse:function(ge){var He=R(ge+="",!0);return He.toString=function(){return ge},He}}}var wP={"-":"",_:" ",0:"0"},pn=/^\s*\d+/,Rse=/^%/,Pse=/[\\^$*+?|[\]().{}]/g;function bt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function Dse(t){return t.replace(Pse,"\\$&")}function Oh(t){return new RegExp("^(?:"+t.map(Dse).join("|")+")","i")}function Rh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Nse(t,e,r){var n=pn.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Mse(t,e,r){var n=pn.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function kse(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function jse(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Lse(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function EP(t,e,r){var n=pn.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function AP(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Bse(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Use(t,e,r){var n=pn.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Fse(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function SP(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function zse(t,e,r){var n=pn.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function CP(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Vse(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Hse(t,e,r){var n=pn.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function $se(t,e,r){var n=pn.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function qse(t,e,r){var n=pn.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Gse(t,e,r){var n=Rse.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Wse(t,e,r){var n=pn.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Kse(t,e,r){var n=pn.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function TP(t,e){return bt(t.getDate(),e,2)}function Xse(t,e){return bt(t.getHours(),e,2)}function Yse(t,e){return bt(t.getHours()%12||12,e,2)}function Qse(t,e){return bt(1+Yp.count(ys(t),t),e,3)}function I7(t,e){return bt(t.getMilliseconds(),e,3)}function Zse(t,e){return I7(t,e)+"000"}function Jse(t,e){return bt(t.getMonth()+1,e,2)}function ele(t,e){return bt(t.getMinutes(),e,2)}function tle(t,e){return bt(t.getSeconds(),e,2)}function rle(t){var e=t.getDay();return e===0?7:e}function nle(t,e){return bt(Xm.count(ys(t)-1,t),e,2)}function O7(t){var e=t.getDay();return e>=4||e===0?Vf(t):Vf.ceil(t)}function ile(t,e){return t=O7(t),bt(Vf.count(ys(t),t)+(ys(t).getDay()===4),e,2)}function ale(t){return t.getDay()}function ole(t,e){return bt(Ov.count(ys(t)-1,t),e,2)}function sle(t,e){return bt(t.getFullYear()%100,e,2)}function lle(t,e){return t=O7(t),bt(t.getFullYear()%100,e,2)}function cle(t,e){return bt(t.getFullYear()%1e4,e,4)}function ule(t,e){var r=t.getDay();return t=r>=4||r===0?Vf(t):Vf.ceil(t),bt(t.getFullYear()%1e4,e,4)}function fle(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+bt(e/60|0,"0",2)+bt(e%60,"0",2)}function IP(t,e){return bt(t.getUTCDate(),e,2)}function dle(t,e){return bt(t.getUTCHours(),e,2)}function hle(t,e){return bt(t.getUTCHours()%12||12,e,2)}function ple(t,e){return bt(1+Km.count(xs(t),t),e,3)}function R7(t,e){return bt(t.getUTCMilliseconds(),e,3)}function gle(t,e){return R7(t,e)+"000"}function vle(t,e){return bt(t.getUTCMonth()+1,e,2)}function mle(t,e){return bt(t.getUTCMinutes(),e,2)}function yle(t,e){return bt(t.getUTCSeconds(),e,2)}function xle(t){var e=t.getUTCDay();return e===0?7:e}function ble(t,e){return bt(Ym.count(xs(t)-1,t),e,2)}function P7(t){var e=t.getUTCDay();return e>=4||e===0?Hf(t):Hf.ceil(t)}function _le(t,e){return t=P7(t),bt(Hf.count(xs(t),t)+(xs(t).getUTCDay()===4),e,2)}function wle(t){return t.getUTCDay()}function Ele(t,e){return bt(Rv.count(xs(t)-1,t),e,2)}function Ale(t,e){return bt(t.getUTCFullYear()%100,e,2)}function Sle(t,e){return t=P7(t),bt(t.getUTCFullYear()%100,e,2)}function Cle(t,e){return bt(t.getUTCFullYear()%1e4,e,4)}function Tle(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Hf(t):Hf.ceil(t),bt(t.getUTCFullYear()%1e4,e,4)}function Ile(){return"+0000"}function OP(){return"%"}function RP(t){return+t}function PP(t){return Math.floor(+t/1e3)}var ff,D7,N7;Ole({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ole(t){return ff=Ose(t),D7=ff.format,ff.parse,N7=ff.utcFormat,ff.utcParse,ff}function Rle(t){return new Date(t)}function Ple(t){return t instanceof Date?+t:+new Date(+t)}function TS(t,e,r,n,i,a,o,l,c,f){var d=hS(),p=d.invert,g=d.domain,m=f(".%L"),b=f(":%S"),w=f("%I:%M"),E=f("%I %p"),S=f("%a %d"),I=f("%b %d"),O=f("%B"),D=f("%Y");function k(B){return(c(B)<B?m:l(B)<B?b:o(B)<B?w:a(B)<B?E:n(B)<B?i(B)<B?S:I:r(B)<B?O:D)(B)}return d.invert=function(B){return new Date(p(B))},d.domain=function(B){return arguments.length?g(Array.from(B,Ple)):g().map(Rle)},d.ticks=function(B){var R=g();return t(R[0],R[R.length-1],B??10)},d.tickFormat=function(B,R){return R==null?k:f(R)},d.nice=function(B){var R=g();return(!B||typeof B.range!="function")&&(B=e(R[0],R[R.length-1],B??10)),B?g(x7(R,B)):d},d.copy=function(){return Xp(d,TS(t,e,r,n,i,a,o,l,c,f))},d}function Dle(){return ya.apply(TS(Tse,Ise,ys,SS,Xm,Yp,ES,_S,qc,D7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Nle(){return ya.apply(TS(Sse,Cse,xs,CS,Ym,Km,AS,wS,qc,N7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qm(){var t=0,e=1,r,n,i,a,o=ni,l=!1,c;function f(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(a(p)-r)*i,l?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e]=p,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),f):[t,e]},f.clamp=function(p){return arguments.length?(l=!!p,f):l},f.interpolator=function(p){return arguments.length?(o=p,f):o};function d(p){return function(g){var m,b;return arguments.length?([m,b]=g,o=p(m,b),f):[o(0),o(1)]}}return f.range=d(ad),f.rangeRound=d(dS),f.unknown=function(p){return arguments.length?(c=p,f):c},function(p){return a=p,r=p(t),n=p(e),i=r===n?0:1/(n-r),f}}function tc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function M7(){var t=ec(Qm()(ni));return t.copy=function(){return tc(t,M7())},Ss.apply(t,arguments)}function k7(){var t=vS(Qm()).domain([1,10]);return t.copy=function(){return tc(t,k7()).base(t.base())},Ss.apply(t,arguments)}function j7(){var t=mS(Qm());return t.copy=function(){return tc(t,j7()).constant(t.constant())},Ss.apply(t,arguments)}function IS(){var t=yS(Qm());return t.copy=function(){return tc(t,IS()).exponent(t.exponent())},Ss.apply(t,arguments)}function Mle(){return IS.apply(null,arguments).exponent(.5)}function L7(){var t=[],e=ni;function r(n){if(n!=null&&!isNaN(n=+n))return e((Wp(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Pl),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>xoe(t,a/n))},r.copy=function(){return L7(e).domain(t)},Ss.apply(r,arguments)}function Zm(){var t=0,e=.5,r=1,n=1,i,a,o,l,c,f=ni,d,p=!1,g;function m(w){return isNaN(w=+w)?g:(w=.5+((w=+d(w))-a)*(n*w<n*a?l:c),f(p?Math.max(0,Math.min(1,w)):w))}m.domain=function(w){return arguments.length?([t,e,r]=w,i=d(t=+t),a=d(e=+e),o=d(r=+r),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),n=a<i?-1:1,m):[t,e,r]},m.clamp=function(w){return arguments.length?(p=!!w,m):p},m.interpolator=function(w){return arguments.length?(f=w,m):f};function b(w){return function(E){var S,I,O;return arguments.length?([S,I,O]=E,f=Goe(w,[S,I,O]),m):[f(0),f(.5),f(1)]}}return m.range=b(ad),m.rangeRound=b(dS),m.unknown=function(w){return arguments.length?(g=w,m):g},function(w){return d=w,i=w(t),a=w(e),o=w(r),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),n=a<i?-1:1,m}}function B7(){var t=ec(Zm()(ni));return t.copy=function(){return tc(t,B7())},Ss.apply(t,arguments)}function U7(){var t=vS(Zm()).domain([.1,1,10]);return t.copy=function(){return tc(t,U7()).base(t.base())},Ss.apply(t,arguments)}function F7(){var t=mS(Zm());return t.copy=function(){return tc(t,F7()).constant(t.constant())},Ss.apply(t,arguments)}function OS(){var t=yS(Zm());return t.copy=function(){return tc(t,OS()).exponent(t.exponent())},Ss.apply(t,arguments)}function kle(){return OS.apply(null,arguments).exponent(.5)}const Hh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cS,scaleDiverging:B7,scaleDivergingLog:U7,scaleDivergingPow:OS,scaleDivergingSqrt:kle,scaleDivergingSymlog:F7,scaleIdentity:y7,scaleImplicit:jw,scaleLinear:m7,scaleLog:b7,scaleOrdinal:lS,scalePoint:woe,scalePow:xS,scaleQuantile:E7,scaleQuantize:A7,scaleRadial:w7,scaleSequential:M7,scaleSequentialLog:k7,scaleSequentialPow:IS,scaleSequentialQuantile:L7,scaleSequentialSqrt:Mle,scaleSequentialSymlog:j7,scaleSqrt:gse,scaleSymlog:_7,scaleThreshold:S7,scaleTime:Dle,scaleUtc:Nle,tickFormat:v7},Symbol.toStringTag,{value:"Module"}));var rc=t=>t.chartData,RS=ne([rc],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),Jm=(t,e,r,n)=>n?RS(t):rc(t);function $f(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(zi(e)&&zi(r))return!0}return!1}function DP(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function jle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,a;if(zi(r))i=r;else if(typeof r=="function")return;if(zi(n))a=n;else if(typeof n=="function")return;var o=[i,a];if($f(o))return o}}function Lle(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if($f(n))return DP(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,o,l;if(i==="auto")e!=null&&(o=Math.min(...e));else if(De(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&wR.test(i)){var c=wR.exec(i);if(c==null||e==null)o=void 0;else{var f=+c[1];o=e[0]-f}}else o=e?.[0];if(a==="auto")e!=null&&(l=Math.max(...e));else if(De(a))l=a;else if(typeof a=="function")try{e!=null&&(l=a(e?.[1]))}catch{}else if(typeof a=="string"&&ER.test(a)){var d=ER.exec(a);if(d==null||e==null)l=void 0;else{var p=+d[1];l=e[1]+p}}else l=e?.[1];var g=[o,l];if($f(g))return e==null?g:DP(g,e,r)}}}var od=1e9,Ble={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},DS,sr=!0,ma="[DecimalError] ",eu=ma+"Invalid argument: ",PS=ma+"Exponent out of range: ",sd=Math.floor,Uc=Math.pow,Ule=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mi,un=1e7,tr=7,z7=9007199254740991,Pv=sd(z7/tr),Ce={};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ce.comparedTo=Ce.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*tr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(t){return ls(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.idiv=function(t){var e=this,r=e.constructor;return qt(ls(e,new r(t),0,1),r.precision)};Ce.equals=Ce.eq=function(t){return!this.cmp(t)};Ce.exponent=function(){return Vr(this)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){return this.cmp(t)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Mi))throw Error(ma+"NaN");if(r.s<1)throw Error(ma+(r.s?"NaN":"-Infinity"));return r.eq(Mi)?new n(0):(sr=!1,e=ls(bp(r,a),bp(t,a),a),sr=!0,qt(e,i))};Ce.minus=Ce.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?$7(e,t):V7(e,(t.s=-t.s,t))};Ce.modulo=Ce.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(ma+"NaN");return r.s?(sr=!1,e=ls(r,t,0,1).times(t),sr=!0,r.minus(e)):qt(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return H7(this)};Ce.naturalLogarithm=Ce.ln=function(){return bp(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ce.plus=Ce.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?V7(e,t):$7(e,(t.s=-t.s,t))};Ce.precision=Ce.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(eu+t);if(e=Vr(i)+1,n=i.d.length-1,r=n*tr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ce.squareRoot=Ce.sqrt=function(){var t,e,r,n,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ma+"NaN")}for(t=Vr(l),sr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=go(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=sd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(i.toString()),r=c.precision,i=o=r+3;;)if(a=n,n=a.plus(ls(l,a,o+2)).times(.5),go(a.d).slice(0,o)===(e=go(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(qt(a,r+1,0),a.times(a).eq(l)){n=a;break}}else if(e!="9999")break;o+=4}return sr=!0,qt(n,r)};Ce.times=Ce.mul=function(t){var e,r,n,i,a,o,l,c,f,d=this,p=d.constructor,g=d.d,m=(t=new p(t)).d;if(!d.s||!t.s)return new p(0);for(t.s*=d.s,r=d.e+t.e,c=g.length,f=m.length,c<f&&(a=g,g=m,m=a,o=c,c=f,f=o),a=[],o=c+f,n=o;n--;)a.push(0);for(n=f;--n>=0;){for(e=0,i=c+n;i>n;)l=a[i]+m[n]*g[i-n-1]+e,a[i--]=l%un|0,e=l/un|0;a[i]=(a[i]+e)%un|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,sr?qt(t,p.precision):t};Ce.toDecimalPlaces=Ce.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Co(t,0,od),e===void 0?e=n.rounding:Co(e,0,8),qt(r,t+Vr(r)+1,e))};Ce.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=uu(n,!0):(Co(t,0,od),e===void 0?e=i.rounding:Co(e,0,8),n=qt(new i(n),t+1,e),r=uu(n,!0,t+1)),r};Ce.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?uu(i):(Co(t,0,od),e===void 0?e=a.rounding:Co(e,0,8),n=qt(new a(i),t+Vr(i)+1,e),r=uu(n.abs(),!1,t+Vr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var t=this,e=t.constructor;return qt(new e(t),Vr(t)+1,e.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(t){var e,r,n,i,a,o,l=this,c=l.constructor,f=12,d=+(t=new c(t));if(!t.s)return new c(Mi);if(l=new c(l),!l.s){if(t.s<1)throw Error(ma+"Infinity");return l}if(l.eq(Mi))return l;if(n=c.precision,t.eq(Mi))return qt(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=l.s,o){if((r=d<0?-d:d)<=z7){for(i=new c(Mi),e=Math.ceil(n/tr+4),sr=!1;r%2&&(i=i.times(l),MP(i.d,e)),r=sd(r/2),r!==0;)l=l.times(l),MP(l.d,e);return sr=!0,t.s<0?new c(Mi).div(i):qt(i,n)}}else if(a<0)throw Error(ma+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,sr=!1,i=t.times(bp(l,n+f)),sr=!0,i=H7(i),i.s=a,i};Ce.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Vr(i),n=uu(i,r<=a.toExpNeg||r>=a.toExpPos)):(Co(t,1,od),e===void 0?e=a.rounding:Co(e,0,8),i=qt(new a(i),t,e),r=Vr(i),n=uu(i,t<=r||r<=a.toExpNeg,t)),n};Ce.toSignificantDigits=Ce.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Co(t,1,od),e===void 0?e=n.rounding:Co(e,0,8)),qt(new n(r),t,e)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Vr(t),r=t.constructor;return uu(t,e<=r.toExpNeg||e>=r.toExpPos)};function V7(t,e){var r,n,i,a,o,l,c,f,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),sr?qt(e,p):e;if(c=t.d,f=e.d,o=t.e,i=e.e,c=c.slice(),a=o-i,a){for(a<0?(n=c,a=-a,l=f.length):(n=f,i=o,l=c.length),o=Math.ceil(p/tr),l=o>l?o+1:l+1,a>l&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(l=c.length,a=f.length,l-a<0&&(a=l,n=f,f=c,c=n),r=0;a;)r=(c[--a]=c[a]+f[a]+r)/un|0,c[a]%=un;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,sr?qt(e,p):e}function Co(t,e,r){if(t!==~~t||t<e||t>r)throw Error(eu+t)}function go(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=tr-n.length,r&&(a+=gl(r)),a+=n;o=t[e],n=o+"",r=tr-n.length,r&&(a+=gl(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ls=(function(){function t(n,i){var a,o=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+o,n[l]=a%un|0,o=a/un|0;return o&&n.unshift(o),n}function e(n,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*un+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var l,c,f,d,p,g,m,b,w,E,S,I,O,D,k,B,R,N,L=n.constructor,U=n.s==i.s?1:-1,z=n.d,H=i.d;if(!n.s)return new L(n);if(!i.s)throw Error(ma+"Division by zero");for(c=n.e-i.e,R=H.length,k=z.length,m=new L(U),b=m.d=[],f=0;H[f]==(z[f]||0);)++f;if(H[f]>(z[f]||0)&&--c,a==null?I=a=L.precision:o?I=a+(Vr(n)-Vr(i))+1:I=a,I<0)return new L(0);if(I=I/tr+2|0,f=0,R==1)for(d=0,H=H[0],I++;(f<k||d)&&I--;f++)O=d*un+(z[f]||0),b[f]=O/H|0,d=O%H|0;else{for(d=un/(H[0]+1)|0,d>1&&(H=t(H,d),z=t(z,d),R=H.length,k=z.length),D=R,w=z.slice(0,R),E=w.length;E<R;)w[E++]=0;N=H.slice(),N.unshift(0),B=H[0],H[1]>=un/2&&++B;do d=0,l=e(H,w,R,E),l<0?(S=w[0],R!=E&&(S=S*un+(w[1]||0)),d=S/B|0,d>1?(d>=un&&(d=un-1),p=t(H,d),g=p.length,E=w.length,l=e(p,w,g,E),l==1&&(d--,r(p,R<g?N:H,g))):(d==0&&(l=d=1),p=H.slice()),g=p.length,g<E&&p.unshift(0),r(w,p,E),l==-1&&(E=w.length,l=e(H,w,R,E),l<1&&(d++,r(w,R<E?N:H,E))),E=w.length):l===0&&(d++,w=[0]),b[f++]=d,l&&w[0]?w[E++]=z[D]||0:(w=[z[D]],E=1);while((D++<k||w[0]!==void 0)&&I--)}return b[0]||b.shift(),m.e=c,qt(m,o?a+Vr(m)+1:a)}})();function H7(t,e){var r,n,i,a,o,l,c=0,f=0,d=t.constructor,p=d.precision;if(Vr(t)>16)throw Error(PS+Vr(t));if(!t.s)return new d(Mi);for(sr=!1,l=p,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),f+=5;for(n=Math.log(Uc(2,f))/Math.LN10*2+5|0,l+=n,r=i=a=new d(Mi),d.precision=l;;){if(i=qt(i.times(t),l),r=r.times(++c),o=a.plus(ls(i,r,l)),go(o.d).slice(0,l)===go(a.d).slice(0,l)){for(;f--;)a=qt(a.times(a),l);return d.precision=p,e==null?(sr=!0,qt(a,p)):a}a=o}}function Vr(t){for(var e=t.e*tr,r=t.d[0];r>=10;r/=10)e++;return e}function i_(t,e,r){if(e>t.LN10.sd())throw sr=!0,r&&(t.precision=r),Error(ma+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function gl(t){for(var e="";t--;)e+="0";return e}function bp(t,e){var r,n,i,a,o,l,c,f,d,p=1,g=10,m=t,b=m.d,w=m.constructor,E=w.precision;if(m.s<1)throw Error(ma+(m.s?"NaN":"-Infinity"));if(m.eq(Mi))return new w(0);if(e==null?(sr=!1,f=E):f=e,m.eq(10))return e==null&&(sr=!0),i_(w,f);if(f+=g,w.precision=f,r=go(b),n=r.charAt(0),a=Vr(m),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=go(m.d),n=r.charAt(0),p++;a=Vr(m),n>1?(m=new w("0."+r),a++):m=new w(n+"."+r.slice(1))}else return c=i_(w,f+2,E).times(a+""),m=bp(new w(n+"."+r.slice(1)),f-g).plus(c),w.precision=E,e==null?(sr=!0,qt(m,E)):m;for(l=o=m=ls(m.minus(Mi),m.plus(Mi),f),d=qt(m.times(m),f),i=3;;){if(o=qt(o.times(d),f),c=l.plus(ls(o,new w(i),f)),go(c.d).slice(0,f)===go(l.d).slice(0,f))return l=l.times(2),a!==0&&(l=l.plus(i_(w,f+2,E).times(a+""))),l=ls(l,new w(p),f),w.precision=E,e==null?(sr=!0,qt(l,E)):l;l=c,i+=2}}function NP(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=sd(r/tr),t.d=[],n=(r+1)%tr,r<0&&(n+=tr),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=tr;n<i;)t.d.push(+e.slice(n,n+=tr));e=e.slice(n),n=tr-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),sr&&(t.e>Pv||t.e<-Pv))throw Error(PS+r)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,r){var n,i,a,o,l,c,f,d,p=t.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=tr,i=e,f=p[d=0];else{if(d=Math.ceil((n+1)/tr),a=p.length,d>=a)return t;for(f=a=p[d],o=1;a>=10;a/=10)o++;n%=tr,i=n-tr+o}if(r!==void 0&&(a=Uc(10,o-i-1),l=f/a%10|0,c=e<0||p[d+1]!==void 0||f%a,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?f/Uc(10,o-i):0:p[d-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return c?(a=Vr(t),p.length=1,e=e-a-1,p[0]=Uc(10,(tr-e%tr)%tr),t.e=sd(-e/tr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=d,a=1,d--):(p.length=d+1,a=Uc(10,tr-n),p[d]=i>0?(f/Uc(10,o-i)%Uc(10,i)|0)*a:0),c)for(;;)if(d==0){(p[0]+=a)==un&&(p[0]=1,++t.e);break}else{if(p[d]+=a,p[d]!=un)break;p[d--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(sr&&(t.e>Pv||t.e<-Pv))throw Error(PS+Vr(t));return t}function $7(t,e){var r,n,i,a,o,l,c,f,d,p,g=t.constructor,m=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),sr?qt(e,m):e;if(c=t.d,p=e.d,n=e.e,f=t.e,c=c.slice(),o=f-n,o){for(d=o<0,d?(r=c,o=-o,l=p.length):(r=p,n=f,l=c.length),i=Math.max(Math.ceil(m/tr),l)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=p.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){d=c[i]<p[i];break}o=0}for(d&&(r=c,c=p,p=r,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(a=i;a&&c[--a]===0;)c[a]=un-1;--c[a],c[i]+=un}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,sr?qt(e,m):e):new g(0)}function uu(t,e,r){var n,i=Vr(t),a=go(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+gl(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+gl(-i-1)+a,r&&(n=r-o)>0&&(a+=gl(n))):i>=o?(a+=gl(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+gl(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=gl(n))),t.s<0?"-"+a:a}function MP(t,e){if(t.length>e)return t.length=e,!0}function q7(t){var e,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(eu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return NP(o,a.toString())}else if(typeof a!="string")throw Error(eu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Ule.test(a))NP(o,a);else throw Error(eu+a)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=q7,i.config=i.set=Fle,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Fle(t){if(!t||typeof t!="object")throw Error(ma+"Object expected");var e,r,n,i=["precision",1,od,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(sd(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(eu+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(eu+r+": "+n);return this}var DS=q7(Ble);Mi=new DS(1);const kt=DS;var zle=t=>t,G7={},W7=t=>t===G7,kP=t=>function e(){return arguments.length===0||arguments.length===1&&W7(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},K7=(t,e)=>t===1?e:kP(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(o=>o!==G7).length;return a>=t?e(...n):K7(t-a,kP(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var f=n.map(d=>W7(d)?l.shift():d);return e(...f,...l)}))}),ey=t=>K7(t.length,t),Fw=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},Vle=ey((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),Hle=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return zle;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((l,c)=>c(l),a(...arguments))}},zw=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),X7=t=>{var e=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e&&i.every((o,l)=>{var c;return o===((c=e)===null||c===void 0?void 0:c[l])})||(e=i,r=t(...i)),r}};function Y7(t){var e;return t===0?e=1:e=Math.floor(new kt(t).abs().log(10).toNumber())+1,e}function Q7(t,e,r){for(var n=new kt(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}ey((t,e,r)=>{var n=+t,i=+e;return n+r*(i-n)});ey((t,e,r)=>{var n=e-+t;return n=n||1/0,(r-t)/n});ey((t,e,r)=>{var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});var Z7=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},J7=(t,e,r)=>{if(t.lte(0))return new kt(0);var n=Y7(t.toNumber()),i=new kt(10).pow(n),a=t.div(i),o=n!==1?.05:.1,l=new kt(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=l.mul(i);return e?new kt(c.toNumber()):new kt(Math.ceil(c.toNumber()))},$le=(t,e,r)=>{var n=new kt(1),i=new kt(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new kt(10).pow(Y7(t)-1),i=new kt(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new kt(Math.floor(t)))}else t===0?i=new kt(Math.floor((e-1)/2)):r||(i=new kt(Math.floor(t)));var o=Math.floor((e-1)/2),l=Hle(Vle(c=>i.add(new kt(c-o).mul(n)).toNumber()),Fw);return l(0,e)},ej=function(e,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new kt(0),tickMin:new kt(0),tickMax:new kt(0)};var o=J7(new kt(r).sub(e).div(n-1),i,a),l;e<=0&&r>=0?l=new kt(0):(l=new kt(e).add(r).div(2),l=l.sub(new kt(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),f=Math.ceil(new kt(r).sub(l).div(o).toNumber()),d=c+f+1;return d>n?ej(e,r,n,i,a+1):(d<n&&(f=r>0?f+(n-d):f,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new kt(c).mul(o)),tickMax:l.add(new kt(f).mul(o))})};function qle(t){var[e,r]=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[o,l]=Z7([e,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...Fw(0,n-1).map(()=>1/0)]:[...Fw(0,n-1).map(()=>-1/0),l];return e>r?zw(c):c}if(o===l)return $le(o,n,i);var{step:f,tickMin:d,tickMax:p}=ej(o,l,a,i,0),g=Q7(d,p.add(new kt(.1).mul(f)),f);return e>r?zw(g):g}function Gle(t,e){var[r,n]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=Z7([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var l=Math.max(e,2),c=J7(new kt(o).sub(a).div(l-1),i,0),f=[...Q7(new kt(a),new kt(o),c),o];return i===!1&&(f=f.map(d=>Math.round(d))),r>n?zw(f):f}var Wle=X7(qle),Kle=X7(Gle),tj=t=>t.rootProps.maxBarSize,Xle=t=>t.rootProps.barGap,rj=t=>t.rootProps.barCategoryGap,Yle=t=>t.rootProps.barSize,Qp=t=>t.rootProps.stackOffset,NS=t=>t.options.chartName,MS=t=>t.rootProps.syncId,nj=t=>t.rootProps.syncMethod,kS=t=>t.options.eventEmitter,Jo={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Di={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ty=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Qle={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Jo.angleAxisId,includeHidden:!1,name:void 0,reversed:Jo.reversed,scale:Jo.scale,tick:Jo.tick,tickCount:void 0,ticks:void 0,type:Jo.type,unit:void 0},Zle={allowDataOverflow:Di.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Di.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Di.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Di.scale,tick:Di.tick,tickCount:Di.tickCount,ticks:void 0,type:Di.type,unit:void 0},Jle={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Jo.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jo.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jo.scale,tick:Jo.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},ece={allowDataOverflow:Di.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Di.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Di.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Di.scale,tick:Di.tick,tickCount:Di.tickCount,ticks:void 0,type:"category",unit:void 0},jS=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Jle:Qle,LS=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?ece:Zle,ry=t=>t.polarOptions,BS=ne([Es,As,en],F9),ij=ne([ry,BS],(t,e)=>{if(t!=null)return $n(t.innerRadius,e,0)}),aj=ne([ry,BS],(t,e)=>{if(t!=null)return $n(t.outerRadius,e,e*.8)}),tce=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},oj=ne([ry],tce);ne([jS,oj],ty);var sj=ne([BS,ij,aj],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});ne([LS,sj],ty);var lj=ne([pt,ry,ij,aj,Es,As],(t,e,r,n,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:f}=e;return{cx:$n(o,i,i/2),cy:$n(l,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:f,clockWise:!1}}}),cr=(t,e)=>e,Zp=(t,e,r)=>r;function US(t){return t?.id}var rn=t=>{var e=pt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},ld=t=>t.tooltip.settings.axisId,gn=t=>{var e=rn(t),r=ld(t);return Jp(t,e,r)},cj=ne([gn],t=>t?.dataKey);function uj(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=r,o=new Map;return t.forEach(l=>{var c,f=(c=l.data)!==null&&c!==void 0?c:n;if(!(f==null||f.length===0)){var d=US(l);f.forEach((p,g)=>{var m=a==null||i?g:String(Yt(p,a,null)),b=Yt(p,l.dataKey,0),w;o.has(m)?w=o.get(m):w={},Object.assign(w,{[d]:b}),o.set(m,w)})}}),Array.from(o.values())}function ny(t){return t.stackId!=null&&t.dataKey!=null}function jP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(r),!0).forEach(function(n){rce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rce(t,e,r){return(e=nce(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nce(t){var e=ice(t,"string");return typeof e=="symbol"?e:e+""}function ice(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vw=[0,"auto"],Ri={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},fj=(t,e)=>t.cartesianAxis.xAxis[e],Cs=(t,e)=>{var r=fj(t,e);return r??Ri},Pi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Vw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:$p},dj=(t,e)=>t.cartesianAxis.yAxis[e],Ts=(t,e)=>{var r=dj(t,e);return r??Pi},ace={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},FS=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??ace},Ir=(t,e,r)=>{switch(e){case"xAxis":return Cs(t,r);case"yAxis":return Ts(t,r);case"zAxis":return FS(t,r);case"angleAxis":return jS(t,r);case"radiusAxis":return LS(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},oce=(t,e,r)=>{switch(e){case"xAxis":return Cs(t,r);case"yAxis":return Ts(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Jp=(t,e,r)=>{switch(e){case"xAxis":return Cs(t,r);case"yAxis":return Ts(t,r);case"angleAxis":return jS(t,r);case"radiusAxis":return LS(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},hj=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function zS(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var iy=t=>t.graphicalItems.cartesianItems,sce=ne([cr,Zp],zS),VS=(t,e,r)=>t.filter(r).filter(n=>e?.includeHidden===!0?!0:!n.hide),e0=ne([iy,Ir,sce],VS),pj=ne([e0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(ny)),gj=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),vj=ne([e0],gj),HS=t=>t.map(e=>e.data).filter(Boolean).flat(1),lce=ne([e0],HS),$S=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},qS=ne([lce,Jm],$S),GS=(t,e,r)=>e?.dataKey!=null?t.map(n=>({value:Yt(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:Yt(i,n)}))):t.map(n=>({value:n})),ay=ne([qS,Ir,e0],GS);function mj(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function bu(t){return t.filter(e=>So(e)||e instanceof Date).map(Number).filter(e=>Ui(e)===!1)}function cce(t,e,r){return!r||typeof e!="number"||Ui(e)?[]:r.length?bu(r.flatMap(n=>{var i=Yt(t,n.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!zi(a)||!zi(o)))return[e-a,e+o]})):[]}var uce=ne([pj,Jm,gn],uj),yj=(t,e,r)=>{var n={},i=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),n);return Object.fromEntries(Object.entries(i).map(a=>{var[o,l]=a,c=l.map(US);return[o,{stackedData:pie(t,c,r),graphicalItems:l}]}))},Hw=ne([uce,pj,Qp],yj),xj=(t,e,r)=>{var{dataStartIndex:n,dataEndIndex:i}=e;if(r!=="zAxis"){var a=xie(t,n,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},fce=ne([Hw,rc,cr],xj),bj=(t,e,r,n,i)=>r.length>0?t.flatMap(a=>r.flatMap(o=>{var l,c,f=(l=n[o.id])===null||l===void 0?void 0:l.filter(p=>mj(i,p)),d=Yt(a,(c=e.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:cce(a,d,f)}})).filter(Boolean):e?.dataKey!=null?t.map(a=>({value:Yt(a,e.dataKey),errorDomain:[]})):t.map(a=>({value:a,errorDomain:[]})),oy=t=>t.errorBars,_j=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>mj(r,n));ne([vj,oy,cr],_j);var dce=ne([qS,Ir,vj,oy,cr],bj);function hce(t){var{value:e}=t;if(So(e)||e instanceof Date)return e}var LP=t=>{var e=t.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=bu(e);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},pce=(t,e,r)=>{var n=t.map(hce).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&Dk(n))?o7(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},WS=t=>{var e;if(t==null||!("domain"in t))return Vw;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=bu(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:Vw},Nv=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),l=Math.max(...a);return[o,l]}},wj=t=>t.referenceElements.dots,cd=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),gce=ne([wj,cr,Zp],cd),Ej=t=>t.referenceElements.areas,vce=ne([Ej,cr,Zp],cd),Aj=t=>t.referenceElements.lines,mce=ne([Aj,cr,Zp],cd),Sj=(t,e)=>{var r=bu(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yce=ne(gce,cr,Sj),Cj=(t,e)=>{var r=bu(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},xce=ne([vce,cr],Cj),Tj=(t,e)=>{var r=bu(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},bce=ne(mce,cr,Tj),_ce=ne(yce,bce,xce,(t,e,r)=>Nv(t,r,e)),Ij=ne([Ir],WS),KS=(t,e,r,n,i,a,o)=>{var l=jle(e,t.allowDataOverflow);if(l!=null)return l;var c=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",f=c?Nv(r,i,LP(n)):Nv(i,LP(n));return Lle(e,f,t.allowDataOverflow)},wce=ne([Ir,Ij,fce,dce,_ce,pt,cr],KS),Ece=[0,1],XS=(t,e,r,n,i,a,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,f=Zl(e,a);return f&&l==null?o7(0,r.length):c==="category"?pce(n,t,f):i==="expand"?Ece:o}},YS=ne([Ir,pt,qS,ay,Qp,cr,wce],XS),Oj=(t,e,r,n,i)=>{if(t!=null){var{scale:a,type:o}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(Fp(a));return l in Hh?l:"point"}}},ud=ne([Ir,pt,hj,NS,cr],Oj);function Ace(t){if(t!=null){if(t in Hh)return Hh[t]();var e="scale".concat(Fp(t));if(e in Hh)return Hh[e]()}}function QS(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=Ace(e);if(i!=null){var a=i.domain(r).range(n);return cie(a),a}}}var ZS=(t,e,r)=>{var n=WS(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&$f(t))return Wle(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&$f(t))return Kle(t,e.tickCount,e.allowDecimals)}},JS=ne([YS,Jp,ud],ZS),eC=(t,e,r,n)=>{if(n!=="angleAxis"&&t?.type==="number"&&$f(e)&&Array.isArray(r)&&r.length>0){var i=e[0],a=r[0],o=e[1],l=r[r.length-1];return[Math.min(i,a),Math.max(o,l)]}return e},Sce=ne([Ir,YS,JS,cr],eC),Cce=ne(ay,Ir,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(bu(t.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var o=n[a+1]-n[a];r=Math.min(r,o)}return r/i}}),Rj=ne(Cce,pt,rj,en,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!zi(t))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var o=$n(r,t*a),l=t*a/2;return l-o-(l-o)/a*o}return 0}),Tce=(t,e)=>{var r=Cs(t,e);return r==null||typeof r.padding!="string"?0:Rj(t,"xAxis",e,r.padding)},Ice=(t,e)=>{var r=Ts(t,e);return r==null||typeof r.padding!="string"?0:Rj(t,"yAxis",e,r.padding)},Oce=ne(Cs,Tce,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),Rce=ne(Ts,Ice,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),Pce=ne([en,Oce,$m,Hm,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),Dce=ne([en,pt,Rce,$m,Hm,(t,e,r)=>r],(t,e,r,n,i,a)=>{var{padding:o}=i;return a?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),t0=(t,e,r,n)=>{var i;switch(e){case"xAxis":return Pce(t,r,n);case"yAxis":return Dce(t,r,n);case"zAxis":return(i=FS(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return oj(t);case"radiusAxis":return sj(t,r);default:return}},Pj=ne([Ir,t0],ty),fd=ne([Ir,ud,Sce,Pj],QS);ne([e0,oy,cr],_j);function Dj(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var sy=(t,e)=>e,ly=(t,e,r)=>r,Nce=ne(zm,sy,ly,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Dj)),Mce=ne(Vm,sy,ly,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Dj)),Nj=(t,e)=>({width:t.width,height:e.height}),kce=(t,e)=>{var r=typeof e.width=="number"?e.width:$p;return{width:r,height:t.height}},Mj=ne(en,Cs,Nj),jce=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Lce=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},Bce=ne(As,en,Nce,sy,ly,(t,e,r,n,i)=>{var a={},o;return r.forEach(l=>{var c=Nj(e,l);o==null&&(o=jce(e,n,t));var f=n==="top"&&!i||n==="bottom"&&i;a[l.id]=o-Number(f)*c.height,o+=(f?-1:1)*c.height}),a}),Uce=ne(Es,en,Mce,sy,ly,(t,e,r,n,i)=>{var a={},o;return r.forEach(l=>{var c=kce(e,l);o==null&&(o=Lce(e,n,t));var f=n==="left"&&!i||n==="right"&&i;a[l.id]=o-Number(f)*c.width,o+=(f?-1:1)*c.width}),a}),Fce=(t,e)=>{var r=Cs(t,e);if(r!=null)return Bce(t,r.orientation,r.mirror)},zce=ne([en,Cs,Fce,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Vce=(t,e)=>{var r=Ts(t,e);if(r!=null)return Uce(t,r.orientation,r.mirror)},Hce=ne([en,Ts,Vce,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),kj=ne(en,Ts,(t,e)=>{var r=typeof e.width=="number"?e.width:$p;return{width:r,height:t.height}}),BP=(t,e,r)=>{switch(e){case"xAxis":return Mj(t,r).width;case"yAxis":return kj(t,r).height;default:return}},jj=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=r,l=Zl(t,n),c=e.map(f=>f.value);if(o&&l&&a==="category"&&i&&Dk(c))return c}},tC=ne([pt,ay,Ir,cr],jj),Lj=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,o=Zl(t,n);if(o&&(i==="number"||a!=="auto"))return e.map(l=>l.value)}},rC=ne([pt,ay,Jp,cr],Lj),UP=ne([pt,oce,ud,fd,tC,rC,t0,JS,cr],(t,e,r,n,i,a,o,l,c)=>{if(e==null)return null;var f=Zl(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:f,niceTicks:l,range:o,realScaleType:r,scale:n}}),$ce=(t,e,r,n,i,a,o,l,c)=>{if(!(e==null||n==null)){var f=Zl(t,c),{type:d,ticks:p,tickCount:g}=e,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=d==="category"&&n.bandwidth?n.bandwidth()/m:0;b=c==="angleAxis"&&a!=null&&a.length>=2?hn(a[0]-a[1])*2*b:b;var w=p||i;if(w){var E=w.map((S,I)=>{var O=o?o.indexOf(S):S;return{index:I,coordinate:n(O)+b,value:S,offset:b}});return E.filter(S=>!Ui(S.coordinate))}return f&&l?l.map((S,I)=>({coordinate:n(S)+b,value:S,index:I,offset:b})):n.ticks?n.ticks(g).map(S=>({coordinate:n(S)+b,value:S,offset:b})):n.domain().map((S,I)=>({coordinate:n(S)+b,value:o?o[S]:S,index:I,offset:b}))}},Bj=ne([pt,Jp,ud,fd,JS,t0,tC,rC,cr],$ce),qce=(t,e,r,n,i,a,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=Zl(t,o),{tickCount:c}=e,f=0;return f=o==="angleAxis"&&n?.length>=2?hn(n[0]-n[1])*2*f:f,l&&a?a.map((d,p)=>({coordinate:r(d)+f,value:d,index:p,offset:f})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+f,value:d,offset:f})):r.domain().map((d,p)=>({coordinate:r(d)+f,value:i?i[d]:d,index:p,offset:f}))}},Vl=ne([pt,Jp,fd,t0,tC,rC,cr],qce),Hl=ne(Ir,fd,(t,e)=>{if(!(t==null||e==null))return Dv(Dv({},t),{},{scale:e})}),Gce=ne([Ir,ud,YS,Pj],QS);ne((t,e,r)=>FS(t,r),Gce,(t,e)=>{if(!(t==null||e==null))return Dv(Dv({},t),{},{scale:e})});var Wce=ne([pt,zm,Vm],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Uj=t=>t.options.defaultTooltipEventType,Fj=t=>t.options.validateTooltipEventTypes;function zj(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function nC(t,e){var r=Uj(t),n=Fj(t);return zj(e,r,n)}function Kce(t){return Oe(e=>nC(e,t))}var Vj=(t,e)=>{var r,n=Number(e);if(!(Ui(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},Xce=t=>t.tooltip.settings,_l={active:!1,index:null,dataKey:void 0,coordinate:void 0},Yce={itemInteraction:{click:_l,hover:_l},axisInteraction:{click:_l,hover:_l},keyboardInteraction:_l,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Hj=Vi({name:"tooltip",initialState:Yce,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var r=ss(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Qce,removeTooltipEntrySettings:Zce,setTooltipSettingsState:Jce,setActiveMouseOverItemIndex:$j,mouseLeaveItem:eue,mouseLeaveChart:qj,setActiveClickItemIndex:tue,setMouseOverAxisIndex:Gj,setMouseClickAxisIndex:rue,setSyncInteraction:$w,setKeyboardInteraction:qw}=Hj.actions,nue=Hj.reducer;function FP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function u1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(r),!0).forEach(function(n){iue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iue(t,e,r){return(e=aue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aue(t){var e=oue(t,"string");return typeof e=="symbol"?e:e+""}function oue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sue(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function lue(t){return t.index!=null}var Wj=(t,e,r,n)=>{if(e==null)return _l;var i=sue(t,e,r);if(i==null)return _l;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(lue(i)){if(a)return u1(u1({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return u1(u1({},_l),{},{coordinate:i.coordinate})},iC=(t,e)=>{var r=t?.index;if(r==null)return null;var n=Number(r);if(!zi(n))return r;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(n,a)))},Kj=(t,e,r,n,i,a,o,l)=>{if(!(a==null||l==null)){var c=o[0],f=c==null?void 0:l(c.positions,a);if(f!=null)return f;var d=i?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},Xj=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},r0=t=>t.options.tooltipPayloadSearcher,dd=t=>t.tooltip;function zP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function VP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(r),!0).forEach(function(n){cue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cue(t,e,r){return(e=uue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uue(t){var e=fue(t,"string");return typeof e=="symbol"?e:e+""}function fue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function due(t,e){return t??e}var Yj=(t,e,r,n,i,a,o)=>{if(!(e==null||a==null)){var{chartData:l,computedData:c,dataStartIndex:f,dataEndIndex:d}=r,p=[];return t.reduce((g,m)=>{var b,{dataDefinedOnItem:w,settings:E}=m,S=due(w,l),I=Array.isArray(S)?z9(S,f,d):S,O=(b=E?.dataKey)!==null&&b!==void 0?b:n,D=E?.nameKey,k;if(n&&Array.isArray(I)&&!Array.isArray(I[0])&&o==="axis"?k=Nk(I,n,i):k=a(I,e,c,D),Array.isArray(k))k.forEach(R=>{var N=VP(VP({},E),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});g.push(AR({tooltipEntrySettings:N,dataKey:R.dataKey,payload:R.payload,value:Yt(R.payload,R.dataKey),name:R.name}))});else{var B;g.push(AR({tooltipEntrySettings:E,dataKey:O,payload:k,value:Yt(k,O),name:(B=Yt(k,D))!==null&&B!==void 0?B:E?.name}))}return g},p)}},aC=ne([gn,pt,hj,NS,rn],Oj),hue=ne([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),pue=ne([rn,ld],zS),n0=ne([hue,gn,pue],VS),gue=ne([n0],t=>t.filter(ny)),vue=ne([n0],HS),hd=ne([vue,rc],$S),mue=ne([gue,rc,gn],uj),oC=ne([hd,gn,n0],GS),yue=ne([gn],WS),xue=ne([n0],t=>t.filter(ny)),bue=ne([mue,xue,Qp],yj),_ue=ne([bue,rc,rn],xj),wue=ne([n0],gj),Eue=ne([hd,gn,wue,oy,rn],bj),Aue=ne([wj,rn,ld],cd),Sue=ne([Aue,rn],Sj),Cue=ne([Ej,rn,ld],cd),Tue=ne([Cue,rn],Cj),Iue=ne([Aj,rn,ld],cd),Oue=ne([Iue,rn],Tj),Rue=ne([Sue,Oue,Tue],Nv),Pue=ne([gn,yue,_ue,Eue,Rue,pt,rn],KS),Qj=ne([gn,pt,hd,oC,Qp,rn,Pue],XS),Due=ne([Qj,gn,aC],ZS),Nue=ne([gn,Qj,Due,rn],eC),Zj=t=>{var e=rn(t),r=ld(t),n=!1;return t0(t,e,r,n)},Jj=ne([gn,Zj],ty),eL=ne([gn,aC,Nue,Jj],QS),Mue=ne([pt,oC,gn,rn],jj),kue=ne([pt,oC,gn,rn],Lj),jue=(t,e,r,n,i,a,o,l)=>{if(e){var{type:c}=e,f=Zl(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return p=l==="angleAxis"&&i!=null&&i?.length>=2?hn(i[0]-i[1])*2*p:p,f&&o?o.map((g,m)=>({coordinate:n(g)+p,value:g,index:m,offset:p})):n.domain().map((g,m)=>({coordinate:n(g)+p,value:a?a[g]:g,index:m,offset:p}))}}},Is=ne([pt,gn,aC,eL,Zj,Mue,kue,rn],jue),sC=ne([Uj,Fj,Xce],(t,e,r)=>zj(r.shared,t,e)),tL=t=>t.tooltip.settings.trigger,lC=t=>t.tooltip.settings.defaultIndex,cy=ne([dd,sC,tL,lC],Wj),$l=ne([cy,hd],iC),rL=ne([Is,$l],Vj),nL=ne([cy],t=>{if(t)return t.dataKey}),iL=ne([dd,sC,tL,lC],Xj),Lue=ne([Es,As,pt,en,Is,lC,iL,r0],Kj),Bue=ne([cy,Lue],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Uue=ne([cy],t=>t.active),Fue=ne([iL,$l,rc,cj,rL,r0,sC],Yj),zue=ne([Fue],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function HP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $P(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(r),!0).forEach(function(n){Vue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vue(t,e,r){return(e=Hue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hue(t){var e=$ue(t,"string");return typeof e=="symbol"?e:e+""}function $ue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var que=()=>Oe(gn),Gue=()=>{var t=que(),e=Oe(Is),r=Oe(eL);return pp($P($P({},t),{},{scale:r}),e)},Wue=()=>Oe(NS),cC=(t,e)=>e,aL=(t,e,r)=>r,uC=(t,e,r,n)=>n,Kue=ne(Is,t=>km(t,e=>e.coordinate)),fC=ne([dd,cC,aL,uC],Wj),oL=ne([fC,hd],iC),Xue=(t,e,r)=>{if(e!=null){var n=dd(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},sL=ne([dd,cC,aL,uC],Xj),Mv=ne([Es,As,pt,en,Is,uC,sL,r0],Kj),Yue=ne([fC,Mv],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),lL=ne(Is,oL,Vj),Que=ne([sL,oL,rc,cj,lL,r0,cC],Yj),Zue=ne([fC],t=>({isActive:t.active,activeIndex:t.index})),Jue=(t,e,r,n,i,a,o,l)=>{if(!(!t||!e||!n||!i||!a)){var c=bie(t.chartX,t.chartY,e,r,l);if(c){var f=wie(c,e),d=sie(f,o,a,n,i),p=_ie(e,a,d,c);return{activeIndex:String(d),activeCoordinate:p}}}};function Gw(){return Gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gw.apply(null,arguments)}function qP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function f1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(r),!0).forEach(function(n){efe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function efe(t,e,r){return(e=tfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tfe(t){var e=rfe(t,"string");return typeof e=="symbol"?e:e+""}function rfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nfe(t){var{coordinate:e,payload:r,index:n,offset:i,tooltipAxisBandSize:a,layout:o,cursor:l,tooltipEventType:c,chartName:f}=t,d=e,p=r,g=n;if(!l||!d||f!=="ScatterChart"&&c!=="axis")return null;var m,b;if(f==="ScatterChart")m=d,b=wae;else if(f==="BarChart")m=Eae(o,d,i,a),b=r7;else if(o==="radial"){var{cx:w,cy:E,radius:S,startAngle:I,endAngle:O}=n7(d);m={cx:w,cy:E,startAngle:I,endAngle:O,innerRadius:S,outerRadius:S},b=a7}else m={points:roe(o,d,i)},b=oS;var D=typeof l=="object"&&"className"in l?l.className:void 0,k=f1(f1(f1(f1({stroke:"#ccc",pointerEvents:"none"},i),m),fr(l,!1)),{},{payload:p,payloadIndex:g,className:xt("recharts-tooltip-cursor",D)});return C.isValidElement(l)?C.cloneElement(l,k):C.createElement(b,k)}function ife(t){var e=Gue(),r=W9(),n=qm(),i=Wue();return C.createElement(nfe,Gw({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var cL=C.createContext(null),afe=()=>C.useContext(cL),a_={exports:{}},GP;function ofe(){return GP||(GP=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function a(c,f,d,p,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,p||c,g),b=r?r+f:f;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)e.call(d,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},l.prototype.listeners=function(f){var d=r?r+f:f,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,m=p.length,b=new Array(m);g<m;g++)b[g]=p[g].fn;return b},l.prototype.listenerCount=function(f){var d=r?r+f:f,p=this._events[d];return p?p.fn?1:p.length:0},l.prototype.emit=function(f,d,p,g,m,b){var w=r?r+f:f;if(!this._events[w])return!1;var E=this._events[w],S=arguments.length,I,O;if(E.fn){switch(E.once&&this.removeListener(f,E.fn,void 0,!0),S){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,d),!0;case 3:return E.fn.call(E.context,d,p),!0;case 4:return E.fn.call(E.context,d,p,g),!0;case 5:return E.fn.call(E.context,d,p,g,m),!0;case 6:return E.fn.call(E.context,d,p,g,m,b),!0}for(O=1,I=new Array(S-1);O<S;O++)I[O-1]=arguments[O];E.fn.apply(E.context,I)}else{var D=E.length,k;for(O=0;O<D;O++)switch(E[O].once&&this.removeListener(f,E[O].fn,void 0,!0),S){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,d);break;case 3:E[O].fn.call(E[O].context,d,p);break;case 4:E[O].fn.call(E[O].context,d,p,g);break;default:if(!I)for(k=1,I=new Array(S-1);k<S;k++)I[k-1]=arguments[k];E[O].fn.apply(E[O].context,I)}}return!0},l.prototype.on=function(f,d,p){return a(this,f,d,p,!1)},l.prototype.once=function(f,d,p){return a(this,f,d,p,!0)},l.prototype.removeListener=function(f,d,p,g){var m=r?r+f:f;if(!this._events[m])return this;if(!d)return o(this,m),this;var b=this._events[m];if(b.fn)b.fn===d&&(!g||b.once)&&(!p||b.context===p)&&o(this,m);else{for(var w=0,E=[],S=b.length;w<S;w++)(b[w].fn!==d||g&&!b[w].once||p&&b[w].context!==p)&&E.push(b[w]);E.length?this._events[m]=E.length===1?E[0]:E:o(this,m)}return this},l.prototype.removeAllListeners=function(f){var d;return f?(d=r?r+f:f,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(a_)),a_.exports}var sfe=ofe();const lfe=To(sfe);var _p=new lfe,Ww="recharts.syncEvent.tooltip",WP="recharts.syncEvent.brush";function dC(t,e){if(e){var r=Number.parseInt(e,10);if(!Ui(r))return t?.[r]}}var cfe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},uL=Vi({name:"options",initialState:cfe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),ufe=uL.reducer,{createEventEmitter:ffe}=uL.actions;function dfe(t){return t.tooltip.syncInteraction}var hfe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},fL=Vi({name:"chartData",initialState:hfe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:KP,setDataStartEndIndexes:pfe,setComputedData:hme}=fL.actions,gfe=fL.reducer,vfe=["x","y"];function XP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Mc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XP(Object(r),!0).forEach(function(n){mfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mfe(t,e,r){return(e=yfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yfe(t){var e=xfe(t,"string");return typeof e=="symbol"?e:e+""}function xfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bfe(t,e){if(t==null)return{};var r,n,i=_fe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function _fe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var dL=()=>{};function wfe(){var t=Oe(MS),e=Oe(kS),r=dr(),n=Oe(nj),i=Oe(Is),a=qm(),o=rS(),l=Oe(c=>c.rootProps.className);C.useEffect(()=>{if(t==null)return dL;var c=(f,d,p)=>{if(e!==p&&t===f){if(n==="index"){var g;if(o&&d!==null&&d!==void 0&&(g=d.payload)!==null&&g!==void 0&&g.coordinate){var m=d.payload.coordinate,{x:b,y:w}=m,E=bfe(m,vfe),S=Mc(Mc(Mc({},E),typeof b=="number"&&{x:Math.max(o.x,Math.min(b,o.x+o.width))}),typeof w=="number"&&{y:Math.max(o.y,Math.min(w,o.y+o.height))}),I=Mc(Mc({},d),{},{payload:Mc(Mc({},d.payload),{},{coordinate:S})});r(I)}else r(d);return}if(i!=null){var O;if(typeof n=="function"){var D={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},k=n(i,D);O=i[k]}else n==="value"&&(O=i.find(j=>String(j.value)===d.payload.label));var{coordinate:B}=d.payload;if(O==null||d.payload.active===!1||B==null||o==null){r($w({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:R,y:N}=B,L=Math.min(R,o.x+o.width),U=Math.min(N,o.y+o.height),z={x:a==="horizontal"?O.coordinate:L,y:a==="horizontal"?U:O.coordinate},H=$w({active:d.payload.active,coordinate:z,dataKey:d.payload.dataKey,index:String(O.index),label:d.payload.label});r(H)}}};return _p.on(Ww,c),()=>{_p.off(Ww,c)}},[l,r,e,t,n,i,a,o])}function Efe(){var t=Oe(MS),e=Oe(kS),r=dr();C.useEffect(()=>{if(t==null)return dL;var n=(i,a,o)=>{e!==o&&t===i&&r(pfe(a))};return _p.on(WP,n),()=>{_p.off(WP,n)}},[r,e,t])}function Afe(){var t=dr();C.useEffect(()=>{t(ffe())},[t]),wfe(),Efe()}function Sfe(t,e,r,n,i,a){var o=Oe(g=>Xue(g,t,e)),l=Oe(kS),c=Oe(MS),f=Oe(nj),d=Oe(dfe),p=d?.active;C.useEffect(()=>{if(!p&&c!=null&&l!=null){var g=$w({active:a,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n});_p.emit(Ww,c,g,l)}},[p,r,o,i,n,l,c,f,a])}function YP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function QP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YP(Object(r),!0).forEach(function(n){Cfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cfe(t,e,r){return(e=Tfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tfe(t){var e=Ife(t,"string");return typeof e=="symbol"?e:e+""}function Ife(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ofe(t){return t.dataKey}function Rfe(t,e){return C.isValidElement(t)?C.cloneElement(t,e):typeof t=="function"?C.createElement(t,e):C.createElement(eae,e)}var ZP=[],Pfe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Jl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function uy(t){var e=kn(t,Pfe),{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,content:o,filterNull:l,isAnimationActive:c,offset:f,payloadUniqBy:d,position:p,reverseDirection:g,useTranslate3d:m,wrapperStyle:b,cursor:w,shared:E,trigger:S,defaultIndex:I,portal:O,axisId:D}=e,k=dr(),B=typeof I=="number"?String(I):I;C.useEffect(()=>{k(Jce({shared:E,trigger:S,axisId:D,active:r,defaultIndex:B}))},[k,E,S,D,r,B]);var R=rS(),N=Q9(),L=Kce(E),{activeIndex:U,isActive:z}=Oe(Pe=>Zue(Pe,L,S,B)),H=Oe(Pe=>Que(Pe,L,S,B)),j=Oe(Pe=>lL(Pe,L,S,B)),ue=Oe(Pe=>Yue(Pe,L,S,B)),ye=H,X=afe(),re=r??z,[he,Ae]=g9([ye,re]),ke=L==="axis"?j:void 0;Sfe(L,S,ue,ke,U,re);var G=O??X;if(G==null)return null;var ee=ye??ZP;re||(ee=ZP),l&&ee.length&&(ee=u9(ye.filter(Pe=>Pe.value!=null&&(Pe.hide!==!0||e.includeHidden)),d,Ofe));var xe=ee.length>0,we=C.createElement(sae,{allowEscapeViewBox:n,animationDuration:i,animationEasing:a,isAnimationActive:c,active:re,coordinate:ue,hasPayload:xe,offset:f,position:p,reverseDirection:g,useTranslate3d:m,viewBox:R,wrapperStyle:b,lastBoundingBox:he,innerRef:Ae,hasPortalFromProps:!!O},Rfe(o,QP(QP({},e),{},{payload:ee,label:ke,active:re,coordinate:ue,accessibilityLayer:N})));return C.createElement(C.Fragment,null,Lk.createPortal(we,G),re&&C.createElement(ife,{cursor:w,tooltipEventType:L,coordinate:ue,payload:ye,index:U}))}var o_={},s_={},l_={},JP;function Dfe(){return JP||(JP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:a}={}){let o,l=null;const c=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},p=()=>{f&&d(),w()};let g=null;const m=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,p()},n)},b=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{b(),o=void 0,l=null},E=()=>{d()},S=function(...I){if(i?.aborted)return;o=this,l=I;const O=g==null;m(),c&&O&&d()};return S.schedule=m,S.cancel=w,S.flush=E,i?.addEventListener("abort",w,{once:!0}),S}t.debounce=e})(l_)),l_}var e5;function Nfe(){return e5||(e5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dfe();function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:l=!0,maxWait:c}=a,f=Array(2);o&&(f[0]="leading"),l&&(f[1]="trailing");let d,p=null;const g=e.debounce(function(...w){d=n.apply(this,w),p=null},i,{edges:f}),m=function(...w){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(d=n.apply(this,w),p=Date.now(),g.cancel(),g.schedule(),d):(g.apply(this,w),d)},b=()=>(g.flush(),d);return m.cancel=g.cancel,m.flush=b,m}t.debounce=r})(s_)),s_}var t5;function Mfe(){return t5||(t5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nfe();function r(n,i=0,a={}){const{leading:o=!0,trailing:l=!0}=a;return e.debounce(n,i,{leading:o,maxWait:i,trailing:l})}t.throttle=r})(o_)),o_}var c_,r5;function kfe(){return r5||(r5=1,c_=Mfe().throttle),c_}var jfe=kfe();const Lfe=To(jfe);var Qh=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function n5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function u_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n5(Object(r),!0).forEach(function(n){Bfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bfe(t,e,r){return(e=Ufe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ufe(t){var e=Ffe(t,"string");return typeof e=="symbol"?e:e+""}function Ffe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fy=C.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:f,debounce:d=0,id:p,className:g,onResize:m,style:b={}}=t,w=C.useRef(null),E=C.useRef();E.current=m,C.useImperativeHandle(e,()=>w.current);var[S,I]=C.useState({containerWidth:n.width,containerHeight:n.height}),O=C.useCallback((k,B)=>{I(R=>{var N=Math.round(k),L=Math.round(B);return R.containerWidth===N&&R.containerHeight===L?R:{containerWidth:N,containerHeight:L}})},[]);C.useEffect(()=>{var k=L=>{var U,{width:z,height:H}=L[0].contentRect;O(z,H),(U=E.current)===null||U===void 0||U.call(E,z,H)};d>0&&(k=Lfe(k,d,{trailing:!0,leading:!1}));var B=new ResizeObserver(k),{width:R,height:N}=w.current.getBoundingClientRect();return O(R,N),B.observe(w.current),()=>{B.disconnect()}},[O,d]);var D=C.useMemo(()=>{var{containerWidth:k,containerHeight:B}=S;if(k<0||B<0)return null;Qh(Hc(i)||Hc(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),Qh(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=Hc(i)?k:i,N=Hc(a)?B:a;return r&&r>0&&(R?N=R/r:N&&(R=N*r),c&&N>c&&(N=c)),Qh(R>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,N,i,a,o,l,r),C.Children.map(f,L=>C.cloneElement(L,{width:R,height:N,style:u_({width:R,height:N},L.props.style)}))},[r,f,a,c,l,o,S,i]);return C.createElement("div",{id:p?"".concat(p):void 0,className:xt("recharts-responsive-container",g),style:u_(u_({},b),{},{width:i,height:a,minWidth:o,minHeight:l,maxHeight:c}),ref:w},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},D))}),pd=t=>null;pd.displayName="Cell";function zfe(t,e,r){return(e=Vfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vfe(t){var e=Hfe(t,"string");return typeof e=="symbol"?e:e+""}function Hfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $fe{constructor(e){zfe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function i5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qfe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i5(Object(r),!0).forEach(function(n){Gfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gfe(t,e,r){return(e=Wfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wfe(t){var e=Kfe(t,"string");return typeof e=="symbol"?e:e+""}function Kfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xfe={cacheSize:2e3,enableCache:!0},hL=qfe({},Xfe),a5=new $fe(hL.cacheSize),Yfe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},o5="recharts_measurement_span";function Qfe(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(l)}var s5=(t,e)=>{try{var r=document.getElementById(o5);r||(r=document.createElement("span"),r.setAttribute("id",o5),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Yfe,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Zh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Jl.isSsr)return{width:0,height:0};if(!hL.enableCache)return s5(e,r);var n=Qfe(e,r),i=a5.get(n);if(i)return i;var a=s5(e,r);return a5.set(n,a),a},l5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,c5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Zfe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jfe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ede=Object.keys(pL),yf="NaN";function tde(t,e){return t*pL[e]}class di{static parse(e){var r,[,n,i]=(r=Jfe.exec(e))!==null&&r!==void 0?r:[];return new di(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Ui(e)&&(this.unit=""),r!==""&&!Zfe.test(r)&&(this.num=NaN,this.unit=""),ede.includes(r)&&(this.num=tde(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new di(NaN,""):new di(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new di(NaN,""):new di(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new di(NaN,""):new di(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new di(NaN,""):new di(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ui(this.num)}}function gL(t){if(t.includes(yf))return yf;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,a]=(r=l5.exec(e))!==null&&r!==void 0?r:[],o=di.parse(n??""),l=di.parse(a??""),c=i==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return yf;e=e.replace(l5,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,d,p,g]=(f=c5.exec(e))!==null&&f!==void 0?f:[],m=di.parse(d??""),b=di.parse(g??""),w=p==="+"?m.add(b):m.subtract(b);if(w.isNaN())return yf;e=e.replace(c5,w.toString())}return e}var u5=/\(([^()]*)\)/;function rde(t){for(var e=t,r;(r=u5.exec(e))!=null;){var[,n]=r;e=e.replace(u5,gL(n))}return e}function nde(t){var e=t.replace(/\s+/g,"");return e=rde(e),e=gL(e),e}function ide(t){try{return nde(t)}catch{return yf}}function f_(t){var e=ide(t.slice(5,-1));return e===yf?"":e}var ade=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ode=["dx","dy","angle","className","breakAll"];function Kw(){return Kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kw.apply(null,arguments)}function f5(t,e){if(t==null)return{};var r,n,i=sde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function sde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var vL=/[ \f\n\r\t\v\u2028\u2029]+/,mL=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];lr(e)||(r?i=e.toString().split(""):i=e.toString().split(vL));var a=i.map(l=>({word:l,width:Zh(l,n).width})),o=r?0:Zh(" ",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},lde=(t,e,r,n,i)=>{var{maxLines:a,children:o,style:l,breakAll:c}=t,f=De(a),d=o,p=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce((H,j)=>{var{word:ue,width:ye}=j,X=H[H.length-1];if(X&&(n==null||i||X.width+ye+r<Number(n)))X.words.push(ue),X.width+=ye+r;else{var re={words:[ue],width:ye};H.push(re)}return H},[])},g=p(e),m=U=>U.reduce((z,H)=>z.width>H.width?z:H);if(!f||i)return g;var b=g.length>a||m(g).width>Number(n);if(!b)return g;for(var w="…",E=U=>{var z=d.slice(0,U),H=mL({breakAll:c,style:l,children:z+w}).wordsWithComputedWidth,j=p(H),ue=j.length>a||m(j).width>Number(n);return[ue,j]},S=0,I=d.length-1,O=0,D;S<=I&&O<=d.length-1;){var k=Math.floor((S+I)/2),B=k-1,[R,N]=E(B),[L]=E(k);if(!R&&!L&&(S=k+1),R&&L&&(I=k-1),!R&&L){D=N;break}O++}return D||g},d5=t=>{var e=lr(t)?[]:t.toString().split(vL);return[{words:e}]},cde=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:o}=t;if((e||r)&&!Jl.isSsr){var l,c,f=mL({breakAll:a,children:n,style:i});if(f){var{wordsWithComputedWidth:d,spaceWidth:p}=f;l=d,c=p}else return d5(n);return lde({breakAll:a,children:n,maxLines:o,style:i},l,c,e,r)}return d5(n)},h5="#808080",dy=C.forwardRef((t,e)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:f=h5}=t,d=f5(t,ade),p=C.useMemo(()=>cde({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:g,dy:m,angle:b,className:w,breakAll:E}=d,S=f5(d,ode);if(!So(r)||!So(n)||p.length===0)return null;var I=r+(De(g)?g:0),O=n+(De(m)?m:0),D;switch(c){case"start":D=f_("calc(".concat(a,")"));break;case"middle":D=f_("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:D=f_("calc(".concat(p.length-1," * -").concat(i,")"));break}var k=[];if(o){var B=p[0].width,{width:R}=d;k.push("scale(".concat(De(R)?R/B:1,")"))}return b&&k.push("rotate(".concat(b,", ").concat(I,", ").concat(O,")")),k.length&&(S.transform=k.join(" ")),C.createElement("text",Kw({},fr(S,!0),{ref:e,x:I,y:O,className:xt("recharts-text",w),textAnchor:l,fill:f.includes("url")?h5:f}),p.map((N,L)=>{var U=N.words.join(E?"":" ");return C.createElement("tspan",{x:I,dy:L===0?D:i,key:"".concat(U,"-").concat(L)},U)}))});dy.displayName="Text";var ude=["labelRef"];function fde(t,e){if(t==null)return{};var r,n,i=dde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function dde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function p5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Cr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p5(Object(r),!0).forEach(function(n){hde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hde(t,e,r){return(e=pde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pde(t){var e=gde(t,"string");return typeof e=="symbol"?e:e+""}function gde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function es(){return es=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},es.apply(null,arguments)}var yL=C.createContext(null),vde=t=>{var{x:e,y:r,width:n,height:i,children:a}=t,o=C.useMemo(()=>({x:e,y:r,width:n,height:i}),[e,r,n,i]);return C.createElement(yL.Provider,{value:o},a)},xL=()=>{var t=C.useContext(yL),e=rS();return t||e},mde=C.createContext(null),yde=()=>{var t=C.useContext(mde),e=Oe(lj);return t||e},xde=t=>{var{value:e,formatter:r}=t,n=lr(t.children)?e:t.children;return typeof r=="function"?r(n):n},hC=t=>t!=null&&typeof t=="function",bde=(t,e)=>{var r=hn(e-t),n=Math.min(Math.abs(e-t),360);return r*n},_de=(t,e,r,n,i)=>{var{offset:a,className:o}=t,{cx:l,cy:c,innerRadius:f,outerRadius:d,startAngle:p,endAngle:g,clockWise:m}=i,b=(f+d)/2,w=bde(p,g),E=w>=0?1:-1,S,I;switch(e){case"insideStart":S=p+E*a,I=m;break;case"insideEnd":S=g-E*a,I=!m;break;case"end":S=g+E*a,I=m;break;default:throw new Error("Unsupported position ".concat(e))}I=w<=0?I:!I;var O=zr(l,c,b,S),D=zr(l,c,b,S+(I?1:-1)*359),k="M".concat(O.x,",").concat(O.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(I?0:1,`,
    `).concat(D.x,",").concat(D.y),B=lr(t.id)?fp("recharts-radial-line-"):t.id;return C.createElement("text",es({},n,{dominantBaseline:"central",className:xt("recharts-radial-bar-label",o)}),C.createElement("defs",null,C.createElement("path",{id:B,d:k})),C.createElement("textPath",{xlinkHref:"#".concat(B)},r))},wde=(t,e,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:l,endAngle:c}=t,f=(l+c)/2;if(r==="outside"){var{x:d,y:p}=zr(n,i,o+e,f);return{x:d,y:p,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+o)/2,{x:m,y:b}=zr(n,i,g,f);return{x:m,y:b,textAnchor:"middle",verticalAnchor:"middle"}},bL=t=>"cx"in t&&De(t.cx),Ede=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,a;r!=null&&!bL(r)&&(a=r);var{x:o,y:l,width:c,height:f}=e,d=f>=0?1:-1,p=d*n,g=d>0?"end":"start",m=d>0?"start":"end",b=c>=0?1:-1,w=b*n,E=b>0?"end":"start",S=b>0?"start":"end";if(i==="top"){var I={x:o+c/2,y:l-d*n,textAnchor:"middle",verticalAnchor:g};return Cr(Cr({},I),a?{height:Math.max(l-a.y,0),width:c}:{})}if(i==="bottom"){var O={x:o+c/2,y:l+f+p,textAnchor:"middle",verticalAnchor:m};return Cr(Cr({},O),a?{height:Math.max(a.y+a.height-(l+f),0),width:c}:{})}if(i==="left"){var D={x:o-w,y:l+f/2,textAnchor:E,verticalAnchor:"middle"};return Cr(Cr({},D),a?{width:Math.max(D.x-a.x,0),height:f}:{})}if(i==="right"){var k={x:o+c+w,y:l+f/2,textAnchor:S,verticalAnchor:"middle"};return Cr(Cr({},k),a?{width:Math.max(a.x+a.width-k.x,0),height:f}:{})}var B=a?{width:c,height:f}:{};return i==="insideLeft"?Cr({x:o+w,y:l+f/2,textAnchor:S,verticalAnchor:"middle"},B):i==="insideRight"?Cr({x:o+c-w,y:l+f/2,textAnchor:E,verticalAnchor:"middle"},B):i==="insideTop"?Cr({x:o+c/2,y:l+p,textAnchor:"middle",verticalAnchor:m},B):i==="insideBottom"?Cr({x:o+c/2,y:l+f-p,textAnchor:"middle",verticalAnchor:g},B):i==="insideTopLeft"?Cr({x:o+w,y:l+p,textAnchor:S,verticalAnchor:m},B):i==="insideTopRight"?Cr({x:o+c-w,y:l+p,textAnchor:E,verticalAnchor:m},B):i==="insideBottomLeft"?Cr({x:o+w,y:l+f-p,textAnchor:S,verticalAnchor:g},B):i==="insideBottomRight"?Cr({x:o+c-w,y:l+f-p,textAnchor:E,verticalAnchor:g},B):i&&typeof i=="object"&&(De(i.x)||Hc(i.x))&&(De(i.y)||Hc(i.y))?Cr({x:o+$n(i.x,c),y:l+$n(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):Cr({x:o+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Ade={offset:5};function vl(t){var e=kn(t,Ade),{viewBox:r,position:n,value:i,children:a,content:o,className:l="",textBreakAll:c,labelRef:f}=e,d=yde(),p=xL(),g=n==="center"?p:d??p,m=r||g;if(!m||lr(i)&&lr(a)&&!C.isValidElement(o)&&typeof o!="function")return null;var b=Cr(Cr({},e),{},{viewBox:m});if(C.isValidElement(o)){var{labelRef:w}=b,E=fde(b,ude);return C.cloneElement(o,E)}var S;if(typeof o=="function"){if(S=C.createElement(o,b),C.isValidElement(S))return S}else S=xde(e);var I=bL(m),O=fr(e,!0);if(I&&(n==="insideStart"||n==="insideEnd"||n==="end"))return _de(e,n,S,O,m);var D=I?wde(m,e.offset,e.position):Ede(e,m);return C.createElement(dy,es({ref:f,className:xt("recharts-label",l)},O,D,{breakAll:c}),S)}vl.displayName="Label";var Sde=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?C.createElement(vl,es({key:"label-implicit"},n)):So(t)?C.createElement(vl,es({key:"label-implicit",value:t},n)):C.isValidElement(t)?t.type===vl?C.cloneElement(t,Cr({key:"label-implicit"},n)):C.createElement(vl,es({key:"label-implicit",content:t},n)):hC(t)?C.createElement(vl,es({key:"label-implicit",content:t},n)):t&&typeof t=="object"?C.createElement(vl,es({},t,{key:"label-implicit"},n)):null};function Cde(t){var{label:e}=t,r=xL();return Sde(e,r)||null}var d_={},h_={},g5;function Tde(){return g5||(g5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(h_)),h_}var p_={},v5;function Ide(){return v5||(v5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(p_)),p_}var m5;function Ode(){return m5||(m5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tde(),r=Ide(),n=WA();function i(a){if(n.isArrayLike(a))return e.last(r.toArray(a))}t.last=i})(d_)),d_}var g_,y5;function Rde(){return y5||(y5=1,g_=Ode().last),g_}var Pde=Rde();const Dde=To(Pde);var Nde=["valueAccessor"],Mde=["dataKey","clockWise","id","textBreakAll"];function kv(){return kv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kv.apply(null,arguments)}function x5(t,e){if(t==null)return{};var r,n,i=kde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function kde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var jde=t=>Array.isArray(t.value)?Dde(t.value):t.value,_L=C.createContext(void 0),wL=_L.Provider,EL=C.createContext(void 0),Lde=EL.Provider;function Bde(){return C.useContext(_L)}function Ude(){return C.useContext(EL)}function I1(t){var{valueAccessor:e=jde}=t,r=x5(t,Nde),{dataKey:n,clockWise:i,id:a,textBreakAll:o}=r,l=x5(r,Mde),c=Bde(),f=Ude(),d=c||f;return!d||!d.length?null:C.createElement(Mn,{className:"recharts-label-list"},d.map((p,g)=>{var m,b=lr(n)?e(p,g):Yt(p&&p.payload,n),w=lr(a)?{}:{id:"".concat(a,"-").concat(g)};return C.createElement(vl,kv({},fr(p,!0),l,w,{fill:(m=r.fill)!==null&&m!==void 0?m:p.fill,parentViewBox:p.parentViewBox,value:b,textBreakAll:o,viewBox:p.viewBox,key:"label-".concat(g),index:g}))}))}I1.displayName="LabelList";function pC(t){var{label:e}=t;return e?e===!0?C.createElement(I1,{key:"labelList-implicit"}):C.isValidElement(e)||hC(e)?C.createElement(I1,{key:"labelList-implicit",content:e}):typeof e=="object"?C.createElement(I1,kv({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xw.apply(null,arguments)}var AL=t=>{var{cx:e,cy:r,r:n,className:i}=t,a=xt("recharts-dot",i);return e===+e&&r===+r&&n===+n?C.createElement("circle",Xw({},Do(t),BA(t),{className:a,cx:e,cy:r,r:n})):null},SL=t=>t.graphicalItems.polarItems,Fde=ne([cr,Zp],zS),gC=ne([SL,Ir,Fde],VS),zde=ne([gC],HS),vC=ne([zde,RS],$S),Vde=ne([vC,Ir,gC],GS),Hde=ne([vC,Ir,gC],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(i=>{var a,o=Yt(n,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(n=>({value:Yt(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]}))),b5=()=>{},$de=ne([Ir,Ij,b5,Hde,b5,pt,cr],KS),CL=ne([Ir,pt,vC,Vde,Qp,cr,$de],XS),qde=ne([CL,Ir,ud],ZS);ne([Ir,CL,qde,cr],eC);var Gde={radiusAxis:{},angleAxis:{}},TL=Vi({name:"polarAxis",initialState:Gde,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:pme,removeRadiusAxis:gme,addAngleAxis:vme,removeAngleAxis:mme}=TL.actions,Wde=TL.reducer;function _5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function w5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(r),!0).forEach(function(n){Kde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kde(t,e,r){return(e=Xde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xde(t){var e=Yde(t,"string");return typeof e=="symbol"?e:e+""}function Yde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qde=(t,e)=>e,mC=ne([SL,Qde],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),Zde=[],yC=(t,e,r)=>r?.length===0?Zde:r,IL=ne([RS,mC,yC],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>w5(w5({},e.presentationProps),a.props))),i!=null)return i}}),Jde=ne([IL,mC,yC],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,i)=>{var a,o=Yt(n,e.nameKey,e.name),l;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?l=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:id(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),ehe=ne([IL,mC,yC,en],(t,e,r,n)=>{if(!(e==null||t==null))return Qhe({offset:n,pieSettings:e,displayedData:t,cells:r})}),v_={},E5;function the(){return E5||(E5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(v_)),v_}var m_,A5;function rhe(){return A5||(A5=1,m_=the().isPlainObject),m_}var nhe=rhe();const ihe=To(nhe);function S5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function C5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(r),!0).forEach(function(n){ahe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ahe(t,e,r){return(e=ohe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ohe(t){var e=she(t,"string");return typeof e=="symbol"?e:e+""}function she(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jv(){return jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jv.apply(null,arguments)}var T5=(t,e,r,n,i)=>{var a=r-n,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+r,",").concat(e),o+="L ".concat(t+r-a/2,",").concat(e+i),o+="L ".concat(t+r-a/2-n,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},lhe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},che=t=>{var e=kn(t,lhe),{x:r,y:n,upperWidth:i,lowerWidth:a,height:o,className:l}=e,{animationEasing:c,animationDuration:f,animationBegin:d,isUpdateAnimationActive:p}=e,g=C.useRef(),[m,b]=C.useState(-1),w=C.useRef(i),E=C.useRef(a),S=C.useRef(o),I=C.useRef(r),O=C.useRef(n),D=Gp(t,"trapezoid-");if(C.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var ue=g.current.getTotalLength();ue&&b(ue)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var k=xt("recharts-trapezoid",l);if(!p)return C.createElement("g",null,C.createElement("path",jv({},fr(e,!0),{className:k,d:T5(r,n,i,a,o)})));var B=w.current,R=E.current,N=S.current,L=I.current,U=O.current,z="0px ".concat(m===-1?1:m,"px"),H="".concat(m,"px 0px"),j=Z9(["strokeDasharray"],f,c);return C.createElement(qp,{animationId:D,key:D,canBegin:m>0,duration:f,easing:c,isActive:p,begin:d},ue=>{var ye=gr(B,i,ue),X=gr(R,a,ue),re=gr(N,o,ue),he=gr(L,r,ue),Ae=gr(U,n,ue);g.current&&(w.current=ye,E.current=X,S.current=re,I.current=he,O.current=Ae);var ke=ue>0?{transition:j,strokeDasharray:H}:{strokeDasharray:z};return C.createElement("path",jv({},fr(e,!0),{className:k,d:T5(he,Ae,ye,X,re),ref:g,style:C5(C5({},ke),e.style)}))})},uhe=["option","shapeType","propTransformer","activeClassName","isActive"];function fhe(t,e){if(t==null)return{};var r,n,i=dhe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function dhe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function I5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Lv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(r),!0).forEach(function(n){hhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hhe(t,e,r){return(e=phe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function phe(t){var e=ghe(t,"string");return typeof e=="symbol"?e:e+""}function ghe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vhe(t,e){return Lv(Lv({},e),t)}function mhe(t,e){return t==="symbols"}function O5(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return C.createElement(r7,r);case"trapezoid":return C.createElement(che,r);case"sector":return C.createElement(a7,r);case"symbols":if(mhe(e))return C.createElement($A,r);break;default:return null}}function yhe(t){return C.isValidElement(t)?t.props:t}function OL(t){var{option:e,shapeType:r,propTransformer:n=vhe,activeClassName:i="recharts-active-shape",isActive:a}=t,o=fhe(t,uhe),l;if(C.isValidElement(e))l=C.cloneElement(e,Lv(Lv({},o),yhe(e)));else if(typeof e=="function")l=e(o);else if(ihe(e)&&typeof e!="boolean"){var c=n(e,o);l=C.createElement(O5,{shapeType:r,elementProps:c})}else{var f=o;l=C.createElement(O5,{shapeType:r,elementProps:f})}return a?C.createElement(Mn,{className:i},l):l}var xC=(t,e)=>{var r=dr();return(n,i)=>a=>{t?.(n,i,a),r($j({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}},bC=t=>{var e=dr();return(r,n)=>i=>{t?.(r,n,i),e(eue())}},_C=(t,e)=>{var r=dr();return(n,i)=>a=>{t?.(n,i,a),r(tue({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}};function wC(t){var{fn:e,args:r}=t,n=dr(),i=xi();return C.useEffect(()=>{if(!i){var a=e(r);return n(Qce(a)),()=>{n(Zce(a))}}},[e,r,n,i]),null}var RL=()=>{};function PL(t){var{legendPayload:e}=t,r=dr(),n=xi();return C.useEffect(()=>n?RL:(r(X9(e)),()=>{r(Y9(e))}),[r,n,e]),null}function xhe(t){var{legendPayload:e}=t,r=dr(),n=Oe(pt);return C.useEffect(()=>n!=="centric"&&n!=="radial"?RL:(r(X9(e)),()=>{r(Y9(e))}),[r,n,e]),null}var y_,bhe=()=>{var[t]=C.useState(()=>fp("uid-"));return t},_he=(y_=JU.useId)!==null&&y_!==void 0?y_:bhe;function whe(t,e){var r=_he();return e||(t?"".concat(t,"-").concat(r):r)}var Ehe=C.createContext(void 0),EC=t=>{var{id:e,type:r,children:n}=t,i=whe("recharts-".concat(r),e);return C.createElement(Ehe.Provider,{value:i},n(i))},Ahe={cartesianItems:[],polarItems:[]},DL=Vi({name:"graphicalItems",initialState:Ahe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:r,next:n}=e.payload,i=ss(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},removeCartesianGraphicalItem(t,e){var r=ss(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var r=ss(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:She,replaceCartesianGraphicalItem:Che,removeCartesianGraphicalItem:The,addPolarGraphicalItem:Ihe,removePolarGraphicalItem:Ohe}=DL.actions,Rhe=DL.reducer;function NL(t){var e=dr(),r=C.useRef(null);return C.useEffect(()=>{r.current===null?e(She(t)):r.current!==t&&e(Che({prev:r.current,next:t})),r.current=t},[e,t]),C.useEffect(()=>()=>{r.current&&(e(The(r.current)),r.current=null)},[e]),null}function Phe(t){var e=dr();return C.useEffect(()=>(e(Ihe(t)),()=>{e(Ohe(t))}),[e,t]),null}var Dhe=["onMouseEnter","onClick","onMouseLeave"],Nhe=["id"],Mhe=["id"];function AC(t,e){if(t==null)return{};var r,n,i=khe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function khe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function R5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ar(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(r),!0).forEach(function(n){jhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jhe(t,e,r){return(e=Lhe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lhe(t){var e=Bhe(t,"string");return typeof e=="symbol"?e:e+""}function Bhe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ql.apply(null,arguments)}function Uhe(t){var e=C.useMemo(()=>UA(t.children,pd),[t.children]),r=Oe(n=>Jde(n,t.id,e));return r==null?null:C.createElement(xhe,{legendPayload:r})}function Fhe(t){var{dataKey:e,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:o,name:l,hide:c,tooltipType:f}=t;return{dataDefinedOnItem:n.map(d=>d.tooltipPayload),positions:n.map(d=>d.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:o,dataKey:e,nameKey:r,name:id(l,e),hide:c,type:f,color:o,unit:""}}}var zhe=(t,e)=>t>e?"start":t<e?"end":"middle",Vhe=(t,e,r)=>$n(typeof e=="function"?e(t):e,r,r*.8),Hhe=(t,e,r)=>{var{top:n,left:i,width:a,height:o}=e,l=F9(a,o),c=i+$n(t.cx,a,a/2),f=n+$n(t.cy,o,o/2),d=$n(t.innerRadius,l,0),p=Vhe(r,t.outerRadius,l),g=t.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:c,cy:f,innerRadius:d,outerRadius:p,maxRadius:g}},$he=(t,e)=>{var r=hn(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function qhe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Ghe=(t,e)=>{if(C.isValidElement(t))return C.cloneElement(t,e);if(typeof t=="function")return t(e);var r=xt("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return C.createElement(oS,ql({},e,{type:"linear",className:r}))},Whe=(t,e,r)=>{if(C.isValidElement(t))return C.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),C.isValidElement(n)))return n;var i=xt("recharts-pie-label-text",qhe(t));return C.createElement(dy,ql({},e,{alignmentBaseline:"middle",className:i}),n)};function Khe(t){var{sectors:e,props:r,showLabels:n}=t,{label:i,labelLine:a,dataKey:o}=r;if(!n||!i||!e)return null;var l=Do(r),c=fr(i,!1),f=fr(a,!1),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,p=e.map((g,m)=>{var b=(g.startAngle+g.endAngle)/2,w=zr(g.cx,g.cy,g.outerRadius+d,b),E=ar(ar(ar(ar({},l),g),{},{stroke:"none"},c),{},{index:m,textAnchor:zhe(w.x,g.cx)},w),S=ar(ar(ar(ar({},l),g),{},{fill:"none",stroke:g.fill},f),{},{index:m,points:[zr(g.cx,g.cy,g.outerRadius,b),w],key:"line"});return C.createElement(Mn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(m)},a&&Ghe(a,S),Whe(i,E,Yt(g,o)))});return C.createElement(Mn,{className:"recharts-pie-labels"},p)}function Xhe(t){var{sectors:e,props:r,showLabels:n}=t,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?C.createElement(pC,{label:i}):C.createElement(Khe,{sectors:e,props:r,showLabels:n})}function Yhe(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:i}=t,a=Oe($l),{onMouseEnter:o,onClick:l,onMouseLeave:c}=i,f=AC(i,Dhe),d=xC(o,i.dataKey),p=bC(c),g=_C(l,i.dataKey);return e==null||e.length===0?null:C.createElement(C.Fragment,null,e.map((m,b)=>{if(m?.startAngle===0&&m?.endAngle===0&&e.length!==1)return null;var w=r&&String(b)===a,E=a?n:null,S=w?r:E,I=ar(ar({},m),{},{stroke:m.stroke,tabIndex:-1,[q9]:b,[G9]:i.dataKey});return C.createElement(Mn,ql({tabIndex:-1,className:"recharts-pie-sector"},zp(f,m,b),{onMouseEnter:d(m,b),onMouseLeave:p(m,b),onClick:g(m,b),key:"sector-".concat(m?.startAngle,"-").concat(m?.endAngle,"-").concat(m.midAngle,"-").concat(b)}),C.createElement(OL,ql({option:S,isActive:w,shapeType:"sector"},I)))}))}function Qhe(t){var e,{pieSettings:r,displayedData:n,cells:i,offset:a}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:f,nameKey:d,tooltipType:p}=r,g=Math.abs(r.minAngle),m=$he(l,c),b=Math.abs(m),w=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,E=n.filter(B=>Yt(B,f,0)!==0).length,S=(b>=360?E:E-1)*w,I=b-E*g-S,O=n.reduce((B,R)=>{var N=Yt(R,f,0);return B+(De(N)?N:0)},0),D;if(O>0){var k;D=n.map((B,R)=>{var N=Yt(B,f,0),L=Yt(B,d,R),U=Hhe(r,a,B),z=(De(N)?N:0)/O,H,j=ar(ar({},B),i&&i[R]&&i[R].props);R?H=k.endAngle+hn(m)*w*(N!==0?1:0):H=l;var ue=H+hn(m)*((N!==0?g:0)+z*I),ye=(H+ue)/2,X=(U.innerRadius+U.outerRadius)/2,re=[{name:L,value:N,payload:j,dataKey:f,type:p}],he=zr(U.cx,U.cy,X,ye);return k=ar(ar(ar(ar({},r.presentationProps),{},{percent:z,cornerRadius:o,name:L,tooltipPayload:re,midAngle:ye,middleRadius:X,tooltipPosition:he},j),U),{},{value:N,startAngle:H,endAngle:ue,payload:j,paddingAngle:hn(m)*w}),k})}return D}function Zhe(t){var{showLabels:e,sectors:r,children:n}=t,i=C.useMemo(()=>!e||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,e]);return C.createElement(Lde,{value:e?i:void 0},n)}function Jhe(t){var{props:e,previousSectorsRef:r}=t,{sectors:n,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:f,onAnimationStart:d,onAnimationEnd:p}=e,g=Gp(e,"recharts-pie-"),m=r.current,[b,w]=C.useState(!1),E=C.useCallback(()=>{typeof p=="function"&&p(),w(!1)},[p]),S=C.useCallback(()=>{typeof d=="function"&&d(),w(!0)},[d]);return C.createElement(Zhe,{showLabels:!b,sectors:n},C.createElement(qp,{animationId:g,begin:a,duration:o,isActive:i,easing:l,onAnimationStart:S,onAnimationEnd:E,key:g},I=>{var O=[],D=n&&n[0],k=D?.startAngle;return n?.forEach((B,R)=>{var N=m&&m[R],L=R>0?su(B,"paddingAngle",0):0;if(N){var U=gr(N.endAngle-N.startAngle,B.endAngle-B.startAngle,I),z=ar(ar({},B),{},{startAngle:k+L,endAngle:k+U+L});O.push(z),k=z.endAngle}else{var{endAngle:H,startAngle:j}=B,ue=gr(0,H-j,I),ye=ar(ar({},B),{},{startAngle:k+L,endAngle:k+ue+L});O.push(ye),k=ye.endAngle}}),r.current=O,C.createElement(Mn,null,C.createElement(Yhe,{sectors:O,activeShape:c,inactiveShape:f,allOtherPieProps:e}))}),C.createElement(Xhe,{showLabels:!b,sectors:n,props:e}),e.children)}var epe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Jl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function tpe(t){var{id:e}=t,r=AC(t,Nhe),{hide:n,className:i,rootTabIndex:a}=t,o=C.useMemo(()=>UA(t.children,pd),[t.children]),l=Oe(d=>ehe(d,e,o)),c=C.useRef(null),f=xt("recharts-pie",i);return n||l==null?(c.current=null,C.createElement(Mn,{tabIndex:a,className:f})):C.createElement(C.Fragment,null,C.createElement(wC,{fn:Fhe,args:ar(ar({},t),{},{sectors:l})}),C.createElement(Mn,{tabIndex:a,className:f},C.createElement(Jhe,{props:ar(ar({},r),{},{sectors:l}),previousSectorsRef:c})))}function SC(t){var e=kn(t,epe),{id:r}=e,n=AC(e,Mhe),i=Do(n);return C.createElement(EC,{id:r,type:"pie"},a=>C.createElement(C.Fragment,null,C.createElement(Phe,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),C.createElement(Uhe,ql({},n,{id:a})),C.createElement(tpe,ql({},n,{id:a}))))}SC.displayName="Pie";function P5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function D5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(r),!0).forEach(function(n){rpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rpe(t,e,r){return(e=npe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function npe(t){var e=ipe(t,"string");return typeof e=="symbol"?e:e+""}function ipe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ape={xAxis:{},yAxis:{},zAxis:{}},ML=Vi({name:"cartesianAxis",initialState:ape,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload;t.yAxis[r]&&(t.yAxis[r]=D5(D5({},t.yAxis[r]),{},{width:n}))}}}),{addXAxis:ope,removeXAxis:spe,addYAxis:lpe,removeYAxis:cpe,addZAxis:yme,removeZAxis:xme,updateYAxisWidth:upe}=ML.actions,fpe=ML.reducer,dpe=ne([en],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),hpe=ne([dpe,Es,As],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),CC=()=>Oe(hpe),ppe=()=>Oe(zue);function N5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function M5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(r),!0).forEach(function(n){gpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gpe(t,e,r){return(e=vpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vpe(t){var e=mpe(t,"string");return typeof e=="symbol"?e:e+""}function mpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ype=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o=M5(M5({index:r,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},fr(i,!1)),BA(i)),l;return C.isValidElement(i)?l=C.cloneElement(i,o):typeof i=="function"?l=i(o):l=C.createElement(AL,o),C.createElement(Mn,{className:"recharts-active-dot"},l)};function xpe(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i}=t,a=Oe($l),o=ppe();if(e==null||o==null)return null;var l=e.find(c=>o.includes(c.payload));return lr(l)?null:ype({point:l,childIndex:Number(a),mainColor:r,dataKey:i,activeDot:n})}var bpe="Invariant failed";function _pe(t,e){throw new Error(bpe)}var wpe=["x","y"];function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yw.apply(null,arguments)}function k5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ph(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(r),!0).forEach(function(n){Epe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Epe(t,e,r){return(e=Ape(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ape(t){var e=Spe(t,"string");return typeof e=="symbol"?e:e+""}function Spe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cpe(t,e){if(t==null)return{};var r,n,i=Tpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Tpe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Ipe(t,e){var{x:r,y:n}=t,i=Cpe(t,wpe),a="".concat(r),o=parseInt(a,10),l="".concat(n),c=parseInt(l,10),f="".concat(e.height||i.height),d=parseInt(f,10),p="".concat(e.width||i.width),g=parseInt(p,10);return Ph(Ph(Ph(Ph(Ph({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:g,name:e.name,radius:e.radius})}function TC(t){return C.createElement(OL,Yw({shapeType:"rectangle",propTransformer:Ipe,activeClassName:"recharts-active-bar"},t))}var Ope=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(De(e))return e;var a=De(n)||lr(n);return a?e(n,i):(a||_pe(),r)}},Rpe={},kL=Vi({name:"errorBars",initialState:Rpe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:bme,replaceErrorBar:_me,removeErrorBar:wme}=kL.actions,Ppe=kL.reducer,Dpe=["children"];function Npe(t,e){if(t==null)return{};var r,n,i=Mpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Mpe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var kpe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},jpe=C.createContext(kpe);function jL(t){var{children:e}=t,r=Npe(t,Dpe);return C.createElement(jpe.Provider,{value:r},e)}function IC(t,e){var r,n,i=Oe(f=>Cs(f,t)),a=Oe(f=>Ts(f,e)),o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:Ri.allowDataOverflow,l=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Pi.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function LL(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=CC(),{needClipX:a,needClipY:o,needClip:l}=IC(e,r);if(!l)return null;var{x:c,y:f,width:d,height:p}=i;return C.createElement("clipPath",{id:"clipPath-".concat(n)},C.createElement("rect",{x:a?c:c-d/2,y:o?f:f-p/2,width:a?d:d*2,height:o?p:p*2}))}var Lpe=["onMouseEnter","onMouseLeave","onClick"],Bpe=["value","background","tooltipPosition"],Upe=["id"],Fpe=["onMouseEnter","onClick","onMouseLeave"];function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gl.apply(null,arguments)}function j5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ei(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(r),!0).forEach(function(n){zpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zpe(t,e,r){return(e=Vpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vpe(t){var e=Hpe(t,"string");return typeof e=="symbol"?e:e+""}function Hpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bv(t,e){if(t==null)return{};var r,n,i=$pe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function $pe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var qpe=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:id(r,e),payload:t}]};function Gpe(t){var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:a,hide:o,unit:l}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:e,nameKey:void 0,name:id(a,e),hide:o,type:t.tooltipType,color:t.fill,unit:l}}}function Wpe(t){var e=Oe($l),{data:r,dataKey:n,background:i,allOtherBarProps:a}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=a,f=Bv(a,Lpe),d=xC(o,n),p=bC(l),g=_C(c,n);if(!i||r==null)return null;var m=fr(i,!1);return C.createElement(C.Fragment,null,r.map((b,w)=>{var{value:E,background:S,tooltipPosition:I}=b,O=Bv(b,Bpe);if(!S)return null;var D=d(b,w),k=p(b,w),B=g(b,w),R=ei(ei(ei(ei(ei({option:i,isActive:String(w)===e},O),{},{fill:"#eee"},S),m),zp(f,b,w)),{},{onMouseEnter:D,onMouseLeave:k,onClick:B,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return C.createElement(TC,Gl({key:"background-bar-".concat(R.index)},R))}))}function Kpe(t){var{showLabels:e,children:r,rects:n}=t,i=n?.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return ei(ei({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return C.createElement(wL,{value:e?i:void 0},r)}function Xpe(t){var{shape:e,activeBar:r,baseProps:n,entry:i,index:a,dataKey:o}=t,l=Oe($l),c=Oe(nL),f=r&&String(a)===l&&(c==null||o===c),d=f?r:e;return C.createElement(TC,Gl({},n,i,{isActive:f,option:d,index:a,dataKey:o}))}function Ype(t){var{shape:e,baseProps:r,entry:n,index:i,dataKey:a}=t;return C.createElement(TC,Gl({},r,n,{isActive:!1,option:e,index:i,dataKey:a}))}function Qpe(t){var{data:e,props:r}=t,n=Do(r),{id:i}=n,a=Bv(n,Upe),{shape:o,dataKey:l,activeBar:c}=r,{onMouseEnter:f,onClick:d,onMouseLeave:p}=r,g=Bv(r,Fpe),m=xC(f,l),b=bC(p),w=_C(d,l);return e?C.createElement(C.Fragment,null,e.map((E,S)=>C.createElement(Mn,Gl({className:"recharts-bar-rectangle"},zp(g,E,S),{onMouseEnter:m(E,S),onMouseLeave:b(E,S),onClick:w(E,S),key:"rectangle-".concat(E?.x,"-").concat(E?.y,"-").concat(E?.value,"-").concat(S)}),c?C.createElement(Xpe,{shape:o,activeBar:c,baseProps:a,entry:E,index:S,dataKey:l}):C.createElement(Ype,{shape:o,baseProps:a,entry:E,index:S,dataKey:l})))):null}function Zpe(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:f,onAnimationStart:d}=e,p=r.current,g=Gp(e,"recharts-bar-"),[m,b]=C.useState(!1),w=!m,E=C.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),S=C.useCallback(()=>{typeof d=="function"&&d(),b(!0)},[d]);return C.createElement(Kpe,{showLabels:w,rects:n},C.createElement(qp,{animationId:g,begin:o,duration:l,isActive:a,easing:c,onAnimationEnd:E,onAnimationStart:S,key:g},I=>{var O=I===1?n:n?.map((D,k)=>{var B=p&&p[k];if(B)return ei(ei({},D),{},{x:gr(B.x,D.x,I),y:gr(B.y,D.y,I),width:gr(B.width,D.width,I),height:gr(B.height,D.height,I)});if(i==="horizontal"){var R=gr(0,D.height,I);return ei(ei({},D),{},{y:D.y+D.height-R,height:R})}var N=gr(0,D.width,I);return ei(ei({},D),{},{width:N})});return I>0&&(r.current=O??null),O==null?null:C.createElement(Mn,null,C.createElement(Qpe,{props:e,data:O}))}),C.createElement(pC,{label:e.label}),e.children)}function Jpe(t){var e=C.useRef(null);return C.createElement(Zpe,{previousRectanglesRef:e,props:t})}var BL=0,e0e=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Yt(t,e)}};class t0e extends C.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:o,needClip:l,background:c,id:f}=this.props;if(e||r==null)return null;var d=xt("recharts-bar",i),p=f;return C.createElement(Mn,{className:d,id:f},l&&C.createElement("defs",null,C.createElement(LL,{clipPathId:p,xAxisId:a,yAxisId:o})),C.createElement(Mn,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(p,")"):void 0},C.createElement(Wpe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),C.createElement(Jpe,this.props)))}}var r0e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Jl.isSsr,legendType:"rect",minPointSize:BL,xAxisId:0,yAxisId:0};function n0e(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:d}=t,{needClip:p}=IC(e,r),g=qm(),m=xi(),b=UA(t.children,pd),w=Oe(I=>P0e(I,e,r,m,t.id,b));if(g!=="vertical"&&g!=="horizontal")return null;var E,S=w?.[0];return S==null||S.height==null||S.width==null?E=0:E=g==="vertical"?S.height/2:S.width/2,C.createElement(jL,{xAxisId:e,yAxisId:r,data:w,dataPointFormatter:e0e,errorBarOffset:E},C.createElement(t0e,Gl({},t,{layout:g,needClip:p,data:w,xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:d})))}function i0e(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:f,stackedData:d,displayedData:p,offset:g,cells:m,parentViewBox:b}=t,w=e==="horizontal"?l:o,E=d?w.scale.domain():null,S=vie({numericAxis:w});return p.map((I,O)=>{var D,k,B,R,N,L;d?D=uie(d[O],E):(D=Yt(I,r),Array.isArray(D)||(D=[S,D]));var U=Ope(n,BL)(D[1],O);if(e==="horizontal"){var z,[H,j]=[l.scale(D[0]),l.scale(D[1])];k=_R({axis:o,ticks:c,bandSize:a,offset:i.offset,entry:I,index:O}),B=(z=j??H)!==null&&z!==void 0?z:void 0,R=i.size;var ue=H-j;if(N=Ui(ue)?0:ue,L={x:k,y:g.top,width:R,height:g.height},Math.abs(U)>0&&Math.abs(N)<Math.abs(U)){var ye=hn(N||U)*(Math.abs(U)-Math.abs(N));B-=ye,N+=ye}}else{var[X,re]=[o.scale(D[0]),o.scale(D[1])];if(k=X,B=_R({axis:l,ticks:f,bandSize:a,offset:i.offset,entry:I,index:O}),R=re-X,N=i.size,L={x:g.left,y:B,width:g.width,height:N},Math.abs(U)>0&&Math.abs(R)<Math.abs(U)){var he=hn(R||U)*(Math.abs(U)-Math.abs(R));R+=he}}if(k==null||B==null||R==null||N==null)return null;var Ae=ei(ei({},I),{},{x:k,y:B,width:R,height:N,value:d?D:D[1],payload:I,background:L,tooltipPosition:{x:k+R/2,y:B+N/2},parentViewBox:b},m&&m[O]&&m[O].props);return Ae}).filter(Boolean)}function a0e(t){var e=kn(t,r0e),r=xi();return C.createElement(EC,{id:e.id,type:"bar"},n=>C.createElement(C.Fragment,null,C.createElement(PL,{legendPayload:qpe(e)}),C.createElement(wC,{fn:Gpe,args:e}),C.createElement(NL,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:gie(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),C.createElement(n0e,Gl({},e,{id:n}))))}var UL=C.memo(a0e);UL.displayName="Bar";function L5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function d1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(r),!0).forEach(function(n){o0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o0e(t,e,r){return(e=s0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s0e(t){var e=l0e(t,"string");return typeof e=="symbol"?e:e+""}function l0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c0e=(t,e)=>e,u0e=(t,e,r)=>r,f0e=(t,e,r,n)=>n,d0e=(t,e,r,n,i)=>i,i0=ne([iy,d0e],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),h0e=ne([i0],t=>t?.maxBarSize),p0e=(t,e,r,n,i,a)=>a,B5=(t,e,r)=>{var n=r??t;if(!lr(n))return $n(n,e,0)},g0e=ne([pt,iy,c0e,u0e,f0e],(t,e,r,n,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),v0e=(t,e,r,n)=>{var i=pt(t);return i==="horizontal"?Hw(t,"yAxis",r,n):Hw(t,"xAxis",e,n)},m0e=(t,e,r)=>{var n=pt(t);return n==="horizontal"?BP(t,"xAxis",e):BP(t,"yAxis",r)},y0e=(t,e,r)=>{var n={},i=t.filter(ny),a=t.filter(f=>f.stackId==null),o=i.reduce((f,d)=>(f[d.stackId]||(f[d.stackId]=[]),f[d.stackId].push(d),f),n),l=Object.entries(o).map(f=>{var[d,p]=f,g=p.map(b=>b.dataKey),m=B5(e,r,p[0].barSize);return{stackId:d,dataKeys:g,barSize:m}}),c=a.map(f=>{var d=[f.dataKey].filter(g=>g!=null),p=B5(e,r,f.barSize);return{stackId:void 0,dataKeys:d,barSize:p}});return[...l,...c]},x0e=ne([g0e,Yle,m0e],y0e),b0e=(t,e,r,n,i)=>{var a,o,l=i0(t,e,r,n,i);if(l!=null){var c=pt(t),f=tj(t),{maxBarSize:d}=l,p=lr(d)?f:d,g,m;return c==="horizontal"?(g=Hl(t,"xAxis",e,n),m=Vl(t,"xAxis",e,n)):(g=Hl(t,"yAxis",r,n),m=Vl(t,"yAxis",r,n)),(a=(o=pp(g,m,!0))!==null&&o!==void 0?o:p)!==null&&a!==void 0?a:0}},FL=(t,e,r,n)=>{var i=pt(t),a,o;return i==="horizontal"?(a=Hl(t,"xAxis",e,n),o=Vl(t,"xAxis",e,n)):(a=Hl(t,"yAxis",r,n),o=Vl(t,"yAxis",r,n)),pp(a,o)};function _0e(t,e,r,n,i){var a=n.length;if(!(a<1)){var o=$n(t,r,0,!0),l,c=[];if(zi(n[0].barSize)){var f=!1,d=r/a,p=n.reduce((S,I)=>S+(I.barSize||0),0);p+=(a-1)*o,p>=r&&(p-=(a-1)*o,o=0),p>=r&&d>0&&(f=!0,d*=.9,p=a*d);var g=(r-p)/2>>0,m={offset:g-o,size:0};l=n.reduce((S,I)=>{var O,D={stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:m.offset+m.size+o,size:f?d:(O=I.barSize)!==null&&O!==void 0?O:0}},k=[...S,D];return m=k[k.length-1].position,k},c)}else{var b=$n(e,r,0,!0);r-2*b-(a-1)*o<=0&&(o=0);var w=(r-2*b-(a-1)*o)/a;w>1&&(w>>=0);var E=zi(i)?Math.min(w,i):w;l=n.reduce((S,I,O)=>[...S,{stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:b+(w+o)*O+(w-E)/2,size:E}}],c)}return l}}var w0e=(t,e,r,n,i,a,o)=>{var l=lr(o)?e:o,c=_0e(r,n,i!==a?i:a,t,l);return i!==a&&c!=null&&(c=c.map(f=>d1(d1({},f),{},{position:d1(d1({},f.position),{},{offset:f.position.offset-i/2})}))),c},E0e=ne([x0e,tj,Xle,rj,b0e,FL,h0e],w0e),A0e=(t,e,r,n)=>Hl(t,"xAxis",e,n),S0e=(t,e,r,n)=>Hl(t,"yAxis",r,n),C0e=(t,e,r,n)=>Vl(t,"xAxis",e,n),T0e=(t,e,r,n)=>Vl(t,"yAxis",r,n),I0e=ne([E0e,i0],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),O0e=(t,e)=>{var r=US(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var i=t[n];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===r)}}}},R0e=ne([v0e,i0],O0e),P0e=ne([en,tS,A0e,S0e,C0e,T0e,I0e,pt,Jm,FL,R0e,i0,p0e],(t,e,r,n,i,a,o,l,c,f,d,p,g)=>{var{chartData:m,dataStartIndex:b,dataEndIndex:w}=c;if(!(p==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||i==null||a==null||f==null)){var{data:E}=p,S;if(E!=null&&E.length>0?S=E:S=m?.slice(b,w+1),S!=null)return i0e({layout:l,barSettings:p,pos:o,parentViewBox:e,bandSize:f,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:S,offset:t,cells:g})}}),zL=t=>{var{chartData:e}=t,r=dr(),n=xi();return C.useEffect(()=>n?()=>{}:(r(KP(e)),()=>{r(KP(void 0))}),[e,r,n]),null},U5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},VL=Vi({name:"brush",initialState:U5,reducers:{setBrushSettings(t,e){return e.payload==null?U5:e.payload}}}),{setBrushSettings:Eme}=VL.actions,D0e=VL.reducer;function N0e(t,e,r){return(e=M0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M0e(t){var e=k0e(t,"string");return typeof e=="symbol"?e:e+""}function k0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class OC{static create(e){return new OC(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}N0e(OC,"EPS",1e-4);function j0e(t){return(t%180+180)%180}var L0e=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=j0e(i),o=a*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},B0e={dots:[],areas:[],lines:[]},HL=Vi({name:"referenceElements",initialState:B0e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=ss(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=ss(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=ss(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Ame,removeDot:Sme,addArea:Cme,removeArea:Tme,addLine:Ime,removeLine:Ome}=HL.actions,U0e=HL.reducer,F0e=C.createContext(void 0),z0e=t=>{var{children:e}=t,[r]=C.useState("".concat(fp("recharts"),"-clip")),n=CC();if(n==null)return null;var{x:i,y:a,width:o,height:l}=n;return C.createElement(F0e.Provider,{value:r},C.createElement("defs",null,C.createElement("clipPath",{id:r},C.createElement("rect",{x:i,y:a,height:l,width:o}))),e)};function qf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function $L(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function V0e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return L0e(n,r)}function H0e(t,e,r){var n=r==="width",{x:i,y:a,width:o,height:l}=t;return e===1?{start:n?i:a,end:n?i+o:a+l}:{start:n?i+o:a+l,end:n?i:a}}function Uv(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function $0e(t,e){return $L(t,e+1)}function q0e(t,e,r,n,i){for(var a=(n||[]).slice(),{start:o,end:l}=e,c=0,f=1,d=o,p=function(){var b=n?.[c];if(b===void 0)return{v:$L(n,f)};var w=c,E,S=()=>(E===void 0&&(E=r(b,w)),E),I=b.coordinate,O=c===0||Uv(t,I,S,d,l);O||(c=0,d=o,f+=1),O&&(d=I+t*(S()/2+i),c+=f)},g;f<=a.length;)if(g=p(),g)return g.v;return[]}function F5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(r),!0).forEach(function(n){G0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G0e(t,e,r){return(e=W0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W0e(t){var e=K0e(t,"string");return typeof e=="symbol"?e:e+""}function K0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X0e(t,e,r,n,i){for(var a=(n||[]).slice(),o=a.length,{start:l}=e,{end:c}=e,f=function(g){var m=a[g],b,w=()=>(b===void 0&&(b=r(m,g)),b);if(g===o-1){var E=t*(m.coordinate+t*w()/2-c);a[g]=m=Un(Un({},m),{},{tickCoord:E>0?m.coordinate-E*t:m.coordinate})}else a[g]=m=Un(Un({},m),{},{tickCoord:m.coordinate});var S=Uv(t,m.tickCoord,w,l,c);S&&(c=m.tickCoord-t*(w()/2+i),a[g]=Un(Un({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)f(d);return a}function Y0e(t,e,r,n,i,a){var o=(n||[]).slice(),l=o.length,{start:c,end:f}=e;if(a){var d=n[l-1],p=r(d,l-1),g=t*(d.coordinate+t*p/2-f);o[l-1]=d=Un(Un({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate});var m=Uv(t,d.tickCoord,()=>p,c,f);m&&(f=d.tickCoord-t*(p/2+i),o[l-1]=Un(Un({},d),{},{isShow:!0}))}for(var b=a?l-1:l,w=function(I){var O=o[I],D,k=()=>(D===void 0&&(D=r(O,I)),D);if(I===0){var B=t*(O.coordinate-t*k()/2-c);o[I]=O=Un(Un({},O),{},{tickCoord:B<0?O.coordinate-B*t:O.coordinate})}else o[I]=O=Un(Un({},O),{},{tickCoord:O.coordinate});var R=Uv(t,O.tickCoord,k,c,f);R&&(c=O.tickCoord+t*(k()/2+i),o[I]=Un(Un({},O),{},{isShow:!0}))},E=0;E<b;E++)w(E);return o}function RC(t,e,r){var{tick:n,ticks:i,viewBox:a,minTickGap:o,orientation:l,interval:c,tickFormatter:f,unit:d,angle:p}=t;if(!i||!i.length||!n)return[];if(De(c)||Jl.isSsr){var g;return(g=$0e(i,De(c)?c:0))!==null&&g!==void 0?g:[]}var m=[],b=l==="top"||l==="bottom"?"width":"height",w=d&&b==="width"?Zh(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},E=(O,D)=>{var k=typeof f=="function"?f(O.value,D):O.value;return b==="width"?V0e(Zh(k,{fontSize:e,letterSpacing:r}),w,p):Zh(k,{fontSize:e,letterSpacing:r})[b]},S=i.length>=2?hn(i[1].coordinate-i[0].coordinate):1,I=H0e(a,S,b);return c==="equidistantPreserveStart"?q0e(S,I,E,i,o):(c==="preserveStart"||c==="preserveStartEnd"?m=Y0e(S,I,E,i,o,c==="preserveStartEnd"):m=X0e(S,I,E,i,o),m.filter(O=>O.isShow))}var Q0e=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=t,o=0;if(e){e.forEach(d=>{if(d){var p=d.getBoundingClientRect();p.width>o&&(o=p.width)}});var l=r?r.getBoundingClientRect().width:0,c=i+a,f=o+c+l+(r?n:0);return Math.round(f)}return 0},Z0e=["axisLine","width","height","className","hide","ticks"],J0e=["viewBox"],ege=["viewBox"];function Qw(t,e){if(t==null)return{};var r,n,i=tge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function tge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fu.apply(null,arguments)}function z5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(r),!0).forEach(function(n){rge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rge(t,e,r){return(e=nge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nge(t){var e=ige(t,"string");return typeof e=="symbol"?e:e+""}function ige(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PC={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function age(t){var{x:e,y:r,width:n,height:i,orientation:a,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var f=Xr(Xr(Xr({},c),fr(l,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!o||a==="bottom"&&o);f=Xr(Xr({},f),{},{x1:e,y1:r+d*i,x2:e+n,y2:r+d*i})}else{var p=+(a==="left"&&!o||a==="right"&&o);f=Xr(Xr({},f),{},{x1:e+p*n,y1:r,x2:e+p*n,y2:r+i})}return C.createElement("line",fu({},f,{className:xt("recharts-cartesian-axis-line",su(l,"className"))}))}function oge(t,e,r,n,i,a,o,l,c){var f,d,p,g,m,b,w=l?-1:1,E=t.tickSize||o,S=De(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":f=d=t.coordinate,g=r+ +!l*i,p=g-w*E,b=p-w*c,m=S;break;case"left":p=g=t.coordinate,d=e+ +!l*n,f=d-w*E,m=f-w*c,b=S;break;case"right":p=g=t.coordinate,d=e+ +l*n,f=d+w*E,m=f+w*c,b=S;break;default:f=d=t.coordinate,g=r+ +l*i,p=g+w*E,b=p+w*c,m=S;break}return{line:{x1:f,y1:p,x2:d,y2:g},tick:{x:m,y:b}}}function sge(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function lge(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function cge(t){var{option:e,tickProps:r,value:n}=t,i,a=xt(r.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(e))i=C.cloneElement(e,Xr(Xr({},r),{},{className:a}));else if(typeof e=="function")i=e(Xr(Xr({},r),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=xt(o,e?.className)),i=C.createElement(dy,fu({},r,{className:o}),n)}return i}function uge(t){var{ticks:e=[],tick:r,tickLine:n,stroke:i,tickFormatter:a,unit:o,padding:l,tickTextProps:c,orientation:f,mirror:d,x:p,y:g,width:m,height:b,tickSize:w,tickMargin:E,fontSize:S,letterSpacing:I,getTicksConfig:O,events:D}=t,k=RC(Xr(Xr({},O),{},{ticks:e}),S,I),B=sge(f,d),R=lge(f,d),N=Do(O),L=fr(r,!1),U=Xr(Xr({},N),{},{fill:"none"},fr(n,!1)),z=k.map((H,j)=>{var{line:ue,tick:ye}=oge(H,p,g,m,b,f,w,d,E),X=Xr(Xr(Xr(Xr({textAnchor:B,verticalAnchor:R},N),{},{stroke:"none",fill:i},L),ye),{},{index:j,payload:H,visibleTicksCount:k.length,tickFormatter:a,padding:l},c);return C.createElement(Mn,fu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},zp(D,H,j)),n&&C.createElement("line",fu({},U,ue,{className:xt("recharts-cartesian-axis-tick-line",su(n,"className"))})),r&&C.createElement(cge,{option:r,tickProps:X,value:"".concat(typeof a=="function"?a(H.value,j):H.value).concat(o||"")}))});return z.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},z):null}var fge=C.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:a,hide:o,ticks:l}=t,c=Qw(t,Z0e),[f,d]=C.useState(""),[p,g]=C.useState(""),m=C.useRef([]);C.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return Q0e({ticks:m.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var b=C.useCallback(w=>{if(w){var E=w.getElementsByClassName("recharts-cartesian-axis-tick-value");m.current=Array.from(E);var S=E[0];if(S){var I=window.getComputedStyle(S),O=I.fontSize,D=I.letterSpacing;(O!==f||D!==p)&&(d(O),g(D))}}},[f,p]);return o||n!=null&&n<=0||i!=null&&i<=0?null:C.createElement(Mn,{className:xt("recharts-cartesian-axis",a),ref:b},C.createElement(age,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Do(t)}),C.createElement(uge,{ticks:l,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:f,letterSpacing:p,getTicksConfig:t,events:c}),C.createElement(vde,{x:t.x,y:t.y,width:t.width,height:t.height},C.createElement(Cde,{label:t.label}),t.children))}),dge=C.memo(fge,(t,e)=>{var{viewBox:r}=t,n=Qw(t,J0e),{viewBox:i}=e,a=Qw(e,ege);return qf(r,i)&&qf(n,a)}),DC=C.forwardRef((t,e)=>{var r=kn(t,PC);return C.createElement(dge,fu({},r,{ref:e}))});DC.displayName="CartesianAxis";var hge=["x1","y1","x2","y2","key"],pge=["offset"],gge=["xAxisId","yAxisId"],vge=["xAxisId","yAxisId"];function V5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?V5(Object(r),!0).forEach(function(n){mge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mge(t,e,r){return(e=yge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yge(t){var e=xge(t,"string");return typeof e=="symbol"?e:e+""}function xge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gc.apply(null,arguments)}function Fv(t,e){if(t==null)return{};var r,n,i=bge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function bge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var _ge=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:o,ry:l}=t;return C.createElement("rect",{x:n,y:i,ry:l,width:a,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function qL(t,e){var r;if(C.isValidElement(t))r=C.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var{x1:n,y1:i,x2:a,y2:o,key:l}=e,c=Fv(e,hge),f=Do(c),{offset:d}=f,p=Fv(f,pge);r=C.createElement("line",Gc({},p,{x1:n,y1:i,x2:a,y2:o,fill:"none",key:l}))}return r}function wge(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,l=Fv(t,gge),c=i.map((f,d)=>{var p=Vn(Vn({},l),{},{x1:e,y1:f,x2:e+r,y2:f,key:"line-".concat(d),index:d});return qL(n,p)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Ege(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,l=Fv(t,vge),c=i.map((f,d)=>{var p=Vn(Vn({},l),{},{x1:f,y1:e,x2:f,y2:e+r,key:"line-".concat(d),index:d});return qL(n,p)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Age(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:a,height:o,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length)return null;var f=l.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==f[0]&&f.unshift(0);var d=f.map((p,g)=>{var m=!f[g+1],b=m?i+o-p:f[g+1]-p;if(b<=0)return null;var w=g%e.length;return C.createElement("rect",{key:"react-".concat(g),y:p,x:n,height:b,width:a,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Sge(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:o,height:l,verticalPoints:c}=t;if(!e||!r||!r.length)return null;var f=c.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==f[0]&&f.unshift(0);var d=f.map((p,g)=>{var m=!f[g+1],b=m?i+o-p:f[g+1]-p;if(b<=0)return null;var w=g%r.length;return C.createElement("rect",{key:"react-".concat(g),x:p,y:a,width:b,height:l,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Cge=(t,e)=>{var{xAxis:r,width:n,height:i,offset:a}=t;return V9(RC(Vn(Vn(Vn({},PC),r),{},{ticks:H9(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},Tge=(t,e)=>{var{yAxis:r,width:n,height:i,offset:a}=t;return V9(RC(Vn(Vn(Vn({},PC),r),{},{ticks:H9(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},Ige={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function NC(t){var e=nS(),r=iS(),n=W9(),i=Vn(Vn({},kn(t,Ige)),{},{x:De(t.x)?t.x:n.left,y:De(t.y)?t.y:n.top,width:De(t.width)?t.width:n.width,height:De(t.height)?t.height:n.height}),{xAxisId:a,yAxisId:o,x:l,y:c,width:f,height:d,syncWithTicks:p,horizontalValues:g,verticalValues:m}=i,b=xi(),w=Oe(L=>UP(L,"xAxis",a,b)),E=Oe(L=>UP(L,"yAxis",o,b));if(!De(f)||f<=0||!De(d)||d<=0||!De(l)||l!==+l||!De(c)||c!==+c)return null;var S=i.verticalCoordinatesGenerator||Cge,I=i.horizontalCoordinatesGenerator||Tge,{horizontalPoints:O,verticalPoints:D}=i;if((!O||!O.length)&&typeof I=="function"){var k=g&&g.length,B=I({yAxis:E?Vn(Vn({},E),{},{ticks:k?g:E.ticks}):void 0,width:e,height:r,offset:n},k?!0:p);Qh(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(O=B)}if((!D||!D.length)&&typeof S=="function"){var R=m&&m.length,N=S({xAxis:w?Vn(Vn({},w),{},{ticks:R?m:w.ticks}):void 0,width:e,height:r,offset:n},R?!0:p);Qh(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(D=N)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(_ge,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(Age,Gc({},i,{horizontalPoints:O})),C.createElement(Sge,Gc({},i,{verticalPoints:D})),C.createElement(wge,Gc({},i,{offset:n,horizontalPoints:O,xAxis:w,yAxis:E})),C.createElement(Ege,Gc({},i,{offset:n,verticalPoints:D,xAxis:w,yAxis:E})))}NC.displayName="CartesianGrid";var GL=(t,e,r,n)=>Hl(t,"xAxis",e,n),WL=(t,e,r,n)=>Vl(t,"xAxis",e,n),KL=(t,e,r,n)=>Hl(t,"yAxis",r,n),XL=(t,e,r,n)=>Vl(t,"yAxis",r,n),Oge=ne([pt,GL,KL,WL,XL],(t,e,r,n,i)=>Zl(t,"xAxis")?pp(e,n,!1):pp(r,i,!1)),Rge=(t,e,r,n,i)=>i;function Pge(t){return t.type==="line"}var Dge=ne([iy,Rge],(t,e)=>t.filter(Pge).find(r=>r.id===e)),Nge=ne([pt,GL,KL,WL,XL,Dge,Oge,Jm],(t,e,r,n,i,a,o,l)=>{var{chartData:c,dataStartIndex:f,dataEndIndex:d}=l;if(!(a==null||e==null||r==null||n==null||i==null||n.length===0||i.length===0||o==null)){var{dataKey:p,data:g}=a,m;if(g!=null&&g.length>0?m=g:m=c?.slice(f,d+1),m!=null)return t1e({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:o,displayedData:m})}}),Mge=["id"],kge=["type","layout","connectNulls","needClip"],jge=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function H5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ni(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(r),!0).forEach(function(n){Lge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lge(t,e,r){return(e=Bge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bge(t){var e=Uge(t,"string");return typeof e=="symbol"?e:e+""}function Uge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MC(t,e){if(t==null)return{};var r,n,i=Fge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Fge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},du.apply(null,arguments)}var zge=t=>{var{dataKey:e,name:r,stroke:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:id(r,e),payload:t}]};function Vge(t){var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:a,name:o,hide:l,unit:c}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:id(o,e),hide:l,type:t.tooltipType,color:t.stroke,unit:c}}}var YL=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Hge(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],i=0;i<e;++i)n=[...n,...r];return n}var $ge=(t,e,r)=>{var n=r.reduce((p,g)=>p+g);if(!n)return YL(e,t);for(var i=Math.floor(t/n),a=t%n,o=e-t,l=[],c=0,f=0;c<r.length;f+=r[c],++c)if(f+r[c]>a){l=[...r.slice(0,c),a-f];break}var d=l.length%2===0?[0,o]:[o];return[...Hge(r,i),...l,...d].map(p=>"".concat(p,"px")).join(", ")};function qge(t,e){var r;if(C.isValidElement(t))r=C.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var n=xt("recharts-line-dot",typeof t!="boolean"?t.className:"");r=C.createElement(AL,du({},e,{className:n}))}return r}function Gge(t,e){return t==null?!1:e?!0:t.length===1}function Wge(t){var{clipPathId:e,points:r,props:n}=t,{dot:i,dataKey:a,needClip:o}=n;if(!Gge(r,i))return null;var{id:l}=n,c=MC(n,Mge),f=jk(i),d=Do(c),p=fr(i,!0),g=r.map((b,w)=>{var E=Ni(Ni(Ni({key:"dot-".concat(w),r:3},d),p),{},{index:w,cx:b.x,cy:b.y,dataKey:a,value:b.value,payload:b.payload,points:r});return qge(i,E)}),m={clipPath:o?"url(#clipPath-".concat(f?"":"dots-").concat(e,")"):void 0};return C.createElement(Mn,du({className:"recharts-line-dots",key:"dots"},m),g)}function Kge(t){var{showLabels:e,children:r,points:n}=t,i=C.useMemo(()=>n?.map(a=>{var o={x:a.x,y:a.y,width:0,height:0};return Ni(Ni({},o),{},{value:a.value,payload:a.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[n]);return C.createElement(wL,{value:e?i:null},r)}function $5(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:i,props:a}=t,{type:o,layout:l,connectNulls:c,needClip:f}=a,d=MC(a,kge),p=Ni(Ni({},fr(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:f?"url(#clipPath-".concat(e,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:i??a.strokeDasharray});return C.createElement(C.Fragment,null,n?.length>1&&C.createElement(oS,du({},p,{pathRef:r})),C.createElement(Wge,{points:n,clipPathId:e,props:a}))}function Xge(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Yge(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:f,animationDuration:d,animationEasing:p,animateNewValues:g,width:m,height:b,onAnimationEnd:w,onAnimationStart:E}=r,S=i.current,I=Gp(r,"recharts-line-"),[O,D]=C.useState(!1),k=!O,B=C.useCallback(()=>{typeof w=="function"&&w(),D(!1)},[w]),R=C.useCallback(()=>{typeof E=="function"&&E(),D(!0)},[E]),N=Xge(n.current),L=a.current;return C.createElement(Kge,{points:o,showLabels:k},r.children,C.createElement(qp,{animationId:I,begin:f,duration:d,isActive:c,easing:p,onAnimationEnd:B,onAnimationStart:R,key:I},U=>{var z=gr(L,N+L,U),H=Math.min(z,N),j;if(c)if(l){var ue="".concat(l).split(/[,\s]+/gim).map(re=>parseFloat(re));j=$ge(H,N,ue)}else j=YL(N,H);else j=l==null?void 0:String(l);if(S){var ye=S.length/o.length,X=U===1?o:o.map((re,he)=>{var Ae=Math.floor(he*ye);if(S[Ae]){var ke=S[Ae];return Ni(Ni({},re),{},{x:gr(ke.x,re.x,U),y:gr(ke.y,re.y,U)})}return g?Ni(Ni({},re),{},{x:gr(m*2,re.x,U),y:gr(b/2,re.y,U)}):Ni(Ni({},re),{},{x:re.x,y:re.y})});return i.current=X,C.createElement($5,{props:r,points:X,clipPathId:e,pathRef:n,strokeDasharray:j})}return U>0&&N>0&&(i.current=o,a.current=H),C.createElement($5,{props:r,points:o,clipPathId:e,pathRef:n,strokeDasharray:j})}),C.createElement(pC,{label:r.label}))}function Qge(t){var{clipPathId:e,props:r}=t,n=C.useRef(null),i=C.useRef(0),a=C.useRef(null);return C.createElement(Yge,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var Zge=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:Yt(t.payload,e)});class Jge extends C.Component{render(){var e,{hide:r,dot:n,points:i,className:a,xAxisId:o,yAxisId:l,top:c,left:f,width:d,height:p,id:g,needClip:m}=this.props;if(r)return null;var b=xt("recharts-line",a),w=g,{r:E=3,strokeWidth:S=2}=(e=fr(n,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},I=jk(n),O=E*2+S;return C.createElement(C.Fragment,null,C.createElement(Mn,{className:b},m&&C.createElement("defs",null,C.createElement(LL,{clipPathId:w,xAxisId:o,yAxisId:l}),!I&&C.createElement("clipPath",{id:"clipPath-dots-".concat(w)},C.createElement("rect",{x:f-O/2,y:c-O/2,width:d+O,height:p+O}))),C.createElement(jL,{xAxisId:o,yAxisId:l,data:i,dataPointFormatter:Zge,errorBarOffset:0},C.createElement(Qge,{props:this.props,clipPathId:w}))),C.createElement(xpe,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var QL={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Jl.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function e1e(t){var e=kn(t,QL),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:l,dot:c,hide:f,isAnimationActive:d,label:p,legendType:g,xAxisId:m,yAxisId:b,id:w}=e,E=MC(e,jge),{needClip:S}=IC(m,b),I=CC(),O=qm(),D=xi(),k=Oe(U=>Nge(U,m,b,D,w));if(O!=="horizontal"&&O!=="vertical"||k==null||I==null)return null;var{height:B,width:R,x:N,y:L}=I;return C.createElement(Jge,du({},E,{id:w,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,isAnimationActive:d,hide:f,label:p,legendType:g,xAxisId:m,yAxisId:b,points:k,layout:O,height:B,width:R,left:N,top:L,needClip:S}))}function t1e(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:o,bandSize:l,displayedData:c}=t;return c.map((f,d)=>{var p=Yt(f,o);if(e==="horizontal"){var g=bR({axis:r,ticks:i,bandSize:l,entry:f,index:d}),m=lr(p)?null:n.scale(p);return{x:g,y:m,value:p,payload:f}}var b=lr(p)?null:r.scale(p),w=bR({axis:n,ticks:a,bandSize:l,entry:f,index:d});return b==null||w==null?null:{x:b,y:w,value:p,payload:f}}).filter(Boolean)}function r1e(t){var e=kn(t,QL),r=xi();return C.createElement(EC,{id:e.id,type:"line"},n=>C.createElement(C.Fragment,null,C.createElement(PL,{legendPayload:zge(e)}),C.createElement(wC,{fn:Vge,args:e}),C.createElement(NL,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),C.createElement(e1e,du({},e,{id:n}))))}var ZL=C.memo(r1e);ZL.displayName="Line";var n1e=["dangerouslySetInnerHTML","ticks"],i1e=["id"],a1e=["domain"],o1e=["domain"];function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zw.apply(null,arguments)}function zv(t,e){if(t==null)return{};var r,n,i=s1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function s1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function l1e(t){var e=dr();return C.useEffect(()=>(e(ope(t)),()=>{e(spe(t))}),[t,e]),null}var c1e=t=>{var{xAxisId:e,className:r}=t,n=Oe(tS),i=xi(),a="xAxis",o=Oe(E=>fd(E,a,e,i)),l=Oe(E=>Bj(E,a,e,i)),c=Oe(E=>Mj(E,e)),f=Oe(E=>zce(E,e)),d=Oe(E=>fj(E,e));if(c==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:p,ticks:g}=t,m=zv(t,n1e),{id:b}=d,w=zv(d,i1e);return C.createElement(DC,Zw({},m,w,{scale:o,x:f.x,y:f.y,width:c.width,height:c.height,className:xt("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:l}))},u1e={allowDataOverflow:Ri.allowDataOverflow,allowDecimals:Ri.allowDecimals,allowDuplicatedCategory:Ri.allowDuplicatedCategory,height:Ri.height,hide:!1,mirror:Ri.mirror,orientation:Ri.orientation,padding:Ri.padding,reversed:Ri.reversed,scale:Ri.scale,tickCount:Ri.tickCount,type:Ri.type,xAxisId:0},f1e=t=>{var e,r,n,i,a,o=kn(t,u1e);return C.createElement(C.Fragment,null,C.createElement(l1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),C.createElement(c1e,o))},d1e=(t,e)=>{var{domain:r}=t,n=zv(t,a1e),{domain:i}=e,a=zv(e,o1e);return qf(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:qf({domain:r},{domain:i}):!1},kC=C.memo(f1e,d1e);kC.displayName="XAxis";var h1e=["dangerouslySetInnerHTML","ticks"],p1e=["id"],g1e=["domain"],v1e=["domain"];function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jw.apply(null,arguments)}function Vv(t,e){if(t==null)return{};var r,n,i=m1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function m1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function y1e(t){var e=dr();return C.useEffect(()=>(e(lpe(t)),()=>{e(cpe(t))}),[t,e]),null}var x1e=t=>{var{yAxisId:e,className:r,width:n,label:i}=t,a=C.useRef(null),o=C.useRef(null),l=Oe(tS),c=xi(),f=dr(),d="yAxis",p=Oe(k=>fd(k,d,e,c)),g=Oe(k=>kj(k,e)),m=Oe(k=>Hce(k,e)),b=Oe(k=>Bj(k,d,e,c)),w=Oe(k=>dj(k,e));if(C.useLayoutEffect(()=>{if(!(n!=="auto"||!g||hC(i)||C.isValidElement(i)||w==null)){var k=a.current;if(k){var B=k.getCalculatedWidth();Math.round(g.width)!==Math.round(B)&&f(upe({id:e,width:B}))}}},[b,g,f,i,e,n,w]),g==null||m==null||w==null)return null;var{dangerouslySetInnerHTML:E,ticks:S}=t,I=Vv(t,h1e),{id:O}=w,D=Vv(w,p1e);return C.createElement(DC,Jw({},I,D,{ref:a,labelRef:o,scale:p,x:m.x,y:m.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:xt("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:b}))},b1e={allowDataOverflow:Pi.allowDataOverflow,allowDecimals:Pi.allowDecimals,allowDuplicatedCategory:Pi.allowDuplicatedCategory,hide:!1,mirror:Pi.mirror,orientation:Pi.orientation,padding:Pi.padding,reversed:Pi.reversed,scale:Pi.scale,tickCount:Pi.tickCount,type:Pi.type,width:Pi.width,yAxisId:0},_1e=t=>{var e,r,n,i,a,o=kn(t,b1e);return C.createElement(C.Fragment,null,C.createElement(y1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),C.createElement(x1e,o))},w1e=(t,e)=>{var{domain:r}=t,n=Vv(t,g1e),{domain:i}=e,a=Vv(e,v1e);return qf(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:qf({domain:r},{domain:i}):!1},jC=C.memo(_1e,w1e);jC.displayName="YAxis";var x_={exports:{}},b_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q5;function E1e(){if(q5)return b_;q5=1;var t=Wf();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,l=t.useDebugValue;return b_.useSyncExternalStoreWithSelector=function(c,f,d,p,g){var m=i(null);if(m.current===null){var b={hasValue:!1,value:null};m.current=b}else b=m.current;m=o(function(){function E(k){if(!S){if(S=!0,I=k,k=p(k),g!==void 0&&b.hasValue){var B=b.value;if(g(B,k))return O=B}return O=k}if(B=O,r(I,k))return B;var R=p(k);return g!==void 0&&g(B,R)?(I=k,B):(I=k,O=R)}var S=!1,I,O,D=d===void 0?null:d;return[function(){return E(f())},D===null?void 0:function(){return E(D())}]},[f,d,p,g]);var w=n(c,m[0],m[1]);return a(function(){b.hasValue=!0,b.value=w},[w]),l(w),w},b_}var G5;function A1e(){return G5||(G5=1,x_.exports=E1e()),x_.exports}A1e();function S1e(t){t()}function C1e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){S1e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var W5={notify(){},get:()=>[]};function T1e(t,e){let r,n=W5,i=0,a=!1;function o(w){d();const E=n.subscribe(w);let S=!1;return()=>{S||(S=!0,E(),p())}}function l(){n.notify()}function c(){b.onStateChange&&b.onStateChange()}function f(){return a}function d(){i++,r||(r=t.subscribe(c),n=C1e())}function p(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=W5)}function g(){a||(a=!0,d())}function m(){a&&(a=!1,p())}const b={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:f,trySubscribe:g,tryUnsubscribe:m,getListeners:()=>n};return b}var I1e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O1e=I1e(),R1e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",P1e=R1e(),D1e=()=>O1e||P1e?C.useLayoutEffect:C.useEffect,N1e=D1e(),M1e=Symbol.for("react-redux-context"),k1e=typeof globalThis<"u"?globalThis:{};function j1e(){if(!C.createContext)return{};const t=k1e[M1e]??=new Map;let e=t.get(C.createContext);return e||(e=C.createContext(null),t.set(C.createContext,e)),e}var L1e=j1e();function B1e(t){const{children:e,context:r,serverState:n,store:i}=t,a=C.useMemo(()=>{const c=T1e(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),o=C.useMemo(()=>i.getState(),[i]);N1e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const l=r||L1e;return C.createElement(l.Provider,{value:a},e)}var U1e=B1e,F1e=(t,e)=>e,LC=ne([F1e,pt,lj,rn,Jj,Is,Kue,en],Jue),BC=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},JL=va("mouseClick"),eB=Hp();eB.startListening({actionCreator:JL,effect:(t,e)=>{var r=t.payload,n=LC(e.getState(),BC(r));n?.activeIndex!=null&&e.dispatch(rue({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var eE=va("mouseMove"),tB=Hp();tB.startListening({actionCreator:eE,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=nC(n,n.tooltip.settings.shared),a=LC(n,BC(r));i==="axis"&&(a?.activeIndex!=null?e.dispatch(Gj({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(qj()))}});var K5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rB=Vi({name:"rootProps",initialState:K5,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:K5.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),z1e=rB.reducer,{updateOptions:V1e}=rB.actions,nB=Vi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:H1e}=nB.actions,$1e=nB.reducer,iB=va("keyDown"),aB=va("focus"),UC=Hp();UC.startListening({actionCreator:iB,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(iC(i,hd(r))),l=Is(r);if(a==="Enter"){var c=Mv(r,"axis","hover",String(i.index));e.dispatch(qw({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=Wce(r),d=f==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,g=o+p*d;if(!(l==null||g>=l.length||g<0)){var m=Mv(r,"axis","hover",String(g));e.dispatch(qw({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});UC.startListening({actionCreator:aB,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",o=Mv(r,"axis","hover",String(a));e.dispatch(qw({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var aa=va("externalEvent"),oB=Hp();oB.startListening({actionCreator:aa,effect:(t,e)=>{if(t.payload.handler!=null){var r=e.getState(),n={activeCoordinate:Bue(r),activeDataKey:nL(r),activeIndex:$l(r),activeLabel:rL(r),activeTooltipIndex:$l(r),isTooltipActive:Uue(r)};t.payload.handler(n,t.payload.reactEvent)}}});var q1e=ne([dd],t=>t.tooltipItemPayloads),G1e=ne([q1e,r0,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(l=>l.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var o=e(a,r);return o}}}),sB=va("touchMove"),lB=Hp();lB.startListening({actionCreator:sB,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=nC(n,n.tooltip.settings.shared);if(i==="axis"){var a=LC(n,BC({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&e.dispatch(Gj({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(q9),d=(o=c.getAttribute(G9))!==null&&o!==void 0?o:void 0,p=G1e(e.getState(),f,d);e.dispatch($j({activeDataKey:d,activeIndex:f,activeCoordinate:p}))}}});var W1e=m9({brush:D0e,cartesianAxis:fpe,chartData:gfe,errorBars:Ppe,graphicalItems:Rhe,layout:Kne,legend:Bie,options:ufe,polarAxis:Wde,polarOptions:$1e,referenceElements:U0e,rootProps:z1e,tooltip:nue}),K1e=function(e){return xne({reducer:W1e,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([eB.middleware,tB.middleware,UC.middleware,oB.middleware,lB.middleware]),devTools:Jl.devToolsEnabled})};function cB(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=xi(),a=C.useRef(null);if(i)return r;a.current==null&&(a.current=K1e(e));var o=XA;return C.createElement(U1e,{context:o,store:a.current},r)}function uB(t){var{layout:e,width:r,height:n,margin:i}=t,a=dr(),o=xi();return C.useEffect(()=>{o||(a(qne(e)),a(Gne({width:r,height:n})),a($ne(i)))},[a,o,e,r,n,i]),null}function fB(t){var e=dr();return C.useEffect(()=>{e(V1e(t))},[e,t]),null}var X1e=["children"];function Y1e(t,e){if(t==null)return{};var r,n,i=Q1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Q1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Hv(){return Hv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hv.apply(null,arguments)}var Z1e={width:"100%",height:"100%"},J1e=C.forwardRef((t,e)=>{var r=nS(),n=iS(),i=Q9();if(!Ff(r)||!Ff(n))return null;var{children:a,otherAttributes:o,title:l,desc:c}=t,f,d;return typeof o.tabIndex=="number"?f=o.tabIndex:f=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0,C.createElement(FA,Hv({},o,{title:l,desc:c,role:d,tabIndex:f,width:r,height:n,style:Z1e,ref:e}),a)}),eve=t=>{var{children:e}=t,r=Oe($m);if(!r)return null;var{width:n,height:i,y:a,x:o}=r;return C.createElement(FA,{width:n,height:i,x:o,y:a},e)},X5=C.forwardRef((t,e)=>{var{children:r}=t,n=Y1e(t,X1e),i=xi();return i?C.createElement(eve,null,r):C.createElement(J1e,Hv({ref:e},n),r)});function tve(){var t=dr(),[e,r]=C.useState(null),n=Oe(Eie);return C.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;zi(a)&&a!==n&&t(Wne(a))}},[e,t,n]),r}function Y5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(r),!0).forEach(function(n){nve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nve(t,e,r){return(e=ive(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ive(t){var e=ave(t,"string");return typeof e=="symbol"?e:e+""}function ave(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ove=C.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:f,onMouseLeave:d,onMouseMove:p,onMouseUp:g,onTouchEnd:m,onTouchMove:b,onTouchStart:w,style:E,width:S}=t,I=dr(),[O,D]=C.useState(null),[k,B]=C.useState(null);Afe();var R=tve(),N=C.useCallback(ee=>{R(ee),typeof e=="function"&&e(ee),D(ee),B(ee)},[R,e,D,B]),L=C.useCallback(ee=>{I(JL(ee)),I(aa({handler:a,reactEvent:ee}))},[I,a]),U=C.useCallback(ee=>{I(eE(ee)),I(aa({handler:f,reactEvent:ee}))},[I,f]),z=C.useCallback(ee=>{I(qj()),I(aa({handler:d,reactEvent:ee}))},[I,d]),H=C.useCallback(ee=>{I(eE(ee)),I(aa({handler:p,reactEvent:ee}))},[I,p]),j=C.useCallback(()=>{I(aB())},[I]),ue=C.useCallback(ee=>{I(iB(ee.key))},[I]),ye=C.useCallback(ee=>{I(aa({handler:o,reactEvent:ee}))},[I,o]),X=C.useCallback(ee=>{I(aa({handler:l,reactEvent:ee}))},[I,l]),re=C.useCallback(ee=>{I(aa({handler:c,reactEvent:ee}))},[I,c]),he=C.useCallback(ee=>{I(aa({handler:g,reactEvent:ee}))},[I,g]),Ae=C.useCallback(ee=>{I(aa({handler:w,reactEvent:ee}))},[I,w]),ke=C.useCallback(ee=>{I(sB(ee)),I(aa({handler:b,reactEvent:ee}))},[I,b]),G=C.useCallback(ee=>{I(aa({handler:m,reactEvent:ee}))},[I,m]);return C.createElement(cL.Provider,{value:O},C.createElement(Bk.Provider,{value:k},C.createElement("div",{className:xt("recharts-wrapper",n),style:rve({position:"relative",cursor:"default",width:S,height:i},E),onClick:L,onContextMenu:ye,onDoubleClick:X,onFocus:j,onKeyDown:ue,onMouseDown:re,onMouseEnter:U,onMouseLeave:z,onMouseMove:H,onMouseUp:he,onTouchEnd:G,onTouchMove:ke,onTouchStart:Ae,ref:N},r)))}),sve=["children","className","width","height","style","compact","title","desc"];function lve(t,e){if(t==null)return{};var r,n,i=cve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function cve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var dB=C.forwardRef((t,e)=>{var{children:r,className:n,width:i,height:a,style:o,compact:l,title:c,desc:f}=t,d=lve(t,sve),p=Do(d);return l?C.createElement(X5,{otherAttributes:p,title:c,desc:f},r):C.createElement(ove,{className:n,style:o,width:i,height:a,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},C.createElement(X5,{otherAttributes:p,title:c,desc:f,ref:e},C.createElement(z0e,null,r)))}),uve=["width","height"];function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tE.apply(null,arguments)}function fve(t,e){if(t==null)return{};var r,n,i=dve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function dve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var hve={top:5,right:5,bottom:5,left:5},pve={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:hve,reverseStackOrder:!1,syncMethod:"index"},hB=C.forwardRef(function(e,r){var n,i=kn(e.categoricalChartProps,pve),{width:a,height:o}=i,l=fve(i,uve);if(!Ff(a)||!Ff(o))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,categoricalChartProps:g}=e,m={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,eventEmitter:void 0};return C.createElement(cB,{preloadedState:{options:m},reduxStoreName:(n=g.id)!==null&&n!==void 0?n:c},C.createElement(zL,{chartData:g.data}),C.createElement(uB,{width:a,height:o,layout:i.layout,margin:i.margin}),C.createElement(fB,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(dB,tE({},l,{width:a,height:o,ref:r})))}),gve=["axis"],vve=C.forwardRef((t,e)=>C.createElement(hB,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:gve,tooltipPayloadSearcher:dC,categoricalChartProps:t,ref:e})),mve=["axis","item"],yve=C.forwardRef((t,e)=>C.createElement(hB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mve,tooltipPayloadSearcher:dC,categoricalChartProps:t,ref:e}));function xve(t){var e=dr();return C.useEffect(()=>{e(H1e(t))},[e,t]),null}var bve=["width","height","layout"];function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rE.apply(null,arguments)}function _ve(t,e){if(t==null)return{};var r,n,i=wve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Eve={top:5,right:5,bottom:5,left:5},Ave={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Eve,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Sve=C.forwardRef(function(e,r){var n,i=kn(e.categoricalChartProps,Ave),{width:a,height:o,layout:l}=i,c=_ve(i,bve);if(!Ff(a)||!Ff(o))return null;var{chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g}=e,m={chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,eventEmitter:void 0};return C.createElement(cB,{preloadedState:{options:m},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:f},C.createElement(zL,{chartData:i.data}),C.createElement(uB,{width:a,height:o,layout:l,margin:i.margin}),C.createElement(fB,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(xve,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),C.createElement(dB,rE({width:a,height:o},c,{ref:r})))}),Cve=["item"],Tve={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},pB=C.forwardRef((t,e)=>{var r=kn(t,Tve);return C.createElement(Sve,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Cve,tooltipPayloadSearcher:dC,categoricalChartProps:r,ref:e})});const Ive=()=>{const{intakes:t}=Oo(),e=C.useMemo(()=>{const n=new Date,i=[];for(let a=6;a>=0;a--){const o=new Date(n);o.setDate(o.getDate()-a);const l=o.toISOString().split("T")[0],f=t.filter(d=>d.date.startsWith(l)).reduce((d,p)=>d+p.calories,0);i.push({date:`${o.getMonth()+1}/${o.getDate()}`,calories:f})}return i},[t]),r=e.some(n=>n.calories>0);return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"📈 週間カロリー推移"}),r?y.jsx(fy,{width:"100%",height:250,children:y.jsxs(vve,{data:e,margin:{top:10,right:10,left:-20,bottom:5},children:[y.jsx(NC,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),y.jsx(kC,{dataKey:"date",tick:{fontSize:12},stroke:"#9ca3af"}),y.jsx(jC,{tick:{fontSize:12},stroke:"#9ca3af"}),y.jsx(uy,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"},labelStyle:{fontWeight:600,marginBottom:"4px"}}),y.jsx(ZL,{type:"monotone",dataKey:"calories",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4},activeDot:{r:6},name:"カロリー (kcal)"})]})}):y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[y.jsx("p",{children:"データがありません"}),y.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、カロリーの推移が表示されます"})]})]})},Ove=()=>{const{expenses:t}=Ro(),e=C.useMemo(()=>{const n=new Date,i=[];for(let a=5;a>=0;a--){const o=new Date(n.getFullYear(),n.getMonth()-a,1),l=o.getFullYear(),c=o.getMonth()+1,d=t.filter(p=>{const g=new Date(p.date);return g.getFullYear()===l&&g.getMonth()+1===c}).reduce((p,g)=>p+g.amount,0);i.push({month:`${c}月`,amount:d})}return i},[t]),r=e.some(n=>n.amount>0);return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"💰 月間支出推移"}),r?y.jsx(fy,{width:"100%",height:250,children:y.jsxs(yve,{data:e,margin:{top:10,right:10,left:-20,bottom:5},children:[y.jsx(NC,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),y.jsx(kC,{dataKey:"month",tick:{fontSize:12},stroke:"#9ca3af"}),y.jsx(jC,{tick:{fontSize:12},stroke:"#9ca3af"}),y.jsx(uy,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"},labelStyle:{fontWeight:600,marginBottom:"4px"},formatter:n=>`¥${n.toLocaleString()}`}),y.jsx(UL,{dataKey:"amount",fill:"#22c55e",radius:[4,4,0,0],name:"支出額"})]})}):y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[y.jsx("p",{children:"データがありません"}),y.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、支出の推移が表示されます"})]})]})},Rve=()=>{const{intakes:t}=Oo(),e=C.useMemo(()=>{const r=new Map;return t.forEach(i=>{const a=r.get(i.name)||0;r.set(i.name,a+1)}),Array.from(r.entries()).sort((i,a)=>a[1]-i[1]).slice(0,5).map(([i,a],o)=>({rank:o+1,name:i,count:a}))},[t]);return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"🏆 よく買う商品 TOP5"}),e.length===0?y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[y.jsx("p",{children:"データがありません"}),y.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、よく買う商品が表示されます"})]}):y.jsx("div",{style:{marginTop:"16px"},children:e.map(r=>y.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 0",borderBottom:r.rank<e.length?"1px solid var(--border)":"none"},children:[y.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r.rank===1?"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)":r.rank===2?"linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%)":r.rank===3?"linear-gradient(135deg, #cd7f32 0%, #daa06d 100%)":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"1.1rem",color:r.rank<=3?"#fff":"#666",marginRight:"16px",flexShrink:0},children:r.rank}),y.jsxs("div",{style:{flex:1,minWidth:0},children:[y.jsx("div",{style:{fontWeight:600,fontSize:"0.95rem",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.name}),y.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:["購入回数: ",r.count,"回"]})]})]},r.rank))})]})},h1=["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6","#ec4899"],Pve=()=>{const{intakes:t}=Oo(),e=C.useMemo(()=>{const i=new Map;return t.forEach(o=>{const l=o.manufacturer||"その他",c=i.get(l)||0;i.set(l,c+o.price)}),Array.from(i.entries()).sort((o,l)=>l[1]-o[1]).slice(0,6).map(([o,l])=>({name:o,value:l}))},[t]),r=e.reduce((i,a)=>i+a.value,0),n=r>0;return y.jsxs("div",{className:"card",children:[y.jsx("h3",{children:"🏭 メーカー別支出分析"}),n?y.jsxs(y.Fragment,{children:[y.jsx(fy,{width:"100%",height:250,children:y.jsxs(pB,{children:[y.jsx(SC,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:i=>`${i.name} ${((i.percent||0)*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((i,a)=>y.jsx(pd,{fill:h1[a%h1.length]},`cell-${a}`))}),y.jsx(uy,{formatter:i=>`¥${i.toLocaleString()}`,contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"}})]})}),y.jsx("div",{style:{marginTop:"16px"},children:e.map((i,a)=>y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:a<e.length-1?"1px solid var(--border)":"none"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:h1[a%h1.length],flexShrink:0}}),y.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:i.name})]}),y.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--primary)"},children:["¥",i.value.toLocaleString()]})]},i.name))}),y.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--background)",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y.jsx("span",{style:{fontWeight:600},children:"合計"}),y.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--primary)"},children:["¥",r.toLocaleString()]})]})]}):y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[y.jsx("p",{children:"データがありません"}),y.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"メーカー情報付きの食事記録を追加すると、分析が表示されます"})]})]})},Dve=()=>y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"📊 レポート"}),y.jsx(qee,{}),y.jsx(Ive,{}),y.jsx(Ove,{}),y.jsx(Rve,{}),y.jsx(Pve,{})]}),gB=({selectedYear:t,selectedMonth:e,selectedDate:r,onSelectDate:n,onMonthChange:i,mode:a="month"})=>{const[o,l]=C.useState(t),[c,f]=C.useState(e),d=new Date(o,c,0).getDate(),p=new Date(o,c-1,1).getDay(),g=()=>{let D=c-1,k=o;D<1&&(D=12,k-=1),f(D),l(k),i&&i(k,D)},m=()=>{let D=c+1,k=o;D>12&&(D=1,k+=1),f(D),l(k),i&&i(k,D)},b=D=>{if(a==="date"&&n){const k=new Date(o,c-1,D);n(k)}},w=()=>{a==="month"&&i&&i(o,c)},E=D=>{const k=new Date;return k.getFullYear()===o&&k.getMonth()+1===c&&k.getDate()===D},S=D=>r?r.getFullYear()===o&&r.getMonth()+1===c&&r.getDate()===D:!1,I=[];for(let D=0;D<p;D++)I.push(null);for(let D=1;D<=d;D++)I.push(D);const O=["日","月","火","水","木","金","土"];return y.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[y.jsx("button",{onClick:g,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:y.jsx(pD,{size:24})}),y.jsxs("div",{onClick:w,style:{fontSize:"18px",fontWeight:"bold",cursor:a==="month"?"pointer":"default",padding:a==="month"?"8px 16px":"0",borderRadius:"8px",transition:"background 0.2s",background:a==="month"&&o===t&&c===e?"var(--primary)":"transparent",color:a==="month"&&o===t&&c===e?"white":"var(--text)"},children:[o,"年 ",c,"月"]}),y.jsx("button",{onClick:m,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:y.jsx(oE,{size:24})})]}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px",marginBottom:"10px"},children:O.map((D,k)=>y.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"bold",color:k===0?"#ef4444":k===6?"#3b82f6":"var(--text-secondary)"},children:D},k))}),y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px"},children:I.map((D,k)=>{if(D===null)return y.jsx("div",{},`empty-${k}`);const B=E(D),R=S(D),N=k%7;return y.jsx("button",{onClick:()=>b(D),disabled:a==="month",style:{aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",border:B?"2px solid var(--primary)":"none",borderRadius:"8px",background:R?"var(--primary)":B?"var(--background)":"transparent",color:R?"white":N===0?"#ef4444":N===6?"#3b82f6":"var(--text)",fontSize:"14px",fontWeight:R||B?"bold":"normal",cursor:a==="date"?"pointer":"default",transition:"all 0.2s"},onMouseEnter:L=>{a==="date"&&!R&&(L.currentTarget.style.background="var(--background)")},onMouseLeave:L=>{a==="date"&&!R&&(L.currentTarget.style.background="transparent")},children:D},D)})}),a==="date"&&y.jsx("div",{style:{marginTop:"15px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:r?`選択: ${r.getFullYear()}/${r.getMonth()+1}/${r.getDate()}`:"日付を選択してください"})]})},Nve=({isOpen:t,selectedDate:e,onClose:r,onConfirm:n})=>{const[i,a]=Hn.useState(e);if(Hn.useEffect(()=>{a(e)},[e,t]),!t)return null;const o=()=>{n(i),r()};return y.jsx("div",{className:"modal-backdrop",onClick:r,style:{animation:"fadeIn 0.2s ease"},children:y.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),style:{maxWidth:"400px",animation:"slideUp 0.3s ease"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border)"},children:[y.jsx("h3",{style:{margin:0},children:"日付を選択"}),y.jsx("button",{onClick:r,style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:"5px",display:"flex",alignItems:"center"},children:y.jsx(cs,{size:24})})]}),y.jsx(gB,{selectedYear:i.getFullYear(),selectedMonth:i.getMonth()+1,selectedDate:i,onSelectDate:a,mode:"date"}),y.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[y.jsx("button",{onClick:r,style:{flex:1,padding:"12px",background:"var(--background)",color:"var(--text)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"キャンセル"}),y.jsxs("button",{onClick:o,className:"submit",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[y.jsx(zF,{size:20}),"決定"]})]})]})})},Mve=()=>{const{addExpense:t}=Ro(),[e,r]=C.useState("food"),[n,i]=C.useState(""),[a,o]=C.useState(""),[l,c]=C.useState(""),[f,d]=C.useState(new Date),[p,g]=C.useState(!1),m=[{value:"food",label:"食費"},{value:"transport",label:"交通費"},{value:"utilities",label:"光熱費"},{value:"entertainment",label:"娯楽"},{value:"health",label:"医療"},{value:"other",label:"その他"}],b=()=>{if(!a||Number(a)<=0){alert("正しい金額を入力してください");return}if(e==="other"&&!n.trim()){alert("カスタムカテゴリ名を入力してください");return}t({category:e,customCategory:e==="other"?n.trim():void 0,amount:Number(a),memo:l||void 0,date:f.toISOString()}),o(""),c(""),i(""),alert("支出を記録しました！")},w=E=>`${E.getFullYear()}年${E.getMonth()+1}月${E.getDate()}日`;return y.jsxs("div",{className:"card",children:[y.jsx("label",{children:"日付"}),y.jsxs("button",{onClick:()=>g(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[y.jsx("span",{children:w(f)}),y.jsx(Xv,{size:20,color:"var(--primary)"})]}),y.jsx("label",{children:"カテゴリ"}),y.jsx("select",{value:e,onChange:E=>r(E.target.value),children:m.map(E=>y.jsx("option",{value:E.value,children:E.label},E.value))}),e==="other"&&y.jsxs(y.Fragment,{children:[y.jsx("label",{children:"カスタムカテゴリ名"}),y.jsx("input",{value:n,onChange:E=>i(E.target.value),placeholder:"例: 趣味、ペット、書籍"})]}),y.jsx("label",{children:"金額(円)"}),y.jsx("input",{type:"number",value:a,onChange:E=>o(E.target.value),placeholder:"1000",min:"0"}),y.jsx("label",{children:"メモ（任意）"}),y.jsx("input",{value:l,onChange:E=>c(E.target.value),placeholder:"例: 昼食"}),y.jsxs("button",{className:"submit",onClick:b,children:[y.jsx(P1,{size:20}),"記録する"]}),y.jsx(Nve,{isOpen:p,selectedDate:f,onClose:()=>g(!1),onConfirm:d})]})},FC=({isOpen:t,selectedYear:e,selectedMonth:r,onClose:n,onConfirm:i})=>{if(!t)return null;const a=(o,l)=>{i(o,l),n()};return y.jsx("div",{className:"modal-backdrop",onClick:n,style:{animation:"fadeIn 0.2s ease"},children:y.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),style:{maxWidth:"400px",animation:"slideUp 0.3s ease"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border)"},children:[y.jsx("h3",{style:{margin:0},children:"月を選択"}),y.jsx("button",{onClick:n,style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:"5px",display:"flex",alignItems:"center"},children:y.jsx(cs,{size:24})})]}),y.jsx(gB,{selectedYear:e,selectedMonth:r,onMonthChange:a,mode:"month"}),y.jsx("div",{style:{marginTop:"15px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:"年月をタップして選択してください"})]})})},kve=()=>{const{getTotalByMonth:t}=Ro(),{settings:e}=tv(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,l]=C.useState(!1),c=e.monthlyBudget??3e4,f=t(r,i),d=f/c*100,p=c-f,g=E=>new Intl.NumberFormat("ja-JP").format(E),b=d>=100?{color:"#ef4444",icon:y.jsx(uD,{size:24}),message:"予算超過"}:d>=80?{color:"#f59e0b",icon:y.jsx(nE,{size:24}),message:"予算残りわずか"}:{color:"#10b981",icon:y.jsx(Yv,{size:24}),message:"順調"},w=(E,S)=>{n(E),a(S)};return y.jsxs("div",{className:"card",children:[y.jsx("h3",{style:{marginBottom:"15px"},children:"月次予算"}),y.jsxs("button",{onClick:()=>l(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[y.jsxs("span",{children:[r,"年 ",i,"月"]}),y.jsx(Xv,{size:20,color:"var(--primary)"})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"15px",background:"var(--background)",borderRadius:"8px",marginBottom:"20px"},children:[y.jsx("div",{style:{color:b.color},children:b.icon}),y.jsxs("div",{style:{flex:1},children:[y.jsx("div",{style:{fontWeight:"bold",color:b.color},children:b.message}),y.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginTop:"4px"},children:p>=0?`残り ¥${g(p)}`:`超過 ¥${g(Math.abs(p))}`})]}),y.jsx("div",{style:{textAlign:"right"},children:y.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:b.color},children:[d.toFixed(1),"%"]})})]}),y.jsxs("div",{style:{background:"var(--background)",borderRadius:"8px",overflow:"hidden",height:"40px",position:"relative",marginBottom:"15px"},children:[y.jsx("div",{style:{background:`linear-gradient(90deg, ${b.color}, ${b.color}dd)`,height:"100%",width:`${Math.min(d,100)}%`,transition:"width 0.3s ease"}}),y.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:"bold",color:d>50?"white":"var(--text)",fontSize:"14px"},children:["¥",g(f)," / ¥",g(c)]})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[y.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"5px"},children:"支出"}),y.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--danger)"},children:["¥",g(f)]})]}),y.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"5px"},children:"予算"}),y.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--primary)"},children:["¥",g(c)]})]})]}),y.jsx(FC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>l(!1),onConfirm:w})]})},hl=["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#6366f1"],Q5=["#ec4899","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16","#f43f5e","#0ea5e9","#eab308","#22c55e","#d946ef","#64748b"],vB=t=>{if(!t)return hl[5];let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;const r=Math.abs(e)%Q5.length;return Q5[r]},mB=t=>({food:hl[0],transport:hl[1],utilities:hl[2],entertainment:hl[3],health:hl[4],other:hl[5]})[t]||hl[5],jve=()=>{const{getTotalByCategory:t,getExpensesByMonth:e}=Ro(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,l]=C.useState(!1),c=[{value:"food",label:"食費"},{value:"transport",label:"交通費"},{value:"utilities",label:"光熱費"},{value:"entertainment",label:"娯楽"},{value:"health",label:"医療"}],f=e(r,i),d=C.useMemo(()=>{const b=new Map;return c.forEach(w=>{const E=t(w.value,r,i);E>0&&b.set(w.value,{name:w.label,value:E,color:mB(w.value)})}),f.forEach(w=>{if(w.category==="other"&&w.customCategory){const E=`custom_${w.customCategory}`,S=b.get(E);S?S.value+=w.amount:b.set(E,{name:w.customCategory,value:w.amount,color:vB(w.customCategory)})}}),Array.from(b.values())},[r,i,f,t]),p=d.reduce((b,w)=>b+w.value,0),g=b=>new Intl.NumberFormat("ja-JP").format(b),m=(b,w)=>{n(b),a(w)};return y.jsxs("div",{className:"card",children:[y.jsx("h3",{style:{marginBottom:"15px"},children:"カテゴリ別集計"}),y.jsxs("button",{onClick:()=>l(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[y.jsxs("span",{children:[r,"年 ",i,"月"]}),y.jsx(Xv,{size:20,color:"var(--primary)"})]}),f.length===0?y.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"この月の支出データがありません"}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{background:"var(--background)",padding:"15px",borderRadius:"8px",marginBottom:"20px",textAlign:"center"},children:[y.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"5px"},children:"合計支出"}),y.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"var(--danger)"},children:["¥",g(p)]})]}),d.length>0&&y.jsxs(y.Fragment,{children:[y.jsx(fy,{width:"100%",height:250,children:y.jsxs(pB,{children:[y.jsx(SC,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:b=>`${b.name}: ¥${g(b.value)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:d.map((b,w)=>y.jsx(pd,{fill:b.color},`cell-${w}`))}),y.jsx(uy,{formatter:b=>`¥${g(b)}`,contentStyle:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px"}}),y.jsx(Gm,{})]})}),y.jsx("div",{style:{marginTop:"20px"},children:d.map((b,w)=>{const E=(b.value/p*100).toFixed(1);return y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:w<d.length-1?"1px solid var(--border)":"none"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",background:b.color}}),y.jsx("span",{children:b.name})]}),y.jsxs("div",{style:{textAlign:"right"},children:[y.jsxs("div",{style:{fontWeight:"bold"},children:["¥",g(b.value)]}),y.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[E,"%"]})]})]},w)})})]})]}),y.jsx(FC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>l(!1),onConfirm:m})]})},Lve=()=>{const{deleteExpense:t,getExpensesByMonth:e}=Ro(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,l]=C.useState(!1),c=e(r,i),f={food:"食費",transport:"交通費",utilities:"光熱費",entertainment:"娯楽",health:"医療",other:"その他"},d=E=>E.category==="other"&&E.customCategory?E.customCategory:f[E.category],p=E=>E.category==="other"&&E.customCategory?vB(E.customCategory):mB(E.category),g=E=>{window.confirm("この支出を削除しますか？")&&t(E)},m=E=>{const S=new Date(E);return`${S.getMonth()+1}/${S.getDate()}`},b=E=>new Intl.NumberFormat("ja-JP").format(E),w=(E,S)=>{n(E),a(S)};return y.jsxs("div",{className:"card",children:[y.jsxs("button",{onClick:()=>l(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[y.jsxs("span",{children:[r,"年 ",i,"月"]}),y.jsx(Xv,{size:20,color:"var(--primary)"})]}),c.length===0?y.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"この月の支出はまだありません"}):y.jsx("div",{className:"list",children:c.sort((E,S)=>new Date(S.date).getTime()-new Date(E.date).getTime()).map(E=>y.jsxs("div",{className:"list-item",children:[y.jsxs("div",{style:{flex:1},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[y.jsx("span",{style:{background:p(E),color:"white",padding:"2px 8px",borderRadius:"4px",fontSize:"12px"},children:d(E)}),y.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:m(E.date)})]}),E.memo&&y.jsx("div",{style:{color:"var(--text)",fontSize:"14px",marginTop:"4px"},children:E.memo})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--danger)"},children:["¥",b(E.amount)]}),y.jsx("button",{className:"delete",onClick:()=>g(E.id),style:{padding:"8px"},children:y.jsx(Kf,{size:20})})]})]},E.id))}),y.jsx(FC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>l(!1),onConfirm:w})]})},Bve=()=>y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"家計簿"}),y.jsx(kve,{}),y.jsx(Mve,{}),y.jsx(jve,{}),y.jsx("h3",{children:"支出履歴"}),y.jsx(Lve,{})]}),Uve={streak:"🔥 連続記録",milestone:"📊 マイルストーン",goal:"🎯 目標達成",feature:"✨ 機能活用"};function Fve(){const{badges:t,isUnlocked:e,getUnlockedCount:r,getTotalCount:n}=xA(),i=["streak","milestone","goal","feature"],a=o=>rv.filter(l=>l.category===o);return y.jsxs("div",{className:"badge-list",children:[y.jsxs("div",{className:"badge-summary",children:[y.jsxs("h3",{children:["バッジコレクション"," ",y.jsxs("span",{className:"badge-count",children:[r()," / ",n()]})]}),y.jsx("div",{className:"progress-bar",children:y.jsx("div",{className:"progress-fill",style:{width:`${r()/n()*100}%`}})})]}),i.map(o=>{const l=a(o);return y.jsxs("div",{className:"badge-category",children:[y.jsx("h4",{className:"category-title",children:Uve[o]}),y.jsx("div",{className:"badge-grid",children:l.map(c=>{const f=e(c.id),d=t.find(p=>p.id===c.id);return y.jsxs("div",{className:`badge-item ${f?"unlocked":"locked"}`,children:[y.jsx("div",{className:"badge-icon",children:f?c.icon:"🔒"}),y.jsxs("div",{className:"badge-info",children:[y.jsx("div",{className:"badge-name",children:c.name}),y.jsx("div",{className:"badge-description",children:c.description}),!f&&y.jsx("div",{className:"badge-requirement",children:c.requirement}),f&&d?.unlockedAt&&y.jsx("div",{className:"badge-unlocked-date",children:new Date(d.unlockedAt).toLocaleDateString("ja-JP")})]})]},c.id)})})]},o)})]})}function zve(){return y.jsxs("section",{className:"screen active",children:[y.jsx("h2",{children:"🏆 アチーブメント"}),y.jsx("div",{className:"card",children:y.jsx(Fve,{})})]})}const Vve=({images:t,initialIndex:e=0,onClose:r})=>{const[n,i]=C.useState(e),a=()=>{i(c=>c>0?c-1:t.length-1)},o=()=>{i(c=>c<t.length-1?c+1:0)},l=c=>{c.target===c.currentTarget&&r()};return y.jsxs("div",{onClick:l,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease-out"},children:[y.jsx("button",{onClick:r,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:y.jsx(cs,{size:28})}),t.length>1&&y.jsxs("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:600,zIndex:1e4},children:[n+1," / ",t.length]}),t.length>1&&y.jsx("button",{onClick:a,style:{position:"absolute",left:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"52px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:y.jsx(pD,{size:32})}),t.length>1&&y.jsx("button",{onClick:o,style:{position:"absolute",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"52px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:y.jsx(oE,{size:32})}),y.jsx("img",{src:t[n],alt:`画像 ${n+1}`,style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",animation:"slideUp 0.3s ease-out"},onClick:c=>c.stopPropagation()})]})},zC=({post:t,onPostClick:e,onUserClick:r,onQuoteRepost:n})=>{const{user:i}=ws(),[a,o]=C.useState(!1),[l,c]=C.useState(!1),[f,d]=C.useState(!1),[p,g]=C.useState(t.likes),[m,b]=C.useState(t.repostCount),[w,E]=C.useState(!1),[S,I]=C.useState(!1),[O,D]=C.useState(0),[k,B]=C.useState(null);C.useEffect(()=>{(async()=>{if(i)try{const ue=await hk(t.id,i.uid),ye=await FY(t.id,i.uid),X=await HY(t.id,i.uid);o(ue),c(ye),d(X);const re=await ga(i.uid);B(re)}catch(ue){console.error("ステータス確認エラー:",ue)}})()},[t.id,i]);const R=async j=>{if(j.stopPropagation(),!(!i||w||!k))try{E(!0),a?(await dk(t.id,i.uid),o(!1),g(Math.max(0,p-1))):(await fk(t.id,i.uid,k.displayName,k.avatarUrl),o(!0),g(p+1))}catch(ue){console.error("いいね操作エラー:",ue),alert("いいね操作に失敗しました")}finally{E(!1)}},N=j=>{j.stopPropagation(),e(t.id)},L=async j=>{if(j.stopPropagation(),!(!i||w||!k))try{E(!0),f?(await VY(t.id,i.uid),d(!1),b(Math.max(0,m-1))):(await zY(t.id,i.uid,k.displayName,k.avatarUrl),d(!0),b(m+1))}catch(ue){console.error("リポスト操作エラー:",ue),alert("リポスト操作に失敗しました")}finally{E(!1)}},U=async j=>{if(j.stopPropagation(),!(!i||w))try{E(!0),l?(await UY(t.id,i.uid),c(!1)):(await BY(t.id,i.uid),c(!0))}catch(ue){console.error("ブックマーク操作エラー:",ue),alert("ブックマーク操作に失敗しました")}finally{E(!1)}},z=j=>{j.stopPropagation(),navigator.share?navigator.share({title:"投稿を共有",text:t.content}).catch(ue=>console.log("Share cancelled:",ue)):alert("この投稿をシェアしました！")},H=j=>{j.stopPropagation(),n&&n(t.id)};return y.jsxs("div",{className:"post-card",onClick:()=>e(t.id),style:{background:"var(--card)",borderRadius:"12px",padding:"16px",marginBottom:"12px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:j=>{j.currentTarget.style.transform="translateY(-2px)",j.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:j=>{j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[y.jsxs("div",{onClick:j=>{r&&(j.stopPropagation(),r(t.authorId))},style:{display:"flex",alignItems:"center",marginBottom:"12px",cursor:r?"pointer":"default",padding:"4px",marginLeft:"-4px",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:j=>{r&&(j.currentTarget.style.background="rgba(0, 0, 0, 0.05)")},onMouseLeave:j=>{j.currentTarget.style.background="none"},children:[y.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:t.authorAvatar?`url(${t.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",marginRight:"12px",flexShrink:0}}),y.jsxs("div",{style:{flex:1,minWidth:0},children:[y.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"15px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.authorName}),y.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:nv(t.createdAt)})]})]}),y.jsx("div",{style:{color:"var(--text)",fontSize:"15px",lineHeight:"1.5",marginBottom:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.content.split(/(@[a-zA-Z0-9_]+)/g).map((j,ue)=>j.match(/^@[a-zA-Z0-9_]+$/)?y.jsx("span",{onClick:async ye=>{ye.stopPropagation();const X=j.substring(1);console.log("Mention clicked:",X);const re=await nY(X);re&&r?r(re):console.warn("User not found:",X)},style:{color:"var(--primary)",cursor:"pointer",fontWeight:600},children:j},ue):j)}),t.recipeData&&y.jsxs("div",{style:{marginBottom:"12px",padding:"16px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",borderRadius:"12px",border:"2px solid var(--primary)"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[y.jsx("div",{style:{fontSize:"20px"},children:"👨‍🍳"}),y.jsx("div",{style:{fontWeight:700,fontSize:"16px",color:"var(--text)"},children:t.recipeData.title}),y.jsx("div",{style:{marginLeft:"auto",padding:"4px 12px",background:"var(--primary)",color:"white",borderRadius:"12px",fontSize:"12px",fontWeight:600},children:t.recipeData.difficulty==="easy"?"簡単":t.recipeData.difficulty==="medium"?"普通":"難しい"})]}),y.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:t.recipeData.description}),y.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"13px",color:"var(--text-secondary)"},children:[y.jsxs("span",{children:["🍽️ ",t.recipeData.servings,"人分"]}),y.jsxs("span",{children:["⏱️ ",t.recipeData.preparationTime+t.recipeData.cookingTime,"分"]})]})]}),t.quotedPost&&y.jsxs("div",{onClick:j=>{j.stopPropagation(),e(t.quotedPost.id)},style:{marginBottom:"12px",padding:"12px",background:"var(--background)",borderRadius:"12px",border:"1px solid var(--border)",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="var(--border)"},onMouseLeave:j=>{j.currentTarget.style.background="var(--background)"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[y.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:t.quotedPost.authorAvatar?`url(${t.quotedPost.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),y.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:"var(--text)"},children:t.quotedPost.authorName}),y.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:nv(t.quotedPost.createdAt)})]}),y.jsx("div",{style:{fontSize:"14px",color:"var(--text)",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:t.quotedPost.content}),t.quotedPost.images&&t.quotedPost.images.length>0&&y.jsx("div",{style:{marginTop:"8px",width:"100%",paddingBottom:"40%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)"},children:y.jsx("img",{src:t.quotedPost.images[0],alt:"引用元画像",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})})]}),t.images&&t.images.length>0&&y.jsx("div",{style:{display:"grid",gridTemplateColumns:t.images.length===1?"1fr":(t.images.length===2,"repeat(2, 1fr)"),gap:"8px",marginBottom:"16px"},children:t.images.map((j,ue)=>y.jsx("div",{onClick:ye=>{ye.stopPropagation(),D(ue),I(!0)},style:{width:"100%",paddingBottom:t.images.length===1?"56.25%":"100%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)",cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:ye=>{ye.currentTarget.style.opacity="0.9"},onMouseLeave:ye=>{ye.currentTarget.style.opacity="1"},children:y.jsx("img",{src:j,alt:`投稿画像 ${ue+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},ue))}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",paddingTop:"12px",borderTop:"1px solid var(--border)"},children:[y.jsxs("button",{onClick:R,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:a?"#e91e63":"var(--text-secondary)",transition:"background 0.2s, color 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(233, 30, 99, 0.1)"},onMouseLeave:j=>{j.currentTarget.style.background="none"},children:[a?y.jsx(oD,{size:20}):y.jsx(aD,{size:20}),y.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:p})]}),y.jsxs("button",{onClick:N,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(33, 150, 243, 0.1)",j.currentTarget.style.color="#2196f3"},onMouseLeave:j=>{j.currentTarget.style.background="none",j.currentTarget.style.color="var(--text-secondary)"},children:[y.jsx(fD,{size:20}),y.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:t.commentCount})]}),y.jsxs("button",{onClick:L,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:f?"#4caf50":"var(--text-secondary)",transition:"background 0.2s, color 0.2s",opacity:w?.6:1},onMouseEnter:j=>{j.currentTarget.style.background="rgba(76, 175, 80, 0.1)",f||(j.currentTarget.style.color="#4caf50")},onMouseLeave:j=>{j.currentTarget.style.background="none",f||(j.currentTarget.style.color="var(--text-secondary)")},children:[y.jsx(PF,{size:20}),y.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:m})]}),n&&y.jsx("button",{onClick:H,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s, color 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(76, 175, 80, 0.1)",j.currentTarget.style.color="#4caf50"},onMouseLeave:j=>{j.currentTarget.style.background="none",j.currentTarget.style.color="var(--text-secondary)"},children:y.jsx(BF,{size:20})}),y.jsx("button",{onClick:U,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:l?"#ff9800":"var(--text-secondary)",transition:"background 0.2s, color 0.2s",opacity:w?.6:1},onMouseEnter:j=>{j.currentTarget.style.background="rgba(255, 152, 0, 0.1)",l||(j.currentTarget.style.color="#ff9800")},onMouseLeave:j=>{j.currentTarget.style.background="none",l||(j.currentTarget.style.color="var(--text-secondary)")},children:l?y.jsx(_F,{size:20}):y.jsx(bF,{size:20})}),y.jsx("button",{onClick:z,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s",marginLeft:"auto"},onMouseEnter:j=>{j.currentTarget.style.background="rgba(158, 158, 158, 0.1)"},onMouseLeave:j=>{j.currentTarget.style.background="none"},children:y.jsx(mD,{size:20})})]}),S&&t.images&&t.images.length>0&&y.jsx(Vve,{images:t.images,initialIndex:O,onClose:()=>I(!1)})]})},Hve=({onPostClick:t,onUserClick:e})=>{const{user:r}=ws(),[n,i]=C.useState([]),[a,o]=C.useState(!0),[l,c]=C.useState(""),[f,d]=C.useState(!1),[p,g]=C.useState(void 0),[m,b]=C.useState("all"),w=async(O=m)=>{o(!0),c("");try{if(O==="following"&&r){console.log("📡 Fetching following posts...");const D=await $Y(r.uid,20);console.log(`✅ Fetched ${D.length} following posts`),i(D)}else{console.log("📡 Fetching timeline posts...");const D=await MY(20);console.log(`✅ Fetched ${D.length} posts`),i(D)}}catch(D){console.error("❌ 投稿の取得に失敗しました:",D),console.error("Error details:",D.message,D.code),c(D.message||"タイムラインの取得に失敗しました")}finally{o(!1)}};C.useEffect(()=>{w(m)},[m,r]);const E=()=>{w()},S=O=>{g(O),d(!0)},I=()=>{d(!1),g(void 0)};return y.jsxs("div",{style:{paddingBottom:"80px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[y.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text)",margin:0},children:"タイムライン"}),y.jsxs("div",{style:{display:"flex",gap:"8px"},children:[y.jsx("button",{onClick:()=>w(),disabled:a,style:{background:"none",border:"none",cursor:a?"not-allowed":"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:O=>{a||(O.currentTarget.style.background="var(--border)")},onMouseLeave:O=>{O.currentTarget.style.background="none"},children:y.jsx(VF,{size:24})}),y.jsx("button",{onClick:()=>d(!0),style:{background:"linear-gradient(135deg, var(--primary), #81c784)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.3)",transition:"transform 0.2s"},onMouseEnter:O=>{O.currentTarget.style.transform="scale(1.05)"},onMouseLeave:O=>{O.currentTarget.style.transform="scale(1)"},children:y.jsx(P1,{size:24})})]})]}),y.jsxs("div",{style:{display:"flex",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:"69px",zIndex:9},children:[y.jsx("button",{onClick:()=>b("all"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:m==="all"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:m==="all"?600:400,color:m==="all"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"すべて"}),y.jsx("button",{onClick:()=>b("following"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:m==="following"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:m==="following"?600:400,color:m==="following"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"フォロー中"})]}),y.jsx("div",{style:{padding:"16px"},children:l?y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",background:"#ffebee",borderRadius:"12px",margin:"20px 0"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),y.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#c62828",marginBottom:"8px"},children:"タイムラインの取得に失敗しました"}),y.jsx("div",{style:{fontSize:"14px",color:"#d32f2f",marginBottom:"16px"},children:l}),y.jsx("button",{onClick:()=>w(),style:{padding:"10px 20px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"再試行"})]}):a?y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),y.jsx("div",{children:"投稿を読み込んでいます..."})]}):n.length===0?y.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:m==="following"?"👥":"📝"}),y.jsx("div",{style:{fontSize:"18px",fontWeight:600,marginBottom:"8px"},children:m==="following"?"フォロー中のユーザーの投稿がありません":"まだ投稿がありません"}),y.jsx("div",{style:{fontSize:"14px",marginBottom:"24px"},children:"最初の投稿をしてみましょう！"}),y.jsxs("button",{onClick:()=>d(!0),style:{padding:"12px 24px",background:"linear-gradient(135deg, var(--primary), #81c784)",color:"white",border:"none",borderRadius:"12px",fontSize:"15px",fontWeight:600,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",transition:"transform 0.2s"},onMouseEnter:O=>{O.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:O=>{O.currentTarget.style.transform="translateY(0)"},children:[y.jsx(P1,{size:20}),"投稿を作成"]})]}):y.jsx("div",{children:n.map(O=>y.jsx(zC,{post:O,onPostClick:t,onUserClick:e,onQuoteRepost:S},O.id))})}),f&&y.jsx(pk,{onClose:I,onPostCreated:E,quotedPostId:p})]})},$ve=({postId:t,onBack:e,onPostDeleted:r,onUserClick:n})=>{const{user:i}=ws(),[a,o]=C.useState(null),[l,c]=C.useState([]),[f,d]=C.useState(!0),[p,g]=C.useState(!1),[m,b]=C.useState(0),[w,E]=C.useState(""),[S,I]=C.useState(!1),[O,D]=C.useState(null);C.useEffect(()=>{(async()=>{d(!0);try{const z=await zl(t);if(z){if(o(z),b(z.likes),i){const j=await hk(t,i.uid);g(j);const ue=await ga(i.uid);D(ue)}const H=await M2(t);c(H)}else alert("投稿が見つかりません"),e()}catch(z){console.error("投稿の取得に失敗しました:",z),alert("投稿の取得に失敗しました"),e()}finally{d(!1)}})()},[t,e,i]);const k=async()=>{if(!(!i||!O))try{p?(await dk(t,i.uid),g(!1),b(Math.max(0,m-1))):(await fk(t,i.uid,O.displayName,O.avatarUrl),g(!0),b(m+1))}catch(U){console.error("いいね操作エラー:",U),alert("いいね操作に失敗しました")}},B=async()=>{if(!(!i||!a||!w.trim()||!O))try{I(!0),await jY(t,i.uid,O.displayName,w.trim(),O.avatarUrl);const U=await M2(t);c(U),E("")}catch(U){console.error("コメント追加エラー:",U),alert("コメントの追加に失敗しました")}finally{I(!1)}},R=async U=>{if(!(!i||!confirm("このコメントを削除しますか？")))try{await LY(t,U,i.uid);const z=await M2(t);c(z)}catch(z){console.error("コメント削除エラー:",z),alert("コメントの削除に失敗しました")}},N=async()=>{if(!(!i||!a)&&confirm("この投稿を削除しますか？"))try{await kY(t,i.uid),alert("投稿を削除しました"),r()}catch(U){console.error("投稿の削除に失敗しました:",U),alert("投稿の削除に失敗しました")}};if(f)return y.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),y.jsx("div",{children:"投稿を読み込んでいます..."})]});if(!a)return null;const L=i&&a.authorId===i.uid;return y.jsxs("div",{style:{paddingBottom:"80px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[y.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text)",transition:"background 0.2s"},onMouseEnter:U=>{U.currentTarget.style.background="var(--border)"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:y.jsx(wp,{size:24})}),y.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:"投稿"}),L&&y.jsx("button",{onClick:N,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#f44336",transition:"background 0.2s"},onMouseEnter:U=>{U.currentTarget.style.background="#ffebee"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:y.jsx(Kf,{size:24})})]}),y.jsxs("div",{style:{padding:"20px"},children:[y.jsxs("div",{onClick:()=>n(a.authorId),style:{display:"flex",alignItems:"center",marginBottom:"16px",cursor:"pointer",padding:"8px",marginLeft:"-8px",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:U=>{U.currentTarget.style.background="var(--border)"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:[y.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:a.authorAvatar?`url(${a.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",marginRight:"12px",flexShrink:0}}),y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"16px"},children:a.authorName}),y.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:nv(a.createdAt)})]})]}),y.jsx("div",{style:{color:"var(--text)",fontSize:"16px",lineHeight:"1.6",marginBottom:a.images&&a.images.length>0?"20px":"24px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.content}),a.images&&a.images.length>0&&y.jsx("div",{style:{display:"grid",gridTemplateColumns:a.images.length===1?"1fr":(a.images.length===2,"repeat(2, 1fr)"),gap:"12px",marginBottom:"24px"},children:a.images.map((U,z)=>y.jsx("div",{style:{width:"100%",paddingBottom:a.images.length===1?"56.25%":"100%",position:"relative",borderRadius:"12px",overflow:"hidden",background:"var(--border)"},children:y.jsx("img",{src:U,alt:`投稿画像 ${z+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},z))}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"32px",padding:"16px 0",borderTop:"1px solid var(--border)",borderBottom:"1px solid var(--border)"},children:[y.jsxs("button",{onClick:k,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"8px 12px",borderRadius:"12px",color:p?"#e91e63":"var(--text-secondary)",transition:"background 0.2s",fontSize:"16px"},onMouseEnter:U=>{U.currentTarget.style.background="rgba(233, 30, 99, 0.1)"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:[p?y.jsx(oD,{size:24}):y.jsx(aD,{size:24}),y.jsx("span",{style:{fontWeight:600},children:m})]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"16px"},children:[y.jsx(fD,{size:24}),y.jsx("span",{style:{fontWeight:600},children:a.commentCount})]})]}),y.jsxs("div",{style:{marginTop:"24px"},children:[i&&y.jsx("div",{style:{marginBottom:"24px"},children:y.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",padding:"12px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[y.jsx("textarea",{value:w,onChange:U=>E(U.target.value),placeholder:"コメントを入力...",style:{flex:1,padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--background)",color:"var(--text)",fontFamily:"inherit",fontSize:"14px",resize:"vertical",minHeight:"44px",maxHeight:"120px",outline:"none"},onFocus:U=>{U.currentTarget.style.borderColor="var(--primary)"},onBlur:U=>{U.currentTarget.style.borderColor="var(--border)"}}),y.jsx("button",{onClick:B,disabled:S||!w.trim(),style:{background:w.trim()?"var(--primary)":"var(--border)",border:"none",color:w.trim()?"white":"var(--text-secondary)",padding:"12px 16px",borderRadius:"8px",cursor:w.trim()&&!S?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:y.jsx(MF,{size:20})})]})}),y.jsx("div",{style:{marginTop:"20px"},children:l.length>0?y.jsxs("div",{children:[y.jsxs("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:"var(--text)"},children:["コメント (",l.length,")"]}),l.map(U=>y.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",marginBottom:"12px",borderLeft:"2px solid var(--primary)"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"14px"},children:U.userName}),y.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:nv(U.createdAt)})]}),i&&i.uid===U.userId&&y.jsx("button",{onClick:()=>R(U.id),style:{background:"none",border:"none",color:"#f44336",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",transition:"background 0.2s"},onMouseEnter:z=>{z.currentTarget.style.background="#ffebee"},onMouseLeave:z=>{z.currentTarget.style.background="none"},children:"削除"})]}),y.jsx("div",{style:{color:"var(--text)",fontSize:"14px",lineHeight:"1.5",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:U.content})]},U.id))]}):y.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)",background:"var(--background)",borderRadius:"12px"},children:y.jsx("div",{style:{fontSize:"14px"},children:"コメントはまだありません"})})})]})]})]})},qve=({userId:t,onClose:e,onUserClick:r})=>{const{user:n}=ws(),[i,a]=C.useState([]),[o,l]=C.useState(!0),[c,f]=C.useState(null);C.useEffect(()=>{(async()=>{l(!0);try{const m=await iY(t);a(m)}catch(m){console.error("Failed to fetch followers:",m)}finally{l(!1)}})()},[t]);const d=async(g,m,b)=>{if(n){f(g);try{const w=await ga(n.uid);if(!w)return;await _A(n.uid,w.displayName,w.avatarUrl,g,m),a(E=>E.map((S,I)=>I===b?{...S,isFollowing:!0}:S))}catch(w){console.error("Follow failed:",w)}finally{f(null)}}},p=async(g,m)=>{if(n){f(g);try{await wA(n.uid,g),a(b=>b.map((w,E)=>E===m?{...w,isFollowing:!1}:w))}catch(b){console.error("Unfollow failed:",b)}finally{f(null)}}};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",animation:"fadeIn 0.2s ease-out"},onClick:e,children:y.jsxs("div",{style:{background:"var(--card)",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",animation:"slideUp 0.3s ease-out"},onClick:g=>g.stopPropagation(),children:[y.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:"フォロワー"}),y.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:g=>{g.currentTarget.style.background="var(--border)"},onMouseLeave:g=>{g.currentTarget.style.background="none"},children:y.jsx(cs,{size:24})})]}),y.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:o?y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),y.jsx("div",{children:"読み込み中..."})]}):i.length===0?y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"👥"}),y.jsx("div",{children:"フォロワーはまだいません"})]}):y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map((g,m)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",transition:"background 0.2s",cursor:"pointer"},onMouseEnter:b=>{b.currentTarget.style.background="var(--border)"},onMouseLeave:b=>{b.currentTarget.style.background="transparent"},onClick:()=>{r(g.uid),e()},children:[y.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:g.avatarUrl?`url(${g.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",flexShrink:0}}),y.jsxs("div",{style:{flex:1,minWidth:0},children:[y.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)"},children:g.displayName}),y.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["@",g.username]}),g.bio&&y.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.bio})]}),n&&n.uid!==g.uid&&y.jsx("button",{onClick:b=>{b.stopPropagation(),g.isFollowing?p(g.uid,m):d(g.uid,g.displayName,m)},disabled:c===g.uid,style:{padding:"6px 16px",background:g.isFollowing?"var(--card)":"var(--primary)",border:g.isFollowing?"2px solid var(--border)":"none",borderRadius:"20px",color:g.isFollowing?"var(--text)":"white",fontSize:"13px",fontWeight:600,cursor:c===g.uid?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:c===g.uid?.6:1,transition:"all 0.2s",flexShrink:0},children:g.isFollowing?y.jsxs(y.Fragment,{children:[y.jsx(lE,{size:14}),"フォロー中"]}):y.jsxs(y.Fragment,{children:[y.jsx(sE,{size:14}),"フォロー"]})})]},g.uid))})})]})})},Gve=({userId:t,onClose:e,onUserClick:r})=>{const{user:n}=ws(),[i,a]=C.useState([]),[o,l]=C.useState(!0),[c,f]=C.useState(null);C.useEffect(()=>{(async()=>{l(!0);try{const m=await ck(t);a(m)}catch(m){console.error("Failed to fetch following:",m)}finally{l(!1)}})()},[t]);const d=async(g,m,b)=>{if(n){f(g);try{const w=await ga(n.uid);if(!w)return;await _A(n.uid,w.displayName,w.avatarUrl,g,m),a(E=>E.map((S,I)=>I===b?{...S,isFollowing:!0}:S))}catch(w){console.error("Follow failed:",w)}finally{f(null)}}},p=async(g,m)=>{if(n){f(g);try{await wA(n.uid,g),a(b=>b.map((w,E)=>E===m?{...w,isFollowing:!1}:w))}catch(b){console.error("Unfollow failed:",b)}finally{f(null)}}};return y.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",animation:"fadeIn 0.2s ease-out"},onClick:e,children:y.jsxs("div",{style:{background:"var(--card)",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",animation:"slideUp 0.3s ease-out"},onClick:g=>g.stopPropagation(),children:[y.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[y.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:"フォロー中"}),y.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:g=>{g.currentTarget.style.background="var(--border)"},onMouseLeave:g=>{g.currentTarget.style.background="none"},children:y.jsx(cs,{size:24})})]}),y.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:o?y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),y.jsx("div",{children:"読み込み中..."})]}):i.length===0?y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"👥"}),y.jsx("div",{children:"まだ誰もフォローしていません"})]}):y.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map((g,m)=>y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",transition:"background 0.2s",cursor:"pointer"},onMouseEnter:b=>{b.currentTarget.style.background="var(--border)"},onMouseLeave:b=>{b.currentTarget.style.background="transparent"},onClick:()=>{r(g.uid),e()},children:[y.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:g.avatarUrl?`url(${g.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",flexShrink:0}}),y.jsxs("div",{style:{flex:1,minWidth:0},children:[y.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)"},children:g.displayName}),y.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["@",g.username]}),g.bio&&y.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.bio})]}),g&&g.uid!==g.uid&&y.jsx("button",{onClick:b=>{b.stopPropagation(),g.isFollowing?p(g.uid,m):d(g.uid,g.displayName,m)},disabled:c===g.uid,style:{padding:"6px 16px",background:g.isFollowing?"var(--card)":"var(--primary)",border:g.isFollowing?"2px solid var(--border)":"none",borderRadius:"20px",color:g.isFollowing?"var(--text)":"white",fontSize:"13px",fontWeight:600,cursor:c===g.uid?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:c===g.uid?.6:1,transition:"all 0.2s",flexShrink:0},children:g.isFollowing?y.jsxs(y.Fragment,{children:[y.jsx(lE,{size:14}),"フォロー中"]}):y.jsxs(y.Fragment,{children:[y.jsx(sE,{size:14}),"フォロー"]})})]},g.uid))})})]})})},Wve=({userId:t,onBack:e,onPostClick:r})=>{const{user:n}=ws(),[i,a]=C.useState(null),[o,l]=C.useState([]),[c,f]=C.useState(!0),[d,p]=C.useState(null),[g,m]=C.useState(!1),[b,w]=C.useState(!1),[E,S]=C.useState(!1),[I,O]=C.useState(!1),D=n&&n.uid===t;C.useEffect(()=>{(async()=>{f(!0),p(null);try{const R=await ga(t);if(!R){p("プロフィールが見つかりません");return}a(R),console.log(`[UserProfileScreen] Fetching posts for user: ${t}`);const N=await NY(t);if(console.log(`[UserProfileScreen] Received ${N.length} posts`),l(N),n&&n.uid!==t){const L=await EA(n.uid,t);m(L)}}catch(R){console.error("[UserProfileScreen] プロフィールの取得に失敗しました:",R),p(R instanceof Error?R.message:"プロフィールの取得に失敗しました")}finally{f(!1)}})()},[t,n,e]);const k=async()=>{if(!(!n||!i)){w(!0);try{g?(await wA(n.uid,t),m(!1),a({...i,stats:{...i.stats,followerCount:Math.max(0,i.stats.followerCount-1)}})):(await _A(n.uid,n.displayName||"Anonymous",n.photoURL||void 0,t,i.displayName),m(!0),a({...i,stats:{...i.stats,followerCount:i.stats.followerCount+1}}))}catch(B){console.error("フォロー操作に失敗しました:",B),alert("フォロー操作に失敗しました")}finally{w(!1)}}};return c?y.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),y.jsx("div",{children:"プロフィールを読み込んでいます..."})]}):d||!i?y.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),y.jsx("div",{style:{fontSize:"16px",color:"var(--text)",marginBottom:"16px"},children:d||"プロフィールが見つかりません"}),y.jsx("button",{onClick:e,style:{padding:"10px 20px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"戻る"})]}):y.jsxs("div",{style:{paddingBottom:"80px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[y.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text)",transition:"background 0.2s"},onMouseEnter:B=>{B.currentTarget.style.background="var(--border)"},onMouseLeave:B=>{B.currentTarget.style.background="none"},children:y.jsx(wp,{size:24})}),y.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:i.displayName}),y.jsx("div",{style:{width:"40px"}})," "]}),y.jsx("div",{style:{width:"100%",height:"150px",background:i.coverUrl?`url(${i.coverUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),y.jsxs("div",{style:{padding:"0 20px"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",marginTop:"-40px",marginBottom:"12px"},children:[y.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:i.avatarUrl?`url(${i.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",border:"4px solid var(--card)"}}),D?y.jsxs("div",{style:{padding:"8px 16px",background:"var(--card)",border:"2px solid var(--border)",borderRadius:"20px",color:"var(--text-secondary)",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px"},children:[y.jsx(hD,{size:14}),"設定画面から編集できます"]}):y.jsx("button",{onClick:k,disabled:b,style:{padding:"8px 16px",background:g?"var(--card)":"var(--primary)",border:g?"2px solid var(--border)":"none",borderRadius:"20px",color:g?"var(--text)":"white",fontSize:"14px",fontWeight:600,cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"6px",opacity:b?.6:1,transition:"all 0.2s"},children:g?y.jsxs(y.Fragment,{children:[y.jsx(lE,{size:16}),"フォロー中"]}):y.jsxs(y.Fragment,{children:[y.jsx(sE,{size:16}),"フォロー"]})})]}),y.jsxs("div",{style:{marginBottom:"12px"},children:[y.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"var(--text)",marginBottom:"4px"},children:i.displayName}),y.jsxs("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:["@",i.username]})]}),i.bio&&y.jsx("div",{style:{fontSize:"14px",color:"var(--text)",lineHeight:"1.5",marginBottom:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:i.bio}),i.websiteUrl&&y.jsxs("a",{href:i.websiteUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"var(--primary)",textDecoration:"none",marginBottom:"12px"},children:[y.jsx(dD,{size:16}),i.websiteUrl.replace(/^https?:\/\//,"")]}),y.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px 0",borderBottom:"1px solid var(--border)"},children:[y.jsxs("div",{children:[y.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:i.stats.postCount}),y.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"投稿"})]}),y.jsxs("div",{onClick:()=>S(!0),style:{cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:B=>{B.currentTarget.style.background="var(--border)"},onMouseLeave:B=>{B.currentTarget.style.background="transparent"},children:[y.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:i.stats.followerCount}),y.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"フォロワー"})]}),y.jsxs("div",{onClick:()=>O(!0),style:{cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:B=>{B.currentTarget.style.background="var(--border)"},onMouseLeave:B=>{B.currentTarget.style.background="transparent"},children:[y.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:i.stats.followingCount}),y.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"フォロー中"})]})]})]}),y.jsx("div",{style:{marginTop:"20px"},children:o.length===0?y.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📝"}),y.jsx("div",{style:{fontSize:"16px"},children:D?"まだ投稿がありません":"このユーザーはまだ投稿していません"})]}):y.jsx("div",{children:o.map(B=>y.jsx(zC,{post:B,onPostClick:r,onUserClick:R=>{console.log("User clicked:",R,"Current userId:",t)}},B.id))})}),E&&y.jsx(qve,{userId:t,onClose:()=>S(!1),onUserClick:B=>{console.log("Navigate to user:",B)}}),I&&y.jsx(Gve,{userId:t,onClose:()=>O(!1),onUserClick:B=>{console.log("Navigate to user:",B)}})]})},Kve=async(t,e=20)=>{try{if(!t.trim())return[];const r=ze(be,"users"),n=[],i=Lt(r,On("username",">=",t.toLowerCase()),On("username","<=",t.toLowerCase()+""),Fl(e)),a=await St(i);for(const c of a.docs){const f=await St(ze(c.ref,"profile"));if(!f.empty){const d=f.docs[0].data();n.push(d)}}const o=Lt(r,On("displayName",">=",t),On("displayName","<=",t+""),Fl(e)),l=await St(o);for(const c of l.docs){const f=await St(ze(c.ref,"profile"));if(!f.empty){const d=f.docs[0].data();n.find(p=>p.uid===d.uid)||n.push(d)}}return n.slice(0,e)}catch(r){return console.error("ユーザー検索エラー:",r),[]}},Xve=async(t,e=20)=>{try{if(!t.trim())return[];const r=ze(be,"posts"),n=Lt(r,On("visibility","==","public"),Dn("createdAt","desc"),Fl(100)),i=await St(n),a=[];return i.forEach(o=>{const l=o.data(),c={id:o.id,content:l.content,images:l.images||[],authorId:l.authorId,authorName:l.authorName,authorAvatar:l.authorAvatar||"",likes:l.likes||0,commentCount:l.commentCount||0,repostCount:l.repostCount||0,hashtags:l.hashtags||[],visibility:l.visibility,createdAt:l.createdAt?.toDate?.()?.toISOString()||l.createdAt,updatedAt:l.updatedAt?.toDate?.()?.toISOString()||l.updatedAt},f=t.toLowerCase();(c.content.toLowerCase().includes(f)||c.authorName.toLowerCase().includes(f))&&a.push(c)}),a.slice(0,e)}catch(r){return console.error("投稿検索エラー:",r),[]}},Z5=async(t,e=20)=>{try{if(!t.trim())return[];const r=t.startsWith("#")?t.slice(1):t,n=ze(be,"posts"),i=Lt(n,On("visibility","==","public"),On("hashtags","array-contains",r),Dn("createdAt","desc"),Fl(e)),a=await St(i),o=[];return a.forEach(l=>{const c=l.data();o.push({id:l.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,hashtags:c.hashtags||[],visibility:c.visibility,createdAt:c.createdAt?.toDate?.()?.toISOString()||c.createdAt,updatedAt:c.updatedAt?.toDate?.()?.toISOString()||c.updatedAt})}),o}catch(r){return console.error("ハッシュタグ検索エラー:",r),[]}},Yve=t=>{const e=["の","に","は","を","た","が","で","て","と","し","れ","さ","ある","いる","も","する","から","な","こと","として","い","や","れる","など","なっ","ない","この","ため","その","あっ","よう","また","もの","という","あり","まで","られ","なる","へ","か","だ","これ","によって","により","おり","より","による","ず","なり","られる","において","ば","なかっ","なく","しかし","について","せ","だっ","その後","できる","それ","う","ので","なお","のみ","でき","き","つ","における","および","いう","さらに","でも","ら","たり","その他","に関する","たち","ます","ん","なら","に対して","特に","せる","及び","これら","とき","では","にて","ほか","ながら","うち","そして","とも","として","のか","のに","ほど","ものの","という","ところ","による","もん","です","ました","でした","ある","いる","する","なる","くる","やる","いく","できる","なら","だろ","でしょ","です","ます","ません","ましょ","なり","たい","たら","なくて","なけれ"];let r=t.replace(/https?:\/\/[^\s]+/g,"");r=r.replace(/@[a-zA-Z0-9_]+/g,""),r=r.replace(/#[^\s]+/g,""),r=r.replace(/[!-/:-@[-`{-~、。！？「」『』（）]/g," ");const n=r.split(/\s+/).filter(c=>c.length>0),i=[],a=/[ぁ-んァ-ヶー一-龠々]+/g,o=r.match(a);o&&o.forEach(c=>{c.length>=2&&(e.includes(c)||i.push(c))});const l=n.filter(c=>c.match(/^[a-zA-Z0-9]+$/)&&c.length>=3);return[...i,...l]},Qve=async(t=10)=>{try{const e=ze(be,"posts"),r=Lt(e,On("visibility","==","public"),Dn("createdAt","desc"),Fl(200)),n=await St(r),i={};return n.forEach(o=>{const l=o.data();(l.hashtags||[]).forEach(p=>{i[`#${p}`]=(i[`#${p}`]||0)+2});const f=l.content||"";Yve(f).forEach(p=>{i[p]=(i[p]||0)+1})}),Object.entries(i).map(([o,l])=>({tag:o,count:l})).sort((o,l)=>l.count-o.count).slice(0,t)}catch(e){return console.error("トレンドキーワード取得エラー:",e),[]}},Zve=({onPostClick:t,onUserClick:e})=>{const[r,n]=C.useState(""),[i,a]=C.useState("all"),[o,l]=C.useState([]),[c,f]=C.useState([]),[d,p]=C.useState([]),[g,m]=C.useState(!1);C.useEffect(()=>{(async()=>{const S=await Qve(10);p(S)})()},[]);const b=async()=>{if(r.trim()){m(!0);try{if(r.startsWith("#")){const E=await Z5(r,20);f(E),l([]),a("hashtags")}else{const[E,S]=await Promise.all([Kve(r,10),Xve(r,20)]);l(E),f(S),a("all")}}catch(E){console.error("検索エラー:",E)}finally{m(!1)}}},w=async E=>{n(`#${E}`),m(!0);try{const S=await Z5(E,20);f(S),l([]),a("hashtags")}catch(S){console.error("ハッシュタグ検索エラー:",S)}finally{m(!1)}};return y.jsxs("div",{style:{paddingBottom:"80px"},children:[y.jsx("div",{style:{padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",background:"var(--background)",padding:"12px 16px",borderRadius:"24px",border:"1px solid var(--border)"},children:[y.jsx(lD,{size:24,style:{color:"var(--text-secondary)"}}),y.jsx("input",{type:"text",placeholder:"ユーザー、投稿、#ハッシュタグを検索",value:r,onChange:E=>n(E.target.value),onKeyDown:E=>{E.key==="Enter"&&b()},style:{flex:1,border:"none",background:"none",outline:"none",color:"var(--text)",fontSize:"15px",fontFamily:"inherit"}}),y.jsx("button",{onClick:b,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"16px",padding:"6px 16px",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:E=>{E.currentTarget.style.opacity="0.9"},onMouseLeave:E=>{E.currentTarget.style.opacity="1"},children:"検索"})]})}),r&&y.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--card)"},children:["all","users","posts","hashtags"].map(E=>y.jsxs("button",{onClick:()=>a(E),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:i===E?"2px solid var(--primary)":"2px solid transparent",color:i===E?"var(--primary)":"var(--text-secondary)",fontWeight:i===E?600:400,cursor:"pointer",transition:"all 0.2s",fontSize:"15px"},children:[E==="all"&&"すべて",E==="users"&&"ユーザー",E==="posts"&&"投稿",E==="hashtags"&&"ハッシュタグ"]},E))}),g&&y.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),y.jsx("div",{children:"検索中..."})]}),!g&&r&&y.jsxs("div",{style:{padding:"20px"},children:[(i==="all"||i==="users")&&o.length>0&&y.jsxs("div",{style:{marginBottom:"32px"},children:[y.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(Tf,{size:24}),"ユーザー (",o.length,")"]}),o.map(E=>y.jsxs("div",{onClick:()=>e(E.uid),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"var(--card)",borderRadius:"12px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[y.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:E.avatarUrl?`url(${E.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),y.jsxs("div",{style:{flex:1},children:[y.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"15px"},children:E.displayName}),y.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:["@",E.username]}),E.bio&&y.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginTop:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:E.bio})]})]},E.uid))]}),(i==="all"||i==="posts"||i==="hashtags")&&c.length>0&&y.jsxs("div",{children:[y.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(xF,{size:24}),"投稿 (",c.length,")"]}),c.map(E=>y.jsx(zC,{post:E,onPostClick:t,onUserClick:e},E.id))]}),o.length===0&&c.length===0&&y.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[y.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"検索結果が見つかりません"}),y.jsx("div",{style:{fontSize:"14px"},children:"別のキーワードで試してみてください"})]})]}),!r&&!g&&y.jsxs("div",{style:{padding:"20px"},children:[y.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(nE,{size:24}),"トレンド"]}),d.map((E,S)=>y.jsxs("div",{onClick:()=>w(E.tag),style:{padding:"16px",background:"var(--card)",borderRadius:"12px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-2px)",I.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[y.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"4px"},children:[S+1,"位・トレンド"]}),y.jsxs("div",{style:{fontSize:"16px",fontWeight:600,color:"var(--text)",marginBottom:"4px"},children:["#",E.tag]}),y.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[E.count,"件の投稿"]})]},E.tag))]})]})},Jve=()=>{const[t,e]=C.useState("timeline"),[r,n]=C.useState("main"),[i,a]=C.useState(null),[o,l]=C.useState(null),c=g=>{a(g),n("post-detail")},f=g=>{l(g),n("profile")},d=()=>{n("main"),a(null),l(null)},p=()=>{n("main"),a(null)};return r==="profile"&&o?y.jsx(Wve,{userId:o,onBack:d,onPostClick:c}):r==="post-detail"&&i?y.jsx($ve,{postId:i,onBack:d,onPostDeleted:p,onUserClick:f}):y.jsxs("div",{children:[y.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--card)",position:"sticky",top:0,zIndex:10},children:[y.jsxs("button",{onClick:()=>e("timeline"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="timeline"?"2px solid var(--primary)":"2px solid transparent",color:t==="timeline"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="timeline"?600:400},children:[y.jsx(SF,{size:20}),"タイムライン"]}),y.jsxs("button",{onClick:()=>e("search"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="search"?"2px solid var(--primary)":"2px solid transparent",color:t==="search"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="search"?600:400},children:[y.jsx(lD,{size:20}),"検索"]}),y.jsxs("button",{onClick:()=>e("notifications"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="notifications"?"2px solid var(--primary)":"2px solid transparent",color:t==="notifications"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="notifications"?600:400},children:[y.jsx(bI,{size:20}),"通知"]})]}),t==="timeline"&&y.jsx(Hve,{onPostClick:c,onUserClick:f}),t==="search"&&y.jsx(Zve,{onPostClick:c,onUserClick:f}),t==="notifications"&&y.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[y.jsx(bI,{size:48,style:{marginBottom:"16px",opacity:.5}}),y.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"通知機能"}),y.jsx("div",{style:{fontSize:"14px"},children:"Phase 6で実装予定"})]})]})},eme=()=>{const[t,e]=C.useState("home"),r=i=>({home:"健康家計アプリ",meals:"食事記録",barcode:"バーコードスキャン",report:"レポート",social:"ソーシャル",settings:"設定",stock:"在庫管理",shopping:"買い物リスト",recipe:"AIレシピ",expense:"家計簿",badges:"アチーブメント"})[i],n=()=>{switch(t){case"home":return y.jsx(c6,{onNavigate:e});case"meals":return y.jsx(XX,{});case"barcode":return y.jsx(Vee,{onNavigateToStock:()=>e("stock")});case"report":return y.jsx(Dve,{});case"social":return y.jsx(Jve,{});case"settings":return y.jsx(cY,{});case"stock":return y.jsx(hY,{});case"shopping":return y.jsx(_Y,{});case"recipe":return y.jsx(qY,{});case"expense":return y.jsx(Bve,{});case"badges":return y.jsx(zve,{});default:return y.jsx(c6,{onNavigate:e})}};return y.jsxs(y.Fragment,{children:[y.jsx(sF,{title:r(t)}),y.jsx("main",{children:n()}),y.jsx(qF,{currentScreen:t,onNavigate:e})]})};function tme(t){return Ee({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}const rme="modulepreload",nme=function(t){return"/life-pwa-react/"+t},J5={},Gf=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var o=f;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");i=f(r.map(d=>{if(d=nme(d),d in J5)return;J5[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":rme,p||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),p)return new Promise((b,w)=>{m.addEventListener("load",b),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},$v=()=>Math.floor(1e5+Math.random()*9e5).toString(),qv=async(t,e)=>{const r=Ye(ze(be,"verificationCodes"),t),n=new Date;n.setMinutes(n.getMinutes()+10),await Xl(r,{code:e,email:t,expiresAt:n.toISOString(),createdAt:new Date().toISOString()})},yB=async(t,e)=>{try{const r=Ye(ze(be,"verificationCodes"),t),n=await Fa(r);if(!n.exists())return{valid:!1,error:"確認コードが見つかりません。再送信してください。"};const i=n.data();return new Date(i.expiresAt)<new Date?(await Bi(r),{valid:!1,error:"確認コードの有効期限が切れています。再送信してください。"}):i.code!==e?{valid:!1,error:"確認コードが正しくありません。"}:(await Bi(r),{valid:!0})}catch(r){return console.error("Code verification error:",r),{valid:!1,error:"確認に失敗しました。もう一度お試しください。"}}},eD=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Gf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>cA);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Gf(async()=>{const{default:c}=await Promise.resolve().then(()=>yA);return{default:c}},void 0),a=r(i),l=await n(a,"sendVerificationEmail")({email:t,code:e});console.log(`✅ Verification email sent to ${t}`,l)}catch(r){throw console.error("Failed to send email via Cloud Functions:",r),console.log(`
====================================
🥗💰 健康家計アプリ - メール確認コード
====================================

こんにちは！

健康家計アプリへのご登録ありがとうございます。

以下の確認コードを入力して、メールアドレスの確認を完了してください：

確認コード: ${e}

※ このコードは10分間有効です。
※ このメールに心当たりがない場合は、無視していただいて構いません。

━━━━━━━━━━━━━━━━━━━━━━━━
健康家計アプリについて
━━━━━━━━━━━━━━━━━━━━━━━━

AIが健康をサポートする生活管理アプリです。

主な機能：
✓ 食事記録とカロリー管理
✓ AIレシピ生成
✓ 家計簿機能
✓ 在庫管理
✓ バーコードスキャン
✓ レシートOCR（自動読み取り）

━━━━━━━━━━━━━━━━━━━━━━━━

© 2025 健康家計アプリ
https://haradakouta.github.io/life-pwa-react/

====================================
    `),alert(`【開発モード】Cloud Function未設定です。
確認コードをコンソールに表示しました:

確認コード: ${e}

このコードを入力してください。`),new Error("メール送信に失敗しました。コンソールで確認コードを確認してください。")}},tD=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Gf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>cA);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Gf(async()=>{const{default:c}=await Promise.resolve().then(()=>yA);return{default:c}},void 0),a=r(i),l=await n(a,"sendPasswordResetEmail")({email:t,code:e});console.log(`✅ Password reset email sent to ${t}`,l)}catch(r){console.error("Failed to send password reset email via Cloud Functions:",r),console.log(`
====================================
🥗💰 健康家計アプリ - パスワードリセット
====================================

こんにちは！

パスワードのリセットをリクエストいただきありがとうございます。

以下の確認コードを入力して、パスワードのリセットを完了してください：

確認コード: ${e}

※ このコードは10分間有効です。
※ このメールに心当たりがない場合は、無視していただいて構いません。

━━━━━━━━━━━━━━━━━━━━━━━━

© 2025 健康家計アプリ
https://haradakouta.github.io/life-pwa-react/

====================================
    `),alert(`【開発モード】Cloud Function未設定です。
確認コードをコンソールに表示しました:

確認コード: ${e}

このコードを入力してください。`)}},ime=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Gf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>cA);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Gf(async()=>{const{default:c}=await Promise.resolve().then(()=>yA);return{default:c}},void 0),a=r(i),l=await n(a,"resetPassword")({email:t,newPassword:e});return console.log(`✅ Password reset successful for ${t}`,l),{success:!0}}catch(r){return console.error("Failed to reset password via Cloud Functions:",r),{success:!1,error:r.message||"パスワードのリセットに失敗しました"}}},ame=({onBack:t})=>{const[e,r]=C.useState("email"),[n,i]=C.useState(""),[a,o]=C.useState(""),[l,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(""),[m,b]=C.useState(!1),[w,E]=C.useState(""),S=async k=>{k.preventDefault(),E(""),b(!0);try{const B=$v();await qv(n,B),await eD(n,B),console.log("✅ 確認コードを送信しました:",n),r("code")}catch(B){console.error("Email send error:",B),E(B.message||"確認コードの送信に失敗しました")}finally{b(!1)}},I=async k=>{k.preventDefault(),E(""),b(!0);try{const B=await yB(n,a);if(!B.valid){E(B.error||"確認コードが正しくありません"),b(!1);return}console.log("✅ 確認コードが正しいです"),r("profile")}catch(B){E(B.message||"確認に失敗しました")}finally{b(!1)}},O=async k=>{if(k.preventDefault(),E(""),f!==p){E("パスワードが一致しません");return}if(f.length<6){E("パスワードは6文字以上で入力してください");return}if(!l.trim()){E("ユーザー名を入力してください");return}b(!0);try{const R=(await qG(Je,n,f)).user;await OM(R,{displayName:l}),console.log("🔄 認証トークンをリフレッシュ中..."),await R.getIdToken(!0),await new Promise(z=>setTimeout(z,2e3));let N=!1,L=0;const U=3;for(;!N&&L<U;)try{console.log(`📝 プロフィール作成試行 ${L+1}/${U}...`),await bA(R.uid,n,l),N=!0,console.log("✅ アカウント作成完了:",R.uid)}catch(z){if(L++,console.error(`❌ プロフィール作成失敗（試行 ${L}/${U}）:`,z),L<U){const H=1e3*Math.pow(2,L);console.log(`⏳ ${H}ms 待機してリトライします...`),await new Promise(j=>setTimeout(j,H)),await R.getIdToken(!0)}else console.error("❌ プロフィール作成に失敗しました（最大リトライ回数超過）"),alert(`注意: プロフィール作成に失敗しました。設定画面からプロフィールを作成してください。

エラー: `+(z.message||z.code||"不明なエラー"))}t()}catch(B){console.error("Registration error:",B);let R="アカウント作成に失敗しました";B.code==="auth/email-already-in-use"?R="このメールアドレスは既に使用されています":B.code==="auth/invalid-email"?R="メールアドレスの形式が正しくありません":B.code==="auth/weak-password"&&(R="パスワードが弱すぎます（6文字以上推奨）"),E(R)}finally{b(!1)}},D=async()=>{b(!0),E("");try{const k=$v();await qv(n,k),await eD(n,k),alert("確認コードを再送信しました！")}catch{E("再送信に失敗しました")}finally{b(!1)}};return y.jsxs("div",{className:"register-flow",children:[y.jsxs("div",{className:"progress-bar",children:[y.jsx("div",{className:`progress-step ${e==="email"?"active":["code","profile"].includes(e)?"completed":""}`,children:"1"}),y.jsx("div",{className:"progress-line"}),y.jsx("div",{className:`progress-step ${e==="code"?"active":e==="profile"?"completed":""}`,children:"2"}),y.jsx("div",{className:"progress-line"}),y.jsx("div",{className:`progress-step ${e==="profile"?"active":""}`,children:"3"})]}),e==="email"&&y.jsxs("form",{onSubmit:S,className:"step-form",children:[y.jsxs("button",{type:"button",onClick:t,className:"back-button-small",children:[y.jsx(wp,{})," 戻る"]}),y.jsxs("h2",{children:[y.jsx(Zv,{})," メールアドレスを入力"]}),y.jsx("p",{className:"step-description",children:"確認コードを送信します"}),y.jsx("div",{className:"form-group",children:y.jsx("input",{type:"email",value:n,onChange:k=>i(k.target.value),placeholder:"email@example.com",required:!0,autoFocus:!0})}),w&&y.jsx("div",{className:"error-message",children:w}),y.jsx("button",{type:"submit",className:"submit-button",disabled:m,children:m?"送信中...":"確認コードを送信"})]}),e==="code"&&y.jsxs("form",{onSubmit:I,className:"step-form",children:[y.jsxs("h2",{children:[y.jsx(cD,{})," 確認コードを入力"]}),y.jsxs("p",{className:"step-description",children:[y.jsx("strong",{children:n})," 宛に送信された6桁のコードを入力してください"]}),y.jsx("div",{className:"form-group",children:y.jsx("input",{type:"text",value:a,onChange:k=>o(k.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"code-input",required:!0,autoFocus:!0})}),w&&y.jsx("div",{className:"error-message",children:w}),y.jsx("button",{type:"submit",className:"submit-button",disabled:m||a.length!==6,children:m?"確認中...":"確認"}),y.jsx("button",{type:"button",onClick:D,className:"link-button",disabled:m,children:"コードを再送信"})]}),e==="profile"&&y.jsxs("form",{onSubmit:O,className:"step-form",children:[y.jsxs("h2",{children:[y.jsx(Tf,{})," アカウント情報を設定"]}),y.jsx("p",{className:"step-description",children:"ユーザー名とパスワードを設定してください"}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(Tf,{})," ユーザー名"]}),y.jsx("input",{type:"text",value:l,onChange:k=>c(k.target.value),placeholder:"山田太郎",required:!0,autoFocus:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(El,{})," パスワード"]}),y.jsx("input",{type:"password",value:f,onChange:k=>d(k.target.value),placeholder:"6文字以上",minLength:6,required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(El,{})," パスワード（確認）"]}),y.jsx("input",{type:"password",value:p,onChange:k=>g(k.target.value),placeholder:"もう一度入力",minLength:6,required:!0})]}),w&&y.jsx("div",{className:"error-message",children:w}),y.jsx("button",{type:"submit",className:"submit-button",disabled:m,children:m?"アカウント作成中...":"登録完了"})]}),y.jsx("style",{children:`
        .register-flow {
          width: 100%;
        }

        .progress-bar {
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 40px;
        }

        .progress-step {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: var(--border);
          color: var(--text-secondary);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          transition: all 0.3s;
        }

        .progress-step.active {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transform: scale(1.1);
        }

        .progress-step.completed {
          background: var(--primary);
          color: white;
        }

        .progress-line {
          width: 60px;
          height: 2px;
          background: var(--border);
        }

        .step-form {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .back-button-small {
          align-self: flex-start;
          padding: 8px 16px;
          background: var(--background);
          border: 1px solid var(--border);
          border-radius: 6px;
          color: var(--text);
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button-small:hover {
          background: var(--border);
        }

        .step-form h2 {
          color: var(--text);
          font-size: 24px;
          margin: 0;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .step-form h2 svg {
          color: var(--primary);
        }

        .step-description {
          color: var(--text-secondary);
          margin: -8px 0 0 0;
          line-height: 1.5;
        }

        .step-description strong {
          color: var(--primary);
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .code-input {
          font-size: 32px !important;
          text-align: center;
          letter-spacing: 8px;
          font-weight: 600;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .submit-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transition: all 0.3s;
        }

        .submit-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .submit-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 8px;
          text-decoration: underline;
        }

        .link-button:hover:not(:disabled) {
          opacity: 0.8;
        }

        .link-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})},ome=({onBack:t,onSuccess:e})=>{const[r,n]=C.useState("email"),[i,a]=C.useState(""),[o,l]=C.useState(""),[c,f]=C.useState(""),[d,p]=C.useState(""),[g,m]=C.useState(!1),[b,w]=C.useState(""),E=async D=>{D.preventDefault(),w(""),m(!0);try{const k=$v();await qv(i,k),await tD(i,k),console.log("✅ パスワードリセット用の確認コードを送信しました:",i),n("code")}catch(k){console.error("Email send error:",k),w(k.message||"確認コードの送信に失敗しました")}finally{m(!1)}},S=async D=>{D.preventDefault(),w(""),m(!0);try{const k=await yB(i,o);if(!k.valid){w(k.error||"確認コードが正しくありません"),m(!1);return}console.log("✅ 確認コードが正しいです"),n("password")}catch(k){w(k.message||"確認に失敗しました")}finally{m(!1)}},I=async D=>{if(D.preventDefault(),w(""),c!==d){w("パスワードが一致しません");return}if(c.length<6){w("パスワードは6文字以上で入力してください");return}m(!0);try{const k=await ime(i,c);if(!k.success){w(k.error||"パスワードの更新に失敗しました"),m(!1);return}console.log("✅ パスワードのリセットが完了しました"),alert("パスワードのリセットが完了しました！新しいパスワードでログインしてください。"),e()}catch(k){console.error("Password reset error:",k),w(k.message||"パスワードの更新に失敗しました")}finally{m(!1)}},O=async()=>{m(!0),w("");try{const D=$v();await qv(i,D),await tD(i,D),alert("確認コードを再送信しました！")}catch{w("再送信に失敗しました")}finally{m(!1)}};return y.jsxs("div",{className:"password-reset-flow",children:[y.jsxs("div",{className:"progress-bar",children:[y.jsx("div",{className:`progress-step ${r==="email"?"active":["code","password"].includes(r)?"completed":""}`,children:"1"}),y.jsx("div",{className:"progress-line"}),y.jsx("div",{className:`progress-step ${r==="code"?"active":r==="password"?"completed":""}`,children:"2"}),y.jsx("div",{className:"progress-line"}),y.jsx("div",{className:`progress-step ${r==="password"?"active":""}`,children:"3"})]}),r==="email"&&y.jsxs("form",{onSubmit:E,className:"step-form",children:[y.jsxs("button",{type:"button",onClick:t,className:"back-button-small",children:[y.jsx(wp,{})," 戻る"]}),y.jsxs("h2",{children:[y.jsx(Zv,{})," メールアドレスを入力"]}),y.jsx("p",{className:"step-description",children:"パスワードリセット用の確認コードを送信します"}),y.jsx("div",{className:"form-group",children:y.jsx("input",{type:"email",value:i,onChange:D=>a(D.target.value),placeholder:"email@example.com",required:!0,autoFocus:!0})}),b&&y.jsx("div",{className:"error-message",children:b}),y.jsx("button",{type:"submit",className:"submit-button",disabled:g,children:g?"送信中...":"確認コードを送信"})]}),r==="code"&&y.jsxs("form",{onSubmit:S,className:"step-form",children:[y.jsxs("h2",{children:[y.jsx(cD,{})," 確認コードを入力"]}),y.jsxs("p",{className:"step-description",children:[y.jsx("strong",{children:i})," 宛に送信された6桁のコードを入力してください"]}),y.jsx("div",{className:"form-group",children:y.jsx("input",{type:"text",value:o,onChange:D=>l(D.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"code-input",required:!0,autoFocus:!0})}),b&&y.jsx("div",{className:"error-message",children:b}),y.jsx("button",{type:"submit",className:"submit-button",disabled:g||o.length!==6,children:g?"確認中...":"確認"}),y.jsx("button",{type:"button",onClick:O,className:"link-button",disabled:g,children:"コードを再送信"})]}),r==="password"&&y.jsxs("form",{onSubmit:I,className:"step-form",children:[y.jsxs("h2",{children:[y.jsx(El,{})," 新しいパスワードを設定"]}),y.jsx("p",{className:"step-description",children:"新しいパスワードを入力してください"}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(El,{})," 新しいパスワード"]}),y.jsx("input",{type:"password",value:c,onChange:D=>f(D.target.value),placeholder:"6文字以上",minLength:6,required:!0,autoFocus:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(El,{})," パスワード（確認）"]}),y.jsx("input",{type:"password",value:d,onChange:D=>p(D.target.value),placeholder:"もう一度入力",minLength:6,required:!0})]}),b&&y.jsx("div",{className:"error-message",children:b}),y.jsx("button",{type:"submit",className:"submit-button",disabled:g,children:g?"更新中...":"パスワードを更新"})]}),y.jsx("style",{children:`
        .password-reset-flow {
          width: 100%;
        }

        .progress-bar {
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 40px;
        }

        .progress-step {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: var(--border);
          color: var(--text-secondary);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          transition: all 0.3s;
        }

        .progress-step.active {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transform: scale(1.1);
        }

        .progress-step.completed {
          background: var(--primary);
          color: white;
        }

        .progress-line {
          width: 60px;
          height: 2px;
          background: var(--border);
        }

        .step-form {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .back-button-small {
          align-self: flex-start;
          padding: 8px 16px;
          background: var(--background);
          border: 1px solid var(--border);
          border-radius: 6px;
          color: var(--text);
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button-small:hover {
          background: var(--border);
        }

        .step-form h2 {
          color: var(--text);
          font-size: 24px;
          margin: 0;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .step-form h2 svg {
          color: var(--primary);
        }

        .step-description {
          color: var(--text-secondary);
          margin: -8px 0 0 0;
          line-height: 1.5;
        }

        .step-description strong {
          color: var(--primary);
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .code-input {
          font-size: 32px !important;
          text-align: center;
          letter-spacing: 8px;
          font-weight: 600;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .submit-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transition: all 0.3s;
        }

        .submit-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .submit-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 8px;
          text-decoration: underline;
        }

        .link-button:hover:not(:disabled) {
          opacity: 0.8;
        }

        .link-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})},sme=({onLoginSuccess:t})=>{const[e,r]=C.useState(!1),[n,i]=C.useState(!1),[a,o]=C.useState(""),[l,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(!1),m=async w=>{w.preventDefault(),d(""),g(!0);try{const E=await YX(a,l);E.error?d(E.error):t()}catch(E){d(E.message||"認証エラーが発生しました")}finally{g(!1)}},b=async()=>{d(""),g(!0);try{const w=await QX();w.error?d(w.error):t()}catch(w){d(w.message||"認証エラーが発生しました")}finally{g(!1)}};return e?y.jsxs("div",{className:"login-screen",children:[y.jsxs("div",{className:"login-container",children:[y.jsxs("div",{className:"login-header",children:[y.jsx("h1",{children:"🥗💰 健康家計アプリ"}),y.jsx("p",{children:"新規登録"})]}),y.jsx(ame,{onBack:()=>r(!1)})]}),y.jsx("style",{children:`
          .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 20px;
          }

          .login-container {
            background: var(--card);
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          }

          .login-header {
            text-align: center;
            margin-bottom: 32px;
          }

          .login-header h1 {
            color: var(--text);
            font-size: 28px;
            margin: 0 0 8px 0;
          }

          .login-header p {
            color: var(--text-secondary);
            font-size: 14px;
            margin: 0;
          }
        `})]}):n?y.jsxs("div",{className:"login-screen",children:[y.jsxs("div",{className:"login-container",children:[y.jsxs("div",{className:"login-header",children:[y.jsx("h1",{children:"🥗💰 健康家計アプリ"}),y.jsx("p",{children:"パスワードリセット"})]}),y.jsx(ome,{onBack:()=>i(!1),onSuccess:()=>i(!1)})]}),y.jsx("style",{children:`
          .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 20px;
          }

          .login-container {
            background: var(--card);
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          }

          .login-header {
            text-align: center;
            margin-bottom: 32px;
          }

          .login-header h1 {
            color: var(--text);
            font-size: 28px;
            margin: 0 0 8px 0;
          }

          .login-header p {
            color: var(--text-secondary);
            font-size: 14px;
            margin: 0;
          }
        `})]}):y.jsxs("div",{className:"login-screen",children:[y.jsxs("div",{className:"login-container",children:[y.jsxs("div",{className:"login-header",children:[y.jsx("h1",{children:"🥗💰 健康家計アプリ"}),y.jsx("p",{children:"AIが健康をサポートする生活管理アプリ"})]}),y.jsxs("form",{onSubmit:m,className:"login-form",children:[y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(Zv,{})," メールアドレス"]}),y.jsx("input",{type:"email",value:a,onChange:w=>o(w.target.value),placeholder:"email@example.com",required:!0})]}),y.jsxs("div",{className:"form-group",children:[y.jsxs("label",{children:[y.jsx(El,{})," パスワード"]}),y.jsx("input",{type:"password",value:l,onChange:w=>c(w.target.value),placeholder:"6文字以上",minLength:6,required:!0})]}),f&&y.jsx("div",{className:"error-message",children:f}),y.jsx("button",{type:"submit",className:"login-button",disabled:p,children:p?"処理中...":y.jsxs(y.Fragment,{children:[y.jsx(TF,{})," ログイン"]})}),y.jsx("button",{type:"button",onClick:()=>i(!0),className:"forgot-password-button",children:"パスワードをお忘れですか？"}),y.jsx("button",{type:"button",onClick:()=>r(!0),className:"register-link-button",children:"アカウントをお持ちでない方はこちら"})]}),y.jsx("div",{className:"divider",children:y.jsx("span",{children:"または"})}),y.jsxs("button",{onClick:b,className:"google-login-button",disabled:p,children:[y.jsx(tme,{})," Googleでログイン"]}),y.jsx("div",{className:"login-footer",children:y.jsxs("p",{children:["※ Firebase Authenticationを使用した安全な認証です",y.jsx("br",{}),"データはFirestoreに安全に保存されます"]})})]}),y.jsx("style",{children:`
        .login-screen {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
          padding: 20px;
        }

        .login-container {
          background: var(--card);
          border-radius: 16px;
          padding: 40px;
          max-width: 450px;
          width: 100%;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .login-header {
          text-align: center;
          margin-bottom: 32px;
        }

        .login-header h1 {
          color: var(--text);
          font-size: 28px;
          margin: 0 0 8px 0;
        }

        .login-header p {
          color: var(--text-secondary);
          font-size: 14px;
          margin: 0;
        }

        .forgot-password-button,
        .register-link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 12px;
          text-decoration: underline;
          transition: opacity 0.3s;
        }

        .forgot-password-button:hover,
        .register-link-button:hover {
          opacity: 0.8;
        }

        .login-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--background);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .info-message {
          padding: 12px;
          background: #e8f5e9;
          color: #2e7d32;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 6px;
        }

        body.dark-mode .info-message {
          background: #1b5e20;
          color: #a5d6a7;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .login-button,
        .google-login-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
        }

        .login-button {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
        }

        .login-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .login-button:active:not(:disabled) {
          transform: translateY(0);
        }

        .login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .google-login-button {
          background: white;
          color: #555;
          border: 2px solid #ddd;
        }

        .google-login-button:hover:not(:disabled) {
          background: #f5f5f5;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .google-login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .divider {
          text-align: center;
          margin: 24px 0;
          position: relative;
        }

        .divider::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 1px;
          background: var(--border);
        }

        .divider span {
          background: var(--card);
          padding: 0 16px;
          color: var(--text-secondary);
          font-size: 14px;
          position: relative;
          z-index: 1;
        }

        .login-footer {
          margin-top: 24px;
          text-align: center;
        }

        .login-footer p {
          color: var(--text-secondary);
          font-size: 12px;
          line-height: 1.6;
          margin: 0;
        }

        @media (max-width: 480px) {
          .login-container {
            padding: 24px;
          }

          .login-header h1 {
            font-size: 24px;
          }
        }
      `})]})};function lme(){const{newBadges:t,clearNewBadges:e}=xA(),[r,n]=C.useState(0),[i,a]=C.useState(!1);if(C.useEffect(()=>{t.length>0&&(n(0),a(!0))},[t]),!i||t.length===0)return null;const o=t[r],l=$X(o);if(!l)return null;const c=()=>{r<t.length-1?n(r+1):f()},f=()=>{a(!1),e(),n(0)};return y.jsx("div",{className:"badge-modal-overlay-fullscreen",children:y.jsx("div",{className:"badge-modal-fullscreen",children:y.jsxs("div",{className:"badge-modal-content-fullscreen",children:[y.jsx("div",{className:"badge-glow"}),y.jsx("div",{className:"badge-celebration-large",children:"🎉"}),y.jsx("div",{className:"badge-icon-huge",children:l.icon}),y.jsxs("h2",{className:"badge-title-huge",children:[y.jsx(Yv,{size:48,style:{color:"#10b981",marginRight:"12px"}}),"バッジ獲得！"]}),y.jsx("h3",{className:"badge-name-huge",children:l.name}),y.jsx("p",{className:"badge-description-large",children:l.description}),t.length>1&&y.jsxs("div",{className:"badge-progress-large",children:[r+1," / ",t.length]}),y.jsx("div",{className:"badge-buttons-large",children:r<t.length-1?y.jsx("button",{className:"badge-btn-large badge-btn-next",onClick:c,children:"次へ"}):y.jsx("button",{className:"badge-btn-large badge-btn-ok",onClick:f,children:"OK"})})]})})})}function cme(t){if(t.length===0)return 0;const e=[...new Set(t.map(i=>i.split("T")[0]))].sort().reverse();let r=0;const n=new Date;n.setHours(0,0,0,0);for(let i=0;i<e.length;i++){const a=new Date(e[i]);a.setHours(0,0,0,0);const o=new Date(n);if(o.setDate(o.getDate()-i),o.setHours(0,0,0,0),a.getTime()===o.getTime())r++;else break}return r}function ume(){const{settings:t}=tv(),{user:e,loading:r}=ws(),[n,i]=C.useState(!1),a=Oo(),o=Ro(),l=Po(),c=mu(),f=Bp(),d=tv(),p=xA();return C.useEffect(()=>{document.body.classList.toggle("dark-mode",t.darkMode)},[t.darkMode]),C.useEffect(()=>{if(!e)return;const{intakes:g}=a,{expenses:m}=o,{stocks:b}=l,{recipeHistory:w}=f,E=0,S=cme(g.map(z=>z.date)),I=g.reduce((z,H)=>z+H.calories,0),O=new Date,D=O.getDate();let k=O.getMonth(),B=O.getFullYear();k===0?(k=11,B-=1):k-=1;const N=m.filter(z=>{const H=new Date(z.date);return H.getMonth()===k&&H.getFullYear()===B}).reduce((z,H)=>z+H.amount,0),L=D===1&&N<=t.monthlyBudget&&N>0,U={intakesCount:g.length,expensesCount:m.length,stocksCount:b.length,consecutiveDays:S,totalCalories:I,budgetAchieved:L,recipesGenerated:w.length,barcodesScanned:E};p.checkAndUnlockBadges(U)},[a.intakes.length,o.expenses.length,l.stocks.length,f.recipeHistory.length]),C.useEffect(()=>((async()=>{if(!e){a.unsubscribeFromFirestore();return}i(!0);try{if(console.log("Syncing data for user:",e.uid),console.log("📝 Checking user profile..."),await ga(e.uid))console.log("✅ プロフィールが存在します");else{console.log("⚠️ プロフィールが存在しません。自動作成します...");try{await bA(e.uid,e.email||"",e.displayName||`User${e.uid.slice(0,8)}`),console.log("✅ プロフィールを作成しました")}catch(b){console.error("❌ プロフィール作成に失敗しました:",b)}}await Promise.all([a.syncWithFirestore(),o.syncWithFirestore(),l.syncWithFirestore(),c.syncWithFirestore(),f.syncWithFirestore(),d.syncWithFirestore()]),console.log("Sync completed for user:",e.uid),console.log("Starting realtime sync..."),a.subscribeToFirestore(),console.log("Realtime sync started")}catch(m){console.error("Failed to sync stores with Firestore:",m)}finally{i(!1)}})(),()=>{e&&a.unsubscribeFromFirestore()}),[e?.uid]),r||n?y.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)"},children:y.jsx("div",{style:{color:"white",fontSize:"24px",textAlign:"center"},children:r?"ロード中...":"データを同期中..."})}):e?y.jsxs(y.Fragment,{children:[y.jsx(eme,{}),y.jsx(lme,{})]}):y.jsx(sme,{onLoginSuccess:()=>{}})}oF.createRoot(document.getElementById("root")).render(y.jsx(Hn.StrictMode,{children:y.jsx(ume,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/life-pwa-react/sw.js").then(t=>{console.log("[SW] Registered:",t.scope),t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW] New version available"),confirm("新しいバージョンが利用可能です。更新しますか？")&&(e.postMessage({type:"SKIP_WAITING"}),window.location.reload()))})})}).catch(t=>{console.error("[SW] Registration failed:",t)})});
