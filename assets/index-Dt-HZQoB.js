function JU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function Io(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p2={exports:{}},yh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI;function ez(){if(uI)return yh;uI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:o,ref:i!==void 0?i:null,props:a}}return yh.Fragment=e,yh.jsx=r,yh.jsxs=r,yh}var fI;function tz(){return fI||(fI=1,p2.exports=ez()),p2.exports}var m=tz(),g2={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dI;function rz(){if(dI)return qe;dI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function y(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function S(G,Z,be){this.props=G,this.context=Z,this.refs=E,this.updater=be||b}S.prototype.isReactComponent={},S.prototype.setState=function(G,Z){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Z,"setState")},S.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function I(){}I.prototype=S.prototype;function O(G,Z,be){this.props=G,this.context=Z,this.refs=E,this.updater=be||b}var D=O.prototype=new I;D.constructor=O,w(D,S.prototype),D.isPureReactComponent=!0;var k=Array.isArray;function B(){}var R={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function L(G,Z,be){var Ae=be.ref;return{$$typeof:t,type:G,key:Z,ref:Ae!==void 0?Ae:null,props:be}}function U(G,Z){return L(G.type,Z,G.props)}function j(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function V(G){var Z={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(be){return Z[be]})}var F=/\/+/g;function he(G,Z){return typeof G=="object"&&G!==null&&G.key!=null?V(""+G.key):Z.toString(36)}function we(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(B,B):(G.status="pending",G.then(function(Z){G.status==="pending"&&(G.status="fulfilled",G.value=Z)},function(Z){G.status==="pending"&&(G.status="rejected",G.reason=Z)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Y(G,Z,be,Ae,De){var We=typeof G;(We==="undefined"||We==="boolean")&&(G=null);var at=!1;if(G===null)at=!0;else switch(We){case"bigint":case"string":case"number":at=!0;break;case"object":switch(G.$$typeof){case t:case e:at=!0;break;case d:return at=G._init,Y(at(G._payload),Z,be,Ae,De)}}if(at)return De=De(G),at=Ae===""?"."+he(G,0):Ae,k(De)?(be="",at!=null&&(be=at.replace(F,"$&/")+"/"),Y(De,Z,be,"",function($e){return $e})):De!=null&&(j(De)&&(De=U(De,be+(De.key==null||G&&G.key===De.key?"":(""+De.key).replace(F,"$&/")+"/")+at)),Z.push(De)),1;at=0;var br=Ae===""?".":Ae+":";if(k(G))for(var me=0;me<G.length;me++)Ae=G[me],We=br+he(Ae,me),at+=Y(Ae,Z,be,We,De);else if(me=y(G),typeof me=="function")for(G=me.call(G),me=0;!(Ae=G.next()).done;)Ae=Ae.value,We=br+he(Ae,me++),at+=Y(Ae,Z,be,We,De);else if(We==="object"){if(typeof G.then=="function")return Y(we(G),Z,be,Ae,De);throw Z=String(G),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return at}function ie(G,Z,be){if(G==null)return G;var Ae=[],De=0;return Y(G,Ae,"","",function(We){return Z.call(be,We,De++)}),Ae}function K(G){if(G._status===-1){var Z=G._result;Z=Z(),Z.then(function(be){(G._status===0||G._status===-1)&&(G._status=1,G._result=be)},function(be){(G._status===0||G._status===-1)&&(G._status=2,G._result=be)}),G._status===-1&&(G._status=0,G._result=Z)}if(G._status===1)return G._result.default;throw G._result}var ge=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},Ie={map:ie,forEach:function(G,Z,be){ie(G,function(){Z.apply(this,arguments)},be)},count:function(G){var Z=0;return ie(G,function(){Z++}),Z},toArray:function(G){return ie(G,function(Z){return Z})||[]},only:function(G){if(!j(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return qe.Activity=p,qe.Children=Ie,qe.Component=S,qe.Fragment=r,qe.Profiler=i,qe.PureComponent=O,qe.StrictMode=n,qe.Suspense=c,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,qe.__COMPILER_RUNTIME={__proto__:null,c:function(G){return R.H.useMemoCache(G)}},qe.cache=function(G){return function(){return G.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(G,Z,be){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var Ae=w({},G.props),De=G.key;if(Z!=null)for(We in Z.key!==void 0&&(De=""+Z.key),Z)!N.call(Z,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&Z.ref===void 0||(Ae[We]=Z[We]);var We=arguments.length-2;if(We===1)Ae.children=be;else if(1<We){for(var at=Array(We),br=0;br<We;br++)at[br]=arguments[br+2];Ae.children=at}return L(G.type,De,Ae)},qe.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},qe.createElement=function(G,Z,be){var Ae,De={},We=null;if(Z!=null)for(Ae in Z.key!==void 0&&(We=""+Z.key),Z)N.call(Z,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(De[Ae]=Z[Ae]);var at=arguments.length-2;if(at===1)De.children=be;else if(1<at){for(var br=Array(at),me=0;me<at;me++)br[me]=arguments[me+2];De.children=br}if(G&&G.defaultProps)for(Ae in at=G.defaultProps,at)De[Ae]===void 0&&(De[Ae]=at[Ae]);return L(G,We,De)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(G){return{$$typeof:s,render:G}},qe.isValidElement=j,qe.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:K}},qe.memo=function(G,Z){return{$$typeof:f,type:G,compare:Z===void 0?null:Z}},qe.startTransition=function(G){var Z=R.T,be={};R.T=be;try{var Ae=G(),De=R.S;De!==null&&De(be,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(B,ge)}catch(We){ge(We)}finally{Z!==null&&be.types!==null&&(Z.types=be.types),R.T=Z}},qe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},qe.use=function(G){return R.H.use(G)},qe.useActionState=function(G,Z,be){return R.H.useActionState(G,Z,be)},qe.useCallback=function(G,Z){return R.H.useCallback(G,Z)},qe.useContext=function(G){return R.H.useContext(G)},qe.useDebugValue=function(){},qe.useDeferredValue=function(G,Z){return R.H.useDeferredValue(G,Z)},qe.useEffect=function(G,Z){return R.H.useEffect(G,Z)},qe.useEffectEvent=function(G){return R.H.useEffectEvent(G)},qe.useId=function(){return R.H.useId()},qe.useImperativeHandle=function(G,Z,be){return R.H.useImperativeHandle(G,Z,be)},qe.useInsertionEffect=function(G,Z){return R.H.useInsertionEffect(G,Z)},qe.useLayoutEffect=function(G,Z){return R.H.useLayoutEffect(G,Z)},qe.useMemo=function(G,Z){return R.H.useMemo(G,Z)},qe.useOptimistic=function(G,Z){return R.H.useOptimistic(G,Z)},qe.useReducer=function(G,Z,be){return R.H.useReducer(G,Z,be)},qe.useRef=function(G){return R.H.useRef(G)},qe.useState=function(G){return R.H.useState(G)},qe.useSyncExternalStore=function(G,Z,be){return R.H.useSyncExternalStore(G,Z,be)},qe.useTransition=function(){return R.H.useTransition()},qe.version="19.2.0",qe}var hI;function Xf(){return hI||(hI=1,g2.exports=rz()),g2.exports}var C=Xf();const Hn=Io(C),nz=JU({__proto__:null,default:Hn},[C]);var v2={exports:{}},xh={},m2={exports:{}},y2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI;function iz(){return pI||(pI=1,(function(t){function e(Y,ie){var K=Y.length;Y.push(ie);e:for(;0<K;){var ge=K-1>>>1,Ie=Y[ge];if(0<i(Ie,ie))Y[ge]=ie,Y[K]=Ie,K=ge;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ie=Y[0],K=Y.pop();if(K!==ie){Y[0]=K;e:for(var ge=0,Ie=Y.length,G=Ie>>>1;ge<G;){var Z=2*(ge+1)-1,be=Y[Z],Ae=Z+1,De=Y[Ae];if(0>i(be,K))Ae<Ie&&0>i(De,be)?(Y[ge]=De,Y[Ae]=K,ge=Ae):(Y[ge]=be,Y[Z]=K,ge=Z);else if(Ae<Ie&&0>i(De,K))Y[ge]=De,Y[Ae]=K,ge=Ae;else break e}}return ie}function i(Y,ie){var K=Y.sortIndex-ie.sortIndex;return K!==0?K:Y.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var c=[],f=[],d=1,p=null,g=3,y=!1,b=!1,w=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function D(Y){for(var ie=r(f);ie!==null;){if(ie.callback===null)n(f);else if(ie.startTime<=Y)n(f),ie.sortIndex=ie.expirationTime,e(c,ie);else break;ie=r(f)}}function k(Y){if(w=!1,D(Y),!b)if(r(c)!==null)b=!0,B||(B=!0,V());else{var ie=r(f);ie!==null&&we(k,ie.startTime-Y)}}var B=!1,R=-1,N=5,L=-1;function U(){return E?!0:!(t.unstable_now()-L<N)}function j(){if(E=!1,B){var Y=t.unstable_now();L=Y;var ie=!0;try{e:{b=!1,w&&(w=!1,I(R),R=-1),y=!0;var K=g;try{t:{for(D(Y),p=r(c);p!==null&&!(p.expirationTime>Y&&U());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,g=p.priorityLevel;var Ie=ge(p.expirationTime<=Y);if(Y=t.unstable_now(),typeof Ie=="function"){p.callback=Ie,D(Y),ie=!0;break t}p===r(c)&&n(c),D(Y)}else n(c);p=r(c)}if(p!==null)ie=!0;else{var G=r(f);G!==null&&we(k,G.startTime-Y),ie=!1}}break e}finally{p=null,g=K,y=!1}ie=void 0}}finally{ie?V():B=!1}}}var V;if(typeof O=="function")V=function(){O(j)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,he=F.port2;F.port1.onmessage=j,V=function(){he.postMessage(null)}}else V=function(){S(j,0)};function we(Y,ie){R=S(function(){Y(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(Y){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var K=g;g=ie;try{return Y()}finally{g=K}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var K=g;g=Y;try{return ie()}finally{g=K}},t.unstable_scheduleCallback=function(Y,ie,K){var ge=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ge+K:ge):K=ge,Y){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=K+Ie,Y={id:d++,callback:ie,priorityLevel:Y,startTime:K,expirationTime:Ie,sortIndex:-1},K>ge?(Y.sortIndex=K,e(f,Y),r(c)===null&&Y===r(f)&&(w?(I(R),R=-1):w=!0,we(k,K-ge))):(Y.sortIndex=Ie,e(c,Y),b||y||(b=!0,B||(B=!0,V()))),Y},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(Y){var ie=g;return function(){var K=g;g=ie;try{return Y.apply(this,arguments)}finally{g=K}}}})(y2)),y2}var gI;function az(){return gI||(gI=1,m2.exports=iz()),m2.exports}var x2={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI;function oz(){if(vI)return jn;vI=1;var t=Xf();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},jn.flushSync=function(c){var f=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=f,n.p=d,n.d.f()}},jn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(c,f))},jn.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},jn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?n.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):d==="script"&&n.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=s(f.as,f.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(c)},jn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin);n.d.L(c,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=s(f.as,f.crossOrigin);n.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(c)},jn.requestFormReset=function(c){n.d.r(c)},jn.unstable_batchedUpdates=function(c,f){return c(f)},jn.useFormState=function(c,f,d){return o.H.useFormState(c,f,d)},jn.useFormStatus=function(){return o.H.useHostTransitionStatus()},jn.version="19.2.0",jn}var mI;function aD(){if(mI)return x2.exports;mI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),x2.exports=oz(),x2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yI;function sz(){if(yI)return xh;yI=1;var t=az(),e=Xf(),r=aD();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var u=l,h=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(h=u.return),l=u.return;while(l)}return u.tag===3?h:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function s(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(n(188))}function f(l){var u=l.alternate;if(!u){if(u=a(l),u===null)throw Error(n(188));return u!==l?null:l}for(var h=l,v=u;;){var _=h.return;if(_===null)break;var A=_.alternate;if(A===null){if(v=_.return,v!==null){h=v;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===h)return c(_),l;if(A===v)return c(_),u;A=A.sibling}throw Error(n(188))}if(h.return!==v.return)h=_,v=A;else{for(var P=!1,z=_.child;z;){if(z===h){P=!0,h=_,v=A;break}if(z===v){P=!0,v=_,h=A;break}z=z.sibling}if(!P){for(z=A.child;z;){if(z===h){P=!0,h=A,v=_;break}if(z===v){P=!0,v=A,h=_;break}z=z.sibling}if(!P)throw Error(n(189))}}if(h.alternate!==v)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?l:u}function d(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=d(l),u!==null)return u;l=l.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),O=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function V(l){return l===null||typeof l!="object"?null:(l=j&&l[j]||l["@@iterator"],typeof l=="function"?l:null)}var F=Symbol.for("react.client.reference");function he(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===F?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case w:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case B:return"SuspenseList";case L:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case O:return l.displayName||"Context";case I:return(l._context.displayName||"Context")+".Consumer";case D:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case R:return u=l.displayName||null,u!==null?u:he(l.type)||"Memo";case N:u=l._payload,l=l._init;try{return he(l(u))}catch{}}return null}var we=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ge=[],Ie=-1;function G(l){return{current:l}}function Z(l){0>Ie||(l.current=ge[Ie],ge[Ie]=null,Ie--)}function be(l,u){Ie++,ge[Ie]=l.current,l.current=u}var Ae=G(null),De=G(null),We=G(null),at=G(null);function br(l,u){switch(be(We,u),be(De,l),be(Ae,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?N3(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=N3(u),l=M3(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Z(Ae),be(Ae,l)}function me(){Z(Ae),Z(De),Z(We)}function $e(l){l.memoizedState!==null&&be(at,l);var u=Ae.current,h=M3(u,l.type);u!==h&&(be(De,l),be(Ae,h))}function Qe(l){De.current===l&&(Z(Ae),Z(De)),at.current===l&&(Z(at),ph._currentValue=K)}var pe,_r;function tt(l){if(pe===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);pe=u&&u[1]||"",_r=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+l+_r}var Gr=!1;function wr(l,u){if(!l||Gr)return"";Gr=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(oe){var re=oe}Reflect.construct(l,[],fe)}else{try{fe.call()}catch(oe){re=oe}l.call(fe.prototype)}}else{try{throw Error()}catch(oe){re=oe}(fe=l())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),P=A[0],z=A[1];if(P&&z){var q=P.split(`
`),te=z.split(`
`);for(_=v=0;v<q.length&&!q[v].includes("DetermineComponentFrameRoot");)v++;for(;_<te.length&&!te[_].includes("DetermineComponentFrameRoot");)_++;if(v===q.length||_===te.length)for(v=q.length-1,_=te.length-1;1<=v&&0<=_&&q[v]!==te[_];)_--;for(;1<=v&&0<=_;v--,_--)if(q[v]!==te[_]){if(v!==1||_!==1)do if(v--,_--,0>_||q[v]!==te[_]){var le=`
`+q[v].replace(" at new "," at ");return l.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",l.displayName)),le}while(1<=v&&0<=_);break}}}finally{Gr=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?tt(h):""}function _i(l,u){switch(l.tag){case 26:case 27:case 5:return tt(l.type);case 16:return tt("Lazy");case 13:return l.child!==u&&u!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return wr(l.type,!1);case 11:return wr(l.type.render,!1);case 1:return wr(l.type,!0);case 31:return tt("Activity");default:return""}}function Ps(l){try{var u="",h=null;do u+=_i(l,h),h=l,l=l.return;while(l);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var Rr=Object.prototype.hasOwnProperty,Wr=t.unstable_scheduleCallback,Ds=t.unstable_cancelCallback,vy=t.unstable_shouldYield,c0=t.unstable_requestPaint,Kn=t.unstable_now,nc=t.unstable_getCurrentPriorityLevel,md=t.unstable_ImmediatePriority,yd=t.unstable_UserBlockingPriority,Ns=t.unstable_NormalPriority,my=t.unstable_LowPriority,u0=t.unstable_IdlePriority,f0=t.log,d0=t.unstable_setDisableYieldValue,_a=null,xn=null;function Gi(l){if(typeof f0=="function"&&d0(l),xn&&typeof xn.setStrictMode=="function")try{xn.setStrictMode(_a,l)}catch{}}var Er=Math.clz32?Math.clz32:p0,h0=Math.log,wu=Math.LN2;function p0(l){return l>>>=0,l===0?32:31-(h0(l)/wu|0)|0}var qa=256,ic=262144,Pr=4194304;function Ga(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Wa(l,u,h){var v=l.pendingLanes;if(v===0)return 0;var _=0,A=l.suspendedLanes,P=l.pingedLanes;l=l.warmLanes;var z=v&134217727;return z!==0?(v=z&~A,v!==0?_=Ga(v):(P&=z,P!==0?_=Ga(P):h||(h=z&~l,h!==0&&(_=Ga(h))))):(z=v&~A,z!==0?_=Ga(z):P!==0?_=Ga(P):h||(h=v&~l,h!==0&&(_=Ga(h)))),_===0?0:u!==0&&u!==_&&(u&A)===0&&(A=_&-_,h=u&-u,A>=h||A===32&&(h&4194048)!==0)?u:_}function wa(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function yy(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g0(){var l=Pr;return Pr<<=1,(Pr&62914560)===0&&(Pr=4194304),l}function Ka(l){for(var u=[],h=0;31>h;h++)u.push(l);return u}function ac(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function xy(l,u,h,v,_,A){var P=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var z=l.entanglements,q=l.expirationTimes,te=l.hiddenUpdates;for(h=P&~h;0<h;){var le=31-Er(h),fe=1<<le;z[le]=0,q[le]=-1;var re=te[le];if(re!==null)for(te[le]=null,le=0;le<re.length;le++){var oe=re[le];oe!==null&&(oe.lane&=-536870913)}h&=~fe}v!==0&&oc(l,v,0),A!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=A&~(P&~u))}function oc(l,u,h){l.pendingLanes|=u,l.suspendedLanes&=~u;var v=31-Er(u);l.entangledLanes|=u,l.entanglements[v]=l.entanglements[v]|1073741824|h&261930}function xd(l,u){var h=l.entangledLanes|=u;for(l=l.entanglements;h;){var v=31-Er(h),_=1<<v;_&u|l[v]&u&&(l[v]|=u),h&=~_}}function bd(l,u){var h=u&-u;return h=(h&42)!==0?1:sc(h),(h&(l.suspendedLanes|u))!==0?0:h}function sc(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ko(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function v0(){var l=ie.p;return l!==0?l:(l=window.event,l===void 0?32:nI(l.type))}function Ea(l,u){var h=ie.p;try{return ie.p=l,u()}finally{ie.p=h}}var Aa=Math.random().toString(36).slice(2),Dr="__reactFiber$"+Aa,sn="__reactProps$"+Aa,Xa="__reactContainer$"+Aa,Eu="__reactEvents$"+Aa,by="__reactListeners$"+Aa,m0="__reactHandles$"+Aa,y0="__reactResources$"+Aa,Ya="__reactMarker$"+Aa;function Au(l){delete l[Dr],delete l[sn],delete l[Eu],delete l[by],delete l[m0]}function Qa(l){var u=l[Dr];if(u)return u;for(var h=l.parentNode;h;){if(u=h[Xa]||h[Dr]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(l=F3(l);l!==null;){if(h=l[Dr])return h;l=F3(l)}return u}l=h,h=l.parentNode}return null}function Wi(l){if(l=l[Dr]||l[Xa]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function wi(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Za(l){var u=l[y0];return u||(u=l[y0]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Nr(l){l[Ya]=!0}var _d=new Set,wd={};function Ja(l,u){eo(l,u),eo(l+"Capture",u)}function eo(l,u){for(wd[l]=u,l=0;l<u.length;l++)_d.add(u[l])}var Ed=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ad={},Sd={};function x0(l){return Rr.call(Sd,l)?!0:Rr.call(Ad,l)?!1:Ed.test(l)?Sd[l]=!0:(Ad[l]=!0,!1)}function Su(l,u,h){if(x0(u))if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+h)}}function Ei(l,u,h){if(h===null)l.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+h)}}function Mr(l,u,h,v){if(v===null)l.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(u,h,""+v)}}function ln(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ms(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Cd(l,u,h){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var _=v.get,A=v.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return _.call(this)},set:function(P){h=""+P,A.call(this,P)}}),Object.defineProperty(l,u,{enumerable:v.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Pt(l){if(!l._valueTracker){var u=Ms(l)?"checked":"value";l._valueTracker=Cd(l,u,""+l[u])}}function lc(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var h=u.getValue(),v="";return l&&(v=Ms(l)?l.checked?"true":"false":l.value),l=v,l!==h?(u.setValue(l),!0):!1}function to(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var cc=/[\n"\\]/g;function ai(l){return l.replace(cc,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Cu(l,u,h,v,_,A,P,z){l.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?l.type=P:l.removeAttribute("type"),u!=null?P==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+ln(u)):l.value!==""+ln(u)&&(l.value=""+ln(u)):P!=="submit"&&P!=="reset"||l.removeAttribute("value"),u!=null?Td(l,P,ln(u)):h!=null?Td(l,P,ln(h)):v!=null&&l.removeAttribute("value"),_==null&&A!=null&&(l.defaultChecked=!!A),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+ln(z):l.removeAttribute("name")}function b0(l,u,h,v,_,A,P,z){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(l.type=A),u!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||u!=null)){Pt(l);return}h=h!=null?""+ln(h):"",u=u!=null?""+ln(u):h,z||u===l.value||(l.value=u),l.defaultValue=u}v=v??_,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=z?l.checked:!!v,l.defaultChecked=!!v,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.name=P),Pt(l)}function Td(l,u,h){u==="number"&&to(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function ks(l,u,h,v){if(l=l.options,u){u={};for(var _=0;_<h.length;_++)u["$"+h[_]]=!0;for(h=0;h<l.length;h++)_=u.hasOwnProperty("$"+l[h].value),l[h].selected!==_&&(l[h].selected=_),_&&v&&(l[h].defaultSelected=!0)}else{for(h=""+ln(h),u=null,_=0;_<l.length;_++){if(l[_].value===h){l[_].selected=!0,v&&(l[_].defaultSelected=!0);return}u!==null||l[_].disabled||(u=l[_])}u!==null&&(u.selected=!0)}}function _0(l,u,h){if(u!=null&&(u=""+ln(u),u!==l.value&&(l.value=u),h==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=h!=null?""+ln(h):""}function js(l,u,h,v){if(u==null){if(v!=null){if(h!=null)throw Error(n(92));if(we(v)){if(1<v.length)throw Error(n(93));v=v[0]}h=v}h==null&&(h=""),u=h}h=ln(u),l.defaultValue=h,v=l.textContent,v===h&&v!==""&&v!==null&&(l.value=v),Pt(l)}function oi(l,u){if(u){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=u;return}}l.textContent=u}var w0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Id(l,u,h){var v=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?v?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":v?l.setProperty(u,h):typeof h!="number"||h===0||w0.has(u)?u==="float"?l.cssFloat=h:l[u]=(""+h).trim():l[u]=h+"px"}function Od(l,u,h){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,h!=null){for(var v in h)!h.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var _ in u)v=u[_],u.hasOwnProperty(_)&&h[_]!==v&&Id(l,_,v)}else for(var A in u)u.hasOwnProperty(A)&&Id(l,A,u[A])}function Tu(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Iu(l){return Ls.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Sa(){}var Rd=null;function Ki(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Bs=null,ro=null;function uc(l){var u=Wi(l);if(u&&(l=u.stateNode)){var h=l[sn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Cu(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ai(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var v=h[u];if(v!==l&&v.form===l.form){var _=v[sn]||null;if(!_)throw Error(n(90));Cu(v,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<h.length;u++)v=h[u],v.form===l.form&&lc(v)}break e;case"textarea":_0(l,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&ks(l,!!h.multiple,u,!1)}}}var Ou=!1;function Us(l,u,h){if(Ou)return l(u,h);Ou=!0;try{var v=l(u);return v}finally{if(Ou=!1,(Bs!==null||ro!==null)&&(vg(),Bs&&(u=Bs,l=ro,ro=Bs=null,uc(u),l)))for(u=0;u<l.length;u++)uc(l[u])}}function Ca(l,u){var h=l.stateNode;if(h===null)return null;var v=h[sn]||null;if(v===null)return null;h=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(n(231,u,typeof h));return h}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fc=!1;if(Xi)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){fc=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{fc=!1}var no=null,Pd=null,dc=null;function Dd(){if(dc)return dc;var l,u=Pd,h=u.length,v,_="value"in no?no.value:no.textContent,A=_.length;for(l=0;l<h&&u[l]===_[l];l++);var P=h-l;for(v=1;v<=P&&u[h-v]===_[A-v];v++);return dc=_.slice(l,1<v?1-v:void 0)}function hc(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function jo(){return!0}function Ta(){return!1}function bn(l){function u(h,v,_,A,P){this._reactName=h,this._targetInst=_,this.type=v,this.nativeEvent=A,this.target=P,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(h=l[z],this[z]=h?h(A):A[z]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?jo:Ta,this.isPropagationStopped=Ta,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),u}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},io=bn(Lo),zs=p({},Lo,{view:0,detail:0}),Nd=bn(zs),Fs,Ru,ao,Pu=p({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==ao&&(ao&&l.type==="mousemove"?(Fs=l.screenX-ao.screenX,Ru=l.screenY-ao.screenY):Ru=Fs=0,ao=l),Fs)},movementY:function(l){return"movementY"in l?l.movementY:Ru}}),Md=bn(Pu),pc=p({},Pu,{dataTransfer:0}),A0=bn(pc),S0=p({},zs,{relatedTarget:0}),gc=bn(S0),kd=p({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),C0=bn(kd),Du=p({},Lo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),T0=bn(Du),I0=p({},Lo,{data:0}),oo=bn(I0),O0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D0(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=P0[l])?!!u[l]:!1}function Vs(){return D0}var Xn=p({},zs,{key:function(l){if(l.key){var u=O0[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=hc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?R0[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(l){return l.type==="keypress"?hc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?hc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),N0=bn(Xn),M0=p({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bo=bn(M0),x=p({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),T=bn(x),M=p({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=bn(M),Q=p({},Pu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=bn(Q),ye=p({},Lo,{newState:0,oldState:0}),Ke=bn(ye),Ar=[9,13,27,32],wt=Xi&&"CompositionEvent"in window,ir=null;Xi&&"documentMode"in document&&(ir=document.documentMode);var Yi=Xi&&"TextEvent"in window&&!ir,so=Xi&&(!wt||ir&&8<ir&&11>=ir),Ia=" ",Oa=!1;function vc(l,u){switch(l){case"keyup":return Ar.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nu(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Mu=!1;function EB(l,u){switch(l){case"compositionend":return Nu(u);case"keypress":return u.which!==32?null:(Oa=!0,Ia);case"textInput":return l=u.data,l===Ia&&Oa?null:l;default:return null}}function AB(l,u){if(Mu)return l==="compositionend"||!wt&&vc(l,u)?(l=Dd(),dc=Pd=no=null,Mu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return so&&u.locale!=="ko"?null:u.data;default:return null}}var SB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $C(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!SB[l.type]:u==="textarea"}function qC(l,u,h,v){Bs?ro?ro.push(v):ro=[v]:Bs=v,u=Eg(u,"onChange"),0<u.length&&(h=new io("onChange","change",null,h,v),l.push({event:h,listeners:u}))}var jd=null,Ld=null;function CB(l){T3(l,0)}function k0(l){var u=wi(l);if(lc(u))return l}function GC(l,u){if(l==="change")return u}var WC=!1;if(Xi){var _y;if(Xi){var wy="oninput"in document;if(!wy){var KC=document.createElement("div");KC.setAttribute("oninput","return;"),wy=typeof KC.oninput=="function"}_y=wy}else _y=!1;WC=_y&&(!document.documentMode||9<document.documentMode)}function XC(){jd&&(jd.detachEvent("onpropertychange",YC),Ld=jd=null)}function YC(l){if(l.propertyName==="value"&&k0(Ld)){var u=[];qC(u,Ld,l,Ki(l)),Us(CB,u)}}function TB(l,u,h){l==="focusin"?(XC(),jd=u,Ld=h,jd.attachEvent("onpropertychange",YC)):l==="focusout"&&XC()}function IB(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return k0(Ld)}function OB(l,u){if(l==="click")return k0(u)}function RB(l,u){if(l==="input"||l==="change")return k0(u)}function PB(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ai=typeof Object.is=="function"?Object.is:PB;function Bd(l,u){if(Ai(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var h=Object.keys(l),v=Object.keys(u);if(h.length!==v.length)return!1;for(v=0;v<h.length;v++){var _=h[v];if(!Rr.call(u,_)||!Ai(l[_],u[_]))return!1}return!0}function QC(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ZC(l,u){var h=QC(l);l=0;for(var v;h;){if(h.nodeType===3){if(v=l+h.textContent.length,l<=u&&v>=u)return{node:h,offset:u-l};l=v}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=QC(h)}}function JC(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?JC(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function eT(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=to(l.document);u instanceof l.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)l=u.contentWindow;else break;u=to(l.document)}return u}function Ey(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var DB=Xi&&"documentMode"in document&&11>=document.documentMode,ku=null,Ay=null,Ud=null,Sy=!1;function tT(l,u,h){var v=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Sy||ku==null||ku!==to(v)||(v=ku,"selectionStart"in v&&Ey(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ud&&Bd(Ud,v)||(Ud=v,v=Eg(Ay,"onSelect"),0<v.length&&(u=new io("onSelect","select",null,u,h),l.push({event:u,listeners:v}),u.target=ku)))}function mc(l,u){var h={};return h[l.toLowerCase()]=u.toLowerCase(),h["Webkit"+l]="webkit"+u,h["Moz"+l]="moz"+u,h}var ju={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionrun:mc("Transition","TransitionRun"),transitionstart:mc("Transition","TransitionStart"),transitioncancel:mc("Transition","TransitionCancel"),transitionend:mc("Transition","TransitionEnd")},Cy={},rT={};Xi&&(rT=document.createElement("div").style,"AnimationEvent"in window||(delete ju.animationend.animation,delete ju.animationiteration.animation,delete ju.animationstart.animation),"TransitionEvent"in window||delete ju.transitionend.transition);function yc(l){if(Cy[l])return Cy[l];if(!ju[l])return l;var u=ju[l],h;for(h in u)if(u.hasOwnProperty(h)&&h in rT)return Cy[l]=u[h];return l}var nT=yc("animationend"),iT=yc("animationiteration"),aT=yc("animationstart"),NB=yc("transitionrun"),MB=yc("transitionstart"),kB=yc("transitioncancel"),oT=yc("transitionend"),sT=new Map,Ty="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ty.push("scrollEnd");function Ra(l,u){sT.set(l,u),Ja(u,[l])}var j0=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Qi=[],Lu=0,Iy=0;function L0(){for(var l=Lu,u=Iy=Lu=0;u<l;){var h=Qi[u];Qi[u++]=null;var v=Qi[u];Qi[u++]=null;var _=Qi[u];Qi[u++]=null;var A=Qi[u];if(Qi[u++]=null,v!==null&&_!==null){var P=v.pending;P===null?_.next=_:(_.next=P.next,P.next=_),v.pending=_}A!==0&&lT(h,_,A)}}function B0(l,u,h,v){Qi[Lu++]=l,Qi[Lu++]=u,Qi[Lu++]=h,Qi[Lu++]=v,Iy|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function Oy(l,u,h,v){return B0(l,u,h,v),U0(l)}function xc(l,u){return B0(l,null,null,u),U0(l)}function lT(l,u,h){l.lanes|=h;var v=l.alternate;v!==null&&(v.lanes|=h);for(var _=!1,A=l.return;A!==null;)A.childLanes|=h,v=A.alternate,v!==null&&(v.childLanes|=h),A.tag===22&&(l=A.stateNode,l===null||l._visibility&1||(_=!0)),l=A,A=A.return;return l.tag===3?(A=l.stateNode,_&&u!==null&&(_=31-Er(h),l=A.hiddenUpdates,v=l[_],v===null?l[_]=[u]:v.push(u),u.lane=h|536870912),A):null}function U0(l){if(50<sh)throw sh=0,Bx=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Bu={};function jB(l,u,h,v){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Si(l,u,h,v){return new jB(l,u,h,v)}function Ry(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Uo(l,u){var h=l.alternate;return h===null?(h=Si(l.tag,u,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=u,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,u=l.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function cT(l,u){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,u=h.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function z0(l,u,h,v,_,A){var P=0;if(v=l,typeof l=="function")Ry(l)&&(P=1);else if(typeof l=="string")P=FU(l,h,Ae.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case L:return l=Si(31,h,u,_),l.elementType=L,l.lanes=A,l;case w:return bc(h.children,_,A,u);case E:P=8,_|=24;break;case S:return l=Si(12,h,u,_|2),l.elementType=S,l.lanes=A,l;case k:return l=Si(13,h,u,_),l.elementType=k,l.lanes=A,l;case B:return l=Si(19,h,u,_),l.elementType=B,l.lanes=A,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case O:P=10;break e;case I:P=9;break e;case D:P=11;break e;case R:P=14;break e;case N:P=16,v=null;break e}P=29,h=Error(n(130,l===null?"null":typeof l,"")),v=null}return u=Si(P,h,u,_),u.elementType=l,u.type=v,u.lanes=A,u}function bc(l,u,h,v){return l=Si(7,l,v,u),l.lanes=h,l}function Py(l,u,h){return l=Si(6,l,null,u),l.lanes=h,l}function uT(l){var u=Si(18,null,null,0);return u.stateNode=l,u}function Dy(l,u,h){return u=Si(4,l.children!==null?l.children:[],l.key,u),u.lanes=h,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var fT=new WeakMap;function Zi(l,u){if(typeof l=="object"&&l!==null){var h=fT.get(l);return h!==void 0?h:(u={value:l,source:u,stack:Ps(u)},fT.set(l,u),u)}return{value:l,source:u,stack:Ps(u)}}var Uu=[],zu=0,F0=null,zd=0,Ji=[],ea=0,Hs=null,lo=1,co="";function zo(l,u){Uu[zu++]=zd,Uu[zu++]=F0,F0=l,zd=u}function dT(l,u,h){Ji[ea++]=lo,Ji[ea++]=co,Ji[ea++]=Hs,Hs=l;var v=lo;l=co;var _=32-Er(v)-1;v&=~(1<<_),h+=1;var A=32-Er(u)+_;if(30<A){var P=_-_%5;A=(v&(1<<P)-1).toString(32),v>>=P,_-=P,lo=1<<32-Er(u)+_|h<<_|v,co=A+l}else lo=1<<A|h<<_|v,co=l}function Ny(l){l.return!==null&&(zo(l,1),dT(l,1,0))}function My(l){for(;l===F0;)F0=Uu[--zu],Uu[zu]=null,zd=Uu[--zu],Uu[zu]=null;for(;l===Hs;)Hs=Ji[--ea],Ji[ea]=null,co=Ji[--ea],Ji[ea]=null,lo=Ji[--ea],Ji[ea]=null}function hT(l,u){Ji[ea++]=lo,Ji[ea++]=co,Ji[ea++]=Hs,lo=u.id,co=u.overflow,Hs=l}var _n=null,Qt=null,ft=!1,$s=null,ta=!1,ky=Error(n(519));function qs(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fd(Zi(u,l)),ky}function pT(l){var u=l.stateNode,h=l.type,v=l.memoizedProps;switch(u[Dr]=l,u[sn]=v,h){case"dialog":nt("cancel",u),nt("close",u);break;case"iframe":case"object":case"embed":nt("load",u);break;case"video":case"audio":for(h=0;h<ch.length;h++)nt(ch[h],u);break;case"source":nt("error",u);break;case"img":case"image":case"link":nt("error",u),nt("load",u);break;case"details":nt("toggle",u);break;case"input":nt("invalid",u),b0(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":nt("invalid",u);break;case"textarea":nt("invalid",u),js(u,v.value,v.defaultValue,v.children)}h=v.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||v.suppressHydrationWarning===!0||P3(u.textContent,h)?(v.popover!=null&&(nt("beforetoggle",u),nt("toggle",u)),v.onScroll!=null&&nt("scroll",u),v.onScrollEnd!=null&&nt("scrollend",u),v.onClick!=null&&(u.onclick=Sa),u=!0):u=!1,u||qs(l,!0)}function gT(l){for(_n=l.return;_n;)switch(_n.tag){case 5:case 31:case 13:ta=!1;return;case 27:case 3:ta=!0;return;default:_n=_n.return}}function Fu(l){if(l!==_n)return!1;if(!ft)return gT(l),ft=!0,!1;var u=l.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||Jx(l.type,l.memoizedProps)),h=!h),h&&Qt&&qs(l),gT(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Qt=z3(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Qt=z3(l)}else u===27?(u=Qt,al(l.type)?(l=i2,i2=null,Qt=l):Qt=u):Qt=_n?na(l.stateNode.nextSibling):null;return!0}function _c(){Qt=_n=null,ft=!1}function jy(){var l=$s;return l!==null&&(ui===null?ui=l:ui.push.apply(ui,l),$s=null),l}function Fd(l){$s===null?$s=[l]:$s.push(l)}var Ly=G(null),wc=null,Fo=null;function Gs(l,u,h){be(Ly,u._currentValue),u._currentValue=h}function Vo(l){l._currentValue=Ly.current,Z(Ly)}function By(l,u,h){for(;l!==null;){var v=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),l===h)break;l=l.return}}function Uy(l,u,h,v){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var A=_.dependencies;if(A!==null){var P=_.child;A=A.firstContext;e:for(;A!==null;){var z=A;A=_;for(var q=0;q<u.length;q++)if(z.context===u[q]){A.lanes|=h,z=A.alternate,z!==null&&(z.lanes|=h),By(A.return,h,l),v||(P=null);break e}A=z.next}}else if(_.tag===18){if(P=_.return,P===null)throw Error(n(341));P.lanes|=h,A=P.alternate,A!==null&&(A.lanes|=h),By(P,h,l),P=null}else P=_.child;if(P!==null)P.return=_;else for(P=_;P!==null;){if(P===l){P=null;break}if(_=P.sibling,_!==null){_.return=P.return,P=_;break}P=P.return}_=P}}function Vu(l,u,h,v){l=null;for(var _=u,A=!1;_!==null;){if(!A){if((_.flags&524288)!==0)A=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var P=_.alternate;if(P===null)throw Error(n(387));if(P=P.memoizedProps,P!==null){var z=_.type;Ai(_.pendingProps.value,P.value)||(l!==null?l.push(z):l=[z])}}else if(_===at.current){if(P=_.alternate,P===null)throw Error(n(387));P.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(ph):l=[ph])}_=_.return}l!==null&&Uy(u,l,h,v),u.flags|=262144}function V0(l){for(l=l.firstContext;l!==null;){if(!Ai(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ec(l){wc=l,Fo=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function wn(l){return vT(wc,l)}function H0(l,u){return wc===null&&Ec(l),vT(l,u)}function vT(l,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Fo===null){if(l===null)throw Error(n(308));Fo=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Fo=Fo.next=u;return h}var LB=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(h,v){l.push(v)}};this.abort=function(){u.aborted=!0,l.forEach(function(h){return h()})}},BB=t.unstable_scheduleCallback,UB=t.unstable_NormalPriority,kr={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zy(){return{controller:new LB,data:new Map,refCount:0}}function Vd(l){l.refCount--,l.refCount===0&&BB(UB,function(){l.controller.abort()})}var Hd=null,Fy=0,Hu=0,$u=null;function zB(l,u){if(Hd===null){var h=Hd=[];Fy=0,Hu=$x(),$u={status:"pending",value:void 0,then:function(v){h.push(v)}}}return Fy++,u.then(mT,mT),u}function mT(){if(--Fy===0&&Hd!==null){$u!==null&&($u.status="fulfilled");var l=Hd;Hd=null,Hu=0,$u=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function FB(l,u){var h=[],v={status:"pending",value:null,reason:null,then:function(_){h.push(_)}};return l.then(function(){v.status="fulfilled",v.value=u;for(var _=0;_<h.length;_++)(0,h[_])(u)},function(_){for(v.status="rejected",v.reason=_,_=0;_<h.length;_++)(0,h[_])(void 0)}),v}var yT=Y.S;Y.S=function(l,u){t3=Kn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&zB(l,u),yT!==null&&yT(l,u)};var Ac=G(null);function Vy(){var l=Ac.current;return l!==null?l:$t.pooledCache}function $0(l,u){u===null?be(Ac,Ac.current):be(Ac,u.pool)}function xT(){var l=Vy();return l===null?null:{parent:kr._currentValue,pool:l}}var qu=Error(n(460)),Hy=Error(n(474)),q0=Error(n(542)),G0={then:function(){}};function bT(l){return l=l.status,l==="fulfilled"||l==="rejected"}function _T(l,u,h){switch(h=l[h],h===void 0?l.push(u):h!==u&&(u.then(Sa,Sa),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ET(l),l;default:if(typeof u.status=="string")u.then(Sa,Sa);else{if(l=$t,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(v){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=v}},function(v){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ET(l),l}throw Cc=u,qu}}function Sc(l){try{var u=l._init;return u(l._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Cc=h,qu):h}}var Cc=null;function wT(){if(Cc===null)throw Error(n(459));var l=Cc;return Cc=null,l}function ET(l){if(l===qu||l===q0)throw Error(n(483))}var Gu=null,$d=0;function W0(l){var u=$d;return $d+=1,Gu===null&&(Gu=[]),_T(Gu,l,u)}function qd(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function K0(l,u){throw u.$$typeof===g?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function AT(l){function u(X,W){if(l){var ee=X.deletions;ee===null?(X.deletions=[W],X.flags|=16):ee.push(W)}}function h(X,W){if(!l)return null;for(;W!==null;)u(X,W),W=W.sibling;return null}function v(X){for(var W=new Map;X!==null;)X.key!==null?W.set(X.key,X):W.set(X.index,X),X=X.sibling;return W}function _(X,W){return X=Uo(X,W),X.index=0,X.sibling=null,X}function A(X,W,ee){return X.index=ee,l?(ee=X.alternate,ee!==null?(ee=ee.index,ee<W?(X.flags|=67108866,W):ee):(X.flags|=67108866,W)):(X.flags|=1048576,W)}function P(X){return l&&X.alternate===null&&(X.flags|=67108866),X}function z(X,W,ee,ce){return W===null||W.tag!==6?(W=Py(ee,X.mode,ce),W.return=X,W):(W=_(W,ee),W.return=X,W)}function q(X,W,ee,ce){var Me=ee.type;return Me===w?le(X,W,ee.props.children,ce,ee.key):W!==null&&(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===N&&Sc(Me)===W.type)?(W=_(W,ee.props),qd(W,ee),W.return=X,W):(W=z0(ee.type,ee.key,ee.props,null,X.mode,ce),qd(W,ee),W.return=X,W)}function te(X,W,ee,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=Dy(ee,X.mode,ce),W.return=X,W):(W=_(W,ee.children||[]),W.return=X,W)}function le(X,W,ee,ce,Me){return W===null||W.tag!==7?(W=bc(ee,X.mode,ce,Me),W.return=X,W):(W=_(W,ee),W.return=X,W)}function fe(X,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Py(""+W,X.mode,ee),W.return=X,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return ee=z0(W.type,W.key,W.props,null,X.mode,ee),qd(ee,W),ee.return=X,ee;case b:return W=Dy(W,X.mode,ee),W.return=X,W;case N:return W=Sc(W),fe(X,W,ee)}if(we(W)||V(W))return W=bc(W,X.mode,ee,null),W.return=X,W;if(typeof W.then=="function")return fe(X,W0(W),ee);if(W.$$typeof===O)return fe(X,H0(X,W),ee);K0(X,W)}return null}function re(X,W,ee,ce){var Me=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Me!==null?null:z(X,W,""+ee,ce);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return ee.key===Me?q(X,W,ee,ce):null;case b:return ee.key===Me?te(X,W,ee,ce):null;case N:return ee=Sc(ee),re(X,W,ee,ce)}if(we(ee)||V(ee))return Me!==null?null:le(X,W,ee,ce,null);if(typeof ee.then=="function")return re(X,W,W0(ee),ce);if(ee.$$typeof===O)return re(X,W,H0(X,ee),ce);K0(X,ee)}return null}function oe(X,W,ee,ce,Me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return X=X.get(ee)||null,z(W,X,""+ce,Me);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return X=X.get(ce.key===null?ee:ce.key)||null,q(W,X,ce,Me);case b:return X=X.get(ce.key===null?ee:ce.key)||null,te(W,X,ce,Me);case N:return ce=Sc(ce),oe(X,W,ee,ce,Me)}if(we(ce)||V(ce))return X=X.get(ee)||null,le(W,X,ce,Me,null);if(typeof ce.then=="function")return oe(X,W,ee,W0(ce),Me);if(ce.$$typeof===O)return oe(X,W,ee,H0(W,ce),Me);K0(W,ce)}return null}function Te(X,W,ee,ce){for(var Me=null,mt=null,Pe=W,Ye=W=0,st=null;Pe!==null&&Ye<ee.length;Ye++){Pe.index>Ye?(st=Pe,Pe=null):st=Pe.sibling;var yt=re(X,Pe,ee[Ye],ce);if(yt===null){Pe===null&&(Pe=st);break}l&&Pe&&yt.alternate===null&&u(X,Pe),W=A(yt,W,Ye),mt===null?Me=yt:mt.sibling=yt,mt=yt,Pe=st}if(Ye===ee.length)return h(X,Pe),ft&&zo(X,Ye),Me;if(Pe===null){for(;Ye<ee.length;Ye++)Pe=fe(X,ee[Ye],ce),Pe!==null&&(W=A(Pe,W,Ye),mt===null?Me=Pe:mt.sibling=Pe,mt=Pe);return ft&&zo(X,Ye),Me}for(Pe=v(Pe);Ye<ee.length;Ye++)st=oe(Pe,X,Ye,ee[Ye],ce),st!==null&&(l&&st.alternate!==null&&Pe.delete(st.key===null?Ye:st.key),W=A(st,W,Ye),mt===null?Me=st:mt.sibling=st,mt=st);return l&&Pe.forEach(function(ul){return u(X,ul)}),ft&&zo(X,Ye),Me}function Be(X,W,ee,ce){if(ee==null)throw Error(n(151));for(var Me=null,mt=null,Pe=W,Ye=W=0,st=null,yt=ee.next();Pe!==null&&!yt.done;Ye++,yt=ee.next()){Pe.index>Ye?(st=Pe,Pe=null):st=Pe.sibling;var ul=re(X,Pe,yt.value,ce);if(ul===null){Pe===null&&(Pe=st);break}l&&Pe&&ul.alternate===null&&u(X,Pe),W=A(ul,W,Ye),mt===null?Me=ul:mt.sibling=ul,mt=ul,Pe=st}if(yt.done)return h(X,Pe),ft&&zo(X,Ye),Me;if(Pe===null){for(;!yt.done;Ye++,yt=ee.next())yt=fe(X,yt.value,ce),yt!==null&&(W=A(yt,W,Ye),mt===null?Me=yt:mt.sibling=yt,mt=yt);return ft&&zo(X,Ye),Me}for(Pe=v(Pe);!yt.done;Ye++,yt=ee.next())yt=oe(Pe,X,Ye,yt.value,ce),yt!==null&&(l&&yt.alternate!==null&&Pe.delete(yt.key===null?Ye:yt.key),W=A(yt,W,Ye),mt===null?Me=yt:mt.sibling=yt,mt=yt);return l&&Pe.forEach(function(ZU){return u(X,ZU)}),ft&&zo(X,Ye),Me}function Ft(X,W,ee,ce){if(typeof ee=="object"&&ee!==null&&ee.type===w&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:e:{for(var Me=ee.key;W!==null;){if(W.key===Me){if(Me=ee.type,Me===w){if(W.tag===7){h(X,W.sibling),ce=_(W,ee.props.children),ce.return=X,X=ce;break e}}else if(W.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===N&&Sc(Me)===W.type){h(X,W.sibling),ce=_(W,ee.props),qd(ce,ee),ce.return=X,X=ce;break e}h(X,W);break}else u(X,W);W=W.sibling}ee.type===w?(ce=bc(ee.props.children,X.mode,ce,ee.key),ce.return=X,X=ce):(ce=z0(ee.type,ee.key,ee.props,null,X.mode,ce),qd(ce,ee),ce.return=X,X=ce)}return P(X);case b:e:{for(Me=ee.key;W!==null;){if(W.key===Me)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){h(X,W.sibling),ce=_(W,ee.children||[]),ce.return=X,X=ce;break e}else{h(X,W);break}else u(X,W);W=W.sibling}ce=Dy(ee,X.mode,ce),ce.return=X,X=ce}return P(X);case N:return ee=Sc(ee),Ft(X,W,ee,ce)}if(we(ee))return Te(X,W,ee,ce);if(V(ee)){if(Me=V(ee),typeof Me!="function")throw Error(n(150));return ee=Me.call(ee),Be(X,W,ee,ce)}if(typeof ee.then=="function")return Ft(X,W,W0(ee),ce);if(ee.$$typeof===O)return Ft(X,W,H0(X,ee),ce);K0(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(h(X,W.sibling),ce=_(W,ee),ce.return=X,X=ce):(h(X,W),ce=Py(ee,X.mode,ce),ce.return=X,X=ce),P(X)):h(X,W)}return function(X,W,ee,ce){try{$d=0;var Me=Ft(X,W,ee,ce);return Gu=null,Me}catch(Pe){if(Pe===qu||Pe===q0)throw Pe;var mt=Si(29,Pe,null,X.mode);return mt.lanes=ce,mt.return=X,mt}finally{}}}var Tc=AT(!0),ST=AT(!1),Ws=!1;function $y(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qy(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ks(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Xs(l,u,h){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(Et&2)!==0){var _=v.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),v.pending=u,u=U0(l),lT(l,null,h),u}return B0(l,v,u,h),U0(l)}function Gd(l,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var v=u.lanes;v&=l.pendingLanes,h|=v,u.lanes=h,xd(l,h)}}function Gy(l,u){var h=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,h===v)){var _=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var P={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?_=A=P:A=A.next=P,h=h.next}while(h!==null);A===null?_=A=u:A=A.next=u}else _=A=u;h={baseState:v.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=u}var Wy=!1;function Wd(){if(Wy){var l=$u;if(l!==null)throw l}}function Kd(l,u,h,v){Wy=!1;var _=l.updateQueue;Ws=!1;var A=_.firstBaseUpdate,P=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var q=z,te=q.next;q.next=null,P===null?A=te:P.next=te,P=q;var le=l.alternate;le!==null&&(le=le.updateQueue,z=le.lastBaseUpdate,z!==P&&(z===null?le.firstBaseUpdate=te:z.next=te,le.lastBaseUpdate=q))}if(A!==null){var fe=_.baseState;P=0,le=te=q=null,z=A;do{var re=z.lane&-536870913,oe=re!==z.lane;if(oe?(ot&re)===re:(v&re)===re){re!==0&&re===Hu&&(Wy=!0),le!==null&&(le=le.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var Te=l,Be=z;re=u;var Ft=h;switch(Be.tag){case 1:if(Te=Be.payload,typeof Te=="function"){fe=Te.call(Ft,fe,re);break e}fe=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Be.payload,re=typeof Te=="function"?Te.call(Ft,fe,re):Te,re==null)break e;fe=p({},fe,re);break e;case 2:Ws=!0}}re=z.callback,re!==null&&(l.flags|=64,oe&&(l.flags|=8192),oe=_.callbacks,oe===null?_.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:z.tag,payload:z.payload,callback:z.callback,next:null},le===null?(te=le=oe,q=fe):le=le.next=oe,P|=re;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;oe=z,z=oe.next,oe.next=null,_.lastBaseUpdate=oe,_.shared.pending=null}}while(!0);le===null&&(q=fe),_.baseState=q,_.firstBaseUpdate=te,_.lastBaseUpdate=le,A===null&&(_.shared.lanes=0),el|=P,l.lanes=P,l.memoizedState=fe}}function CT(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function TT(l,u){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)CT(h[l],u)}var Wu=G(null),X0=G(0);function IT(l,u){l=Qo,be(X0,l),be(Wu,u),Qo=l|u.baseLanes}function Ky(){be(X0,Qo),be(Wu,Wu.current)}function Xy(){Qo=X0.current,Z(Wu),Z(X0)}var Ci=G(null),ra=null;function Ys(l){var u=l.alternate;be(Sr,Sr.current&1),be(Ci,l),ra===null&&(u===null||Wu.current!==null||u.memoizedState!==null)&&(ra=l)}function Yy(l){be(Sr,Sr.current),be(Ci,l),ra===null&&(ra=l)}function OT(l){l.tag===22?(be(Sr,Sr.current),be(Ci,l),ra===null&&(ra=l)):Qs()}function Qs(){be(Sr,Sr.current),be(Ci,Ci.current)}function Ti(l){Z(Ci),ra===l&&(ra=null),Z(Sr)}var Sr=G(0);function Y0(l){for(var u=l;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||r2(h)||n2(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ho=0,Xe=null,Ut=null,jr=null,Q0=!1,Ku=!1,Ic=!1,Z0=0,Xd=0,Xu=null,VB=0;function pr(){throw Error(n(321))}function Qy(l,u){if(u===null)return!1;for(var h=0;h<u.length&&h<l.length;h++)if(!Ai(l[h],u[h]))return!1;return!0}function Zy(l,u,h,v,_,A){return Ho=A,Xe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Y.H=l===null||l.memoizedState===null?d4:hx,Ic=!1,A=h(v,_),Ic=!1,Ku&&(A=PT(u,h,v,_)),RT(l),A}function RT(l){Y.H=Zd;var u=Ut!==null&&Ut.next!==null;if(Ho=0,jr=Ut=Xe=null,Q0=!1,Xd=0,Xu=null,u)throw Error(n(300));l===null||Lr||(l=l.dependencies,l!==null&&V0(l)&&(Lr=!0))}function PT(l,u,h,v){Xe=l;var _=0;do{if(Ku&&(Xu=null),Xd=0,Ku=!1,25<=_)throw Error(n(301));if(_+=1,jr=Ut=null,l.updateQueue!=null){var A=l.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}Y.H=h4,A=u(h,v)}while(Ku);return A}function HB(){var l=Y.H,u=l.useState()[0];return u=typeof u.then=="function"?Yd(u):u,l=l.useState()[0],(Ut!==null?Ut.memoizedState:null)!==l&&(Xe.flags|=1024),u}function Jy(){var l=Z0!==0;return Z0=0,l}function ex(l,u,h){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~h}function tx(l){if(Q0){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}Q0=!1}Ho=0,jr=Ut=Xe=null,Ku=!1,Xd=Z0=0,Xu=null}function Yn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jr===null?Xe.memoizedState=jr=l:jr=jr.next=l,jr}function Cr(){if(Ut===null){var l=Xe.alternate;l=l!==null?l.memoizedState:null}else l=Ut.next;var u=jr===null?Xe.memoizedState:jr.next;if(u!==null)jr=u,Ut=l;else{if(l===null)throw Xe.alternate===null?Error(n(467)):Error(n(310));Ut=l,l={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},jr===null?Xe.memoizedState=jr=l:jr=jr.next=l}return jr}function J0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yd(l){var u=Xd;return Xd+=1,Xu===null&&(Xu=[]),l=_T(Xu,l,u),u=Xe,(jr===null?u.memoizedState:jr.next)===null&&(u=u.alternate,Y.H=u===null||u.memoizedState===null?d4:hx),l}function eg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Yd(l);if(l.$$typeof===O)return wn(l)}throw Error(n(438,String(l)))}function rx(l){var u=null,h=Xe.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var v=Xe.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=J0(),Xe.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(l),v=0;v<l;v++)h[v]=U;return u.index++,h}function $o(l,u){return typeof u=="function"?u(l):u}function tg(l){var u=Cr();return nx(u,Ut,l)}function nx(l,u,h){var v=l.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=h;var _=l.baseQueue,A=v.pending;if(A!==null){if(_!==null){var P=_.next;_.next=A.next,A.next=P}u.baseQueue=_=A,v.pending=null}if(A=l.baseState,_===null)l.memoizedState=A;else{u=_.next;var z=P=null,q=null,te=u,le=!1;do{var fe=te.lane&-536870913;if(fe!==te.lane?(ot&fe)===fe:(Ho&fe)===fe){var re=te.revertLane;if(re===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),fe===Hu&&(le=!0);else if((Ho&re)===re){te=te.next,re===Hu&&(le=!0);continue}else fe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(z=q=fe,P=A):q=q.next=fe,Xe.lanes|=re,el|=re;fe=te.action,Ic&&h(A,fe),A=te.hasEagerState?te.eagerState:h(A,fe)}else re={lane:fe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},q===null?(z=q=re,P=A):q=q.next=re,Xe.lanes|=fe,el|=fe;te=te.next}while(te!==null&&te!==u);if(q===null?P=A:q.next=z,!Ai(A,l.memoizedState)&&(Lr=!0,le&&(h=$u,h!==null)))throw h;l.memoizedState=A,l.baseState=P,l.baseQueue=q,v.lastRenderedState=A}return _===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function ix(l){var u=Cr(),h=u.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var v=h.dispatch,_=h.pending,A=u.memoizedState;if(_!==null){h.pending=null;var P=_=_.next;do A=l(A,P.action),P=P.next;while(P!==_);Ai(A,u.memoizedState)||(Lr=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),h.lastRenderedState=A}return[A,v]}function DT(l,u,h){var v=Xe,_=Cr(),A=ft;if(A){if(h===void 0)throw Error(n(407));h=h()}else h=u();var P=!Ai((Ut||_).memoizedState,h);if(P&&(_.memoizedState=h,Lr=!0),_=_.queue,sx(kT.bind(null,v,_,l),[l]),_.getSnapshot!==u||P||jr!==null&&jr.memoizedState.tag&1){if(v.flags|=2048,Yu(9,{destroy:void 0},MT.bind(null,v,_,h,u),null),$t===null)throw Error(n(349));A||(Ho&127)!==0||NT(v,u,h)}return h}function NT(l,u,h){l.flags|=16384,l={getSnapshot:u,value:h},u=Xe.updateQueue,u===null?(u=J0(),Xe.updateQueue=u,u.stores=[l]):(h=u.stores,h===null?u.stores=[l]:h.push(l))}function MT(l,u,h,v){u.value=h,u.getSnapshot=v,jT(u)&&LT(l)}function kT(l,u,h){return h(function(){jT(u)&&LT(l)})}function jT(l){var u=l.getSnapshot;l=l.value;try{var h=u();return!Ai(l,h)}catch{return!0}}function LT(l){var u=xc(l,2);u!==null&&fi(u,l,2)}function ax(l){var u=Yn();if(typeof l=="function"){var h=l;if(l=h(),Ic){Gi(!0);try{h()}finally{Gi(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:l},u}function BT(l,u,h,v){return l.baseState=h,nx(l,Ut,typeof v=="function"?v:$o)}function $B(l,u,h,v,_){if(ig(l))throw Error(n(485));if(l=u.action,l!==null){var A={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){A.listeners.push(P)}};Y.T!==null?h(!0):A.isTransition=!1,v(A),h=u.pending,h===null?(A.next=u.pending=A,UT(u,A)):(A.next=h.next,u.pending=h.next=A)}}function UT(l,u){var h=u.action,v=u.payload,_=l.state;if(u.isTransition){var A=Y.T,P={};Y.T=P;try{var z=h(_,v),q=Y.S;q!==null&&q(P,z),zT(l,u,z)}catch(te){ox(l,u,te)}finally{A!==null&&P.types!==null&&(A.types=P.types),Y.T=A}}else try{A=h(_,v),zT(l,u,A)}catch(te){ox(l,u,te)}}function zT(l,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(v){FT(l,u,v)},function(v){return ox(l,u,v)}):FT(l,u,h)}function FT(l,u,h){u.status="fulfilled",u.value=h,VT(u),l.state=h,u=l.pending,u!==null&&(h=u.next,h===u?l.pending=null:(h=h.next,u.next=h,UT(l,h)))}function ox(l,u,h){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=h,VT(u),u=u.next;while(u!==v)}l.action=null}function VT(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function HT(l,u){return u}function $T(l,u){if(ft){var h=$t.formState;if(h!==null){e:{var v=Xe;if(ft){if(Qt){t:{for(var _=Qt,A=ta;_.nodeType!==8;){if(!A){_=null;break t}if(_=na(_.nextSibling),_===null){_=null;break t}}A=_.data,_=A==="F!"||A==="F"?_:null}if(_){Qt=na(_.nextSibling),v=_.data==="F!";break e}}qs(v)}v=!1}v&&(u=h[0])}}return h=Yn(),h.memoizedState=h.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:HT,lastRenderedState:u},h.queue=v,h=c4.bind(null,Xe,v),v.dispatch=h,v=ax(!1),A=dx.bind(null,Xe,!1,v.queue),v=Yn(),_={state:u,dispatch:null,action:l,pending:null},v.queue=_,h=$B.bind(null,Xe,_,A,h),_.dispatch=h,v.memoizedState=l,[u,h,!1]}function qT(l){var u=Cr();return GT(u,Ut,l)}function GT(l,u,h){if(u=nx(l,u,HT)[0],l=tg($o)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=Yd(u)}catch(P){throw P===qu?q0:P}else v=u;u=Cr();var _=u.queue,A=_.dispatch;return h!==u.memoizedState&&(Xe.flags|=2048,Yu(9,{destroy:void 0},qB.bind(null,_,h),null)),[v,A,l]}function qB(l,u){l.action=u}function WT(l){var u=Cr(),h=Ut;if(h!==null)return GT(u,h,l);Cr(),u=u.memoizedState,h=Cr();var v=h.queue.dispatch;return h.memoizedState=l,[u,v,!1]}function Yu(l,u,h,v){return l={tag:l,create:h,deps:v,inst:u,next:null},u=Xe.updateQueue,u===null&&(u=J0(),Xe.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=l.next=l:(v=h.next,h.next=l,l.next=v,u.lastEffect=l),l}function KT(){return Cr().memoizedState}function rg(l,u,h,v){var _=Yn();Xe.flags|=l,_.memoizedState=Yu(1|u,{destroy:void 0},h,v===void 0?null:v)}function ng(l,u,h,v){var _=Cr();v=v===void 0?null:v;var A=_.memoizedState.inst;Ut!==null&&v!==null&&Qy(v,Ut.memoizedState.deps)?_.memoizedState=Yu(u,A,h,v):(Xe.flags|=l,_.memoizedState=Yu(1|u,A,h,v))}function XT(l,u){rg(8390656,8,l,u)}function sx(l,u){ng(2048,8,l,u)}function GB(l){Xe.flags|=4;var u=Xe.updateQueue;if(u===null)u=J0(),Xe.updateQueue=u,u.events=[l];else{var h=u.events;h===null?u.events=[l]:h.push(l)}}function YT(l){var u=Cr().memoizedState;return GB({ref:u,nextImpl:l}),function(){if((Et&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function QT(l,u){return ng(4,2,l,u)}function ZT(l,u){return ng(4,4,l,u)}function JT(l,u){if(typeof u=="function"){l=l();var h=u(l);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function e4(l,u,h){h=h!=null?h.concat([l]):null,ng(4,4,JT.bind(null,u,l),h)}function lx(){}function t4(l,u){var h=Cr();u=u===void 0?null:u;var v=h.memoizedState;return u!==null&&Qy(u,v[1])?v[0]:(h.memoizedState=[l,u],l)}function r4(l,u){var h=Cr();u=u===void 0?null:u;var v=h.memoizedState;if(u!==null&&Qy(u,v[1]))return v[0];if(v=l(),Ic){Gi(!0);try{l()}finally{Gi(!1)}}return h.memoizedState=[v,u],v}function cx(l,u,h){return h===void 0||(Ho&1073741824)!==0&&(ot&261930)===0?l.memoizedState=u:(l.memoizedState=h,l=n3(),Xe.lanes|=l,el|=l,h)}function n4(l,u,h,v){return Ai(h,u)?h:Wu.current!==null?(l=cx(l,h,v),Ai(l,u)||(Lr=!0),l):(Ho&42)===0||(Ho&1073741824)!==0&&(ot&261930)===0?(Lr=!0,l.memoizedState=h):(l=n3(),Xe.lanes|=l,el|=l,u)}function i4(l,u,h,v,_){var A=ie.p;ie.p=A!==0&&8>A?A:8;var P=Y.T,z={};Y.T=z,dx(l,!1,u,h);try{var q=_(),te=Y.S;if(te!==null&&te(z,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var le=FB(q,v);Qd(l,u,le,Ri(l))}else Qd(l,u,v,Ri(l))}catch(fe){Qd(l,u,{then:function(){},status:"rejected",reason:fe},Ri())}finally{ie.p=A,P!==null&&z.types!==null&&(P.types=z.types),Y.T=P}}function WB(){}function ux(l,u,h,v){if(l.tag!==5)throw Error(n(476));var _=a4(l).queue;i4(l,_,u,K,h===null?WB:function(){return o4(l),h(v)})}function a4(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:K},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:h},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function o4(l){var u=a4(l);u.next===null&&(u=l.alternate.memoizedState),Qd(l,u.next.queue,{},Ri())}function fx(){return wn(ph)}function s4(){return Cr().memoizedState}function l4(){return Cr().memoizedState}function KB(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var h=Ri();l=Ks(h);var v=Xs(u,l,h);v!==null&&(fi(v,u,h),Gd(v,u,h)),u={cache:zy()},l.payload=u;return}u=u.return}}function XB(l,u,h){var v=Ri();h={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},ig(l)?u4(u,h):(h=Oy(l,u,h,v),h!==null&&(fi(h,l,v),f4(h,u,v)))}function c4(l,u,h){var v=Ri();Qd(l,u,h,v)}function Qd(l,u,h,v){var _={lane:v,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(ig(l))u4(u,_);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var P=u.lastRenderedState,z=A(P,h);if(_.hasEagerState=!0,_.eagerState=z,Ai(z,P))return B0(l,u,_,0),$t===null&&L0(),!1}catch{}finally{}if(h=Oy(l,u,_,v),h!==null)return fi(h,l,v),f4(h,u,v),!0}return!1}function dx(l,u,h,v){if(v={lane:2,revertLane:$x(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},ig(l)){if(u)throw Error(n(479))}else u=Oy(l,h,v,2),u!==null&&fi(u,l,2)}function ig(l){var u=l.alternate;return l===Xe||u!==null&&u===Xe}function u4(l,u){Ku=Q0=!0;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}function f4(l,u,h){if((h&4194048)!==0){var v=u.lanes;v&=l.pendingLanes,h|=v,u.lanes=h,xd(l,h)}}var Zd={readContext:wn,use:eg,useCallback:pr,useContext:pr,useEffect:pr,useImperativeHandle:pr,useLayoutEffect:pr,useInsertionEffect:pr,useMemo:pr,useReducer:pr,useRef:pr,useState:pr,useDebugValue:pr,useDeferredValue:pr,useTransition:pr,useSyncExternalStore:pr,useId:pr,useHostTransitionStatus:pr,useFormState:pr,useActionState:pr,useOptimistic:pr,useMemoCache:pr,useCacheRefresh:pr};Zd.useEffectEvent=pr;var d4={readContext:wn,use:eg,useCallback:function(l,u){return Yn().memoizedState=[l,u===void 0?null:u],l},useContext:wn,useEffect:XT,useImperativeHandle:function(l,u,h){h=h!=null?h.concat([l]):null,rg(4194308,4,JT.bind(null,u,l),h)},useLayoutEffect:function(l,u){return rg(4194308,4,l,u)},useInsertionEffect:function(l,u){rg(4,2,l,u)},useMemo:function(l,u){var h=Yn();u=u===void 0?null:u;var v=l();if(Ic){Gi(!0);try{l()}finally{Gi(!1)}}return h.memoizedState=[v,u],v},useReducer:function(l,u,h){var v=Yn();if(h!==void 0){var _=h(u);if(Ic){Gi(!0);try{h(u)}finally{Gi(!1)}}}else _=u;return v.memoizedState=v.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},v.queue=l,l=l.dispatch=XB.bind(null,Xe,l),[v.memoizedState,l]},useRef:function(l){var u=Yn();return l={current:l},u.memoizedState=l},useState:function(l){l=ax(l);var u=l.queue,h=c4.bind(null,Xe,u);return u.dispatch=h,[l.memoizedState,h]},useDebugValue:lx,useDeferredValue:function(l,u){var h=Yn();return cx(h,l,u)},useTransition:function(){var l=ax(!1);return l=i4.bind(null,Xe,l.queue,!0,!1),Yn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,h){var v=Xe,_=Yn();if(ft){if(h===void 0)throw Error(n(407));h=h()}else{if(h=u(),$t===null)throw Error(n(349));(ot&127)!==0||NT(v,u,h)}_.memoizedState=h;var A={value:h,getSnapshot:u};return _.queue=A,XT(kT.bind(null,v,A,l),[l]),v.flags|=2048,Yu(9,{destroy:void 0},MT.bind(null,v,A,h,u),null),h},useId:function(){var l=Yn(),u=$t.identifierPrefix;if(ft){var h=co,v=lo;h=(v&~(1<<32-Er(v)-1)).toString(32)+h,u="_"+u+"R_"+h,h=Z0++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=VB++,u="_"+u+"r_"+h.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:fx,useFormState:$T,useActionState:$T,useOptimistic:function(l){var u=Yn();u.memoizedState=u.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=dx.bind(null,Xe,!0,h),h.dispatch=u,[l,u]},useMemoCache:rx,useCacheRefresh:function(){return Yn().memoizedState=KB.bind(null,Xe)},useEffectEvent:function(l){var u=Yn(),h={impl:l};return u.memoizedState=h,function(){if((Et&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},hx={readContext:wn,use:eg,useCallback:t4,useContext:wn,useEffect:sx,useImperativeHandle:e4,useInsertionEffect:QT,useLayoutEffect:ZT,useMemo:r4,useReducer:tg,useRef:KT,useState:function(){return tg($o)},useDebugValue:lx,useDeferredValue:function(l,u){var h=Cr();return n4(h,Ut.memoizedState,l,u)},useTransition:function(){var l=tg($o)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Yd(l),u]},useSyncExternalStore:DT,useId:s4,useHostTransitionStatus:fx,useFormState:qT,useActionState:qT,useOptimistic:function(l,u){var h=Cr();return BT(h,Ut,l,u)},useMemoCache:rx,useCacheRefresh:l4};hx.useEffectEvent=YT;var h4={readContext:wn,use:eg,useCallback:t4,useContext:wn,useEffect:sx,useImperativeHandle:e4,useInsertionEffect:QT,useLayoutEffect:ZT,useMemo:r4,useReducer:ix,useRef:KT,useState:function(){return ix($o)},useDebugValue:lx,useDeferredValue:function(l,u){var h=Cr();return Ut===null?cx(h,l,u):n4(h,Ut.memoizedState,l,u)},useTransition:function(){var l=ix($o)[0],u=Cr().memoizedState;return[typeof l=="boolean"?l:Yd(l),u]},useSyncExternalStore:DT,useId:s4,useHostTransitionStatus:fx,useFormState:WT,useActionState:WT,useOptimistic:function(l,u){var h=Cr();return Ut!==null?BT(h,Ut,l,u):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:rx,useCacheRefresh:l4};h4.useEffectEvent=YT;function px(l,u,h,v){u=l.memoizedState,h=h(v,u),h=h==null?u:p({},u,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var gx={enqueueSetState:function(l,u,h){l=l._reactInternals;var v=Ri(),_=Ks(v);_.payload=u,h!=null&&(_.callback=h),u=Xs(l,_,v),u!==null&&(fi(u,l,v),Gd(u,l,v))},enqueueReplaceState:function(l,u,h){l=l._reactInternals;var v=Ri(),_=Ks(v);_.tag=1,_.payload=u,h!=null&&(_.callback=h),u=Xs(l,_,v),u!==null&&(fi(u,l,v),Gd(u,l,v))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var h=Ri(),v=Ks(h);v.tag=2,u!=null&&(v.callback=u),u=Xs(l,v,h),u!==null&&(fi(u,l,h),Gd(u,l,h))}};function p4(l,u,h,v,_,A,P){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,A,P):u.prototype&&u.prototype.isPureReactComponent?!Bd(h,v)||!Bd(_,A):!0}function g4(l,u,h,v){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,v),u.state!==l&&gx.enqueueReplaceState(u,u.state,null)}function Oc(l,u){var h=u;if("ref"in u){h={};for(var v in u)v!=="ref"&&(h[v]=u[v])}if(l=l.defaultProps){h===u&&(h=p({},h));for(var _ in l)h[_]===void 0&&(h[_]=l[_])}return h}function v4(l){j0(l)}function m4(l){console.error(l)}function y4(l){j0(l)}function ag(l,u){try{var h=l.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function x4(l,u,h){try{var v=l.onCaughtError;v(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function vx(l,u,h){return h=Ks(h),h.tag=3,h.payload={element:null},h.callback=function(){ag(l,u)},h}function b4(l){return l=Ks(l),l.tag=3,l}function _4(l,u,h,v){var _=h.type.getDerivedStateFromError;if(typeof _=="function"){var A=v.value;l.payload=function(){return _(A)},l.callback=function(){x4(u,h,v)}}var P=h.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(l.callback=function(){x4(u,h,v),typeof _!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var z=v.stack;this.componentDidCatch(v.value,{componentStack:z!==null?z:""})})}function YB(l,u,h,v,_){if(h.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=h.alternate,u!==null&&Vu(u,h,_,!0),h=Ci.current,h!==null){switch(h.tag){case 31:case 13:return ra===null?mg():h.alternate===null&&gr===0&&(gr=3),h.flags&=-257,h.flags|=65536,h.lanes=_,v===G0?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([v]):u.add(v),Fx(l,v,_)),!1;case 22:return h.flags|=65536,v===G0?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([v]):h.add(v)),Fx(l,v,_)),!1}throw Error(n(435,h.tag))}return Fx(l,v,_),mg(),!1}if(ft)return u=Ci.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,v!==ky&&(l=Error(n(422),{cause:v}),Fd(Zi(l,h)))):(v!==ky&&(u=Error(n(423),{cause:v}),Fd(Zi(u,h))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,v=Zi(v,h),_=vx(l.stateNode,v,_),Gy(l,_),gr!==4&&(gr=2)),!1;var A=Error(n(520),{cause:v});if(A=Zi(A,h),oh===null?oh=[A]:oh.push(A),gr!==4&&(gr=2),u===null)return!0;v=Zi(v,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,l=_&-_,h.lanes|=l,l=vx(h.stateNode,v,l),Gy(h,l),!1;case 1:if(u=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(tl===null||!tl.has(A))))return h.flags|=65536,_&=-_,h.lanes|=_,_=b4(_),_4(_,l,h,v),Gy(h,_),!1}h=h.return}while(h!==null);return!1}var mx=Error(n(461)),Lr=!1;function En(l,u,h,v){u.child=l===null?ST(u,null,h,v):Tc(u,l.child,h,v)}function w4(l,u,h,v,_){h=h.render;var A=u.ref;if("ref"in v){var P={};for(var z in v)z!=="ref"&&(P[z]=v[z])}else P=v;return Ec(u),v=Zy(l,u,h,P,A,_),z=Jy(),l!==null&&!Lr?(ex(l,u,_),qo(l,u,_)):(ft&&z&&Ny(u),u.flags|=1,En(l,u,v,_),u.child)}function E4(l,u,h,v,_){if(l===null){var A=h.type;return typeof A=="function"&&!Ry(A)&&A.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=A,A4(l,u,A,v,_)):(l=z0(h.type,null,v,u,u.mode,_),l.ref=u.ref,l.return=u,u.child=l)}if(A=l.child,!Sx(l,_)){var P=A.memoizedProps;if(h=h.compare,h=h!==null?h:Bd,h(P,v)&&l.ref===u.ref)return qo(l,u,_)}return u.flags|=1,l=Uo(A,v),l.ref=u.ref,l.return=u,u.child=l}function A4(l,u,h,v,_){if(l!==null){var A=l.memoizedProps;if(Bd(A,v)&&l.ref===u.ref)if(Lr=!1,u.pendingProps=v=A,Sx(l,_))(l.flags&131072)!==0&&(Lr=!0);else return u.lanes=l.lanes,qo(l,u,_)}return yx(l,u,h,v,_)}function S4(l,u,h,v){var _=v.children,A=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((u.flags&128)!==0){if(A=A!==null?A.baseLanes|h:h,l!==null){for(v=u.child=l.child,_=0;v!==null;)_=_|v.lanes|v.childLanes,v=v.sibling;v=_&~A}else v=0,u.child=null;return C4(l,u,A,h,v)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&$0(u,A!==null?A.cachePool:null),A!==null?IT(u,A):Ky(),OT(u);else return v=u.lanes=536870912,C4(l,u,A!==null?A.baseLanes|h:h,h,v)}else A!==null?($0(u,A.cachePool),IT(u,A),Qs(),u.memoizedState=null):(l!==null&&$0(u,null),Ky(),Qs());return En(l,u,_,h),u.child}function Jd(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function C4(l,u,h,v,_){var A=Vy();return A=A===null?null:{parent:kr._currentValue,pool:A},u.memoizedState={baseLanes:h,cachePool:A},l!==null&&$0(u,null),Ky(),OT(u),l!==null&&Vu(l,u,v,!0),u.childLanes=_,null}function og(l,u){return u=lg({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function T4(l,u,h){return Tc(u,l.child,null,h),l=og(u,u.pendingProps),l.flags|=2,Ti(u),u.memoizedState=null,l}function QB(l,u,h){var v=u.pendingProps,_=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(ft){if(v.mode==="hidden")return l=og(u,v),u.lanes=536870912,Jd(null,l);if(Yy(u),(l=Qt)?(l=U3(l,ta),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Hs!==null?{id:lo,overflow:co}:null,retryLane:536870912,hydrationErrors:null},h=uT(l),h.return=u,u.child=h,_n=u,Qt=null)):l=null,l===null)throw qs(u);return u.lanes=536870912,null}return og(u,v)}var A=l.memoizedState;if(A!==null){var P=A.dehydrated;if(Yy(u),_)if(u.flags&256)u.flags&=-257,u=T4(l,u,h);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(Lr||Vu(l,u,h,!1),_=(h&l.childLanes)!==0,Lr||_){if(v=$t,v!==null&&(P=bd(v,h),P!==0&&P!==A.retryLane))throw A.retryLane=P,xc(l,P),fi(v,l,P),mx;mg(),u=T4(l,u,h)}else l=A.treeContext,Qt=na(P.nextSibling),_n=u,ft=!0,$s=null,ta=!1,l!==null&&hT(u,l),u=og(u,v),u.flags|=4096;return u}return l=Uo(l.child,{mode:v.mode,children:v.children}),l.ref=u.ref,u.child=l,l.return=u,l}function sg(l,u){var h=u.ref;if(h===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(l===null||l.ref!==h)&&(u.flags|=4194816)}}function yx(l,u,h,v,_){return Ec(u),h=Zy(l,u,h,v,void 0,_),v=Jy(),l!==null&&!Lr?(ex(l,u,_),qo(l,u,_)):(ft&&v&&Ny(u),u.flags|=1,En(l,u,h,_),u.child)}function I4(l,u,h,v,_,A){return Ec(u),u.updateQueue=null,h=PT(u,v,h,_),RT(l),v=Jy(),l!==null&&!Lr?(ex(l,u,A),qo(l,u,A)):(ft&&v&&Ny(u),u.flags|=1,En(l,u,h,A),u.child)}function O4(l,u,h,v,_){if(Ec(u),u.stateNode===null){var A=Bu,P=h.contextType;typeof P=="object"&&P!==null&&(A=wn(P)),A=new h(v,A),u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=gx,u.stateNode=A,A._reactInternals=u,A=u.stateNode,A.props=v,A.state=u.memoizedState,A.refs={},$y(u),P=h.contextType,A.context=typeof P=="object"&&P!==null?wn(P):Bu,A.state=u.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(px(u,h,P,v),A.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(P=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),P!==A.state&&gx.enqueueReplaceState(A,A.state,null),Kd(u,v,A,_),Wd(),A.state=u.memoizedState),typeof A.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(l===null){A=u.stateNode;var z=u.memoizedProps,q=Oc(h,z);A.props=q;var te=A.context,le=h.contextType;P=Bu,typeof le=="object"&&le!==null&&(P=wn(le));var fe=h.getDerivedStateFromProps;le=typeof fe=="function"||typeof A.getSnapshotBeforeUpdate=="function",z=u.pendingProps!==z,le||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z||te!==P)&&g4(u,A,v,P),Ws=!1;var re=u.memoizedState;A.state=re,Kd(u,v,A,_),Wd(),te=u.memoizedState,z||re!==te||Ws?(typeof fe=="function"&&(px(u,h,fe,v),te=u.memoizedState),(q=Ws||p4(u,h,q,v,re,te,P))?(le||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(u.flags|=4194308)):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=te),A.props=v,A.state=te,A.context=P,v=q):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{A=u.stateNode,qy(l,u),P=u.memoizedProps,le=Oc(h,P),A.props=le,fe=u.pendingProps,re=A.context,te=h.contextType,q=Bu,typeof te=="object"&&te!==null&&(q=wn(te)),z=h.getDerivedStateFromProps,(te=typeof z=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(P!==fe||re!==q)&&g4(u,A,v,q),Ws=!1,re=u.memoizedState,A.state=re,Kd(u,v,A,_),Wd();var oe=u.memoizedState;P!==fe||re!==oe||Ws||l!==null&&l.dependencies!==null&&V0(l.dependencies)?(typeof z=="function"&&(px(u,h,z,v),oe=u.memoizedState),(le=Ws||p4(u,h,le,v,re,oe,q)||l!==null&&l.dependencies!==null&&V0(l.dependencies))?(te||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,oe,q),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,oe,q)),typeof A.componentDidUpdate=="function"&&(u.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof A.componentDidUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=oe),A.props=v,A.state=oe,A.context=q,v=le):(typeof A.componentDidUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),v=!1)}return A=v,sg(l,u),v=(u.flags&128)!==0,A||v?(A=u.stateNode,h=v&&typeof h.getDerivedStateFromError!="function"?null:A.render(),u.flags|=1,l!==null&&v?(u.child=Tc(u,l.child,null,_),u.child=Tc(u,null,h,_)):En(l,u,h,_),u.memoizedState=A.state,l=u.child):l=qo(l,u,_),l}function R4(l,u,h,v){return _c(),u.flags|=256,En(l,u,h,v),u.child}var xx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bx(l){return{baseLanes:l,cachePool:xT()}}function _x(l,u,h){return l=l!==null?l.childLanes&~h:0,u&&(l|=Oi),l}function P4(l,u,h){var v=u.pendingProps,_=!1,A=(u.flags&128)!==0,P;if((P=A)||(P=l!==null&&l.memoizedState===null?!1:(Sr.current&2)!==0),P&&(_=!0,u.flags&=-129),P=(u.flags&32)!==0,u.flags&=-33,l===null){if(ft){if(_?Ys(u):Qs(),(l=Qt)?(l=U3(l,ta),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Hs!==null?{id:lo,overflow:co}:null,retryLane:536870912,hydrationErrors:null},h=uT(l),h.return=u,u.child=h,_n=u,Qt=null)):l=null,l===null)throw qs(u);return n2(l)?u.lanes=32:u.lanes=536870912,null}var z=v.children;return v=v.fallback,_?(Qs(),_=u.mode,z=lg({mode:"hidden",children:z},_),v=bc(v,_,h,null),z.return=u,v.return=u,z.sibling=v,u.child=z,v=u.child,v.memoizedState=bx(h),v.childLanes=_x(l,P,h),u.memoizedState=xx,Jd(null,v)):(Ys(u),wx(u,z))}var q=l.memoizedState;if(q!==null&&(z=q.dehydrated,z!==null)){if(A)u.flags&256?(Ys(u),u.flags&=-257,u=Ex(l,u,h)):u.memoizedState!==null?(Qs(),u.child=l.child,u.flags|=128,u=null):(Qs(),z=v.fallback,_=u.mode,v=lg({mode:"visible",children:v.children},_),z=bc(z,_,h,null),z.flags|=2,v.return=u,z.return=u,v.sibling=z,u.child=v,Tc(u,l.child,null,h),v=u.child,v.memoizedState=bx(h),v.childLanes=_x(l,P,h),u.memoizedState=xx,u=Jd(null,v));else if(Ys(u),n2(z)){if(P=z.nextSibling&&z.nextSibling.dataset,P)var te=P.dgst;P=te,v=Error(n(419)),v.stack="",v.digest=P,Fd({value:v,source:null,stack:null}),u=Ex(l,u,h)}else if(Lr||Vu(l,u,h,!1),P=(h&l.childLanes)!==0,Lr||P){if(P=$t,P!==null&&(v=bd(P,h),v!==0&&v!==q.retryLane))throw q.retryLane=v,xc(l,v),fi(P,l,v),mx;r2(z)||mg(),u=Ex(l,u,h)}else r2(z)?(u.flags|=192,u.child=l.child,u=null):(l=q.treeContext,Qt=na(z.nextSibling),_n=u,ft=!0,$s=null,ta=!1,l!==null&&hT(u,l),u=wx(u,v.children),u.flags|=4096);return u}return _?(Qs(),z=v.fallback,_=u.mode,q=l.child,te=q.sibling,v=Uo(q,{mode:"hidden",children:v.children}),v.subtreeFlags=q.subtreeFlags&65011712,te!==null?z=Uo(te,z):(z=bc(z,_,h,null),z.flags|=2),z.return=u,v.return=u,v.sibling=z,u.child=v,Jd(null,v),v=u.child,z=l.child.memoizedState,z===null?z=bx(h):(_=z.cachePool,_!==null?(q=kr._currentValue,_=_.parent!==q?{parent:q,pool:q}:_):_=xT(),z={baseLanes:z.baseLanes|h,cachePool:_}),v.memoizedState=z,v.childLanes=_x(l,P,h),u.memoizedState=xx,Jd(l.child,v)):(Ys(u),h=l.child,l=h.sibling,h=Uo(h,{mode:"visible",children:v.children}),h.return=u,h.sibling=null,l!==null&&(P=u.deletions,P===null?(u.deletions=[l],u.flags|=16):P.push(l)),u.child=h,u.memoizedState=null,h)}function wx(l,u){return u=lg({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function lg(l,u){return l=Si(22,l,null,u),l.lanes=0,l}function Ex(l,u,h){return Tc(u,l.child,null,h),l=wx(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function D4(l,u,h){l.lanes|=u;var v=l.alternate;v!==null&&(v.lanes|=u),By(l.return,u,h)}function Ax(l,u,h,v,_,A){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:h,tailMode:_,treeForkCount:A}:(P.isBackwards=u,P.rendering=null,P.renderingStartTime=0,P.last=v,P.tail=h,P.tailMode=_,P.treeForkCount=A)}function N4(l,u,h){var v=u.pendingProps,_=v.revealOrder,A=v.tail;v=v.children;var P=Sr.current,z=(P&2)!==0;if(z?(P=P&1|2,u.flags|=128):P&=1,be(Sr,P),En(l,u,v,h),v=ft?zd:0,!z&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&D4(l,h,u);else if(l.tag===19)D4(l,h,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(_){case"forwards":for(h=u.child,_=null;h!==null;)l=h.alternate,l!==null&&Y0(l)===null&&(_=h),h=h.sibling;h=_,h===null?(_=u.child,u.child=null):(_=h.sibling,h.sibling=null),Ax(u,!1,_,h,A,v);break;case"backwards":case"unstable_legacy-backwards":for(h=null,_=u.child,u.child=null;_!==null;){if(l=_.alternate,l!==null&&Y0(l)===null){u.child=_;break}l=_.sibling,_.sibling=h,h=_,_=l}Ax(u,!0,h,null,A,v);break;case"together":Ax(u,!1,null,null,void 0,v);break;default:u.memoizedState=null}return u.child}function qo(l,u,h){if(l!==null&&(u.dependencies=l.dependencies),el|=u.lanes,(h&u.childLanes)===0)if(l!==null){if(Vu(l,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,h=Uo(l,l.pendingProps),u.child=h,h.return=u;l.sibling!==null;)l=l.sibling,h=h.sibling=Uo(l,l.pendingProps),h.return=u;h.sibling=null}return u.child}function Sx(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&V0(l)))}function ZB(l,u,h){switch(u.tag){case 3:br(u,u.stateNode.containerInfo),Gs(u,kr,l.memoizedState.cache),_c();break;case 27:case 5:$e(u);break;case 4:br(u,u.stateNode.containerInfo);break;case 10:Gs(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Yy(u),null;break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(Ys(u),u.flags|=128,null):(h&u.child.childLanes)!==0?P4(l,u,h):(Ys(u),l=qo(l,u,h),l!==null?l.sibling:null);Ys(u);break;case 19:var _=(l.flags&128)!==0;if(v=(h&u.childLanes)!==0,v||(Vu(l,u,h,!1),v=(h&u.childLanes)!==0),_){if(v)return N4(l,u,h);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),be(Sr,Sr.current),v)break;return null;case 22:return u.lanes=0,S4(l,u,h,u.pendingProps);case 24:Gs(u,kr,l.memoizedState.cache)}return qo(l,u,h)}function M4(l,u,h){if(l!==null)if(l.memoizedProps!==u.pendingProps)Lr=!0;else{if(!Sx(l,h)&&(u.flags&128)===0)return Lr=!1,ZB(l,u,h);Lr=(l.flags&131072)!==0}else Lr=!1,ft&&(u.flags&1048576)!==0&&dT(u,zd,u.index);switch(u.lanes=0,u.tag){case 16:e:{var v=u.pendingProps;if(l=Sc(u.elementType),u.type=l,typeof l=="function")Ry(l)?(v=Oc(l,v),u.tag=1,u=O4(null,u,l,v,h)):(u.tag=0,u=yx(null,u,l,v,h));else{if(l!=null){var _=l.$$typeof;if(_===D){u.tag=11,u=w4(null,u,l,v,h);break e}else if(_===R){u.tag=14,u=E4(null,u,l,v,h);break e}}throw u=he(l)||l,Error(n(306,u,""))}}return u;case 0:return yx(l,u,u.type,u.pendingProps,h);case 1:return v=u.type,_=Oc(v,u.pendingProps),O4(l,u,v,_,h);case 3:e:{if(br(u,u.stateNode.containerInfo),l===null)throw Error(n(387));v=u.pendingProps;var A=u.memoizedState;_=A.element,qy(l,u),Kd(u,v,null,h);var P=u.memoizedState;if(v=P.cache,Gs(u,kr,v),v!==A.cache&&Uy(u,[kr],h,!0),Wd(),v=P.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:P.cache},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){u=R4(l,u,v,h);break e}else if(v!==_){_=Zi(Error(n(424)),u),Fd(_),u=R4(l,u,v,h);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Qt=na(l.firstChild),_n=u,ft=!0,$s=null,ta=!0,h=ST(u,null,v,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(_c(),v===_){u=qo(l,u,h);break e}En(l,u,v,h)}u=u.child}return u;case 26:return sg(l,u),l===null?(h=q3(u.type,null,u.pendingProps,null))?u.memoizedState=h:ft||(h=u.type,l=u.pendingProps,v=Ag(We.current).createElement(h),v[Dr]=u,v[sn]=l,An(v,h,l),Nr(v),u.stateNode=v):u.memoizedState=q3(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return $e(u),l===null&&ft&&(v=u.stateNode=V3(u.type,u.pendingProps,We.current),_n=u,ta=!0,_=Qt,al(u.type)?(i2=_,Qt=na(v.firstChild)):Qt=_),En(l,u,u.pendingProps.children,h),sg(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&ft&&((_=v=Qt)&&(v=IU(v,u.type,u.pendingProps,ta),v!==null?(u.stateNode=v,_n=u,Qt=na(v.firstChild),ta=!1,_=!0):_=!1),_||qs(u)),$e(u),_=u.type,A=u.pendingProps,P=l!==null?l.memoizedProps:null,v=A.children,Jx(_,A)?v=null:P!==null&&Jx(_,P)&&(u.flags|=32),u.memoizedState!==null&&(_=Zy(l,u,HB,null,null,h),ph._currentValue=_),sg(l,u),En(l,u,v,h),u.child;case 6:return l===null&&ft&&((l=h=Qt)&&(h=OU(h,u.pendingProps,ta),h!==null?(u.stateNode=h,_n=u,Qt=null,l=!0):l=!1),l||qs(u)),null;case 13:return P4(l,u,h);case 4:return br(u,u.stateNode.containerInfo),v=u.pendingProps,l===null?u.child=Tc(u,null,v,h):En(l,u,v,h),u.child;case 11:return w4(l,u,u.type,u.pendingProps,h);case 7:return En(l,u,u.pendingProps,h),u.child;case 8:return En(l,u,u.pendingProps.children,h),u.child;case 12:return En(l,u,u.pendingProps.children,h),u.child;case 10:return v=u.pendingProps,Gs(u,u.type,v.value),En(l,u,v.children,h),u.child;case 9:return _=u.type._context,v=u.pendingProps.children,Ec(u),_=wn(_),v=v(_),u.flags|=1,En(l,u,v,h),u.child;case 14:return E4(l,u,u.type,u.pendingProps,h);case 15:return A4(l,u,u.type,u.pendingProps,h);case 19:return N4(l,u,h);case 31:return QB(l,u,h);case 22:return S4(l,u,h,u.pendingProps);case 24:return Ec(u),v=wn(kr),l===null?(_=Vy(),_===null&&(_=$t,A=zy(),_.pooledCache=A,A.refCount++,A!==null&&(_.pooledCacheLanes|=h),_=A),u.memoizedState={parent:v,cache:_},$y(u),Gs(u,kr,_)):((l.lanes&h)!==0&&(qy(l,u),Kd(u,null,null,h),Wd()),_=l.memoizedState,A=u.memoizedState,_.parent!==v?(_={parent:v,cache:v},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Gs(u,kr,v)):(v=A.cache,Gs(u,kr,v),v!==_.cache&&Uy(u,[kr],h,!0))),En(l,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function Go(l){l.flags|=4}function Cx(l,u,h,v,_){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(_&335544128)===_)if(l.stateNode.complete)l.flags|=8192;else if(s3())l.flags|=8192;else throw Cc=G0,Hy}else l.flags&=-16777217}function k4(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Y3(u))if(s3())l.flags|=8192;else throw Cc=G0,Hy}function cg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?g0():536870912,l.lanes|=u,ef|=u)}function eh(l,u){if(!ft)switch(l.tailMode){case"hidden":u=l.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Zt(l){var u=l.alternate!==null&&l.alternate.child===l.child,h=0,v=0;if(u)for(var _=l.child;_!==null;)h|=_.lanes|_.childLanes,v|=_.subtreeFlags&65011712,v|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)h|=_.lanes|_.childLanes,v|=_.subtreeFlags,v|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=v,l.childLanes=h,u}function JB(l,u,h){var v=u.pendingProps;switch(My(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(u),null;case 1:return Zt(u),null;case 3:return h=u.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),Vo(kr),me(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Fu(u)?Go(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,jy())),Zt(u),null;case 26:var _=u.type,A=u.memoizedState;return l===null?(Go(u),A!==null?(Zt(u),k4(u,A)):(Zt(u),Cx(u,_,null,v,h))):A?A!==l.memoizedState?(Go(u),Zt(u),k4(u,A)):(Zt(u),u.flags&=-16777217):(l=l.memoizedProps,l!==v&&Go(u),Zt(u),Cx(u,_,l,v,h)),null;case 27:if(Qe(u),h=We.current,_=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&Go(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Zt(u),null}l=Ae.current,Fu(u)?pT(u):(l=V3(_,v,h),u.stateNode=l,Go(u))}return Zt(u),null;case 5:if(Qe(u),_=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&Go(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Zt(u),null}if(A=Ae.current,Fu(u))pT(u);else{var P=Ag(We.current);switch(A){case 1:A=P.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:A=P.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":A=P.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":A=P.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":A=P.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof v.is=="string"?P.createElement("select",{is:v.is}):P.createElement("select"),v.multiple?A.multiple=!0:v.size&&(A.size=v.size);break;default:A=typeof v.is=="string"?P.createElement(_,{is:v.is}):P.createElement(_)}}A[Dr]=u,A[sn]=v;e:for(P=u.child;P!==null;){if(P.tag===5||P.tag===6)A.appendChild(P.stateNode);else if(P.tag!==4&&P.tag!==27&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===u)break e;for(;P.sibling===null;){if(P.return===null||P.return===u)break e;P=P.return}P.sibling.return=P.return,P=P.sibling}u.stateNode=A;e:switch(An(A,_,v),_){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&Go(u)}}return Zt(u),Cx(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,h),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==v&&Go(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(n(166));if(l=We.current,Fu(u)){if(l=u.stateNode,h=u.memoizedProps,v=null,_=_n,_!==null)switch(_.tag){case 27:case 5:v=_.memoizedProps}l[Dr]=u,l=!!(l.nodeValue===h||v!==null&&v.suppressHydrationWarning===!0||P3(l.nodeValue,h)),l||qs(u,!0)}else l=Ag(l).createTextNode(v),l[Dr]=u,u.stateNode=l}return Zt(u),null;case 31:if(h=u.memoizedState,l===null||l.memoizedState!==null){if(v=Fu(u),h!==null){if(l===null){if(!v)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Dr]=u}else _c(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Zt(u),l=!1}else h=jy(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=h),l=!0;if(!l)return u.flags&256?(Ti(u),u):(Ti(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Zt(u),null;case 13:if(v=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=Fu(u),v!==null&&v.dehydrated!==null){if(l===null){if(!_)throw Error(n(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Dr]=u}else _c(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Zt(u),_=!1}else _=jy(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(Ti(u),u):(Ti(u),null)}return Ti(u),(u.flags&128)!==0?(u.lanes=h,u):(h=v!==null,l=l!==null&&l.memoizedState!==null,h&&(v=u.child,_=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(_=v.alternate.memoizedState.cachePool.pool),A=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==_&&(v.flags|=2048)),h!==l&&h&&(u.child.flags|=8192),cg(u,u.updateQueue),Zt(u),null);case 4:return me(),l===null&&Kx(u.stateNode.containerInfo),Zt(u),null;case 10:return Vo(u.type),Zt(u),null;case 19:if(Z(Sr),v=u.memoizedState,v===null)return Zt(u),null;if(_=(u.flags&128)!==0,A=v.rendering,A===null)if(_)eh(v,!1);else{if(gr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(A=Y0(l),A!==null){for(u.flags|=128,eh(v,!1),l=A.updateQueue,u.updateQueue=l,cg(u,l),u.subtreeFlags=0,l=h,h=u.child;h!==null;)cT(h,l),h=h.sibling;return be(Sr,Sr.current&1|2),ft&&zo(u,v.treeForkCount),u.child}l=l.sibling}v.tail!==null&&Kn()>pg&&(u.flags|=128,_=!0,eh(v,!1),u.lanes=4194304)}else{if(!_)if(l=Y0(A),l!==null){if(u.flags|=128,_=!0,l=l.updateQueue,u.updateQueue=l,cg(u,l),eh(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!ft)return Zt(u),null}else 2*Kn()-v.renderingStartTime>pg&&h!==536870912&&(u.flags|=128,_=!0,eh(v,!1),u.lanes=4194304);v.isBackwards?(A.sibling=u.child,u.child=A):(l=v.last,l!==null?l.sibling=A:u.child=A,v.last=A)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=Kn(),l.sibling=null,h=Sr.current,be(Sr,_?h&1|2:h&1),ft&&zo(u,v.treeForkCount),l):(Zt(u),null);case 22:case 23:return Ti(u),Xy(),v=u.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(h&536870912)!==0&&(u.flags&128)===0&&(Zt(u),u.subtreeFlags&6&&(u.flags|=8192)):Zt(u),h=u.updateQueue,h!==null&&cg(u,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==h&&(u.flags|=2048),l!==null&&Z(Ac),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Vo(kr),Zt(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function eU(l,u){switch(My(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Vo(kr),me(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Qe(u),null;case 31:if(u.memoizedState!==null){if(Ti(u),u.alternate===null)throw Error(n(340));_c()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(Ti(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));_c()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Z(Sr),null;case 4:return me(),null;case 10:return Vo(u.type),null;case 22:case 23:return Ti(u),Xy(),l!==null&&Z(Ac),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Vo(kr),null;case 25:return null;default:return null}}function j4(l,u){switch(My(u),u.tag){case 3:Vo(kr),me();break;case 26:case 27:case 5:Qe(u);break;case 4:me();break;case 31:u.memoizedState!==null&&Ti(u);break;case 13:Ti(u);break;case 19:Z(Sr);break;case 10:Vo(u.type);break;case 22:case 23:Ti(u),Xy(),l!==null&&Z(Ac);break;case 24:Vo(kr)}}function th(l,u){try{var h=u.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var _=v.next;h=_;do{if((h.tag&l)===l){v=void 0;var A=h.create,P=h.inst;v=A(),P.destroy=v}h=h.next}while(h!==_)}}catch(z){Nt(u,u.return,z)}}function Zs(l,u,h){try{var v=u.updateQueue,_=v!==null?v.lastEffect:null;if(_!==null){var A=_.next;v=A;do{if((v.tag&l)===l){var P=v.inst,z=P.destroy;if(z!==void 0){P.destroy=void 0,_=u;var q=h,te=z;try{te()}catch(le){Nt(_,q,le)}}}v=v.next}while(v!==A)}}catch(le){Nt(u,u.return,le)}}function L4(l){var u=l.updateQueue;if(u!==null){var h=l.stateNode;try{TT(u,h)}catch(v){Nt(l,l.return,v)}}}function B4(l,u,h){h.props=Oc(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(v){Nt(l,u,v)}}function rh(l,u){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof h=="function"?l.refCleanup=h(v):h.current=v}}catch(_){Nt(l,u,_)}}function uo(l,u){var h=l.ref,v=l.refCleanup;if(h!==null)if(typeof v=="function")try{v()}catch(_){Nt(l,u,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(_){Nt(l,u,_)}else h.current=null}function U4(l){var u=l.type,h=l.memoizedProps,v=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&v.focus();break e;case"img":h.src?v.src=h.src:h.srcSet&&(v.srcset=h.srcSet)}}catch(_){Nt(l,l.return,_)}}function Tx(l,u,h){try{var v=l.stateNode;wU(v,l.type,h,u),v[sn]=u}catch(_){Nt(l,l.return,_)}}function z4(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&al(l.type)||l.tag===4}function Ix(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||z4(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&al(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ox(l,u,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(l),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=Sa));else if(v!==4&&(v===27&&al(l.type)&&(h=l.stateNode,u=null),l=l.child,l!==null))for(Ox(l,u,h),l=l.sibling;l!==null;)Ox(l,u,h),l=l.sibling}function ug(l,u,h){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?h.insertBefore(l,u):h.appendChild(l);else if(v!==4&&(v===27&&al(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(ug(l,u,h),l=l.sibling;l!==null;)ug(l,u,h),l=l.sibling}function F4(l){var u=l.stateNode,h=l.memoizedProps;try{for(var v=l.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);An(u,v,h),u[Dr]=l,u[sn]=h}catch(A){Nt(l,l.return,A)}}var Wo=!1,Br=!1,Rx=!1,V4=typeof WeakSet=="function"?WeakSet:Set,cn=null;function tU(l,u){if(l=l.containerInfo,Qx=Pg,l=eT(l),Ey(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var v=h.getSelection&&h.getSelection();if(v&&v.rangeCount!==0){h=v.anchorNode;var _=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var P=0,z=-1,q=-1,te=0,le=0,fe=l,re=null;t:for(;;){for(var oe;fe!==h||_!==0&&fe.nodeType!==3||(z=P+_),fe!==A||v!==0&&fe.nodeType!==3||(q=P+v),fe.nodeType===3&&(P+=fe.nodeValue.length),(oe=fe.firstChild)!==null;)re=fe,fe=oe;for(;;){if(fe===l)break t;if(re===h&&++te===_&&(z=P),re===A&&++le===v&&(q=P),(oe=fe.nextSibling)!==null)break;fe=re,re=fe.parentNode}fe=oe}h=z===-1||q===-1?null:{start:z,end:q}}else h=null}h=h||{start:0,end:0}}else h=null;for(Zx={focusedElem:l,selectionRange:h},Pg=!1,cn=u;cn!==null;)if(u=cn,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,cn=l;else for(;cn!==null;){switch(u=cn,A=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(h=0;h<l.length;h++)_=l[h],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&A!==null){l=void 0,h=u,_=A.memoizedProps,A=A.memoizedState,v=h.stateNode;try{var Te=Oc(h.type,_);l=v.getSnapshotBeforeUpdate(Te,A),v.__reactInternalSnapshotBeforeUpdate=l}catch(Be){Nt(h,h.return,Be)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,h=l.nodeType,h===9)t2(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":t2(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,cn=l;break}cn=u.return}}function H4(l,u,h){var v=h.flags;switch(h.tag){case 0:case 11:case 15:Xo(l,h),v&4&&th(5,h);break;case 1:if(Xo(l,h),v&4)if(l=h.stateNode,u===null)try{l.componentDidMount()}catch(P){Nt(h,h.return,P)}else{var _=Oc(h.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(_,u,l.__reactInternalSnapshotBeforeUpdate)}catch(P){Nt(h,h.return,P)}}v&64&&L4(h),v&512&&rh(h,h.return);break;case 3:if(Xo(l,h),v&64&&(l=h.updateQueue,l!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{TT(l,u)}catch(P){Nt(h,h.return,P)}}break;case 27:u===null&&v&4&&F4(h);case 26:case 5:Xo(l,h),u===null&&v&4&&U4(h),v&512&&rh(h,h.return);break;case 12:Xo(l,h);break;case 31:Xo(l,h),v&4&&G4(l,h);break;case 13:Xo(l,h),v&4&&W4(l,h),v&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=uU.bind(null,h),RU(l,h))));break;case 22:if(v=h.memoizedState!==null||Wo,!v){u=u!==null&&u.memoizedState!==null||Br,_=Wo;var A=Br;Wo=v,(Br=u)&&!A?Yo(l,h,(h.subtreeFlags&8772)!==0):Xo(l,h),Wo=_,Br=A}break;case 30:break;default:Xo(l,h)}}function $4(l){var u=l.alternate;u!==null&&(l.alternate=null,$4(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Au(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ar=null,si=!1;function Ko(l,u,h){for(h=h.child;h!==null;)q4(l,u,h),h=h.sibling}function q4(l,u,h){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(_a,h)}catch{}switch(h.tag){case 26:Br||uo(h,u),Ko(l,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Br||uo(h,u);var v=ar,_=si;al(h.type)&&(ar=h.stateNode,si=!1),Ko(l,u,h),fh(h.stateNode),ar=v,si=_;break;case 5:Br||uo(h,u);case 6:if(v=ar,_=si,ar=null,Ko(l,u,h),ar=v,si=_,ar!==null)if(si)try{(ar.nodeType===9?ar.body:ar.nodeName==="HTML"?ar.ownerDocument.body:ar).removeChild(h.stateNode)}catch(A){Nt(h,u,A)}else try{ar.removeChild(h.stateNode)}catch(A){Nt(h,u,A)}break;case 18:ar!==null&&(si?(l=ar,L3(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),cf(l)):L3(ar,h.stateNode));break;case 4:v=ar,_=si,ar=h.stateNode.containerInfo,si=!0,Ko(l,u,h),ar=v,si=_;break;case 0:case 11:case 14:case 15:Zs(2,h,u),Br||Zs(4,h,u),Ko(l,u,h);break;case 1:Br||(uo(h,u),v=h.stateNode,typeof v.componentWillUnmount=="function"&&B4(h,u,v)),Ko(l,u,h);break;case 21:Ko(l,u,h);break;case 22:Br=(v=Br)||h.memoizedState!==null,Ko(l,u,h),Br=v;break;default:Ko(l,u,h)}}function G4(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{cf(l)}catch(h){Nt(u,u.return,h)}}}function W4(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{cf(l)}catch(h){Nt(u,u.return,h)}}function rU(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new V4),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new V4),u;default:throw Error(n(435,l.tag))}}function fg(l,u){var h=rU(l);u.forEach(function(v){if(!h.has(v)){h.add(v);var _=fU.bind(null,l,v);v.then(_,_)}})}function li(l,u){var h=u.deletions;if(h!==null)for(var v=0;v<h.length;v++){var _=h[v],A=l,P=u,z=P;e:for(;z!==null;){switch(z.tag){case 27:if(al(z.type)){ar=z.stateNode,si=!1;break e}break;case 5:ar=z.stateNode,si=!1;break e;case 3:case 4:ar=z.stateNode.containerInfo,si=!0;break e}z=z.return}if(ar===null)throw Error(n(160));q4(A,P,_),ar=null,si=!1,A=_.alternate,A!==null&&(A.return=null),_.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)K4(u,l),u=u.sibling}var Pa=null;function K4(l,u){var h=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:li(u,l),ci(l),v&4&&(Zs(3,l,l.return),th(3,l),Zs(5,l,l.return));break;case 1:li(u,l),ci(l),v&512&&(Br||h===null||uo(h,h.return)),v&64&&Wo&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?v:h.concat(v))));break;case 26:var _=Pa;if(li(u,l),ci(l),v&512&&(Br||h===null||uo(h,h.return)),v&4){var A=h!==null?h.memoizedState:null;if(v=l.memoizedState,h===null)if(v===null)if(l.stateNode===null){e:{v=l.type,h=l.memoizedProps,_=_.ownerDocument||_;t:switch(v){case"title":A=_.getElementsByTagName("title")[0],(!A||A[Ya]||A[Dr]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=_.createElement(v),_.head.insertBefore(A,_.querySelector("head > title"))),An(A,v,h),A[Dr]=l,Nr(A),v=A;break e;case"link":var P=K3("link","href",_).get(v+(h.href||""));if(P){for(var z=0;z<P.length;z++)if(A=P[z],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){P.splice(z,1);break t}}A=_.createElement(v),An(A,v,h),_.head.appendChild(A);break;case"meta":if(P=K3("meta","content",_).get(v+(h.content||""))){for(z=0;z<P.length;z++)if(A=P[z],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){P.splice(z,1);break t}}A=_.createElement(v),An(A,v,h),_.head.appendChild(A);break;default:throw Error(n(468,v))}A[Dr]=l,Nr(A),v=A}l.stateNode=v}else X3(_,l.type,l.stateNode);else l.stateNode=W3(_,v,l.memoizedProps);else A!==v?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,v===null?X3(_,l.type,l.stateNode):W3(_,v,l.memoizedProps)):v===null&&l.stateNode!==null&&Tx(l,l.memoizedProps,h.memoizedProps)}break;case 27:li(u,l),ci(l),v&512&&(Br||h===null||uo(h,h.return)),h!==null&&v&4&&Tx(l,l.memoizedProps,h.memoizedProps);break;case 5:if(li(u,l),ci(l),v&512&&(Br||h===null||uo(h,h.return)),l.flags&32){_=l.stateNode;try{oi(_,"")}catch(Te){Nt(l,l.return,Te)}}v&4&&l.stateNode!=null&&(_=l.memoizedProps,Tx(l,_,h!==null?h.memoizedProps:_)),v&1024&&(Rx=!0);break;case 6:if(li(u,l),ci(l),v&4){if(l.stateNode===null)throw Error(n(162));v=l.memoizedProps,h=l.stateNode;try{h.nodeValue=v}catch(Te){Nt(l,l.return,Te)}}break;case 3:if(Tg=null,_=Pa,Pa=Sg(u.containerInfo),li(u,l),Pa=_,ci(l),v&4&&h!==null&&h.memoizedState.isDehydrated)try{cf(u.containerInfo)}catch(Te){Nt(l,l.return,Te)}Rx&&(Rx=!1,X4(l));break;case 4:v=Pa,Pa=Sg(l.stateNode.containerInfo),li(u,l),ci(l),Pa=v;break;case 12:li(u,l),ci(l);break;case 31:li(u,l),ci(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,fg(l,v)));break;case 13:li(u,l),ci(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(hg=Kn()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,fg(l,v)));break;case 22:_=l.memoizedState!==null;var q=h!==null&&h.memoizedState!==null,te=Wo,le=Br;if(Wo=te||_,Br=le||q,li(u,l),Br=le,Wo=te,ci(l),v&8192)e:for(u=l.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(h===null||q||Wo||Br||Rc(l)),h=null,u=l;;){if(u.tag===5||u.tag===26){if(h===null){q=h=u;try{if(A=q.stateNode,_)P=A.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{z=q.stateNode;var fe=q.memoizedProps.style,re=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;z.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Te){Nt(q,q.return,Te)}}}else if(u.tag===6){if(h===null){q=u;try{q.stateNode.nodeValue=_?"":q.memoizedProps}catch(Te){Nt(q,q.return,Te)}}}else if(u.tag===18){if(h===null){q=u;try{var oe=q.stateNode;_?B3(oe,!0):B3(q.stateNode,!1)}catch(Te){Nt(q,q.return,Te)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=l.updateQueue,v!==null&&(h=v.retryQueue,h!==null&&(v.retryQueue=null,fg(l,h))));break;case 19:li(u,l),ci(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,fg(l,v)));break;case 30:break;case 21:break;default:li(u,l),ci(l)}}function ci(l){var u=l.flags;if(u&2){try{for(var h,v=l.return;v!==null;){if(z4(v)){h=v;break}v=v.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var _=h.stateNode,A=Ix(l);ug(l,A,_);break;case 5:var P=h.stateNode;h.flags&32&&(oi(P,""),h.flags&=-33);var z=Ix(l);ug(l,z,P);break;case 3:case 4:var q=h.stateNode.containerInfo,te=Ix(l);Ox(l,te,q);break;default:throw Error(n(161))}}catch(le){Nt(l,l.return,le)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function X4(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;X4(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Xo(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)H4(l,u.alternate,u),u=u.sibling}function Rc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Zs(4,u,u.return),Rc(u);break;case 1:uo(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&B4(u,u.return,h),Rc(u);break;case 27:fh(u.stateNode);case 26:case 5:uo(u,u.return),Rc(u);break;case 22:u.memoizedState===null&&Rc(u);break;case 30:Rc(u);break;default:Rc(u)}l=l.sibling}}function Yo(l,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,_=l,A=u,P=A.flags;switch(A.tag){case 0:case 11:case 15:Yo(_,A,h),th(4,A);break;case 1:if(Yo(_,A,h),v=A,_=v.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(te){Nt(v,v.return,te)}if(v=A,_=v.updateQueue,_!==null){var z=v.stateNode;try{var q=_.shared.hiddenCallbacks;if(q!==null)for(_.shared.hiddenCallbacks=null,_=0;_<q.length;_++)CT(q[_],z)}catch(te){Nt(v,v.return,te)}}h&&P&64&&L4(A),rh(A,A.return);break;case 27:F4(A);case 26:case 5:Yo(_,A,h),h&&v===null&&P&4&&U4(A),rh(A,A.return);break;case 12:Yo(_,A,h);break;case 31:Yo(_,A,h),h&&P&4&&G4(_,A);break;case 13:Yo(_,A,h),h&&P&4&&W4(_,A);break;case 22:A.memoizedState===null&&Yo(_,A,h),rh(A,A.return);break;case 30:break;default:Yo(_,A,h)}u=u.sibling}}function Px(l,u){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&Vd(h))}function Dx(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Vd(l))}function Da(l,u,h,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Y4(l,u,h,v),u=u.sibling}function Y4(l,u,h,v){var _=u.flags;switch(u.tag){case 0:case 11:case 15:Da(l,u,h,v),_&2048&&th(9,u);break;case 1:Da(l,u,h,v);break;case 3:Da(l,u,h,v),_&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Vd(l)));break;case 12:if(_&2048){Da(l,u,h,v),l=u.stateNode;try{var A=u.memoizedProps,P=A.id,z=A.onPostCommit;typeof z=="function"&&z(P,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(q){Nt(u,u.return,q)}}else Da(l,u,h,v);break;case 31:Da(l,u,h,v);break;case 13:Da(l,u,h,v);break;case 23:break;case 22:A=u.stateNode,P=u.alternate,u.memoizedState!==null?A._visibility&2?Da(l,u,h,v):nh(l,u):A._visibility&2?Da(l,u,h,v):(A._visibility|=2,Qu(l,u,h,v,(u.subtreeFlags&10256)!==0||!1)),_&2048&&Px(P,u);break;case 24:Da(l,u,h,v),_&2048&&Dx(u.alternate,u);break;default:Da(l,u,h,v)}}function Qu(l,u,h,v,_){for(_=_&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var A=l,P=u,z=h,q=v,te=P.flags;switch(P.tag){case 0:case 11:case 15:Qu(A,P,z,q,_),th(8,P);break;case 23:break;case 22:var le=P.stateNode;P.memoizedState!==null?le._visibility&2?Qu(A,P,z,q,_):nh(A,P):(le._visibility|=2,Qu(A,P,z,q,_)),_&&te&2048&&Px(P.alternate,P);break;case 24:Qu(A,P,z,q,_),_&&te&2048&&Dx(P.alternate,P);break;default:Qu(A,P,z,q,_)}u=u.sibling}}function nh(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=l,v=u,_=v.flags;switch(v.tag){case 22:nh(h,v),_&2048&&Px(v.alternate,v);break;case 24:nh(h,v),_&2048&&Dx(v.alternate,v);break;default:nh(h,v)}u=u.sibling}}var ih=8192;function Zu(l,u,h){if(l.subtreeFlags&ih)for(l=l.child;l!==null;)Q4(l,u,h),l=l.sibling}function Q4(l,u,h){switch(l.tag){case 26:Zu(l,u,h),l.flags&ih&&l.memoizedState!==null&&VU(h,Pa,l.memoizedState,l.memoizedProps);break;case 5:Zu(l,u,h);break;case 3:case 4:var v=Pa;Pa=Sg(l.stateNode.containerInfo),Zu(l,u,h),Pa=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=ih,ih=16777216,Zu(l,u,h),ih=v):Zu(l,u,h));break;default:Zu(l,u,h)}}function Z4(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function ah(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];cn=v,e3(v,l)}Z4(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)J4(l),l=l.sibling}function J4(l){switch(l.tag){case 0:case 11:case 15:ah(l),l.flags&2048&&Zs(9,l,l.return);break;case 3:ah(l);break;case 12:ah(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,dg(l)):ah(l);break;default:ah(l)}}function dg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var v=u[h];cn=v,e3(v,l)}Z4(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Zs(8,u,u.return),dg(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,dg(u));break;default:dg(u)}l=l.sibling}}function e3(l,u){for(;cn!==null;){var h=cn;switch(h.tag){case 0:case 11:case 15:Zs(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var v=h.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Vd(h.memoizedState.cache)}if(v=h.child,v!==null)v.return=h,cn=v;else e:for(h=l;cn!==null;){v=cn;var _=v.sibling,A=v.return;if($4(v),v===h){cn=null;break e}if(_!==null){_.return=A,cn=_;break e}cn=A}}}var nU={getCacheForType:function(l){var u=wn(kr),h=u.data.get(l);return h===void 0&&(h=l(),u.data.set(l,h)),h},cacheSignal:function(){return wn(kr).controller.signal}},iU=typeof WeakMap=="function"?WeakMap:Map,Et=0,$t=null,rt=null,ot=0,Dt=0,Ii=null,Js=!1,Ju=!1,Nx=!1,Qo=0,gr=0,el=0,Pc=0,Mx=0,Oi=0,ef=0,oh=null,ui=null,kx=!1,hg=0,t3=0,pg=1/0,gg=null,tl=null,Kr=0,rl=null,tf=null,Zo=0,jx=0,Lx=null,r3=null,sh=0,Bx=null;function Ri(){return(Et&2)!==0&&ot!==0?ot&-ot:Y.T!==null?$x():v0()}function n3(){if(Oi===0)if((ot&536870912)===0||ft){var l=ic;ic<<=1,(ic&3932160)===0&&(ic=262144),Oi=l}else Oi=536870912;return l=Ci.current,l!==null&&(l.flags|=32),Oi}function fi(l,u,h){(l===$t&&(Dt===2||Dt===9)||l.cancelPendingCommit!==null)&&(rf(l,0),nl(l,ot,Oi,!1)),ac(l,h),((Et&2)===0||l!==$t)&&(l===$t&&((Et&2)===0&&(Pc|=h),gr===4&&nl(l,ot,Oi,!1)),fo(l))}function i3(l,u,h){if((Et&6)!==0)throw Error(n(327));var v=!h&&(u&127)===0&&(u&l.expiredLanes)===0||wa(l,u),_=v?sU(l,u):zx(l,u,!0),A=v;do{if(_===0){Ju&&!v&&nl(l,u,0,!1);break}else{if(h=l.current.alternate,A&&!aU(h)){_=zx(l,u,!1),A=!1;continue}if(_===2){if(A=u,l.errorRecoveryDisabledLanes&A)var P=0;else P=l.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){u=P;e:{var z=l;_=oh;var q=z.current.memoizedState.isDehydrated;if(q&&(rf(z,P).flags|=256),P=zx(z,P,!1),P!==2){if(Nx&&!q){z.errorRecoveryDisabledLanes|=A,Pc|=A,_=4;break e}A=ui,ui=_,A!==null&&(ui===null?ui=A:ui.push.apply(ui,A))}_=P}if(A=!1,_!==2)continue}}if(_===1){rf(l,0),nl(l,u,0,!0);break}e:{switch(v=l,A=_,A){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:nl(v,u,Oi,!Js);break e;case 2:ui=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(_=hg+300-Kn(),10<_)){if(nl(v,u,Oi,!Js),Wa(v,0,!0)!==0)break e;Zo=u,v.timeoutHandle=k3(a3.bind(null,v,h,ui,gg,kx,u,Oi,Pc,ef,Js,A,"Throttled",-0,0),_);break e}a3(v,h,ui,gg,kx,u,Oi,Pc,ef,Js,A,null,-0,0)}}break}while(!0);fo(l)}function a3(l,u,h,v,_,A,P,z,q,te,le,fe,re,oe){if(l.timeoutHandle=-1,fe=u.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sa},Q4(u,A,fe);var Te=(A&62914560)===A?hg-Kn():(A&4194048)===A?t3-Kn():0;if(Te=HU(fe,Te),Te!==null){Zo=A,l.cancelPendingCommit=Te(h3.bind(null,l,u,A,h,v,_,P,z,q,le,fe,null,re,oe)),nl(l,A,P,!te);return}}h3(l,u,A,h,v,_,P,z,q)}function aU(l){for(var u=l;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var v=0;v<h.length;v++){var _=h[v],A=_.getSnapshot;_=_.value;try{if(!Ai(A(),_))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function nl(l,u,h,v){u&=~Mx,u&=~Pc,l.suspendedLanes|=u,l.pingedLanes&=~u,v&&(l.warmLanes|=u),v=l.expirationTimes;for(var _=u;0<_;){var A=31-Er(_),P=1<<A;v[A]=-1,_&=~P}h!==0&&oc(l,h,u)}function vg(){return(Et&6)===0?(lh(0),!1):!0}function Ux(){if(rt!==null){if(Dt===0)var l=rt.return;else l=rt,Fo=wc=null,tx(l),Gu=null,$d=0,l=rt;for(;l!==null;)j4(l.alternate,l),l=l.return;rt=null}}function rf(l,u){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,SU(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),Zo=0,Ux(),$t=l,rt=h=Uo(l.current,null),ot=u,Dt=0,Ii=null,Js=!1,Ju=wa(l,u),Nx=!1,ef=Oi=Mx=Pc=el=gr=0,ui=oh=null,kx=!1,(u&8)!==0&&(u|=u&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=u;0<v;){var _=31-Er(v),A=1<<_;u|=l[_],v&=~A}return Qo=u,L0(),h}function o3(l,u){Xe=null,Y.H=Zd,u===qu||u===q0?(u=wT(),Dt=3):u===Hy?(u=wT(),Dt=4):Dt=u===mx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ii=u,rt===null&&(gr=1,ag(l,Zi(u,l.current)))}function s3(){var l=Ci.current;return l===null?!0:(ot&4194048)===ot?ra===null:(ot&62914560)===ot||(ot&536870912)!==0?l===ra:!1}function l3(){var l=Y.H;return Y.H=Zd,l===null?Zd:l}function c3(){var l=Y.A;return Y.A=nU,l}function mg(){gr=4,Js||(ot&4194048)!==ot&&Ci.current!==null||(Ju=!0),(el&134217727)===0&&(Pc&134217727)===0||$t===null||nl($t,ot,Oi,!1)}function zx(l,u,h){var v=Et;Et|=2;var _=l3(),A=c3();($t!==l||ot!==u)&&(gg=null,rf(l,u)),u=!1;var P=gr;e:do try{if(Dt!==0&&rt!==null){var z=rt,q=Ii;switch(Dt){case 8:Ux(),P=6;break e;case 3:case 2:case 9:case 6:Ci.current===null&&(u=!0);var te=Dt;if(Dt=0,Ii=null,nf(l,z,q,te),h&&Ju){P=0;break e}break;default:te=Dt,Dt=0,Ii=null,nf(l,z,q,te)}}oU(),P=gr;break}catch(le){o3(l,le)}while(!0);return u&&l.shellSuspendCounter++,Fo=wc=null,Et=v,Y.H=_,Y.A=A,rt===null&&($t=null,ot=0,L0()),P}function oU(){for(;rt!==null;)u3(rt)}function sU(l,u){var h=Et;Et|=2;var v=l3(),_=c3();$t!==l||ot!==u?(gg=null,pg=Kn()+500,rf(l,u)):Ju=wa(l,u);e:do try{if(Dt!==0&&rt!==null){u=rt;var A=Ii;t:switch(Dt){case 1:Dt=0,Ii=null,nf(l,u,A,1);break;case 2:case 9:if(bT(A)){Dt=0,Ii=null,f3(u);break}u=function(){Dt!==2&&Dt!==9||$t!==l||(Dt=7),fo(l)},A.then(u,u);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:bT(A)?(Dt=0,Ii=null,f3(u)):(Dt=0,Ii=null,nf(l,u,A,7));break;case 5:var P=null;switch(rt.tag){case 26:P=rt.memoizedState;case 5:case 27:var z=rt;if(P?Y3(P):z.stateNode.complete){Dt=0,Ii=null;var q=z.sibling;if(q!==null)rt=q;else{var te=z.return;te!==null?(rt=te,yg(te)):rt=null}break t}}Dt=0,Ii=null,nf(l,u,A,5);break;case 6:Dt=0,Ii=null,nf(l,u,A,6);break;case 8:Ux(),gr=6;break e;default:throw Error(n(462))}}lU();break}catch(le){o3(l,le)}while(!0);return Fo=wc=null,Y.H=v,Y.A=_,Et=h,rt!==null?0:($t=null,ot=0,L0(),gr)}function lU(){for(;rt!==null&&!vy();)u3(rt)}function u3(l){var u=M4(l.alternate,l,Qo);l.memoizedProps=l.pendingProps,u===null?yg(l):rt=u}function f3(l){var u=l,h=u.alternate;switch(u.tag){case 15:case 0:u=I4(h,u,u.pendingProps,u.type,void 0,ot);break;case 11:u=I4(h,u,u.pendingProps,u.type.render,u.ref,ot);break;case 5:tx(u);default:j4(h,u),u=rt=cT(u,Qo),u=M4(h,u,Qo)}l.memoizedProps=l.pendingProps,u===null?yg(l):rt=u}function nf(l,u,h,v){Fo=wc=null,tx(u),Gu=null,$d=0;var _=u.return;try{if(YB(l,_,u,h,ot)){gr=1,ag(l,Zi(h,l.current)),rt=null;return}}catch(A){if(_!==null)throw rt=_,A;gr=1,ag(l,Zi(h,l.current)),rt=null;return}u.flags&32768?(ft||v===1?l=!0:Ju||(ot&536870912)!==0?l=!1:(Js=l=!0,(v===2||v===9||v===3||v===6)&&(v=Ci.current,v!==null&&v.tag===13&&(v.flags|=16384))),d3(u,l)):yg(u)}function yg(l){var u=l;do{if((u.flags&32768)!==0){d3(u,Js);return}l=u.return;var h=JB(u.alternate,u,Qo);if(h!==null){rt=h;return}if(u=u.sibling,u!==null){rt=u;return}rt=u=l}while(u!==null);gr===0&&(gr=5)}function d3(l,u){do{var h=eU(l.alternate,l);if(h!==null){h.flags&=32767,rt=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(l=l.sibling,l!==null)){rt=l;return}rt=l=h}while(l!==null);gr=6,rt=null}function h3(l,u,h,v,_,A,P,z,q){l.cancelPendingCommit=null;do xg();while(Kr!==0);if((Et&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(A=u.lanes|u.childLanes,A|=Iy,xy(l,h,A,P,z,q),l===$t&&(rt=$t=null,ot=0),tf=u,rl=l,Zo=h,jx=A,Lx=_,r3=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,dU(Ns,function(){return y3(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=Y.T,Y.T=null,_=ie.p,ie.p=2,P=Et,Et|=4;try{tU(l,u,h)}finally{Et=P,ie.p=_,Y.T=v}}Kr=1,p3(),g3(),v3()}}function p3(){if(Kr===1){Kr=0;var l=rl,u=tf,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null;var v=ie.p;ie.p=2;var _=Et;Et|=4;try{K4(u,l);var A=Zx,P=eT(l.containerInfo),z=A.focusedElem,q=A.selectionRange;if(P!==z&&z&&z.ownerDocument&&JC(z.ownerDocument.documentElement,z)){if(q!==null&&Ey(z)){var te=q.start,le=q.end;if(le===void 0&&(le=te),"selectionStart"in z)z.selectionStart=te,z.selectionEnd=Math.min(le,z.value.length);else{var fe=z.ownerDocument||document,re=fe&&fe.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Te=z.textContent.length,Be=Math.min(q.start,Te),Ft=q.end===void 0?Be:Math.min(q.end,Te);!oe.extend&&Be>Ft&&(P=Ft,Ft=Be,Be=P);var X=ZC(z,Be),W=ZC(z,Ft);if(X&&W&&(oe.rangeCount!==1||oe.anchorNode!==X.node||oe.anchorOffset!==X.offset||oe.focusNode!==W.node||oe.focusOffset!==W.offset)){var ee=fe.createRange();ee.setStart(X.node,X.offset),oe.removeAllRanges(),Be>Ft?(oe.addRange(ee),oe.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),oe.addRange(ee))}}}}for(fe=[],oe=z;oe=oe.parentNode;)oe.nodeType===1&&fe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<fe.length;z++){var ce=fe[z];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Pg=!!Qx,Zx=Qx=null}finally{Et=_,ie.p=v,Y.T=h}}l.current=u,Kr=2}}function g3(){if(Kr===2){Kr=0;var l=rl,u=tf,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=Y.T,Y.T=null;var v=ie.p;ie.p=2;var _=Et;Et|=4;try{H4(l,u.alternate,u)}finally{Et=_,ie.p=v,Y.T=h}}Kr=3}}function v3(){if(Kr===4||Kr===3){Kr=0,c0();var l=rl,u=tf,h=Zo,v=r3;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Kr=5:(Kr=0,tf=rl=null,m3(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(tl=null),ko(h),u=u.stateNode,xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(_a,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=Y.T,_=ie.p,ie.p=2,Y.T=null;try{for(var A=l.onRecoverableError,P=0;P<v.length;P++){var z=v[P];A(z.value,{componentStack:z.stack})}}finally{Y.T=u,ie.p=_}}(Zo&3)!==0&&xg(),fo(l),_=l.pendingLanes,(h&261930)!==0&&(_&42)!==0?l===Bx?sh++:(sh=0,Bx=l):sh=0,lh(0)}}function m3(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Vd(u)))}function xg(){return p3(),g3(),v3(),y3()}function y3(){if(Kr!==5)return!1;var l=rl,u=jx;jx=0;var h=ko(Zo),v=Y.T,_=ie.p;try{ie.p=32>h?32:h,Y.T=null,h=Lx,Lx=null;var A=rl,P=Zo;if(Kr=0,tf=rl=null,Zo=0,(Et&6)!==0)throw Error(n(331));var z=Et;if(Et|=4,J4(A.current),Y4(A,A.current,P,h),Et=z,lh(0,!1),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(_a,A)}catch{}return!0}finally{ie.p=_,Y.T=v,m3(l,u)}}function x3(l,u,h){u=Zi(h,u),u=vx(l.stateNode,u,2),l=Xs(l,u,2),l!==null&&(ac(l,2),fo(l))}function Nt(l,u,h){if(l.tag===3)x3(l,l,h);else for(;u!==null;){if(u.tag===3){x3(u,l,h);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(tl===null||!tl.has(v))){l=Zi(h,l),h=b4(2),v=Xs(u,h,2),v!==null&&(_4(h,v,u,l),ac(v,2),fo(v));break}}u=u.return}}function Fx(l,u,h){var v=l.pingCache;if(v===null){v=l.pingCache=new iU;var _=new Set;v.set(u,_)}else _=v.get(u),_===void 0&&(_=new Set,v.set(u,_));_.has(h)||(Nx=!0,_.add(h),l=cU.bind(null,l,u,h),u.then(l,l))}function cU(l,u,h){var v=l.pingCache;v!==null&&v.delete(u),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,$t===l&&(ot&h)===h&&(gr===4||gr===3&&(ot&62914560)===ot&&300>Kn()-hg?(Et&2)===0&&rf(l,0):Mx|=h,ef===ot&&(ef=0)),fo(l)}function b3(l,u){u===0&&(u=g0()),l=xc(l,u),l!==null&&(ac(l,u),fo(l))}function uU(l){var u=l.memoizedState,h=0;u!==null&&(h=u.retryLane),b3(l,h)}function fU(l,u){var h=0;switch(l.tag){case 31:case 13:var v=l.stateNode,_=l.memoizedState;_!==null&&(h=_.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(u),b3(l,h)}function dU(l,u){return Wr(l,u)}var bg=null,af=null,Vx=!1,_g=!1,Hx=!1,il=0;function fo(l){l!==af&&l.next===null&&(af===null?bg=af=l:af=af.next=l),_g=!0,Vx||(Vx=!0,pU())}function lh(l,u){if(!Hx&&_g){Hx=!0;do for(var h=!1,v=bg;v!==null;){if(l!==0){var _=v.pendingLanes;if(_===0)var A=0;else{var P=v.suspendedLanes,z=v.pingedLanes;A=(1<<31-Er(42|l)+1)-1,A&=_&~(P&~z),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,A3(v,A))}else A=ot,A=Wa(v,v===$t?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||wa(v,A)||(h=!0,A3(v,A));v=v.next}while(h);Hx=!1}}function hU(){_3()}function _3(){_g=Vx=!1;var l=0;il!==0&&AU()&&(l=il);for(var u=Kn(),h=null,v=bg;v!==null;){var _=v.next,A=w3(v,u);A===0?(v.next=null,h===null?bg=_:h.next=_,_===null&&(af=h)):(h=v,(l!==0||(A&3)!==0)&&(_g=!0)),v=_}Kr!==0&&Kr!==5||lh(l),il!==0&&(il=0)}function w3(l,u){for(var h=l.suspendedLanes,v=l.pingedLanes,_=l.expirationTimes,A=l.pendingLanes&-62914561;0<A;){var P=31-Er(A),z=1<<P,q=_[P];q===-1?((z&h)===0||(z&v)!==0)&&(_[P]=yy(z,u)):q<=u&&(l.expiredLanes|=z),A&=~z}if(u=$t,h=ot,h=Wa(l,l===u?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,h===0||l===u&&(Dt===2||Dt===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&Ds(v),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||wa(l,h)){if(u=h&-h,u===l.callbackPriority)return u;switch(v!==null&&Ds(v),ko(h)){case 2:case 8:h=yd;break;case 32:h=Ns;break;case 268435456:h=u0;break;default:h=Ns}return v=E3.bind(null,l),h=Wr(h,v),l.callbackPriority=u,l.callbackNode=h,u}return v!==null&&v!==null&&Ds(v),l.callbackPriority=2,l.callbackNode=null,2}function E3(l,u){if(Kr!==0&&Kr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(xg()&&l.callbackNode!==h)return null;var v=ot;return v=Wa(l,l===$t?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(i3(l,v,u),w3(l,Kn()),l.callbackNode!=null&&l.callbackNode===h?E3.bind(null,l):null)}function A3(l,u){if(xg())return null;i3(l,u,!0)}function pU(){CU(function(){(Et&6)!==0?Wr(md,hU):_3()})}function $x(){if(il===0){var l=Hu;l===0&&(l=qa,qa<<=1,(qa&261888)===0&&(qa=256)),il=l}return il}function S3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Iu(""+l)}function C3(l,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,l.id&&h.setAttribute("form",l.id),u.parentNode.insertBefore(h,u),l=new FormData(l),h.parentNode.removeChild(h),l}function gU(l,u,h,v,_){if(u==="submit"&&h&&h.stateNode===_){var A=S3((_[sn]||null).action),P=v.submitter;P&&(u=(u=P[sn]||null)?S3(u.formAction):P.getAttribute("formAction"),u!==null&&(A=u,P=null));var z=new io("action","action",null,v,_);l.push({event:z,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(il!==0){var q=P?C3(_,P):new FormData(_);ux(h,{pending:!0,data:q,method:_.method,action:A},null,q)}}else typeof A=="function"&&(z.preventDefault(),q=P?C3(_,P):new FormData(_),ux(h,{pending:!0,data:q,method:_.method,action:A},A,q))},currentTarget:_}]})}}for(var qx=0;qx<Ty.length;qx++){var Gx=Ty[qx],vU=Gx.toLowerCase(),mU=Gx[0].toUpperCase()+Gx.slice(1);Ra(vU,"on"+mU)}Ra(nT,"onAnimationEnd"),Ra(iT,"onAnimationIteration"),Ra(aT,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(NB,"onTransitionRun"),Ra(MB,"onTransitionStart"),Ra(kB,"onTransitionCancel"),Ra(oT,"onTransitionEnd"),eo("onMouseEnter",["mouseout","mouseover"]),eo("onMouseLeave",["mouseout","mouseover"]),eo("onPointerEnter",["pointerout","pointerover"]),eo("onPointerLeave",["pointerout","pointerover"]),Ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ch));function T3(l,u){u=(u&4)!==0;for(var h=0;h<l.length;h++){var v=l[h],_=v.event;v=v.listeners;e:{var A=void 0;if(u)for(var P=v.length-1;0<=P;P--){var z=v[P],q=z.instance,te=z.currentTarget;if(z=z.listener,q!==A&&_.isPropagationStopped())break e;A=z,_.currentTarget=te;try{A(_)}catch(le){j0(le)}_.currentTarget=null,A=q}else for(P=0;P<v.length;P++){if(z=v[P],q=z.instance,te=z.currentTarget,z=z.listener,q!==A&&_.isPropagationStopped())break e;A=z,_.currentTarget=te;try{A(_)}catch(le){j0(le)}_.currentTarget=null,A=q}}}}function nt(l,u){var h=u[Eu];h===void 0&&(h=u[Eu]=new Set);var v=l+"__bubble";h.has(v)||(I3(u,l,2,!1),h.add(v))}function Wx(l,u,h){var v=0;u&&(v|=4),I3(h,l,v,u)}var wg="_reactListening"+Math.random().toString(36).slice(2);function Kx(l){if(!l[wg]){l[wg]=!0,_d.forEach(function(h){h!=="selectionchange"&&(yU.has(h)||Wx(h,!1,l),Wx(h,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[wg]||(u[wg]=!0,Wx("selectionchange",!1,u))}}function I3(l,u,h,v){switch(nI(u)){case 2:var _=GU;break;case 8:_=WU;break;default:_=c2}h=_.bind(null,u,h,l),_=void 0,!fc||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),v?_!==void 0?l.addEventListener(u,h,{capture:!0,passive:_}):l.addEventListener(u,h,!0):_!==void 0?l.addEventListener(u,h,{passive:_}):l.addEventListener(u,h,!1)}function Xx(l,u,h,v,_){var A=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var P=v.tag;if(P===3||P===4){var z=v.stateNode.containerInfo;if(z===_)break;if(P===4)for(P=v.return;P!==null;){var q=P.tag;if((q===3||q===4)&&P.stateNode.containerInfo===_)return;P=P.return}for(;z!==null;){if(P=Qa(z),P===null)return;if(q=P.tag,q===5||q===6||q===26||q===27){v=A=P;continue e}z=z.parentNode}}v=v.return}Us(function(){var te=A,le=Ki(h),fe=[];e:{var re=sT.get(l);if(re!==void 0){var oe=io,Te=l;switch(l){case"keypress":if(hc(h)===0)break e;case"keydown":case"keyup":oe=N0;break;case"focusin":Te="focus",oe=gc;break;case"focusout":Te="blur",oe=gc;break;case"beforeblur":case"afterblur":oe=gc;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=A0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=T;break;case nT:case iT:case aT:oe=C0;break;case oT:oe=H;break;case"scroll":case"scrollend":oe=Nd;break;case"wheel":oe=ae;break;case"copy":case"cut":case"paste":oe=T0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Bo;break;case"toggle":case"beforetoggle":oe=Ke}var Be=(u&4)!==0,Ft=!Be&&(l==="scroll"||l==="scrollend"),X=Be?re!==null?re+"Capture":null:re;Be=[];for(var W=te,ee;W!==null;){var ce=W;if(ee=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||ee===null||X===null||(ce=Ca(W,X),ce!=null&&Be.push(uh(W,ce,ee))),Ft)break;W=W.return}0<Be.length&&(re=new oe(re,Te,null,h,le),fe.push({event:re,listeners:Be}))}}if((u&7)===0){e:{if(re=l==="mouseover"||l==="pointerover",oe=l==="mouseout"||l==="pointerout",re&&h!==Rd&&(Te=h.relatedTarget||h.fromElement)&&(Qa(Te)||Te[Xa]))break e;if((oe||re)&&(re=le.window===le?le:(re=le.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Te=h.relatedTarget||h.toElement,oe=te,Te=Te?Qa(Te):null,Te!==null&&(Ft=a(Te),Be=Te.tag,Te!==Ft||Be!==5&&Be!==27&&Be!==6)&&(Te=null)):(oe=null,Te=te),oe!==Te)){if(Be=Md,ce="onMouseLeave",X="onMouseEnter",W="mouse",(l==="pointerout"||l==="pointerover")&&(Be=Bo,ce="onPointerLeave",X="onPointerEnter",W="pointer"),Ft=oe==null?re:wi(oe),ee=Te==null?re:wi(Te),re=new Be(ce,W+"leave",oe,h,le),re.target=Ft,re.relatedTarget=ee,ce=null,Qa(le)===te&&(Be=new Be(X,W+"enter",Te,h,le),Be.target=ee,Be.relatedTarget=Ft,ce=Be),Ft=ce,oe&&Te)t:{for(Be=xU,X=oe,W=Te,ee=0,ce=X;ce;ce=Be(ce))ee++;ce=0;for(var Me=W;Me;Me=Be(Me))ce++;for(;0<ee-ce;)X=Be(X),ee--;for(;0<ce-ee;)W=Be(W),ce--;for(;ee--;){if(X===W||W!==null&&X===W.alternate){Be=X;break t}X=Be(X),W=Be(W)}Be=null}else Be=null;oe!==null&&O3(fe,re,oe,Be,!1),Te!==null&&Ft!==null&&O3(fe,Ft,Te,Be,!0)}}e:{if(re=te?wi(te):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var mt=GC;else if($C(re))if(WC)mt=RB;else{mt=IB;var Pe=TB}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?te&&Tu(te.elementType)&&(mt=GC):mt=OB;if(mt&&(mt=mt(l,te))){qC(fe,mt,h,le);break e}Pe&&Pe(l,re,te),l==="focusout"&&te&&re.type==="number"&&te.memoizedProps.value!=null&&Td(re,"number",re.value)}switch(Pe=te?wi(te):window,l){case"focusin":($C(Pe)||Pe.contentEditable==="true")&&(ku=Pe,Ay=te,Ud=null);break;case"focusout":Ud=Ay=ku=null;break;case"mousedown":Sy=!0;break;case"contextmenu":case"mouseup":case"dragend":Sy=!1,tT(fe,h,le);break;case"selectionchange":if(DB)break;case"keydown":case"keyup":tT(fe,h,le)}var Ye;if(wt)e:{switch(l){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Mu?vc(l,h)&&(st="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(st="onCompositionStart");st&&(so&&h.locale!=="ko"&&(Mu||st!=="onCompositionStart"?st==="onCompositionEnd"&&Mu&&(Ye=Dd()):(no=le,Pd="value"in no?no.value:no.textContent,Mu=!0)),Pe=Eg(te,st),0<Pe.length&&(st=new oo(st,l,null,h,le),fe.push({event:st,listeners:Pe}),Ye?st.data=Ye:(Ye=Nu(h),Ye!==null&&(st.data=Ye)))),(Ye=Yi?EB(l,h):AB(l,h))&&(st=Eg(te,"onBeforeInput"),0<st.length&&(Pe=new oo("onBeforeInput","beforeinput",null,h,le),fe.push({event:Pe,listeners:st}),Pe.data=Ye)),gU(fe,l,te,h,le)}T3(fe,u)})}function uh(l,u,h){return{instance:l,listener:u,currentTarget:h}}function Eg(l,u){for(var h=u+"Capture",v=[];l!==null;){var _=l,A=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||A===null||(_=Ca(l,h),_!=null&&v.unshift(uh(l,_,A)),_=Ca(l,u),_!=null&&v.push(uh(l,_,A))),l.tag===3)return v;l=l.return}return[]}function xU(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function O3(l,u,h,v,_){for(var A=u._reactName,P=[];h!==null&&h!==v;){var z=h,q=z.alternate,te=z.stateNode;if(z=z.tag,q!==null&&q===v)break;z!==5&&z!==26&&z!==27||te===null||(q=te,_?(te=Ca(h,A),te!=null&&P.unshift(uh(h,te,q))):_||(te=Ca(h,A),te!=null&&P.push(uh(h,te,q)))),h=h.return}P.length!==0&&l.push({event:u,listeners:P})}var bU=/\r\n?/g,_U=/\u0000|\uFFFD/g;function R3(l){return(typeof l=="string"?l:""+l).replace(bU,`
`).replace(_U,"")}function P3(l,u){return u=R3(u),R3(l)===u}function zt(l,u,h,v,_,A){switch(h){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||oi(l,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&oi(l,""+v);break;case"className":Ei(l,"class",v);break;case"tabIndex":Ei(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(l,h,v);break;case"style":Od(l,v,A);break;case"data":if(u!=="object"){Ei(l,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||h!=="href")){l.removeAttribute(h);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(h);break}v=Iu(""+v),l.setAttribute(h,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(u!=="input"&&zt(l,u,"name",_.name,_,null),zt(l,u,"formEncType",_.formEncType,_,null),zt(l,u,"formMethod",_.formMethod,_,null),zt(l,u,"formTarget",_.formTarget,_,null)):(zt(l,u,"encType",_.encType,_,null),zt(l,u,"method",_.method,_,null),zt(l,u,"target",_.target,_,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(h);break}v=Iu(""+v),l.setAttribute(h,v);break;case"onClick":v!=null&&(l.onclick=Sa);break;case"onScroll":v!=null&&nt("scroll",l);break;case"onScrollEnd":v!=null&&nt("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(h=v.__html,h!=null){if(_.children!=null)throw Error(n(60));l.innerHTML=h}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}h=Iu(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,""+v):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":v===!0?l.setAttribute(h,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(h,v):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(h,v):l.removeAttribute(h);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(h):l.setAttribute(h,v);break;case"popover":nt("beforetoggle",l),nt("toggle",l),Su(l,"popover",v);break;case"xlinkActuate":Mr(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Mr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Mr(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Mr(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Mr(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Mr(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Mr(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Mr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Mr(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Su(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=E0.get(h)||h,Su(l,h,v))}}function Yx(l,u,h,v,_,A){switch(h){case"style":Od(l,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(h=v.__html,h!=null){if(_.children!=null)throw Error(n(60));l.innerHTML=h}}break;case"children":typeof v=="string"?oi(l,v):(typeof v=="number"||typeof v=="bigint")&&oi(l,""+v);break;case"onScroll":v!=null&&nt("scroll",l);break;case"onScrollEnd":v!=null&&nt("scrollend",l);break;case"onClick":v!=null&&(l.onclick=Sa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wd.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(_=h.endsWith("Capture"),u=h.slice(2,_?h.length-7:void 0),A=l[sn]||null,A=A!=null?A[h]:null,typeof A=="function"&&l.removeEventListener(u,A,_),typeof v=="function")){typeof A!="function"&&A!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(u,v,_);break e}h in l?l[h]=v:v===!0?l.setAttribute(h,""):Su(l,h,v)}}}function An(l,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",l),nt("load",l);var v=!1,_=!1,A;for(A in h)if(h.hasOwnProperty(A)){var P=h[A];if(P!=null)switch(A){case"src":v=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:zt(l,u,A,P,h,null)}}_&&zt(l,u,"srcSet",h.srcSet,h,null),v&&zt(l,u,"src",h.src,h,null);return;case"input":nt("invalid",l);var z=A=P=_=null,q=null,te=null;for(v in h)if(h.hasOwnProperty(v)){var le=h[v];if(le!=null)switch(v){case"name":_=le;break;case"type":P=le;break;case"checked":q=le;break;case"defaultChecked":te=le;break;case"value":A=le;break;case"defaultValue":z=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(137,u));break;default:zt(l,u,v,le,h,null)}}b0(l,A,z,q,te,P,_,!1);return;case"select":nt("invalid",l),v=P=A=null;for(_ in h)if(h.hasOwnProperty(_)&&(z=h[_],z!=null))switch(_){case"value":A=z;break;case"defaultValue":P=z;break;case"multiple":v=z;default:zt(l,u,_,z,h,null)}u=A,h=P,l.multiple=!!v,u!=null?ks(l,!!v,u,!1):h!=null&&ks(l,!!v,h,!0);return;case"textarea":nt("invalid",l),A=_=v=null;for(P in h)if(h.hasOwnProperty(P)&&(z=h[P],z!=null))switch(P){case"value":v=z;break;case"defaultValue":_=z;break;case"children":A=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(n(91));break;default:zt(l,u,P,z,h,null)}js(l,v,_,A);return;case"option":for(q in h)if(h.hasOwnProperty(q)&&(v=h[q],v!=null))switch(q){case"selected":l.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:zt(l,u,q,v,h,null)}return;case"dialog":nt("beforetoggle",l),nt("toggle",l),nt("cancel",l),nt("close",l);break;case"iframe":case"object":nt("load",l);break;case"video":case"audio":for(v=0;v<ch.length;v++)nt(ch[v],l);break;case"image":nt("error",l),nt("load",l);break;case"details":nt("toggle",l);break;case"embed":case"source":case"link":nt("error",l),nt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in h)if(h.hasOwnProperty(te)&&(v=h[te],v!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:zt(l,u,te,v,h,null)}return;default:if(Tu(u)){for(le in h)h.hasOwnProperty(le)&&(v=h[le],v!==void 0&&Yx(l,u,le,v,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(v=h[z],v!=null&&zt(l,u,z,v,h,null))}function wU(l,u,h,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,A=null,P=null,z=null,q=null,te=null,le=null;for(oe in h){var fe=h[oe];if(h.hasOwnProperty(oe)&&fe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":q=fe;default:v.hasOwnProperty(oe)||zt(l,u,oe,null,v,fe)}}for(var re in v){var oe=v[re];if(fe=h[re],v.hasOwnProperty(re)&&(oe!=null||fe!=null))switch(re){case"type":A=oe;break;case"name":_=oe;break;case"checked":te=oe;break;case"defaultChecked":le=oe;break;case"value":P=oe;break;case"defaultValue":z=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,u));break;default:oe!==fe&&zt(l,u,re,oe,v,fe)}}Cu(l,P,z,q,te,le,A,_);return;case"select":oe=P=z=re=null;for(A in h)if(q=h[A],h.hasOwnProperty(A)&&q!=null)switch(A){case"value":break;case"multiple":oe=q;default:v.hasOwnProperty(A)||zt(l,u,A,null,v,q)}for(_ in v)if(A=v[_],q=h[_],v.hasOwnProperty(_)&&(A!=null||q!=null))switch(_){case"value":re=A;break;case"defaultValue":z=A;break;case"multiple":P=A;default:A!==q&&zt(l,u,_,A,v,q)}u=z,h=P,v=oe,re!=null?ks(l,!!h,re,!1):!!v!=!!h&&(u!=null?ks(l,!!h,u,!0):ks(l,!!h,h?[]:"",!1));return;case"textarea":oe=re=null;for(z in h)if(_=h[z],h.hasOwnProperty(z)&&_!=null&&!v.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:zt(l,u,z,null,v,_)}for(P in v)if(_=v[P],A=h[P],v.hasOwnProperty(P)&&(_!=null||A!=null))switch(P){case"value":re=_;break;case"defaultValue":oe=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==A&&zt(l,u,P,_,v,A)}_0(l,re,oe);return;case"option":for(var Te in h)if(re=h[Te],h.hasOwnProperty(Te)&&re!=null&&!v.hasOwnProperty(Te))switch(Te){case"selected":l.selected=!1;break;default:zt(l,u,Te,null,v,re)}for(q in v)if(re=v[q],oe=h[q],v.hasOwnProperty(q)&&re!==oe&&(re!=null||oe!=null))switch(q){case"selected":l.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:zt(l,u,q,re,v,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in h)re=h[Be],h.hasOwnProperty(Be)&&re!=null&&!v.hasOwnProperty(Be)&&zt(l,u,Be,null,v,re);for(te in v)if(re=v[te],oe=h[te],v.hasOwnProperty(te)&&re!==oe&&(re!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,u));break;default:zt(l,u,te,re,v,oe)}return;default:if(Tu(u)){for(var Ft in h)re=h[Ft],h.hasOwnProperty(Ft)&&re!==void 0&&!v.hasOwnProperty(Ft)&&Yx(l,u,Ft,void 0,v,re);for(le in v)re=v[le],oe=h[le],!v.hasOwnProperty(le)||re===oe||re===void 0&&oe===void 0||Yx(l,u,le,re,v,oe);return}}for(var X in h)re=h[X],h.hasOwnProperty(X)&&re!=null&&!v.hasOwnProperty(X)&&zt(l,u,X,null,v,re);for(fe in v)re=v[fe],oe=h[fe],!v.hasOwnProperty(fe)||re===oe||re==null&&oe==null||zt(l,u,fe,re,v,oe)}function D3(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EU(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,h=performance.getEntriesByType("resource"),v=0;v<h.length;v++){var _=h[v],A=_.transferSize,P=_.initiatorType,z=_.duration;if(A&&z&&D3(P)){for(P=0,z=_.responseEnd,v+=1;v<h.length;v++){var q=h[v],te=q.startTime;if(te>z)break;var le=q.transferSize,fe=q.initiatorType;le&&D3(fe)&&(q=q.responseEnd,P+=le*(q<z?1:(z-te)/(q-te)))}if(--v,u+=8*(A+P)/(_.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Qx=null,Zx=null;function Ag(l){return l.nodeType===9?l:l.ownerDocument}function N3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function M3(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function Jx(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var e2=null;function AU(){var l=window.event;return l&&l.type==="popstate"?l===e2?!1:(e2=l,!0):(e2=null,!1)}var k3=typeof setTimeout=="function"?setTimeout:void 0,SU=typeof clearTimeout=="function"?clearTimeout:void 0,j3=typeof Promise=="function"?Promise:void 0,CU=typeof queueMicrotask=="function"?queueMicrotask:typeof j3<"u"?function(l){return j3.resolve(null).then(l).catch(TU)}:k3;function TU(l){setTimeout(function(){throw l})}function al(l){return l==="head"}function L3(l,u){var h=u,v=0;do{var _=h.nextSibling;if(l.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"||h==="/&"){if(v===0){l.removeChild(_),cf(u);return}v--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")v++;else if(h==="html")fh(l.ownerDocument.documentElement);else if(h==="head"){h=l.ownerDocument.head,fh(h);for(var A=h.firstChild;A;){var P=A.nextSibling,z=A.nodeName;A[Ya]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&A.rel.toLowerCase()==="stylesheet"||h.removeChild(A),A=P}}else h==="body"&&fh(l.ownerDocument.body);h=_}while(h);cf(u)}function B3(l,u){var h=l;l=0;do{var v=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(l===0)break;l--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||l++;h=v}while(h)}function t2(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":t2(h),Au(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function IU(l,u,h,v){for(;l.nodeType===1;){var _=h;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[Ya])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(A=l.getAttribute("rel"),A==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(A!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(A=l.getAttribute("src"),(A!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&A&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var A=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===A)return l}else return l;if(l=na(l.nextSibling),l===null)break}return null}function OU(l,u,h){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=na(l.nextSibling),l===null))return null;return l}function U3(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=na(l.nextSibling),l===null))return null;return l}function r2(l){return l.data==="$?"||l.data==="$~"}function n2(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function RU(l,u){var h=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||h.readyState!=="loading")u();else{var v=function(){u(),h.removeEventListener("DOMContentLoaded",v)};h.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function na(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var i2=null;function z3(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="/$"||h==="/&"){if(u===0)return na(l.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}l=l.nextSibling}return null}function F3(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return l;u--}else h!=="/$"&&h!=="/&"||u++}l=l.previousSibling}return null}function V3(l,u,h){switch(u=Ag(h),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function fh(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Au(l)}var ia=new Map,H3=new Set;function Sg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Jo=ie.d;ie.d={f:PU,r:DU,D:NU,C:MU,L:kU,m:jU,X:BU,S:LU,M:UU};function PU(){var l=Jo.f(),u=vg();return l||u}function DU(l){var u=Wi(l);u!==null&&u.tag===5&&u.type==="form"?o4(u):Jo.r(l)}var of=typeof document>"u"?null:document;function $3(l,u,h){var v=of;if(v&&typeof u=="string"&&u){var _=ai(u);_='link[rel="'+l+'"][href="'+_+'"]',typeof h=="string"&&(_+='[crossorigin="'+h+'"]'),H3.has(_)||(H3.add(_),l={rel:l,crossOrigin:h,href:u},v.querySelector(_)===null&&(u=v.createElement("link"),An(u,"link",l),Nr(u),v.head.appendChild(u)))}}function NU(l){Jo.D(l),$3("dns-prefetch",l,null)}function MU(l,u){Jo.C(l,u),$3("preconnect",l,u)}function kU(l,u,h){Jo.L(l,u,h);var v=of;if(v&&l&&u){var _='link[rel="preload"][as="'+ai(u)+'"]';u==="image"&&h&&h.imageSrcSet?(_+='[imagesrcset="'+ai(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(_+='[imagesizes="'+ai(h.imageSizes)+'"]')):_+='[href="'+ai(l)+'"]';var A=_;switch(u){case"style":A=sf(l);break;case"script":A=lf(l)}ia.has(A)||(l=p({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:l,as:u},h),ia.set(A,l),v.querySelector(_)!==null||u==="style"&&v.querySelector(dh(A))||u==="script"&&v.querySelector(hh(A))||(u=v.createElement("link"),An(u,"link",l),Nr(u),v.head.appendChild(u)))}}function jU(l,u){Jo.m(l,u);var h=of;if(h&&l){var v=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+ai(v)+'"][href="'+ai(l)+'"]',A=_;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=lf(l)}if(!ia.has(A)&&(l=p({rel:"modulepreload",href:l},u),ia.set(A,l),h.querySelector(_)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(hh(A)))return}v=h.createElement("link"),An(v,"link",l),Nr(v),h.head.appendChild(v)}}}function LU(l,u,h){Jo.S(l,u,h);var v=of;if(v&&l){var _=Za(v).hoistableStyles,A=sf(l);u=u||"default";var P=_.get(A);if(!P){var z={loading:0,preload:null};if(P=v.querySelector(dh(A)))z.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":u},h),(h=ia.get(A))&&a2(l,h);var q=P=v.createElement("link");Nr(q),An(q,"link",l),q._p=new Promise(function(te,le){q.onload=te,q.onerror=le}),q.addEventListener("load",function(){z.loading|=1}),q.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Cg(P,u,v)}P={type:"stylesheet",instance:P,count:1,state:z},_.set(A,P)}}}function BU(l,u){Jo.X(l,u);var h=of;if(h&&l){var v=Za(h).hoistableScripts,_=lf(l),A=v.get(_);A||(A=h.querySelector(hh(_)),A||(l=p({src:l,async:!0},u),(u=ia.get(_))&&o2(l,u),A=h.createElement("script"),Nr(A),An(A,"link",l),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(_,A))}}function UU(l,u){Jo.M(l,u);var h=of;if(h&&l){var v=Za(h).hoistableScripts,_=lf(l),A=v.get(_);A||(A=h.querySelector(hh(_)),A||(l=p({src:l,async:!0,type:"module"},u),(u=ia.get(_))&&o2(l,u),A=h.createElement("script"),Nr(A),An(A,"link",l),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(_,A))}}function q3(l,u,h,v){var _=(_=We.current)?Sg(_):null;if(!_)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=sf(h.href),h=Za(_).hoistableStyles,v=h.get(u),v||(v={type:"style",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=sf(h.href);var A=Za(_).hoistableStyles,P=A.get(l);if(P||(_=_.ownerDocument||_,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(l,P),(A=_.querySelector(dh(l)))&&!A._p&&(P.instance=A,P.state.loading=5),ia.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ia.set(l,h),A||zU(_,l,h,P.state))),u&&v===null)throw Error(n(528,""));return P}if(u&&v!==null)throw Error(n(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=lf(h),h=Za(_).hoistableScripts,v=h.get(u),v||(v={type:"script",instance:null,count:0,state:null},h.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function sf(l){return'href="'+ai(l)+'"'}function dh(l){return'link[rel="stylesheet"]['+l+"]"}function G3(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function zU(l,u,h,v){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=l.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),An(u,"link",h),Nr(u),l.head.appendChild(u))}function lf(l){return'[src="'+ai(l)+'"]'}function hh(l){return"script[async]"+l}function W3(l,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var v=l.querySelector('style[data-href~="'+ai(h.href)+'"]');if(v)return u.instance=v,Nr(v),v;var _=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),Nr(v),An(v,"style",_),Cg(v,h.precedence,l),u.instance=v;case"stylesheet":_=sf(h.href);var A=l.querySelector(dh(_));if(A)return u.state.loading|=4,u.instance=A,Nr(A),A;v=G3(h),(_=ia.get(_))&&a2(v,_),A=(l.ownerDocument||l).createElement("link"),Nr(A);var P=A;return P._p=new Promise(function(z,q){P.onload=z,P.onerror=q}),An(A,"link",v),u.state.loading|=4,Cg(A,h.precedence,l),u.instance=A;case"script":return A=lf(h.src),(_=l.querySelector(hh(A)))?(u.instance=_,Nr(_),_):(v=h,(_=ia.get(A))&&(v=p({},h),o2(v,_)),l=l.ownerDocument||l,_=l.createElement("script"),Nr(_),An(_,"link",v),l.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,Cg(v,h.precedence,l));return u.instance}function Cg(l,u,h){for(var v=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=v.length?v[v.length-1]:null,A=_,P=0;P<v.length;P++){var z=v[P];if(z.dataset.precedence===u)A=z;else if(A!==_)break}A?A.parentNode.insertBefore(l,A.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(l,u.firstChild))}function a2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function o2(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Tg=null;function K3(l,u,h){if(Tg===null){var v=new Map,_=Tg=new Map;_.set(h,v)}else _=Tg,v=_.get(h),v||(v=new Map,_.set(h,v));if(v.has(l))return v;for(v.set(l,null),h=h.getElementsByTagName(l),_=0;_<h.length;_++){var A=h[_];if(!(A[Ya]||A[Dr]||l==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var P=A.getAttribute(u)||"";P=l+P;var z=v.get(P);z?z.push(A):v.set(P,[A])}}return v}function X3(l,u,h){l=l.ownerDocument||l,l.head.insertBefore(h,u==="title"?l.querySelector("head > title"):null)}function FU(l,u,h){if(h===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function Y3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function VU(l,u,h,v){if(h.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var _=sf(v.href),A=u.querySelector(dh(_));if(A){u=A._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=Ig.bind(l),u.then(l,l)),h.state.loading|=4,h.instance=A,Nr(A);return}A=u.ownerDocument||u,v=G3(v),(_=ia.get(_))&&a2(v,_),A=A.createElement("link"),Nr(A);var P=A;P._p=new Promise(function(z,q){P.onload=z,P.onerror=q}),An(A,"link",v),h.instance=A}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(l.count++,h=Ig.bind(l),u.addEventListener("load",h),u.addEventListener("error",h))}}var s2=0;function HU(l,u){return l.stylesheets&&l.count===0&&Rg(l,l.stylesheets),0<l.count||0<l.imgCount?function(h){var v=setTimeout(function(){if(l.stylesheets&&Rg(l,l.stylesheets),l.unsuspend){var A=l.unsuspend;l.unsuspend=null,A()}},6e4+u);0<l.imgBytes&&s2===0&&(s2=62500*EU());var _=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Rg(l,l.stylesheets),l.unsuspend)){var A=l.unsuspend;l.unsuspend=null,A()}},(l.imgBytes>s2?50:800)+u);return l.unsuspend=h,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(_)}}:null}function Ig(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rg(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Og=null;function Rg(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Og=new Map,u.forEach($U,l),Og=null,Ig.call(l))}function $U(l,u){if(!(u.state.loading&4)){var h=Og.get(l);if(h)var v=h.get(null);else{h=new Map,Og.set(l,h);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<_.length;A++){var P=_[A];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(h.set(P.dataset.precedence,P),v=P)}v&&h.set(null,v)}_=u.instance,P=_.getAttribute("data-precedence"),A=h.get(P)||v,A===v&&h.set(null,_),h.set(P,_),this.count++,v=Ig.bind(this),_.addEventListener("load",v),_.addEventListener("error",v),A?A.parentNode.insertBefore(_,A.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),u.state.loading|=4}}var ph={$$typeof:O,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function qU(l,u,h,v,_,A,P,z,q){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ka(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ka(0),this.hiddenUpdates=Ka(null),this.identifierPrefix=v,this.onUncaughtError=_,this.onCaughtError=A,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Q3(l,u,h,v,_,A,P,z,q,te,le,fe){return l=new qU(l,u,h,P,q,te,le,fe,z),u=1,A===!0&&(u|=24),A=Si(3,null,null,u),l.current=A,A.stateNode=l,u=zy(),u.refCount++,l.pooledCache=u,u.refCount++,A.memoizedState={element:v,isDehydrated:h,cache:u},$y(A),l}function Z3(l){return l?(l=Bu,l):Bu}function J3(l,u,h,v,_,A){_=Z3(_),v.context===null?v.context=_:v.pendingContext=_,v=Ks(u),v.payload={element:h},A=A===void 0?null:A,A!==null&&(v.callback=A),h=Xs(l,v,u),h!==null&&(fi(h,l,u),Gd(h,l,u))}function eI(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<u?h:u}}function l2(l,u){eI(l,u),(l=l.alternate)&&eI(l,u)}function tI(l){if(l.tag===13||l.tag===31){var u=xc(l,67108864);u!==null&&fi(u,l,67108864),l2(l,67108864)}}function rI(l){if(l.tag===13||l.tag===31){var u=Ri();u=sc(u);var h=xc(l,u);h!==null&&fi(h,l,u),l2(l,u)}}var Pg=!0;function GU(l,u,h,v){var _=Y.T;Y.T=null;var A=ie.p;try{ie.p=2,c2(l,u,h,v)}finally{ie.p=A,Y.T=_}}function WU(l,u,h,v){var _=Y.T;Y.T=null;var A=ie.p;try{ie.p=8,c2(l,u,h,v)}finally{ie.p=A,Y.T=_}}function c2(l,u,h,v){if(Pg){var _=u2(v);if(_===null)Xx(l,u,v,Dg,h),iI(l,v);else if(XU(_,l,u,h,v))v.stopPropagation();else if(iI(l,v),u&4&&-1<KU.indexOf(l)){for(;_!==null;){var A=Wi(_);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var P=Ga(A.pendingLanes);if(P!==0){var z=A;for(z.pendingLanes|=2,z.entangledLanes|=2;P;){var q=1<<31-Er(P);z.entanglements[1]|=q,P&=~q}fo(A),(Et&6)===0&&(pg=Kn()+500,lh(0))}}break;case 31:case 13:z=xc(A,2),z!==null&&fi(z,A,2),vg(),l2(A,2)}if(A=u2(v),A===null&&Xx(l,u,v,Dg,h),A===_)break;_=A}_!==null&&v.stopPropagation()}else Xx(l,u,v,null,h)}}function u2(l){return l=Ki(l),f2(l)}var Dg=null;function f2(l){if(Dg=null,l=Qa(l),l!==null){var u=a(l);if(u===null)l=null;else{var h=u.tag;if(h===13){if(l=o(u),l!==null)return l;l=null}else if(h===31){if(l=s(u),l!==null)return l;l=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Dg=l,null}function nI(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nc()){case md:return 2;case yd:return 8;case Ns:case my:return 32;case u0:return 268435456;default:return 32}default:return 32}}var d2=!1,ol=null,sl=null,ll=null,gh=new Map,vh=new Map,cl=[],KU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iI(l,u){switch(l){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":ll=null;break;case"pointerover":case"pointerout":gh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(u.pointerId)}}function mh(l,u,h,v,_,A){return l===null||l.nativeEvent!==A?(l={blockedOn:u,domEventName:h,eventSystemFlags:v,nativeEvent:A,targetContainers:[_]},u!==null&&(u=Wi(u),u!==null&&tI(u)),l):(l.eventSystemFlags|=v,u=l.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),l)}function XU(l,u,h,v,_){switch(u){case"focusin":return ol=mh(ol,l,u,h,v,_),!0;case"dragenter":return sl=mh(sl,l,u,h,v,_),!0;case"mouseover":return ll=mh(ll,l,u,h,v,_),!0;case"pointerover":var A=_.pointerId;return gh.set(A,mh(gh.get(A)||null,l,u,h,v,_)),!0;case"gotpointercapture":return A=_.pointerId,vh.set(A,mh(vh.get(A)||null,l,u,h,v,_)),!0}return!1}function aI(l){var u=Qa(l.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){l.blockedOn=u,Ea(l.priority,function(){rI(h)});return}}else if(u===31){if(u=s(h),u!==null){l.blockedOn=u,Ea(l.priority,function(){rI(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Ng(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var h=u2(l.nativeEvent);if(h===null){h=l.nativeEvent;var v=new h.constructor(h.type,h);Rd=v,h.target.dispatchEvent(v),Rd=null}else return u=Wi(h),u!==null&&tI(u),l.blockedOn=h,!1;u.shift()}return!0}function oI(l,u,h){Ng(l)&&h.delete(u)}function YU(){d2=!1,ol!==null&&Ng(ol)&&(ol=null),sl!==null&&Ng(sl)&&(sl=null),ll!==null&&Ng(ll)&&(ll=null),gh.forEach(oI),vh.forEach(oI)}function Mg(l,u){l.blockedOn===u&&(l.blockedOn=null,d2||(d2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,YU)))}var kg=null;function sI(l){kg!==l&&(kg=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){kg===l&&(kg=null);for(var u=0;u<l.length;u+=3){var h=l[u],v=l[u+1],_=l[u+2];if(typeof v!="function"){if(f2(v||h)===null)continue;break}var A=Wi(h);A!==null&&(l.splice(u,3),u-=3,ux(A,{pending:!0,data:_,method:h.method,action:v},v,_))}}))}function cf(l){function u(q){return Mg(q,l)}ol!==null&&Mg(ol,l),sl!==null&&Mg(sl,l),ll!==null&&Mg(ll,l),gh.forEach(u),vh.forEach(u);for(var h=0;h<cl.length;h++){var v=cl[h];v.blockedOn===l&&(v.blockedOn=null)}for(;0<cl.length&&(h=cl[0],h.blockedOn===null);)aI(h),h.blockedOn===null&&cl.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(v=0;v<h.length;v+=3){var _=h[v],A=h[v+1],P=_[sn]||null;if(typeof A=="function")P||sI(h);else if(P){var z=null;if(A&&A.hasAttribute("formAction")){if(_=A,P=A[sn]||null)z=P.formAction;else if(f2(_)!==null)continue}else z=P.action;typeof z=="function"?h[v+1]=z:(h.splice(v,3),v-=3),sI(h)}}}function lI(){function l(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(P){return _=P})},focusReset:"manual",scroll:"manual"})}function u(){_!==null&&(_(),_=null),v||setTimeout(h,20)}function h(){if(!v&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,_=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),_!==null&&(_(),_=null)}}}function h2(l){this._internalRoot=l}jg.prototype.render=h2.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var h=u.current,v=Ri();J3(h,v,l,u,null,null)},jg.prototype.unmount=h2.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;J3(l.current,2,null,l,null,null),vg(),u[Xa]=null}};function jg(l){this._internalRoot=l}jg.prototype.unstable_scheduleHydration=function(l){if(l){var u=v0();l={blockedOn:null,target:l,priority:u};for(var h=0;h<cl.length&&u!==0&&u<cl[h].priority;h++);cl.splice(h,0,l),h===0&&aI(l)}};var cI=e.version;if(cI!=="19.2.0")throw Error(n(527,cI,"19.2.0"));ie.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=f(u),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var QU={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lg.isDisabled&&Lg.supportsFiber)try{_a=Lg.inject(QU),xn=Lg}catch{}}return xh.createRoot=function(l,u){if(!i(l))throw Error(n(299));var h=!1,v="",_=v4,A=m4,P=y4;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(P=u.onRecoverableError)),u=Q3(l,1,!1,null,null,h,v,null,_,A,P,lI),l[Xa]=u.current,Kx(l),new h2(u)},xh.hydrateRoot=function(l,u,h){if(!i(l))throw Error(n(299));var v=!1,_="",A=v4,P=m4,z=y4,q=null;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.formState!==void 0&&(q=h.formState)),u=Q3(l,1,!0,u,h??null,v,_,q,A,P,z,lI),u.context=Z3(null),h=u.current,v=Ri(),v=sc(v),_=Ks(v),_.callback=null,Xs(h,_,v),h=v,u.current.lanes=h,ac(u,h),fo(u),l[Xa]=u.current,Kx(l),new jg(u)},xh.version="19.2.0",xh}var xI;function lz(){if(xI)return v2.exports;xI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),v2.exports=sz(),v2.exports}var cz=lz();const uz=Io(cz),fz=({title:t})=>m.jsx("header",{children:t});var oD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bI=Hn.createContext&&Hn.createContext(oD),dz=["attr","size","title"];function hz(t,e){if(t==null)return{};var r=pz(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pz(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function N1(){return N1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N1.apply(this,arguments)}function _I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function M1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_I(Object(r),!0).forEach(function(n){gz(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_I(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gz(t,e,r){return e=vz(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vz(t){var e=mz(t,"string");return typeof e=="symbol"?e:e+""}function mz(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sD(t){return t&&t.map((e,r)=>Hn.createElement(e.tag,M1({key:r},e.attr),sD(e.child)))}function Ee(t){return e=>Hn.createElement(yz,N1({attr:M1({},t.attr)},e),sD(t.child))}function yz(t){var e=r=>{var{attr:n,size:i,title:a}=t,o=hz(t,dz),s=i||r.size||"1em",c;return r.className&&(c=r.className),t.className&&(c=(c?c+" ":"")+t.className),Hn.createElement("svg",N1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:M1(M1({color:t.color||r.color},r.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&Hn.createElement("title",null,a),t.children)};return bI!==void 0?Hn.createElement(bI.Consumer,null,r=>e(r)):e(oD)}function xz(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function bz(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function Yv(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function _z(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(t)}function wz(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(t)}function Qv(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M8 14s1.5 2 4 2 4-2 4-2"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"9.01",y2:"9"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"15.01",y2:"9"},child:[]}]})(t)}function Zv(t){return Ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(t)}function Ez(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"},child:[]}]})(t)}function Az(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15-5-2.18L7 18V5h10v13z"},child:[]}]})(t)}function Sz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function Sp(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"},child:[]}]})(t)}function Jv(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(t)}function Cz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function Yf(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function Tz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"},child:[]}]})(t)}function lD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"},child:[]}]})(t)}function cD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"},child:[]}]})(t)}function Iz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 3a9 9 0 0 0-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"},child:[]}]})(t)}function Oz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(t)}function Rz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2 11.7V16h-4v-2.3C8.48 12.63 7 11.53 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.49-1.51 3.65-3 4.7z"},child:[]}]})(t)}function Sl(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(t)}function Pz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"},child:[]}]})(t)}function Dz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"},child:[]}]})(t)}function uD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z"},child:[]}]})(t)}function fD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(t)}function Nz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function em(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function Mz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"},child:[]}]})(t)}function oE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(t)}function dD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69L23 12zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48-7.33 7.35z"},child:[]}]})(t)}function hD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},child:[]}]})(t)}function kz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"},child:[]}]})(t)}function jz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"},child:[]}]})(t)}function pD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"},child:[]}]})(t)}function tm(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(t)}function Lz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"},child:[]}]})(t)}function k1(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function If(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2zm-5 12H9v-2h6v2zm5-7H4V4l16-.02V7z"},child:[]}]})(t)}function gD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"},child:[]}]})(t)}function wI(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(t)}function sE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(t)}function Bz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"},child:[]}]})(t)}function Uz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(t)}function zz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"},child:[]}]})(t)}function Fz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"},child:[]}]})(t)}function Vz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(t)}function j1(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function rp(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m9.4 10.5 4.77-8.26a9.984 9.984 0 0 0-8.49 2.01l3.66 6.35.06-.1zM21.54 9c-.92-2.92-3.15-5.26-6-6.34L11.88 9h9.66zm.26 1h-7.49l.29.5 4.76 8.25A9.91 9.91 0 0 0 22 12c0-.69-.07-1.35-.2-2zM8.54 12l-3.9-6.75A9.958 9.958 0 0 0 2.2 14h7.49l-1.15-2zm-6.08 3c.92 2.92 3.15 5.26 6 6.34L12.12 15H2.46zm11.27 0-3.9 6.76a9.984 9.984 0 0 0 8.49-2.01l-3.66-6.35-.93 1.6z"},child:[]}]})(t)}function vD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(t)}function Hz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function $z(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3.2"},child:[]},{tag:"path",attr:{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},child:[]}]})(t)}function L1(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m8.1 13.34 2.83-2.83L3.91 3.5a4.008 4.008 0 0 0 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13l1.47-1.47z"},child:[]}]})(t)}function lE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"},child:[]}]})(t)}function Cp(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},child:[]}]})(t)}function b2(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},child:[]}]})(t)}function qz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(t)}function mD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"},child:[]}]})(t)}function cE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"},child:[]}]})(t)}function fs(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function Gz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function Wz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},child:[]}]})(t)}function Kz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94A5.01 5.01 0 0 0 11 15.9V19H7v2h10v-2h-4v-3.1a5.01 5.01 0 0 0 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"},child:[]}]})(t)}function EI(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function yD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}function uE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function fE(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4zm3 2v2h6v-2h-6zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4z"},child:[]}]})(t)}function Of(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},child:[]}]})(t)}function xD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"},child:[]}]})(t)}function bD(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"},child:[]}]})(t)}function Xz(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"},child:[]}]})(t)}function A_(t){return Ee({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"},child:[]}]})(t)}const Yz=({currentScreen:t,onNavigate:e})=>{const r=[{screen:"home",icon:m.jsx(_z,{size:24}),label:"ホーム"},{screen:"meals",icon:m.jsx(lE,{size:24}),label:"食事"},{screen:"barcode",icon:m.jsx(bz,{size:24}),label:"スキャン"},{screen:"report",icon:m.jsx(xz,{size:24}),label:"レポート"},{screen:"social",icon:m.jsx(yD,{size:24}),label:"ソーシャル"},{screen:"settings",icon:m.jsx(wz,{size:24}),label:"設定"}];return m.jsx("nav",{id:"bottomNav",children:r.map(n=>m.jsxs("button",{className:`nav-item ${t===n.screen?"active":""}`,onClick:()=>e(n.screen),children:[m.jsx("span",{children:n.icon}),m.jsx("span",{children:n.label})]},n.screen))})},AI=t=>{let e;const r=new Set,n=(f,d)=>{const p=typeof f=="function"?f(e):f;if(!Object.is(p,e)){const g=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),r.forEach(y=>y(e,g))}},i=()=>e,s={setState:n,getState:i,getInitialState:()=>c,subscribe:f=>(r.add(f),()=>r.delete(f))},c=e=t(n,i,s);return s},Qz=(t=>t?AI(t):AI),Zz=t=>t;function Jz(t,e=Zz){const r=Hn.useSyncExternalStore(t.subscribe,Hn.useCallback(()=>e(t.getState()),[t,e]),Hn.useCallback(()=>e(t.getInitialState()),[t,e]));return Hn.useDebugValue(r),r}const SI=t=>{const e=Qz(t),r=n=>Jz(e,n);return Object.assign(r,e),r},pu=(t=>t?SI(t):SI);function Ml(t,e){try{const r=localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.error(`localStorage取得エラー (${t}):`,r),e}}function Lt(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error(`localStorage保存エラー (${t}):`,r)}}const it={INTAKES:"intakes",EXPENSES:"expenses",STOCKS:"stocks",SHOPPING:"shopping",RECIPE_HISTORY:"recipeHistory",FAVORITE_RECIPES:"favoriteRecipes",SETTINGS:"settings",BADGES:"app-badges"},Sn=[];for(let t=0;t<256;++t)Sn.push((t+256).toString(16).slice(1));function eF(t,e=0){return(Sn[t[e+0]]+Sn[t[e+1]]+Sn[t[e+2]]+Sn[t[e+3]]+"-"+Sn[t[e+4]]+Sn[t[e+5]]+"-"+Sn[t[e+6]]+Sn[t[e+7]]+"-"+Sn[t[e+8]]+Sn[t[e+9]]+"-"+Sn[t[e+10]]+Sn[t[e+11]]+Sn[t[e+12]]+Sn[t[e+13]]+Sn[t[e+14]]+Sn[t[e+15]]).toLowerCase()}let _2;const tF=new Uint8Array(16);function rF(){if(!_2){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_2=crypto.getRandomValues.bind(crypto)}return _2(tF)}const nF=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),CI={randomUUID:nF};function iF(t,e,r){t=t||{};const n=t.random??t.rng?.()??rF();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,eF(n)}function aF(t,e,r){return CI.randomUUID&&!t?CI.randomUUID():iF(t)}function Cl(){return aF()}const oF=()=>{};var TI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},sF=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],s=t[r++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},wD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,s=o?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,d=a>>2,p=(a&3)<<4|s>>4;let g=(s&15)<<2|f>>6,y=f&63;c||(y=64,o||(g=64)),n.push(r[d],r[p],r[g],r[y])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_D(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],s=i<t.length?r[t.charAt(i)]:0;++i;const f=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||s==null||f==null||p==null)throw new lF;const g=a<<2|s>>4;if(n.push(g),f!==64){const y=s<<4&240|f>>2;if(n.push(y),p!==64){const b=f<<6&192|p;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cF=function(t){const e=_D(t);return wD.encodeByteArray(e,!0)},B1=function(t){return cF(t).replace(/\./g,"")},ED=function(t){try{return wD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=()=>uF().__FIREBASE_DEFAULTS__,dF=()=>{if(typeof process>"u"||typeof TI>"u")return;const t=TI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ED(t[1]);return e&&JSON.parse(e)},rm=()=>{try{return oF()||fF()||dF()||hF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AD=t=>rm()?.emulatorHosts?.[t],dE=t=>{const e=AD(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},SD=()=>rm()?.config,CD=t=>rm()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[B1(JSON.stringify(r)),B1(JSON.stringify(o)),""].join(".")}const Gh={};function gF(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gh))Gh[e]?t.emulator.push(e):t.prod.push(e);return t}function vF(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let II=!1;function im(t,e){if(typeof window>"u"||typeof document>"u"||!Oo(window.location.host)||Gh[t]===e||Gh[t]||II)return;Gh[t]=e;function r(g){return`__firebase__banner__${g}`}const n="__firebase__banner",a=gF().prod.length>0;function o(){const g=document.getElementById(n);g&&g.remove()}function s(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function f(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{II=!0,o()},g}function d(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=vF(n),y=r("text"),b=document.getElementById(y)||document.createElement("span"),w=r("learnmore"),E=document.getElementById(w)||document.createElement("a"),S=r("preprendIcon"),I=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const O=g.element;s(O),d(E,w);const D=f();c(I,S),O.append(I,b,E,D),document.body.appendChild(O)}a?(b.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function yF(){const t=rm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _F(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wF(){const t=Gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EF(){return!yF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AF(){try{return typeof indexedDB=="object"}catch{return!1}}function SF(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="FirebaseError";class Ha extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=CF,Object.setPrototypeOf(this,Ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tp.prototype.create)}}class Tp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?TF(a,n):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new Ha(i,s,n)}}function TF(t,e){return t.replace(IF,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const IF=/\{\$([^}]+)}/g;function OF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ru(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(OI(a)&&OI(o)){if(!ru(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function OI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Mh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function kh(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function RF(t,e){const r=new PF(t,e);return r.subscribe.bind(r)}class PF{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");DF(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=w2),i.error===void 0&&(i.error=w2),i.complete===void 0&&(i.complete=w2);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DF(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function w2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(t){return t&&t._delegate?t._delegate:t}class ds{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NF=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new pF;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kF(e))try{this.getOrInitializeService({instanceIdentifier:kc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kc){return this.instances.has(e)}getOptions(e=kc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);n===s&&o.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:MF(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=kc){return this.component?this.component.multipleInstances?e:kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function MF(t){return t===kc?void 0:t}function kF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new NF(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const LF={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},BF=lt.INFO,UF={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},zF=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=UF[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hE{constructor(e){this.name=e,this._logLevel=BF,this._logHandler=zF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const FF=(t,e)=>e.some(r=>t instanceof r);let RI,PI;function VF(){return RI||(RI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HF(){return PI||(PI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ID=new WeakMap,S_=new WeakMap,OD=new WeakMap,E2=new WeakMap,pE=new WeakMap;function $F(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Tl(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&ID.set(r,t)}).catch(()=>{}),pE.set(e,t),e}function qF(t){if(S_.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});S_.set(t,e)}let C_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return S_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OD.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tl(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GF(t){C_=t(C_)}function WF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(A2(this),e,...r);return OD.set(n,e.sort?e.sort():[e]),Tl(n)}:HF().includes(t)?function(...e){return t.apply(A2(this),e),Tl(ID.get(this))}:function(...e){return Tl(t.apply(A2(this),e))}}function KF(t){return typeof t=="function"?WF(t):(t instanceof IDBTransaction&&qF(t),FF(t,VF())?new Proxy(t,C_):t)}function Tl(t){if(t instanceof IDBRequest)return $F(t);if(E2.has(t))return E2.get(t);const e=KF(t);return e!==t&&(E2.set(t,e),pE.set(e,t)),e}const A2=t=>pE.get(t);function XF(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=Tl(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Tl(o.result),c.oldVersion,c.newVersion,Tl(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),s.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),s}const YF=["get","getKey","getAll","getAllKeys","count"],QF=["put","add","delete","clear"],S2=new Map;function DI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(S2.get(e))return S2.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=QF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||YF.includes(r)))return;const a=async function(o,...s){const c=this.transaction(o,i?"readwrite":"readonly");let f=c.store;return n&&(f=f.index(s.shift())),(await Promise.all([f[r](...s),i&&c.done]))[0]};return S2.set(e,a),a}GF(t=>({...t,get:(e,r,n)=>DI(e,r)||t.get(e,r,n),has:(e,r)=>!!DI(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(JF(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function JF(t){return t.getComponent()?.type==="VERSION"}const T_="@firebase/app",NI="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new hE("@firebase/app"),eV="@firebase/app-compat",tV="@firebase/analytics-compat",rV="@firebase/analytics",nV="@firebase/app-check-compat",iV="@firebase/app-check",aV="@firebase/auth",oV="@firebase/auth-compat",sV="@firebase/database",lV="@firebase/data-connect",cV="@firebase/database-compat",uV="@firebase/functions",fV="@firebase/functions-compat",dV="@firebase/installations",hV="@firebase/installations-compat",pV="@firebase/messaging",gV="@firebase/messaging-compat",vV="@firebase/performance",mV="@firebase/performance-compat",yV="@firebase/remote-config",xV="@firebase/remote-config-compat",bV="@firebase/storage",_V="@firebase/storage-compat",wV="@firebase/firestore",EV="@firebase/ai",AV="@firebase/firestore-compat",SV="firebase",CV="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="[DEFAULT]",TV={[T_]:"fire-core",[eV]:"fire-core-compat",[rV]:"fire-analytics",[tV]:"fire-analytics-compat",[iV]:"fire-app-check",[nV]:"fire-app-check-compat",[aV]:"fire-auth",[oV]:"fire-auth-compat",[sV]:"fire-rtdb",[lV]:"fire-data-connect",[cV]:"fire-rtdb-compat",[uV]:"fire-fn",[fV]:"fire-fn-compat",[dV]:"fire-iid",[hV]:"fire-iid-compat",[pV]:"fire-fcm",[gV]:"fire-fcm-compat",[vV]:"fire-perf",[mV]:"fire-perf-compat",[yV]:"fire-rc",[xV]:"fire-rc-compat",[bV]:"fire-gcs",[_V]:"fire-gcs-compat",[wV]:"fire-fst",[AV]:"fire-fst-compat",[EV]:"fire-vertex","fire-js":"fire-js",[SV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=new Map,IV=new Map,O_=new Map;function MI(t,e){try{t.container.addComponent(e)}catch(r){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function kl(t){const e=t.name;if(O_.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;O_.set(e,t);for(const r of U1.values())MI(r,t);for(const r of IV.values())MI(r,t);return!0}function Op(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function ri(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Il=new Tp("app","Firebase",OV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Il.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=CV;function RD(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:I_,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Il.create("bad-app-name",{appName:String(i)});if(r||(r=SD()),!r)throw Il.create("no-options");const a=U1.get(i);if(a){if(ru(r,a.options)&&ru(n,a.config))return a;throw Il.create("duplicate-app",{appName:i})}const o=new jF(i);for(const c of O_.values())o.addComponent(c);const s=new RV(r,n,o);return U1.set(i,s),s}function am(t=I_){const e=U1.get(t);if(!e&&t===I_&&SD())return RD();if(!e)throw Il.create("no-app",{appName:t});return e}function pa(t,e,r){let n=TV[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${n}" with version "${e}":`];i&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(o.join(" "));return}kl(new ds(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="firebase-heartbeat-database",DV=1,np="firebase-heartbeat-store";let C2=null;function PD(){return C2||(C2=XF(PV,DV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(np)}catch(r){console.warn(r)}}}}).catch(t=>{throw Il.create("idb-open",{originalErrorMessage:t.message})})),C2}async function NV(t){try{const r=(await PD()).transaction(np),n=await r.objectStore(np).get(DD(t));return await r.done,n}catch(e){if(e instanceof Ha)hs.warn(e.message);else{const r=Il.create("idb-get",{originalErrorMessage:e?.message});hs.warn(r.message)}}}async function kI(t,e){try{const n=(await PD()).transaction(np,"readwrite");await n.objectStore(np).put(e,DD(t)),await n.done}catch(r){if(r instanceof Ha)hs.warn(r.message);else{const n=Il.create("idb-set",{originalErrorMessage:r?.message});hs.warn(n.message)}}}function DD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=1024,kV=30;class jV{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new BV(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=jI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>kV){const i=UV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jI(),{heartbeatsToSend:r,unsentEntries:n}=LV(this._heartbeatsCache.heartbeats),i=B1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return hs.warn(e),""}}}function jI(){return new Date().toISOString().substring(0,10)}function LV(t,e=MV){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),LI(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),LI(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class BV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AF()?SF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await NV(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return kI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return kI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function LI(t){return B1(JSON.stringify({version:2,heartbeats:t})).length}function UV(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){kl(new ds("platform-logger",e=>new ZF(e),"PRIVATE")),kl(new ds("heartbeat",e=>new jV(e),"PRIVATE")),pa(T_,NI,t),pa(T_,NI,"esm2020"),pa("fire-js","")}zV("");var BI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ol,ND;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,N){function L(){}L.prototype=N.prototype,R.F=N.prototype,R.prototype=new L,R.prototype.constructor=R,R.D=function(U,j,V){for(var F=Array(arguments.length-2),he=2;he<arguments.length;he++)F[he-2]=arguments[he];return N.prototype[j].apply(U,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,N,L){L||(L=0);const U=Array(16);if(typeof N=="string")for(var j=0;j<16;++j)U[j]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(j=0;j<16;++j)U[j]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;N=R.g[0],L=R.g[1],j=R.g[2];let V=R.g[3],F;F=N+(V^L&(j^V))+U[0]+3614090360&4294967295,N=L+(F<<7&4294967295|F>>>25),F=V+(j^N&(L^j))+U[1]+3905402710&4294967295,V=N+(F<<12&4294967295|F>>>20),F=j+(L^V&(N^L))+U[2]+606105819&4294967295,j=V+(F<<17&4294967295|F>>>15),F=L+(N^j&(V^N))+U[3]+3250441966&4294967295,L=j+(F<<22&4294967295|F>>>10),F=N+(V^L&(j^V))+U[4]+4118548399&4294967295,N=L+(F<<7&4294967295|F>>>25),F=V+(j^N&(L^j))+U[5]+1200080426&4294967295,V=N+(F<<12&4294967295|F>>>20),F=j+(L^V&(N^L))+U[6]+2821735955&4294967295,j=V+(F<<17&4294967295|F>>>15),F=L+(N^j&(V^N))+U[7]+4249261313&4294967295,L=j+(F<<22&4294967295|F>>>10),F=N+(V^L&(j^V))+U[8]+1770035416&4294967295,N=L+(F<<7&4294967295|F>>>25),F=V+(j^N&(L^j))+U[9]+2336552879&4294967295,V=N+(F<<12&4294967295|F>>>20),F=j+(L^V&(N^L))+U[10]+4294925233&4294967295,j=V+(F<<17&4294967295|F>>>15),F=L+(N^j&(V^N))+U[11]+2304563134&4294967295,L=j+(F<<22&4294967295|F>>>10),F=N+(V^L&(j^V))+U[12]+1804603682&4294967295,N=L+(F<<7&4294967295|F>>>25),F=V+(j^N&(L^j))+U[13]+4254626195&4294967295,V=N+(F<<12&4294967295|F>>>20),F=j+(L^V&(N^L))+U[14]+2792965006&4294967295,j=V+(F<<17&4294967295|F>>>15),F=L+(N^j&(V^N))+U[15]+1236535329&4294967295,L=j+(F<<22&4294967295|F>>>10),F=N+(j^V&(L^j))+U[1]+4129170786&4294967295,N=L+(F<<5&4294967295|F>>>27),F=V+(L^j&(N^L))+U[6]+3225465664&4294967295,V=N+(F<<9&4294967295|F>>>23),F=j+(N^L&(V^N))+U[11]+643717713&4294967295,j=V+(F<<14&4294967295|F>>>18),F=L+(V^N&(j^V))+U[0]+3921069994&4294967295,L=j+(F<<20&4294967295|F>>>12),F=N+(j^V&(L^j))+U[5]+3593408605&4294967295,N=L+(F<<5&4294967295|F>>>27),F=V+(L^j&(N^L))+U[10]+38016083&4294967295,V=N+(F<<9&4294967295|F>>>23),F=j+(N^L&(V^N))+U[15]+3634488961&4294967295,j=V+(F<<14&4294967295|F>>>18),F=L+(V^N&(j^V))+U[4]+3889429448&4294967295,L=j+(F<<20&4294967295|F>>>12),F=N+(j^V&(L^j))+U[9]+568446438&4294967295,N=L+(F<<5&4294967295|F>>>27),F=V+(L^j&(N^L))+U[14]+3275163606&4294967295,V=N+(F<<9&4294967295|F>>>23),F=j+(N^L&(V^N))+U[3]+4107603335&4294967295,j=V+(F<<14&4294967295|F>>>18),F=L+(V^N&(j^V))+U[8]+1163531501&4294967295,L=j+(F<<20&4294967295|F>>>12),F=N+(j^V&(L^j))+U[13]+2850285829&4294967295,N=L+(F<<5&4294967295|F>>>27),F=V+(L^j&(N^L))+U[2]+4243563512&4294967295,V=N+(F<<9&4294967295|F>>>23),F=j+(N^L&(V^N))+U[7]+1735328473&4294967295,j=V+(F<<14&4294967295|F>>>18),F=L+(V^N&(j^V))+U[12]+2368359562&4294967295,L=j+(F<<20&4294967295|F>>>12),F=N+(L^j^V)+U[5]+4294588738&4294967295,N=L+(F<<4&4294967295|F>>>28),F=V+(N^L^j)+U[8]+2272392833&4294967295,V=N+(F<<11&4294967295|F>>>21),F=j+(V^N^L)+U[11]+1839030562&4294967295,j=V+(F<<16&4294967295|F>>>16),F=L+(j^V^N)+U[14]+4259657740&4294967295,L=j+(F<<23&4294967295|F>>>9),F=N+(L^j^V)+U[1]+2763975236&4294967295,N=L+(F<<4&4294967295|F>>>28),F=V+(N^L^j)+U[4]+1272893353&4294967295,V=N+(F<<11&4294967295|F>>>21),F=j+(V^N^L)+U[7]+4139469664&4294967295,j=V+(F<<16&4294967295|F>>>16),F=L+(j^V^N)+U[10]+3200236656&4294967295,L=j+(F<<23&4294967295|F>>>9),F=N+(L^j^V)+U[13]+681279174&4294967295,N=L+(F<<4&4294967295|F>>>28),F=V+(N^L^j)+U[0]+3936430074&4294967295,V=N+(F<<11&4294967295|F>>>21),F=j+(V^N^L)+U[3]+3572445317&4294967295,j=V+(F<<16&4294967295|F>>>16),F=L+(j^V^N)+U[6]+76029189&4294967295,L=j+(F<<23&4294967295|F>>>9),F=N+(L^j^V)+U[9]+3654602809&4294967295,N=L+(F<<4&4294967295|F>>>28),F=V+(N^L^j)+U[12]+3873151461&4294967295,V=N+(F<<11&4294967295|F>>>21),F=j+(V^N^L)+U[15]+530742520&4294967295,j=V+(F<<16&4294967295|F>>>16),F=L+(j^V^N)+U[2]+3299628645&4294967295,L=j+(F<<23&4294967295|F>>>9),F=N+(j^(L|~V))+U[0]+4096336452&4294967295,N=L+(F<<6&4294967295|F>>>26),F=V+(L^(N|~j))+U[7]+1126891415&4294967295,V=N+(F<<10&4294967295|F>>>22),F=j+(N^(V|~L))+U[14]+2878612391&4294967295,j=V+(F<<15&4294967295|F>>>17),F=L+(V^(j|~N))+U[5]+4237533241&4294967295,L=j+(F<<21&4294967295|F>>>11),F=N+(j^(L|~V))+U[12]+1700485571&4294967295,N=L+(F<<6&4294967295|F>>>26),F=V+(L^(N|~j))+U[3]+2399980690&4294967295,V=N+(F<<10&4294967295|F>>>22),F=j+(N^(V|~L))+U[10]+4293915773&4294967295,j=V+(F<<15&4294967295|F>>>17),F=L+(V^(j|~N))+U[1]+2240044497&4294967295,L=j+(F<<21&4294967295|F>>>11),F=N+(j^(L|~V))+U[8]+1873313359&4294967295,N=L+(F<<6&4294967295|F>>>26),F=V+(L^(N|~j))+U[15]+4264355552&4294967295,V=N+(F<<10&4294967295|F>>>22),F=j+(N^(V|~L))+U[6]+2734768916&4294967295,j=V+(F<<15&4294967295|F>>>17),F=L+(V^(j|~N))+U[13]+1309151649&4294967295,L=j+(F<<21&4294967295|F>>>11),F=N+(j^(L|~V))+U[4]+4149444226&4294967295,N=L+(F<<6&4294967295|F>>>26),F=V+(L^(N|~j))+U[11]+3174756917&4294967295,V=N+(F<<10&4294967295|F>>>22),F=j+(N^(V|~L))+U[2]+718787259&4294967295,j=V+(F<<15&4294967295|F>>>17),F=L+(V^(j|~N))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+N&4294967295,R.g[1]=R.g[1]+(j+(F<<21&4294967295|F>>>11))&4294967295,R.g[2]=R.g[2]+j&4294967295,R.g[3]=R.g[3]+V&4294967295}n.prototype.v=function(R,N){N===void 0&&(N=R.length);const L=N-this.blockSize,U=this.C;let j=this.h,V=0;for(;V<N;){if(j==0)for(;V<=L;)i(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<N;)if(U[j++]=R.charCodeAt(V++),j==this.blockSize){i(this,U),j=0;break}}else for(;V<N;)if(U[j++]=R[V++],j==this.blockSize){i(this,U),j=0;break}}this.h=j,this.o+=N},n.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var N=1;N<R.length-8;++N)R[N]=0;N=this.o*8;for(var L=R.length-8;L<R.length;++L)R[L]=N&255,N/=256;for(this.v(R),R=Array(16),N=0,L=0;L<4;++L)for(let U=0;U<32;U+=8)R[N++]=this.g[L]>>>U&255;return R};function a(R,N){var L=s;return Object.prototype.hasOwnProperty.call(L,R)?L[R]:L[R]=N(R)}function o(R,N){this.h=N;const L=[];let U=!0;for(let j=R.length-1;j>=0;j--){const V=R[j]|0;U&&V==N||(L[j]=V,U=!1)}this.g=L}var s={};function c(R){return-128<=R&&R<128?a(R,function(N){return new o([N|0],N<0?-1:0)}):new o([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return E(f(-R));const N=[];let L=1;for(let U=0;R>=L;U++)N[U]=R/L|0,L*=4294967296;return new o(N,0)}function d(R,N){if(R.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(R.charAt(0)=="-")return E(d(R.substring(1),N));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=f(Math.pow(N,8));let U=p;for(let V=0;V<R.length;V+=8){var j=Math.min(8,R.length-V);const F=parseInt(R.substring(V,V+j),N);j<8?(j=f(Math.pow(N,j)),U=U.j(j).add(f(F))):(U=U.j(L),U=U.add(f(F)))}return U}var p=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-E(this).m();let R=0,N=1;for(let L=0;L<this.g.length;L++){const U=this.i(L);R+=(U>=0?U:4294967296+U)*N,N*=4294967296}return R},t.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(b(this))return"0";if(w(this))return"-"+E(this).toString(R);const N=f(Math.pow(R,6));var L=this;let U="";for(;;){const j=D(L,N).g;L=S(L,j.j(N));let V=((L.g.length>0?L.g[0]:L.h)>>>0).toString(R);if(L=j,b(L))return V+U;for(;V.length<6;)V="0"+V;U=V+U}},t.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function b(R){if(R.h!=0)return!1;for(let N=0;N<R.g.length;N++)if(R.g[N]!=0)return!1;return!0}function w(R){return R.h==-1}t.l=function(R){return R=S(this,R),w(R)?-1:b(R)?0:1};function E(R){const N=R.g.length,L=[];for(let U=0;U<N;U++)L[U]=~R.g[U];return new o(L,~R.h).add(g)}t.abs=function(){return w(this)?E(this):this},t.add=function(R){const N=Math.max(this.g.length,R.g.length),L=[];let U=0;for(let j=0;j<=N;j++){let V=U+(this.i(j)&65535)+(R.i(j)&65535),F=(V>>>16)+(this.i(j)>>>16)+(R.i(j)>>>16);U=F>>>16,V&=65535,F&=65535,L[j]=F<<16|V}return new o(L,L[L.length-1]&-2147483648?-1:0)};function S(R,N){return R.add(E(N))}t.j=function(R){if(b(this)||b(R))return p;if(w(this))return w(R)?E(this).j(E(R)):E(E(this).j(R));if(w(R))return E(this.j(E(R)));if(this.l(y)<0&&R.l(y)<0)return f(this.m()*R.m());const N=this.g.length+R.g.length,L=[];for(var U=0;U<2*N;U++)L[U]=0;for(U=0;U<this.g.length;U++)for(let j=0;j<R.g.length;j++){const V=this.i(U)>>>16,F=this.i(U)&65535,he=R.i(j)>>>16,we=R.i(j)&65535;L[2*U+2*j]+=F*we,I(L,2*U+2*j),L[2*U+2*j+1]+=V*we,I(L,2*U+2*j+1),L[2*U+2*j+1]+=F*he,I(L,2*U+2*j+1),L[2*U+2*j+2]+=V*he,I(L,2*U+2*j+2)}for(R=0;R<N;R++)L[R]=L[2*R+1]<<16|L[2*R];for(R=N;R<2*N;R++)L[R]=0;return new o(L,0)};function I(R,N){for(;(R[N]&65535)!=R[N];)R[N+1]+=R[N]>>>16,R[N]&=65535,N++}function O(R,N){this.g=R,this.h=N}function D(R,N){if(b(N))throw Error("division by zero");if(b(R))return new O(p,p);if(w(R))return N=D(E(R),N),new O(E(N.g),E(N.h));if(w(N))return N=D(R,E(N)),new O(E(N.g),N.h);if(R.g.length>30){if(w(R)||w(N))throw Error("slowDivide_ only works with positive integers.");for(var L=g,U=N;U.l(R)<=0;)L=k(L),U=k(U);var j=B(L,1),V=B(U,1);for(U=B(U,2),L=B(L,2);!b(U);){var F=V.add(U);F.l(R)<=0&&(j=j.add(L),V=F),U=B(U,1),L=B(L,1)}return N=S(R,j.j(N)),new O(j,N)}for(j=p;R.l(N)>=0;){for(L=Math.max(1,Math.floor(R.m()/N.m())),U=Math.ceil(Math.log(L)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),V=f(L),F=V.j(N);w(F)||F.l(R)>0;)L-=U,V=f(L),F=V.j(N);b(V)&&(V=g),j=j.add(V),R=S(R,F)}return new O(j,R)}t.B=function(R){return D(this,R).h},t.and=function(R){const N=Math.max(this.g.length,R.g.length),L=[];for(let U=0;U<N;U++)L[U]=this.i(U)&R.i(U);return new o(L,this.h&R.h)},t.or=function(R){const N=Math.max(this.g.length,R.g.length),L=[];for(let U=0;U<N;U++)L[U]=this.i(U)|R.i(U);return new o(L,this.h|R.h)},t.xor=function(R){const N=Math.max(this.g.length,R.g.length),L=[];for(let U=0;U<N;U++)L[U]=this.i(U)^R.i(U);return new o(L,this.h^R.h)};function k(R){const N=R.g.length+1,L=[];for(let U=0;U<N;U++)L[U]=R.i(U)<<1|R.i(U-1)>>>31;return new o(L,R.h)}function B(R,N){const L=N>>5;N%=32;const U=R.g.length-L,j=[];for(let V=0;V<U;V++)j[V]=N>0?R.i(V+L)>>>N|R.i(V+L+1)<<32-N:R.i(V+L);return new o(j,R.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,ND=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=f,o.fromString=d,Ol=o}).apply(typeof BI<"u"?BI:typeof self<"u"?self:typeof window<"u"?window:{});var Bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MD,jh,kD,y1,R_,jD,LD,BD;(function(){var t,e=Object.defineProperty;function r(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bg=="object"&&Bg];for(var T=0;T<x.length;++T){var M=x[T];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var n=r(this);function i(x,T){if(T)e:{var M=n;x=x.split(".");for(var H=0;H<x.length-1;H++){var Q=x[H];if(!(Q in M))break e;M=M[Q]}x=x[x.length-1],H=M[x],T=T(H),T!=H&&T!=null&&e(M,x,{configurable:!0,writable:!0,value:T})}}i("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(x){return x||function(T){var M=[],H;for(H in T)Object.prototype.hasOwnProperty.call(T,H)&&M.push([H,T[H]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function s(x){var T=typeof x;return T=="object"&&x!=null||T=="function"}function c(x,T,M){return x.call.apply(x.bind,arguments)}function f(x,T,M){return f=c,f.apply(null,arguments)}function d(x,T){var M=Array.prototype.slice.call(arguments,1);return function(){var H=M.slice();return H.push.apply(H,arguments),x.apply(this,H)}}function p(x,T){function M(){}M.prototype=T.prototype,x.Z=T.prototype,x.prototype=new M,x.prototype.constructor=x,x.Ob=function(H,Q,ae){for(var ye=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)ye[Ke-2]=arguments[Ke];return T.prototype[Q].apply(H,ye)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function y(x){const T=x.length;if(T>0){const M=Array(T);for(let H=0;H<T;H++)M[H]=x[H];return M}return[]}function b(x,T){for(let H=1;H<arguments.length;H++){const Q=arguments[H];var M=typeof Q;if(M=M!="object"?M:Q?Array.isArray(Q)?"array":M:"null",M=="array"||M=="object"&&typeof Q.length=="number"){M=x.length||0;const ae=Q.length||0;x.length=M+ae;for(let ye=0;ye<ae;ye++)x[M+ye]=Q[ye]}else x.push(Q)}}class w{constructor(T,M){this.i=T,this.j=M,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function E(x){o.setTimeout(()=>{throw x},0)}function S(){var x=R;let T=null;return x.g&&(T=x.g,x.g=x.g.next,x.g||(x.h=null),T.next=null),T}class I{constructor(){this.h=this.g=null}add(T,M){const H=O.get();H.set(T,M),this.h?this.h.next=H:this.g=H,this.h=H}}var O=new w(()=>new D,x=>x.reset());class D{constructor(){this.next=this.g=this.h=null}set(T,M){this.h=T,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let k,B=!1,R=new I,N=()=>{const x=Promise.resolve(void 0);k=()=>{x.then(L)}};function L(){for(var x;x=S();){try{x.h.call(x.g)}catch(M){E(M)}var T=O;T.j(x),T.h<100&&(T.h++,x.next=T.g,T.g=x)}B=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,T){this.type=x,this.g=this.target=T,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var x=!1,T=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const M=()=>{};o.addEventListener("test",M,T),o.removeEventListener("test",M,T)}catch{}return x})();function F(x){return/^[\s\xa0]*$/.test(x)}function he(x,T){j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,T)}p(he,j),he.prototype.init=function(x,T){const M=this.type=x.type,H=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=T,T=x.relatedTarget,T||(M=="mouseover"?T=x.fromElement:M=="mouseout"&&(T=x.toElement)),this.relatedTarget=T,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var we="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ie(x,T,M,H,Q){this.listener=x,this.proxy=null,this.src=T,this.type=M,this.capture=!!H,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function K(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function ge(x,T,M){for(const H in x)T.call(M,x[H],H,x)}function Ie(x,T){for(const M in x)T.call(void 0,x[M],M,x)}function G(x){const T={};for(const M in x)T[M]=x[M];return T}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(x,T){let M,H;for(let Q=1;Q<arguments.length;Q++){H=arguments[Q];for(M in H)x[M]=H[M];for(let ae=0;ae<Z.length;ae++)M=Z[ae],Object.prototype.hasOwnProperty.call(H,M)&&(x[M]=H[M])}}function Ae(x){this.src=x,this.g={},this.h=0}Ae.prototype.add=function(x,T,M,H,Q){const ae=x.toString();x=this.g[ae],x||(x=this.g[ae]=[],this.h++);const ye=We(x,T,H,Q);return ye>-1?(T=x[ye],M||(T.fa=!1)):(T=new ie(T,this.src,ae,!!H,Q),T.fa=M,x.push(T)),T};function De(x,T){const M=T.type;if(M in x.g){var H=x.g[M],Q=Array.prototype.indexOf.call(H,T,void 0),ae;(ae=Q>=0)&&Array.prototype.splice.call(H,Q,1),ae&&(K(T),x.g[M].length==0&&(delete x.g[M],x.h--))}}function We(x,T,M,H){for(let Q=0;Q<x.length;++Q){const ae=x[Q];if(!ae.da&&ae.listener==T&&ae.capture==!!M&&ae.ha==H)return Q}return-1}var at="closure_lm_"+(Math.random()*1e6|0),br={};function me(x,T,M,H,Q){if(Array.isArray(T)){for(let ae=0;ae<T.length;ae++)me(x,T[ae],M,H,Q);return null}return M=Ps(M),x&&x[we]?x.J(T,M,s(H)?!!H.capture:!1,Q):$e(x,T,M,!1,H,Q)}function $e(x,T,M,H,Q,ae){if(!T)throw Error("Invalid event type");const ye=s(Q)?!!Q.capture:!!Q;let Ke=wr(x);if(Ke||(x[at]=Ke=new Ae(x)),M=Ke.add(T,M,H,ye,ae),M.proxy)return M;if(H=Qe(),M.proxy=H,H.src=x,H.listener=M,x.addEventListener)V||(Q=ye),Q===void 0&&(Q=!1),x.addEventListener(T.toString(),H,Q);else if(x.attachEvent)x.attachEvent(tt(T.toString()),H);else if(x.addListener&&x.removeListener)x.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Qe(){function x(M){return T.call(x.src,x.listener,M)}const T=Gr;return x}function pe(x,T,M,H,Q){if(Array.isArray(T))for(var ae=0;ae<T.length;ae++)pe(x,T[ae],M,H,Q);else H=s(H)?!!H.capture:!!H,M=Ps(M),x&&x[we]?(x=x.i,ae=String(T).toString(),ae in x.g&&(T=x.g[ae],M=We(T,M,H,Q),M>-1&&(K(T[M]),Array.prototype.splice.call(T,M,1),T.length==0&&(delete x.g[ae],x.h--)))):x&&(x=wr(x))&&(T=x.g[T.toString()],x=-1,T&&(x=We(T,M,H,Q)),(M=x>-1?T[x]:null)&&_r(M))}function _r(x){if(typeof x!="number"&&x&&!x.da){var T=x.src;if(T&&T[we])De(T.i,x);else{var M=x.type,H=x.proxy;T.removeEventListener?T.removeEventListener(M,H,x.capture):T.detachEvent?T.detachEvent(tt(M),H):T.addListener&&T.removeListener&&T.removeListener(H),(M=wr(T))?(De(M,x),M.h==0&&(M.src=null,T[at]=null)):K(x)}}}function tt(x){return x in br?br[x]:br[x]="on"+x}function Gr(x,T){if(x.da)x=!0;else{T=new he(T,this);const M=x.listener,H=x.ha||x.src;x.fa&&_r(x),x=M.call(H,T)}return x}function wr(x){return x=x[at],x instanceof Ae?x:null}var _i="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ps(x){return typeof x=="function"?x:(x[_i]||(x[_i]=function(T){return x.handleEvent(T)}),x[_i])}function Rr(){U.call(this),this.i=new Ae(this),this.M=this,this.G=null}p(Rr,U),Rr.prototype[we]=!0,Rr.prototype.removeEventListener=function(x,T,M,H){pe(this,x,T,M,H)};function Wr(x,T){var M,H=x.G;if(H)for(M=[];H;H=H.G)M.push(H);if(x=x.M,H=T.type||T,typeof T=="string")T=new j(T,x);else if(T instanceof j)T.target=T.target||x;else{var Q=T;T=new j(H,x),be(T,Q)}Q=!0;let ae,ye;if(M)for(ye=M.length-1;ye>=0;ye--)ae=T.g=M[ye],Q=Ds(ae,H,!0,T)&&Q;if(ae=T.g=x,Q=Ds(ae,H,!0,T)&&Q,Q=Ds(ae,H,!1,T)&&Q,M)for(ye=0;ye<M.length;ye++)ae=T.g=M[ye],Q=Ds(ae,H,!1,T)&&Q}Rr.prototype.N=function(){if(Rr.Z.N.call(this),this.i){var x=this.i;for(const T in x.g){const M=x.g[T];for(let H=0;H<M.length;H++)K(M[H]);delete x.g[T],x.h--}}this.G=null},Rr.prototype.J=function(x,T,M,H){return this.i.add(String(x),T,!1,M,H)},Rr.prototype.K=function(x,T,M,H){return this.i.add(String(x),T,!0,M,H)};function Ds(x,T,M,H){if(T=x.i.g[String(T)],!T)return!0;T=T.concat();let Q=!0;for(let ae=0;ae<T.length;++ae){const ye=T[ae];if(ye&&!ye.da&&ye.capture==M){const Ke=ye.listener,Ar=ye.ha||ye.src;ye.fa&&De(x.i,ye),Q=Ke.call(Ar,H)!==!1&&Q}}return Q&&!H.defaultPrevented}function vy(x,T){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=f(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:o.setTimeout(x,T||0)}function c0(x){x.g=vy(()=>{x.g=null,x.i&&(x.i=!1,c0(x))},x.l);const T=x.h;x.h=null,x.m.apply(null,T)}class Kn extends U{constructor(T,M){super(),this.m=T,this.l=M,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:c0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nc(x){U.call(this),this.h=x,this.g={}}p(nc,U);var md=[];function yd(x){ge(x.g,function(T,M){this.g.hasOwnProperty(M)&&_r(T)},x),x.g={}}nc.prototype.N=function(){nc.Z.N.call(this),yd(this)},nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ns=o.JSON.stringify,my=o.JSON.parse,u0=class{stringify(x){return o.JSON.stringify(x,void 0)}parse(x){return o.JSON.parse(x,void 0)}};function f0(){}function d0(){}var _a={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xn(){j.call(this,"d")}p(xn,j);function Gi(){j.call(this,"c")}p(Gi,j);var Er={},h0=null;function wu(){return h0=h0||new Rr}Er.Ia="serverreachability";function p0(x){j.call(this,Er.Ia,x)}p(p0,j);function qa(x){const T=wu();Wr(T,new p0(T))}Er.STAT_EVENT="statevent";function ic(x,T){j.call(this,Er.STAT_EVENT,x),this.stat=T}p(ic,j);function Pr(x){const T=wu();Wr(T,new ic(T,x))}Er.Ja="timingevent";function Ga(x,T){j.call(this,Er.Ja,x),this.size=T}p(Ga,j);function Wa(x,T){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){x()},T)}function wa(){this.g=!0}wa.prototype.ua=function(){this.g=!1};function yy(x,T,M,H,Q,ae){x.info(function(){if(x.g)if(ae){var ye="",Ke=ae.split("&");for(let wt=0;wt<Ke.length;wt++){var Ar=Ke[wt].split("=");if(Ar.length>1){const ir=Ar[0];Ar=Ar[1];const Yi=ir.split("_");ye=Yi.length>=2&&Yi[1]=="type"?ye+(ir+"="+Ar+"&"):ye+(ir+"=redacted&")}}}else ye=null;else ye=ae;return"XMLHTTP REQ ("+H+") [attempt "+Q+"]: "+T+`
`+M+`
`+ye})}function g0(x,T,M,H,Q,ae,ye){x.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+Q+"]: "+T+`
`+M+`
`+ae+" "+ye})}function Ka(x,T,M,H){x.info(function(){return"XMLHTTP TEXT ("+T+"): "+xy(x,M)+(H?" "+H:"")})}function ac(x,T){x.info(function(){return"TIMEOUT: "+T})}wa.prototype.info=function(){};function xy(x,T){if(!x.g)return T;if(!T)return null;try{const ae=JSON.parse(T);if(ae){for(x=0;x<ae.length;x++)if(Array.isArray(ae[x])){var M=ae[x];if(!(M.length<2)){var H=M[1];if(Array.isArray(H)&&!(H.length<1)){var Q=H[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ye=1;ye<H.length;ye++)H[ye]=""}}}}return Ns(ae)}catch{return T}}var oc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bd;function sc(){}p(sc,f0),sc.prototype.g=function(){return new XMLHttpRequest},bd=new sc;function ko(x){return encodeURIComponent(String(x))}function v0(x){var T=1;x=x.split(":");const M=[];for(;T>0&&x.length;)M.push(x.shift()),T--;return x.length&&M.push(x.join(":")),M}function Ea(x,T,M,H){this.j=x,this.i=T,this.l=M,this.S=H||1,this.V=new nc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Aa}function Aa(){this.i=null,this.g="",this.h=!1}var Dr={},sn={};function Xa(x,T,M){x.M=1,x.A=lc(Mr(T)),x.u=M,x.R=!0,Eu(x,null)}function Eu(x,T){x.F=Date.now(),Ya(x),x.B=Mr(x.A);var M=x.B,H=x.S;Array.isArray(H)||(H=[String(H)]),Tu(M.i,"t",H),x.C=0,M=x.j.L,x.h=new Aa,x.g=P0(x.j,M?T:null,!x.u),x.P>0&&(x.O=new Kn(f(x.Y,x,x.g),x.P)),T=x.V,M=x.g,H=x.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(md[0]=Q.toString()),Q=md);for(let ae=0;ae<Q.length;ae++){const ye=me(M,Q[ae],H||T.handleEvent,!1,T.h||T);if(!ye)break;T.g[ye.key]=ye}T=x.J?G(x.J):{},x.u?(x.v||(x.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,T)):(x.v="GET",x.g.ea(x.B,x.v,null,T)),qa(),yy(x.i,x.v,x.B,x.l,x.S,x.u)}Ea.prototype.ba=function(x){x=x.target;const T=this.O;T&&Ta(x)==3?T.j():this.Y(x)},Ea.prototype.Y=function(x){try{if(x==this.g)e:{const Ke=Ta(this.g),Ar=this.g.ya(),wt=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||bn(this.g)))){this.K||Ke!=4||Ar==7||(Ar==8||wt<=0?qa(3):qa(2)),Qa(this);var T=this.g.ca();this.X=T;var M=by(this);if(this.o=T==200,g0(this.i,this.v,this.B,this.l,this.S,Ke,T),this.o){if(this.U&&!this.L){t:{if(this.g){var H,Q=this.g;if((H=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(H)){var ae=H;break t}}ae=null}if(x=ae)Ka(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Za(this,x);else{this.o=!1,this.m=3,Pr(12),wi(this),Wi(this);break e}}if(this.R){x=!0;let ir;for(;!this.K&&this.C<M.length;)if(ir=y0(this,M),ir==sn){Ke==4&&(this.m=4,Pr(14),x=!1),Ka(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==Dr){this.m=4,Pr(15),Ka(this.i,this.l,M,"[Invalid Chunk]"),x=!1;break}else Ka(this.i,this.l,ir,null),Za(this,ir);if(m0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||M.length!=0||this.h.h||(this.m=1,Pr(16),x=!1),this.o=this.o&&x,!x)Ka(this.i,this.l,M,"[Invalid Chunked Response]"),wi(this),Wi(this);else if(M.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),kd(ye),ye.P=!0,Pr(11))}}else Ka(this.i,this.l,M,null),Za(this,M);Ke==4&&wi(this),this.o&&!this.K&&(Ke==4?T0(this.j,this):(this.o=!1,Ya(this)))}else Lo(this.g),T==400&&M.indexOf("Unknown SID")>0?(this.m=3,Pr(12)):(this.m=0,Pr(13)),wi(this),Wi(this)}}}catch{}finally{}};function by(x){if(!m0(x))return x.g.la();const T=bn(x.g);if(T==="")return"";let M="";const H=T.length,Q=Ta(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return wi(x),Wi(x),"";x.h.i=new o.TextDecoder}for(let ae=0;ae<H;ae++)x.h.h=!0,M+=x.h.i.decode(T[ae],{stream:!(Q&&ae==H-1)});return T.length=0,x.h.g+=M,x.C=0,x.h.g}function m0(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function y0(x,T){var M=x.C,H=T.indexOf(`
`,M);return H==-1?sn:(M=Number(T.substring(M,H)),isNaN(M)?Dr:(H+=1,H+M>T.length?sn:(T=T.slice(H,H+M),x.C=H+M,T)))}Ea.prototype.cancel=function(){this.K=!0,wi(this)};function Ya(x){x.T=Date.now()+x.H,Au(x,x.H)}function Au(x,T){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Wa(f(x.aa,x),T)}function Qa(x){x.D&&(o.clearTimeout(x.D),x.D=null)}Ea.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(ac(this.i,this.B),this.M!=2&&(qa(),Pr(17)),wi(this),this.m=2,Wi(this)):Au(this,this.T-x)};function Wi(x){x.j.I==0||x.K||T0(x.j,x)}function wi(x){Qa(x);var T=x.O;T&&typeof T.dispose=="function"&&T.dispose(),x.O=null,yd(x.V),x.g&&(T=x.g,x.g=null,T.abort(),T.dispose())}function Za(x,T){try{var M=x.j;if(M.I!=0&&(M.g==x||eo(M.h,x))){if(!x.L&&eo(M.h,x)&&M.I==3){try{var H=M.Ba.g.parse(T)}catch{H=null}if(Array.isArray(H)&&H.length==3){var Q=H;if(Q[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<x.F)Du(M),Fs(M);else break e;gc(M),Pr(18)}}else M.xa=Q[1],0<M.xa-M.K&&Q[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=Wa(f(M.Va,M),6e3));Ja(M.h)<=1&&M.ta&&(M.ta=void 0)}else oo(M,11)}else if((x.L||M.g==x)&&Du(M),!F(T))for(Q=M.Ba.g.parse(T),T=0;T<Q.length;T++){let wt=Q[T];const ir=wt[0];if(!(ir<=M.K))if(M.K=ir,wt=wt[1],M.I==2)if(wt[0]=="c"){M.M=wt[1],M.ba=wt[2];const Yi=wt[3];Yi!=null&&(M.ka=Yi,M.j.info("VER="+M.ka));const so=wt[4];so!=null&&(M.za=so,M.j.info("SVER="+M.za));const Ia=wt[5];Ia!=null&&typeof Ia=="number"&&Ia>0&&(H=1.5*Ia,M.O=H,M.j.info("backChannelRequestTimeoutMs_="+H)),H=M;const Oa=x.g;if(Oa){const vc=Oa.g?Oa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vc){var ae=H.h;ae.g||vc.indexOf("spdy")==-1&&vc.indexOf("quic")==-1&&vc.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Ed(ae,ae.h),ae.h=null))}if(H.G){const Nu=Oa.g?Oa.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(H.wa=Nu,Pt(H.J,H.G,Nu))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-x.F,M.j.info("Handshake RTT: "+M.T+"ms")),H=M;var ye=x;if(H.na=R0(H,H.L?H.ba:null,H.W),ye.L){Ad(H.h,ye);var Ke=ye,Ar=H.O;Ar&&(Ke.H=Ar),Ke.D&&(Qa(Ke),Ya(Ke)),H.g=ye}else S0(H);M.i.length>0&&ao(M)}else wt[0]!="stop"&&wt[0]!="close"||oo(M,7);else M.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?oo(M,7):Nd(M):wt[0]!="noop"&&M.l&&M.l.qa(wt),M.A=0)}}qa(4)}catch{}}var Nr=class{constructor(x,T){this.g=x,this.map=T}};function _d(x){this.l=x||10,o.PerformanceNavigationTiming?(x=o.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wd(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Ja(x){return x.h?1:x.g?x.g.size:0}function eo(x,T){return x.h?x.h==T:x.g?x.g.has(T):!1}function Ed(x,T){x.g?x.g.add(T):x.h=T}function Ad(x,T){x.h&&x.h==T?x.h=null:x.g&&x.g.has(T)&&x.g.delete(T)}_d.prototype.cancel=function(){if(this.i=Sd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Sd(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let T=x.i;for(const M of x.g.values())T=T.concat(M.G);return T}return y(x.i)}var x0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Su(x,T){if(x){x=x.split("&");for(let M=0;M<x.length;M++){const H=x[M].indexOf("=");let Q,ae=null;H>=0?(Q=x[M].substring(0,H),ae=x[M].substring(H+1)):Q=x[M],T(Q,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Ei(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;x instanceof Ei?(this.l=x.l,ln(this,x.j),this.o=x.o,this.g=x.g,Ms(this,x.u),this.h=x.h,Cd(this,E0(x.i)),this.m=x.m):x&&(T=String(x).match(x0))?(this.l=!1,ln(this,T[1]||"",!0),this.o=to(T[2]||""),this.g=to(T[3]||"",!0),Ms(this,T[4]),this.h=to(T[5]||"",!0),Cd(this,T[6]||"",!0),this.m=to(T[7]||"")):(this.l=!1,this.i=new js(null,this.l))}Ei.prototype.toString=function(){const x=[];var T=this.j;T&&x.push(cc(T,Cu,!0),":");var M=this.g;return(M||T=="file")&&(x.push("//"),(T=this.o)&&x.push(cc(T,Cu,!0),"@"),x.push(ko(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&x.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&x.push("/"),x.push(cc(M,M.charAt(0)=="/"?Td:b0,!0))),(M=this.i.toString())&&x.push("?",M),(M=this.m)&&x.push("#",cc(M,_0)),x.join("")},Ei.prototype.resolve=function(x){const T=Mr(this);let M=!!x.j;M?ln(T,x.j):M=!!x.o,M?T.o=x.o:M=!!x.g,M?T.g=x.g:M=x.u!=null;var H=x.h;if(M)Ms(T,x.u);else if(M=!!x.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var Q=T.h.lastIndexOf("/");Q!=-1&&(H=T.h.slice(0,Q+1)+H)}if(Q=H,Q==".."||Q==".")H="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){H=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ae=[];for(let ye=0;ye<Q.length;){const Ke=Q[ye++];Ke=="."?H&&ye==Q.length&&ae.push(""):Ke==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),H&&ye==Q.length&&ae.push("")):(ae.push(Ke),H=!0)}H=ae.join("/")}else H=Q}return M?T.h=H:M=x.i.toString()!=="",M?Cd(T,E0(x.i)):M=!!x.m,M&&(T.m=x.m),T};function Mr(x){return new Ei(x)}function ln(x,T,M){x.j=M?to(T,!0):T,x.j&&(x.j=x.j.replace(/:$/,""))}function Ms(x,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);x.u=T}else x.u=null}function Cd(x,T,M){T instanceof js?(x.i=T,Iu(x.i,x.l)):(M||(T=cc(T,ks)),x.i=new js(T,x.l))}function Pt(x,T,M){x.i.set(T,M)}function lc(x){return Pt(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function to(x,T){return x?T?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function cc(x,T,M){return typeof x=="string"?(x=encodeURI(x).replace(T,ai),M&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function ai(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Cu=/[#\/\?@]/g,b0=/[#\?:]/g,Td=/[#\?]/g,ks=/[#\?@]/g,_0=/#/g;function js(x,T){this.h=this.g=null,this.i=x||null,this.j=!!T}function oi(x){x.g||(x.g=new Map,x.h=0,x.i&&Su(x.i,function(T,M){x.add(decodeURIComponent(T.replace(/\+/g," ")),M)}))}t=js.prototype,t.add=function(x,T){oi(this),this.i=null,x=Ls(this,x);let M=this.g.get(x);return M||this.g.set(x,M=[]),M.push(T),this.h+=1,this};function w0(x,T){oi(x),T=Ls(x,T),x.g.has(T)&&(x.i=null,x.h-=x.g.get(T).length,x.g.delete(T))}function Id(x,T){return oi(x),T=Ls(x,T),x.g.has(T)}t.forEach=function(x,T){oi(this),this.g.forEach(function(M,H){M.forEach(function(Q){x.call(T,Q,H,this)},this)},this)};function Od(x,T){oi(x);let M=[];if(typeof T=="string")Id(x,T)&&(M=M.concat(x.g.get(Ls(x,T))));else for(x=Array.from(x.g.values()),T=0;T<x.length;T++)M=M.concat(x[T]);return M}t.set=function(x,T){return oi(this),this.i=null,x=Ls(this,x),Id(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[T]),this.h+=1,this},t.get=function(x,T){return x?(x=Od(this,x),x.length>0?String(x[0]):T):T};function Tu(x,T,M){w0(x,T),M.length>0&&(x.i=null,x.g.set(Ls(x,T),y(M)),x.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],T=Array.from(this.g.keys());for(let H=0;H<T.length;H++){var M=T[H];const Q=ko(M);M=Od(this,M);for(let ae=0;ae<M.length;ae++){let ye=Q;M[ae]!==""&&(ye+="="+ko(M[ae])),x.push(ye)}}return this.i=x.join("&")};function E0(x){const T=new js;return T.i=x.i,x.g&&(T.g=new Map(x.g),T.h=x.h),T}function Ls(x,T){return T=String(T),x.j&&(T=T.toLowerCase()),T}function Iu(x,T){T&&!x.j&&(oi(x),x.i=null,x.g.forEach(function(M,H){const Q=H.toLowerCase();H!=Q&&(w0(this,H),Tu(this,Q,M))},x)),x.j=T}function Sa(x,T){const M=new wa;if(o.Image){const H=new Image;H.onload=d(Ki,M,"TestLoadImage: loaded",!0,T,H),H.onerror=d(Ki,M,"TestLoadImage: error",!1,T,H),H.onabort=d(Ki,M,"TestLoadImage: abort",!1,T,H),H.ontimeout=d(Ki,M,"TestLoadImage: timeout",!1,T,H),o.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=x}else T(!1)}function Rd(x,T){const M=new wa,H=new AbortController,Q=setTimeout(()=>{H.abort(),Ki(M,"TestPingServer: timeout",!1,T)},1e4);fetch(x,{signal:H.signal}).then(ae=>{clearTimeout(Q),ae.ok?Ki(M,"TestPingServer: ok",!0,T):Ki(M,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Q),Ki(M,"TestPingServer: error",!1,T)})}function Ki(x,T,M,H,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),H(M)}catch{}}function Bs(){this.g=new u0}function ro(x){this.i=x.Sb||null,this.h=x.ab||!1}p(ro,f0),ro.prototype.g=function(){return new uc(this.i,this.h)};function uc(x,T){Rr.call(this),this.H=x,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(uc,Rr),t=uc.prototype,t.open=function(x,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=T,this.readyState=1,Ca(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(T.body=x),(this.H||o).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},t.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Ca(this)),this.g&&(this.readyState=3,Ca(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ou(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ou(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}t.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var T=x.value?x.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!x.done}))&&(this.response=this.responseText+=T)}x.done?Us(this):Ca(this),this.readyState==3&&Ou(this)}},t.Oa=function(x){this.g&&(this.response=this.responseText=x,Us(this))},t.Na=function(x){this.g&&(this.response=x,Us(this))},t.ga=function(){this.g&&Us(this)};function Us(x){x.readyState=4,x.l=null,x.j=null,x.B=null,Ca(x)}t.setRequestHeader=function(x,T){this.A.append(x,T)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],T=this.h.entries();for(var M=T.next();!M.done;)M=M.value,x.push(M[0]+": "+M[1]),M=T.next();return x.join(`\r
`)};function Ca(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function Xi(x){let T="";return ge(x,function(M,H){T+=H,T+=":",T+=M,T+=`\r
`}),T}function fc(x,T,M){e:{for(H in M){var H=!1;break e}H=!0}H||(M=Xi(M),typeof x=="string"?M!=null&&ko(M):Pt(x,T,M))}function Bt(x){Rr.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Bt,Rr);var no=/^https?$/i,Pd=["POST","PUT"];t=Bt.prototype,t.Fa=function(x){this.H=x},t.ea=function(x,T,M,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);T=T?T.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bd.g(),this.g.onreadystatechange=g(f(this.Ca,this));try{this.B=!0,this.g.open(T,String(x),!0),this.B=!1}catch(ae){dc(this,ae);return}if(x=M||"",M=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var Q in H)M.set(Q,H[Q]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ae of H.keys())M.set(ae,H.get(ae));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(M.keys()).find(ae=>ae.toLowerCase()=="content-type"),Q=o.FormData&&x instanceof o.FormData,!(Array.prototype.indexOf.call(Pd,T,void 0)>=0)||H||Q||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,ye]of M)this.g.setRequestHeader(ae,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(ae){dc(this,ae)}};function dc(x,T){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=T,x.o=5,Dd(x),jo(x)}function Dd(x){x.A||(x.A=!0,Wr(x,"complete"),Wr(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,Wr(this,"complete"),Wr(this,"abort"),jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jo(this,!0)),Bt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?hc(this):this.Xa())},t.Xa=function(){hc(this)};function hc(x){if(x.h&&typeof a<"u"){if(x.v&&Ta(x)==4)setTimeout(x.Ca.bind(x),0);else if(Wr(x,"readystatechange"),Ta(x)==4){x.h=!1;try{const ae=x.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var M;if(!(M=T)){var H;if(H=ae===0){let ye=String(x.D).match(x0)[1]||null;!ye&&o.self&&o.self.location&&(ye=o.self.location.protocol.slice(0,-1)),H=!no.test(ye?ye.toLowerCase():"")}M=H}if(M)Wr(x,"complete"),Wr(x,"success");else{x.o=6;try{var Q=Ta(x)>2?x.g.statusText:""}catch{Q=""}x.l=Q+" ["+x.ca()+"]",Dd(x)}}finally{jo(x)}}}}function jo(x,T){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const M=x.g;x.g=null,T||Wr(x,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ta(x){return x.g?x.g.readyState:0}t.ca=function(){try{return Ta(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(x){if(this.g){var T=this.g.responseText;return x&&T.indexOf(x)==0&&(T=T.substring(x.length)),my(T)}};function bn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Lo(x){const T={};x=(x.g&&Ta(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<x.length;H++){if(F(x[H]))continue;var M=v0(x[H]);const Q=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const ae=T[Q]||[];T[Q]=ae,ae.push(M)}Ie(T,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(x,T,M){return M&&M.internalChannelParams&&M.internalChannelParams[x]||T}function zs(x){this.za=0,this.i=[],this.j=new wa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=io("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=io("baseRetryDelayMs",5e3,x),this.Za=io("retryDelaySeedMs",1e4,x),this.Ta=io("forwardChannelMaxRetries",2,x),this.va=io("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new _d(x&&x.concurrentRequestLimit),this.Ba=new Bs,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=zs.prototype,t.ka=8,t.I=1,t.connect=function(x,T,M,H){Pr(0),this.W=x,this.H=T||{},M&&H!==void 0&&(this.H.OSID=M,this.H.OAID=H),this.F=this.X,this.J=R0(this,null,this.W),ao(this)};function Nd(x){if(Ru(x),x.I==3){var T=x.V++,M=Mr(x.J);if(Pt(M,"SID",x.M),Pt(M,"RID",T),Pt(M,"TYPE","terminate"),pc(x,M),T=new Ea(x,x.j,T),T.M=2,T.A=lc(Mr(M)),M=!1,o.navigator&&o.navigator.sendBeacon)try{M=o.navigator.sendBeacon(T.A.toString(),"")}catch{}!M&&o.Image&&(new Image().src=T.A,M=!0),M||(T.g=P0(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Ya(T)}O0(x)}function Fs(x){x.g&&(kd(x),x.g.cancel(),x.g=null)}function Ru(x){Fs(x),x.v&&(o.clearTimeout(x.v),x.v=null),Du(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&o.clearTimeout(x.m),x.m=null)}function ao(x){if(!wd(x.h)&&!x.m){x.m=!0;var T=x.Ea;k||N(),B||(k(),B=!0),R.add(T,x),x.D=0}}function Pu(x,T){return Ja(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=T.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Wa(f(x.Ea,x,T),I0(x,x.D)),x.D++,!0)}t.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const Q=new Ea(this,this.j,x);let ae=this.o;if(this.U&&(ae?(ae=G(ae),be(ae,this.U)):ae=this.U),this.u!==null||this.R||(Q.J=ae,ae=null),this.S)e:{for(var T=0,M=0;M<this.i.length;M++){t:{var H=this.i[M];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(T+=H,T>4096){T=M;break e}if(T===4096||M===this.i.length-1){T=M+1;break e}}T=1e3}else T=1e3;T=A0(this,Q,T),M=Mr(this.J),Pt(M,"RID",x),Pt(M,"CVER",22),this.G&&Pt(M,"X-HTTP-Session-Id",this.G),pc(this,M),ae&&(this.R?T="headers="+ko(Xi(ae))+"&"+T:this.u&&fc(M,this.u,ae)),Ed(this.h,Q),this.Ra&&Pt(M,"TYPE","init"),this.S?(Pt(M,"$req",T),Pt(M,"SID","null"),Q.U=!0,Xa(Q,M,null)):Xa(Q,M,T),this.I=2}}else this.I==3&&(x?Md(this,x):this.i.length==0||wd(this.h)||Md(this))};function Md(x,T){var M;T?M=T.l:M=x.V++;const H=Mr(x.J);Pt(H,"SID",x.M),Pt(H,"RID",M),Pt(H,"AID",x.K),pc(x,H),x.u&&x.o&&fc(H,x.u,x.o),M=new Ea(x,x.j,M,x.D+1),x.u===null&&(M.J=x.o),T&&(x.i=T.G.concat(x.i)),T=A0(x,M,1e3),M.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),Ed(x.h,M),Xa(M,H,T)}function pc(x,T){x.H&&ge(x.H,function(M,H){Pt(T,H,M)}),x.l&&ge({},function(M,H){Pt(T,H,M)})}function A0(x,T,M){M=Math.min(x.i.length,M);const H=x.l?f(x.l.Ka,x.l,x):null;e:{var Q=x.i;let Ke=-1;for(;;){const Ar=["count="+M];Ke==-1?M>0?(Ke=Q[0].g,Ar.push("ofs="+Ke)):Ke=0:Ar.push("ofs="+Ke);let wt=!0;for(let ir=0;ir<M;ir++){var ae=Q[ir].g;const Yi=Q[ir].map;if(ae-=Ke,ae<0)Ke=Math.max(0,Q[ir].g-100),wt=!1;else try{ae="req"+ae+"_"||"";try{var ye=Yi instanceof Map?Yi:Object.entries(Yi);for(const[so,Ia]of ye){let Oa=Ia;s(Ia)&&(Oa=Ns(Ia)),Ar.push(ae+so+"="+encodeURIComponent(Oa))}}catch(so){throw Ar.push(ae+"type="+encodeURIComponent("_badmap")),so}}catch{H&&H(Yi)}}if(wt){ye=Ar.join("&");break e}}ye=void 0}return x=x.i.splice(0,M),T.G=x,ye}function S0(x){if(!x.g&&!x.v){x.Y=1;var T=x.Da;k||N(),B||(k(),B=!0),R.add(T,x),x.A=0}}function gc(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Wa(f(x.Da,x),I0(x,x.A)),x.A++,!0)}t.Da=function(){if(this.v=null,C0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Wa(f(this.Wa,this),x)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pr(10),Fs(this),C0(this))};function kd(x){x.B!=null&&(o.clearTimeout(x.B),x.B=null)}function C0(x){x.g=new Ea(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var T=Mr(x.na);Pt(T,"RID","rpc"),Pt(T,"SID",x.M),Pt(T,"AID",x.K),Pt(T,"CI",x.F?"0":"1"),!x.F&&x.ia&&Pt(T,"TO",x.ia),Pt(T,"TYPE","xmlhttp"),pc(x,T),x.u&&x.o&&fc(T,x.u,x.o),x.O&&(x.g.H=x.O);var M=x.g;x=x.ba,M.M=1,M.A=lc(Mr(T)),M.u=null,M.R=!0,Eu(M,x)}t.Va=function(){this.C!=null&&(this.C=null,Fs(this),gc(this),Pr(19))};function Du(x){x.C!=null&&(o.clearTimeout(x.C),x.C=null)}function T0(x,T){var M=null;if(x.g==T){Du(x),kd(x),x.g=null;var H=2}else if(eo(x.h,T))M=T.G,Ad(x.h,T),H=1;else return;if(x.I!=0){if(T.o)if(H==1){M=T.u?T.u.length:0,T=Date.now()-T.F;var Q=x.D;H=wu(),Wr(H,new Ga(H,M)),ao(x)}else S0(x);else if(Q=T.m,Q==3||Q==0&&T.X>0||!(H==1&&Pu(x,T)||H==2&&gc(x)))switch(M&&M.length>0&&(T=x.h,T.i=T.i.concat(M)),Q){case 1:oo(x,5);break;case 4:oo(x,10);break;case 3:oo(x,6);break;default:oo(x,2)}}}function I0(x,T){let M=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(M*=2),M*T}function oo(x,T){if(x.j.info("Error code "+T),T==2){var M=f(x.bb,x),H=x.Ua;const Q=!H;H=new Ei(H||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ln(H,"https"),lc(H),Q?Sa(H.toString(),M):Rd(H.toString(),M)}else Pr(2);x.I=0,x.l&&x.l.pa(T),O0(x),Ru(x)}t.bb=function(x){x?(this.j.info("Successfully pinged google.com"),Pr(2)):(this.j.info("Failed to ping google.com"),Pr(1))};function O0(x){if(x.I=0,x.ja=[],x.l){const T=Sd(x.h);(T.length!=0||x.i.length!=0)&&(b(x.ja,T),b(x.ja,x.i),x.h.i.length=0,y(x.i),x.i.length=0),x.l.oa()}}function R0(x,T,M){var H=M instanceof Ei?Mr(M):new Ei(M);if(H.g!="")T&&(H.g=T+"."+H.g),Ms(H,H.u);else{var Q=o.location;H=Q.protocol,T=T?T+"."+Q.hostname:Q.hostname,Q=+Q.port;const ae=new Ei(null);H&&ln(ae,H),T&&(ae.g=T),Q&&Ms(ae,Q),M&&(ae.h=M),H=ae}return M=x.G,T=x.wa,M&&T&&Pt(H,M,T),Pt(H,"VER",x.ka),pc(x,H),H}function P0(x,T,M){if(T&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=x.Aa&&!x.ma?new Bt(new ro({ab:M})):new Bt(x.ma),T.Fa(x.L),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function D0(){}t=D0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Vs(){}Vs.prototype.g=function(x,T){return new Xn(x,T)};function Xn(x,T){Rr.call(this),this.g=new zs(T),this.l=x,this.h=T&&T.messageUrlParams||null,x=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(x?x["X-WebChannel-Content-Type"]=T.messageContentType:x={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(x?x["X-WebChannel-Client-Profile"]=T.sa:x={"X-WebChannel-Client-Profile":T.sa}),this.g.U=x,(x=T&&T.Qb)&&!F(x)&&(this.g.u=x),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!F(T)&&(this.g.G=T,x=this.h,x!==null&&T in x&&(x=this.h,T in x&&delete x[T])),this.j=new Bo(this)}p(Xn,Rr),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Nd(this.g)},Xn.prototype.o=function(x){var T=this.g;if(typeof x=="string"){var M={};M.__data__=x,x=M}else this.v&&(M={},M.__data__=Ns(x),x=M);T.i.push(new Nr(T.Ya++,x)),T.I==3&&ao(T)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Nd(this.g),delete this.g,Xn.Z.N.call(this)};function N0(x){xn.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var T=x.__sm__;if(T){e:{for(const M in T){x=M;break e}x=void 0}(this.i=x)&&(x=this.i,T=T!==null&&x in T?T[x]:void 0),this.data=T}else this.data=x}p(N0,xn);function M0(){Gi.call(this),this.status=1}p(M0,Gi);function Bo(x){this.g=x}p(Bo,D0),Bo.prototype.ra=function(){Wr(this.g,"a")},Bo.prototype.qa=function(x){Wr(this.g,new N0(x))},Bo.prototype.pa=function(x){Wr(this.g,new M0)},Bo.prototype.oa=function(){Wr(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,BD=function(){return new Vs},LD=function(){return wu()},jD=Er,R_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oc.NO_ERROR=0,oc.TIMEOUT=8,oc.HTTP_ERROR=6,y1=oc,xd.COMPLETE="complete",kD=xd,d0.EventType=_a,_a.OPEN="a",_a.CLOSE="b",_a.ERROR="c",_a.MESSAGE="d",Rr.prototype.listen=Rr.prototype.J,jh=d0,Bt.prototype.listenOnce=Bt.prototype.K,Bt.prototype.getLastError=Bt.prototype.Ha,Bt.prototype.getLastErrorCode=Bt.prototype.ya,Bt.prototype.getStatus=Bt.prototype.ca,Bt.prototype.getResponseJson=Bt.prototype.La,Bt.prototype.getResponseText=Bt.prototype.la,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Fa,MD=Bt}).apply(typeof Bg<"u"?Bg:typeof self<"u"?self:typeof window<"u"?window:{});const UI="@firebase/firestore",zI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zn.UNAUTHENTICATED=new zn(null),zn.GOOGLE_CREDENTIALS=new zn("google-credentials-uid"),zn.FIRST_PARTY=new zn("first-party-uid"),zn.MOCK_USER=new zn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new hE("@firebase/firestore");function hf(){return nu.logLevel}function Se(t,...e){if(nu.logLevel<=lt.DEBUG){const r=e.map(gE);nu.debug(`Firestore (${Qf}): ${t}`,...r)}}function ps(t,...e){if(nu.logLevel<=lt.ERROR){const r=e.map(gE);nu.error(`Firestore (${Qf}): ${t}`,...r)}}function Rf(t,...e){if(nu.logLevel<=lt.WARN){const r=e.map(gE);nu.warn(`Firestore (${Qf}): ${t}`,...r)}}function gE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,UD(t,n,r)}function UD(t,e,r){let n=`FIRESTORE (${Qf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw ps(n),new Error(n)}function Rt(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||UD(e,i,n)}function Ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ha{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(zn.UNAUTHENTICATED)))}shutdown(){}}class VV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable((()=>r(this.token.user)))}shutdown(){this.changeListener=null}}class HV{constructor(e){this.t=e,this.currentUser=zn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Rt(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let a=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ss,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},s=c=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>s(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?s(c):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ss)}}),0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Rt(typeof n.accessToken=="string",31837,{l:n}),new zD(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new zn(e)}}class $V{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=zn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qV{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new $V(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable((()=>r(zn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class FI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GV{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Rt(this.o===void 0,3512);const n=a=>{a.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new FI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Rt(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new FI(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=WV(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%62))}return n}}function ct(t,e){return t<e?-1:t>e?1:0}function P_(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),a=e.charAt(n);if(i!==a)return T2(i)===T2(a)?ct(i,a):T2(i)?1:-1}return ct(t.length,e.length)}const KV=55296,XV=57343;function T2(t){const e=t.charCodeAt(0);return e>=KV&&e<=XV}function Pf(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="__name__";class ho{constructor(e,r,n){r===void 0?r=0:r>e.length&&Fe(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Fe(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ho.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ho?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=ho.compareSegments(e.get(i),r.get(i));if(a!==0)return a}return ct(e.length,r.length)}static compareSegments(e,r){const n=ho.isNumericId(e),i=ho.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?ho.extractNumericId(e).compare(ho.extractNumericId(r)):P_(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ol.fromString(e.substring(4,e.length-2))}}class Kt extends ho{construct(e,r,n){return new Kt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new _e(ue.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new Kt(r)}static emptyPath(){return new Kt([])}}const YV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends ho{construct(e,r,n){return new Pn(e,r,n)}static isValidIdentifier(e){return YV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VI}static keyField(){return new Pn([VI])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new _e(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new _e(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new _e(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(n+=s,i++):(a(),i++)}if(a(),o)throw new _e(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(r)}static emptyPath(){return new Pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Kt.fromString(e))}static fromName(e){return new ke(Kt.fromString(e).popFirst(5))}static empty(){return new ke(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Kt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t,e,r){if(!r)throw new _e(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QV(t,e,r,n){if(e===!0&&n===!0)throw new _e(ue.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function HI(t){if(!ke.isDocumentKey(t))throw new _e(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $I(t){if(ke.isDocumentKey(t))throw new _e(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function om(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Fe(12329,{type:typeof t})}function yi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=om(t);throw new _e(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function ZV(t,e){if(e<=0)throw new _e(ue.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e){const r={typeString:t};return e&&(r.value=e),r}function Rp(t,e){if(!VD(t))throw new _e(ue.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(i&&typeof o!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new _e(ue.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=-62135596800,GI=1e6;class rr{static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*GI);return new rr(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new _e(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new _e(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<qI)throw new _e(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GI}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rp(e,rr._jsonSchema))return new rr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rr._jsonSchemaVersion="firestore/timestamp/1.0",rr._jsonSchema={type:Fr("string",rr._jsonSchemaVersion),seconds:Fr("number"),nanoseconds:Fr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new rr(0,0))}static max(){return new He(new rr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=-1;function JV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=He.fromTimestamp(n===1e9?new rr(r+1,0):new rr(r,n));return new jl(i,ke.empty(),e)}function eH(t){return new jl(t.readTime,t.key,ip)}class jl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new jl(He.min(),ke.empty(),ip)}static max(){return new jl(He.max(),ke.empty(),ip)}}function tH(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ke.comparator(t.documentKey,e.documentKey),r!==0?r:ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zf(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==rH)throw t;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new de(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof de?r:de.resolve(r)}catch(r){return de.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):de.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):de.reject(r)}static resolve(e){return new de(((r,n)=>{r(e)}))}static reject(e){return new de(((r,n)=>{n(e)}))}static waitFor(e){return new de(((r,n)=>{let i=0,a=0,o=!1;e.forEach((s=>{++i,s.next((()=>{++a,o&&a===i&&r()}),(c=>n(c)))})),o=!0,a===i&&r()}))}static or(e){let r=de.resolve(!1);for(const n of e)r=r.next((i=>i?de.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,a)=>{n.push(r.call(this,i,a))})),this.waitFor(n)}static mapArray(e,r){return new de(((n,i)=>{const a=e.length,o=new Array(a);let s=0;for(let c=0;c<a;c++){const f=c;r(e[f]).next((d=>{o[f]=d,++s,s===a&&n(o)}),(d=>i(d)))}}))}static doWhile(e,r){return new de(((n,i)=>{const a=()=>{e()===!0?r().next((()=>{a()}),i):n()};a()}))}}function iH(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Jf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=-1;function lm(t){return t==null}function z1(t){return t===0&&1/t==-1/0}function aH(t){return typeof t=="number"&&Number.isInteger(t)&&!z1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD="";function oH(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=WI(e)),e=sH(t.get(r),e);return WI(e)}function sH(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case HD:r+="";break;default:r+=a}}return r}function WI(t){return t+HD+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Wl(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function $D(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,r){this.comparator=e,this.root=r||On.EMPTY}insert(e,r){return new fr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ug(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ug(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ug(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ug(this.root,e,this.comparator,!0)}}class Ug{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??On.RED,this.left=i??On.EMPTY,this.right=a??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new On(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return On.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,r,n,i,a){return this}insert(e,r,n){return new On(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new XI(this.data.getIterator())}getIteratorFrom(e){return new XI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new rn(this.comparator);return r.data=e,r}}class XI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new ji([])}unionWith(e){let r=new rn(Pn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ji(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Pf(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new qD("Invalid base64 string: "+a):a}})(e);return new Nn(r)}static fromUint8Array(e){const r=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new Nn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const lH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ll(t){if(Rt(!!t,39018),typeof t=="string"){let e=0;const r=lH.exec(t);if(Rt(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ir(t.seconds),nanos:Ir(t.nanos)}}function Ir(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bl(t){return typeof t=="string"?Nn.fromBase64String(t):Nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="server_timestamp",WD="__type__",KD="__previous_value__",XD="__local_write_time__";function yE(t){return(t?.mapValue?.fields||{})[WD]?.stringValue===GD}function cm(t){const e=t.mapValue.fields[KD];return yE(e)?cm(e):e}function ap(t){const e=Ll(t.mapValue.fields[XD].timestampValue);return new rr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e,r,n,i,a,o,s,c,f,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const F1="(default)";class op{constructor(e,r){this.projectId=e,this.database=r||F1}static empty(){return new op("","")}get isDefaultDatabase(){return this.database===F1}isEqual(e){return e instanceof op&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="__type__",uH="__max__",zg={mapValue:{}},QD="__vector__",V1="value";function Ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yE(t)?4:dH(t)?9007199254740991:fH(t)?10:11:Fe(28295,{value:t})}function Eo(t,e){if(t===e)return!0;const r=Ul(t);if(r!==Ul(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ap(t).isEqual(ap(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ll(i.timestampValue),s=Ll(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Bl(i.bytesValue).isEqual(Bl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Ir(i.geoPointValue.latitude)===Ir(a.geoPointValue.latitude)&&Ir(i.geoPointValue.longitude)===Ir(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Ir(i.integerValue)===Ir(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=Ir(i.doubleValue),s=Ir(a.doubleValue);return o===s?z1(o)===z1(s):isNaN(o)&&isNaN(s)}return!1})(t,e);case 9:return Pf(t.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(KI(o)!==KI(s))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(s[c]===void 0||!Eo(o[c],s[c])))return!1;return!0})(t,e);default:return Fe(52216,{left:t})}}function sp(t,e){return(t.values||[]).find((r=>Eo(r,e)))!==void 0}function Df(t,e){if(t===e)return 0;const r=Ul(t),n=Ul(e);if(r!==n)return ct(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ct(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const s=Ir(a.integerValue||a.doubleValue),c=Ir(o.integerValue||o.doubleValue);return s<c?-1:s>c?1:s===c?0:isNaN(s)?isNaN(c)?0:-1:1})(t,e);case 3:return YI(t.timestampValue,e.timestampValue);case 4:return YI(ap(t),ap(e));case 5:return P_(t.stringValue,e.stringValue);case 6:return(function(a,o){const s=Bl(a),c=Bl(o);return s.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const s=a.split("/"),c=o.split("/");for(let f=0;f<s.length&&f<c.length;f++){const d=ct(s[f],c[f]);if(d!==0)return d}return ct(s.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const s=ct(Ir(a.latitude),Ir(o.latitude));return s!==0?s:ct(Ir(a.longitude),Ir(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return QI(t.arrayValue,e.arrayValue);case 10:return(function(a,o){const s=a.fields||{},c=o.fields||{},f=s[V1]?.arrayValue,d=c[V1]?.arrayValue,p=ct(f?.values?.length||0,d?.values?.length||0);return p!==0?p:QI(f,d)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===zg.mapValue&&o===zg.mapValue)return 0;if(a===zg.mapValue)return 1;if(o===zg.mapValue)return-1;const s=a.fields||{},c=Object.keys(s),f=o.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=P_(c[p],d[p]);if(g!==0)return g;const y=Df(s[c[p]],f[d[p]]);if(y!==0)return y}return ct(c.length,d.length)})(t.mapValue,e.mapValue);default:throw Fe(23264,{he:r})}}function YI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ct(t,e);const r=Ll(t),n=Ll(e),i=ct(r.seconds,n.seconds);return i!==0?i:ct(r.nanos,n.nanos)}function QI(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Df(r[i],n[i]);if(a)return a}return ct(r.length,n.length)}function Nf(t){return D_(t)}function D_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Ll(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Bl(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return ke.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=D_(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${D_(r.fields[o])}`;return i+"}"})(t.mapValue):Fe(61005,{value:t})}function x1(t){switch(Ul(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cm(t);return e?16+x1(e):16;case 5:return 2*t.stringValue.length;case 6:return Bl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,a)=>i+x1(a)),0)})(t.arrayValue);case 10:case 11:return(function(n){let i=0;return Wl(n.fields,((a,o)=>{i+=a.length+x1(o)})),i})(t.mapValue);default:throw Fe(13486,{value:t})}}function ZI(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function N_(t){return!!t&&"integerValue"in t}function xE(t){return!!t&&"arrayValue"in t}function JI(t){return!!t&&"nullValue"in t}function eO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function b1(t){return!!t&&"mapValue"in t}function fH(t){return(t?.mapValue?.fields||{})[YD]?.stringValue===QD}function Wh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wl(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=Wh(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Wh(t.arrayValue.values[r]);return e}return{...t}}function dH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!b1(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wh(r)}setAll(e){let r=Pn.emptyPath(),n={},i=[];e.forEach(((o,s)=>{if(!r.isImmediateParentOf(s)){const c=this.getFieldsMap(r);this.applyChanges(c,n,i),n={},i=[],r=s.popLast()}o?n[s.lastSegment()]=Wh(o):i.push(s.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());b1(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];b1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Wl(r,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new gi(Wh(this.value))}}function ZD(t){const e=[];return Wl(t.fields,((r,n)=>{const i=new Pn([r]);if(b1(n)){const a=ZD(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)})),new ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,r,n,i,a,o,s){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Fn(e,0,He.min(),He.min(),He.min(),gi.empty(),0)}static newFoundDocument(e,r,n,i){return new Fn(e,1,r,He.min(),n,i,0)}static newNoDocument(e,r){return new Fn(e,2,r,He.min(),He.min(),gi.empty(),0)}static newUnknownDocument(e,r){return new Fn(e,3,r,He.min(),He.min(),gi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,r){this.position=e,this.inclusive=r}}function tO(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=ke.comparator(ke.fromName(o.referenceValue),r.key):n=Df(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function rO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Eo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,r="asc"){this.field=e,this.dir=r}}function hH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{}class zr extends JD{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new gH(e,r,n):r==="array-contains"?new yH(e,n):r==="in"?new xH(e,n):r==="not-in"?new bH(e,n):r==="array-contains-any"?new _H(e,n):new zr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new vH(e,n):new mH(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Df(r,this.value)):r!==null&&Ul(this.value)===Ul(r)&&this.matchesComparison(Df(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fa extends JD{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Fa(e,r)}matches(e){return eN(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eN(t){return t.op==="and"}function tN(t){return pH(t)&&eN(t)}function pH(t){for(const e of t.filters)if(e instanceof Fa)return!1;return!0}function M_(t){if(t instanceof zr)return t.field.canonicalString()+t.op.toString()+Nf(t.value);if(tN(t))return t.filters.map((e=>M_(e))).join(",");{const e=t.filters.map((r=>M_(r))).join(",");return`${t.op}(${e})`}}function rN(t,e){return t instanceof zr?(function(n,i){return i instanceof zr&&n.op===i.op&&n.field.isEqual(i.field)&&Eo(n.value,i.value)})(t,e):t instanceof Fa?(function(n,i){return i instanceof Fa&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,o,s)=>a&&rN(o,i.filters[s])),!0):!1})(t,e):void Fe(19439)}function nN(t){return t instanceof zr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Nf(r.value)}`})(t):t instanceof Fa?(function(r){return r.op.toString()+" {"+r.getFilters().map(nN).join(" ,")+"}"})(t):"Filter"}class gH extends zr{constructor(e,r,n){super(e,r,n),this.key=ke.fromName(n.referenceValue)}matches(e){const r=ke.comparator(e.key,this.key);return this.matchesComparison(r)}}class vH extends zr{constructor(e,r){super(e,"in",r),this.keys=iN("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class mH extends zr{constructor(e,r){super(e,"not-in",r),this.keys=iN("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function iN(t,e){return(e.arrayValue?.values||[]).map((r=>ke.fromName(r.referenceValue)))}class yH extends zr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return xE(r)&&sp(r.arrayValue,this.value)}}class xH extends zr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&sp(this.value.arrayValue,r)}}class bH extends zr{constructor(e,r){super(e,"not-in",r)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!sp(this.value.arrayValue,r)}}class _H extends zr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!xE(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>sp(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e,r=null,n=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Te=null}}function nO(t,e=null,r=[],n=[],i=null,a=null,o=null){return new wH(t,e,r,n,i,a,o)}function bE(t){const e=Ge(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>M_(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),lm(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Nf(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Nf(n))).join(",")),e.Te=r}return e.Te}function _E(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!hH(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!rN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rO(t.startAt,e.startAt)&&rO(t.endAt,e.endAt)}function k_(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,r=null,n=[],i=[],a=null,o="F",s=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EH(t,e,r,n,i,a,o,s){return new ed(t,e,r,n,i,a,o,s)}function um(t){return new ed(t)}function iO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aN(t){return t.collectionGroup!==null}function Kh(t){const e=Ge(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new rn(Pn.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(s=s.add(f.field))}))})),s})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new lp(a,n))})),r.has(Pn.keyField().canonicalString())||e.Ie.push(new lp(Pn.keyField(),n))}return e.Ie}function mo(t){const e=Ge(t);return e.Ee||(e.Ee=AH(e,Kh(t))),e.Ee}function AH(t,e){if(t.limitType==="F")return nO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new lp(i.field,a)}));const r=t.endAt?new H1(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new H1(t.startAt.position,t.startAt.inclusive):null;return nO(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function j_(t,e){const r=t.filters.concat([e]);return new ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function $1(t,e,r){return new ed(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function fm(t,e){return _E(mo(t),mo(e))&&t.limitType===e.limitType}function oN(t){return`${bE(mo(t))}|lt:${t.limitType}`}function pf(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>nN(i))).join(", ")}]`),lm(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>Nf(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>Nf(i))).join(",")),`Target(${n})`})(mo(t))}; limitType=${t.limitType})`}function dm(t,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ke.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,i){for(const a of Kh(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(o,s,c){const f=tO(o,s,c);return o.inclusive?f<=0:f<0})(n.startAt,Kh(n),i)||n.endAt&&!(function(o,s,c){const f=tO(o,s,c);return o.inclusive?f>=0:f>0})(n.endAt,Kh(n),i))})(t,e)}function SH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sN(t){return(e,r)=>{let n=!1;for(const i of Kh(t)){const a=CH(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function CH(t,e,r){const n=t.field.isKeyField()?ke.comparator(e.key,r.key):(function(a,o,s){const c=o.data.field(a),f=s.data.field(a);return c!==null&&f!==null?Df(c,f):Fe(42886)})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,((r,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return $D(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH=new fr(ke.comparator);function gs(){return TH}const lN=new fr(ke.comparator);function Lh(...t){let e=lN;for(const r of t)e=e.insert(r.key,r);return e}function cN(t){let e=lN;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function zc(){return Xh()}function uN(){return Xh()}function Xh(){return new vu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const IH=new fr(ke.comparator),OH=new rn(ke.comparator);function ut(...t){let e=OH;for(const r of t)e=e.add(r);return e}const RH=new rn(ct);function PH(){return RH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z1(e)?"-0":e}}function fN(t){return{integerValue:""+t}}function dN(t,e){return aH(e)?fN(e):wE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this._=void 0}}function DH(t,e,r){return t instanceof cp?(function(i,a){const o={fields:{[WD]:{stringValue:GD},[XD]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&yE(a)&&(a=cm(a)),a&&(o.fields[KD]=a),{mapValue:o}})(r,e):t instanceof up?pN(t,e):t instanceof fp?gN(t,e):(function(i,a){const o=hN(i,a),s=aO(o)+aO(i.Ae);return N_(o)&&N_(i.Ae)?fN(s):wE(i.serializer,s)})(t,e)}function NH(t,e,r){return t instanceof up?pN(t,e):t instanceof fp?gN(t,e):r}function hN(t,e){return t instanceof dp?(function(n){return N_(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class cp extends hm{}class up extends hm{constructor(e){super(),this.elements=e}}function pN(t,e){const r=vN(e);for(const n of t.elements)r.some((i=>Eo(i,n)))||r.push(n);return{arrayValue:{values:r}}}class fp extends hm{constructor(e){super(),this.elements=e}}function gN(t,e){let r=vN(e);for(const n of t.elements)r=r.filter((i=>!Eo(i,n)));return{arrayValue:{values:r}}}class dp extends hm{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function aO(t){return Ir(t.integerValue||t.doubleValue)}function vN(t){return xE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,r){this.field=e,this.transform=r}}function MH(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof up&&i instanceof up||n instanceof fp&&i instanceof fp?Pf(n.elements,i.elements,Eo):n instanceof dp&&i instanceof dp?Eo(n.Ae,i.Ae):n instanceof cp&&i instanceof cp})(t.transform,e.transform)}class kH{constructor(e,r){this.version=e,this.transformResults=r}}class ga{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ga}static exists(e){return new ga(void 0,e)}static updateTime(e){return new ga(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _1(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pm{}function yN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new EE(t.key,ga.none()):new Pp(t.key,t.data,ga.none());{const r=t.data,n=gi.empty();let i=new rn(Pn.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new Kl(t.key,n,new ji(i.toArray()),ga.none())}}function jH(t,e,r){t instanceof Pp?(function(i,a,o){const s=i.value.clone(),c=sO(i.fieldTransforms,a,o.transformResults);s.setAll(c),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()})(t,e,r):t instanceof Kl?(function(i,a,o){if(!_1(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=sO(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(xN(i)),c.setAll(s),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,r):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,r)}function Yh(t,e,r,n){return t instanceof Pp?(function(a,o,s,c){if(!_1(a.precondition,o))return s;const f=a.value.clone(),d=lO(a.fieldTransforms,c,o);return f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null})(t,e,r,n):t instanceof Kl?(function(a,o,s,c){if(!_1(a.precondition,o))return s;const f=lO(a.fieldTransforms,c,o),d=o.data;return d.setAll(xN(a)),d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(a,o,s){return _1(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s})(t,e,r)}function LH(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=hN(n.transform,i||null);a!=null&&(r===null&&(r=gi.empty()),r.set(n.field,a))}return r||null}function oO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Pf(n,i,((a,o)=>MH(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pp extends pm{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Kl extends pm{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xN(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function sO(t,e,r){const n=new Map;Rt(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,s=e.data.field(a.field);n.set(a.field,NH(o,s,r[i]))}return n}function lO(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,DH(a,o,e))}return n}class EE extends pm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BH extends pm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&jH(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Yh(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Yh(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=uN();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=r.has(i.key)?null:s;const c=yN(o,s);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(He.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),ut())}isEqual(e){return this.batchId===e.batchId&&Pf(this.mutations,e.mutations,((r,n)=>oO(r,n)))&&Pf(this.baseMutations,e.baseMutations,((r,n)=>oO(r,n)))}}class AE{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Rt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return IH})();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new AE(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ur,dt;function VH(t){switch(t){case ue.OK:return Fe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Fe(15467,{code:t})}}function bN(t){if(t===void 0)return ps("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Ur.OK:return ue.OK;case Ur.CANCELLED:return ue.CANCELLED;case Ur.UNKNOWN:return ue.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return ue.INTERNAL;case Ur.UNAVAILABLE:return ue.UNAVAILABLE;case Ur.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Ur.NOT_FOUND:return ue.NOT_FOUND;case Ur.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Ur.ABORTED:return ue.ABORTED;case Ur.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Ur.DATA_LOSS:return ue.DATA_LOSS;default:return Fe(39323,{code:t})}}(dt=Ur||(Ur={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H=new Ol([4294967295,4294967295],0);function cO(t){const e=HH().encode(t),r=new ND;return r.update(e),new Uint8Array(r.digest())}function uO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ol([r,n],0),new Ol([i,a],0)]}class SE{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Bh(`Invalid padding: ${r}`);if(n<0)throw new Bh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Bh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Bh(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=Ol.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(Ol.fromNumber(n)));return i.compare($H)===1&&(i=new Ol([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=cO(e),[n,i]=uO(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);if(!this.we(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new SE(a,i,r);return n.forEach((s=>o.insert(s))),o}insert(e){if(this.ge===0)return;const r=cO(e),[n,i]=uO(r);for(let a=0;a<this.hashCount;a++){const o=this.ye(n,i,a);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Bh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Dp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new gm(He.min(),i,new fr(ct),gs(),ut())}}class Dp{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Dp(n,r,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class _N{constructor(e,r){this.targetId=e,this.Ce=r}}class wN{constructor(e,r,n=Nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class fO{constructor(){this.ve=0,this.Fe=dO(),this.Me=Nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),r=ut(),n=ut();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Fe(38017,{changeType:a})}})),new Dp(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=dO()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qH{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=Fg(),this.He=Fg(),this.Ye=new fr(ct)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,(r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach(((n,i)=>{this.rt(i)&&r(i)}))}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const a=i.target;if(k_(a))if(n===0){const o=new ke(a.path);this.et(r,o,Fn.newNoDocument(o,He.min()))}else Rt(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const s=this.ut(e),c=s?this.ct(s,e,o):1;if(c!==0){this.it(r);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,f)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,s;try{o=Bl(n).toUint8Array()}catch(c){if(c instanceof qD)return Rf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{s=new SE(o,i,a)}catch(c){return Rf(c instanceof Bh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return s.ge===0?null:s}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach((a=>{const o=this.Ge.ht(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.et(r,a,null),i++)})),i}Tt(e){const r=new Map;this.ze.forEach(((a,o)=>{const s=this.ot(o);if(s){if(a.current&&k_(s.target)){const c=new ke(s.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Fn.newNoDocument(c,e))}a.Be&&(r.set(o,a.ke()),a.qe())}}));let n=ut();this.He.forEach(((a,o)=>{let s=!0;o.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)})),s&&(n=n.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new gm(e,r,this.Ye,this.je,n);return this.je=gs(),this.Je=Fg(),this.He=Fg(),this.Ye=new fr(ct),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new fO,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new rn(ct),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new rn(ct),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Se("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fO),this.Ge.getRemoteKeysForTarget(e).forEach((r=>{this.et(e,r,null)}))}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Fg(){return new fr(ke.comparator)}function dO(){return new fr(ke.comparator)}const GH={asc:"ASCENDING",desc:"DESCENDING"},WH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KH={and:"AND",or:"OR"};class XH{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function L_(t,e){return t.useProto3Json||lm(e)?e:{value:e}}function q1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YH(t,e){return q1(t,e.toTimestamp())}function yo(t){return Rt(!!t,49232),He.fromTimestamp((function(r){const n=Ll(r);return new rr(n.seconds,n.nanos)})(t))}function CE(t,e){return B_(t,e).canonicalString()}function B_(t,e){const r=(function(i){return new Kt(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function AN(t){const e=Kt.fromString(t);return Rt(ON(e),10190,{key:e.toString()}),e}function U_(t,e){return CE(t.databaseId,e.path)}function I2(t,e){const r=AN(e);if(r.get(1)!==t.databaseId.projectId)throw new _e(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new _e(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ke(CN(r))}function SN(t,e){return CE(t.databaseId,e)}function QH(t){const e=AN(t);return e.length===4?Kt.emptyPath():CN(e)}function z_(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CN(t){return Rt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hO(t,e,r){return{name:U_(t,e),fields:r.value.mapValue.fields}}function ZH(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Fe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,d){return f.useProto3Json?(Rt(d===void 0||typeof d=="string",58123),Nn.fromBase64String(d||"")):(Rt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Nn.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&(function(f){const d=f.code===void 0?ue.UNKNOWN:bN(f.code);return new _e(d,f.message||"")})(o);r=new wN(n,i,a,s||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=I2(t,n.document.name),a=yo(n.document.updateTime),o=n.document.createTime?yo(n.document.createTime):He.min(),s=new gi({mapValue:{fields:n.document.fields}}),c=Fn.newFoundDocument(i,a,o,s),f=n.targetIds||[],d=n.removedTargetIds||[];r=new w1(f,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=I2(t,n.document),a=n.readTime?yo(n.readTime):He.min(),o=Fn.newNoDocument(i,a),s=n.removedTargetIds||[];r=new w1([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=I2(t,n.document),a=n.removedTargetIds||[];r=new w1([],a,i,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new FH(i,a),s=n.targetId;r=new _N(s,o)}}return r}function JH(t,e){let r;if(e instanceof Pp)r={update:hO(t,e.key,e.value)};else if(e instanceof EE)r={delete:U_(t,e.key)};else if(e instanceof Kl)r={update:hO(t,e.key,e.data),updateMask:l$(e.fieldMask)};else{if(!(e instanceof BH))return Fe(16599,{Vt:e.type});r={verify:U_(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,o){const s=o.transform;if(s instanceof cp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof up)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof fp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof dp)return{fieldPath:o.field.canonicalString(),increment:s.Ae};throw Fe(20930,{transform:o.transform})})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:YH(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Fe(27497)})(t,e.precondition)),r}function e$(t,e){return t&&t.length>0?(Rt(e!==void 0,14353),t.map((r=>(function(i,a){let o=i.updateTime?yo(i.updateTime):yo(a);return o.isEqual(He.min())&&(o=yo(a)),new kH(o,i.transformResults||[])})(r,e)))):[]}function t$(t,e){return{documents:[SN(t,e.path)]}}function r$(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=SN(t,i);const a=(function(f){if(f.length!==0)return IN(Fa.create(f,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const o=(function(f){if(f.length!==0)return f.map((d=>(function(g){return{field:gf(g.field),direction:a$(g.dir)}})(d)))})(e.orderBy);o&&(r.structuredQuery.orderBy=o);const s=L_(t,e.limit);return s!==null&&(r.structuredQuery.limit=s),e.startAt&&(r.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:r,parent:i}}function n$(t){let e=QH(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Rt(n===1,65062);const d=r.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=(function(p){const g=TN(p);return g instanceof Fa&&tN(g)?g.getFilters():[g]})(r.where));let o=[];r.orderBy&&(o=(function(p){return p.map((g=>(function(b){return new lp(vf(b.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(r.orderBy));let s=null;r.limit&&(s=(function(p){let g;return g=typeof p=="object"?p.value:p,lm(g)?null:g})(r.limit));let c=null;r.startAt&&(c=(function(p){const g=!!p.before,y=p.values||[];return new H1(y,g)})(r.startAt));let f=null;return r.endAt&&(f=(function(p){const g=!p.before,y=p.values||[];return new H1(y,g)})(r.endAt)),EH(e,i,o,a,s,"F",c,f)}function i$(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:i})}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function TN(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=vf(r.unaryFilter.field);return zr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=vf(r.unaryFilter.field);return zr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=vf(r.unaryFilter.field);return zr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vf(r.unaryFilter.field);return zr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}})(t):t.fieldFilter!==void 0?(function(r){return zr.create(vf(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Fa.create(r.compositeFilter.filters.map((n=>TN(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}})(r.compositeFilter.op))})(t):Fe(30097,{filter:t})}function a$(t){return GH[t]}function o$(t){return WH[t]}function s$(t){return KH[t]}function gf(t){return{fieldPath:t.canonicalString()}}function vf(t){return Pn.fromServerFormat(t.fieldPath)}function IN(t){return t instanceof zr?(function(r){if(r.op==="=="){if(eO(r.value))return{unaryFilter:{field:gf(r.field),op:"IS_NAN"}};if(JI(r.value))return{unaryFilter:{field:gf(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(eO(r.value))return{unaryFilter:{field:gf(r.field),op:"IS_NOT_NAN"}};if(JI(r.value))return{unaryFilter:{field:gf(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gf(r.field),op:o$(r.op),value:r.value}}})(t):t instanceof Fa?(function(r){const n=r.getFilters().map((i=>IN(i)));return n.length===1?n[0]:{compositeFilter:{op:s$(r.op),filters:n}}})(t):Fe(54877,{filter:t})}function l$(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function ON(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,r,n,i,a=He.min(),o=He.min(),s=Nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=c}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e){this.yt=e}}function u$(t){const e=n$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(){this.Cn=new d$}addToCollectionParentIndex(e,r){return this.Cn.add(r),de.resolve()}getCollectionParents(e,r){return de.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return de.resolve()}deleteFieldIndex(e,r){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,r){return de.resolve()}getDocumentsMatchingTarget(e,r){return de.resolve(null)}getIndexType(e,r){return de.resolve(0)}getFieldIndexes(e,r){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,r){return de.resolve(jl.min())}getMinOffsetFromCollectionGroup(e,r){return de.resolve(jl.min())}updateCollectionGroup(e,r,n){return de.resolve()}updateIndexEntries(e,r){return de.resolve()}}class d${constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new rn(Kt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new rn(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RN=41943040;class pi{static withCacheSize(e){return new pi(e,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi.DEFAULT_COLLECTION_PERCENTILE=10,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pi.DEFAULT=new pi(RN,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pi.DISABLED=new pi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Mf(0)}static cr(){return new Mf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="LruGarbageCollector",h$=1048576;function vO([t,e],[r,n]){const i=ct(t,r);return i===0?ct(e,n):i}class p${constructor(e){this.Ir=e,this.buffer=new rn(vO),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();vO(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class g${constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(gO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Jf(r)?Se(gO,"Ignoring IndexedDB error during garbage collection: ",r):await Zf(r)}await this.Vr(3e5)}))}}class v${constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return de.resolve(sm.ce);const n=new p$(r);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(pO)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pO):this.yr(e,r)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,a,o,s,c,f;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,s=Date.now(),this.removeTargets(e,n,r)))).next((p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(f=Date.now(),hf()<=lt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(c-s)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function m$(t,e){return new v$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(){this.changes=new vu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?de.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&Yh(n.mutation,i,ji.empty(),rr.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,ut()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=ut()){const i=zc();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((a=>{let o=Lh();return a.forEach(((s,c)=>{o=o.insert(s,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,r){const n=zc();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,ut())))}populateOverlays(e,r,n){const i=[];return n.forEach((a=>{r.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,s)=>{r.set(o,s)}))}))}computeViews(e,r,n,i){let a=gs();const o=Xh(),s=(function(){return Xh()})();return r.forEach(((c,f)=>{const d=n.get(f.key);i.has(f.key)&&(d===void 0||d.mutation instanceof Kl)?a=a.insert(f.key,f):d!==void 0?(o.set(f.key,d.mutation.getFieldMask()),Yh(d.mutation,f,d.mutation.getFieldMask(),rr.now())):o.set(f.key,ji.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((f,d)=>o.set(f,d))),r.forEach(((f,d)=>s.set(f,new x$(d,o.get(f)??null)))),s)))}recalculateAndSaveOverlays(e,r){const n=Xh();let i=new fr(((o,s)=>o-s)),a=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((o=>{for(const s of o)s.keys().forEach((c=>{const f=r.get(c);if(f===null)return;let d=n.get(c)||ji.empty();d=s.applyToLocalView(f,d),n.set(c,d);const p=(i.get(s.batchId)||ut()).add(c);i=i.insert(s.batchId,p)}))})).next((()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const c=s.getNext(),f=c.key,d=c.value,p=uN();d.forEach((g=>{if(!a.has(g)){const y=yN(r.get(g),n.get(g));y!==null&&p.set(g,y),a=a.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,f,p))}return de.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(o){return ke.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):aN(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):de.resolve(zc());let s=ip,c=a;return o.next((f=>de.forEach(f,((d,p)=>(s<p.largestBatchId&&(s=p.largestBatchId),a.get(d)?de.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,c,f,ut()))).next((d=>({batchId:s,changes:cN(d)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ke(r)).next((n=>{let i=Lh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=Lh();return this.indexManager.getCollectionParents(e,a).next((s=>de.forEach(s,(c=>{const f=(function(p,g){return new ed(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,n,i).next((d=>{d.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i)))).next((o=>{a.forEach(((c,f)=>{const d=f.getKey();o.get(d)===null&&(o=o.insert(d,Fn.newInvalidDocument(d)))}));let s=Lh();return o.forEach(((c,f)=>{const d=a.get(c);d!==void 0&&Yh(d.mutation,f,ji.empty(),rr.now()),dm(r,f)&&(s=s.insert(c,f))})),s}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return de.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:yo(i.createTime)}})(r)),de.resolve()}getNamedQuery(e,r){return de.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,(function(i){return{name:i.name,query:u$(i.bundledQuery),readTime:yo(i.readTime)}})(r)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(){this.overlays=new fr(ke.comparator),this.qr=new Map}getOverlay(e,r){return de.resolve(this.overlays.get(r))}getOverlays(e,r){const n=zc();return de.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,a)=>{this.St(e,r,a)})),de.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),de.resolve()}getOverlaysForCollection(e,r,n){const i=zc(),a=r.length+1,o=new ke(r.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const c=s.getNext().value,f=c.getKey();if(!r.isPrefixOf(f.path))break;f.path.length===a&&c.largestBatchId>n&&i.set(c.getKey(),c)}return de.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new fr(((f,d)=>f-d));const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===r&&f.largestBatchId>n){let d=a.get(f.largestBatchId);d===null&&(d=zc(),a=a.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const s=zc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>s.set(f,d))),!(s.size()>=i)););return de.resolve(s)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new zH(r,n));let a=this.qr.get(r);a===void 0&&(a=ut(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.Qr=new rn(dn.$r),this.Ur=new rn(dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new dn(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Gr(new dn(e,r))}zr(e,r){e.forEach((n=>this.removeReference(n,r)))}jr(e){const r=new ke(new Kt([])),n=new dn(r,e),i=new dn(r,e+1),a=[];return this.Ur.forEachInRange([n,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new ke(new Kt([])),n=new dn(r,e),i=new dn(r,e+1);let a=ut();return this.Ur.forEachInRange([n,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const r=new dn(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class dn{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return ke.comparator(e.key,r.key)||ct(e.Yr,r.Yr)}static Kr(e,r){return ct(e.Yr,r.Yr)||ke.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new rn(dn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UH(a,r,n,i);this.mutationQueue.push(o);for(const s of i)this.Zr=this.Zr.add(new dn(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,r){return de.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?mE:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new dn(r,0),i=new dn(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],(o=>{const s=this.Xr(o.Yr);a.push(s)})),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new rn(ct);return r.forEach((i=>{const a=new dn(i,0),o=new dn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(s=>{n=n.add(s.Yr)}))})),de.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;ke.isDocumentKey(a)||(a=a.child(""));const o=new dn(new ke(a),0);let s=new rn(ct);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!n.isPrefixOf(f)&&(f.length===i&&(s=s.add(c.Yr)),!0)}),o),de.resolve(this.ti(s))}ti(e){const r=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){Rt(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return de.forEach(r.mutations,(i=>{const a=new dn(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,r){const n=new dn(r,0),i=this.Zr.firstAfterOrEqual(n);return de.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.ri=e,this.docs=(function(){return new fr(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return de.resolve(n?n.document.mutableCopy():Fn.newInvalidDocument(r))}getEntries(e,r){let n=gs();return r.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Fn.newInvalidDocument(i))})),de.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=gs();const o=r.path,s=new ke(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||tH(eH(d),n)<=0||(i.has(d.key)||dm(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,r,n,i){Fe(9500)}ii(e,r){return de.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new C$(this)}getSize(e){return de.resolve(this.size)}}class C$ extends y${constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),de.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.persistence=e,this.si=new vu((r=>bE(r)),_E),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new TE,this.targetCount=0,this.ai=Mf.ur()}forEachTarget(e,r){return this.si.forEach(((n,i)=>r(i))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),de.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Mf(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,de.resolve()}updateTargetData(e,r){return this.Pr(r),de.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.si.forEach(((o,s)=>{s.sequenceNumber<=r&&n.get(s.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),de.waitFor(a).next((()=>i))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return de.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),de.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),de.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),de.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return de.resolve(n)}containsKey(e,r){return de.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,r){this.ui={},this.overlays={},this.ci=new sm(0),this.li=!1,this.li=!0,this.hi=new E$,this.referenceDelegate=e(this),this.Pi=new T$(this),this.indexManager=new f$,this.remoteDocumentCache=(function(i){return new S$(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new c$(r),this.Ii=new _$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new w$,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new A$(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){Se("MemoryPersistence","Starting transaction:",e);const i=new I$(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,r){return de.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,r))))}}class I$ extends nH{constructor(e){super(),this.currentSequenceNumber=e}}class IE{constructor(e){this.persistence=e,this.Ri=new TE,this.Vi=null}static mi(e){return new IE(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),de.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),de.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),de.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(n=>{const i=ke.fromPath(n);return this.gi(e,i).next((a=>{a||r.removeEntry(i,He.min())}))})).next((()=>(this.Vi=null,r.apply(e))))}updateLimboDocument(e,r){return this.gi(e,r).next((n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())}))}Ti(e){return 0}gi(e,r){return de.or([()=>de.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class G1{constructor(e,r){this.persistence=e,this.pi=new vu((n=>oH(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=m$(this,r)}static mi(e,r){return new G1(e,r)}Ei(){}di(e){return de.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}wr(e){let r=0;return this.pr(e,(n=>{r++})).next((()=>r))}pr(e,r){return de.forEach(this.pi,((n,i)=>this.br(e,n,i).next((a=>a?de.resolve():r(i)))))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,r).next((s=>{s||(n++,a.removeEntry(o,He.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=x1(e.data.value)),r}br(e,r,n){return de.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return de.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=ut(),i=ut();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new OE(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return EF()?8:iH(Gn())>0?6:4})()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.ys(e,r).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,r,i,n).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new O$;return this.Ss(e,r,o).next((s=>{if(a.result=s,this.Vs)return this.bs(e,r,o,s.size)}))})).next((()=>a.result))}bs(e,r,n,i){return n.documentReadCount<this.fs?(hf()<=lt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",pf(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(hf()<=lt.DEBUG&&Se("QueryEngine","Query:",pf(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(hf()<=lt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",pf(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mo(r))):de.resolve())}ys(e,r){if(iO(r))return de.resolve(null);let n=mo(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=$1(r,null,"F"),n=mo(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const o=ut(...a);return this.ps.getDocuments(e,o).next((s=>this.indexManager.getMinOffset(e,n).next((c=>{const f=this.Ds(r,s);return this.Cs(r,f,o,c.readTime)?this.ys(e,$1(r,null,"F")):this.vs(e,f,r,c)}))))})))))}ws(e,r,n,i){return iO(r)||i.isEqual(He.min())?de.resolve(null):this.ps.getDocuments(e,n).next((a=>{const o=this.Ds(r,a);return this.Cs(r,o,n,i)?de.resolve(null):(hf()<=lt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pf(r)),this.vs(e,o,r,JV(i,ip)).next((s=>s)))}))}Ds(e,r){let n=new rn(sN(e));return r.forEach(((i,a)=>{dm(e,a)&&(n=n.add(a))})),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,r,n){return hf()<=lt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",pf(r)),this.ps.getDocumentsMatchingQuery(e,r,jl.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((a=>(r.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="LocalStore",P$=3e8;class D${constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new fr(ct),this.xs=new vu((a=>bE(a)),_E),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.Ms)))}}function N$(t,e,r,n){return new D$(t,e,r,n)}async function DN(t,e){const r=Ge(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const o=[],s=[];let c=ut();for(const f of i){o.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of a){s.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next((f=>({Ls:f,removedBatchIds:o,addedBatchIds:s})))}))}))}function M$(t,e){const r=Ge(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return(function(s,c,f,d){const p=f.batch,g=p.keys();let y=de.resolve();return g.forEach((b=>{y=y.next((()=>d.getEntry(c,b))).next((w=>{const E=f.docVersions.get(b);Rt(E!==null,48541),w.version.compareTo(E)<0&&(p.applyToRemoteDocument(w,f),w.isValidDocument()&&(w.setReadTime(f.commitVersion),d.addEntry(w)))}))})),y.next((()=>s.mutationQueue.removeMutationBatch(c,p)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(s){let c=ut();for(let f=0;f<s.mutationResults.length;++f)s.mutationResults[f].transformResults.length>0&&(c=c.add(s.batch.mutations[f].key));return c})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function NN(t){const e=Ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Pi.getLastRemoteSnapshotVersion(r)))}function k$(t,e){const r=Ge(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const s=[];e.targetChanges.forEach(((d,p)=>{const g=i.get(p);if(!g)return;s.push(r.Pi.removeMatchingKeys(a,d.removedDocuments,p).next((()=>r.Pi.addMatchingKeys(a,d.addedDocuments,p))));let y=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Nn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,n)),i=i.insert(p,y),(function(w,E,S){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=P$?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0})(g,y,d)&&s.push(r.Pi.updateTargetData(a,y))}));let c=gs(),f=ut();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&s.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))})),s.push(j$(a,o,e.documentUpdates).next((d=>{c=d.ks,f=d.qs}))),!n.isEqual(He.min())){const d=r.Pi.getLastRemoteSnapshotVersion(a).next((p=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));s.push(d)}return de.waitFor(s).next((()=>o.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,c,f))).next((()=>c))})).then((a=>(r.Ms=i,a)))}function j$(t,e,r){let n=ut(),i=ut();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let o=gs();return r.forEach(((s,c)=>{const f=a.get(s);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(s)),c.isNoDocument()&&c.version.isEqual(He.min())?(e.removeEntry(s,c.readTime),o=o.insert(s,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),o=o.insert(s,c)):Se(RE,"Ignoring outdated watch update for ",s,". Current version:",f.version," Watch version:",c.version)})),{ks:o,qs:i}}))}function L$(t,e){const r=Ge(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=mE),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function B$(t,e){const r=Ge(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Pi.getTargetData(n,e).next((a=>a?(i=a,de.resolve(i)):r.Pi.allocateTargetId(n).next((o=>(i=new Al(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n}))}async function F_(t,e,r){const n=Ge(t),i=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(o=>n.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Jf(o))throw o;Se(RE,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function mO(t,e,r){const n=Ge(t);let i=He.min(),a=ut();return n.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,f,d){const p=Ge(c),g=p.xs.get(d);return g!==void 0?de.resolve(p.Ms.get(g)):p.Pi.getTargetData(f,d)})(n,o,mo(e)).next((s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,s.targetId).next((c=>{a=c}))})).next((()=>n.Fs.getDocumentsMatchingQuery(o,e,r?i:He.min(),r?a:ut()))).next((s=>(U$(n,SH(e),s),{documents:s,Qs:a})))))}function U$(t,e,r){let n=t.Os.get(e)||He.min();r.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.Os.set(e,n)}class yO{constructor(){this.activeTargetIds=PH()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z${constructor(){this.Mo=new yO,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yO,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="ConnectivityMonitor";class bO{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(xO,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(xO,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vg=null;function V_(){return Vg===null?Vg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vg++,"0x"+Vg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="RestConnection",V$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class H${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===F1?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,a){const o=V_(),s=this.zo(e,r.toUriEncodedString());Se(O2,`Sending RPC '${e}' ${o}:`,s,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:f}=new URL(s),d=Oo(f);return this.Jo(e,s,c,n,d).then((p=>(Se(O2,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Rf(O2,`RPC '${e}' ${o} failed with error: `,p,"url: ",s,"request:",n),p}))}Ho(e,r,n,i,a,o){return this.Go(e,r,n,i,a)}jo(e,r,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qf})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((i,a)=>e[a]=i)),n&&n.headers.forEach(((i,a)=>e[a]=i))}zo(e,r){const n=V$[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="WebChannelConnection";class q$ extends H${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,a){const o=V_();return new Promise(((s,c)=>{const f=new MD;f.setWithCredentials(!0),f.listenOnce(kD.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case y1.NO_ERROR:const p=f.getResponseJson();Se(Ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case y1.TIMEOUT:Se(Ln,`RPC '${e}' ${o} timed out`),c(new _e(ue.DEADLINE_EXCEEDED,"Request time out"));break;case y1.HTTP_ERROR:const g=f.getStatus();if(Se(Ln,`RPC '${e}' ${o} failed with status:`,g,"response text:",f.getResponseText()),g>0){let y=f.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y?.error;if(b&&b.status&&b.message){const w=(function(S){const I=S.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(I)>=0?I:ue.UNKNOWN})(b.status);c(new _e(w,b.message))}else c(new _e(ue.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new _e(ue.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:o,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Se(Ln,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(i);Se(Ln,`RPC '${e}' ${o} sending request:`,i),f.send(r,"POST",d,n,15)}))}T_(e,r,n){const i=V_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BD(),s=LD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=a.join("");Se(Ln,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);this.I_(p);let g=!1,y=!1;const b=new $$({Yo:E=>{y?Se(Ln,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Se(Ln,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Se(Ln,`RPC '${e}' stream ${i} sending:`,E),p.send(E))},Zo:()=>p.close()}),w=(E,S,I)=>{E.listen(S,(O=>{try{I(O)}catch(D){setTimeout((()=>{throw D}),0)}}))};return w(p,jh.EventType.OPEN,(()=>{y||(Se(Ln,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),w(p,jh.EventType.CLOSE,(()=>{y||(y=!0,Se(Ln,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(p))})),w(p,jh.EventType.ERROR,(E=>{y||(y=!0,Rf(Ln,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new _e(ue.UNAVAILABLE,"The operation could not be completed")))})),w(p,jh.EventType.MESSAGE,(E=>{if(!y){const S=E.data[0];Rt(!!S,16349);const I=S,O=I?.error||I[0]?.error;if(O){Se(Ln,`RPC '${e}' stream ${i} received error:`,O);const D=O.status;let k=(function(N){const L=Ur[N];if(L!==void 0)return bN(L)})(D),B=O.message;k===void 0&&(k=ue.INTERNAL,B="Unknown error status: "+D+" with message "+O.message),y=!0,b.a_(new _e(k,B)),p.close()}else Se(Ln,`RPC '${e}' stream ${i} received:`,S),b.u_(S)}})),w(s,jD.STAT_EVENT,(E=>{E.stat===R_.PROXY?Se(Ln,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===R_.NOPROXY&&Se(Ln,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((r=>r===e))}}function R2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t){return new XH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,r,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="PersistentStream";class kN{constructor(e,r,n,i,a,o,s,c){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MN(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ue.RESOURCE_EXHAUSTED?(ps(r.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===r&&this.G_(n,i)}),(n=>{e((()=>{const i=new _e(ue.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(_O,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget((()=>this.D_===e?r():(Se(_O,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class G$ extends kN{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=ZH(this.serializer,e),n=(function(a){if(!("targetChange"in a))return He.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?yo(o.readTime):He.min()})(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=z_(this.serializer),r.addTarget=(function(a,o){let s;const c=o.target;if(s=k_(c)?{documents:t$(a,c)}:{query:r$(a,c).ft},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=EN(a,o.resumeToken);const f=L_(a,o.expectedCount);f!==null&&(s.expectedCount=f)}else if(o.snapshotVersion.compareTo(He.min())>0){s.readTime=q1(a,o.snapshotVersion.toTimestamp());const f=L_(a,o.expectedCount);f!==null&&(s.expectedCount=f)}return s})(this.serializer,e);const n=i$(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=z_(this.serializer),r.removeTarget=e,this.q_(r)}}class W$ extends kN{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=e$(e.writeResults,e.commitTime),n=yo(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=z_(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>JH(this.serializer,n)))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${}class X$ extends K${constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new _e(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,B_(r,n),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new _e(ue.UNKNOWN,a.toString())}))}Ho(e,r,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Ho(e,B_(r,n),i,o,s,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ue.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Y${constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(r),this.aa=!1):Se("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="RemoteStore";class Q${constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{n.enqueueAndForget((async()=>{mu(this)&&(Se(iu,"Restarting streams for network reachability change."),await(async function(c){const f=Ge(c);f.Ea.add(4),await Np(f),f.Ra.set("Unknown"),f.Ea.delete(4),await mm(f)})(this))}))})),this.Ra=new Y$(n,i)}}async function mm(t){if(mu(t))for(const e of t.da)await e(!0)}async function Np(t){for(const e of t.da)await e(!1)}function jN(t,e){const r=Ge(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),ME(r)?NE(r):td(r).O_()&&DE(r,e))}function PE(t,e){const r=Ge(t),n=td(r);r.Ia.delete(e),n.O_()&&LN(r,e),r.Ia.size===0&&(n.O_()?n.L_():mu(r)&&r.Ra.set("Unknown"))}function DE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}td(t).Y_(e)}function LN(t,e){t.Va.Ue(e),td(t).Z_(e)}function NE(t){t.Va=new qH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),td(t).start(),t.Ra.ua()}function ME(t){return mu(t)&&!td(t).x_()&&t.Ia.size>0}function mu(t){return Ge(t).Ea.size===0}function BN(t){t.Va=void 0}async function Z$(t){t.Ra.set("Online")}async function J$(t){t.Ia.forEach(((e,r)=>{DE(t,e)}))}async function eq(t,e){BN(t),ME(t)?(t.Ra.ha(e),NE(t)):t.Ra.set("Unknown")}async function tq(t,e,r){if(t.Ra.set("Online"),e instanceof wN&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ia.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ia.delete(s),i.Va.removeTarget(s))})(t,e)}catch(n){Se(iu,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await W1(t,n)}else if(e instanceof w1?t.Va.Ze(e):e instanceof _N?t.Va.st(e):t.Va.tt(e),!r.isEqual(He.min()))try{const n=await NN(t.localStore);r.compareTo(n)>=0&&await(function(a,o){const s=a.Va.Tt(o);return s.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(f);d&&a.Ia.set(f,d.withResumeToken(c.resumeToken,o))}})),s.targetMismatches.forEach(((c,f)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(Nn.EMPTY_BYTE_STRING,d.snapshotVersion)),LN(a,c);const p=new Al(d.target,c,f,d.sequenceNumber);DE(a,p)})),a.remoteSyncer.applyRemoteEvent(s)})(t,r)}catch(n){Se(iu,"Failed to raise snapshot:",n),await W1(t,n)}}async function W1(t,e,r){if(!Jf(e))throw e;t.Ea.add(1),await Np(t),t.Ra.set("Offline"),r||(r=()=>NN(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Se(iu,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await mm(t)}))}function UN(t,e){return e().catch((r=>W1(t,r,e)))}async function ym(t){const e=Ge(t),r=zl(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:mE;for(;rq(e);)try{const i=await L$(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,nq(e,i)}catch(i){await W1(e,i)}zN(e)&&FN(e)}function rq(t){return mu(t)&&t.Ta.length<10}function nq(t,e){t.Ta.push(e);const r=zl(t);r.O_()&&r.X_&&r.ea(e.mutations)}function zN(t){return mu(t)&&!zl(t).x_()&&t.Ta.length>0}function FN(t){zl(t).start()}async function iq(t){zl(t).ra()}async function aq(t){const e=zl(t);for(const r of t.Ta)e.ea(r.mutations)}async function oq(t,e,r){const n=t.Ta.shift(),i=AE.from(n,e,r);await UN(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await ym(t)}async function sq(t,e){e&&zl(t).X_&&await(async function(n,i){if((function(o){return VH(o)&&o!==ue.ABORTED})(i.code)){const a=n.Ta.shift();zl(n).B_(),await UN(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await ym(n)}})(t,e),zN(t)&&FN(t)}async function wO(t,e){const r=Ge(t);r.asyncQueue.verifyOperationInProgress(),Se(iu,"RemoteStore received new credentials");const n=mu(r);r.Ea.add(3),await Np(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await mm(r)}async function lq(t,e){const r=Ge(t);e?(r.Ea.delete(2),await mm(r)):e||(r.Ea.add(2),await Np(r),r.Ra.set("Unknown"))}function td(t){return t.ma||(t.ma=(function(r,n,i){const a=Ge(r);return a.sa(),new G$(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:Z$.bind(null,t),t_:J$.bind(null,t),r_:eq.bind(null,t),H_:tq.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),ME(t)?NE(t):t.Ra.set("Unknown")):(await t.ma.stop(),BN(t))}))),t.ma}function zl(t){return t.fa||(t.fa=(function(r,n,i){const a=Ge(r);return a.sa(),new W$(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:iq.bind(null,t),r_:sq.bind(null,t),ta:aq.bind(null,t),na:oq.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await ym(t)):(await t.fa.stop(),t.Ta.length>0&&(Se(iu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,s=new kE(e,r,o,i,a);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jE(t,e){if(ps("AsyncQueue",`${e}: ${t}`),Jf(t))return new _e(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{static emptySet(e){return new bf(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||ke.comparator(r.key,n.key):(r,n)=>ke.comparator(r.key,n.key),this.keyedMap=Lh(),this.sortedSet=new fr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof bf)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new bf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.ga=new fr(ke.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal(((r,n)=>{e.push(n)})),e}}class kf{constructor(e,r,n,i,a,o,s,c,f){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach((s=>{o.push({type:0,doc:s})})),new kf(e,r,bf.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class uq{constructor(){this.queries=AO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Ge(r),a=i.queries;i.queries=AO(),a.forEach(((o,s)=>{for(const c of s.Sa)c.onError(n)}))})(this,new _e(ue.ABORTED,"Firestore shutting down"))}}function AO(){return new vu((t=>oN(t)),fm)}async function LE(t,e){const r=Ge(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new cq,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(i,!0);break;case 1:a.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const s=jE(o,`Initialization of query '${pf(e.query)}' failed`);return void e.onError(s)}r.queries.set(i,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&UE(r)}async function BE(t,e){const r=Ge(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function fq(t,e){const r=Ge(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const s of o.Sa)s.Fa(i)&&(n=!0);o.wa=i}}n&&UE(r)}function dq(t,e,r){const n=Ge(t),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(r);n.queries.delete(e)}function UE(t){t.Ca.forEach((e=>{e.next()}))}var H_,SO;(SO=H_||(H_={})).Ma="default",SO.Cache="cache";class zE{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new kf(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=kf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==H_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.key=e}}class HN{constructor(e){this.key=e}}class hq{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=sN(e),this.tu=new bf(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new EO,i=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,s=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const g=i.get(d),y=dm(this.query,p)?p:null,b=!!g&&this.mutatedKeys.has(g.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;g&&y?g.data.isEqual(y.data)?b!==w&&(n.track({type:3,doc:y}),E=!0):this.su(g,y)||(n.track({type:2,doc:y}),E=!0,(c&&this.eu(y,c)>0||f&&this.eu(y,f)<0)&&(s=!0)):!g&&y?(n.track({type:0,doc:y}),E=!0):g&&!y&&(n.track({type:1,doc:g}),E=!0,(c||f)&&(s=!0)),E&&(y?(o=o.add(y),a=w?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:s,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,p)=>(function(y,b){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:E})}};return w(y)-w(b)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(n),i=i??!1;const s=r&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,o.length!==0||f?{snapshot:new kf(this.query,e.tu,a,o,e.mutatedKeys,c===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((r=>this.Ya=this.Ya.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ya=this.Ya.delete(r))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ut(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const r=[];return e.forEach((n=>{this.Xa.has(n)||r.push(new HN(n))})),this.Xa.forEach((n=>{e.has(n)||r.push(new VN(n))})),r}cu(e){this.Ya=e.Qs,this.Xa=ut();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return kf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const FE="SyncEngine";class pq{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class gq{constructor(e){this.key=e,this.hu=!1}}class vq{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vu((s=>oN(s)),fm),this.Iu=new Map,this.Eu=new Set,this.du=new fr(ke.comparator),this.Au=new Map,this.Ru=new TE,this.Vu={},this.mu=new Map,this.fu=Mf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function mq(t,e,r=!0){const n=XN(t);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await $N(n,e,r,!0),i}async function yq(t,e){const r=XN(t);await $N(r,e,!0,!1)}async function $N(t,e,r,n){const i=await B$(t.localStore,mo(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let s;return n&&(s=await xq(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&jN(t.remoteStore,i),s}async function xq(t,e,r,n,i){t.pu=(p,g,y)=>(async function(w,E,S,I){let O=E.view.ru(S);O.Cs&&(O=await mO(w.localStore,E.query,!1).then((({documents:R})=>E.view.ru(R,O))));const D=I&&I.targetChanges.get(E.targetId),k=I&&I.targetMismatches.get(E.targetId)!=null,B=E.view.applyChanges(O,w.isPrimaryClient,D,k);return TO(w,E.targetId,B.au),B.snapshot})(t,p,g,y);const a=await mO(t.localStore,e,!0),o=new hq(e,a.Qs),s=o.ru(a.documents),c=Dp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),f=o.applyChanges(s,t.isPrimaryClient,c);TO(t,r,f.au);const d=new pq(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),f.snapshot}async function bq(t,e,r){const n=Ge(t),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter((o=>!fm(o,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await F_(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&PE(n.remoteStore,i.targetId),$_(n,i.targetId)})).catch(Zf)):($_(n,i.targetId),await F_(n.localStore,i.targetId,!0))}async function _q(t,e){const r=Ge(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),PE(r.remoteStore,n.targetId))}async function wq(t,e,r){const n=Oq(t);try{const i=await(function(o,s){const c=Ge(o),f=rr.now(),d=s.reduce(((y,b)=>y.add(b.key)),ut());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let b=gs(),w=ut();return c.Ns.getEntries(y,d).next((E=>{b=E,b.forEach(((S,I)=>{I.isValidDocument()||(w=w.add(S))}))})).next((()=>c.localDocuments.getOverlayedDocuments(y,b))).next((E=>{p=E;const S=[];for(const I of s){const O=LH(I,p.get(I.key).overlayedDocument);O!=null&&S.push(new Kl(I.key,O,ZD(O.value.mapValue),ga.exists(!0)))}return c.mutationQueue.addMutationBatch(y,f,S,s)})).next((E=>{g=E;const S=E.applyToLocalDocumentSet(p,w);return c.documentOverlayCache.saveOverlays(y,E.batchId,S)}))})).then((()=>({batchId:g.batchId,changes:cN(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(o,s,c){let f=o.Vu[o.currentUser.toKey()];f||(f=new fr(ct)),f=f.insert(s,c),o.Vu[o.currentUser.toKey()]=f})(n,i.batchId,r),await Mp(n,i.changes),await ym(n.remoteStore)}catch(i){const a=jE(i,"Failed to persist write");r.reject(a)}}async function qN(t,e){const r=Ge(t);try{const n=await k$(r.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=r.Au.get(a);o&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Rt(o.hu,14607):i.removedDocuments.size>0&&(Rt(o.hu,42227),o.hu=!1))})),await Mp(r,n,e)}catch(n){await Zf(n)}}function CO(t,e,r){const n=Ge(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach(((a,o)=>{const s=o.view.va(e);s.snapshot&&i.push(s.snapshot)})),(function(o,s){const c=Ge(o);c.onlineState=s;let f=!1;c.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(s)&&(f=!0)})),f&&UE(c)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Eq(t,e,r){const n=Ge(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),a=i&&i.key;if(a){let o=new fr(ke.comparator);o=o.insert(a,Fn.newNoDocument(a,He.min()));const s=ut().add(a),c=new gm(He.min(),new Map,new fr(ct),o,s);await qN(n,c),n.du=n.du.remove(a),n.Au.delete(e),VE(n)}else await F_(n.localStore,e,!1).then((()=>$_(n,e,r))).catch(Zf)}async function Aq(t,e){const r=Ge(t),n=e.batch.batchId;try{const i=await M$(r.localStore,e);WN(r,n,null),GN(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Mp(r,i)}catch(i){await Zf(i)}}async function Sq(t,e,r){const n=Ge(t);try{const i=await(function(o,s){const c=Ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return c.mutationQueue.lookupMutationBatch(f,s).next((p=>(Rt(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,s))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>c.localDocuments.getDocuments(f,d)))}))})(n.localStore,e);WN(n,e,r),GN(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Mp(n,i)}catch(i){await Zf(i)}}function GN(t,e){(t.mu.get(e)||[]).forEach((r=>{r.resolve()})),t.mu.delete(e)}function WN(t,e,r){const n=Ge(t);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function $_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((n=>{t.Ru.containsKey(n)||KN(t,n)}))}function KN(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(PE(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),VE(t))}function TO(t,e,r){for(const n of r)n instanceof VN?(t.Ru.addReference(n.key,e),Cq(t,n)):n instanceof HN?(Se(FE,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||KN(t,n.key)):Fe(19791,{wu:n})}function Cq(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(Se(FE,"New document in limbo: "+r),t.Eu.add(n),VE(t))}function VE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new ke(Kt.fromString(e)),n=t.fu.next();t.Au.set(n,new gq(r)),t.du=t.du.insert(r,n),jN(t.remoteStore,new Al(mo(um(r.path)),n,"TargetPurposeLimboResolution",sm.ce))}}async function Mp(t,e,r){const n=Ge(t),i=[],a=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach(((s,c)=>{o.push(n.pu(c,e,r).then((f=>{if((f||r)&&n.isPrimaryClient){const d=f?!f.fromCache:r?.targetChanges.get(c.targetId)?.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(f){i.push(f);const d=OE.As(c.targetId,f);a.push(d)}})))})),await Promise.all(o),n.Pu.H_(i),await(async function(c,f){const d=Ge(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>de.forEach(f,(g=>de.forEach(g.Es,(y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y))).next((()=>de.forEach(g.ds,(y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))))))}catch(p){if(!Jf(p))throw p;Se(RE,"Failed to update sequence numbers: "+p)}for(const p of f){const g=p.targetId;if(!p.fromCache){const y=d.Ms.get(g),b=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(g,w)}}})(n.localStore,a))}async function Tq(t,e){const r=Ge(t);if(!r.currentUser.isEqual(e)){Se(FE,"User change. New user:",e.toKey());const n=await DN(r.localStore,e);r.currentUser=e,(function(a,o){a.mu.forEach((s=>{s.forEach((c=>{c.reject(new _e(ue.CANCELLED,o))}))})),a.mu.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Mp(r,n.Ls)}}function Iq(t,e){const r=Ge(t),n=r.Au.get(e);if(n&&n.hu)return ut().add(n.key);{let i=ut();const a=r.Iu.get(e);if(!a)return i;for(const o of a){const s=r.Tu.get(o);i=i.unionWith(s.view.nu)}return i}}function XN(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Iq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Eq.bind(null,e),e.Pu.H_=fq.bind(null,e.eventManager),e.Pu.yu=dq.bind(null,e.eventManager),e}function Oq(t){const e=Ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Aq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sq.bind(null,e),e}class K1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return N$(this.persistence,new R$,e.initialUser,this.serializer)}Cu(e){return new PN(IE.mi,this.serializer)}Du(e){return new z$}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}K1.provider={build:()=>new K1};class Rq extends K1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Rt(this.persistence.referenceDelegate instanceof G1,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new g$(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?pi.withCacheSize(this.cacheSizeBytes):pi.DEFAULT;return new PN((n=>G1.mi(n,r)),this.serializer)}}class q_{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>CO(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tq.bind(null,this.syncEngine),await lq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uq})()}createDatastore(e){const r=vm(e.databaseInfo.databaseId),n=(function(a){return new q$(a)})(e.databaseInfo);return(function(a,o,s,c){return new X$(a,o,s,c)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,a,o,s){return new Q$(n,i,a,o,s)})(this.localStore,this.datastore,e.asyncQueue,(r=>CO(this.syncEngine,r,0)),(function(){return bO.v()?new bO:new F$})())}createSyncEngine(e,r){return(function(i,a,o,s,c,f,d){const p=new vq(i,a,o,s,c,f);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){const n=Ge(r);Se(iu,"RemoteStore shutting down."),n.Ea.add(5),await Np(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}q_.provider={build:()=>new q_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="FirestoreClient";class Pq{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=zn.UNAUTHENTICATED,this.clientId=vE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async o=>{Se(Fl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,(o=>(Se(Fl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=jE(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function P2(t,e){t.asyncQueue.verifyOperationInProgress(),Se(Fl,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await DN(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function IO(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Dq(t);Se(Fl,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>wO(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>wO(e.remoteStore,i))),t._onlineComponents=e}async function Dq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Se(Fl,"Using user provided OfflineComponentProvider");try{await P2(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;Rf("Error using user provided cache. Falling back to memory cache: "+r),await P2(t,new K1)}}else Se(Fl,"Using default OfflineComponentProvider"),await P2(t,new Rq(void 0));return t._offlineComponents}async function YN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Se(Fl,"Using user provided OnlineComponentProvider"),await IO(t,t._uninitializedComponentsProvider._online)):(Se(Fl,"Using default OnlineComponentProvider"),await IO(t,new q_))),t._onlineComponents}function Nq(t){return YN(t).then((e=>e.syncEngine))}async function X1(t){const e=await YN(t),r=e.eventManager;return r.onListen=mq.bind(null,e.syncEngine),r.onUnlisten=bq.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=yq.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=_q.bind(null,e.syncEngine),r}function Mq(t,e,r={}){const n=new ss;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,s,c,f){const d=new HE({next:g=>{d.Nu(),o.enqueueAndForget((()=>BE(a,p)));const y=g.docs.has(s);!y&&g.fromCache?f.reject(new _e(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?f.reject(new _e(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new zE(um(s.path),d,{includeMetadataChanges:!0,qa:!0});return LE(a,p)})(await X1(t),t.asyncQueue,e,r,n))),n.promise}function kq(t,e,r={}){const n=new ss;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,s,c,f){const d=new HE({next:g=>{d.Nu(),o.enqueueAndForget((()=>BE(a,p))),g.fromCache&&c.source==="server"?f.reject(new _e(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:g=>f.reject(g)}),p=new zE(s,d,{includeMetadataChanges:!0,qa:!0});return LE(a,p)})(await X1(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="firestore.googleapis.com",RO=!0;class PO{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZN,this.ssl=RO}else this.host=e.host,this.ssl=e.ssl??RO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h$)throw new _e(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QN(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new _e(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new _e(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new _e(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xm{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new FV;switch(n.type){case"firstParty":return new qV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new _e(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=OO.get(r);n&&(Se("ComponentProvider","Removing Datastore"),OO.delete(r),n.terminate())})(this),Promise.resolve()}}function jq(t,e,r,n={}){t=yi(t,xm);const i=Oo(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},s=`${e}:${r}`;i&&(nm(`https://${s}`),im("Firestore",!0)),a.host!==ZN&&a.host!==s&&Rf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:s,ssl:i,emulatorOptions:n};if(!ru(c,o)&&(t._setSettings(c),n.mockUserToken)){let f,d;if(typeof n.mockUserToken=="string")f=n.mockUserToken,d=zn.MOCK_USER;else{f=TD(n.mockUserToken,t._app?.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new _e(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new zn(p)}t._authCredentials=new VV(new zD(f,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class mr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mr(this.firestore,e,this._key)}toJSON(){return{type:mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Rp(r,mr._jsonSchema))return new mr(e,n||null,new ke(Kt.fromString(r.referencePath)))}}mr._jsonSchemaVersion="firestore/documentReference/1.0",mr._jsonSchema={type:Fr("string",mr._jsonSchemaVersion),referencePath:Fr("string")};class Rl extends ws{constructor(e,r,n){super(e,r,um(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mr(this.firestore,null,new ke(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function Ve(t,e,...r){if(t=Gt(t),FD("collection","path",e),t instanceof xm){const n=Kt.fromString(e,...r);return $I(n),new Rl(t,null,n)}{if(!(t instanceof mr||t instanceof Rl))throw new _e(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kt.fromString(e,...r));return $I(n),new Rl(t.firestore,null,n)}}function Ue(t,e,...r){if(t=Gt(t),arguments.length===1&&(e=vE.newId()),FD("doc","path",e),t instanceof xm){const n=Kt.fromString(e,...r);return HI(n),new mr(t,null,new ke(n))}{if(!(t instanceof mr||t instanceof Rl))throw new _e(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Kt.fromString(e,...r));return HI(n),new mr(t.firestore,t instanceof Rl?t.converter:null,new ke(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO="AsyncQueue";class NO{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MN(this,"async_queue_retry"),this._c=()=>{const n=R2();n&&Se(DO,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=R2();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=R2();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const r=new ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jf(e))throw e;Se(DO,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const r=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",MO(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=kE.createAndSchedule(this,e,r,n,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Fe(47125,{Pc:MO(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function MO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class vs extends xm{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new NO,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NO(e),this._firestoreClient=void 0,await e}}}function Lq(t,e){const r=typeof t=="object"?t:am(),n=typeof t=="string"?t:F1,i=Op(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=dE("firestore");a&&jq(i,...a)}return i}function bm(t){if(t._terminated)throw new _e(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Bq(t),t._firestoreClient}function Bq(t){const e=t._freezeSettings(),r=(function(i,a,o,s){return new cH(i,a,o,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,QN(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Pq(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fa(Nn.fromBase64String(e))}catch(r){throw new _e(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new fa(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rp(e,fa._jsonSchema))return fa.fromBase64String(e.bytes)}}fa._jsonSchemaVersion="firestore/bytes/1.0",fa._jsonSchema={type:Fr("string",fa._jsonSchemaVersion),bytes:Fr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new _e(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new _e(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new _e(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xo._jsonSchemaVersion}}static fromJSON(e){if(Rp(e,xo._jsonSchema))return new xo(e.latitude,e.longitude)}}xo._jsonSchemaVersion="firestore/geoPoint/1.0",xo._jsonSchema={type:Fr("string",xo._jsonSchemaVersion),latitude:Fr("number"),longitude:Fr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rp(e,bo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((r=>typeof r=="number")))return new bo(e.vectorValues);throw new _e(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bo._jsonSchemaVersion="firestore/vectorValue/1.0",bo._jsonSchema={type:Fr("string",bo._jsonSchemaVersion),vectorValues:Fr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uq=/^__.*__$/;class zq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Kl(e,this.data,this.fieldMask,r,this.fieldTransforms):new Pp(e,this.data,r,this.fieldTransforms)}}class JN{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Kl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function eM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:t})}}class $E{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $E({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Y1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eM(this.Ac)&&Uq.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Fq{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||vm(e)}Cc(e,r,n,i=!1){return new $E({Ac:e,methodName:r,Dc:n,path:Pn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wm(t){const e=t._freezeSettings(),r=vm(t._databaseId);return new Fq(t._databaseId,!!e.ignoreUndefinedProperties,r)}function tM(t,e,r,n,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,r,i);WE("Data must be an object, but it was:",o,n);const s=rM(n,o);let c,f;if(a.merge)c=new ji(o.fieldMask),f=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const p of a.mergeFields){const g=G_(e,p,r);if(!o.contains(g))throw new _e(ue.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);iM(d,g)||d.push(g)}c=new ji(d),f=o.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=o.fieldTransforms;return new zq(new gi(s),c,f)}class Em extends kp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Em}}class qE extends kp{_toFieldTransform(e){return new mN(e.path,new cp)}isEqual(e){return e instanceof qE}}class GE extends kp{constructor(e,r){super(e),this.Fc=r}_toFieldTransform(e){const r=new dp(e.serializer,dN(e.serializer,this.Fc));return new mN(e.path,r)}isEqual(e){return e instanceof GE&&this.Fc===e.Fc}}function Vq(t,e,r,n){const i=t.Cc(1,e,r);WE("Data must be an object, but it was:",i,n);const a=[],o=gi.empty();Wl(n,((c,f)=>{const d=KE(e,c,r);f=Gt(f);const p=i.yc(d);if(f instanceof Em)a.push(d);else{const g=jp(f,p);g!=null&&(a.push(d),o.set(d,g))}}));const s=new ji(a);return new JN(o,s,i.fieldTransforms)}function Hq(t,e,r,n,i,a){const o=t.Cc(1,e,r),s=[G_(e,n,r)],c=[i];if(a.length%2!=0)throw new _e(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)s.push(G_(e,a[g])),c.push(a[g+1]);const f=[],d=gi.empty();for(let g=s.length-1;g>=0;--g)if(!iM(f,s[g])){const y=s[g];let b=c[g];b=Gt(b);const w=o.yc(y);if(b instanceof Em)f.push(y);else{const E=jp(b,w);E!=null&&(f.push(y),d.set(y,E))}}const p=new ji(f);return new JN(d,p,o.fieldTransforms)}function $q(t,e,r,n=!1){return jp(r,t.Cc(n?4:3,e))}function jp(t,e){if(nM(t=Gt(t)))return WE("Unsupported field value:",e,t),rM(t,e);if(t instanceof kp)return(function(n,i){if(!eM(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const a=[];let o=0;for(const s of n){let c=jp(s,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}})(t,e)}return(function(n,i){if((n=Gt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dN(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=rr.fromDate(n);return{timestampValue:q1(i.serializer,a)}}if(n instanceof rr){const a=new rr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:q1(i.serializer,a)}}if(n instanceof xo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof fa)return{bytesValue:EN(i.serializer,n._byteString)};if(n instanceof mr){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:CE(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof bo)return(function(o,s){return{mapValue:{fields:{[YD]:{stringValue:QD},[V1]:{arrayValue:{values:o.toArray().map((f=>{if(typeof f!="number")throw s.Sc("VectorValues must only contain numeric values.");return wE(s.serializer,f)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${om(n)}`)})(t,e)}function rM(t,e){const r={};return $D(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(t,((n,i)=>{const a=jp(i,e.mc(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function nM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rr||t instanceof xo||t instanceof fa||t instanceof mr||t instanceof kp||t instanceof bo)}function WE(t,e,r){if(!nM(r)||!VD(r)){const n=om(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function G_(t,e,r){if((e=Gt(e))instanceof _m)return e._internalPath;if(typeof e=="string")return KE(t,e);throw Y1("Field path arguments must be of type string or ",t,!1,void 0,r)}const qq=new RegExp("[~\\*/\\[\\]]");function KE(t,e,r){if(e.search(qq)>=0)throw Y1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new _m(...e.split("."))._internalPath}catch{throw Y1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Y1(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new _e(ue.INVALID_ARGUMENT,s+t+c)}function iM(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Gq extends aM{data(){return super.data()}}function Am(t,e){return typeof e=="string"?KE(t,e):e instanceof _m?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XE{}class YE extends XE{}function Ct(t,e,...r){let n=[];e instanceof XE&&n.push(e),n=n.concat(r),(function(a){const o=a.filter((c=>c instanceof QE)).length,s=a.filter((c=>c instanceof Sm)).length;if(o>1||o>0&&s>0)throw new _e(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class Sm extends YE{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Sm(e,r,n)}_apply(e){const r=this._parse(e);return sM(e._query,r),new ws(e.firestore,e.converter,j_(e._query,r))}_parse(e){const r=wm(e.firestore);return(function(a,o,s,c,f,d,p){let g;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new _e(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){LO(p,d);const b=[];for(const w of p)b.push(jO(c,a,w));g={arrayValue:{values:b}}}else g=jO(c,a,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||LO(p,d),g=$q(s,o,p,d==="in"||d==="not-in");return zr.create(f,d,g)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Vr(t,e,r){const n=e,i=Am("where",t);return Sm._create(i,n,r)}class QE extends XE{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new QE(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Fa.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,a){let o=i;const s=a.getFlattenedFilters();for(const c of s)sM(o,c),o=j_(o,c)})(e._query,r),new ws(e.firestore,e.converter,j_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ZE extends YE{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ZE(e,r)}_apply(e){const r=(function(i,a,o){if(i.startAt!==null)throw new _e(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _e(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lp(a,o)})(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,(function(i,a){const o=i.explicitOrderBy.concat([a]);return new ed(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function $r(t,e="asc"){const r=e,n=Am("orderBy",t);return ZE._create(n,r)}class JE extends YE{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new JE(e,r,n)}_apply(e){return new ws(e.firestore,e.converter,$1(e._query,this._limit,this._limitType))}}function Ao(t){return ZV("limit",t),JE._create("limit",t,"F")}function jO(t,e,r){if(typeof(r=Gt(r))=="string"){if(r==="")throw new _e(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aN(e)&&r.indexOf("/")!==-1)throw new _e(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Kt.fromString(r));if(!ke.isDocumentKey(n))throw new _e(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ZI(t,new ke(n))}if(r instanceof mr)return ZI(t,r._key);throw new _e(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${om(r)}.`)}function LO(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sM(t,e){const r=(function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new _e(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Wq{convertValue(e,r="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Wl(e,((i,a)=>{n[i]=this.convertValue(a,r)})),n}convertVectorValue(e){const r=e.fields?.[V1].arrayValue?.values?.map((n=>Ir(n.doubleValue)));return new bo(r)}convertGeoPoint(e){return new xo(Ir(e.latitude),Ir(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=cm(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ap(e));default:return null}}convertTimestamp(e){const r=Ll(e);return new rr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Kt.fromString(e);Rt(ON(n),9688,{name:e});const i=new op(n.get(1),n.get(3)),a=new ke(n.popFirst(5));return i.isEqual(r)||ps(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Uh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kc extends aM{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new E1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Kc._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Kc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kc._jsonSchema={type:Fr("string",Kc._jsonSchemaVersion),bundleSource:Fr("string","DocumentSnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class E1 extends Kc{data(e={}){return super.data(e)}}class Xc{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Uh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new E1(this._firestore,this._userDataWriter,n.key,n,new Uh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new _e(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((s=>{const c=new E1(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Uh(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((s=>a||s.type!==3)).map((s=>{const c=new E1(i._firestore,i._userDataWriter,s.doc.key,s.doc,new Uh(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,d=-1;return s.type!==0&&(f=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),d=o.indexOf(s.doc.key)),{type:Kq(s.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Kq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){t=yi(t,mr);const e=yi(t.firestore,vs);return Mq(bm(e),t._key).then((r=>cM(e,t,r)))}Xc._jsonSchemaVersion="firestore/querySnapshot/1.0",Xc._jsonSchema={type:Fr("string",Xc._jsonSchemaVersion),bundleSource:Fr("string","QuerySnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class eA extends Wq{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new mr(this.firestore,null,r)}}function vt(t){t=yi(t,ws);const e=yi(t.firestore,vs),r=bm(e),n=new eA(e);return oM(t._query),kq(r,t._query).then((i=>new Xc(e,n,t,i)))}function Xl(t,e,r){t=yi(t,mr);const n=yi(t.firestore,vs),i=lM(t.converter,e);return Cm(n,[tM(wm(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,ga.none())])}function nr(t,e,r,...n){t=yi(t,mr);const i=yi(t.firestore,vs),a=wm(i);let o;return o=typeof(e=Gt(e))=="string"||e instanceof _m?Hq(a,"updateDoc",t._key,e,r,n):Vq(a,"updateDoc",t._key,e),Cm(i,[o.toMutation(t._key,ga.exists(!0))])}function Ui(t){return Cm(yi(t.firestore,vs),[new EE(t._key,ga.none())])}function rd(t,e){const r=yi(t.firestore,vs),n=Ue(t),i=lM(t.converter,e);return Cm(r,[tM(wm(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,ga.exists(!1))]).then((()=>n))}function nd(t,...e){t=Gt(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||kO(e[n])||(r=e[n++]);const i={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(kO(e[n])){const c=e[n];e[n]=c.next?.bind(c),e[n+1]=c.error?.bind(c),e[n+2]=c.complete?.bind(c)}let a,o,s;if(t instanceof mr)o=yi(t.firestore,vs),s=um(t._key.path),a={next:c=>{e[n]&&e[n](cM(o,t,c))},error:e[n+1],complete:e[n+2]};else{const c=yi(t,ws);o=yi(c.firestore,vs),s=c._query;const f=new eA(o);a={next:d=>{e[n]&&e[n](new Xc(o,f,c,d))},error:e[n+1],complete:e[n+2]},oM(t._query)}return(function(f,d,p,g){const y=new HE(g),b=new zE(d,y,p);return f.asyncQueue.enqueueAndForget((async()=>LE(await X1(f),b))),()=>{y.Nu(),f.asyncQueue.enqueueAndForget((async()=>BE(await X1(f),b)))}})(bm(o),s,i,a)}function Cm(t,e){return(function(n,i){const a=new ss;return n.asyncQueue.enqueueAndForget((async()=>wq(await Nq(n),i,a))),a.promise})(bm(t),e)}function cM(t,e,r){const n=r.docs.get(e._key),i=new eA(t);return new Kc(t,i,e._key,n,new Uh(r.hasPendingWrites,r.fromCache),e.converter)}function Xq(){return new qE("serverTimestamp")}function zi(t){return new GE("increment",t)}(function(e,r=!0){(function(i){Qf=i})(gu),kl(new ds("firestore",((n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),s=new vs(new HV(n.getProvider("auth-internal")),new GV(o,n.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new _e(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new op(f.options.projectId,d)})(o,i),o);return a={useFetchStreams:r,...a},s._setSettings(a),s}),"PUBLIC").setMultipleInstances(!0)),pa(UI,zI,e),pa(UI,zI,"esm2020")})();var Yq="firebase",Qq="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pa(Yq,Qq,"app");function uM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zq=uM,fM=new Tp("auth","Firebase",uM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new hE("@firebase/auth");function Jq(t,...e){Q1.logLevel<=lt.WARN&&Q1.warn(`Auth (${gu}): ${t}`,...e)}function A1(t,...e){Q1.logLevel<=lt.ERROR&&Q1.error(`Auth (${gu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t,...e){throw rA(t,...e)}function za(t,...e){return rA(t,...e)}function tA(t,e,r){const n={...Zq(),[e]:r};return new Tp("auth","Firebase",n).create(e,{appName:t.name})}function ls(t){return tA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eG(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&ma(t,"argument-error"),tA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function rA(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return fM.create(t,...e)}function ze(t,e,...r){if(!t)throw rA(e,...r)}function ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw A1(e),new Error(e)}function ms(t,e){t||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(){return typeof self<"u"&&self.location?.href||""}function tG(){return BO()==="http:"||BO()==="https:"}function BO(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tG()||bF()||"connection"in navigator)?navigator.onLine:!0}function nG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,r){this.shortDelay=e,this.longDelay=r,ms(r>e,"Short delay should be less than long delay!"),this.isMobile=mF()||_F()}get(){return rG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e){ms(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oG=new Lp(3e4,6e4);function Yl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Es(t,e,r,n,i={}){return hM(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const s=Ip({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...a};return xF()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Oo(t.emulatorConfig.host)&&(f.credentials="include"),dM.fetch()(await pM(t,t.config.apiHost,r,s),f)})}async function hM(t,e,r){t._canInitEmulator=!1;const n={...iG,...e};try{const i=new lG(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Hg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[c,f]=s.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hg(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Hg(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Hg(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw tA(t,d,f);ma(t,d)}}catch(i){if(i instanceof Ha)throw i;ma(t,"network-request-failed",{message:String(i)})}}async function Bp(t,e,r,n,i={}){const a=await Es(t,e,r,n,i);return"mfaPendingCredential"in a&&ma(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function pM(t,e,r,n){const i=`${e}${r}?${n}`,a=t,o=a.config.emulator?nA(t.config,i):`${t.config.apiScheme}://${i}`;return aG.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function sG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(za(this.auth,"network-request-failed")),oG.get())})}}function Hg(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=za(t,e,n);return i.customData._tokenResponse=r,i}function UO(t){return t!==void 0&&t.enterprise!==void 0}class cG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return sG(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function uG(t,e){return Es(t,"GET","/v2/recaptchaConfig",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fG(t,e){return Es(t,"POST","/v1/accounts:delete",e)}async function Z1(t,e){return Es(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dG(t,e=!1){const r=Gt(t),n=await r.getIdToken(e),i=iA(n);ze(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:n,authTime:Qh(D2(i.auth_time)),issuedAtTime:Qh(D2(i.iat)),expirationTime:Qh(D2(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function D2(t){return Number(t)*1e3}function iA(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return A1("JWT malformed, contained fewer than 3 sections"),null;try{const i=ED(r);return i?JSON.parse(i):(A1("Failed to decode base64 JWT payload"),null)}catch(i){return A1("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zO(t){const e=iA(t);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ha&&hG(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function hG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qh(this.lastLoginAt),this.creationTime=Qh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(t){const e=t.auth,r=await t.getIdToken(),n=await jf(t,Z1(e,{idToken:r}));ze(n?.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?gM(i.providerUserInfo):[],o=vG(t.providerData,a),s=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!o?.length,f=s?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new K_(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,d)}async function gG(t){const e=Gt(t);await J1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vG(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function gM(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mG(t,e){const r=await hM(t,{},async()=>{const n=Ip({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await pM(t,i,"/v1/token",`key=${a}`),s=await t._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:s,body:n};return t.emulatorConfig&&Oo(t.emulatorConfig.host)&&(c.credentials="include"),dM.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function yG(t,e){return Es(t,"POST","/v2/accounts:revokeToken",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const r=zO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await mG(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new _f;return n&&(ze(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(ze(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ze(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _f,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e){ze(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ua{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new pG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new K_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await jf(this,this.stsTokenManager.getToken(this.auth,e));return ze(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return dG(this,e)}reload(){return gG(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await J1(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(ls(this.auth));const e=await this.getIdToken();return await jf(this,fG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,a=r.phoneNumber??void 0,o=r.photoURL??void 0,s=r.tenantId??void 0,c=r._redirectEventId??void 0,f=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:b,stsTokenManager:w}=r;ze(p&&w,e,"internal-error");const E=_f.fromJSON(this.name,w);ze(typeof p=="string",e,"internal-error"),fl(n,e.name),fl(i,e.name),ze(typeof g=="boolean",e,"internal-error"),ze(typeof y=="boolean",e,"internal-error"),fl(a,e.name),fl(o,e.name),fl(s,e.name),fl(c,e.name),fl(f,e.name),fl(d,e.name);const S=new Ua({uid:p,auth:e,email:i,emailVerified:g,displayName:n,isAnonymous:y,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:E,createdAt:f,lastLoginAt:d});return b&&Array.isArray(b)&&(S.providerData=b.map(I=>({...I}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,r,n=!1){const i=new _f;i.updateFromServerResponse(r);const a=new Ua({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await J1(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ze(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?gM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,s=new _f;s.updateFromIdToken(n);const c=new Ua({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new K_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=new Map;function is(t){ms(t instanceof Function,"Expected a class definition");let e=FO.get(t);return e?(ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,FO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}vM.type="NONE";const VO=vM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e,r){return`firebase:${t}:${e}:${r}`}class wf{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=S1(this.userKey,i.apiKey,a),this.fullPersistenceKey=S1("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Z1(this.auth,{idToken:e}).catch(()=>{});return r?Ua._fromGetAccountInfoResponse(this.auth,r,e):null}return Ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new wf(is(VO),e,n);const i=(await Promise.all(r.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||is(VO);const o=S1(n,e.config.apiKey,e.name);let s=null;for(const f of r)try{const d=await f._get(o);if(d){let p;if(typeof d=="string"){const g=await Z1(e,{idToken:d}).catch(()=>{});if(!g)break;p=await Ua._fromGetAccountInfoResponse(e,g,d)}else p=Ua._fromJSON(e,d);f!==a&&(s=p),a=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new wf(a,e,n):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(r.map(async f=>{if(f!==a)try{await f._remove(o)}catch{}})),new wf(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wM(e))return"Blackberry";if(EM(e))return"Webos";if(yM(e))return"Safari";if((e.includes("chrome/")||xM(e))&&!e.includes("edge/"))return"Chrome";if(_M(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function mM(t=Gn()){return/firefox\//i.test(t)}function yM(t=Gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xM(t=Gn()){return/crios\//i.test(t)}function bM(t=Gn()){return/iemobile/i.test(t)}function _M(t=Gn()){return/android/i.test(t)}function wM(t=Gn()){return/blackberry/i.test(t)}function EM(t=Gn()){return/webos/i.test(t)}function aA(t=Gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xG(t=Gn()){return aA(t)&&!!window.navigator?.standalone}function bG(){return wF()&&document.documentMode===10}function AM(t=Gn()){return aA(t)||_M(t)||EM(t)||wM(t)||/windows phone/i.test(t)||bM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t,e=[]){let r;switch(t){case"Browser":r=HO(Gn());break;case"Worker":r=`${HO(Gn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${gu}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,s)=>{try{const c=e(a);o(c)}catch(c){s(c)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(t,e={}){return Es(t,"GET","/v2/passwordPolicy",Yl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG=6;class AG{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??EG,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $O(this),this.idTokenSubscription=new $O(this),this.beforeStateQueue=new _G(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=is(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Z1(this,{idToken:e}),n=await Ua._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ri(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=n?._redirectEventId,s=await this.tryRedirectSignIn(e);(!a||a===o)&&s?.user&&(n=s.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await J1(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(ls(this));const r=e?Gt(e):null;return r&&ze(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wG(this),r=new AG(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await yG(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&is(e)||this._popupRedirectResolver;ze(r,this,"argument-error"),this.redirectPersistenceManager=await wf.create(this,[is(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,i);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Jq(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ql(t){return Gt(t)}class $O{constructor(e){this.auth=e,this.observer=null,this.addObserver=RF(r=>this.observer=r)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CG(t){Tm=t}function CM(t){return Tm.loadJS(t)}function TG(){return Tm.recaptchaEnterpriseScript}function IG(){return Tm.gapiScript}function OG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class RG{constructor(){this.enterprise=new PG}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class PG{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const DG="recaptcha-enterprise",TM="NO_RECAPTCHA";class NG{constructor(e){this.type=DG,this.auth=Ql(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{uG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const f=new cG(c);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,o(f.siteKey)}}).catch(c=>{s(c)})})}function i(a,o,s){const c=window.grecaptcha;UO(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(f=>{o(f)}).catch(()=>{o(TM)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RG().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{n(this.auth).then(s=>{if(!r&&UO(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=TG();c.length!==0&&(c+=s),CM(c).then(()=>{i(s,a,o)}).catch(f=>{o(f)})}}).catch(s=>{o(s)})})}}async function qO(t,e,r,n=!1,i=!1){const a=new NG(t);let o;if(i)o=TM;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const s={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const c=s.phoneEnrollmentInfo.phoneNumber,f=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const c=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return n?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function X_(t,e,r,n,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await qO(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await qO(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(t,e){const r=Op(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(ru(a,e??{}))return i;ma(i,"already-initialized")}return r.initialize({options:e})}function kG(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(is);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function jG(t,e,r){const n=Ql(t);ze(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=IM(e),{host:o,port:s}=LG(e),c=s===null?"":`:${s}`,f={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ze(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ze(ru(f,n.config.emulator)&&ru(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Oo(o)?(nm(`${a}//${o}${c}`),im("Auth",!0)):BG()}function IM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LG(t){const e=IM(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:GO(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:GO(o)}}}function GO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BG(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,r){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function UG(t,e){return Es(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zG(t,e){return Bp(t,"POST","/v1/accounts:signInWithPassword",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FG(t,e){return Bp(t,"POST","/v1/accounts:signInWithEmailLink",Yl(t,e))}async function VG(t,e){return Bp(t,"POST","/v1/accounts:signInWithEmailLink",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends oA{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new hp(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new hp(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r?.email&&r?.password){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X_(e,r,"signInWithPassword",zG);case"emailLink":return FG(e,{email:this._email,oobCode:this._password});default:ma(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return X_(e,n,"signUpPassword",UG);case"emailLink":return VG(e,{idToken:r,email:this._email,oobCode:this._password});default:ma(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(t,e){return Bp(t,"POST","/v1/accounts:signInWithIdp",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HG="http://localhost";class au extends oA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new au(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ma("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=r;if(!n||!i)return null;const o=new au(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Ef(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ef(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ef(e,r)}buildRequest(){const e={requestUri:HG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Ip(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $G(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qG(t){const e=Mh(kh(t)).link,r=e?Mh(kh(e)).deep_link_id:null,n=Mh(kh(t)).deep_link_id;return(n?Mh(kh(n)).link:null)||n||r||e||t}class sA{constructor(e){const r=Mh(kh(e)),n=r.apiKey??null,i=r.oobCode??null,a=$G(r.mode??null);ze(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=qG(e);try{return new sA(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(){this.providerId=id.PROVIDER_ID}static credential(e,r){return hp._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=sA.parseLink(r);return ze(n,"argument-error"),hp._fromEmailAndCode(e,n.code,n.tenantId)}}id.PROVIDER_ID="password";id.EMAIL_PASSWORD_SIGN_IN_METHOD="password";id.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends lA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends Up{constructor(){super("facebook.com")}static credential(e){return au._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xl.credential(e.oauthAccessToken)}catch{return null}}}xl.FACEBOOK_SIGN_IN_METHOD="facebook.com";xl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Up{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return au._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return es.credential(r,n)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Up{constructor(){super("github.com")}static credential(e){return au._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bl.credential(e.oauthAccessToken)}catch{return null}}}bl.GITHUB_SIGN_IN_METHOD="github.com";bl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends Up{constructor(){super("twitter.com")}static credential(e,r){return au._fromParams({providerId:_l.PROVIDER_ID,signInMethod:_l.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return _l.credentialFromTaggedObject(e)}static credentialFromError(e){return _l.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return _l.credential(r,n)}catch{return null}}}_l.TWITTER_SIGN_IN_METHOD="twitter.com";_l.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GG(t,e){return Bp(t,"POST","/v1/accounts:signUp",Yl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Ua._fromIdTokenResponse(e,n,i),o=WO(n);return new ou({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=WO(n);return new ou({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function WO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends Ha{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ev.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new ev(e,r,n,i)}}function OM(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ev._fromErrorAndOperation(t,a,e,n):a})}async function WG(t,e,r=!1){const n=await jf(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ou._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KG(t,e,r=!1){const{auth:n}=t;if(ri(n.app))return Promise.reject(ls(n));const i="reauthenticate";try{const a=await jf(t,OM(n,i,e,t),r);ze(a.idToken,n,"internal-error");const o=iA(a.idToken);ze(o,n,"internal-error");const{sub:s}=o;return ze(t.uid===s,n,"user-mismatch"),ou._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ma(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e,r=!1){if(ri(t.app))return Promise.reject(ls(t));const n="signIn",i=await OM(t,n,e),a=await ou._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function XG(t,e){return RM(Ql(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t){const e=Ql(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YG(t,e,r){if(ri(t.app))return Promise.reject(ls(t));const n=Ql(t),o=await X_(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GG).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&PM(t),c}),s=await ou._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(s.user),s}function QG(t,e,r){return ri(t.app)?Promise.reject(ls(t)):XG(Gt(t),id.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&PM(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZG(t,e){return Es(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Gt(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await jf(n,ZG(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const s=n.providerData.find(({providerId:c})=>c==="password");s&&(s.displayName=n.displayName,s.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function JG(t,e,r,n){return Gt(t).onIdTokenChanged(e,r,n)}function eW(t,e,r){return Gt(t).beforeAuthStateChanged(e,r)}function tW(t,e,r,n){return Gt(t).onAuthStateChanged(e,r,n)}function rW(t){return Gt(t).signOut()}const tv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(tv,"1"),this.storage.removeItem(tv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=1e3,iW=10;class MM extends NM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,s,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);bG()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,iW):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},nW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}MM.type="LOCAL";const aW=MM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM extends NM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}kM.type="SESSION";const jM=kM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new Im(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!o?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(o).map(async f=>f(r.origin,a)),c=await oW(s);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((s,c)=>{const f=cA("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===f)switch(g.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(g.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:f,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(){return window}function lW(t){_o().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){return typeof _o().WorkerGlobalScope<"u"&&typeof _o().importScripts=="function"}async function cW(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uW(){return navigator?.serviceWorker?.controller||null}function fW(){return LM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="firebaseLocalStorageDb",dW=1,rv="firebaseLocalStorage",UM="fbase_key";class zp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Om(t,e){return t.transaction([rv],e?"readwrite":"readonly").objectStore(rv)}function hW(){const t=indexedDB.deleteDatabase(BM);return new zp(t).toPromise()}function Y_(){const t=indexedDB.open(BM,dW);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(rv,{keyPath:UM})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(rv)?e(n):(n.close(),await hW(),e(await Y_()))})})}async function KO(t,e,r){const n=Om(t,!0).put({[UM]:e,value:r});return new zp(n).toPromise()}async function pW(t,e){const r=Om(t,!1).get(e),n=await new zp(r).toPromise();return n===void 0?null:n.value}function XO(t,e){const r=Om(t,!0).delete(e);return new zp(r).toPromise()}const gW=800,vW=3;class zM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>vW)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Im._getInstance(fW()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cW(),!this.activeServiceWorker)return;this.sender=new sW(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uW()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y_();return await KO(e,tv,"1"),await XO(e,tv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>KO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>pW(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>XO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Om(i,!1).getAll();return new zp(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zM.type="LOCAL";const mW=zM;new Lp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(t,e){return e?is(e):(ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA extends oA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ef(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ef(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ef(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function yW(t){return RM(t.auth,new uA(t),t.bypassAuthState)}function xW(t){const{auth:e,user:r}=t;return ze(r,e,"internal-error"),KG(r,new uA(t),t.bypassAuthState)}async function bW(t){const{auth:e,user:r}=t;return ze(r,e,"internal-error"),WG(r,new uA(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:s}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yW;case"linkViaPopup":case"linkViaRedirect":return bW;case"reauthViaPopup":case"reauthViaRedirect":return xW;default:ma(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W=new Lp(2e3,1e4);async function wW(t,e,r){if(ri(t.app))return Promise.reject(za(t,"operation-not-supported-in-this-environment"));const n=Ql(t);eG(t,e,lA);const i=FM(n,r);return new Fc(n,"signInViaPopup",e,i).executeNotNull()}class Fc extends VM{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Fc.currentPopupAction&&Fc.currentPopupAction.cancel(),Fc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){ms(this.filter.length===1,"Popup operations only handle one event");const e=cA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(za(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(za(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(za(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_W.get())};e()}}Fc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EW="pendingRedirect",C1=new Map;class AW extends VM{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=C1.get(this.auth._key());if(!e){try{const n=await SW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}C1.set(this.auth._key(),e)}return this.bypassAuthState||C1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SW(t,e){const r=IW(e),n=TW(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function CW(t,e){C1.set(t._key(),e)}function TW(t){return is(t._redirectPersistence)}function IW(t){return S1(EW,t.config.apiKey,t.name)}async function OW(t,e,r=!1){if(ri(t.app))return Promise.reject(ls(t));const n=Ql(t),i=FM(n,e),o=await new AW(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW=600*1e3;class PW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DW(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!HM(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(za(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RW&&this.cachedEventUids.clear(),this.cachedEventUids.has(YO(e))}saveEventToCache(e){this.cachedEventUids.add(YO(e)),this.lastProcessedEventTime=Date.now()}}function YO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function DW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NW(t,e={}){return Es(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kW=/^https?/;async function jW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NW(t);for(const r of e)try{if(LW(r))return}catch{}ma(t,"unauthorized-domain")}function LW(t){const e=W_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!kW.test(r))return!1;if(MW.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BW=new Lp(3e4,6e4);function QO(){const t=_o().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function UW(t){return new Promise((e,r)=>{function n(){QO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QO(),r(za(t,"network-request-failed"))},timeout:BW.get()})}if(_o().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_o().gapi?.load)n();else{const i=OG("iframefcb");return _o()[i]=()=>{gapi.load?n():r(za(t,"network-request-failed"))},CM(`${IG()}?onload=${i}`).catch(a=>r(a))}}).catch(e=>{throw T1=null,e})}let T1=null;function zW(t){return T1=T1||UW(t),T1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=new Lp(5e3,15e3),VW="__/auth/iframe",HW="emulator/auth/iframe",$W={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GW(t){const e=t.config;ze(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?nA(e,HW):`https://${t.config.authDomain}/${VW}`,n={apiKey:e.apiKey,appName:t.name,v:gu},i=qW.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Ip(n).slice(1)}`}async function WW(t){const e=await zW(t),r=_o().gapi;return ze(r,t,"internal-error"),e.open({where:document.body,url:GW(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$W,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=za(t,"network-request-failed"),s=_o().setTimeout(()=>{a(o)},FW.get());function c(){_o().clearTimeout(s),i(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XW=500,YW=600,QW="_blank",ZW="http://localhost";class ZO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JW(t,e,r,n=XW,i=YW){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const c={...KW,width:n.toString(),height:i.toString(),top:a,left:o},f=Gn().toLowerCase();r&&(s=xM(f)?QW:r),mM(f)&&(e=e||ZW,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,b])=>`${g}${y}=${b},`,"");if(xG(f)&&s!=="_self")return eK(e||"",s),new ZO(null);const p=window.open(e||"",s,d);ze(p,t,"popup-blocked");try{p.focus()}catch{}return new ZO(p)}function eK(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK="__/auth/handler",rK="emulator/auth/handler",nK=encodeURIComponent("fac");async function JO(t,e,r,n,i,a){ze(t.config.authDomain,t,"auth-domain-config-required"),ze(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:gu,eventId:i};if(e instanceof lA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",OF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Up){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const s=o;for(const d of Object.keys(s))s[d]===void 0&&delete s[d];const c=await t._getAppCheckToken(),f=c?`#${nK}=${encodeURIComponent(c)}`:"";return`${iK(t)}?${Ip(s).slice(1)}${f}`}function iK({config:t}){return t.emulator?nA(t,rK):`https://${t.authDomain}/${tK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="webStorageSupport";class aK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jM,this._completeRedirectFn=OW,this._overrideRedirectResult=CW}async _openPopup(e,r,n,i){ms(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await JO(e,r,n,W_(),i);return JW(e,a,cA())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await JO(e,r,n,W_(),i);return lW(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(ms(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await WW(e),n=new PW(e);return r.register("authEvent",i=>(ze(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(N2,{type:N2},i=>{const a=i?.[0]?.[N2];a!==void 0&&r(!!a),ma(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=jW(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return AM()||yM()||aA()}}const oK=aK;var e6="@firebase/auth",t6="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cK(t){kl(new ds("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=n.options;ze(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SM(t)},f=new SG(n,i,a,c);return kG(f,r),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),kl(new ds("auth-internal",e=>{const r=Ql(e.getProvider("auth").getImmediate());return(n=>new sK(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),pa(e6,t6,lK(t)),pa(e6,t6,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=300,fK=CD("authIdTokenMaxAge")||uK;let r6=null;const dK=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>fK)return;const i=r?.token;r6!==i&&(r6=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hK(t=am()){const e=Op(t,"auth");if(e.isInitialized())return e.getImmediate();const r=MG(t,{popupRedirectResolver:oK,persistence:[mW,aW,jM]}),n=CD("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=dK(a.toString());eW(r,o,()=>o(r.currentUser)),JG(r,s=>o(s))}}const i=AD("auth");return i&&jG(r,`http://${i}`),r}function pK(){return document.getElementsByTagName("head")?.[0]??document}CG({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=za("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",pK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cK("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK="type.googleapis.com/google.protobuf.Int64Value",vK="type.googleapis.com/google.protobuf.UInt64Value";function $M(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function nv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>nv(e));if(typeof t=="function"||typeof t=="object")return $M(t,e=>nv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Lf(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case gK:case vK:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Lf(e)):typeof t=="function"||typeof t=="object"?$M(t,e=>Lf(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ni extends Ha{constructor(e,r,n){super(`${fA}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,ni.prototype)}}function mK(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function iv(t,e){let r=mK(t),n=r,i;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!n6[o])return new ni("internal","internal");r=n6[o],n=o}const s=a.message;typeof s=="string"&&(n=s),i=a.details,i!==void 0&&(i=Lf(i))}}catch{}return r==="ok"?null:new ni(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yK{constructor(e,r,n,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ri(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="us-central1",xK=/^data: (.*?)(?:\n|$)/;function bK(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new ni("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class _K{constructor(e,r,n,i,a=Q_,o=(...s)=>fetch(...s)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new yK(e,r,n,i),this.cancelAllRequests=new Promise(s=>{this.deleteService=()=>Promise.resolve(s())});try{const s=new URL(a);this.customDomain=s.origin+(s.pathname==="/"?"":s.pathname),this.region=Q_}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function wK(t,e,r){const n=Oo(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(nm(t.emulatorOrigin+"/backends"),im("Functions",!0))}function EK(t,e,r){const n=i=>SK(t,e,i,r||{});return n.stream=(i,a)=>TK(t,e,i,a),n}function qM(t){return t.emulatorOrigin&&Oo(t.emulatorOrigin)?"include":void 0}async function AK(t,e,r,n,i){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r,credentials:qM(i)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function GM(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function SK(t,e,r,n){const i=t._url(e);return CK(t,i,r,n)}async function CK(t,e,r,n){r=nv(r);const i={data:r},a=await GM(t,n),o=n.timeout||7e4,s=bK(o),c=await Promise.race([AK(e,i,a,t.fetchImpl,t),s.promise,t.cancelAllRequests]);if(s.cancel(),!c)throw new ni("cancelled","Firebase Functions instance was deleted.");const f=iv(c.status,c.json);if(f)throw f;if(!c.json)throw new ni("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ni("internal","Response is missing data field.");return{data:Lf(d)}}function TK(t,e,r,n){const i=t._url(e);return IK(t,i,r,n||{})}async function IK(t,e,r,n){r=nv(r);const i={data:r},a=await GM(t,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:n?.signal,credentials:qM(t)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const b=new ni("cancelled","Request was cancelled.");return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}const y=iv(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let s,c;const f=new Promise((g,y)=>{s=g,c=y});n?.signal?.addEventListener("abort",()=>{const g=new ni("cancelled","Request was cancelled.");c(g)});const d=o.body.getReader(),p=OK(d,s,c,n?.signal);return{stream:{[Symbol.asyncIterator](){const g=p.getReader();return{async next(){const{value:y,done:b}=await g.read();return{value:y,done:b}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:f}}function OK(t,e,r,n){const i=(o,s)=>{const c=o.match(xK);if(!c)return;const f=c[1];try{const d=JSON.parse(f);if("result"in d){e(Lf(d.result));return}if("message"in d){s.enqueue(Lf(d.message));return}if("error"in d){const p=iv(0,d);s.error(p),r(p);return}}catch(d){if(d instanceof ni){s.error(d),r(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let s="";return c();async function c(){if(n?.aborted){const f=new ni("cancelled","Request was cancelled");return o.error(f),r(f),Promise.resolve()}try{const{value:f,done:d}=await t.read();if(d){s.trim()&&i(s.trim(),o),o.close();return}if(n?.aborted){const g=new ni("cancelled","Request was cancelled");o.error(g),r(g),await t.cancel();return}s+=a.decode(f,{stream:!0});const p=s.split(`
`);s=p.pop()||"";for(const g of p)g.trim()&&i(g.trim(),o);return c()}catch(f){const d=f instanceof ni?f:iv(0,null);o.error(d),r(d)}}},cancel(){return t.cancel()}})}const i6="@firebase/functions",a6="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK="auth-internal",PK="app-check-internal",DK="messaging-internal";function NK(t){const e=(r,{instanceIdentifier:n})=>{const i=r.getProvider("app").getImmediate(),a=r.getProvider(RK),o=r.getProvider(DK),s=r.getProvider(PK);return new _K(i,a,o,s,n)};kl(new ds(fA,e,"PUBLIC").setMultipleInstances(!0)),pa(i6,a6,t),pa(i6,a6,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t=am(),e=Q_){const n=Op(Gt(t),fA).getImmediate({identifier:e}),i=dE("functions");return i&&KM(n,...i),n}function KM(t,e,r){wK(Gt(t),e,r)}function MK(t,e,r){return EK(Gt(t),e,r)}NK();const dA=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:ni,connectFunctionsEmulator:KM,getFunctions:WM,httpsCallable:MK},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM="firebasestorage.googleapis.com",YM="storageBucket",kK=120*1e3,jK=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ha{constructor(e,r,n=0){super(M2(e),`Firebase Storage: ${r} (${M2(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return M2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yr||(yr={}));function M2(t){return"storage/"+t}function hA(){const t="An unknown error occurred, please check the error payload for server response.";return new xr(yr.UNKNOWN,t)}function LK(t){return new xr(yr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function BK(t){return new xr(yr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xr(yr.UNAUTHENTICATED,t)}function zK(){return new xr(yr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FK(t){return new xr(yr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function VK(){return new xr(yr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HK(){return new xr(yr.CANCELED,"User canceled the upload/download.")}function $K(t){return new xr(yr.INVALID_URL,"Invalid URL '"+t+"'.")}function qK(t){return new xr(yr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GK(){return new xr(yr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YM+"' property when initializing the app?")}function WK(){return new xr(yr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KK(){return new xr(yr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XK(t){return new xr(yr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Z_(t){return new xr(yr.INVALID_ARGUMENT,t)}function QM(){return new xr(yr.APP_DELETED,"The Firebase app was deleted.")}function YK(t){return new xr(yr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zh(t,e){return new xr(yr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function bh(t){throw new xr(yr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Li.makeFromUrl(e,r)}catch{return new Li(e,"")}if(n.path==="")return n;throw qK(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function f(D){D.path_=decodeURIComponent(D.path)}const d="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),b={bucket:1,path:3},w=r===XM?"(?:storage.googleapis.com|storage.cloud.google.com)":r,E="([^?#]*)",S=new RegExp(`^https?://${w}/${i}/${E}`,"i"),O=[{regex:s,indices:c,postModify:a},{regex:y,indices:b,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let D=0;D<O.length;D++){const k=O[D],B=k.regex.exec(e);if(B){const R=B[k.indices.bucket];let N=B[k.indices.path];N||(N=""),n=new Li(R,N),k.postModify(n);break}}if(n==null)throw $K(e);return n}}class QK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZK(t,e,r){let n=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let f=!1;function d(...E){f||(f=!0,e.apply(null,E))}function p(E){i=setTimeout(()=>{i=null,t(y,c())},E)}function g(){a&&clearTimeout(a)}function y(E,...S){if(f){g();return}if(E){g(),d.call(null,E,...S);return}if(c()||o){g(),d.call(null,E,...S);return}n<64&&(n*=2);let O;s===1?(s=2,O=0):O=(n+Math.random())*1e3,p(O)}let b=!1;function w(E){b||(b=!0,g(),!f&&(i!==null?(E||(s=2),clearTimeout(i),p(0)):E||(s=1)))}return p(0),a=setTimeout(()=>{o=!0,w(!0)},r),w}function JK(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eX(t){return t!==void 0}function tX(t){return typeof t=="object"&&!Array.isArray(t)}function pA(t){return typeof t=="string"||t instanceof String}function o6(t){return gA()&&t instanceof Blob}function gA(){return typeof Blob<"u"}function s6(t,e,r,n){if(n<e)throw Z_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw Z_(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function ZM(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var Yc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Yc||(Yc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rX(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nX{constructor(e,r,n,i,a,o,s,c,f,d,p,g=!0,y=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,w)=>{this.resolve_=b,this.reject_=w,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new $g(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const c=s.loaded,f=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===Yc.NO_ERROR,c=a.getStatus();if(!s||rX(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Yc.ABORT;n(!1,new $g(!1,null,d));return}const f=this.successCodes_.indexOf(c)!==-1;n(!0,new $g(f,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(s,s.getResponse());eX(c)?a(c):a()}catch(c){o(c)}else if(s!==null){const c=hA();c.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,c)):o(c)}else if(i.canceled){const c=this.appDelete_?QM():HK();o(c)}else{const c=VK();o(c)}};this.canceled_?r(!1,new $g(!1,null,!0)):this.backoffId_=ZK(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&JK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $g{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function iX(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aX(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function oX(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sX(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function lX(t,e,r,n,i,a,o=!0,s=!1){const c=ZM(t.urlParams),f=t.url+c,d=Object.assign({},t.headers);return oX(d,e),iX(d,r),aX(d,a),sX(d,n),new nX(f,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cX(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function uX(...t){const e=cX();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(gA())return new Blob(t);throw new xr(yr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fX(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dX(t){if(typeof atob>"u")throw XK("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class k2{constructor(e,r){this.data=e,this.contentType=r||null}}function hX(t,e){switch(t){case po.RAW:return new k2(JM(e));case po.BASE64:case po.BASE64URL:return new k2(ek(t,e));case po.DATA_URL:return new k2(gX(e),vX(e))}throw hA()}function JM(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,o=t.charCodeAt(++r);n=65536|(a&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function pX(t){let e;try{e=decodeURIComponent(t)}catch{throw Zh(po.DATA_URL,"Malformed data URL.")}return JM(e)}function ek(t,e){switch(t){case po.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Zh(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case po.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Zh(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=dX(e)}catch(i){throw i.message.includes("polyfill")?i:Zh(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class tk{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Zh(po.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=mX(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function gX(t){const e=new tk(t);return e.base64?ek(po.BASE64,e.rest):pX(e.rest)}function vX(t){return new tk(t).contentType}function mX(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,r){let n=0,i="";o6(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(o6(this.data_)){const n=this.data_,i=fX(n,e,r);return i===null?null:new wl(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new wl(n,!0)}}static getBlob(...e){if(gA()){const r=e.map(n=>n instanceof wl?n.data_:n);return new wl(uX.apply(null,r))}else{const r=e.map(o=>pA(o)?hX(po.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(o=>{for(let s=0;s<o.length;s++)i[a++]=o[s]}),new wl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){let e;try{e=JSON.parse(t)}catch{return null}return tX(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function xX(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function nk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bX(t,e){return e}class Qn{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||bX}}let qg=null;function _X(t){return!pA(t)||t.length<2?t:nk(t)}function ik(){if(qg)return qg;const t=[];t.push(new Qn("bucket")),t.push(new Qn("generation")),t.push(new Qn("metageneration")),t.push(new Qn("name","fullPath",!0));function e(a,o){return _X(o)}const r=new Qn("name");r.xform=e,t.push(r);function n(a,o){return o!==void 0?Number(o):o}const i=new Qn("size");return i.xform=n,t.push(i),t.push(new Qn("timeCreated")),t.push(new Qn("updated")),t.push(new Qn("md5Hash",null,!0)),t.push(new Qn("cacheControl",null,!0)),t.push(new Qn("contentDisposition",null,!0)),t.push(new Qn("contentEncoding",null,!0)),t.push(new Qn("contentLanguage",null,!0)),t.push(new Qn("contentType",null,!0)),t.push(new Qn("metadata","customMetadata",!0)),qg=t,qg}function wX(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new Li(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function EX(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const o=r[a];n[o.local]=o.xform(n,e[o.server])}return wX(n,t),n}function ak(t,e,r){const n=rk(e);return n===null?null:EX(t,n,r)}function AX(t,e,r,n){const i=rk(e);if(i===null||!pA(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(f=>{const d=t.bucket,p=t.fullPath,g="/b/"+o(d)+"/o/"+o(p),y=vA(g,r,n),b=ZM({alt:"media",token:f});return y+b})[0]}function SX(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class ok{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){if(!t)throw hA()}function CX(t,e){function r(n,i){const a=ak(t,i,e);return sk(a!==null),a}return r}function TX(t,e){function r(n,i){const a=ak(t,i,e);return sk(a!==null),AX(a,i,t.host,t._protocol)}return r}function lk(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=zK():i=UK():r.getStatus()===402?i=BK(t.bucket):r.getStatus()===403?i=FK(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function IX(t){const e=lk(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=LK(t.path)),a.serverResponse=i.serverResponse,a}return r}function OX(t,e,r){const n=e.fullServerUrl(),i=vA(n,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,s=new ok(i,a,TX(t,r),o);return s.errorHandler=IX(e),s}function RX(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function PX(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=RX(null,e)),n}function DX(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function s(){let O="";for(let D=0;D<2;D++)O=O+Math.random().toString().slice(2);return O}const c=s();o["Content-Type"]="multipart/related; boundary="+c;const f=PX(e,n,i),d=SX(f,r),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,g=`\r
--`+c+"--",y=wl.getBlob(p,n,g);if(y===null)throw WK();const b={name:f.fullPath},w=vA(a,t.host,t._protocol),E="POST",S=t.maxUploadRetryTime,I=new ok(w,E,CX(t,r),S);return I.urlParams=b,I.headers=o,I.body=y.uploadData(),I.errorHandler=lk(e),I}class NX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i,a){if(this.sent_)throw bh("cannot .send() more than once");if(Oo(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MX extends NX{initXhr(){this.xhr_.responseType="text"}}function ck(){return new MX}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,r){this._service=e,r instanceof Li?this._location=r:this._location=Li.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new su(e,r)}get root(){const e=new Li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nk(this._location.path)}get storage(){return this._service}get parent(){const e=yX(this._location.path);if(e===null)return null;const r=new Li(this._location.bucket,e);return new su(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw YK(e)}}function kX(t,e,r){t._throwIfRoot("uploadBytes");const n=DX(t.storage,t._location,ik(),new wl(e,!0),r);return t.storage.makeRequestWithTokens(n,ck).then(i=>({metadata:i,ref:t}))}function jX(t){t._throwIfRoot("getDownloadURL");const e=OX(t.storage,t._location,ik());return t.storage.makeRequestWithTokens(e,ck).then(r=>{if(r===null)throw KK();return r})}function LX(t,e){const r=xX(t._location.path,e),n=new Li(t._location.bucket,r);return new su(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BX(t){return/^[A-Za-z]+:\/\//.test(t)}function UX(t,e){return new su(t,e)}function uk(t,e){if(t instanceof mA){const r=t;if(r._bucket==null)throw GK();const n=new su(r,r._bucket);return e!=null?uk(n,e):n}else return e!==void 0?LX(t,e):t}function zX(t,e){if(e&&BX(e)){if(t instanceof mA)return UX(t,e);throw Z_("To use ref(service, url), the first argument must be a Storage instance.")}else return uk(t,e)}function l6(t,e){const r=e?.[YM];return r==null?null:Li.makeFromBucketSpec(r,t)}function FX(t,e,r,n={}){t.host=`${e}:${r}`;const i=Oo(e);i&&(nm(`https://${t.host}/b`),im("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:TD(a,t.app.options.projectId))}class mA{constructor(e,r,n,i,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=XM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kK,this._maxUploadRetryTime=jK,this._requests=new Set,i!=null?this._bucket=Li.makeFromBucketSpec(i,this._host):this._bucket=l6(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Li.makeFromBucketSpec(this._url,e):this._bucket=l6(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){s6("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){s6("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new su(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new QK(QM());{const o=lX(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const c6="@firebase/storage",u6="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="storage";function yA(t,e,r){return t=Gt(t),kX(t,e,r)}function xA(t){return t=Gt(t),jX(t)}function bA(t,e){return t=Gt(t),zX(t,e)}function VX(t=am(),e){t=Gt(t);const n=Op(t,fk).getImmediate({identifier:e}),i=dE("storage");return i&&HX(n,...i),n}function HX(t,e,r,n={}){FX(t,e,r,n)}function $X(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new mA(r,n,i,e,gu)}function qX(){kl(new ds(fk,$X,"PUBLIC").setMultipleInstances(!0)),pa(c6,u6,""),pa(c6,u6,"esm2020")}qX();const GX={apiKey:"AIzaSyB_23qGagKyn6SqpNh1u7_EMqJWMN9MZuo",authDomain:"oshi-para.firebaseapp.com",projectId:"oshi-para",storageBucket:"oshi-para.firebasestorage.app",messagingSenderId:"123159056695",appId:"1:123159056695:web:b2226933dc6f6095220ab2"},Fp=RD(GX),Je=hK(Fp),ve=Lq(Fp);WM(Fp);const Rm=VX(Fp),_A=Object.freeze(Object.defineProperty({__proto__:null,auth:Je,db:ve,default:Fp,storage:Rm},Symbol.toStringTag,{value:"Module"})),It={INTAKES:"intakes",EXPENSES:"expenses",STOCKS:"stocks",SHOPPING:"shopping",RECIPES:"recipes",SETTINGS:"settings"},Ot=(t,e)=>`users/${t}/${e}`,_h={getAll:async t=>{const e=Ct(Ve(ve,Ot(t,It.INTAKES)),$r("createdAt","desc"));return(await vt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await rd(Ve(ve,Ot(t,It.INTAKES)),e)).id,update:async(t,e,r)=>{const n=Ue(ve,Ot(t,It.INTAKES),e);await nr(n,r)},delete:async(t,e)=>{const r=Ue(ve,Ot(t,It.INTAKES),e);await Ui(r)},subscribe:(t,e)=>{const r=Ct(Ve(ve,Ot(t,It.INTAKES)),$r("createdAt","desc"));return nd(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},j2={getAll:async t=>{const e=Ct(Ve(ve,Ot(t,It.EXPENSES)),$r("createdAt","desc"));return(await vt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await rd(Ve(ve,Ot(t,It.EXPENSES)),e)).id,update:async(t,e,r)=>{const n=Ue(ve,Ot(t,It.EXPENSES),e);await nr(n,r)},delete:async(t,e)=>{const r=Ue(ve,Ot(t,It.EXPENSES),e);await Ui(r)},subscribe:(t,e)=>{const r=Ct(Ve(ve,Ot(t,It.EXPENSES)),$r("createdAt","desc"));return nd(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},Gg={getAll:async t=>{const e=Ct(Ve(ve,Ot(t,It.STOCKS)),$r("createdAt","desc"));return(await vt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await rd(Ve(ve,Ot(t,It.STOCKS)),e)).id,update:async(t,e,r)=>{const n=Ue(ve,Ot(t,It.STOCKS),e);await nr(n,r)},delete:async(t,e)=>{const r=Ue(ve,Ot(t,It.STOCKS),e);await Ui(r)},subscribe:(t,e)=>{const r=Ct(Ve(ve,Ot(t,It.STOCKS)),$r("createdAt","desc"));return nd(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},wh={getAll:async t=>{const e=Ct(Ve(ve,Ot(t,It.SHOPPING)),$r("createdAt","desc"));return(await vt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await rd(Ve(ve,Ot(t,It.SHOPPING)),e)).id,update:async(t,e,r)=>{const n=Ue(ve,Ot(t,It.SHOPPING),e);await nr(n,r)},delete:async(t,e)=>{const r=Ue(ve,Ot(t,It.SHOPPING),e);await Ui(r)},subscribe:(t,e)=>{const r=Ct(Ve(ve,Ot(t,It.SHOPPING)),$r("createdAt","desc"));return nd(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},Wg={getAll:async t=>{const e=Ct(Ve(ve,Ot(t,It.RECIPES)),$r("createdAt","desc"));return(await vt(e)).docs.map(n=>({id:n.id,...n.data()}))},add:async(t,e)=>(await rd(Ve(ve,Ot(t,It.RECIPES)),e)).id,update:async(t,e,r)=>{const n=Ue(ve,Ot(t,It.RECIPES),e);await nr(n,r)},delete:async(t,e)=>{const r=Ue(ve,Ot(t,It.RECIPES),e);await Ui(r)},subscribe:(t,e)=>{const r=Ct(Ve(ve,Ot(t,It.RECIPES)),$r("createdAt","desc"));return nd(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));e(i)})}},Kg={get:async t=>{const e=Ct(Ve(ve,Ot(t,It.SETTINGS))),r=await vt(e);return r.empty?null:r.docs[0].data()},set:async(t,e)=>{const r=Ct(Ve(ve,Ot(t,It.SETTINGS))),n=await vt(r);if(n.empty)return(await rd(Ve(ve,Ot(t,It.SETTINGS)),e)).id;{const i=Ue(ve,Ot(t,It.SETTINGS),n.docs[0].id);return await nr(i,e),n.docs[0].id}},subscribe:(t,e)=>{const r=Ct(Ve(ve,Ot(t,It.SETTINGS)));return nd(r,n=>{if(n.empty)e(null);else{const i=n.docs[0].data();e(i)}})}},Po=pu((t,e)=>({intakes:Ml(it.INTAKES,[]),loading:!1,initialized:!1,unsubscribe:null,setIntakes:r=>t({intakes:r}),setLoading:r=>t({loading:r}),setInitialized:r=>t({initialized:r}),addIntake:async r=>{const n=Je.currentUser,i={id:Cl(),...r,date:new Date().toISOString(),createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.intakes,i];return Lt(it.INTAKES,o),{intakes:o}}),n)try{await _h.add(n.uid,i)}catch(a){console.error("Failed to add intake to Firestore:",a)}},updateIntake:async(r,n)=>{const i=Je.currentUser,a={...n,updatedAt:new Date().toISOString()};if(t(o=>{const s=o.intakes.map(c=>c.id===r?{...c,...a}:c);return Lt(it.INTAKES,s),{intakes:s}}),i)try{await _h.update(i.uid,r,a)}catch(o){console.error("Failed to update intake in Firestore:",o)}},deleteIntake:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.intakes.filter(o=>o.id!==r);return Lt(it.INTAKES,a),{intakes:a}}),n)try{await _h.delete(n.uid,r)}catch(i){console.error("Failed to delete intake from Firestore:",i)}},getIntakesByDate:r=>e().intakes.filter(i=>i.date.startsWith(r)),getTotalCaloriesByDate:r=>e().getIntakesByDate(r).reduce((i,a)=>i+a.calories,0),getTotalPriceByDate:r=>e().getIntakesByDate(r).reduce((i,a)=>i+a.price,0),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[IntakeStore] Syncing data for user: ${r.uid}`);const n=await _h.getAll(r.uid);console.log(`[IntakeStore] Loaded ${n.length} intakes from Firestore`),t({intakes:n,loading:!1,initialized:!0}),Lt(it.INTAKES,n)}catch(n){console.error("Failed to sync intakes with Firestore:",n),t({loading:!1})}},subscribeToFirestore:()=>{const r=Je.currentUser;if(!r)return;const n=e().unsubscribe;n&&n(),console.log(`[IntakeStore] Starting realtime sync for user: ${r.uid}`);const i=_h.subscribe(r.uid,a=>{console.log(`[IntakeStore] Realtime update: ${a.length} intakes`),t({intakes:a}),Lt(it.INTAKES,a)});t({unsubscribe:i})},unsubscribeFromFirestore:()=>{const r=e().unsubscribe;r&&(console.log("[IntakeStore] Stopping realtime sync"),r(),t({unsubscribe:null}))}})),Do=pu((t,e)=>({expenses:Ml(it.EXPENSES,[]),loading:!1,initialized:!1,setExpenses:r=>t({expenses:r}),addExpense:async r=>{const n=Je.currentUser,i={id:Cl(),...r,date:r.date||new Date().toISOString(),createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.expenses,i];return Lt(it.EXPENSES,o),{expenses:o}}),n)try{await j2.add(n.uid,i)}catch(a){console.error("Failed to add expense to Firestore:",a)}},deleteExpense:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.expenses.filter(o=>o.id!==r);return Lt(it.EXPENSES,a),{expenses:a}}),n)try{await j2.delete(n.uid,r)}catch(i){console.error("Failed to delete expense from Firestore:",i)}},getExpensesByMonth:(r,n)=>e().expenses.filter(a=>{const o=new Date(a.date);return o.getFullYear()===r&&o.getMonth()+1===n}),getTotalByMonth:(r,n)=>e().getExpensesByMonth(r,n).reduce((a,o)=>a+o.amount,0),getTotalByCategory:(r,n,i)=>e().getExpensesByMonth(n,i).filter(o=>o.category===r).reduce((o,s)=>o+s.amount,0),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await j2.getAll(r.uid);t({expenses:n,loading:!1,initialized:!0}),Lt(it.EXPENSES,n)}catch(n){console.error("Failed to sync expenses with Firestore:",n),t({loading:!1})}}})),No=pu((t,e)=>({stocks:Ml(it.STOCKS,[]),loading:!1,initialized:!1,setStocks:r=>t({stocks:r}),addStock:async r=>{const n=Je.currentUser,i={id:Cl(),...r,createdAt:new Date().toISOString()};if(t(a=>{const o=[...a.stocks,i];return Lt(it.STOCKS,o),{stocks:o}}),n)try{await Gg.add(n.uid,i)}catch(a){console.error("Failed to add stock to Firestore:",a)}},updateStock:async(r,n)=>{const i=Je.currentUser,a={...n,updatedAt:new Date().toISOString()};if(t(o=>{const s=o.stocks.map(c=>c.id===r?{...c,...a}:c);return Lt(it.STOCKS,s),{stocks:s}}),i)try{await Gg.update(i.uid,r,a)}catch(o){console.error("Failed to update stock in Firestore:",o)}},deleteStock:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.stocks.filter(o=>o.id!==r);return Lt(it.STOCKS,a),{stocks:a}}),n)try{await Gg.delete(n.uid,r)}catch(i){console.error("Failed to delete stock from Firestore:",i)}},getExpiringStocks:r=>e().stocks.filter(i=>i.daysRemaining<=r),getStockIngredients:()=>e().stocks.map(n=>n.name),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await Gg.getAll(r.uid);t({stocks:n,loading:!1,initialized:!0}),Lt(it.STOCKS,n)}catch(n){console.error("Failed to sync stocks with Firestore:",n),t({loading:!1})}}})),WX=[{name:"米",quantity:1,category:"staple"},{name:"卵",quantity:10,category:"protein"},{name:"牛乳",quantity:1,category:"dairy"},{name:"パン",quantity:1,category:"staple"},{name:"鶏肉",quantity:1,category:"protein"},{name:"豚肉",quantity:1,category:"protein"},{name:"玉ねぎ",quantity:3,category:"vegetable"},{name:"にんじん",quantity:3,category:"vegetable"},{name:"じゃがいも",quantity:3,category:"vegetable"},{name:"トマト",quantity:3,category:"vegetable"},{name:"バナナ",quantity:1,category:"fruit"},{name:"ヨーグルト",quantity:1,category:"dairy"},{name:"醤油",quantity:1,category:"seasoning"},{name:"塩",quantity:1,category:"seasoning"}],yu=pu((t,e)=>({items:Ml(it.SHOPPING,[]),loading:!1,initialized:!1,setItems:r=>t({items:r}),addItem:async r=>{const n=Je.currentUser;if(e().items.find(o=>o.name===r.name&&!o.checked))return;const a={id:Cl(),...r,checked:!1,createdAt:new Date().toISOString()};if(t(o=>{const s=[...o.items,a];return Lt(it.SHOPPING,s),{items:s}}),n)try{await wh.add(n.uid,a)}catch(o){console.error("Failed to add shopping item to Firestore:",o)}},toggleItem:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.items.map(o=>o.id===r?{...o,checked:!o.checked,updatedAt:new Date().toISOString()}:o);return Lt(it.SHOPPING,a),{items:a}}),n)try{const i=e().items.find(a=>a.id===r);i&&await wh.update(n.uid,r,{checked:i.checked,updatedAt:new Date().toISOString()})}catch(i){console.error("Failed to toggle shopping item in Firestore:",i)}},deleteItem:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.items.filter(o=>o.id!==r);return Lt(it.SHOPPING,a),{items:a}}),n)try{await wh.delete(n.uid,r)}catch(i){console.error("Failed to delete shopping item from Firestore:",i)}},clearCompleted:async()=>{const r=Je.currentUser,n=e().items.filter(i=>i.checked).map(i=>i.id);if(t(i=>{const a=i.items.filter(o=>!o.checked);return Lt(it.SHOPPING,a),{items:a}}),r)try{await Promise.all(n.map(i=>wh.delete(r.uid,i)))}catch(i){console.error("Failed to clear completed items from Firestore:",i)}},addWeeklyEssentials:()=>{t(r=>{const n=r.items,i=[...n];return WX.forEach(a=>{n.find(s=>s.name===a.name&&!s.checked)||i.push({id:Cl(),name:a.name,quantity:a.quantity,category:a.category,checked:!1,createdAt:new Date().toISOString()})}),Lt(it.SHOPPING,i),{items:i}})},addLowStockItems:r=>{t(n=>{const i=n.items,a=[...i];return r.forEach(o=>{i.find(c=>c.name===o.name&&!c.checked)||a.push({id:Cl(),name:o.name,quantity:1,category:o.category,checked:!1,createdAt:new Date().toISOString()})}),Lt(it.SHOPPING,a),{items:a}})},syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0});const n=await wh.getAll(r.uid);t({items:n,loading:!1,initialized:!0}),Lt(it.SHOPPING,n)}catch(n){console.error("Failed to sync shopping items with Firestore:",n),t({loading:!1})}}})),KX=10,Vp=pu((t,e)=>({recipeHistory:Ml(it.RECIPE_HISTORY,[]),favoriteRecipes:Ml(it.FAVORITE_RECIPES,[]),loading:!1,initialized:!1,setRecipes:(r,n)=>t({recipeHistory:r,favoriteRecipes:n}),addToHistory:async r=>{const n=Je.currentUser,i={id:Cl(),recipe:r,generatedAt:new Date().toISOString()};if(t(a=>{const o=[i,...a.recipeHistory].slice(0,KX);return Lt(it.RECIPE_HISTORY,o),{recipeHistory:o}}),n)try{await Wg.add(n.uid,i)}catch(a){console.error("Failed to add recipe history to Firestore:",a)}},addToFavorites:async r=>{const n=Je.currentUser;if(e().favoriteRecipes.find(o=>o.id===r.id))return;const a={...r,isFavorite:!0};if(t(o=>{const s=[a,...o.favoriteRecipes];return Lt(it.FAVORITE_RECIPES,s),{favoriteRecipes:s}}),n)try{await Wg.add(n.uid,a)}catch(o){console.error("Failed to add favorite recipe to Firestore:",o)}},removeFromFavorites:async r=>{const n=Je.currentUser;if(t(i=>{const a=i.favoriteRecipes.filter(o=>o.id!==r);return Lt(it.FAVORITE_RECIPES,a),{favoriteRecipes:a}}),n)try{await Wg.delete(n.uid,r)}catch(i){console.error("Failed to delete favorite recipe from Firestore:",i)}},isFavorite:r=>e().favoriteRecipes.some(i=>i.id===r),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[RecipeStore] Syncing data for user: ${r.uid}`);const i=await Wg.getAll(r.uid),a=[];console.log(`[RecipeStore] Loaded ${i.length} recipes from Firestore`),t({recipeHistory:a,favoriteRecipes:i,loading:!1,initialized:!0}),Lt(it.RECIPE_HISTORY,a),Lt(it.FAVORITE_RECIPES,i)}catch(n){console.error("Failed to sync recipes with Firestore:",n),t({loading:!1})}}})),f6={monthlyBudget:3e4,darkMode:!1,firstTime:!0},av=pu((t,e)=>({settings:{...f6,...Ml(it.SETTINGS,f6)},loading:!1,initialized:!1,updateSettings:async r=>{const n=Je.currentUser;if(t(i=>{const a={...i.settings,...r};return Lt(it.SETTINGS,a),"darkMode"in r&&document.body.classList.toggle("dark-mode",r.darkMode),{settings:a}}),n)try{const i=e().settings;await Kg.set(n.uid,i)}catch(i){console.error("Failed to update settings in Firestore:",i)}},toggleDarkMode:async()=>{const r=Je.currentUser,n=!e().settings.darkMode;if(t(i=>{const a={...i.settings,darkMode:n};return Lt(it.SETTINGS,a),document.body.classList.toggle("dark-mode",n),{settings:a}}),r)try{const i=e().settings;await Kg.set(r.uid,i)}catch(i){console.error("Failed to toggle dark mode in Firestore:",i)}},setFirstTime:r=>t(n=>{const i={...n.settings,firstTime:r};return Lt(it.SETTINGS,i),{settings:i}}),syncWithFirestore:async()=>{const r=Je.currentUser;if(r)try{t({loading:!0}),console.log(`[SettingsStore] Syncing data for user: ${r.uid}`);const n=await Kg.get(r.uid);if(n)console.log("[SettingsStore] Loaded settings from Firestore"),t({settings:n,loading:!1,initialized:!0}),Lt(it.SETTINGS,n),document.body.classList.toggle("dark-mode",n.darkMode);else{console.log("[SettingsStore] No settings found, using defaults");const i=e().settings;await Kg.set(r.uid,i),t({loading:!1,initialized:!0})}}catch(n){console.error("Failed to sync settings with Firestore:",n),t({loading:!1})}}})),ov=[{id:"streak-3",name:"3日連続記録",description:"3日間連続で食事を記録しました",icon:"🔥",category:"streak",requirement:"3日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=3},{id:"streak-7",name:"1週間継続",description:"7日間連続で食事を記録しました",icon:"🎯",category:"streak",requirement:"7日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=7},{id:"streak-14",name:"2週間チャンピオン",description:"14日間連続で食事を記録しました",icon:"🏆",category:"streak",requirement:"14日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=14},{id:"streak-30",name:"1ヶ月マスター",description:"30日間連続で食事を記録しました",icon:"👑",category:"streak",requirement:"30日間連続で食事記録",checkCondition:t=>t.consecutiveDays>=30},{id:"milestone-10-intakes",name:"記録の第一歩",description:"食事記録が10件に達しました",icon:"📝",category:"milestone",requirement:"食事記録10件",checkCondition:t=>t.intakesCount>=10},{id:"milestone-50-intakes",name:"記録マスター",description:"食事記録が50件に達しました",icon:"📚",category:"milestone",requirement:"食事記録50件",checkCondition:t=>t.intakesCount>=50},{id:"milestone-100-intakes",name:"記録の達人",description:"食事記録が100件に達しました",icon:"🎓",category:"milestone",requirement:"食事記録100件",checkCondition:t=>t.intakesCount>=100},{id:"goal-budget-first",name:"節約家デビュー",description:"先月の支出が予算内に収まりました！",icon:"💰",category:"goal",requirement:"月次予算達成（毎月1日に先月分を判定）",checkCondition:t=>t.budgetAchieved},{id:"feature-recipe-first",name:"AIシェフデビュー",description:"初めてAIレシピを生成しました",icon:"👨‍🍳",category:"feature",requirement:"AIレシピ生成1回",checkCondition:t=>t.recipesGenerated>=1},{id:"feature-recipe-10",name:"レシピマスター",description:"AIレシピを10回生成しました",icon:"🍳",category:"feature",requirement:"AIレシピ生成10回",checkCondition:t=>t.recipesGenerated>=10},{id:"feature-barcode-first",name:"スキャナーデビュー",description:"初めてバーコードをスキャンしました",icon:"📱",category:"feature",requirement:"バーコードスキャン1回",checkCondition:t=>t.barcodesScanned>=1},{id:"feature-barcode-10",name:"スキャンマスター",description:"バーコードを10回スキャンしました",icon:"🔍",category:"feature",requirement:"バーコードスキャン10回",checkCondition:t=>t.barcodesScanned>=10},{id:"milestone-all-features",name:"フル活用マスター",description:"すべての機能を使いこなしています",icon:"⭐",category:"milestone",requirement:"全機能の使用",checkCondition:t=>t.intakesCount>=5&&t.expensesCount>=5&&t.stocksCount>=3&&t.recipesGenerated>=1&&t.barcodesScanned>=1}];function XX(t){return ov.find(e=>e.id===t)}const wA=pu((t,e)=>({badges:Ml(it.BADGES,[]),newBadges:[],loading:!1,checkAndUnlockBadges:r=>{const n=e().badges,i=n.map(o=>o.id),a=[];return ov.forEach(o=>{if(!i.includes(o.id)&&o.checkCondition(r)){const s={id:o.id,name:o.name,description:o.description,icon:o.icon,category:o.category,requirement:o.requirement,unlockedAt:new Date().toISOString()};n.push(s),a.push(o.id)}}),a.length>0&&(t({badges:n,newBadges:a}),Lt(it.BADGES,n)),a},clearNewBadges:()=>{t({newBadges:[]})},getBadge:r=>e().badges.find(n=>n.id===r),isUnlocked:r=>e().badges.some(n=>n.id===r),getUnlockedCount:()=>e().badges.length,getTotalCount:()=>ov.length})),YX=()=>{const{getTotalCaloriesByDate:t}=Po(),{getTotalByMonth:e}=Do(),r=C.useMemo(()=>{const i=new Date().toISOString().split("T")[0];return t(i)},[t]),n=C.useMemo(()=>{const i=new Date;return e(i.getFullYear(),i.getMonth()+1)},[e]);return m.jsxs("div",{className:"summary-box",children:[m.jsxs("div",{className:"summary-row",children:[m.jsx("span",{className:"summary-label",children:"今日のカロリー"}),m.jsxs("span",{className:"summary-value",children:[r," kcal"]})]}),m.jsxs("div",{className:"summary-row",children:[m.jsx("span",{className:"summary-label",children:"今月の支出"}),m.jsxs("span",{className:"summary-value positive",children:["¥",n.toLocaleString()]})]})]})},QX=({onNavigate:t})=>{const e=[{screen:"meals",icon:m.jsx(lE,{size:32}),label:"食事記録",color:"#3b82f6"},{screen:"barcode",icon:m.jsx(rp,{size:32}),label:"スキャン",color:"#8b5cf6"},{screen:"expense",icon:m.jsx(zz,{size:32}),label:"家計簿",color:"#10b981"},{screen:"stock",icon:m.jsx(If,{size:32}),label:"在庫管理",color:"#f59e0b"},{screen:"recipe",icon:m.jsx(L1,{size:32}),label:"AIレシピ",color:"#ef4444"},{screen:"shopping",icon:m.jsx(em,{size:32}),label:"買い物",color:"#06b6d4"},{screen:"report",icon:m.jsx(Fz,{size:32}),label:"レポート",color:"#6366f1"},{screen:"badges",icon:m.jsx(Kz,{size:32}),label:"バッジ",color:"#f59e0b"},{screen:"settings",icon:m.jsx(Nz,{size:32}),label:"設定",color:"#64748b"}],r=n=>{n.onClick?n.onClick():n.screen&&t(n.screen)};return m.jsx("div",{className:"function-grid",children:e.map((n,i)=>m.jsxs("button",{className:"function-card",style:{"--card-color":n.color},onClick:()=>r(n),children:[m.jsx("div",{className:"function-icon",style:{color:n.color},children:n.icon}),m.jsx("div",{className:"function-label",children:n.label})]},i))})},d6=({onNavigate:t})=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"ホーム"}),m.jsx(YX,{}),m.jsx(QX,{onNavigate:t})]}),ZX=()=>{const{addIntake:t}=Po(),[e,r]=C.useState(""),[n,i]=C.useState(""),[a,o]=C.useState(""),s=()=>{if(!e||!n||!a){alert("すべての項目を入力してください");return}t({name:e,calories:Number(n),price:Number(a)}),r(""),i(""),o(""),alert("食事を記録しました！")};return m.jsxs("div",{className:"card",children:[m.jsx("label",{children:"食品名"}),m.jsx("input",{value:e,onChange:c=>r(c.target.value),placeholder:"例: 牛乳"}),m.jsx("label",{children:"カロリー(kcal)"}),m.jsx("input",{type:"number",value:n,onChange:c=>i(c.target.value),placeholder:"200"}),m.jsx("label",{children:"金額(円)"}),m.jsx("input",{type:"number",value:a,onChange:c=>o(c.target.value),placeholder:"150"}),m.jsx("button",{className:"submit",onClick:s,children:"記録する"})]})},JX=()=>{const{intakes:t,deleteIntake:e,getTotalCaloriesByDate:r,getTotalPriceByDate:n}=Po(),i=C.useMemo(()=>{const f=new Date().toISOString().split("T")[0];return t.filter(d=>d.date.startsWith(f))},[t]),a=new Date().toISOString().split("T")[0],o=r(a),s=n(a),c=f=>{confirm("この記録を削除しますか？")&&e(f)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"今日の記録"}),i.length===0?m.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"まだ記録がありません"}):m.jsxs(m.Fragment,{children:[m.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:i.map(f=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:f.name}),m.jsxs("div",{style:{fontSize:"0.9rem",color:"#666"},children:[f.calories," kcal · ¥",f.price]})]}),m.jsx("button",{onClick:()=>c(f.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},children:m.jsx(Yf,{size:20})})]},f.id))}),m.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--card)",borderRadius:"8px",display:"flex",justifyContent:"space-between"},children:[m.jsxs("span",{children:[m.jsx("strong",{children:"合計カロリー:"})," ",o," kcal"]}),m.jsxs("span",{children:[m.jsx("strong",{children:"合計金額:"})," ¥",s]})]})]})]})},eY=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"食事記録"}),m.jsx(ZX,{}),m.jsx(JX,{})]}),tY=async(t,e)=>{try{return{user:(await QG(Je,t,e)).user,error:null}}catch(r){return{user:null,error:r.message}}},rY=async()=>{const t=new es;try{return{user:(await wW(Je,t)).user,error:null}}catch(e){return{user:null,error:e.message}}},nY=async()=>{try{return await rW(Je),localStorage.clear(),{error:null}}catch(t){return{error:t.message}}},iY=t=>tW(Je,t),As=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!0);return C.useEffect(()=>{const i=iY(a=>{e(a),n(!1)});return()=>i()},[]),{user:t,loading:r}},EA=async(t,e,r)=>{try{const n={uid:t,displayName:r,username:`user${t.slice(0,8)}`,email:e,bio:"",avatarUrl:"",coverUrl:"",websiteUrl:"",isPublic:!0,createdAt:new Date().toISOString(),stats:{postCount:0,followerCount:0,followingCount:0,recipeCount:0,likeCount:0}};console.log("📝 Creating user profile for:",t),console.log("📝 Profile data:",n);const i=Ue(ve,"users",t,"profile","data");console.log("📝 Profile document path:",i.path),await Xl(i,n),console.log("✅ User profile created successfully:",t)}catch(n){throw console.error("❌ Failed to create user profile:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),console.error("Error details:",JSON.stringify(n,null,2)),new Error(`プロフィール作成に失敗しました: ${n.message||n.code||"不明なエラー"}`)}},Fi=async t=>{try{const e=await Ro(Ue(ve,"users",t,"profile","data"));return e.exists()?e.data():null}catch(e){throw console.error("Get profile error:",e),new Error("プロフィールの取得に失敗しました")}},aY=async(t,e)=>{try{await nr(Ue(ve,"users",t,"profile","data"),e),e.displayName&&Je.currentUser&&await DM(Je.currentUser,{displayName:e.displayName,photoURL:e.avatarUrl||Je.currentUser.photoURL}),console.log("✅ Profile updated:",t)}catch(r){throw console.error("Update profile error:",r),new Error("プロフィールの更新に失敗しました")}},oY=async(t,e)=>{try{const r=Ve(ve,"users"),n=Ct(r),i=await vt(n);for(const a of i.docs){if(a.id===e)continue;const o=Ue(ve,"users",a.id,"profile","data");try{const s=await Ro(o);if(s.exists()&&s.data().username===t)return!1}catch{console.log(`No profile for user ${a.id}`)}}return!0}catch(r){return console.error("Username check error:",r),!0}},sY=t=>t.length<3||t.length>20?{valid:!1,error:"ユーザー名は3〜20文字で入力してください"}:/^[a-zA-Z0-9_]+$/.test(t)?/^[a-zA-Z]/.test(t)?{valid:!0}:{valid:!1,error:"ユーザー名は英字で始める必要があります"}:{valid:!1,error:"ユーザー名は英数字とアンダースコア(_)のみ使用できます"},lY=async t=>{try{const e=Ve(ve,"users"),r=await vt(e);for(const n of r.docs){const i=Ue(ve,"users",n.id,"profile","data"),a=await Ro(i);if(a.exists()){const o=a.data();if(o.username.toLowerCase()===t.toLowerCase())return o.uid}}return null}catch(e){return console.error("Get user ID by username error:",e),null}},AA=async(t,e,r,n,i)=>{console.log(`[followUser] Starting: ${t} → ${n}`);try{const a=Ue(ve,`users/${n}/followers/${t}`);if(console.log("[followUser] Checking if already following..."),(await Ro(a)).exists()){console.log(`⚠️ Already following: ${t} → ${n}`);return}const s={id:t,followerId:t,followerName:e,followerAvatar:r,followingId:n,followingName:i,createdAt:new Date().toISOString()};console.log("[followUser] Creating follow document..."),console.log("[followUser] Follow data:",s),await Xl(a,s),console.log("✅ [followUser] Follow document created"),console.log("[followUser] Updating follower's followingCount...");const c=Ue(ve,`users/${t}/profile/data`);await nr(c,{"stats.followingCount":zi(1)}),console.log("✅ [followUser] Follower's followingCount updated"),console.log("[followUser] Updating target's followerCount...");const f=Ue(ve,`users/${n}/profile/data`);await nr(f,{"stats.followerCount":zi(1)}),console.log("✅ [followUser] Target's followerCount updated"),console.log(`✅ [followUser] Complete: ${t} → ${n}`)}catch(a){throw console.error("❌ [followUser] Error:",a),console.error("❌ [followUser] Error code:",a.code),console.error("❌ [followUser] Error message:",a.message),new Error(`フォローに失敗しました: ${a.message||a.code||"不明なエラー"}`)}},SA=async(t,e)=>{console.log(`[unfollowUser] Starting: ${t} X ${e}`);try{const r=Ue(ve,`users/${e}/followers/${t}`);console.log("[unfollowUser] Deleting follow document..."),await Ui(r),console.log("✅ [unfollowUser] Follow document deleted"),console.log("[unfollowUser] Updating follower's followingCount...");const n=Ue(ve,`users/${t}/profile/data`);await nr(n,{"stats.followingCount":zi(-1)}),console.log("✅ [unfollowUser] Follower's followingCount updated"),console.log("[unfollowUser] Updating target's followerCount...");const i=Ue(ve,`users/${e}/profile/data`);await nr(i,{"stats.followerCount":zi(-1)}),console.log("✅ [unfollowUser] Target's followerCount updated"),console.log(`✅ [unfollowUser] Complete: ${t} X ${e}`)}catch(r){throw console.error("❌ [unfollowUser] Error:",r),console.error("❌ [unfollowUser] Error code:",r.code),console.error("❌ [unfollowUser] Error message:",r.message),new Error(`アンフォローに失敗しました: ${r.message||r.code||"不明なエラー"}`)}},CA=async(t,e)=>{try{const r=Ue(ve,`users/${e}/followers/${t}`);return(await Ro(r)).exists()}catch(r){return console.error("Check follow error:",r),!1}},cY=async t=>{try{const e=Ve(ve,`users/${t}/followers`),r=await vt(e),n=[],i=Je.currentUser;for(const a of r.docs){const o=a.data(),s=await Fi(o.followerId);if(s){let c=!1;i&&i.uid!==t&&(c=await CA(i.uid,o.followerId)),n.push({uid:s.uid,displayName:s.displayName,username:s.username,avatarUrl:s.avatarUrl,bio:s.bio,isFollowing:c})}}return n.sort((a,o)=>a.displayName.localeCompare(o.displayName))}catch(e){return console.error("Get followers error:",e),[]}},dk=async t=>{try{const e=Ve(ve,"users"),r=await vt(e),n=[],i=Je.currentUser;for(const a of r.docs){const o=Ve(ve,`users/${a.id}/followers`),s=await vt(o);for(const c of s.docs)if(c.data().followerId===t){const d=await Fi(a.id);if(d){let p=!1;i&&i.uid!==t&&(p=await CA(i.uid,d.uid)),n.push({uid:d.uid,displayName:d.displayName,username:d.username,avatarUrl:d.avatarUrl,bio:d.bio,isFollowing:p})}}}return n.sort((a,o)=>a.displayName.localeCompare(o.displayName))}catch(e){return console.error("Get following error:",e),[]}},TA=(t,e,r)=>new Promise((n,i)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=o=>{const s=new Image;s.src=o.target?.result,s.onload=()=>{const c=document.createElement("canvas");let f=s.width,d=s.height;f>d?f>e&&(d=d*e/f,f=e):d>r&&(f=f*r/d,d=r),c.width=f,c.height=d,c.getContext("2d")?.drawImage(s,0,0,f,d),c.toBlob(g=>{g?n(g):i(new Error("画像のリサイズに失敗しました"))},t.type)},s.onerror=()=>i(new Error("画像の読み込みに失敗しました"))},a.onerror=()=>i(new Error("ファイルの読み込みに失敗しました"))}),uY=async(t,e)=>{try{const r=await TA(e,512,512),n=bA(Rm,`avatars/${t}/${Date.now()}_avatar.jpg`);await yA(n,r);const i=await xA(n);return console.log("✅ Avatar uploaded:",i),i}catch(r){throw console.error("Avatar upload error:",r),new Error("プロフィール画像のアップロードに失敗しました")}},fY=async(t,e)=>{try{const r=await TA(e,1200,400),n=bA(Rm,`covers/${t}/${Date.now()}_cover.jpg`);await yA(n,r);const i=await xA(n);return console.log("✅ Cover uploaded:",i),i}catch(r){throw console.error("Cover upload error:",r),new Error("カバー画像のアップロードに失敗しました")}},dY=async(t,e)=>{try{const r=await TA(e,1080,1080),n=bA(Rm,`posts/${t}/${Date.now()}_${e.name}`);await yA(n,r);const i=await xA(n);return console.log("✅ Post image uploaded:",i),i}catch(r){throw console.error("Post image upload error:",r),new Error("投稿画像のアップロードに失敗しました")}},h6=t=>t.size>10485760?{valid:!1,error:"画像サイズは10MB以下にしてください"}:["image/jpeg","image/png","image/gif","image/webp"].includes(t.type)?{valid:!0}:{valid:!1,error:"対応している画像形式: JPEG, PNG, GIF, WebP"},hY=({onBack:t})=>{const[e,r]=C.useState(null),[n,i]=C.useState(""),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(!0),[y,b]=C.useState(""),[w,E]=C.useState(""),[S,I]=C.useState(!1),[O,D]=C.useState(!1),[k,B]=C.useState(!1),[R,N]=C.useState(""),[L,U]=C.useState(""),j=C.useRef(null),V=C.useRef(null);C.useEffect(()=>{F()},[]);const F=async()=>{try{const ie=Je.currentUser;if(!ie)return;const K=await Fi(ie.uid);K&&(r(K),i(K.displayName),o(K.username),c(K.bio||""),d(K.websiteUrl||""),g(K.isPublic),b(K.avatarUrl||""),E(K.coverUrl||""))}catch(ie){console.error("Load profile error:",ie),N("プロフィールの読み込みに失敗しました")}},he=async ie=>{const K=ie.target.files?.[0];if(!K)return;const ge=h6(K);if(!ge.valid){N(ge.error||"");return}D(!0),N("");try{const Ie=Je.currentUser;if(!Ie)throw new Error("ログインが必要です");const G=await uY(Ie.uid,K);b(G),U("アイコン画像をアップロードしました")}catch(Ie){console.error("Avatar upload error:",Ie),N(Ie.message||"アイコン画像のアップロードに失敗しました")}finally{D(!1)}},we=async ie=>{const K=ie.target.files?.[0];if(!K)return;const ge=h6(K);if(!ge.valid){N(ge.error||"");return}B(!0),N("");try{const Ie=Je.currentUser;if(!Ie)throw new Error("ログインが必要です");const G=await fY(Ie.uid,K);E(G),U("カバー画像をアップロードしました")}catch(Ie){console.error("Cover upload error:",Ie),N(Ie.message||"カバー画像のアップロードに失敗しました")}finally{B(!1)}},Y=async()=>{N(""),U(""),I(!0);try{const ie=Je.currentUser;if(!ie)throw new Error("ログインが必要です");if(!n.trim()){N("表示名を入力してください"),I(!1);return}const K=sY(a);if(!K.valid){N(K.error||""),I(!1);return}if(a!==e?.username&&!await oY(a,ie.uid)){N("このユーザー名は既に使用されています"),I(!1);return}await aY(ie.uid,{displayName:n.trim(),username:a,bio:s.trim(),websiteUrl:f.trim(),isPublic:p,avatarUrl:y,coverUrl:w}),U("プロフィールを更新しました！"),setTimeout(()=>U(""),3e3)}catch(ie){console.error("Save profile error:",ie),N(ie.message||"プロフィールの更新に失敗しました")}finally{I(!1)}};return m.jsxs("div",{className:"profile-edit-screen",children:[m.jsxs("div",{className:"profile-edit-header",children:[m.jsxs("button",{onClick:t,className:"back-button",children:[m.jsx(Cp,{})," 戻る"]}),m.jsx("h2",{children:"プロフィール編集"}),m.jsxs("button",{onClick:Y,className:"save-button",disabled:S,children:[m.jsx(sE,{})," ",S?"保存中...":"保存"]})]}),R&&m.jsx("div",{className:"error-message",children:R}),L&&m.jsx("div",{className:"success-message",children:L}),m.jsx("div",{className:"cover-section",children:m.jsxs("div",{className:"cover-image",style:{backgroundImage:w?`url(${w})`:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)"},children:[m.jsxs("button",{onClick:()=>V.current?.click(),className:"cover-upload-button",disabled:k,children:[m.jsx(rp,{})," ",k?"アップロード中...":"カバー画像を変更"]}),m.jsx("input",{ref:V,type:"file",accept:"image/*",onChange:we,style:{display:"none"}})]})}),m.jsx("div",{className:"avatar-section",children:m.jsxs("div",{className:"avatar-image",children:[y?m.jsx("img",{src:y,alt:"Avatar"}):m.jsx("div",{className:"avatar-placeholder",children:m.jsx(Of,{size:60})}),m.jsx("button",{onClick:()=>j.current?.click(),className:"avatar-upload-button",disabled:O,children:m.jsx(rp,{})}),m.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:he,style:{display:"none"}})]})}),m.jsxs("div",{className:"profile-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Of,{})," 表示名"]}),m.jsx("input",{type:"text",value:n,onChange:ie=>i(ie.target.value),placeholder:"山田太郎",maxLength:50}),m.jsxs("span",{className:"char-count",children:[n.length,"/50"]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(tm,{})," ユーザー名"]}),m.jsxs("div",{className:"username-input",children:[m.jsx("span",{className:"username-prefix",children:"@"}),m.jsx("input",{type:"text",value:a,onChange:ie=>o(ie.target.value.toLowerCase()),placeholder:"yamada_taro",maxLength:20})]}),m.jsx("span",{className:"hint",children:"英数字とアンダースコア（_）のみ使用可能"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"自己紹介"}),m.jsx("textarea",{value:s,onChange:ie=>c(ie.target.value),placeholder:"あなたについて教えてください...",maxLength:200,rows:4}),m.jsxs("span",{className:"char-count",children:[s.length,"/200"]})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(gD,{})," WebサイトURL"]}),m.jsx("input",{type:"url",value:f,onChange:ie=>d(ie.target.value),placeholder:"https://example.com"})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{className:"toggle-label",children:[p?m.jsx(xD,{}):m.jsx(Sl,{}),"プロフィールを公開する",m.jsx("input",{type:"checkbox",checked:p,onChange:ie=>g(ie.target.checked),className:"toggle-switch"})]}),m.jsx("span",{className:"hint",children:p?"誰でもあなたのプロフィールを閲覧できます":"フォロワーのみプロフィールを閲覧できます"})]})]}),m.jsx("style",{children:`
        .profile-edit-screen {
          min-height: 100vh;
          background: var(--background);
          padding-bottom: 80px;
        }

        .profile-edit-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 16px;
          background: var(--card);
          border-bottom: 1px solid var(--border);
          position: sticky;
          top: 0;
          z-index: 10;
        }

        .profile-edit-header h2 {
          color: var(--text);
          font-size: 20px;
          margin: 0;
        }

        .back-button,
        .save-button {
          padding: 8px 16px;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button {
          background: var(--background);
          color: var(--text);
        }

        .back-button:hover {
          background: var(--border);
        }

        .save-button {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
        }

        .save-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .save-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .error-message {
          margin: 16px;
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .success-message {
          margin: 16px;
          padding: 12px;
          background: #e8f5e9;
          color: #2e7d32;
          border-radius: 8px;
          font-size: 14px;
        }

        body.dark-mode .success-message {
          background: #1b5e20;
          color: #a5d6a7;
        }

        .cover-section {
          position: relative;
        }

        .cover-image {
          width: 100%;
          height: 200px;
          background-size: cover;
          background-position: center;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .cover-upload-button {
          padding: 10px 20px;
          background: rgba(0, 0, 0, 0.6);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .cover-upload-button:hover:not(:disabled) {
          background: rgba(0, 0, 0, 0.8);
        }

        .cover-upload-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .avatar-section {
          display: flex;
          justify-content: center;
          margin-top: -60px;
          padding: 0 16px;
        }

        .avatar-image {
          position: relative;
          width: 120px;
          height: 120px;
          border-radius: 50%;
          border: 4px solid var(--card);
          background: var(--background);
          overflow: hidden;
        }

        .avatar-image img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .avatar-placeholder {
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          background: var(--border);
        }

        .avatar-upload-button {
          position: absolute;
          bottom: 0;
          right: 0;
          width: 36px;
          height: 36px;
          border-radius: 50%;
          background: var(--primary);
          color: white;
          border: 2px solid var(--card);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all 0.3s;
        }

        .avatar-upload-button:hover:not(:disabled) {
          transform: scale(1.1);
        }

        .avatar-upload-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .profile-form {
          padding: 32px 16px;
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input,
        .form-group textarea {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .form-group textarea {
          resize: vertical;
          font-family: inherit;
        }

        .username-input {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .username-prefix {
          color: var(--text-secondary);
          font-size: 16px;
          font-weight: 500;
        }

        .username-input input {
          flex: 1;
        }

        .char-count,
        .hint {
          color: var(--text-secondary);
          font-size: 12px;
        }

        .toggle-label {
          display: flex;
          align-items: center;
          gap: 8px;
          cursor: pointer;
        }

        .toggle-switch {
          margin-left: auto;
          width: 50px;
          height: 26px;
          appearance: none;
          background: var(--border);
          border-radius: 13px;
          position: relative;
          cursor: pointer;
          transition: background 0.3s;
        }

        .toggle-switch:checked {
          background: var(--primary);
        }

        .toggle-switch::before {
          content: '';
          position: absolute;
          width: 22px;
          height: 22px;
          border-radius: 50%;
          background: white;
          top: 2px;
          left: 2px;
          transition: transform 0.3s;
        }

        .toggle-switch:checked::before {
          transform: translateX(24px);
        }

        @media (max-width: 480px) {
          .cover-image {
            height: 150px;
          }

          .avatar-image {
            width: 100px;
            height: 100px;
          }

          .profile-form {
            padding: 24px 12px;
          }
        }
      `})]})},pY=()=>{const{settings:t,updateSettings:e,toggleDarkMode:r}=av(),{intakes:n}=Po(),{expenses:i}=Do(),{stocks:a}=No(),{user:o}=As(),[s,c]=C.useState((t.monthlyBudget??3e4).toString()),[f,d]=C.useState(!1),p=()=>{e({monthlyBudget:Number(s)}),alert("設定を保存しました！")},g=()=>{const w=["種類,名前,カロリー,金額,日付",...n.map(I=>`食事記録,${I.name},${I.calories},${I.price},${I.date}`)].join(`
`),E=new Blob([w],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(E),S.download=`健康家計アプリ_${new Date().toISOString().split("T")[0]}.csv`,S.click()},y=()=>{const w={intakes:n,expenses:i,stocks:a,settings:t,exportedAt:new Date().toISOString()},E=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),S=document.createElement("a");S.href=URL.createObjectURL(E),S.download=`健康家計アプリ_${new Date().toISOString().split("T")[0]}.json`,S.click()},b=async()=>{if(window.confirm("ログアウトしますか？")){const w=await nY();w.error&&alert("ログアウトに失敗しました: "+w.error)}};return f?m.jsx(hY,{onBack:()=>d(!1)}):m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"設定"}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"プロフィール"}),m.jsxs("button",{className:"profile-edit-button",onClick:()=>d(!0),style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"12px 16px",background:"var(--background)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s",marginBottom:"12px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[m.jsx(Of,{size:24,color:"var(--primary)"}),m.jsx("span",{style:{color:"var(--text)",fontSize:"16px",fontWeight:"500"},children:"プロフィールを編集"})]}),m.jsx(cE,{size:24,color:"var(--text-secondary)"})]}),m.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",margin:"0"},children:"アイコン、名前、自己紹介などを編集"})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"月間予算"}),m.jsx("input",{type:"number",value:s,onChange:w=>c(w.target.value),placeholder:"30000"}),m.jsxs("button",{className:"submit",onClick:p,children:[m.jsx(sE,{size:18,style:{marginRight:"8px"}}),"保存"]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"外観"}),m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{className:"setting-item-left",children:[m.jsx("div",{className:"setting-icon",children:m.jsx(Uz,{size:24})}),m.jsx("span",{className:"setting-label",children:"ダークモード"})]}),m.jsxs("label",{className:"toggle-switch",children:[m.jsx("input",{type:"checkbox",checked:t.darkMode,onChange:r}),m.jsx("span",{className:"toggle-slider"})]})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"データエクスポート"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsxs("button",{className:"submit",onClick:g,style:{flex:1},children:[m.jsx(Tz,{size:18,style:{marginRight:"8px"}}),"CSV"]}),m.jsxs("button",{className:"submit",onClick:y,style:{flex:1},children:[m.jsx(Cz,{size:18,style:{marginRight:"8px"}}),"JSON"]})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"データ統計"}),m.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)"},children:[m.jsxs("p",{children:["食事記録: ",n.length,"件"]}),m.jsxs("p",{children:["支出記録: ",i.length,"件"]}),m.jsxs("p",{children:["在庫アイテム: ",a.length,"件"]})]})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"アカウント"}),m.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)",marginBottom:"12px"},children:m.jsxs("p",{children:["ログイン: ",o?.email]})}),m.jsxs("button",{className:"submit",onClick:b,style:{background:"linear-gradient(135deg, #f44336 0%, #d32f2f 100%)",width:"100%"},children:[m.jsx(Dz,{size:18,style:{marginRight:"8px"}}),"ログアウト"]})]})]})},gY=()=>{const{addStock:t}=No(),[e,r]=C.useState(""),[n,i]=C.useState(""),[a,o]=C.useState("1"),s=()=>{if(!e||!n){alert("品目名と残り日数を入力してください");return}t({name:e,daysRemaining:Number(n),quantity:Number(a)}),r(""),i(""),o("1"),alert("在庫を追加しました！")};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"手動で追加"}),m.jsx("label",{children:"品目"}),m.jsx("input",{value:e,onChange:c=>r(c.target.value),placeholder:"例: 牛乳"}),m.jsx("label",{children:"残り日数"}),m.jsx("input",{type:"number",value:n,onChange:c=>i(c.target.value),placeholder:"例: 3"}),m.jsx("label",{children:"数量"}),m.jsx("input",{type:"number",value:a,onChange:c=>o(c.target.value),placeholder:"1"}),m.jsx("button",{className:"submit",onClick:s,children:"在庫に登録"})]})},vY=()=>{const{stocks:t,deleteStock:e}=No(),{addItem:r}=yu(),n=s=>{confirm("この在庫を削除しますか？")&&e(s)},i=(s,c)=>{r({name:s,quantity:c}),alert(`「${s}」を買い物リストに追加しました！`)},a=s=>s<=0?"#ef4444":s<=1?"#f59e0b":s<=3?"#eab308":"#10b981",o=s=>s<=0?"期限切れ！":s===1?"明日期限":`残り${s}日`;return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"在庫一覧"}),t.length===0?m.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"在庫がありません"}):m.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:t.map(s=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{fontWeight:500,marginBottom:"4px"},children:[s.name,s.quantity>1&&m.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"8px"},children:["x",s.quantity]})]}),m.jsx("div",{style:{fontSize:"0.85rem",color:a(s.daysRemaining),fontWeight:600},children:o(s.daysRemaining)})]}),m.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("button",{onClick:()=>i(s.name,s.quantity),className:"delete-btn",style:{background:"transparent",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"18px"},title:"買い物リストに追加",children:m.jsx(em,{size:20})}),m.jsx("button",{onClick:()=>n(s.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},title:"削除",children:m.jsx(Yf,{size:20})})]})]},s.id))})]})},mY=()=>{const{getExpiringStocks:t}=No(),{addItem:e}=yu(),r=C.useMemo(()=>t(0),[t]),n=C.useMemo(()=>t(1),[t]),i=()=>{const a=[...r,...n];a.length!==0&&confirm(`期限切れ間近の商品 ${a.length}個を買い物リストに追加しますか？`)&&(a.forEach(o=>{e({name:o.name,quantity:o.quantity})}),alert(`${a.length}個の商品を買い物リストに追加しました！`))};return r.length===0&&n.length===0?null:m.jsxs(m.Fragment,{children:[r.length>0&&m.jsxs("div",{className:"card",style:{background:"#fee2e2",borderLeft:"4px solid #ef4444",color:"#991b1b"},children:[m.jsx("h3",{style:{margin:"0 0 8px 0",color:"#ef4444"},children:"🚨 今日使うべき食材"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:r.map(a=>m.jsx("li",{children:a.name},a.id))})]}),n.length>0&&m.jsxs("div",{className:"card",style:{background:"#fef3c7",borderLeft:"4px solid #f59e0b",color:"#92400e"},children:[m.jsx("h3",{style:{margin:"0 0 8px 0",color:"#f59e0b"},children:"⏰ 明日期限切れ"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:n.map(a=>m.jsx("li",{children:a.name},a.id))})]}),m.jsx("div",{className:"card",style:{padding:"12px"},children:m.jsxs("button",{onClick:i,className:"submit",style:{background:"#3b82f6",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px"},children:[m.jsx(em,{size:20}),"期限切れ間近の商品を買い物リストに追加"]})})]})},yY=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"在庫管理"}),m.jsx(mY,{}),m.jsx(gY,{}),m.jsx(vY,{})]}),xY=()=>{const{addWeeklyEssentials:t,addLowStockItems:e}=yu(),{getExpiringStocks:r}=No(),n=()=>{t(),alert("1週間分の買い物リストを追加しました！")},i=()=>{const a=r(2);if(a.length===0){alert("在庫が少ない商品はありません");return}e(a.map(o=>({name:o.name,category:o.category}))),alert(`${a.length}件の商品を追加しました！`)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"🔰 初心者向けサポート"}),m.jsx("button",{className:"submit",onClick:n,style:{background:"linear-gradient(135deg, #3b82f6, #2563eb)",marginBottom:"8px"},children:"📅 1週間分の買い物リストを生成"}),m.jsx("button",{className:"submit",onClick:i,style:{background:"linear-gradient(135deg, #f59e0b, #d97706)"},children:"⚠️ 在庫が少ない商品を追加"})]})},bY=[{keywords:["ポテトチップス","チップス","スナック菓子","かっぱえびせん","ドリトス"],category:"スナック菓子",reason:"高カロリー・高脂質で、塩分も多く含まれています。",alternatives:["素焼きアーモンド","無塩ミックスナッツ","焼き野菜チップス","ドライフルーツ"]},{keywords:["コーラ","サイダー","炭酸飲料","ファンタ","ペプシ","ソーダ"],category:"清涼飲料水",reason:"糖分が非常に多く、虫歯や肥満の原因になります。",alternatives:["炭酸水","無糖の紅茶","麦茶","フレーバーウォーター（無糖）"]},{keywords:["カップラーメン","カップ麺","インスタントラーメン","カップ焼きそば"],category:"インスタント食品",reason:"塩分・脂質が多く、栄養バランスが偏りがちです。",alternatives:["生麺","冷凍うどん","乾麺（そば・パスタ）","低塩分インスタント麺"]},{keywords:["チョコレート","チョコ","ポッキー","きのこの山","たけのこの里"],category:"チョコレート菓子",reason:"糖分・脂質が多く、カロリーが高めです。",alternatives:["高カカオチョコレート（カカオ70%以上）","ドライフルーツ","ナッツ"]},{keywords:["唐揚げ","フライドチキン","とんかつ","天ぷら","フライドポテト","コロッケ"],category:"揚げ物",reason:"高カロリー・高脂質で、酸化した油が健康に悪影響を及ぼす可能性があります。",alternatives:["グリルチキン","蒸し鶏","焼き魚","ノンフライ調理品"]},{keywords:["ハンバーガー","ピザ","フライドポテト","ドーナツ"],category:"ファストフード",reason:"高カロリー・高脂質・高塩分で、栄養バランスが偏ります。",alternatives:["サンドイッチ（全粒粉パン）","サラダラップ","手作りピザ（薄皮）"]},{keywords:["アイスクリーム","アイス","ジェラート","ソフトクリーム"],category:"アイスクリーム",reason:"糖分・脂質が多く、食べ過ぎは肥満の原因になります。",alternatives:["フローズンヨーグルト","シャーベット","果物（冷凍）","低脂肪アイス"]},{keywords:["ケーキ","シュークリーム","ドーナツ","タルト","パウンドケーキ"],category:"洋菓子",reason:"糖分・脂質が非常に多く、カロリーが高いです。",alternatives:["和菓子（どら焼き、大福）","フルーツ","ヨーグルト","低糖質スイーツ"]},{keywords:["ベーコン","ソーセージ","ハム","サラミ","ウインナー"],category:"加工肉",reason:"塩分・添加物が多く、WHO（世界保健機関）が発がん性を指摘しています。",alternatives:["生肉（鶏むね肉、豚ヒレ肉）","魚","豆腐","納豆"]},{keywords:["エナジードリンク","レッドブル","モンスター","リアルゴールド"],category:"エナジードリンク",reason:"カフェイン・糖分が多く、心臓への負担や不眠の原因になります。",alternatives:["ブラックコーヒー","緑茶","麦茶","スポーツドリンク（無糖）"]},{keywords:["缶詰","缶コーン","缶ピーチ","フルーツ缶"],category:"缶詰（シロップ漬け）",reason:"シロップに糖分が多く含まれています。",alternatives:["生のフルーツ","冷凍フルーツ","水煮缶","ドライフルーツ"]},{keywords:["マヨネーズ","マーガリン","バター","ラード"],category:"高脂質調味料",reason:"脂質・カロリーが非常に高く、使いすぎは肥満の原因になります。",alternatives:["オリーブオイル","ごま油（少量）","低脂肪マヨネーズ","酢","レモン汁"]}];function _Y(t){const e=t.toLowerCase();for(const r of bY)for(const n of r.keywords)if(e.includes(n.toLowerCase()))return{type:"warning",category:r.category,reason:r.reason,alternatives:r.alternatives};return null}async function wY(t,e){try{const r=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`「${t}」という商品の健康面での懸念点を分析し、より健康的な代替案を3つ提案してください。

以下のJSON形式で回答してください：
{
  "category": "商品カテゴリ",
  "reason": "健康面での懸念点（簡潔に）",
  "alternatives": ["代替案1", "代替案2", "代替案3"]
}

懸念点がない場合は null を返してください。`}]}]})});if(!r.ok)throw new Error("AI分析に失敗しました");const i=(await r.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!i)return null;const a=i.match(/\{[\s\S]*\}/);if(!a)return null;const o=JSON.parse(a[0]);return!o||o===null?null:{type:"warning",category:o.category||"不明",reason:o.reason||"",alternatives:o.alternatives||[]}}catch(r){return console.error("AI健康分析エラー:",r),null}}const EY=({productName:t,warning:e,onClose:r,onAddAlternative:n,onContinueAnyway:i})=>{const[a,o]=C.useState(!1),[s,c]=C.useState(null),[f,d]=C.useState(!1),p=async()=>{d(!0);const b=await wY(t,"AIzaSyBSqmtDaNAqF09NTYYKQsTKm-3fLl1LMr0");c(b),o(!0),d(!1)},g=a&&s?s:e;return m.jsx("div",{className:"modal",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:r,children:m.jsxs("div",{className:"modal-content",style:{background:"var(--card)",borderRadius:"16px",padding:"24px",maxWidth:"500px",width:"100%",maxHeight:"80vh",overflowY:"auto",position:"relative",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},onClick:y=>y.stopPropagation(),children:[m.jsx("button",{onClick:r,style:{position:"absolute",top:"16px",right:"16px",background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text-secondary)"},children:m.jsx(fs,{size:24})}),m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[m.jsx(hD,{size:32,color:"#f59e0b"}),m.jsx("h3",{style:{margin:0,fontSize:"1.25rem"},children:"健康アドバイス"})]}),m.jsxs("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-secondary)"},children:["「",m.jsx("strong",{children:t}),"」について"]})]}),m.jsxs("div",{style:{background:"#fef3c7",padding:"16px",borderRadius:"12px",marginBottom:"20px",borderLeft:"4px solid #f59e0b"},children:[m.jsxs("h4",{style:{margin:"0 0 8px 0",fontSize:"1rem",color:"#92400e"},children:["📊 カテゴリ: ",g.category]}),m.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#78350f",lineHeight:"1.6"},children:g.reason})]}),m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"1rem",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Rz,{size:20,color:"#10b981"}),"より健康的な代替案"]}),m.jsx("div",{style:{display:"grid",gap:"8px"},children:g.alternatives.map((y,b)=>m.jsxs("button",{onClick:()=>n(y),style:{background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"8px",padding:"12px",cursor:"pointer",textAlign:"left",fontSize:"0.9rem",color:"#15803d",fontWeight:500,transition:"all 0.2s"},onMouseEnter:w=>{w.currentTarget.style.background="#dcfce7",w.currentTarget.style.transform="translateX(4px)"},onMouseLeave:w=>{w.currentTarget.style.background="#f0fdf4",w.currentTarget.style.transform="translateX(0)"},children:["✓ ",y]},b))})]}),!a&&m.jsxs("button",{onClick:p,disabled:f,style:{width:"100%",padding:"12px",background:"linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%)",color:"white",border:"none",borderRadius:"8px",cursor:f?"not-allowed":"pointer",fontSize:"0.9rem",fontWeight:600,marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",opacity:f?.6:1},children:[m.jsx(j1,{size:20}),f?"AI分析中...":"AIで詳しく分析する"]}),m.jsxs("div",{style:{display:"grid",gap:"8px"},children:[m.jsx("button",{onClick:i,style:{padding:"12px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:600},children:"このまま追加する"}),m.jsx("button",{onClick:r,style:{padding:"12px",background:"transparent",color:"var(--text-secondary)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem"},children:"キャンセル"})]})]})})},AY=()=>{const{addItem:t}=yu(),[e,r]=C.useState(""),[n,i]=C.useState("1"),[a,o]=C.useState(null),[s,c]=C.useState(null),f=()=>{if(!e){alert("商品名を入力してください");return}const b=_Y(e);if(b){o(b),c({name:e,quantity:Number(n)});return}d(e,Number(n))},d=(b,w)=>{t({name:b,quantity:w}),r(""),i("1")},p=()=>{o(null),c(null)},g=b=>{s&&d(b,s.quantity),p()},y=()=>{s&&d(s.name,s.quantity),p()};return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"手動で追加"}),m.jsx("label",{children:"商品名"}),m.jsx("input",{value:e,onChange:b=>r(b.target.value),placeholder:"例: 牛乳",onKeyDown:b=>b.key==="Enter"&&f()}),m.jsx("label",{children:"数量"}),m.jsx("input",{type:"number",value:n,onChange:b=>i(b.target.value),placeholder:"1"}),m.jsx("button",{className:"submit",onClick:f,children:"リストに追加"})]}),a&&s&&m.jsx(EY,{productName:s.name,warning:a,onClose:p,onAddAlternative:g,onContinueAnyway:y})]})},SY=()=>{const{items:t,toggleItem:e,deleteItem:r,clearCompleted:n}=yu(),{addStock:i}=No(),[a,o]=C.useState(!1),s=()=>{confirm("チェック済みのアイテムをすべて削除しますか？")&&n()},c=()=>{const f=t.filter(d=>d.checked);if(f.length===0){alert("チェック済みのアイテムがありません");return}confirm(`チェック済みのアイテム ${f.length}個を在庫に追加しますか？
（賞味期限は7日後に設定されます）`)&&(f.forEach(d=>{i({name:d.name,quantity:d.quantity,daysRemaining:7})}),n(),o(!0),setTimeout(()=>{o(!1)},3e3))};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"買い物リスト"}),t.length===0?m.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"リストが空です"}):m.jsxs(m.Fragment,{children:[m.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:t.map(f=>m.jsxs("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",borderBottom:"1px solid var(--border)"},children:[m.jsxs("label",{style:{flex:1,display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[m.jsx("input",{type:"checkbox",checked:f.checked,onChange:()=>e(f.id),style:{width:"18px",height:"18px"}}),m.jsx("div",{style:{flex:1},children:m.jsxs("div",{style:{fontWeight:500,textDecoration:f.checked?"line-through":"none",color:f.checked?"#999":"inherit"},children:[f.name,f.quantity>1&&m.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",marginLeft:"8px"},children:["x",f.quantity]})]})})]}),m.jsx("button",{onClick:()=>r(f.id),className:"delete-btn",style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"18px"},children:m.jsx(Yf,{size:20})})]},f.id))}),t.some(f=>f.checked)&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginTop:"16px",padding:"16px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"white",fontSize:"0.9rem",fontWeight:500},children:[m.jsx(If,{size:20}),m.jsx("span",{children:"買い物完了後はこちら！"})]}),m.jsxs("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.85rem",margin:"0 0 12px 0",lineHeight:"1.5"},children:["チェックした商品を在庫に一括追加できます。",m.jsx("br",{}),"賞味期限は自動で7日後に設定されます。"]}),m.jsxs("button",{className:"submit",onClick:c,style:{background:"white",color:"#10b981",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1rem",fontWeight:600,padding:"14px",border:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[m.jsx(If,{size:22}),"在庫に追加（",t.filter(f=>f.checked).length,"個）"]})]}),m.jsx("button",{className:"submit",onClick:s,style:{background:"transparent",color:"#ef4444",border:"2px solid #ef4444",marginTop:"8px",width:"100%"},children:"チェック済みをクリア"})]}),a&&m.jsxs("div",{style:{position:"fixed",top:"80px",left:"50%",transform:"translateX(-50%)",background:"#10b981",color:"white",padding:"16px 24px",borderRadius:"12px",boxShadow:"0 4px 16px rgba(16, 185, 129, 0.4)",display:"flex",alignItems:"center",gap:"12px",zIndex:1e3,animation:"slideDown 0.3s ease-out",fontSize:"1rem",fontWeight:600},children:[m.jsx(Jv,{size:28}),m.jsx("span",{children:"在庫に追加しました！"})]})]})]})},CY=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"買い物リスト"}),m.jsx(xY,{}),m.jsx(AY,{}),m.jsx(SY,{})]}),Af="AIzaSyBSqmtDaNAqF09NTYYKQsTKm-3fLl1LMr0",hk=Af!=="YOUR_GEMINI_API_KEY_HERE";let uf=[];function IA(t){const e=Date.now();uf.push({type:t,timestamp:e}),uf=uf.filter(a=>e-a.timestamp<6e4);const r=uf.filter(a=>a.type==="recipe").length,n=uf.filter(a=>a.type==="receipt").length,i=uf.length;console.log(`[API Usage] 直近1分間の合計リクエスト数: ${i}回`),console.log(`  - レシピ生成: ${r}回`),console.log(`  - レシートOCR: ${n}回`),console.log(`  - 残り制限枠: ${15-i}回 (Free Tier: 15回/分)`)}async function TY(t,e="none",r="none",n=""){if(console.log("[Gemini] API呼び出し開始",{ingredients:t,dietaryRestriction:e,difficulty:r,customRequest:n,API_ENABLED:hk,apiKeyPrefix:Af.substring(0,10)+"..."}),!t||t.length===0)throw new Error("材料を指定してください。");try{const i=e==="vegetarian"?"ベジタリアン":e==="vegan"?"ヴィーガン":"";let a="";r==="super_easy"?a=`

**重要**: 料理初心者でも絶対に失敗しない超簡単なレシピにしてください。調理工程は3ステップ以内、特別な道具や技術は不要にしてください。`:r==="under_5min"?a=`

**重要**: 調理時間5分以内で完成するレシピにしてください。`:r==="under_10min"?a=`

**重要**: 調理時間10分以内で完成するレシピにしてください。`:r==="no_fire"&&(a=`

**重要**: 火を使わずに作れるレシピにしてください（電子レンジやトースターは可）。`);const o=n?`

**追加のリクエスト**: ${n}`:"",s=`
あなたは日本語で答えるプロの料理アドバイザーです。
必ず日本語で回答してください。英語は使わないでください。

次の食材を使った${i}向けの家庭向けレシピを1つ提案してください。
料理名・材料・手順・ポイントを含めて出力してください。${a}${o}

食材: ${t.join("、")}

出力フォーマットは以下の形式でお願いします：

---
【料理名】
（料理名）

【材料】
（材料一覧）

【作り方】
1.
2.
3.

【ポイント】
（料理のコツやアドバイス）
---
`.trim(),c=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${Af}`;IA("recipe"),console.log("[Gemini] APIリクエスト送信",{url:c.replace(Af,"HIDDEN")});const f=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:s}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}})});if(console.log("[Gemini] APIレスポンス受信",{status:f.status,ok:f.ok}),console.log("[Gemini] Rate Limit Info:",{limit:f.headers.get("x-ratelimit-limit"),remaining:f.headers.get("x-ratelimit-remaining"),reset:f.headers.get("x-ratelimit-reset"),retryAfter:f.headers.get("retry-after")}),!f.ok){const p=await f.text();let g;try{g=JSON.parse(p)}catch{g={rawError:p}}console.error("[Gemini] APIエラー詳細",{status:f.status,statusText:f.statusText,errorData:g});let y=`Gemini API エラー (${f.status})`;throw g.error?.message&&(y+=`: ${g.error.message}`),new Error(y)}const d=await f.json();if(console.log("[Gemini] レスポンスデータ",d),d.candidates&&d.candidates.length>0){const p=d.candidates[0];if(p.content?.parts&&p.content.parts.length>0){const g=p.content.parts[0].text;return console.log("[Gemini] レシピ生成成功"),g.trim()}}throw console.error("[Gemini] レスポンス形式が不正",d),new Error("Gemini APIからレシピを取得できませんでした。")}catch(i){return console.error("[Gemini] エラー発生:",i),console.warn("[Gemini] モックデータを使用します。"),console.info("[Gemini] 新しいAPIキーが必要な場合: https://aistudio.google.com/app/apikey"),i instanceof Error&&i.message.includes("403")&&console.error("[Gemini] 403エラー: APIキーが無効または期限切れです。新しいキーを取得してください。"),RY(t,e,r)}}async function IY(t){console.log("[Gemini Text] テキスト生成開始");try{const e=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${Af}`;IA("recipe"),console.log("[Gemini Text] APIリクエスト送信");const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:2048}})});if(console.log("[Gemini Text] APIレスポンス受信",{status:r.status}),!r.ok){const i=await r.text();throw console.error("[Gemini Text] APIエラー",i),new Error(`Gemini API エラー: ${r.status}`)}const n=await r.json();if(console.log("[Gemini Text] レスポンスデータ受信"),n.candidates&&n.candidates.length>0){const i=n.candidates[0];if(i.content?.parts&&i.content.parts.length>0){const a=i.content.parts[0].text.trim();return console.log("[Gemini Text] テキスト生成成功"),a}}throw new Error("テキストを生成できませんでした")}catch(e){throw console.error("[Gemini Text] エラー:",e),e}}const OY=t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const a=n.result.split(",")[1];e(a)},n.onerror=r,n.readAsDataURL(t)});let p6=0;const g6=5e3;async function v6(t){console.log("[Gemini Receipt] OCR処理開始",{fileName:t.name,fileSize:t.size,API_ENABLED:hk});const e=Date.now(),r=e-p6;if(r<g6){const n=Math.ceil((g6-r)/1e3);throw new Error(`レート制限: ${n}秒後に再試行してください`)}try{p6=e;const n=await OY(t),i=`
あなたは日本語のレシート解析の専門家です。
このレシート画像から商品名と価格を正確に抽出してください。

以下のJSON形式で出力してください：
{
  "storeName": "店舗名（わかれば）",
  "date": "日付（YYYY-MM-DD形式、わかれば）",
  "total": 合計金額（数値、わかれば）,
  "items": [
    {
      "name": "商品名",
      "price": 価格（数値）,
      "quantity": 数量（数値、デフォルトは1）
    }
  ]
}

**重要な指示:**
1. 商品名と価格は必ず正確に抽出してください
2. 価格は数値のみ（円記号やカンマは除く）
3. 同じ商品が複数ある場合はquantityで表現
4. 合計金額や税金などの行は除外
5. 不明な項目は省略してOK
6. 必ずJSONのみを返してください（説明文は不要）
`.trim(),a=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=${Af}`;IA("receipt"),console.log("[Gemini Receipt] APIリクエスト送信");const o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:i},{inlineData:{mimeType:t.type||"image/jpeg",data:n}}]}],generationConfig:{temperature:.1,topK:32,topP:1,maxOutputTokens:2048}})});if(console.log("[Gemini Receipt] APIレスポンス受信",{status:o.status}),console.log("[Gemini Receipt] Rate Limit Info:",{limit:o.headers.get("x-ratelimit-limit"),remaining:o.headers.get("x-ratelimit-remaining"),reset:o.headers.get("x-ratelimit-reset"),retryAfter:o.headers.get("retry-after")}),!o.ok){const c=await o.text();throw console.error("[Gemini Receipt] APIエラー",c),o.status===429?new Error("レート制限に達しました。数秒後に再試行してください。"):new Error(`Gemini API エラー: ${o.status}`)}const s=await o.json();if(console.log("[Gemini Receipt] レスポンスデータ",s),s.candidates&&s.candidates.length>0){const c=s.candidates[0];if(c.content?.parts&&c.content.parts.length>0){const f=c.content.parts[0].text.trim();console.log("[Gemini Receipt] 抽出テキスト:",f);let d=f;const p=f.match(/```json\s*([\s\S]*?)\s*```/);if(p)d=p[1];else if(f.includes("```")){const b=f.match(/```\s*([\s\S]*?)\s*```/);b&&(d=b[1])}const g=JSON.parse(d),y={items:g.items||[],total:g.total,storeName:g.storeName,date:g.date,rawText:f};return console.log("[Gemini Receipt] OCR成功",y),y}}throw new Error("レシートからテキストを抽出できませんでした")}catch(n){throw console.error("[Gemini Receipt] エラー:",n),n}}function RY(t,e,r="none"){const n=e==="vegetarian"?"ベジタリアン":e==="vegan"?"ヴィーガン":"",i=r==="super_easy"?"（超簡単）":r==="under_5min"?"（5分）":r==="under_10min"?"（10分）":r==="no_fire"?"（火を使わない）":"";return`
【料理名】
${t.join("と")}の${n}炒め${i}

【材料】
${t.map(a=>`・${a} 適量`).join(`
`)}
・塩、こしょう 少々
・サラダ油 大さじ1

【作り方】
1. ${t[0]||"材料"}を食べやすい大きさに切ります。
2. フライパンに油を熱し、材料を炒めます。
3. 塩、こしょうで味を調えて完成です。

【ポイント】
シンプルな炒め物なので、お好みで醤油やにんにくを加えても美味しいです。
野菜の食感を残すため、強火でサッと炒めるのがコツです。

※ このレシピはデモ用のモックデータです。実際のGemini APIキーを設定すると、AIが本格的なレシピを生成します。
※ 403エラーが発生しています。新しいAPIキーを https://aistudio.google.com/app/apikey で取得してください。
`.trim()}function Pm(t){return Ee({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a.5.5 0 0 1-.5-.5v-1.293l-.646.647a.5.5 0 0 1-.707-.708L7.5 12.793V8.866l-3.4 1.963-.496 1.85a.5.5 0 1 1-.966-.26l.237-.882-1.12.646a.5.5 0 0 1-.5-.866l1.12-.646-.884-.237a.5.5 0 1 1 .26-.966l1.848.495L7 8 3.6 6.037l-1.85.495a.5.5 0 0 1-.258-.966l.883-.237-1.12-.646a.5.5 0 1 1 .5-.866l1.12.646-.237-.883a.5.5 0 1 1 .966-.258l.495 1.849L7.5 7.134V3.207L6.147 1.854a.5.5 0 1 1 .707-.708l.646.647V.5a.5.5 0 1 1 1 0v1.293l.647-.647a.5.5 0 1 1 .707.708L8.5 3.207v3.927l3.4-1.963.496-1.85a.5.5 0 1 1 .966.26l-.236.882 1.12-.646a.5.5 0 0 1 .5.866l-1.12.646.883.237a.5.5 0 1 1-.26.966l-1.848-.495L9 8l3.4 1.963 1.849-.495a.5.5 0 0 1 .259.966l-.883.237 1.12.646a.5.5 0 0 1-.5.866l-1.12-.646.236.883a.5.5 0 1 1-.966.258l-.495-1.849-3.4-1.963v3.927l1.353 1.353a.5.5 0 0 1-.707.708l-.647-.647V15.5a.5.5 0 0 1-.5.5z"},child:[]}]})(t)}const PY=({onRecipeGenerated:t,isLoading:e,setIsLoading:r})=>{const{stocks:n}=No(),{addToHistory:i}=Vp(),[a,o]=C.useState(""),[s,c]=C.useState("none"),[f,d]=C.useState("none"),[p,g]=C.useState(""),y=[{value:"none",label:"指定なし",icon:m.jsx(j1,{size:16})},{value:"super_easy",label:"超簡単",icon:m.jsx(Qv,{size:16})},{value:"under_5min",label:"5分以内",icon:m.jsx(Zv,{size:16})},{value:"under_10min",label:"10分以内",icon:m.jsx(Yv,{size:16})},{value:"no_fire",label:"火を使わない",icon:m.jsx(Pm,{size:16})}],b=[{value:"none",label:"指定なし",icon:m.jsx(L1,{size:16})},{value:"vegetarian",label:"ベジタリアン",icon:m.jsx("span",{children:"🥗"})},{value:"vegan",label:"ヴィーガン",icon:m.jsx("span",{children:"🌱"})}],w=()=>{const S=n.filter(I=>I.quantity>0).map(I=>I.name).slice(0,10).join(", ");o(S)},E=async()=>{if(!a.trim()){alert("材料を入力してください");return}r(!0);try{const S=a.split(/[,、]/).map(D=>D.trim()).filter(D=>D.length>0),I=await TY(S,f,s,p),O={id:Cl(),title:`${S.slice(0,3).join("、")}を使ったレシピ`,content:I,ingredients:S,difficulty:s,dietaryRestriction:f,customRequest:p,isFavorite:!1,createdAt:new Date().toISOString()};i(O),t(O)}catch(S){console.error("レシピ生成エラー:",S),alert("レシピの生成に失敗しました。もう一度お試しください。")}finally{r(!1)}};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(L1,{size:20}),"レシピを生成"]}),m.jsx("label",{children:"材料（カンマ区切り）"}),m.jsx("input",{value:a,onChange:S=>o(S.target.value),placeholder:"例: 鶏肉, じゃがいも, 玉ねぎ",disabled:e}),m.jsxs("button",{onClick:w,style:{background:"#10b981",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",marginBottom:"16px"},disabled:e,children:[m.jsx(If,{size:18,style:{marginRight:"6px"}}),"在庫の材料を使う"]}),m.jsx("label",{children:"難易度"}),m.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:y.map(S=>m.jsx("button",{onClick:()=>c(S.value),style:{padding:"8px 16px",borderRadius:"20px",border:`2px solid ${s===S.value?"var(--primary)":"var(--border)"}`,background:s===S.value?"var(--primary)":"var(--card)",color:s===S.value?"white":"var(--text)",cursor:"pointer",fontSize:"0.85rem",fontWeight:s===S.value?600:400},disabled:e,children:m.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.icon," ",S.label]})},S.value))}),m.jsx("label",{children:"食事制限"}),m.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:b.map(S=>m.jsx("button",{onClick:()=>d(S.value),style:{padding:"8px 16px",borderRadius:"20px",border:`2px solid ${f===S.value?"var(--primary)":"var(--border)"}`,background:f===S.value?"var(--primary)":"var(--card)",color:f===S.value?"white":"var(--text)",cursor:"pointer",fontSize:"0.85rem",fontWeight:f===S.value?600:400},disabled:e,children:m.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[S.icon," ",S.label]})},S.value))}),m.jsx("label",{children:"カスタムリクエスト（任意）"}),m.jsx("textarea",{value:p,onChange:S=>g(S.target.value),placeholder:"例: 辛めに作りたい、子供向けに優しい味で",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--card)",color:"var(--text)",fontSize:"1rem",fontFamily:"inherit",resize:"vertical"},disabled:e}),m.jsxs("button",{className:"submit",onClick:E,disabled:e,children:[m.jsx(j1,{size:18,style:{marginRight:"8px"}}),"レシピを生成する"]})]})},DY=({recipe:t,onAttachToPost:e})=>{const{addToHistory:r,addToFavorites:n,removeFromFavorites:i,favoriteRecipes:a}=Vp(),{addStock:o}=No(),{addItem:s}=yu(),c=a.some(g=>g.id===t.id),f=()=>{c?i(t.id):(n(t),r(t))},d=()=>{confirm(`材料 ${t.ingredients.length} 個を在庫に追加しますか？
（賞味期限は7日後に設定されます）`)&&(t.ingredients.forEach(g=>{o({name:g,quantity:1,daysRemaining:7})}),alert(`${t.ingredients.length}個の材料を在庫に追加しました！`))},p=()=>{confirm(`材料 ${t.ingredients.length} 個を買い物リストに追加しますか？`)&&(t.ingredients.forEach(g=>{s({name:g,quantity:1})}),alert(`${t.ingredients.length}個の材料を買い物リストに追加しました！`))};return m.jsxs("div",{className:"card",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[m.jsx("h3",{children:t.title}),m.jsx("button",{onClick:f,style:{background:"transparent",border:"none",fontSize:"24px",cursor:"pointer",padding:"4px",color:c?"#fbbf24":"var(--text-secondary)"},title:c?"お気に入りから削除":"お気に入りに追加",children:c?m.jsx(A_,{size:28}):m.jsx(Xz,{size:28})})]}),m.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"12px"},children:[t.difficulty&&t.difficulty!=="none"&&m.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",background:"#f0fdf4",color:"#15803d",fontSize:"0.85rem",fontWeight:500},children:m.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:{super_easy:m.jsxs(m.Fragment,{children:[m.jsx(Qv,{size:14})," 超簡単"]}),under_5min:m.jsxs(m.Fragment,{children:[m.jsx(Zv,{size:14})," 5分以内"]}),under_10min:m.jsxs(m.Fragment,{children:[m.jsx(Yv,{size:14})," 10分以内"]}),no_fire:m.jsxs(m.Fragment,{children:[m.jsx(Pm,{size:14})," 火を使わない"]}),none:""}[t.difficulty]})}),t.dietaryRestriction&&t.dietaryRestriction!=="none"&&m.jsx("span",{style:{padding:"4px 12px",borderRadius:"12px",background:"#fef3c7",color:"#92400e",fontSize:"0.85rem",fontWeight:500},children:{vegetarian:"🥗 ベジタリアン",vegan:"🌱 ヴィーガン",none:""}[t.dietaryRestriction]})]}),m.jsx("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"12px",marginBottom:"16px",whiteSpace:"pre-wrap",fontSize:"0.95rem",lineHeight:"1.6"},children:t.content}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:e?"1fr 1fr 1fr":"1fr 1fr",gap:"8px"},children:[m.jsxs("button",{onClick:d,style:{background:"#10b981",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[m.jsx(If,{size:18})," 在庫に追加"]}),m.jsxs("button",{onClick:p,style:{background:"#3b82f6",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[m.jsx(em,{size:18})," 買い物リストへ"]}),e&&m.jsxs("button",{onClick:()=>e(t),style:{background:"var(--primary)",color:"white",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500,fontSize:"0.9rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[m.jsx(bD,{size:18})," 投稿に添付"]})]})]})},NY=({onRecipeSelect:t})=>{const{recipeHistory:e}=Vp();if(e.length===0)return null;const r=n=>{const i=new Date(n),o=new Date().getTime()-i.getTime(),s=Math.floor(o/6e4),c=Math.floor(o/36e5),f=Math.floor(o/864e5);return s<1?"たった今":s<60?`${s}分前`:c<24?`${c}時間前`:f<7?`${f}日前`:i.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Iz,{size:20}),"レシピ履歴"]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(n=>m.jsxs("div",{onClick:()=>t(n.recipe),style:{padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",cursor:"pointer",transition:"all 0.2s ease",background:"var(--card)"},onMouseEnter:i=>{i.currentTarget.style.background="var(--background)",i.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:i=>{i.currentTarget.style.background="var(--card)",i.currentTarget.style.transform="translateY(0)"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"6px"},children:[m.jsx("div",{style:{fontWeight:500,fontSize:"0.95rem",flex:1},children:n.recipe.title}),m.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary, #999)",whiteSpace:"nowrap",marginLeft:"8px"},children:r(n.generatedAt)})]}),m.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary, #666)",display:"flex",gap:"4px",flexWrap:"wrap"},children:[n.recipe.ingredients&&n.recipe.ingredients.slice(0,3).map((i,a)=>m.jsxs("span",{children:[i,a<Math.min((n.recipe.ingredients?.length||0)-1,2)?"、":""]},a)),n.recipe.ingredients&&n.recipe.ingredients.length>3&&m.jsxs("span",{style:{color:"var(--text-secondary, #999)"},children:["他",n.recipe.ingredients.length-3,"個"]})]}),(n.recipe.difficulty!=="none"||n.recipe.dietaryRestriction!=="none")&&m.jsxs("div",{style:{display:"flex",gap:"6px",marginTop:"6px",flexWrap:"wrap"},children:[n.recipe.difficulty&&n.recipe.difficulty!=="none"&&m.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",background:"#f0fdf4",color:"#15803d",fontSize:"0.75rem"},children:{super_easy:m.jsx(Qv,{size:12}),under_5min:m.jsx(Zv,{size:12}),under_10min:m.jsx(Yv,{size:12}),no_fire:m.jsx(Pm,{size:12}),none:""}[n.recipe.difficulty]}),n.recipe.dietaryRestriction&&n.recipe.dietaryRestriction!=="none"&&m.jsx("span",{style:{padding:"2px 8px",borderRadius:"8px",background:"#fef3c7",color:"#92400e",fontSize:"0.75rem"},children:{vegetarian:"🥗",vegan:"🌱",none:""}[n.recipe.dietaryRestriction]})]})]},n.id))})]})},MY=({onRecipeSelect:t})=>{const{favoriteRecipes:e,removeFromFavorites:r}=Vp();if(e.length===0)return null;const n=(i,a)=>{i.stopPropagation(),confirm("お気に入りから削除しますか？")&&r(a)};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(A_,{size:20,color:"#fbbf24"}),"お気に入りレシピ"]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"12px"},children:e.map(i=>m.jsxs("div",{onClick:()=>t(i),style:{padding:"16px",borderRadius:"12px",border:"2px solid var(--border)",cursor:"pointer",transition:"all 0.2s ease",background:"var(--card)",position:"relative"},onMouseEnter:a=>{a.currentTarget.style.background="var(--background)",a.currentTarget.style.borderColor="var(--primary)",a.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:a=>{a.currentTarget.style.background="var(--card)",a.currentTarget.style.borderColor="var(--border)",a.currentTarget.style.transform="translateY(0)"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"1rem",flex:1},children:i.title}),m.jsx("button",{onClick:a=>n(a,i.id),style:{background:"transparent",border:"none",fontSize:"20px",cursor:"pointer",padding:"0 4px",color:"#fbbf24"},title:"お気に入りから削除",children:m.jsx(A_,{size:24})})]}),m.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)",marginBottom:"8px",display:"flex",gap:"6px",flexWrap:"wrap"},children:[m.jsx("span",{style:{fontWeight:500},children:"材料:"}),i.ingredients&&i.ingredients.slice(0,4).map((a,o)=>m.jsxs("span",{children:[a,o<Math.min((i.ingredients?.length||0)-1,3)?"、":""]},o)),i.ingredients&&i.ingredients.length>4&&m.jsxs("span",{style:{color:"var(--text-secondary, #999)"},children:["他",i.ingredients.length-4,"個"]})]}),(i.difficulty&&i.difficulty!=="none"||i.dietaryRestriction&&i.dietaryRestriction!=="none")&&m.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",flexWrap:"wrap"},children:[i.difficulty&&i.difficulty!=="none"&&m.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",background:"#f0fdf4",color:"#15803d",fontSize:"0.8rem",fontWeight:500},children:m.jsx("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:{super_easy:m.jsxs(m.Fragment,{children:[m.jsx(Qv,{size:14})," 超簡単"]}),under_5min:m.jsxs(m.Fragment,{children:[m.jsx(Zv,{size:14})," 5分以内"]}),under_10min:m.jsxs(m.Fragment,{children:[m.jsx(Yv,{size:14})," 10分以内"]}),no_fire:m.jsxs(m.Fragment,{children:[m.jsx(Pm,{size:14})," 火を使わない"]}),none:""}[i.difficulty]})}),i.dietaryRestriction&&i.dietaryRestriction!=="none"&&m.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",background:"#fef3c7",color:"#92400e",fontSize:"0.8rem",fontWeight:500},children:{vegetarian:"🥗 ベジタリアン",vegan:"🌱 ヴィーガン",none:""}[i.dietaryRestriction]})]}),i.customRequest&&m.jsxs("div",{style:{marginTop:"8px",fontSize:"0.85rem",color:"var(--text-secondary, #666)",fontStyle:"italic",padding:"6px 10px",background:"var(--background)",borderRadius:"6px",display:"flex",alignItems:"flex-start",gap:"6px"},children:[m.jsx(jz,{size:14,style:{marginTop:"2px",flexShrink:0}}),i.customRequest]})]},i.id))})]})},Sf=t=>{if(t<1e3)return t.toString();if(t<1e6){const r=t/1e3;return r%1===0?`${Math.floor(r)}K`:`${r.toFixed(1)}K`}const e=t/1e6;return e%1===0?`${Math.floor(e)}M`:`${e.toFixed(1)}M`},Jh=t=>{const e=new Date(t),n=new Date().getTime()-e.getTime(),i=Math.floor(n/1e3),a=Math.floor(i/60),o=Math.floor(a/60),s=Math.floor(o/24);if(i<60)return"今";if(a<60)return`${a}分`;if(o<24)return`${o}時間`;if(s<7)return`${s}日`;const c=e.getMonth()+1,f=e.getDate();return`${c}月${f}日`},kY=t=>{const e=new Date(t),r=e.getFullYear(),n=e.getMonth()+1;return`${r}年${n}月から利用しています`},jY=t=>{const e=/#[\w\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF]+/g,r=t.match(e);return r?r.map(n=>n.slice(1)):[]},LY=t=>{const e=/@([a-zA-Z0-9_]+)/g,r=t.match(e);return r?[...new Set(r.map(n=>n.substring(1)))]:[]},$n=t=>t?typeof t=="string"?t:t.toDate().toISOString():new Date().toISOString(),BY=async(t,e)=>{try{const r=await Fi(t);if(!r)throw new Error("プロフィールが見つかりません");const n=[];if(e.images&&e.images.length>0)for(const d of e.images){const p=await dY(t,d);n.push(p)}const i=jY(e.content),a=LY(e.content),o=Ue(Ve(ve,"posts")),s=o.id,c={id:s,content:e.content,images:n,authorId:t,authorName:r.displayName,authorAvatar:r.avatarUrl||"",likes:0,commentCount:0,repostCount:0,replyCount:0,hashtags:i,visibility:e.visibility,createdAt:Xq()};if(a.length>0&&(c.mentions=a),e.quotedPostId&&(c.quotedPostId=e.quotedPostId),e.replyToPostId&&(c.replyToPostId=e.replyToPostId,c.replyToUserId=e.replyToUserId,c.replyToUserName=e.replyToUserName),e.recipeData&&(c.recipeData=e.recipeData),await Xl(o,c),e.replyToPostId){const d=Ue(ve,"posts",e.replyToPostId);await nr(d,{replyCount:zi(1)})}const f=Ue(ve,"users",t,"profile","data");return await nr(f,{"stats.postCount":zi(1)}),console.log("投稿を作成しました:",s),s}catch(r){throw console.error("投稿の作成に失敗しました:",r),r}},Va=async t=>{try{const e=Ue(ve,"posts",t),r=await Ro(e);if(!r.exists())return null;const n=r.data();let i;if(n.quotedPostId){const a=await Va(n.quotedPostId);a&&(i=a)}return{id:r.id,content:n.content,images:n.images||[],authorId:n.authorId,authorName:n.authorName,authorAvatar:n.authorAvatar||"",likes:n.likes||0,commentCount:n.commentCount||0,repostCount:n.repostCount||0,replyCount:n.replyCount||0,hashtags:n.hashtags||[],mentions:n.mentions||[],quotedPostId:n.quotedPostId,quotedPost:i,replyToPostId:n.replyToPostId,replyToUserId:n.replyToUserId,replyToUserName:n.replyToUserName,recipeData:n.recipeData,visibility:n.visibility,isPinned:n.isPinned||!1,createdAt:$n(n.createdAt),updatedAt:n.updatedAt?$n(n.updatedAt):void 0}}catch(e){return console.error("投稿の取得に失敗しました:",e),null}},pk=async(t,e=20)=>{try{console.log(`[getUserPosts] Fetching posts for user: ${t}`);const r=Ve(ve,"posts");let n;try{const a=Ct(r,Vr("authorId","==",t),$r("createdAt","desc"),Ao(e));console.log("[getUserPosts] Executing query with index..."),n=await vt(a)}catch{console.warn("[getUserPosts] Index not found, using fallback query...");const o=Ct(r,Vr("authorId","==",t)),c=(await vt(o)).docs.sort((f,d)=>{const p=f.data().createdAt,g=d.data().createdAt;return!p||!g?0:g.seconds-p.seconds});n={docs:c.slice(0,e),empty:c.length===0,size:Math.min(c.length,e)}}console.log(`[getUserPosts] Query returned ${n.docs.length} documents`);const i=[];for(const a of n.docs){const o=a.data();let s;if(o.quotedPostId){const c=await Va(o.quotedPostId);c&&(s={...c,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:s,recipeData:o.recipeData,visibility:o.visibility,createdAt:$n(o.createdAt),updatedAt:o.updatedAt?$n(o.updatedAt):void 0})}return console.log(`[getUserPosts] Successfully processed ${i.length} posts`),i}catch(r){return console.error("[getUserPosts] ユーザーの投稿取得に失敗しました:",r),[]}},UY=async(t=20)=>{console.log("🔍 getTimelinePosts: Starting to fetch timeline posts...");try{const e=Ve(ve,"posts");console.log("📁 getTimelinePosts: Creating query with visibility=public, orderBy createdAt desc");const r=Ct(e,Vr("visibility","==","public"),$r("createdAt","desc"),Ao(t));console.log("⚡ getTimelinePosts: Executing query...");const n=await vt(r);console.log(`📊 getTimelinePosts: Query returned ${n.size} documents`);const i=[];for(const a of n.docs){const o=a.data();console.log(`📄 Processing post ${a.id}:`,{authorId:o.authorId,authorName:o.authorName,visibility:o.visibility,createdAt:o.createdAt});let s;if(o.quotedPostId){const c=await Va(o.quotedPostId);c&&(s={...c,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:s,recipeData:o.recipeData,visibility:o.visibility,createdAt:$n(o.createdAt),updatedAt:o.updatedAt?$n(o.updatedAt):void 0})}return console.log(`✅ getTimelinePosts: Successfully processed ${i.length} posts`),i}catch(e){if(console.error("❌ getTimelinePosts: Error occurred:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),e.code==="failed-precondition"&&e.message?.includes("index")){console.warn("⚠️ Firestoreインデックスが未作成です。フォールバッククエリを使用します。"),console.warn("インデックス作成URL:",e.message);try{console.log("🔄 getTimelinePosts: Trying fallback query (orderBy createdAt only)...");const r=Ve(ve,"posts"),n=Ct(r,$r("createdAt","desc"),Ao(t*3)),i=await vt(n);console.log(`📊 Fallback query returned ${i.size} documents`);const a=[];for(const s of i.docs){const c=s.data();let f;if(c.quotedPostId){const d=await Va(c.quotedPostId);d&&(f={...d,quotedPost:void 0})}a.push({id:s.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,hashtags:c.hashtags||[],mentions:c.mentions||[],quotedPostId:c.quotedPostId,quotedPost:f,recipeData:c.recipeData,visibility:c.visibility,createdAt:$n(c.createdAt),updatedAt:c.updatedAt?$n(c.updatedAt):void 0})}const o=a.filter(s=>s.visibility==="public").slice(0,t);return console.log(`✅ Fallback: Filtered to ${o.length} public posts`),o}catch(r){return console.error("❌ フォールバッククエリもエラー:",r),console.error("Fallback error code:",r.code),console.error("Fallback error message:",r.message),[]}}return console.error("❌ タイムラインの取得に失敗しました（詳細）:",e),[]}},zY=async(t,e)=>{try{const r=await Va(t);if(!r)throw new Error("投稿が見つかりません");if(r.authorId!==e)throw new Error("自分の投稿のみ削除できます");const n=Ue(ve,"posts",t);await Ui(n);const i=Ue(ve,"users",e,"profile","data");await nr(i,{"stats.postCount":zi(-1)}),console.log("投稿を削除しました:",t)}catch(r){throw console.error("投稿の削除に失敗しました:",r),r}},gk=async(t,e,r,n)=>{try{const i=Ue(Ve(ve,`posts/${t}/likes`)),o={id:i.id,postId:t,userId:e,userName:r,createdAt:new Date().toISOString()};n&&(o.userAvatar=n),await Xl(i,o);const s=Ue(ve,"posts",t);await nr(s,{likes:zi(1)}),console.log("いいねを追加しました")}catch(i){throw console.error("いいねの追加に失敗しました:",i),i}},vk=async(t,e)=>{try{const r=Ve(ve,`posts/${t}/likes`),n=Ct(r,Vr("userId","==",e)),i=await vt(n);for(const o of i.docs)await Ui(o.ref);const a=Ue(ve,"posts",t);await nr(a,{likes:zi(-1)}),console.log("いいねを削除しました")}catch(r){throw console.error("いいねの削除に失敗しました:",r),r}},mk=async(t,e)=>{try{const r=Ve(ve,`posts/${t}/likes`),n=Ct(r,Vr("userId","==",e));return!(await vt(n)).empty}catch(r){return console.error("いいね確認に失敗しました:",r),!1}},FY=async(t,e,r,n,i)=>{try{const a=Ue(Ve(ve,`posts/${t}/comments`)),s={id:a.id,postId:t,userId:e,userName:r,content:n,createdAt:new Date().toISOString()};i&&(s.userAvatar=i),await Xl(a,s);const c=Ue(ve,"posts",t);await nr(c,{commentCount:zi(1)}),console.log("コメントを追加しました")}catch(a){throw console.error("コメントの追加に失敗しました:",a),a}},VY=async(t,e,r)=>{try{const n=Ue(ve,`posts/${t}/comments/${e}`),i=await Ro(n);if(!i.exists())throw new Error("コメントが見つかりません");if(i.data().userId!==r)throw new Error("自分のコメントのみ削除できます");await Ui(n);const a=Ue(ve,"posts",t);await nr(a,{commentCount:zi(-1)}),console.log("コメントを削除しました")}catch(n){throw console.error("コメントの削除に失敗しました:",n),n}},L2=async t=>{try{const e=Ve(ve,`posts/${t}/comments`),r=Ct(e,$r("createdAt","asc")),n=await vt(r),i=[];return n.forEach(a=>{const o=a.data();i.push({id:a.id,postId:t,userId:o.userId,userName:o.userName,userAvatar:o.userAvatar,content:o.content,createdAt:o.createdAt,updatedAt:o.updatedAt})}),i}catch(e){return console.error("コメント一覧の取得に失敗しました:",e),[]}},HY=async(t,e)=>{try{const r=Ue(ve,`users/${e}/bookmarks/${t}`),n={id:t,postId:t,userId:e,createdAt:new Date().toISOString()};await Xl(r,n),console.log("ブックマークを追加しました")}catch(r){throw console.error("ブックマークの追加に失敗しました:",r),r}},$Y=async(t,e)=>{try{const r=Ue(ve,`users/${e}/bookmarks/${t}`);await Ui(r),console.log("ブックマークを削除しました")}catch(r){throw console.error("ブックマークの削除に失敗しました:",r),r}},qY=async(t,e)=>{try{const r=Ue(ve,`users/${e}/bookmarks/${t}`);return(await Ro(r)).exists()}catch(r){return console.error("ブックマーク確認に失敗しました:",r),!1}},GY=async(t,e,r,n)=>{try{const i=Ue(Ve(ve,`posts/${t}/reposts`)),o={id:i.id,postId:t,userId:e,userName:r,createdAt:new Date().toISOString()};n&&(o.userAvatar=n),await Xl(i,o);const s=Ue(ve,"posts",t);await nr(s,{repostCount:zi(1)}),console.log("リポストを追加しました")}catch(i){throw console.error("リポストの追加に失敗しました:",i),i}},WY=async(t,e)=>{try{const r=Ve(ve,`posts/${t}/reposts`),n=Ct(r,Vr("userId","==",e)),i=await vt(n);for(const o of i.docs)await Ui(o.ref);const a=Ue(ve,"posts",t);await nr(a,{repostCount:zi(-1)}),console.log("リポストを削除しました")}catch(r){throw console.error("リポストの削除に失敗しました:",r),r}},KY=async(t,e)=>{try{const r=Ve(ve,`posts/${t}/reposts`),n=Ct(r,Vr("userId","==",e));return!(await vt(n)).empty}catch(r){return console.error("リポスト確認に失敗しました:",r),!1}},XY=async(t,e=20)=>{try{console.log(`[getFollowingPosts] Fetching following posts for user: ${t}`);const r=await dk(t);if(console.log(`[getFollowingPosts] Found ${r.length} following users`),r.length===0)return[];const n=r.map(s=>s.uid),i=Ve(ve,"posts"),a=[];for(let s=0;s<n.length;s+=10){const c=n.slice(s,s+10),f=Ct(i,Vr("authorId","in",c),Vr("visibility","in",["public","followers"])),d=await vt(f);for(const p of d.docs){const g=p.data();let y;if(g.quotedPostId){const b=await Va(g.quotedPostId);b&&(y={...b,quotedPost:void 0})}a.push({id:p.id,content:g.content,images:g.images||[],authorId:g.authorId,authorName:g.authorName,authorAvatar:g.authorAvatar||"",likes:g.likes||0,commentCount:g.commentCount||0,repostCount:g.repostCount||0,hashtags:g.hashtags||[],mentions:g.mentions||[],quotedPostId:g.quotedPostId,quotedPost:y,recipeData:g.recipeData,visibility:g.visibility,createdAt:$n(g.createdAt),updatedAt:g.updatedAt?$n(g.updatedAt):void 0})}}a.sort((s,c)=>new Date(c.createdAt).getTime()-new Date(s.createdAt).getTime());const o=a.slice(0,e);return console.log(`[getFollowingPosts] Returning ${o.length} posts`),o}catch(r){return console.error("[getFollowingPosts] フォロー中の投稿取得に失敗しました:",r),[]}},YY=async(t,e=20)=>{try{console.log(`[getUserMediaPosts] Fetching media posts for user: ${t}`);const n=(await pk(t,100)).filter(i=>i.images&&i.images.length>0);return console.log(`[getUserMediaPosts] Found ${n.length} media posts`),n.slice(0,e)}catch(r){return console.error("[getUserMediaPosts] メディア投稿の取得に失敗しました:",r),[]}},QY=async(t,e=20)=>{try{console.log(`[getUserLikedPosts] Fetching liked posts for user: ${t}`);const r=Ve(ve,"posts"),n=await vt(r),i=[];for(const a of n.docs){const o=a.data(),s=Ve(ve,`posts/${a.id}/likes`),c=await vt(s);let f=!1;for(const d of c.docs)if(d.data().userId===t){f=!0;break}if(f){let d;if(o.quotedPostId){const p=await Va(o.quotedPostId);p&&(d={...p,quotedPost:void 0})}i.push({id:a.id,content:o.content,images:o.images||[],authorId:o.authorId,authorName:o.authorName,authorAvatar:o.authorAvatar||"",likes:o.likes||0,commentCount:o.commentCount||0,repostCount:o.repostCount||0,hashtags:o.hashtags||[],mentions:o.mentions||[],quotedPostId:o.quotedPostId,quotedPost:d,recipeData:o.recipeData,visibility:o.visibility,createdAt:$n(o.createdAt),updatedAt:o.updatedAt?$n(o.updatedAt):void 0})}if(i.length>=e)break}return i.sort((a,o)=>new Date(o.createdAt).getTime()-new Date(a.createdAt).getTime()),console.log(`[getUserLikedPosts] Found ${i.length} liked posts`),i.slice(0,e)}catch(r){return console.error("[getUserLikedPosts] いいねした投稿の取得に失敗しました:",r),[]}},ZY=async(t,e)=>{try{console.log(`[pinPost] Pinning post ${e} for user ${t}`);const r=await Va(e);if(!r)throw new Error("投稿が見つかりません");if(r.authorId!==t)throw new Error("自分の投稿のみピン留めできます");const n=Ue(ve,`users/${t}/profile/data`),i=await Ro(n);if(i.exists()){const s=i.data().pinnedPostId;if(s){const c=Ue(ve,"posts",s);await nr(c,{isPinned:!1})}}await nr(n,{pinnedPostId:e});const a=Ue(ve,"posts",e);await nr(a,{isPinned:!0}),console.log(`✅ [pinPost] Post ${e} pinned successfully`)}catch(r){throw console.error("❌ [pinPost] Error:",r),new Error(`ピン留めに失敗しました: ${r.message||"不明なエラー"}`)}},JY=async(t,e)=>{try{console.log(`[unpinPost] Unpinning post ${e} for user ${t}`);const r=Ue(ve,`users/${t}/profile/data`);await nr(r,{pinnedPostId:null});const n=Ue(ve,"posts",e);await nr(n,{isPinned:!1}),console.log(`✅ [unpinPost] Post ${e} unpinned successfully`)}catch(r){throw console.error("❌ [unpinPost] Error:",r),new Error(`ピン留め解除に失敗しました: ${r.message||"不明なエラー"}`)}},eQ=async(t,e=20)=>{try{console.log(`[getUserReplies] Fetching replies for user: ${t}`);const r=Ve(ve,"posts"),n=Ct(r,Vr("authorId","==",t),Vr("replyToPostId","!=",null),$r("replyToPostId"),$r("createdAt","desc"),Ao(e)),i=await vt(n),a=[];for(const o of i.docs){const s=o.data(),c={id:o.id,content:s.content,images:s.images||[],authorId:s.authorId,authorName:s.authorName,authorAvatar:s.authorAvatar||"",likes:s.likes||0,commentCount:s.commentCount||0,repostCount:s.repostCount||0,replyCount:s.replyCount||0,hashtags:s.hashtags||[],mentions:s.mentions||[],quotedPostId:s.quotedPostId,replyToPostId:s.replyToPostId,replyToUserId:s.replyToUserId,replyToUserName:s.replyToUserName,recipeData:s.recipeData,visibility:s.visibility,isPinned:s.isPinned||!1,createdAt:$n(s.createdAt),updatedAt:s.updatedAt?$n(s.updatedAt):void 0};a.push(c)}return console.log(`[getUserReplies] Found ${a.length} replies`),a}catch(r){console.error("[getUserReplies] Error:",r);try{const n=Ve(ve,"posts"),i=Ct(n,Vr("authorId","==",t),$r("createdAt","desc"),Ao(e)),a=await vt(i),o=[];for(const s of a.docs){const c=s.data();if(c.replyToPostId){const f={id:s.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,replyCount:c.replyCount||0,hashtags:c.hashtags||[],mentions:c.mentions||[],quotedPostId:c.quotedPostId,replyToPostId:c.replyToPostId,replyToUserId:c.replyToUserId,replyToUserName:c.replyToUserName,recipeData:c.recipeData,visibility:c.visibility,isPinned:c.isPinned||!1,createdAt:$n(c.createdAt),updatedAt:c.updatedAt?$n(c.updatedAt):void 0};o.push(f)}}return console.log(`[getUserReplies] Fallback: Found ${o.length} replies`),o.slice(0,e)}catch(n){return console.error("[getUserReplies] Fallback also failed:",n),[]}}},dl=280,Xg=4,yk=({onClose:t,onPostCreated:e,quotedPostId:r,recipeData:n})=>{const{user:i}=As(),[a,o]=C.useState(""),[s,c]=C.useState([]),[f,d]=C.useState([]),[p,g]=C.useState("public"),[y,b]=C.useState(!1),[w,E]=C.useState(""),[S,I]=C.useState(null);C.useEffect(()=>{(async()=>{if(r){const N=await Va(r);I(N)}})()},[r]);const O=R=>{const N=Array.from(R.target.files||[]);if(N.length===0)return;if(s.length+N.length>Xg){E(`画像は最大${Xg}枚まで添付できます`);return}const L=[];N.forEach(U=>{const j=new FileReader;j.onloadend=()=>{L.push(j.result),L.length===N.length&&d([...f,...L])},j.readAsDataURL(U)}),c([...s,...N]),E("")},D=R=>{c(s.filter((N,L)=>L!==R)),d(f.filter((N,L)=>L!==R))},k=async()=>{if(!i){E("ログインしてください");return}if(!a.trim()){E("投稿内容を入力してください");return}if(a.length>dl){E(`投稿は${dl}文字以内で入力してください`);return}b(!0),E("");try{console.log("📝 Checking user profile before posting...");let R=await Fi(i.uid);if(!R){console.log("⚠️ プロフィールが存在しません。自動作成します...");try{await EA(i.uid,i.email||"",i.displayName||`User${i.uid.slice(0,8)}`),console.log("✅ プロフィールを作成しました"),R=await Fi(i.uid)}catch(L){console.error("❌ プロフィール作成に失敗しました:",L),E("プロフィール作成に失敗しました。設定画面からプロフィールを作成してください。"),b(!1);return}}const N={content:a.trim(),images:s,visibility:p,quotedPostId:r,recipeData:n};await BY(i.uid,N),alert("投稿しました！"),e(),t()}catch(R){console.error("投稿の作成に失敗しました:",R),E("投稿の作成に失敗しました。もう一度お試しください。")}finally{b(!1)}},B=[{value:"public",label:"全体公開",icon:xD,description:"誰でも見られます"},{value:"followers",label:"フォロワー",icon:yD,description:"フォロワーのみ"},{value:"private",label:"非公開",icon:Sl,description:"自分のみ"}];return m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"16px"},onClick:t,children:m.jsxs("div",{style:{background:"var(--card)",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)"},onClick:R=>R.stopPropagation(),children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid var(--border)"},children:[m.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text)",margin:0},children:"投稿を作成"}),m.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:R=>{R.currentTarget.style.background="var(--border)"},onMouseLeave:R=>{R.currentTarget.style.background="none"},children:m.jsx(fs,{size:24})})]}),m.jsxs("div",{style:{padding:"20px"},children:[m.jsx("textarea",{value:a,onChange:R=>o(R.target.value),placeholder:"今何してる？",style:{width:"100%",minHeight:"120px",padding:"12px",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"16px",color:"var(--text)",background:"var(--background)",resize:"vertical",fontFamily:"inherit",marginBottom:"12px"}}),S&&m.jsxs("div",{style:{padding:"12px",background:"var(--background)",border:"1px solid var(--border)",borderRadius:"12px",marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"引用元:"}),m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:S.authorName}),m.jsxs("div",{style:{fontSize:"14px",color:"var(--text)",marginTop:"4px"},children:[S.content.substring(0,100),S.content.length>100?"...":""]})]}),n&&m.jsxs("div",{style:{padding:"12px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",border:"2px solid var(--primary)",borderRadius:"12px",marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px"},children:"添付レシピ:"}),m.jsxs("div",{style:{fontWeight:700,fontSize:"16px",color:"var(--text)"},children:["👨‍🍳 ",n.title]}),m.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginTop:"4px"},children:n.description})]}),m.jsxs("div",{style:{textAlign:"right",fontSize:"14px",color:a.length>dl?"#f44336":"var(--text-secondary)",marginBottom:"16px"},children:[a.length," / ",dl]}),f.length>0&&m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"12px",marginBottom:"16px"},children:f.map((R,N)=>m.jsxs("div",{style:{position:"relative",paddingBottom:"100%",borderRadius:"12px",overflow:"hidden",background:"var(--border)"},children:[m.jsx("img",{src:R,alt:`プレビュー ${N+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}}),m.jsx("button",{onClick:()=>D(N),style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0, 0, 0, 0.6)",border:"none",borderRadius:"50%",width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:m.jsx(fs,{size:18})})]},N))}),s.length<Xg&&m.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"var(--background)",border:"2px solid var(--border)",borderRadius:"12px",cursor:"pointer",color:"var(--primary)",fontSize:"14px",fontWeight:500,marginBottom:"16px",transition:"background 0.2s"},onMouseEnter:R=>{R.currentTarget.style.background="var(--border)"},onMouseLeave:R=>{R.currentTarget.style.background="var(--background)"},children:[m.jsx(Hz,{size:20}),"画像を追加 (",s.length,"/",Xg,")",m.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:O,style:{display:"none"}})]}),m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("label",{style:{display:"block",fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px",fontWeight:500},children:"公開範囲"}),m.jsx("select",{value:p,onChange:R=>g(R.target.value),style:{width:"100%",padding:"12px",border:"2px solid var(--border)",borderRadius:"12px",fontSize:"15px",color:"var(--text)",background:"var(--background)",cursor:"pointer"},children:B.map(R=>m.jsxs("option",{value:R.value,children:[R.label," - ",R.description]},R.value))})]}),w&&m.jsx("div",{style:{padding:"12px",background:"#ffebee",color:"#c62828",borderRadius:"8px",fontSize:"14px",marginBottom:"16px"},children:w}),m.jsx("button",{onClick:k,disabled:y||!a.trim()||a.length>dl,style:{width:"100%",padding:"14px",background:y||!a.trim()||a.length>dl?"var(--border)":"linear-gradient(135deg, var(--primary), #81c784)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:600,cursor:y||!a.trim()||a.length>dl?"not-allowed":"pointer",transition:"transform 0.2s"},onMouseEnter:R=>{!y&&a.trim()&&a.length<=dl&&(R.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:R=>{R.currentTarget.style.transform="translateY(0)"},children:y?"投稿中...":"投稿する"})]})]})})},tQ=()=>{const[t,e]=C.useState(null),[r,n]=C.useState(!1),[i,a]=C.useState(!1),[o,s]=C.useState(null),c=p=>{let g="easy";p.difficulty==="super_easy"||p.difficulty==="under_5min"?g="easy":p.difficulty==="under_10min"?g="medium":p.difficulty==="no_fire"&&(g="easy");const y={title:p.title,description:p.content.substring(0,100),ingredients:p.ingredients,instructions:p.content.split(`

`).slice(1),difficulty:g,servings:2,preparationTime:15,cookingTime:30};s(y),a(!0)},f=()=>{a(!1),s(null)},d=()=>{a(!1),s(null),alert("レシピを投稿しました！")};return m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"AIレシピ生成"}),m.jsx(PY,{onRecipeGenerated:e,isLoading:r,setIsLoading:n}),r&&m.jsxs("div",{className:"card",style:{textAlign:"center",padding:"32px"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"12px",color:"var(--primary)"},children:m.jsx(L1,{size:48})}),m.jsx("div",{style:{fontWeight:600,marginBottom:"8px"},children:"レシピを生成中..."}),m.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary, #666)"},children:"AIがレシピを考えています"})]}),t&&!r&&m.jsx(DY,{recipe:t,onAttachToPost:c}),m.jsx(NY,{onRecipeSelect:e}),m.jsx(MY,{onRecipeSelect:e}),i&&m.jsx(yk,{onClose:f,onPostCreated:d,recipeData:o||void 0})]})};function rQ(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function nQ(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var iQ=(function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),aQ=(function(t){iQ(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),rQ(a,i.prototype),nQ(a),a}return e})(Error),oQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xi=(function(t){oQ(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e})(aQ),sQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ma=(function(t){sQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(xi),lQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Le=(function(t){lQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(xi),cQ=(function(){function t(e){if(this.binarizer=e,e===null)throw new Le("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var a=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),uQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pn=(function(t){uQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(xi),fQ=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),Xt=(function(){function t(){}return t.arraycopy=function(e,r,n,i,a){for(;a--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t})(),dQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),OA=(function(t){dQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(xi),hQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),m6=(function(t){hQ(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(OA),pQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},en=(function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new Le("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new m6(r);if(n>e)throw new m6(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var a=pQ(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,a=new Int32Array(i);return Xt.arraycopy(e,r,a,0,i),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=n(r,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},t.numberComparator=function(e,r){return e-r},t})(),et=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),gn=(function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Xt.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=n[i]}var s=i*32+et.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=~n[i]}var s=i*32+et.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Le;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),a=this.bits,o=n;o<=i;o++){var s=o>n?0:e&31,c=o<i?31:r&31,f=(2<<c)-(1<<s);a[o]|=f}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Le;if(r===e)return!0;r--;for(var i=Math.floor(e/32),a=Math.floor(r/32),o=this.bits,s=i;s<=a;s++){var c=s>i?0:e&31,f=s<a?31:r&31,d=(2<<f)-(1<<c)&4294967295;if((o[s]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Le("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Le("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;r[n+a]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,a=0;a<n;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-a]=o}if(this.size!==n*32){for(var s=n*32-this.size,c=e[0]>>>s,a=1;a<n;a++){var f=e[a];c|=f<<32-s,e[a-1]=c,c=f>>>s}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&en.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+en.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t})(),J_;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(J_||(J_={}));const sr=J_;var gQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xe=(function(t){gQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(xi),vQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Mt||(Mt={}));var Jr=(function(){function t(e,r,n){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,f=0,d=c.length;f!==d;f++){var p=c[f];t.VALUES_TO_ECI.set(p,this)}try{for(var g=vQ(o),y=g.next();!y.done;y=g.next()){var b=y.value;t.NAME_TO_ECI.set(b,this)}}catch(w){i={error:w}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new xe("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new xe("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new xe("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Mt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Mt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Mt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Mt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Mt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Mt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Mt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Mt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Mt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Mt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Mt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Mt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Mt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Mt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Mt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Mt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Mt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Mt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Mt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Mt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Mt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Mt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Mt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Mt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Mt.Big5,28,"Big5"),t.GB18030=new t(Mt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Mt.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),mQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),I1=(function(t){mQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(xi),va=(function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Jr?e:Jr.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(Jr.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new I1("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Jr.UTF8)||e.equals(Jr.ISO8859_1)||e.equals(Jr.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},t})(),ht=(function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return va.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(sr.CHARACTER_SET)!==void 0)return r.get(sr.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,o=!0,s=0,c=0,f=0,d=0,p=0,g=0,y=0,b=0,w=0,E=0,S=0,I=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,O=0;O<n&&(i||a||o);O++){var D=e[O]&255;o&&(s>0?(D&128)===0?o=!1:s--:(D&128)!==0&&((D&64)===0?o=!1:(s++,(D&32)===0?c++:(s++,(D&16)===0?f++:(s++,(D&8)===0?d++:o=!1))))),i&&(D>127&&D<160?i=!1:D>159&&(D<192||D===215||D===247)&&S++),a&&(p>0?D<64||D===127||D>252?a=!1:p--:D===128||D===160||D>239?a=!1:D>160&&D<224?(g++,b=0,y++,y>w&&(w=y)):D>127?(p++,y=0,b++,b>E&&(E=b)):(y=0,b=0))}return o&&s>0&&(o=!1),a&&p>0&&(a=!1),o&&(I||c+f+d>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||w>=3||E>=3)?t.SHIFT_JIS:i&&a?w===2&&g===2||S*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function a(s,c,f,d,p,g){if(s==="%%")return"%";if(r[++i]!==void 0){s=d?parseInt(d.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,b;switch(g){case"s":b=r[i];break;case"c":b=r[i][0];break;case"f":b=parseFloat(r[i]).toFixed(s);break;case"p":b=parseFloat(r[i]).toPrecision(s);break;case"e":b=parseFloat(r[i]).toExponential(s);break;case"x":b=parseInt(r[i]).toString(y||16);break;case"d":b=parseFloat(parseInt(r[i],y||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(y);for(var w=parseInt(f),E=f&&f[0]+""=="0"?"0":" ";b.length<w;)b=c!==void 0?b+E:E+b;return b}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},t.getBytes=function(e,r){return va.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Jr.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Jr.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Jr.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),Ze=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ht.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t})(),So=(function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new Le("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),a=0;a<r;a++)for(var o=e[a],s=0;s<n;s++)o[s]&&i.set(s,a);return i},t.parseFromString=function(e,r,n){if(e===null)throw new Le("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,c=0,f=0;f<e.length;)if(e.charAt(f)===`
`||e.charAt(f)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Le("row lengths do not match");o=a,c++}f++}else if(e.substring(f,f+r.length)===r)f+=r.length,i[a]=!0,a++;else if(e.substring(f,f+n.length)===n)f+=n.length,i[a]=!1,a++;else throw new Le("illegal character encountered: "+e.substring(f));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Le("row lengths do not match");c++}for(var d=new t(s,c),p=0;p<a;p++)i[p]&&d.set(Math.floor(p%s),Math.floor(p/s));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Le("input matrix dimensions do not match");for(var r=new gn(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*n,c=e.getRow(a,r).getBitArray(),f=0;f<n;f++)i[s+f]^=c[f]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new Le("Left and top must be nonnegative");if(i<1||n<1)throw new Le("Height and width must be at least 1");var a=e+n,o=r+i;if(o>this.height||a>this.width)throw new Le("The region must fit inside the matrix");for(var s=this.rowSize,c=this.bits,f=r;f<o;f++)for(var d=f*s,p=e;p<a;p++)c[d+Math.floor(p/32)]|=1<<(p&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new gn(this.width):r.clear();for(var n=this.rowSize,i=this.bits,a=e*n,o=0;o<n;o++)r.setBulk(o*32,i[a+o]);return r},t.prototype.setRow=function(e,r){Xt.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new gn(e),i=new gn(e),a=0,o=Math.floor((r+1)/2);a<o;a++)n=this.getRow(a,n),i=this.getRow(r-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,a=e,o=r,s=-1,c=-1,f=0;f<r;f++)for(var d=0;d<n;d++){var p=i[f*n+d];if(p!==0){if(f<o&&(o=f),f>c&&(c=f),d*32<a){for(var g=0;(p<<31-g&4294967295)===0;)g++;d*32+g<a&&(a=d*32+g)}if(d*32+31>s){for(var g=31;!(p>>>g);)g--;d*32+g>s&&(s=d*32+g)}}}return s<a||c<o?null:Int32Array.from([a,o,s-a+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,a=n%e*32,o=r[n],s=0;(o<<31-s&4294967295)===0;)s++;return a+=s,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,o=r[n],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&en.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+en.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new Ze,a=0,o=this.height;a<o;a++){for(var s=0,c=this.width;s<c;s++)i.append(this.get(s,a)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),yQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),se=(function(t){yQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(xi),xQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bQ=(function(t){xQ(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new gn(a):n.clear(),this.initArrays(a);for(var o=i.getRow(r,this.luminances),s=this.buckets,c=0;c<a;c++)s[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var f=e.estimateBlackPoint(s);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<f&&n.set(c);else for(var d=o[0]&255,p=o[1]&255,c=1;c<a-1;c++){var g=o[c+1]&255;(p*4-d-g)/2<f&&n.set(c),d=p,p=g}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),a=new So(n,i);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var c=Math.floor(i*s/5),f=r.getRow(c,this.luminances),d=Math.floor(n*4/5),p=Math.floor(n/5);p<d;p++){var g=f[p]&255;o[g>>e.LUMINANCE_SHIFT]++}for(var y=e.estimateBlackPoint(o),b=r.getMatrix(),s=0;s<i;s++)for(var w=s*n,p=0;p<n;p++){var g=b[w+p]&255;g<y&&a.set(p,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,a=0,o=0,s=0;s<n;s++)r[s]>o&&(a=s,o=r[s]),r[s]>i&&(i=r[s]);for(var c=0,f=0,s=0;s<n;s++){var d=s-a,p=r[s]*d*d;p>f&&(c=s,f=p)}if(a>c){var g=a;a=c,c=g}if(c-a<=n/16)throw new se;for(var y=c-1,b=-1,s=c-1;s>a;s--){var w=s-a,p=w*w*(c-s)*(i-r[s]);p>b&&(y=s,b=p)}return y<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(fQ),_Q=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),wQ=(function(t){_Q(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var s=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&s++;var c=e.calculateBlackPoints(a,o,s,n,i),f=new So(n,i);e.calculateThresholdForBlock(a,o,s,n,i,c,f),this.matrix=f}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,a,o,s,c){for(var f=o-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,p=0;p<i;p++){var g=p<<e.BLOCK_SIZE_POWER;g>f&&(g=f);for(var y=e.cap(p,2,i-3),b=0;b<n;b++){var w=b<<e.BLOCK_SIZE_POWER;w>d&&(w=d);for(var E=e.cap(b,2,n-3),S=0,I=-2;I<=2;I++){var O=s[y+I];S+=O[E-2]+O[E-1]+O[E]+O[E+1]+O[E+2]}var D=S/25;e.thresholdBlock(r,w,g,D,a,c)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,a,o,s){for(var c=0,f=i*o+n;c<e.BLOCK_SIZE;c++,f+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[f+d]&255)<=a&&s.set(n+d,i+c)},e.calculateBlackPoints=function(r,n,i,a,o){for(var s=o-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=new Array(i),d=0;d<i;d++){f[d]=new Int32Array(n);var p=d<<e.BLOCK_SIZE_POWER;p>s&&(p=s);for(var g=0;g<n;g++){var y=g<<e.BLOCK_SIZE_POWER;y>c&&(y=c);for(var b=0,w=255,E=0,S=0,I=p*a+y;S<e.BLOCK_SIZE;S++,I+=a){for(var O=0;O<e.BLOCK_SIZE;O++){var D=r[I+O]&255;b+=D,D<w&&(w=D),D>E&&(E=D)}if(E-w>e.MIN_DYNAMIC_RANGE)for(S++,I+=a;S<e.BLOCK_SIZE;S++,I+=a)for(var O=0;O<e.BLOCK_SIZE;O++)b+=r[I+O]&255}var k=b>>e.BLOCK_SIZE_POWER*2;if(E-w<=e.MIN_DYNAMIC_RANGE&&(k=w/2,d>0&&g>0)){var B=(f[d-1][g]+2*f[d][g-1]+f[d-1][g-1])/4;w<B&&(k=B)}f[d][g]=k}}return f},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(bQ),Dm=(function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new I1("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new I1("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new I1("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Ze,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t})(),EQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),RA=(function(t){EQ(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(r[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,a){return new e(this.delegate.crop(r,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Dm),AQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),SQ=(function(t){AQ(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,c=0,f=r.length;s<f;s+=4,c++){var d=void 0,p=r[s+3];if(p===0)d=255;else{var g=r[s],y=r[s+1],b=r[s+2];d=306*g+601*y+117*b+512>>10}o[c]=d}else for(var s=0,c=0,w=r.length;s<w;s+=4,c++){var d=void 0,p=r[s+3];if(p===0)d=255;else{var g=r[s],y=r[s+1],b=r[s+2];d=306*g+601*y+117*b+512>>10}o[c]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Le("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),f=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return n.width=c,n.height=f,i.translate(c/2,f/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new RA(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Dm),CQ=(function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Zn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(d){try{f(n.next(d))}catch(p){o(p)}}function c(d){try{f(n.throw(d))}catch(p){o(p)}}function f(d){d.done?a(d.value):i(d.value).then(s,c)}f((n=n.apply(t,e||[])).next())})},Jn=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(d){return c([f,d])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(d){f=[6,d],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},TQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ad=(function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Zn(this,void 0,void 0,function(){var e,r,n,i,a,o,s,c,f,d,p,g;return Jn(this,function(y){switch(y.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=y.sent(),r=[];try{for(n=TQ(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,c=a.label||"Video device "+(r.length+1),f=a.groupId,d={deviceId:s,label:c,kind:o,groupId:f},r.push(d))}catch(b){p={error:b}}finally{try{i&&!i.done&&(g=n.return)&&g.call(n)}finally{if(p)throw p.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Zn(this,void 0,void 0,function(){var e;return Jn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new CQ(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Zn(this,void 0,void 0,function(){var r;return Jn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Zn(this,void 0,void 0,function(){return Jn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Zn(this,void 0,void 0,function(){var n,i;return Jn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Zn(this,void 0,void 0,function(){var n;return Jn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Zn(this,void 0,void 0,function(){var n,i;return Jn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Zn(this,void 0,void 0,function(){return Jn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Zn(this,void 0,void 0,function(){var i,a;return Jn(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Zn(this,void 0,void 0,function(){var i;return Jn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Zn(this,void 0,void 0,function(){var i;return Jn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Zn(this,void 0,void 0,function(){var n;return Jn(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Ma("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Ma("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Ma("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Ma("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Ma("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Ma("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Ma("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Ma("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Ma("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Zn(this,void 0,void 0,function(){return Jn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Zn(this,void 0,void 0,function(){return Jn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new se("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);o(c)}catch(g){var f=r&&g instanceof se,d=g instanceof pn||g instanceof xe,p=d&&n;if(f||p)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(g)}};return new Promise(function(o,s){return a(o,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof pn||c instanceof xe,s=c instanceof se;(o||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new SQ(n,r),a=new wQ(i);return new cQ(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),Wn=(function(){function t(e,r,n,i,a,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=Xt.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Xt.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Xt.arraycopy(r,0,n,0,r.length),Xt.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),ew;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ew||(ew={}));const je=ew;var tw;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(tw||(tw={}));const Dn=tw;var Nm=(function(){function t(e,r,n,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),zh=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t})(),Pl=(function(){function t(e,r){if(r.length===0)throw new Le;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Xt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,a=r.length;i!==a;i++){var o=r[i];n=zh.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,c=this.field,i=1;i<s;i++)n=zh.addOrSubtract(c.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;Xt.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=zh.addOrSubtract(r[s-o],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=this.field,c=0;c<n;c++)for(var f=r[c],d=0;d<a;d++)o[c+d]=zh.addOrSubtract(o[c+d],s.multiply(f,i[d]));return new t(s,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),a=this.coefficients,o=0;o<r;o++)i[o]=n.multiply(a[o],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Le;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(n[s],r);return new t(o,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Le("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Le("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=r.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),c=r.multiply(i.getCoefficient(i.getDegree()),o),f=e.multiplyByMonomial(s,c),d=r.buildMonomial(s,c);n=n.addOrSubtract(d),i=i.addOrSubtract(f)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t})(),IQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xk=(function(t){IQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(xi),OQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vi=(function(t){OQ(e,t);function e(r,n,i){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=i;for(var o=new Int32Array(n),s=1,c=0;c<n;c++)o[c]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=o;for(var f=new Int32Array(n),c=0;c<n-1;c++)f[o[c]]=c;return a.logTable=f,a.zero=new Pl(a,Int32Array.from([0])),a.one=new Pl(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Le;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Pl(this,i)},e.prototype.inverse=function(r){if(r===0)throw new xk;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+et.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(zh),RQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Yg=(function(t){RQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(xi),PQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Hp=(function(t){PQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(xi),Mm=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new Pl(n,e),a=new Int32Array(r),o=!0,s=0;s<r;s++){var c=i.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=c,c!==0&&(o=!1)}if(!o)for(var f=new Pl(n,a),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),f,r),p=d[0],g=d[1],y=this.findErrorLocations(p),b=this.findErrorMagnitudes(g,y),s=0;s<y.length;s++){var w=e.length-1-n.log(y[s]);if(w<0)throw new Yg("Bad error location");e[w]=vi.addOrSubtract(e[w],b[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=this.field,o=e,s=r,c=a.getZero(),f=a.getOne();s.getDegree()>=(n/2|0);){var d=o,p=c;if(o=s,c=f,o.isZero())throw new Yg("r_{i-1} was zero");s=d;for(var g=a.getZero(),y=o.getCoefficient(o.getDegree()),b=a.inverse(y);s.getDegree()>=o.getDegree()&&!s.isZero();){var w=s.getDegree()-o.getDegree(),E=a.multiply(s.getCoefficient(s.getDegree()),b);g=g.addOrSubtract(a.buildMonomial(w,E)),s=s.addOrSubtract(o.multiplyByMonomial(w,E))}if(f=g.multiply(c).addOrSubtract(p),s.getDegree()>=o.getDegree())throw new Hp("Division algorithm failed to reduce polynomial?")}var S=f.getCoefficient(0);if(S===0)throw new Yg("sigmaTilde(0) was zero");var I=a.inverse(S),O=f.multiplyScalar(I),D=s.multiplyScalar(I);return[O,D]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,a=this.field,o=1;o<a.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=a.inverse(o),i++);if(i!==r)throw new Yg("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),a=this.field,o=0;o<n;o++){for(var s=a.inverse(r[o]),c=1,f=0;f<n;f++)if(o!==f){var d=a.multiply(r[f],s),p=(d&1)===0?d|1:d&-2;c=a.multiply(c,p)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},t})(),Cn;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Cn||(Cn={}));var y6=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),a=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),s=new Nm(a,o,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Cn.UPPER,i=Cn.UPPER,a="",o=0;o<r;)if(i===Cn.BINARY){if(r-o<5)break;var s=t.readCode(e,o,5);if(o+=5,s===0){if(r-o<11)break;s=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<s;c++){if(r-o<8){o=r;break}var f=t.readCode(e,o,8);a+=ht.castAsNonUtf8Char(f),o+=8}i=n}else{var d=i===Cn.DIGIT?4:5;if(r-o<d)break;var f=t.readCode(e,o,d);o+=d;var p=t.getCharacter(i,f);p.startsWith("CTRL_")?(n=i,i=t.getTable(p.charAt(5)),p.charAt(6)==="L"&&(n=i)):(a+=p,i=n)}return a},t.getTable=function(e){switch(e){case"L":return Cn.LOWER;case"P":return Cn.PUNCT;case"M":return Cn.MIXED;case"D":return Cn.DIGIT;case"B":return Cn.BINARY;case"U":default:return Cn.UPPER}},t.getCharacter=function(e,r){switch(e){case Cn.UPPER:return t.UPPER_TABLE[r];case Cn.LOWER:return t.LOWER_TABLE[r];case Cn.MIXED:return t.MIXED_TABLE[r];case Cn.PUNCT:return t.PUNCT_TABLE[r];case Cn.DIGIT:return t.DIGIT_TABLE[r];default:throw new Hp("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=vi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=vi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=vi.AZTEC_DATA_10):(n=12,r=vi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new xe;for(var o=e.length%n,s=new Int32Array(a),c=0;c<a;c++,o+=n)s[c]=t.readCode(e,o,n);try{var f=new Mm(r);f.decode(s,a-i)}catch(E){throw new xe(E)}for(var d=(1<<n)-1,p=0,c=0;c<i;c++){var g=s[c];if(g===0||g===d)throw new xe;(g===1||g===d-1)&&p++}for(var y=new Array(i*n-p),b=0,c=0;c<i;c++){var g=s[c];if(g===1||g===d-1)y.fill(g>1,b,b+n-1),b+=n-1;else for(var w=n-1;w>=0;--w)y[b++]=(g&1<<w)!==0}return y},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var c=i+1+2*et.truncDivision(et.truncDivision(i,2)-1,15),f=i/2,d=et.truncDivision(c,2),s=0;s<f;s++){var p=s+et.truncDivision(s,15);a[f-s-1]=d-p-1,a[f+s]=d+p+1}for(var s=0,g=0;s<n;s++){for(var y=(n-s)*4+(r?9:12),b=s*2,w=i-1-b,E=0;E<y;E++)for(var S=E*2,I=0;I<2;I++)o[g+S+I]=e.get(a[b+I],a[b+E]),o[g+2*y+S+I]=e.get(a[b+E],a[w-I]),o[g+4*y+S+I]=e.get(a[w-I],a[w-E]),o[g+6*y+S+I]=e.get(a[w-E],a[b+I]);g+=y*8}return o},t.readCode=function(e,r,n){for(var i=0,a=r;a<r+n;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),xt=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var a=e-n,o=r-i;return Math.sqrt(a*a+o*o)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var a=e[n];r+=a}return r},t})(),rw=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),Oe=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*rw.floatToIntBits(this.x)+rw.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(n>=r&&n>=i?(o=e[0],a=e[1],s=e[2]):i>=n&&i>=r?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var c=a;a=s,s=c}e[0]=a,e[1]=o,e[2]=s},t.distance=function(e,r){return xt.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,a=r.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},t})(),PA=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),DQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),NQ=(function(t){DQ(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(PA),nw=(function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,c=!1,f=!1,d=!1,p=!1,g=this.width,y=this.height;o;){o=!1;for(var b=!0;(b||!c)&&r<g;)b=this.containsBlackPoint(n,i,r,!1),b?(r++,o=!0,c=!0):c||r++;if(r>=g){a=!0;break}for(var w=!0;(w||!f)&&i<y;)w=this.containsBlackPoint(e,r,i,!0),w?(i++,o=!0,f=!0):f||i++;if(i>=y){a=!0;break}for(var E=!0;(E||!d)&&e>=0;)E=this.containsBlackPoint(n,i,e,!1),E?(e--,o=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var S=!0;(S||!p)&&n>=0;)S=this.containsBlackPoint(e,r,n,!0),S?(n--,o=!0,p=!0):p||n--;if(n<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var I=r-e,O=null,D=1;O===null&&D<I;D++)O=this.getBlackPointOnSegment(e,i-D,e+D,i);if(O==null)throw new se;for(var k=null,D=1;k===null&&D<I;D++)k=this.getBlackPointOnSegment(e,n+D,e+D,n);if(k==null)throw new se;for(var B=null,D=1;B===null&&D<I;D++)B=this.getBlackPointOnSegment(r,n+D,r-D,n);if(B==null)throw new se;for(var R=null,D=1;R===null&&D<I;D++)R=this.getBlackPointOnSegment(r,i-D,r-D,i);if(R==null)throw new se;return this.centerEdges(R,O,B,k)}else throw new se},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var a=xt.round(xt.distance(e,r,n,i)),o=(n-e)/a,s=(i-r)/a,c=this.image,f=0;f<a;f++){var d=xt.round(e+f*o),p=xt.round(r+f*s);if(c.get(d,p))return new Oe(d,p)}return null},t.prototype.centerEdges=function(e,r,n,i){var a=e.getX(),o=e.getY(),s=r.getX(),c=r.getY(),f=n.getX(),d=n.getY(),p=i.getX(),g=i.getY(),y=t.CORR;return a<this.width/2?[new Oe(p-y,g+y),new Oe(s+y,c+y),new Oe(f-y,d-y),new Oe(a+y,o-y)]:[new Oe(p+y,g+y),new Oe(s+y,c-y),new Oe(f-y,d+y),new Oe(a-y,o-y)]},t.prototype.containsBlackPoint=function(e,r,n,i){var a=this.image;if(i){for(var o=e;o<=r;o++)if(a.get(o,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),x6=(function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<r.length&&a;o+=2){var s=Math.floor(r[o]),c=Math.floor(r[o+1]);if(s<-1||s>n||c<-1||c>i)throw new se;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),c===-1?(r[o+1]=0,a=!0):c===i&&(r[o+1]=i-1,a=!0)}a=!0;for(var o=r.length-2;o>=0&&a;o-=2){var s=Math.floor(r[o]),c=Math.floor(r[o+1]);if(s<-1||s>n||c<-1||c>i)throw new se;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),c===-1?(r[o+1]=0,a=!0):c===i&&(r[o+1]=i-1,a=!0)}},t})(),bk=(function(){function t(e,r,n,i,a,o,s,c,f){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=c,this.a33=f}return t.quadrilateralToQuadrilateral=function(e,r,n,i,a,o,s,c,f,d,p,g,y,b,w,E){var S=t.quadrilateralToSquare(e,r,n,i,a,o,s,c),I=t.squareToQuadrilateral(f,d,p,g,y,b,w,E);return I.times(S)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=0;g<r;g+=2){var y=e[g],b=e[g+1],w=a*y+c*b+p;e[g]=(n*y+o*b+f)/w,e[g+1]=(i*y+s*b+d)/w}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,c=this.a23,f=this.a31,d=this.a32,p=this.a33,g=e.length,y=0;y<g;y++){var b=e[y],w=r[y],E=a*b+c*w+p;e[y]=(n*b+o*w+f)/E,r[y]=(i*b+s*w+d)/E}},t.squareToQuadrilateral=function(e,r,n,i,a,o,s,c){var f=e-n+a-s,d=r-i+o-c;if(f===0&&d===0)return new t(n-e,a-n,e,i-r,o-i,r,0,0,1);var p=n-a,g=s-a,y=i-o,b=c-o,w=p*b-g*y,E=(f*b-g*d)/w,S=(p*d-f*y)/w;return new t(n-e+E*n,s-e+S*s,e,i-r+E*i,c-r+S*c,r,E,S,1)},t.quadrilateralToSquare=function(e,r,n,i,a,o,s,c){return t.squareToQuadrilateral(e,r,n,i,a,o,s,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),MQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),kQ=(function(t){MQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,a,o,s,c,f,d,p,g,y,b,w,E,S,I,O,D){var k=bk.quadrilateralToQuadrilateral(a,o,s,c,f,d,p,g,y,b,w,E,S,I,O,D);return this.sampleGridWithTransform(r,n,i,k)},e.prototype.sampleGridWithTransform=function(r,n,i,a){if(n<=0||i<=0)throw new se;for(var o=new So(n,i),s=new Float32Array(2*n),c=0;c<i;c++){for(var f=s.length,d=c+.5,p=0;p<f;p+=2)s[p]=p/2+.5,s[p+1]=d;a.transformPoints(s),x6.checkAndNudgePoints(r,s);try{for(var p=0;p<f;p+=2)r.get(Math.floor(s[p]),Math.floor(s[p+1]))&&o.set(p/2,c)}catch{throw new se}}return o},e})(x6),DA=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new kQ,t})(),di=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Oe(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),jQ=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new NQ(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new se;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,a=0;a<4;a++){var o=n[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,o,s){var c=(a>>r-2<<1)+(a&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(et.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new se},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var a=n-i,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var c=new Mm(vi.AZTEC_PARAM);c.decode(o,a)}catch{throw new se}for(var f=0,s=0;s<i;s++)f=(f<<4)+o[s];return f},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),f=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var p=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(p<.75||p>1.25||!this.isWhiteOrBlackRectangle(s,c,f,d))break}r=s,n=c,i=f,a=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;var g=new Oe(r.getX()+.5,r.getY()-.5),y=new Oe(n.getX()+.5,n.getY()+.5),b=new Oe(i.getX()-.5,i.getY()+.5),w=new Oe(a.getX()-.5,a.getY()-.5);return this.expandSquare([g,y,b,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var a=new nw(this.image).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new di(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new di(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new di(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new di(o-7,s-7),!1,-1,-1).toResultPoint()}var c=xt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),f=xt.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var a=new nw(this.image,15,c,f).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new di(c+7,f-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new di(c+7,f+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new di(c-7,f+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new di(c-7,f-7),!1,-1,-1).toResultPoint()}return c=xt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),f=xt.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new di(c,f)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,a){var o=DA.getInstance(),s=this.getDimension(),c=s/2-this.nbCenterLayers,f=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,c,c,f,c,f,f,c,f,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,a=this.distanceResultPoint(e,r),o=a/n,s=e.getX(),c=e.getY(),f=o*(r.getX()-e.getX())/a,d=o*(r.getY()-e.getY())/a,p=0;p<n;p++)this.image.get(xt.round(s+p*f),xt.round(c+p*d))&&(i|=1<<n-p-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var a=3;e=new di(e.getX()-a,e.getY()+a),r=new di(r.getX()-a,r.getY()-a),n=new di(n.getX()+a,n.getY()-a),i=new di(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,i),s===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,o=0,s=e.getX(),c=e.getY(),f=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),p=0;p<d;p++)s+=i,c+=a,this.image.get(xt.round(s),xt.round(c))!==f&&o++;var g=o/n;return g>.1&&g<.9?0:g<=.1===f?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var a=e.getX()+n,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n,o+=i;for(a-=n,o-=i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n;for(a-=n;this.isValid(a,o)&&this.image.get(a,o)===r;)o+=i;return o-=i,new di(a,o)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,f=new Oe(s+i*a,c+i*o),d=new Oe(s-i*a,c-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var p=new Oe(s+i*a,c+i*o),g=new Oe(s-i*a,c-i*o),y=[f,p,d,g];return y},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=xt.round(e.getX()),n=xt.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return xt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return xt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(et.truncDivision(this.nbLayers-4,8)+1)+15},t})(),iw=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new jQ(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new y6().decode(s)}catch(p){n=p}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new y6().decode(s)}catch(p){throw n??p}var c=new Wn(o.getText(),o.getRawBytes(),o.getNumBits(),a,je.AZTEC,Xt.currentTimeMillis()),f=o.getByteSegments();f!=null&&c.putMetadata(Dn.BYTE_SEGMENTS,f);var d=o.getECLevel();return d!=null&&c.putMetadata(Dn.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(sr.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,a,o){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t})(),LQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){LQ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new iw,r)||this}return e})(ad);var tn=(function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(sr.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,r),o=a.getResultMetadata(),s=270;o!==null&&o.get(Dn.ORIENTATION)===!0&&(s=s+o.get(Dn.ORIENTATION)%360),a.putMetadata(Dn.ORIENTATION,s);var c=a.getResultPoints();if(c!==null)for(var f=i.getHeight(),d=0;d<c.length;d++)c[d]=new Oe(f-c[d].getY()-1,c[d].getX());return a}else throw new se}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),a=new gn(n),o=r&&r.get(sr.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var f=Math.trunc(i/2),d=0;d<c;d++){var p=Math.trunc((d+1)/2),g=(d&1)===0,y=f+s*(g?p:-p);if(y<0||y>=i)break;try{a=e.getBlackRow(y,a)}catch{continue}for(var b=function(I){if(I===1&&(a.reverse(),r&&r.get(sr.NEED_RESULT_POINT_CALLBACK)===!0)){var O=new Map;r.forEach(function(B,R){return O.set(R,B)}),O.delete(sr.NEED_RESULT_POINT_CALLBACK),r=O}try{var D=w.decodeRow(y,a,r);if(I===1){D.putMetadata(Dn.ORIENTATION,180);var k=D.getResultPoints();k!==null&&(k[0]=new Oe(n-k[0].getX()-1,k[0].getY()),k[1]=new Oe(n-k[1].getX()-1,k[1].getY()))}return{value:D}}catch{}},w=this,E=0;E<2;E++){var S=b(E);if(typeof S=="object")return S.value}}throw new se},t.recordPattern=function(e,r,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var o=e.getSize();if(r>=o)throw new se;for(var s=!e.get(r),c=0,f=r;f<o;){if(e.get(f)!==s)n[c]++;else{if(++c===i)break;n[c]=1,s=!s}f++}if(!(c===i||c===i-1&&f===o))throw new se},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,a=e.get(r);r>0&&i>=0;)e.get(--r)!==a&&(i--,a=!a);if(i>=0)throw new se;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;n*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=r[d]*c,y=p>g?p-g:g-p;if(y>n)return Number.POSITIVE_INFINITY;f+=y}return f/a},t})(),BQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),b6=(function(t){BQ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,c=!1,f=6,d=i;d<n;d++)if(r.get(d)!==c)o[a]++;else{if(a===f-1){for(var p=e.MAX_AVG_VARIANCE,g=-1,y=e.CODE_START_A;y<=e.CODE_START_C;y++){var b=tn.patternMatchVariance(o,e.CODE_PATTERNS[y],e.MAX_INDIVIDUAL_VARIANCE);b<p&&(p=b,g=y)}if(g>=0&&r.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,g]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new se},e.decodeCode=function(r,n,i){tn.recordPattern(r,i,n);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var c=e.CODE_PATTERNS[s],f=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<a&&(a=f,o=s)}if(o>=0)return o;throw new se},e.prototype.decodeRow=function(r,n,i){var a=i&&i.get(sr.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],c=0,f=new Uint8Array(20);f[c++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new xe}for(var p=!1,g=!1,y="",b=o[0],w=o[1],E=Int32Array.from([0,0,0,0,0,0]),S=0,I=0,O=s,D=0,k=!0,B=!1,R=!1;!p;){var N=g;switch(g=!1,S=I,I=e.decodeCode(n,E,w),f[c++]=I,I!==e.CODE_STOP&&(k=!0),I!==e.CODE_STOP&&(D++,O+=D*I),b=w,w+=E.reduce(function(ie,K){return ie+K},0),I){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new xe}switch(d){case e.CODE_CODE_A:if(I<64)R===B?y+=String.fromCharCode(32+I):y+=String.fromCharCode(32+I+128),R=!1;else if(I<96)R===B?y+=String.fromCharCode(I-64):y+=String.fromCharCode(I+64),R=!1;else switch(I!==e.CODE_STOP&&(k=!1),I){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!B&&R?(B=!0,R=!1):B&&R?(B=!1,R=!1):R=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_B:if(I<96)R===B?y+=String.fromCharCode(32+I):y+=String.fromCharCode(32+I+128),R=!1;else switch(I!==e.CODE_STOP&&(k=!1),I){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!B&&R?(B=!0,R=!1):B&&R?(B=!1,R=!1):R=!0;break;case e.CODE_SHIFT:g=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:p=!0;break}break;case e.CODE_CODE_C:if(I<100)I<10&&(y+="0"),y+=I;else switch(I!==e.CODE_STOP&&(k=!1),I){case e.CODE_FNC_1:a&&(y.length===0?y+="]C1":y+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:p=!0;break}break}N&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var L=w-b;if(w=n.getNextUnset(w),!n.isRange(w,Math.min(n.getSize(),w+(w-b)/2),!1))throw new se;if(O-=D*S,O%103!==S)throw new pn;var U=y.length;if(U===0)throw new se;U>0&&k&&(d===e.CODE_CODE_C?y=y.substring(0,U-2):y=y.substring(0,U-1));for(var j=(o[1]+o[0])/2,V=b+L/2,F=f.length,he=new Uint8Array(F),we=0;we<F;we++)he[we]=f[we];var Y=[new Oe(j,r),new Oe(V,r)];return new Wn(y,he,0,Y,je.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(tn),UQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),B2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_6=(function(t){UQ(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var a,o,s,c,f=this.counters;f.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,f),p=n.getNextSet(d[1]),g=n.getSize(),y,b;do{e.recordPattern(n,p,f);var w=e.toNarrowWidePattern(f);if(w<0)throw new se;y=e.patternToChar(w),this.decodeRowResult+=y,b=p;try{for(var E=(a=void 0,B2(f)),S=E.next();!S.done;S=E.next()){var I=S.value;p+=I}}catch(F){a={error:F}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}p=n.getNextSet(p)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var D=B2(f),k=D.next();!k.done;k=D.next()){var I=k.value;O+=I}}catch(F){s={error:F}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(s)throw s.error}}var B=p-b-O;if(p!==g&&B*2<O)throw new se;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,N=0,L=0;L<R;L++)N+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(L));if(this.decodeRowResult.charAt(R)!==e.ALPHABET_STRING.charAt(N%43))throw new pn;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new se;var U;this.extendedMode?U=e.decodeExtended(this.decodeRowResult):U=this.decodeRowResult;var j=(d[1]+d[0])/2,V=b+O/2;return new Wn(U,null,0,[new Oe(j,r),new Oe(V,r)],je.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),a=r.getNextSet(0),o=0,s=a,c=!1,f=n.length,d=a;d<i;d++)if(r.get(d)!==c)n[o]++;else{if(o===f-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new se},e.toNarrowWidePattern=function(r){var n,i,a=r.length,o=0,s;do{var c=2147483647;try{for(var f=(n=void 0,B2(r)),d=f.next();!d.done;d=f.next()){var p=d.value;p<c&&p>o&&(c=p)}}catch(w){n={error:w}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}o=c,s=0;for(var g=0,y=0,b=0;b<a;b++){var p=r[b];p>o&&(y|=1<<a-1-b,s++,g+=p)}if(s===3){for(var b=0;b<a&&s>0;b++){var p=r[b];if(p>o&&(s--,p*2>=g))return-1}return y}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new se},e.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(a+1),c="\0";switch(o){case"+":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new xe;break;case"$":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new xe;break;case"%":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s==="X"||s==="Y"||s==="Z")c="";else throw new xe;break;case"/":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new xe;break}i+=c,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(tn),zQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),U2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w6=(function(t){zQ(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,c,f=this.findAsteriskPattern(n),d=n.getNextSet(f[1]),p=n.getSize(),g=this.counters;g.fill(0),this.decodeRowResult="";var y,b;do{e.recordPattern(n,d,g);var w=this.toPattern(g);if(w<0)throw new se;y=this.patternToChar(w),this.decodeRowResult+=y,b=d;try{for(var E=(a=void 0,U2(g)),S=E.next();!S.done;S=E.next()){var I=S.value;d+=I}}catch(L){a={error:L}}finally{try{S&&!S.done&&(o=E.return)&&o.call(E)}finally{if(a)throw a.error}}d=n.getNextSet(d)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var O=0;try{for(var D=U2(g),k=D.next();!k.done;k=D.next()){var I=k.value;O+=I}}catch(L){s={error:L}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(s)throw s.error}}if(d===p||!n.get(d))throw new se;if(this.decodeRowResult.length<2)throw new se;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var B=this.decodeExtended(this.decodeRowResult),R=(f[1]+f[0])/2,N=b+O/2;return new Wn(B,null,0,[new Oe(R,r),new Oe(N,r)],je.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,c=a.length,f=0,d=i;d<n;d++)if(r.get(d)!==s)a[f]++;else{if(f===c-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,s=!s}throw new se},e.prototype.toPattern=function(r){var n,i,a=0;try{for(var o=U2(r),s=o.next();!s.done;s=o.next()){var c=s.value;a+=c}}catch(b){n={error:b}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var f=0,d=r.length,p=0;p<d;p++){var g=Math.round(r[p]*9/a);if(g<1||g>4)return-1;if((p&1)===0)for(var y=0;y<g;y++)f=f<<1|1;else f<<=g}return f},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new se},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o>="a"&&o<="d"){if(a>=n-1)throw new xe;var s=r.charAt(a+1),c="\0";switch(o){case"d":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)+32);else throw new xe;break;case"a":if(s>="A"&&s<="Z")c=String.fromCharCode(s.charCodeAt(0)-64);else throw new xe;break;case"b":if(s>="A"&&s<="E")c=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")c=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")c=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")c="\0";else if(s==="V")c="@";else if(s==="W")c="`";else if(s>="X"&&s<="Z")c="";else throw new xe;break;case"c":if(s>="A"&&s<="O")c=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")c=":";else throw new xe;break}i+=c,a++}else i+=o}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var a=1,o=0,s=n-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>i&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new pn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(tn),FQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),VQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E6=(function(t){FQ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var a,o,s=this.decodeStart(n),c=this.decodeEnd(n),f=new Ze;e.decodeMiddle(n,s[1],c[0],f);var d=f.toString(),p=null;i!=null&&(p=i.get(sr.ALLOWED_LENGTHS)),p==null&&(p=e.DEFAULT_ALLOWED_LENGTHS);var g=d.length,y=!1,b=0;try{for(var w=VQ(p),E=w.next();!E.done;E=w.next()){var S=E.value;if(g===S){y=!0;break}S>b&&(b=S)}}catch(D){a={error:D}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}if(!y&&g>b&&(y=!0),!y)throw new xe;var I=[new Oe(s[1],r),new Oe(c[0],r)],O=new Wn(d,null,0,I,je.ITF,new Date().getTime());return O},e.decodeMiddle=function(r,n,i,a){var o=new Int32Array(10),s=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),s.fill(0),c.fill(0);n<i;){tn.recordPattern(r,n,o);for(var f=0;f<5;f++){var d=2*f;s[f]=o[d],c[f]=o[d+1]}var p=e.decodeDigit(s);a.append(p.toString()),p=this.decodeDigit(c),a.append(p.toString()),o.forEach(function(g){n+=g})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!r.get(a);a--)i--;if(i!==0)throw new se},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new se;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof se&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var a=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-a,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var a=i.length,o=new Int32Array(a),s=r.getSize(),c=!1,f=0,d=n;o.fill(0);for(var p=n;p<s;p++)if(r.get(p)!==c)o[f]++;else{if(f===a-1){if(tn.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,p];d+=o[0]+o[1],Xt.arraycopy(o,2,o,0,f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,c=!c}throw new se},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],c=tn.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,i=o):c===n&&(i=-1)}if(i>=0)return i%10;throw new se},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(tn),HQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Bf=(function(t){HQ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var c=s-(a-s);c>=0&&(n=r.isRange(c,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,a){return this.findGuardPattern(r,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,i,a,o){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var c=0,f=n,d=a.length,p=i,g=n;g<s;g++)if(r.get(g)!==p)o[c]++;else{if(c===d-1){if(tn.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([f,g]);f+=o[0]+o[1];for(var y=o.slice(2,o.length),b=0;b<c-1;b++)o[b]=y[b];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,p=!p}throw new se},e.decodeDigit=function(r,n,i,a){this.recordPattern(r,i,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,c=a.length,f=0;f<c;f++){var d=a[f],p=tn.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);p<o&&(o=p,s=f)}if(s>=0)return s;throw new se},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(tn),$Q=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qQ=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),c=[new Oe((n[0]+n[1])/2,e),new Oe(a,e)],f=new Wn(o,null,0,c,je.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=r[1],f=0,d=0;d<5&&c<s;d++){var p=Bf.decodeDigit(e,o,c,Bf.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,$Q(o)),y=g.next();!y.done;y=g.next()){var b=y.value;c+=b}}catch(E){i={error:E}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<4-d),d!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new se;var w=this.determineCheckDigit(f);if(t.extensionChecksum(n.toString())!==w)throw new se;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new se},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Dn.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,o=a<10?"0"+a:a.toString();return r+i+"."+o},t})(),GQ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WQ=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),c=[new Oe((n[0]+n[1])/2,e),new Oe(a,e)],f=new Wn(o,null,0,c,je.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&f.putAllMetadata(s),f},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),c=r[1],f=0,d=0;d<2&&c<s;d++){var p=Bf.decodeDigit(e,o,c,Bf.L_AND_G_PATTERNS);n+=String.fromCharCode(48+p%10);try{for(var g=(i=void 0,GQ(o)),y=g.next();!y.done;y=g.next()){var b=y.value;c+=b}}catch(w){i={error:w}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<1-d),d!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new se;if(parseInt(n.toString())%4!==f)throw new se;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Dn.ISSUE_NUMBER,parseInt(e)]])},t})(),KQ=(function(){function t(){}return t.decodeRow=function(e,r,n){var i=Bf.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new qQ;return a.decodeRow(e,r,i)}catch{var o=new WQ;return o.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),XQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Qr=(function(t){XQ(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,i){var a=e.findStartGuardPattern(n),o=i==null?null:i.get(sr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new Oe((a[0]+a[1])/2,r);o.foundPossibleResultPoint(s)}var c=this.decodeMiddle(n,a,this.decodeRowStringBuffer),f=c.rowOffset,d=c.resultString;if(o!=null){var p=new Oe(f,r);o.foundPossibleResultPoint(p)}var g=e.decodeEnd(n,f);if(o!=null){var y=new Oe((g[0]+g[1])/2,r);o.foundPossibleResultPoint(y)}var b=g[1],w=b+(b-g[0]);if(w>=n.getSize()||!n.isRange(b,w,!1))throw new se;var E=d.toString();if(E.length<8)throw new xe;if(!e.checkChecksum(E))throw new pn;var S=(a[1]+a[0])/2,I=(g[1]+g[0])/2,O=this.getBarcodeFormat(),D=[new Oe(S,r),new Oe(I,r)],k=new Wn(E,null,0,D,O,new Date().getTime()),B=0;try{var R=KQ.decodeRow(r,n,g[1]);k.putMetadata(Dn.UPC_EAN_EXTENSION,R.getText()),k.putAllMetadata(R.getResultMetadata()),k.addResultPoints(R.getResultPoints()),B=R.getText().length}catch{}var N=i==null?null:i.get(sr.ALLOWED_EAN_EXTENSIONS);if(N!=null){var L=!1;for(var U in N)if(B.toString()===U){L=!0;break}if(!L)throw new se}return O===je.EAN_13||je.UPC_A,k},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new xe;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Bf),YQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),A6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aw=(function(t){YQ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=r.getSize(),p=n[1],g=0,y=0;y<6&&p<d;y++){var b=Qr.decodeDigit(r,f,p,Qr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);try{for(var w=(a=void 0,A6(f)),E=w.next();!E.done;E=w.next()){var S=E.value;p+=S}}catch(k){a={error:k}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}b>=10&&(g|=1<<5-y)}i=e.determineFirstDigit(i,g);var I=Qr.findGuardPattern(r,p,!0,Qr.MIDDLE_PATTERN,new Int32Array(Qr.MIDDLE_PATTERN.length).fill(0));p=I[1];for(var y=0;y<6&&p<d;y++){var b=Qr.decodeDigit(r,f,p,Qr.L_PATTERNS);i+=String.fromCharCode(48+b);try{for(var O=(s=void 0,A6(f)),D=O.next();!D.done;D=O.next()){var S=D.value;p+=S}}catch(R){s={error:R}}finally{try{D&&!D.done&&(c=O.return)&&c.call(O)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return je.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new se},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Qr),QQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),S6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C6=(function(t){QQ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,c,f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;for(var d=r.getSize(),p=n[1],g=0;g<4&&p<d;g++){var y=Qr.decodeDigit(r,f,p,Qr.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var b=(a=void 0,S6(f)),w=b.next();!w.done;w=b.next()){var E=w.value;p+=E}}catch(D){a={error:D}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(a)throw a.error}}}var S=Qr.findGuardPattern(r,p,!0,Qr.MIDDLE_PATTERN,new Int32Array(Qr.MIDDLE_PATTERN.length).fill(0));p=S[1];for(var g=0;g<4&&p<d;g++){var y=Qr.decodeDigit(r,f,p,Qr.L_PATTERNS);i+=String.fromCharCode(48+y);try{for(var I=(s=void 0,S6(f)),O=I.next();!O.done;O=I.next()){var E=O.value;p+=E}}catch(B){s={error:B}}finally{try{O&&!O.done&&(c=I.return)&&c.call(I)}finally{if(s)throw s.error}}}return{rowOffset:p,resultString:i}},e.prototype.getBarcodeFormat=function(){return je.EAN_8},e})(Qr),ZQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),T6=(function(t){ZQ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new aw,r}return e.prototype.getBarcodeFormat=function(){return je.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new Wn(n.substring(1),null,null,r.getResultPoints(),je.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new se},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Qr),JQ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),eZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I6=(function(t){JQ(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s=this.decodeMiddleCounters.map(function(E){return E});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=r.getSize(),f=n[1],d=0,p=0;p<6&&f<c;p++){var g=e.decodeDigit(r,s,f,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var y=(a=void 0,eZ(s)),b=y.next();!b.done;b=y.next()){var w=b.value;f+=w}}catch(E){a={error:E}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}g>=10&&(d|=1<<5-p)}return e.determineNumSysAndCheckDigit(new Ze(i),d),f},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Qr.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){r.insert(0,"0"+i),r.append("0"+a);return}throw se.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return je.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new Ze;i.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Qr),tZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),O6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z2=(function(t){tZ(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(sr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(je.EAN_13)>-1&&a.push(new aw),i.indexOf(je.UPC_A)>-1&&a.push(new T6),i.indexOf(je.EAN_8)>-1&&a.push(new C6),i.indexOf(je.UPC_E)>-1&&a.push(new I6)),a.length===0&&(a.push(new aw),a.push(new T6),a.push(new C6),a.push(new I6)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,i){var a,o;try{for(var s=O6(this.readers),c=s.next();!c.done;c=s.next()){var f=c.value;try{var d=f.decodeRow(r,n,i),p=d.getBarcodeFormat()===je.EAN_13&&d.getText().charAt(0)==="0",g=i==null?null:i.get(sr.POSSIBLE_FORMATS),y=g==null||g.includes(je.UPC_A);if(p&&y){var b=d.getRawBytes(),w=new Wn(d.getText().substring(1),b,b?b.length:null,d.getResultPoints(),je.UPC_A);return w.putAllMetadata(d.getResultMetadata()),w}return d}catch{}}}catch(E){a={error:E}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new se},e.prototype.reset=function(){var r,n;try{for(var i=O6(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e})(tn),rZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),nZ=(function(t){rZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var a=this.getValidRowData(n);if(!a)throw new se;var o=this.codaBarDecodeRow(a.row);if(!o)throw new se;return new Wn(o,null,0,[new Oe(a.left,r),new Oe(a.right,r)],je.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var o=[],s=n[0],c=1,f=1;f<n.length;f++)n[f]===s?c++:(s=n[f],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(c,f){return(c+f)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e})(tn),iZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),aZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jc=(function(t){iZ(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(tn.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new se},e.count=function(r){return xt.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]>a&&(a=n[o],i=o);r[i]++},e.decrement=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]<a&&(a=n[o],i=o);r[i]--},e.isFinderPattern=function(r){var n,i,a=r[0]+r[1],o=a+r[2]+r[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;try{for(var d=aZ(r),p=d.next();!p.done;p=d.next()){var g=p.value;g>f&&(f=g),g<c&&(c=g)}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return f<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(tn),sv=(function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),_k=(function(){function t(e,r,n,i,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Oe(n,a)),this.resultPoints.push(new Oe(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t})(),oZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mf=(function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,a,o=0;try{for(var s=oZ(e),c=s.next();!c.done;c=s.next()){var f=c.value;o+=f}}catch(I){i={error:I}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var d=0,p=0,g=e.length,y=0;y<g-1;y++){var b=void 0;for(b=1,p|=1<<y;b<e[y];b++,p&=~(1<<y)){var w=t.combins(o-b-1,g-y-2);if(n&&p===0&&o-b-(g-y-1)>=g-y-1&&(w-=t.combins(o-b-(g-y),g-y-2)),g-y-1>1){for(var E=0,S=o-b-(g-y-2);S>r;S--)E+=t.combins(o-b-S-1,g-y-3);w-=E*(g-1-y)}else o-b>r&&w--;d+=w}o-=b}return d},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var a=1,o=1,s=e;s>n;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},t})(),sZ=(function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new gn(n),a=0,o=e[0],s=o.getRightChar().getValue(),c=11;c>=0;--c)(s&1<<c)!==0&&i.set(a),a++;for(var c=1;c<e.length;++c){for(var f=e[c],d=f.getLeftChar().getValue(),p=11;p>=0;--p)(d&1<<p)!==0&&i.set(a),a++;if(f.getRightChar()!==null)for(var g=f.getRightChar().getValue(),p=11;p>=0;--p)(g&1<<p)!==0&&i.set(a),a++}return i},t})(),Dc=(function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),NA=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),lZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Na=(function(t){lZ(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(NA),cZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Nc=(function(t){cZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(NA),uZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ff=(function(t){uZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new xe;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(NA),Qg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fZ=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,a,o,s,c,f;if(!e)return null;if(e.length<2)throw new se;var d=e.substring(0,2);try{for(var p=Qg(t.TWO_DIGIT_DATA_LENGTH),g=p.next();!g.done;g=p.next()){var y=g.value;if(y[0]===d)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,y[2],e):t.processFixedAI(2,y[1],e)}}catch(B){r={error:B}}finally{try{g&&!g.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}if(e.length<3)throw new se;var b=e.substring(0,3);try{for(var w=Qg(t.THREE_DIGIT_DATA_LENGTH),E=w.next();!E.done;E=w.next()){var y=E.value;if(y[0]===b)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,y[2],e):t.processFixedAI(3,y[1],e)}}catch(B){i={error:B}}finally{try{E&&!E.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var S=Qg(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),I=S.next();!I.done;I=S.next()){var y=I.value;if(y[0]===b)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(B){o={error:B}}finally{try{I&&!I.done&&(s=S.return)&&s.call(S)}finally{if(o)throw o.error}}if(e.length<4)throw new se;var O=e.substring(0,4);try{for(var D=Qg(t.FOUR_DIGIT_DATA_LENGTH),k=D.next();!k.done;k=D.next()){var y=k.value;if(y[0]===O)return y[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,y[2],e):t.processFixedAI(4,y[1],e)}}catch(B){c={error:B}}finally{try{k&&!k.done&&(f=D.return)&&f.call(D)}finally{if(c)throw c.error}}throw new se},t.processFixedAI=function(e,r,n){if(n.length<e)throw new se;var i=n.substring(0,e);if(n.length<e+r)throw new se;var a=n.substring(e,e+r),o=n.substring(e+r),s="("+i+")"+a,c=t.parseFieldsInGeneralPurpose(o);return c==null?s:s+c},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var o=n.substring(e,a),s=n.substring(a),c="("+i+")"+o,f=t.parseFieldsInGeneralPurpose(s);return f==null?c:c+f},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),O1=(function(){function t(e){this.buffer=new Ze,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var a=this.decodeGeneralPurposeField(n,i),o=fZ.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new ff(this.information.getSize(),ff.FNC1,ff.FNC1):new ff(this.information.getSize(),r-1,ff.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new ff(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,a=0;a<n;++a)e.get(r+a)&&(i|=1<<n-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Nc(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Nc(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Nc(this.current.getPosition(),this.buffer.toString()):r=new Nc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Dc(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Dc(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Dc(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Nc(this.current.getPosition(),this.buffer.toString());return new Dc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Dc(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Na(e+5,Na.FNC1);if(r>=5&&r<15)return new Na(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Na(e+7,""+(n+1));if(n>=90&&n<116)return new Na(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new xe}return new Na(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Na(e+5,Na.FNC1);if(r>=5&&r<15)return new Na(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Na(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Hp("Decoding invalid alphanumeric value: "+n)}return new Na(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t})(),wk=(function(){function t(e){this.information=e,this.generalDecoder=new O1(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),dZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ka=(function(t){dZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,a=0;a<13;a++){var o=r.charAt(a+n).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e})(wk),hZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pZ=(function(t){hZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ze;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ka),gZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vZ=(function(t){gZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Ze;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(wk),mZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),R1=(function(t){mZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,a);for(var o=this.checkWeight(a),s=1e5,c=0;c<5;++c)o/s===0&&r.append("0"),s/=10;r.append(o)},e})(ka),yZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ek=(function(t){yZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+R1.GTIN_SIZE+e.WEIGHT_SIZE)throw new se;var r=new Ze;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+R1.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(R1),xZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bZ=(function(t){xZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e})(Ek),_Z=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),wZ=(function(t){_Z(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e})(Ek),EZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),AZ=(function(t){EZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ka.GTIN_SIZE)throw new se;var r=new Ze;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ka.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ka.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ka),SZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),CZ=(function(t){SZ(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ka.GTIN_SIZE)throw new se;var r=new Ze;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ka.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ka.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ka.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ka),TZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hl=(function(t){TZ(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new se;var r=new Ze;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(R1);function IZ(t){try{if(t.get(1))return new pZ(t);if(!t.get(2))return new vZ(t);var e=O1.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new bZ(t);case 5:return new wZ(t)}var r=O1.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new AZ(t);case 13:return new CZ(t)}var n=O1.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new hl(t,"310","11");case 57:return new hl(t,"320","11");case 58:return new hl(t,"310","13");case 59:return new hl(t,"320","13");case 60:return new hl(t,"310","15");case 61:return new hl(t,"320","15");case 62:return new hl(t,"310","17");case 63:return new hl(t,"320","17")}}catch(i){throw console.log(i),new Hp("unknown decoder: "+t)}}var R6=(function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),OZ=(function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,a){r.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t})(),RZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PZ=(function(t){RZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof se){if(!this.pairs.length)throw new se;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new se},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,a,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,pl(r)),f=c.next();!f.done;f=c.next()){var d=f.value;this.pairs.push(d.getPairs())}}catch(g){i={error:g}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var p=new Array(r);p.push(s);try{return this.checkRows(p,o+1)}catch(g){console.log(g)}}}throw new se},e.isValidSequence=function(r){var n,i;try{for(var a=pl(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(r.length>s.length)){for(var c=!0,f=0;f<r.length;f++)if(r[f].getFinderPattern().getValue()!==s[f]){c=!1;break}if(c)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new OZ(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,a,o,s,c,f;try{for(var d=pl(n),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getPairs().length!==r.length){var y=!0;try{for(var b=(o=void 0,pl(g.getPairs())),w=b.next();!w.done;w=b.next()){var E=w.value,S=!1;try{for(var I=(c=void 0,pl(r)),O=I.next();!O.done;O=I.next()){var D=O.value;if(R6.equals(E,D)){S=!0;break}}}catch(k){c={error:k}}finally{try{O&&!O.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}S||(y=!1)}}catch(k){o={error:k}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}}}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,a,o,s,c,f;try{for(var d=pl(n),p=d.next();!p.done;p=d.next()){var g=p.value,y=!0;try{for(var b=(o=void 0,pl(r)),w=b.next();!w.done;w=b.next()){var E=w.value,S=!1;try{for(var I=(c=void 0,pl(g.getPairs())),O=I.next();!O.done;O=I.next()){var D=O.value;if(E.equals(D)){S=!0;break}}}catch(k){c={error:k}}finally{try{O&&!O.done&&(f=I.return)&&f.call(I)}finally{if(c)throw c.error}}if(!S){y=!1;break}}}catch(k){o={error:k}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}if(y)return!0}}catch(k){i={error:k}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=sZ.buildBitArray(r),i=IZ(n),a=i.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],s[0],s[1]];return new Wn(a,null,null,c,je.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var c=this.pairs.get(s);a+=c.getLeftChar().getChecksumPortion(),o++;var f=c.getRightChar();f!=null&&(a+=f.getChecksumPortion(),o++)}a%=211;var d=211*(o-4)+a;return d===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,i,a),o===null?c=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var f=this.decodeDataCharacter(r,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new se;var d;try{d=this.decodeDataCharacter(r,o,a,!1)}catch(p){d=null,console.log(p)}return new R6(f,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var c=n[n.length-1];s=c.getFinderPattern().getStartEnd()[1]}var f=n.length%2!==0;this.startFromEven&&(f=!f);for(var d=!1;s<o&&(d=!r.get(s),!!d);)s++;for(var p=0,g=s,y=s;y<o;y++)if(r.get(y)!==d)a[p]++;else{if(p===3){if(f&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=g,this.startEnd[1]=y;return}f&&e.reverseCounters(a),g+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,p--}else p++;a[p]=1,d=!d}throw new se},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var a=r[i];r[i]=r[n-i-1],r[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,i){var a,o,s;if(i){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var f=this.getDecodeFinderCounters();Xt.arraycopy(f,0,f,1,f.length-1),f[0]=a;var d;try{d=this.parseFinderValue(f,e.FINDER_PATTERNS)}catch{return null}return new _k(d,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,f=o.length-1;c<f;c++,f--){var d=o[c];o[c]=o[f],o[f]=d}}var p=17,g=xt.sum(new Int32Array(o))/p,y=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new se;for(var b=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var I=1*o[c]/g,O=I+.5;if(O<1){if(I<.3)throw new se;O=1}else if(O>8){if(I>8.7)throw new se;O=8}var D=c/2;(c&1)===0?(b[D]=O,E[D]=I-O):(w[D]=O,S[D]=I-O)}this.adjustOddEvenCounts(p);for(var k=4*n.getValue()+(i?0:2)+(a?0:1)-1,B=0,R=0,c=b.length-1;c>=0;c--){if(e.isNotA1left(n,i,a)){var N=e.WEIGHTS[k][2*c];R+=b[c]*N}B+=b[c]}for(var L=0,c=w.length-1;c>=0;c--)if(e.isNotA1left(n,i,a)){var N=e.WEIGHTS[k][2*c+1];L+=w[c]*N}var U=R+L;if((B&1)!==0||B>13||B<4)throw new se;var j=(13-B)/2,V=e.SYMBOL_WIDEST[j],F=9-V,he=mf.getRSSvalue(b,V,!0),we=mf.getRSSvalue(w,F,!1),Y=e.EVEN_TOTAL_SUBSET[j],ie=e.GSUM[j],K=he*Y+we+ie;return new sv(K,U)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=xt.sum(new Int32Array(this.getOddCounts())),i=xt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;n>13?o=!0:n<4&&(a=!0);var s=!1,c=!1;i>13?c=!0:i<4&&(s=!0);var f=n+i-r,d=(n&1)===1,p=(i&1)===0;if(f===1)if(d){if(p)throw new se;o=!0}else{if(!p)throw new se;c=!0}else if(f===-1)if(d){if(p)throw new se;a=!0}else{if(!p)throw new se;s=!0}else if(f===0){if(d){if(!p)throw new se;n<i?(a=!0,c=!0):(o=!0,s=!0)}else if(p)throw new se}else throw new se;if(a){if(o)throw new se;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(c)throw new se;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(jc),DZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),NZ=(function(t){DZ(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(sv),MZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),F2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P6=(function(t){MZ(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,c,f=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,f),n.reverse();var d=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var p=F2(this.possibleLeftPairs),g=p.next();!g.done;g=p.next()){var y=g.value;if(y.getCount()>1)try{for(var b=(s=void 0,F2(this.possibleRightPairs)),w=b.next();!w.done;w=b.next()){var E=w.value;if(E.getCount()>1&&e.checkChecksum(y,E))return e.constructResult(y,E)}}catch(S){s={error:S}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}}}catch(S){a={error:S}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}throw new se},e.addOrTally=function(r,n){var i,a;if(n!=null){var o=!1;try{for(var s=F2(r),c=s.next();!c.done;c=s.next()){var f=c.value;if(f.getValue()===n.getValue()){f.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),a=new String(i).toString(),o=new Ze,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var c=0,s=0;s<13;s++){var f=o.charAt(s).charCodeAt(0)-48;c+=(s&1)===0?3*f:f}c=10-c%10,c===10&&(c=0),o.append(c.toString());var d=r.getFinderPattern().getResultPoints(),p=n.getFinderPattern().getResultPoints();return new Wn(o.toString(),null,0,[d[0],d[1],p[0],p[1]],je.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(r,n,i,a){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,o),c=a==null?null:a.get(sr.NEED_RESULT_POINT_CALLBACK);if(c!=null){var f=(o[0]+o[1])/2;n&&(f=r.getSize()-1-f),c.foundPossibleResultPoint(new Oe(f,i))}var d=this.decodeDataCharacter(r,s,!0),p=this.decodeDataCharacter(r,s,!1);return new NZ(1597*d.getValue()+p.getValue(),d.getChecksumPortion()+4*p.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)tn.recordPatternInReverse(r,n.getStartEnd()[0],a);else{tn.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,c=a.length-1;s<c;s++,c--){var f=a[s];a[s]=a[c],a[c]=f}}for(var d=i?16:15,p=xt.sum(new Int32Array(a))/d,g=this.getOddCounts(),y=this.getEvenCounts(),b=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var E=a[s]/p,S=Math.floor(E+.5);S<1?S=1:S>8&&(S=8);var I=Math.floor(s/2);(s&1)===0?(g[I]=S,b[I]=E-S):(y[I]=S,w[I]=E-S)}this.adjustOddEvenCounts(i,d);for(var O=0,D=0,s=g.length-1;s>=0;s--)D*=9,D+=g[s],O+=g[s];for(var k=0,B=0,s=y.length-1;s>=0;s--)k*=9,k+=y[s],B+=y[s];var R=D+3*k;if(i){if((O&1)!==0||O>12||O<4)throw new se;var N=(12-O)/2,L=e.OUTSIDE_ODD_WIDEST[N],U=9-L,j=mf.getRSSvalue(g,L,!1),V=mf.getRSSvalue(y,U,!0),F=e.OUTSIDE_EVEN_TOTAL_SUBSET[N],he=e.OUTSIDE_GSUM[N];return new sv(j*F+V+he,R)}else{if((B&1)!==0||B>10||B<4)throw new se;var N=(10-B)/2,L=e.INSIDE_ODD_WIDEST[N],U=9-L,j=mf.getRSSvalue(g,L,!0),V=mf.getRSSvalue(y,U,!1),we=e.INSIDE_ODD_TOTAL_SUBSET[N],he=e.INSIDE_GSUM[N];return new sv(V*we+j+he,R)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=r.getSize(),o=!1,s=0;s<a&&(o=!r.get(s),n!==o);)s++;for(var c=0,f=s,d=s;d<a;d++)if(r.get(d)!==o)i[c]++;else{if(c===3){if(jc.isFinderPattern(i))return[f,d];f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new se},e.prototype.parseFoundFinderPattern=function(r,n,i,a){for(var o=r.get(a[0]),s=a[0]-1;s>=0&&o!==r.get(s);)s--;s++;var c=a[0]-s,f=this.getDecodeFinderCounters(),d=new Int32Array(f.length);Xt.arraycopy(f,0,d,1,f.length-1),d[0]=c;var p=this.parseFinderValue(d,e.FINDER_PATTERNS),g=s,y=a[1];return i&&(g=r.getSize()-1-g,y=r.getSize()-1-y),new _k(p,[s,a[1]],g,y,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=xt.sum(new Int32Array(this.getOddCounts())),a=xt.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,c=!1,f=!1;r?(i>12?s=!0:i<4&&(o=!0),a>12?f=!0:a<4&&(c=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?f=!0:a<4&&(c=!0));var d=i+a-n,p=(i&1)===(r?1:0),g=(a&1)===1;if(d===1)if(p){if(g)throw new se;s=!0}else{if(!g)throw new se;f=!0}else if(d===-1)if(p){if(g)throw new se;o=!0}else{if(!g)throw new se;c=!0}else if(d===0){if(p){if(!g)throw new se;i<a?(o=!0,f=!0):(s=!0,c=!0)}else if(g)throw new se}else throw new se;if(o){if(s)throw new se;jc.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&jc.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new se;jc.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&jc.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(jc),kZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Fh=(function(t){kZ(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(sr.POSSIBLE_FORMATS):null,a=r&&r.get(sr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(sr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(je.EAN_13)||i.includes(je.UPC_A)||i.includes(je.EAN_8)||i.includes(je.UPC_E))&&n.readers.push(new z2(r)),i.includes(je.CODE_39)&&n.readers.push(new _6(a,o)),i.includes(je.CODE_93)&&n.readers.push(new w6),i.includes(je.CODE_128)&&n.readers.push(new b6),i.includes(je.ITF)&&n.readers.push(new E6),i.includes(je.CODABAR)&&n.readers.push(new nZ),i.includes(je.RSS_14)&&n.readers.push(new P6),i.includes(je.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new PZ))),n.readers.length===0&&(n.readers.push(new z2(r)),n.readers.push(new _6),n.readers.push(new w6),n.readers.push(new z2(r)),n.readers.push(new b6),n.readers.push(new E6),n.readers.push(new P6)),n}return e.prototype.decodeRow=function(r,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,i)}catch{}throw new se},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e})(tn),jZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){jZ(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Fh(n),r,n)||this}return e})(ad);var D6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tt=(function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),At=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),LZ=(function(){function t(e,r,n,i,a,o){var s,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var f=0,d=o.getECCodewords(),p=o.getECBlocks();try{for(var g=D6(p),y=g.next();!y.done;y=g.next()){var b=y.value;f+=b.getCount()*(b.getDataCodewords()+d)}}catch(w){s={error:w}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}this.totalCodewords=f}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if((e&1)!==0||(r&1)!==0)throw new xe;try{for(var a=D6(t.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new xe},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Tt(5,new At(1,3))),new t(2,12,12,10,10,new Tt(7,new At(1,5))),new t(3,14,14,12,12,new Tt(10,new At(1,8))),new t(4,16,16,14,14,new Tt(12,new At(1,12))),new t(5,18,18,16,16,new Tt(14,new At(1,18))),new t(6,20,20,18,18,new Tt(18,new At(1,22))),new t(7,22,22,20,20,new Tt(20,new At(1,30))),new t(8,24,24,22,22,new Tt(24,new At(1,36))),new t(9,26,26,24,24,new Tt(28,new At(1,44))),new t(10,32,32,14,14,new Tt(36,new At(1,62))),new t(11,36,36,16,16,new Tt(42,new At(1,86))),new t(12,40,40,18,18,new Tt(48,new At(1,114))),new t(13,44,44,20,20,new Tt(56,new At(1,144))),new t(14,48,48,22,22,new Tt(68,new At(1,174))),new t(15,52,52,24,24,new Tt(42,new At(2,102))),new t(16,64,64,14,14,new Tt(56,new At(2,140))),new t(17,72,72,16,16,new Tt(36,new At(4,92))),new t(18,80,80,18,18,new Tt(48,new At(4,114))),new t(19,88,88,20,20,new Tt(56,new At(4,144))),new t(20,96,96,22,22,new Tt(68,new At(4,174))),new t(21,104,104,24,24,new Tt(56,new At(6,136))),new t(22,120,120,18,18,new Tt(68,new At(6,175))),new t(23,132,132,20,20,new Tt(62,new At(8,163))),new t(24,144,144,22,22,new Tt(62,new At(8,156),new At(2,155))),new t(25,8,18,6,16,new Tt(7,new At(1,5))),new t(26,8,32,6,14,new Tt(11,new At(1,10))),new t(27,12,26,10,24,new Tt(14,new At(1,16))),new t(28,12,36,10,16,new Tt(18,new At(1,22))),new t(29,16,36,14,16,new Tt(24,new At(1,32))),new t(30,16,48,14,22,new Tt(28,new At(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),BZ=(function(){function t(e){var r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new xe;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new So(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return LZ.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,c=!1,f=!1,d=!1;do if(n===a&&i===0&&!s)e[r++]=this.readCorner1(a,o)&255,n-=2,i+=2,s=!0;else if(n===a-2&&i===0&&(o&3)!==0&&!c)e[r++]=this.readCorner2(a,o)&255,n-=2,i+=2,c=!0;else if(n===a+4&&i===2&&(o&7)===0&&!f)e[r++]=this.readCorner3(a,o)&255,n-=2,i+=2,f=!0;else if(n===a-2&&i===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(a,o)&255,n-=2,i+=2,d=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<o);if(r!==this.version.getTotalCodewords())throw new xe;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var a=0;return this.readModule(e-2,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r,n,i)&&(a|=1),a<<=1,this.readModule(e,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e,r,n,i)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Le("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=r/i|0,s=n/a|0,c=o*i,f=s*a,d=new So(f,c),p=0;p<o;++p)for(var g=p*i,y=0;y<s;++y)for(var b=y*a,w=0;w<i;++w)for(var E=p*(i+2)+1+w,S=g+w,I=0;I<a;++I){var O=y*(a+2)+1+I;if(e.get(O,E)){var D=b+I;d.set(D,S)}}return d},t})(),N6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UZ=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,a,o,s=r.getECBlocks(),c=0,f=s.getECBlocks();try{for(var d=N6(f),p=d.next();!p.done;p=d.next()){var g=p.value;c+=g.getCount()}}catch(he){n={error:he}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var y=new Array(c),b=0;try{for(var w=N6(f),E=w.next();!E.done;E=w.next())for(var g=E.value,S=0;S<g.getCount();S++){var I=g.getDataCodewords(),O=s.getECCodewords()+I;y[b++]=new t(I,new Uint8Array(O))}}catch(he){a={error:he}}finally{try{E&&!E.done&&(o=w.return)&&o.call(w)}finally{if(a)throw a.error}}for(var D=y[0].codewords.length,k=D-s.getECCodewords(),B=k-1,R=0,S=0;S<B;S++)for(var N=0;N<b;N++)y[N].codewords[S]=e[R++];for(var L=r.getVersionNumber()===24,U=L?8:b,N=0;N<U;N++)y[N].codewords[k-1]=e[R++];for(var j=y[0].codewords.length,S=k;S<j;S++)for(var N=0;N<b;N++){var V=L?(N+8)%b:N,F=L&&V>7?S-1:S;y[V].codewords[F]=e[R++]}if(R!==e.length)throw new Le;return y},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),Ak=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Le(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,c=o-s,f=255>>8-s<<c;r=(a[i]&f)>>c,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|a[i]&255,i++,e-=8;if(e>0){var c=8-e,f=255>>c<<c;r=r<<e|(a[i]&f)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),Xr;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xr||(Xr={}));var zZ=(function(){function t(){}return t.decode=function(e){var r=new Ak(e),n=new Ze,i=new Ze,a=new Array,o=Xr.ASCII_ENCODE;do if(o===Xr.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,i);else{switch(o){case Xr.C40_ENCODE:this.decodeC40Segment(r,n);break;case Xr.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Xr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Xr.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Xr.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new xe}o=Xr.ASCII_ENCODE}while(o!==Xr.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new Nm(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new xe;if(a<=128)return i&&(a+=128),r.append(String.fromCharCode(a-1)),Xr.ASCII_ENCODE;if(a===129)return Xr.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&r.append("0"),r.append(""+o)}else switch(a){case 230:return Xr.C40_ENCODE;case 231:return Xr.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Xr.ANSIX12_ENCODE;case 239:return Xr.TEXT_ENCODE;case 240:return Xr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new xe;break}}while(e.available()>0);return Xr.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var f=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else throw new xe;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var f=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new xe}a=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),a=0;break;default:throw new xe}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var c=i[s];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var f=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else throw new xe;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var f=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new xe}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var f=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(f.charCodeAt(0)+128)),n=!1):r.append(f),a=0}else throw new xe;break;default:throw new xe}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var o=n[a];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new xe;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new xe;for(var s=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new xe;s[c]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(va.decode(s,ht.ISO88591))}catch(f){throw new Hp("Platform does not support required encoding: "+f.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),FZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VZ=(function(){function t(){this.rsDecoder=new Mm(vi.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new BZ(e),a=i.getVersion(),o=i.readCodewords(),s=UZ.getDataBlocks(o,a),c=0;try{for(var f=FZ(s),d=f.next();!d.done;d=f.next()){var p=d.value;c+=p.getNumDataCodewords()}}catch(O){r={error:O}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}for(var g=new Uint8Array(c),y=s.length,b=0;b<y;b++){var w=s[b],E=w.getCodewords(),S=w.getNumDataCodewords();this.correctErrors(E,S);for(var I=0;I<S;I++)g[I*y+b]=E[I]}return zZ.decode(g)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new pn}for(var i=0;i<r;i++)e[i]=n[i]},t})(),HZ=(function(){function t(e){this.image=e,this.rectangleDetector=new nw(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new se;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],a=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(c&1)===1&&(c+=1),4*s<7*c&&4*c<7*s&&(s=c=Math.max(s,c));var f=t.sampleGrid(this.image,n,i,a,o,s,c);return new PA(f,[n,i,a,o])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new Oe(e.getX()+i,e.getY()+a)},t.moveAway=function(e,r,n){var i=e.getX(),a=e.getY();return i<r?i-=1:i+=1,a<n?a-=1:a+=1,new Oe(i,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],a=e[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),c=this.transitionsBetween(i,a),f=this.transitionsBetween(a,r),d=o,p=[a,r,n,i];return d>s&&(d=s,p[0]=r,p[1]=n,p[2]=i,p[3]=a),d>c&&(d=c,p[0]=n,p[1]=i,p[2]=a,p[3]=r),d>f&&(p[0]=i,p[1]=a,p[2]=r,p[3]=n),p},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=t.shiftPoint(n,i,(o+1)*4),c=t.shiftPoint(i,n,(o+1)*4),f=this.transitionsBetween(s,r),d=this.transitionsBetween(c,a);return f<d?(e[0]=r,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),c=t.shiftPoint(r,n,(s+1)*4),f=t.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(c,a),s=this.transitionsBetween(f,a);var d=new Oe(a.getX()+(i.getX()-n.getX())/(o+1),a.getY()+(i.getY()-n.getY())/(o+1)),p=new Oe(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(d))return this.isValid(p)?p:null;if(!this.isValid(p))return d;var g=this.transitionsBetween(c,d)+this.transitionsBetween(f,d),y=this.transitionsBetween(c,p)+this.transitionsBetween(f,p);return g>y?d:p},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(i,a)+1,c=t.shiftPoint(r,n,s*4),f=t.shiftPoint(i,n,o*4);o=this.transitionsBetween(c,a)+1,s=this.transitionsBetween(f,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var d=(r.getX()+n.getX()+i.getX()+a.getX())/4,p=(r.getY()+n.getY()+i.getY()+a.getY())/4;r=t.moveAway(r,d,p),n=t.moveAway(n,d,p),i=t.moveAway(i,d,p),a=t.moveAway(a,d,p);var g,y;return c=t.shiftPoint(r,n,s*4),c=t.shiftPoint(c,a,o*4),g=t.shiftPoint(n,r,s*4),g=t.shiftPoint(g,i,o*4),f=t.shiftPoint(i,a,s*4),f=t.shiftPoint(f,n,o*4),y=t.shiftPoint(a,i,s*4),y=t.shiftPoint(y,r,o*4),[c,g,f,y]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,a,o,s){var c=DA.getInstance();return c.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-i)>Math.abs(a-n);if(s){var c=n;n=i,i=c,c=a,a=o,o=c}for(var f=Math.abs(a-n),d=Math.abs(o-i),p=-f/2,g=i<o?1:-1,y=n<a?1:-1,b=0,w=this.image.get(s?i:n,s?n:i),E=n,S=i;E!==a;E+=y){var I=this.image.get(s?S:E,s?E:S);if(I!==w&&(b++,w=I),p+=d,p>0){if(S===o)break;S+=g,p-=f}}return b},t})(),ow=(function(){function t(){this.decoder=new VZ}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(sr.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=t.NO_POINTS}else{var o=new HZ(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=n.getRawBytes(),c=new Wn(n.getText(),s,8*s.length,i,je.DATA_MATRIX,Xt.currentTimeMillis()),f=n.getByteSegments();f!=null&&c.putMetadata(Dn.BYTE_SEGMENTS,f);var d=n.getECLevel();return d!=null&&c.putMetadata(Dn.ERROR_CORRECTION_LEVEL,d),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new se;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],c=n[0],f=(c-s+1)/i,d=(o-a+1)/i;if(f<=0||d<=0)throw new se;var p=i/2;a+=p,s+=p;for(var g=new So(f,d),y=0;y<d;y++)for(var b=a+y*i,w=0;w<f;w++)e.get(s+w*i,b)&&g.set(w,y);return g},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],a=e[1];i<n&&r.get(i,a);)i++;if(i===n)throw new se;var o=i-e[0];if(o===0)throw new se;return o},t.NO_POINTS=[],t})(),$Z=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){$Z(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new ow,r)||this}return e})(ad);var yf;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(yf||(yf={}));var qZ=(function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Ma(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Le;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(yf.L,"L",1),t.M=new t(yf.M,"M",0),t.Q=new t(yf.Q,"Q",3),t.H=new t(yf.H,"H",2),t})(),GZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sk=(function(){function t(e){this.errorCorrectionLevel=qZ.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return et.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=GZ(t.FORMAT_INFO_DECODE_LOOKUP),c=s.next();!c.done;c=s.next()){var f=c.value,d=f[0];if(d===e||d===r)return new t(f[1]);var p=t.numBitsDiffering(e,d);p<a&&(o=f[1],a=p),e!==r&&(p=t.numBitsDiffering(r,d),p<a&&(o=f[1],a=p))}}catch(g){n={error:g}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),WZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=(function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var a=WZ(i),o=a.next();!o.done;o=a.next()){var s=o.value;n+=s.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),$=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),KZ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qc=(function(){function t(e,r){for(var n,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();try{for(var d=KZ(f),p=d.next();!p.done;p=d.next()){var g=p.value;s+=g.getCount()*(g.getDataCodewords()+c)}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new xe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new xe}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Le;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var o=Sk.numBitsDiffering(e,a);o<r&&(n=i+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new So(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new J(7,new $(1,19)),new J(10,new $(1,16)),new J(13,new $(1,13)),new J(17,new $(1,9))),new t(2,Int32Array.from([6,18]),new J(10,new $(1,34)),new J(16,new $(1,28)),new J(22,new $(1,22)),new J(28,new $(1,16))),new t(3,Int32Array.from([6,22]),new J(15,new $(1,55)),new J(26,new $(1,44)),new J(18,new $(2,17)),new J(22,new $(2,13))),new t(4,Int32Array.from([6,26]),new J(20,new $(1,80)),new J(18,new $(2,32)),new J(26,new $(2,24)),new J(16,new $(4,9))),new t(5,Int32Array.from([6,30]),new J(26,new $(1,108)),new J(24,new $(2,43)),new J(18,new $(2,15),new $(2,16)),new J(22,new $(2,11),new $(2,12))),new t(6,Int32Array.from([6,34]),new J(18,new $(2,68)),new J(16,new $(4,27)),new J(24,new $(4,19)),new J(28,new $(4,15))),new t(7,Int32Array.from([6,22,38]),new J(20,new $(2,78)),new J(18,new $(4,31)),new J(18,new $(2,14),new $(4,15)),new J(26,new $(4,13),new $(1,14))),new t(8,Int32Array.from([6,24,42]),new J(24,new $(2,97)),new J(22,new $(2,38),new $(2,39)),new J(22,new $(4,18),new $(2,19)),new J(26,new $(4,14),new $(2,15))),new t(9,Int32Array.from([6,26,46]),new J(30,new $(2,116)),new J(22,new $(3,36),new $(2,37)),new J(20,new $(4,16),new $(4,17)),new J(24,new $(4,12),new $(4,13))),new t(10,Int32Array.from([6,28,50]),new J(18,new $(2,68),new $(2,69)),new J(26,new $(4,43),new $(1,44)),new J(24,new $(6,19),new $(2,20)),new J(28,new $(6,15),new $(2,16))),new t(11,Int32Array.from([6,30,54]),new J(20,new $(4,81)),new J(30,new $(1,50),new $(4,51)),new J(28,new $(4,22),new $(4,23)),new J(24,new $(3,12),new $(8,13))),new t(12,Int32Array.from([6,32,58]),new J(24,new $(2,92),new $(2,93)),new J(22,new $(6,36),new $(2,37)),new J(26,new $(4,20),new $(6,21)),new J(28,new $(7,14),new $(4,15))),new t(13,Int32Array.from([6,34,62]),new J(26,new $(4,107)),new J(22,new $(8,37),new $(1,38)),new J(24,new $(8,20),new $(4,21)),new J(22,new $(12,11),new $(4,12))),new t(14,Int32Array.from([6,26,46,66]),new J(30,new $(3,115),new $(1,116)),new J(24,new $(4,40),new $(5,41)),new J(20,new $(11,16),new $(5,17)),new J(24,new $(11,12),new $(5,13))),new t(15,Int32Array.from([6,26,48,70]),new J(22,new $(5,87),new $(1,88)),new J(24,new $(5,41),new $(5,42)),new J(30,new $(5,24),new $(7,25)),new J(24,new $(11,12),new $(7,13))),new t(16,Int32Array.from([6,26,50,74]),new J(24,new $(5,98),new $(1,99)),new J(28,new $(7,45),new $(3,46)),new J(24,new $(15,19),new $(2,20)),new J(30,new $(3,15),new $(13,16))),new t(17,Int32Array.from([6,30,54,78]),new J(28,new $(1,107),new $(5,108)),new J(28,new $(10,46),new $(1,47)),new J(28,new $(1,22),new $(15,23)),new J(28,new $(2,14),new $(17,15))),new t(18,Int32Array.from([6,30,56,82]),new J(30,new $(5,120),new $(1,121)),new J(26,new $(9,43),new $(4,44)),new J(28,new $(17,22),new $(1,23)),new J(28,new $(2,14),new $(19,15))),new t(19,Int32Array.from([6,30,58,86]),new J(28,new $(3,113),new $(4,114)),new J(26,new $(3,44),new $(11,45)),new J(26,new $(17,21),new $(4,22)),new J(26,new $(9,13),new $(16,14))),new t(20,Int32Array.from([6,34,62,90]),new J(28,new $(3,107),new $(5,108)),new J(26,new $(3,41),new $(13,42)),new J(30,new $(15,24),new $(5,25)),new J(28,new $(15,15),new $(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new J(28,new $(4,116),new $(4,117)),new J(26,new $(17,42)),new J(28,new $(17,22),new $(6,23)),new J(30,new $(19,16),new $(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new J(28,new $(2,111),new $(7,112)),new J(28,new $(17,46)),new J(30,new $(7,24),new $(16,25)),new J(24,new $(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new J(30,new $(4,121),new $(5,122)),new J(28,new $(4,47),new $(14,48)),new J(30,new $(11,24),new $(14,25)),new J(30,new $(16,15),new $(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new J(30,new $(6,117),new $(4,118)),new J(28,new $(6,45),new $(14,46)),new J(30,new $(11,24),new $(16,25)),new J(30,new $(30,16),new $(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new J(26,new $(8,106),new $(4,107)),new J(28,new $(8,47),new $(13,48)),new J(30,new $(7,24),new $(22,25)),new J(30,new $(22,15),new $(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new J(28,new $(10,114),new $(2,115)),new J(28,new $(19,46),new $(4,47)),new J(28,new $(28,22),new $(6,23)),new J(30,new $(33,16),new $(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new J(30,new $(8,122),new $(4,123)),new J(28,new $(22,45),new $(3,46)),new J(30,new $(8,23),new $(26,24)),new J(30,new $(12,15),new $(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new $(3,117),new $(10,118)),new J(28,new $(3,45),new $(23,46)),new J(30,new $(4,24),new $(31,25)),new J(30,new $(11,15),new $(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new $(7,116),new $(7,117)),new J(28,new $(21,45),new $(7,46)),new J(30,new $(1,23),new $(37,24)),new J(30,new $(19,15),new $(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new $(5,115),new $(10,116)),new J(28,new $(19,47),new $(10,48)),new J(30,new $(15,24),new $(25,25)),new J(30,new $(23,15),new $(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new $(13,115),new $(3,116)),new J(28,new $(2,46),new $(29,47)),new J(30,new $(42,24),new $(1,25)),new J(30,new $(23,15),new $(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new $(17,115)),new J(28,new $(10,46),new $(23,47)),new J(30,new $(10,24),new $(35,25)),new J(30,new $(19,15),new $(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new $(17,115),new $(1,116)),new J(28,new $(14,46),new $(21,47)),new J(30,new $(29,24),new $(19,25)),new J(30,new $(11,15),new $(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new $(13,115),new $(6,116)),new J(28,new $(14,46),new $(23,47)),new J(30,new $(44,24),new $(7,25)),new J(30,new $(59,16),new $(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new $(12,121),new $(7,122)),new J(28,new $(12,47),new $(26,48)),new J(30,new $(39,24),new $(14,25)),new J(30,new $(22,15),new $(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new $(6,121),new $(14,122)),new J(28,new $(6,47),new $(34,48)),new J(30,new $(46,24),new $(10,25)),new J(30,new $(2,15),new $(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new $(17,122),new $(4,123)),new J(28,new $(29,46),new $(14,47)),new J(30,new $(49,24),new $(10,25)),new J(30,new $(24,15),new $(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new $(4,122),new $(18,123)),new J(28,new $(13,46),new $(32,47)),new J(30,new $(48,24),new $(14,25)),new J(30,new $(42,15),new $(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new $(20,117),new $(4,118)),new J(28,new $(40,47),new $(7,48)),new J(30,new $(43,24),new $(22,25)),new J(30,new $(10,15),new $(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new $(19,118),new $(6,119)),new J(28,new $(18,47),new $(31,48)),new J(30,new $(34,24),new $(34,25)),new J(30,new $(20,15),new $(61,16)))],t})(),un;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(un||(un={}));var M6=(function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[un.DATA_MASK_000,new t(un.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[un.DATA_MASK_001,new t(un.DATA_MASK_001,function(e,r){return(e&1)===0})],[un.DATA_MASK_010,new t(un.DATA_MASK_010,function(e,r){return r%3===0})],[un.DATA_MASK_011,new t(un.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[un.DATA_MASK_100,new t(un.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[un.DATA_MASK_101,new t(un.DATA_MASK_101,function(e,r){return e*r%6===0})],[un.DATA_MASK_110,new t(un.DATA_MASK_110,function(e,r){return e*r%6<3})],[un.DATA_MASK_111,new t(un.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t})(),XZ=(function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new xe;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,n=i-1;n>=o;n--)a=this.copyBit(8,n,a);for(var r=i-8;r<i;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=Sk.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new xe},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Qc.getVersionForNumber(r);for(var n=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,a,n);var s=Qc.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(o,a,n);if(s=Qc.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new xe},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=M6.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),c=0,f=0,d=0,p=i-1;p>0;p-=2){p===6&&p--;for(var g=0;g<i;g++)for(var y=o?i-1-g:g,b=0;b<2;b++)a.get(p-b,y)||(d++,f<<=1,this.bitMatrix.get(p-b,y)&&(f|=1),d===8&&(s[c++]=f,d=0,f=0));o=!o}if(c!==r.getTotalCodewords())throw new xe;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=M6.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,a=e.getHeight();i<a;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t})(),k6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YZ=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,a,o,s;if(e.length!==r.getTotalCodewords())throw new Le;var c=r.getECBlocksForLevel(n),f=0,d=c.getECBlocks();try{for(var p=k6(d),g=p.next();!g.done;g=p.next()){var y=g.value;f+=y.getCount()}}catch(F){i={error:F}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var b=new Array(f),w=0;try{for(var E=k6(d),S=E.next();!S.done;S=E.next())for(var y=S.value,I=0;I<y.getCount();I++){var O=y.getDataCodewords(),D=c.getECCodewordsPerBlock()+O;b[w++]=new t(O,new Uint8Array(D))}}catch(F){o={error:F}}finally{try{S&&!S.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}for(var k=b[0].codewords.length,B=b.length-1;B>=0;){var R=b[B].codewords.length;if(R===k)break;B--}B++;for(var N=k-c.getECCodewordsPerBlock(),L=0,I=0;I<N;I++)for(var U=0;U<w;U++)b[U].codewords[I]=e[L++];for(var U=B;U<w;U++)b[U].codewords[N]=e[L++];for(var j=b[0].codewords.length,I=N;I<j;I++)for(var U=0;U<w;U++){var V=U<B?I:I+1;b[U].codewords[V]=e[L++]}return b},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),ca;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(ca||(ca={}));var er=(function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Le;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(ca.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(ca.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(ca.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(ca.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(ca.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(ca.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(ca.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(ca.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(ca.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(ca.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),QZ=(function(){function t(){}return t.decode=function(e,r,n,i){var a=new Ak(e),o=new Ze,s=new Array,c=-1,f=-1;try{var d=null,p=!1,g=void 0;do{if(a.available()<4)g=er.TERMINATOR;else{var y=a.readBits(4);g=er.forBits(y)}switch(g){case er.TERMINATOR:break;case er.FNC1_FIRST_POSITION:case er.FNC1_SECOND_POSITION:p=!0;break;case er.STRUCTURED_APPEND:if(a.available()<16)throw new xe;c=a.readBits(8),f=a.readBits(8);break;case er.ECI:var b=t.parseECIValue(a);if(d=Jr.getCharacterSetECIByValue(b),d===null)throw new xe;break;case er.HANZI:var w=a.readBits(4),E=a.readBits(g.getCharacterCountBits(r));w===t.GB2312_SUBSET&&t.decodeHanziSegment(a,o,E);break;default:var S=a.readBits(g.getCharacterCountBits(r));switch(g){case er.NUMERIC:t.decodeNumericSegment(a,o,S);break;case er.ALPHANUMERIC:t.decodeAlphanumericSegment(a,o,S,p);break;case er.BYTE:t.decodeByteSegment(a,o,S,d,s,i);break;case er.KANJI:t.decodeKanjiSegment(a,o,S);break;default:throw new xe}break}}while(g!==er.TERMINATOR)}catch{throw new xe}return new Nm(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),c,f)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new xe;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,n--}try{r.append(va.decode(i,ht.GB2312))}catch(c){throw new xe(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new xe;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,n--}try{r.append(va.decode(i,ht.SHIFT_JIS))}catch(c){throw new xe(c)}},t.decodeByteSegment=function(e,r,n,i,a,o){if(8*n>e.available())throw new xe;for(var s=new Uint8Array(n),c=0;c<n;c++)s[c]=e.readBits(8);var f;i===null?f=ht.guessEncoding(s,o):f=i.getName();try{r.append(va.decode(s,f))}catch(d){throw new xe(d)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new xe;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var a=r.length();n>1;){if(e.available()<11)throw new xe;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new xe;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new xe;var i=e.readBits(10);if(i>=1e3)throw new xe;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new xe;var a=e.readBits(7);if(a>=100)throw new xe;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new xe;var o=e.readBits(4);if(o>=10)throw new xe;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new xe},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),Ck=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t})(),j6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZZ=(function(){function t(){this.rsDecoder=new Mm(vi.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(So.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new XZ(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new Ck(!0)),a}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,a,o,s=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),f=e.readCodewords(),d=YZ.getDataBlocks(f,s,c),p=0;try{for(var g=j6(d),y=g.next();!y.done;y=g.next()){var b=y.value;p+=b.getNumDataCodewords()}}catch(B){n={error:B}}finally{try{y&&!y.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}var w=new Uint8Array(p),E=0;try{for(var S=j6(d),I=S.next();!I.done;I=S.next()){var b=I.value,O=b.getCodewords(),D=b.getNumDataCodewords();this.correctErrors(O,D);for(var k=0;k<D;k++)w[E++]=O[k]}}catch(B){a={error:B}}finally{try{I&&!I.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}return QZ.decode(w,s,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new pn}for(var i=0;i<r;i++)e[i]=n[i]},t})(),JZ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),eJ=(function(t){JZ(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e})(Oe),tJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rJ=(function(){function t(e,r,n,i,a,o,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,a=this.startY+r/2,o=new Int32Array(3),s=this.image,c=0;c<r;c++){var f=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!s.get(d,f);)d++;for(var p=0;d<i;){if(s.get(d,f))if(p===1)o[1]++;else if(p===2){if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,d);if(g!==null)return g}o[0]=o[2],o[1]=1,o[2]=0,p=1}else o[++p]++;else p===1&&p++,o[p]++;d++}if(this.foundPatternCross(o)){var g=this.handlePossibleCenter(o,f,i);if(g!==null)return g}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var c=e;c>=0&&a.get(r,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&!a.get(r,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(r,c)&&s[1]<=n;)s[1]++,c++;if(c===o||s[1]>n)return NaN;for(;c<o&&!a.get(r,c)&&s[2]<=n;)s[2]++,c++;if(s[2]>n)return NaN;var f=s[0]+s[1]+s[2];return 5*Math.abs(f-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,a,o=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,s,2*e[1],o);if(!isNaN(c)){var f=(e[0]+e[1]+e[2])/3;try{for(var d=tJ(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.aboutEquals(f,c,s))return g.combineEstimate(c,s,f)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var y=new eJ(s,c,f);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null},t})(),nJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),iJ=(function(t){nJ(e,t);function e(r,n,i,a){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=this.count+1,o=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,c,a)},e})(Oe),aJ=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),Eh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oJ=(function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(sr.TRY_HARDER)!==void 0,n=e!=null&&e.get(sr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var c=!1,f=new Int32Array(5),d=s-1;d<a&&!c;d+=s){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;for(var p=0,g=0;g<o;g++)if(i.get(g,d))(p&1)===1&&p++,f[p]++;else if((p&1)===0)if(p===4)if(t.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,g,n);if(y===!0)if(s=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var b=this.findRowSkip();b>f[2]&&(d+=b-f[2]-s,g=o-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;continue}p=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,p=3;else f[++p]++;else f[p]++;if(t.foundPatternCross(f)){var y=this.handlePossibleCenter(f,d,o,n);y===!0&&(s=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Oe.orderBestPatterns(w),new aJ(w)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var a=r/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&r>=o&&s.get(r-o,e-o);)a[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!s.get(r-o,e-o)&&a[1]<=n;)a[1]++,o++;if(e<o||r<o||a[1]>n)return!1;for(;e>=o&&r>=o&&s.get(r-o,e-o)&&a[0]<=n;)a[0]++,o++;if(a[0]>n)return!1;var c=s.getHeight(),f=s.getWidth();for(o=1;e+o<c&&r+o<f&&s.get(r+o,e+o);)a[2]++,o++;if(e+o>=c||r+o>=f)return!1;for(;e+o<c&&r+o<f&&!s.get(r+o,e+o)&&a[3]<n;)a[3]++,o++;if(e+o>=c||r+o>=f||a[3]>=n)return!1;for(;e+o<c&&r+o<f&&s.get(r+o,e+o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(r,c);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(r,c)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&a.get(r,c)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(r,c);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(r,c)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&a.get(r,c)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),c=e;c>=0&&a.get(c,r);)s[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,r)&&s[1]<=n;)s[1]++,c--;if(c<0||s[1]>n)return NaN;for(;c>=0&&a.get(c,r)&&s[0]<=n;)s[0]++,c--;if(s[0]>n)return NaN;for(c=e+1;c<o&&a.get(c,r);)s[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,r)&&s[3]<n;)s[3]++,c++;if(c===o||s[3]>=n)return NaN;for(;c<o&&a.get(c,r)&&s[4]<n;)s[4]++,c++;if(s[4]>=n)return NaN;var f=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(f-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var c=a/7,f=!1,d=this.possibleCenters,p=0,g=d.length;p<g;p++){var y=d[p];if(y.aboutEquals(c,s,o)){d[p]=y.combineEstimate(s,o,c),f=!0;break}}if(!f){var b=new iJ(o,s,c);d.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=Eh(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,a=0,o=0,s=this.possibleCenters.length;try{for(var c=Eh(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;d.getCount()>=t.CENTER_QUORUM&&(a++,o+=d.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(a<3)return!1;var p=o/s,g=0;try{for(var y=Eh(this.possibleCenters),b=y.next();!b.done;b=y.next()){var d=b.value;g+=Math.abs(d.getEstimatedModuleSize()-p)}}catch(w){n={error:w}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}return g<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,i,a=this.possibleCenters.length;if(a<3)throw new se;var o=this.possibleCenters,s;if(a>3){var c=0,f=0;try{for(var d=Eh(this.possibleCenters),p=d.next();!p.done;p=d.next()){var g=p.value,y=g.getEstimatedModuleSize();c+=y,f+=y*y}}catch(k){e={error:k}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}s=c/a;var b=Math.sqrt(f/a-s*s);o.sort(function(k,B){var R=Math.abs(B.getEstimatedModuleSize()-s),N=Math.abs(k.getEstimatedModuleSize()-s);return R<N?-1:R>N?1:0});for(var w=Math.max(.2*s,b),E=0;E<o.length&&o.length>3;E++){var S=o[E];Math.abs(S.getEstimatedModuleSize()-s)>w&&(o.splice(E,1),E--)}}if(o.length>3){var c=0;try{for(var I=Eh(o),O=I.next();!O.done;O=I.next()){var D=O.value;c+=D.getEstimatedModuleSize()}}catch(B){n={error:B}}finally{try{O&&!O.done&&(i=I.return)&&i.call(I)}finally{if(n)throw n.error}}s=c/o.length,o.sort(function(B,R){if(R.getCount()===B.getCount()){var N=Math.abs(R.getEstimatedModuleSize()-s),L=Math.abs(B.getEstimatedModuleSize()-s);return N<L?1:N>L?-1:0}else return R.getCount()-B.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),sJ=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(sr.NEED_RESULT_POINT_CALLBACK);var r=new oJ(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(r,n,i);if(a<1)throw new se("No pattern found in proccess finder.");var o=t.computeDimension(r,n,i,a),s=Qc.getProvisionalVersionForDimension(o),c=s.getDimensionForVersion()-7,f=null;if(s.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+i.getX(),p=n.getY()-r.getY()+i.getY(),g=1-3/c,y=Math.floor(r.getX()+g*(d-r.getX())),b=Math.floor(r.getY()+g*(p-r.getY())),w=4;w<=16;w<<=1)try{f=this.findAlignmentInRegion(a,y,b,w);break}catch(O){if(!(O instanceof se))throw O}var E=t.createTransform(r,n,i,f,o),S=t.sampleGrid(this.image,E,o),I;return f===null?I=[i,r,n]:I=[i,r,n,f],new PA(S,I)},t.createTransform=function(e,r,n,i,a){var o=a-3.5,s,c,f,d;return i!==null?(s=i.getX(),c=i.getY(),f=o-3,d=f):(s=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),f=o,d=o),bk.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,f,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),s,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=DA.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var a=xt.round(Oe.distance(e,r)/i),o=xt.round(Oe.distance(e,n)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new se("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,i),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var c=Math.floor(r-(i-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,c),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var a=Math.abs(i-r)>Math.abs(n-e);if(a){var o=e;e=r,r=o,o=n,n=i,i=o}for(var s=Math.abs(n-e),c=Math.abs(i-r),f=-s/2,d=e<n?1:-1,p=r<i?1:-1,g=0,y=n+d,b=e,w=r;b!==y;b+=d){var E=a?w:b,S=a?b:w;if(g===1===this.image.get(E,S)){if(g===2)return xt.distance(b,w,e,r);g++}if(f+=c,f>0){if(w===i)break;w+=p,f-=s}}return g===2?xt.distance(n+d,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var a=Math.floor(i*e),o=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-o<e*3)throw new se("Alignment top exceeds estimated module size.");var c=Math.max(0,n-a),f=Math.min(this.image.getHeight()-1,n+a);if(f-c<e*3)throw new se("Alignment bottom exceeds estimated module size.");var d=new rJ(this.image,o,c,s-o,f-c,e,this.resultPointCallback);return d.find()},t})(),sw=(function(){function t(){this.decoder=new ZZ}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(sr.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),i=t.NO_POINTS}else{var o=new sJ(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),i=o.getPoints()}n.getOther()instanceof Ck&&n.getOther().applyMirroredCorrection(i);var s=new Wn(n.getText(),n.getRawBytes(),void 0,i,je.QR_CODE,void 0),c=n.getByteSegments();c!==null&&s.putMetadata(Dn.BYTE_SEGMENTS,c);var f=n.getECLevel();return f!==null&&s.putMetadata(Dn.ERROR_CORRECTION_LEVEL,f),n.hasStructuredAppend()&&(s.putMetadata(Dn.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Dn.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new se;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],c=n[0];if(s>=c||a>=o)throw new se;if(o-a!==c-s&&(c=s+(o-a),c>=e.getWidth()))throw new se;var f=Math.round((c-s+1)/i),d=Math.round((o-a+1)/i);if(f<=0||d<=0)throw new se;if(d!==f)throw new se;var p=Math.floor(i/2);a+=p,s+=p;var g=s+Math.floor((f-1)*i)-c;if(g>0){if(g>p)throw new se;s-=g}var y=a+Math.floor((d-1)*i)-o;if(y>0){if(y>p)throw new se;a-=y}for(var b=new So(f,d),w=0;w<d;w++)for(var E=a+Math.floor(w*i),S=0;S<f;S++)e.get(s+Math.floor(S*i),E)&&b.set(S,w);return b},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),a=e[0],o=e[1],s=!0,c=0;a<i&&o<n;){if(s!==r.get(a,o)){if(++c===5)break;s=!s}a++,o++}if(a===i||o===n)throw new se;return(a-e[0])/7},t.NO_POINTS=new Array,t})(),lJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gt=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return xt.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=lJ(e),s=o.next();!s.done;s=o.next()){var c=s.value;i[a++]=c}}catch(f){r={error:f}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=en.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),cJ=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),uJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fJ=(function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),a=t.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(n,i)),new cJ(i,a)},t.detect=function(e,r){for(var n,i,a=new Array,o=0,s=0,c=!1;o<r.getHeight();){var f=t.findVertices(r,o,s);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,s=0;try{for(var d=(n=void 0,uJ(a)),p=d.next();!p.done;p=d.next()){var g=p.value;g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())))}}catch(y){n={error:y}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,a.push(f),!e)break;f[2]!=null?(s=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(s=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return a},t.findVertices=function(e,r,n){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,a,o){for(var s=new Array(4),c=!1,f=new Int32Array(o.length);i<r;i+=t.ROW_STEP){var d=t.findGuardPattern(e,a,i,n,!1,o,f);if(d!=null){for(;i>0;){var p=t.findGuardPattern(e,a,--i,n,!1,o,f);if(p!=null)d=p;else{i++;break}}s[0]=new Oe(d[0],i),s[1]=new Oe(d[1],i),c=!0;break}}var g=i+1;if(c){for(var y=0,p=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);g<r;g++){var d=t.findGuardPattern(e,p[0],g,n,!1,o,f);if(d!=null&&Math.abs(p[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(p[1]-d[1])<t.MAX_PATTERN_DRIFT)p=d,y=0;else{if(y>t.SKIPPED_ROW_COUNT_MAX)break;y++}}g-=y+1,s[2]=new Oe(p[0],g),s[3]=new Oe(p[1],g)}return g-i<t.BARCODE_MIN_HEIGHT&&en.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,a,o,s){en.fillWithin(s,0,s.length,0);for(var c=r,f=0;e.get(c,n)&&c>0&&f++<t.MAX_PIXEL_DRIFT;)c--;for(var d=c,p=0,g=o.length,y=a;d<i;d++){var b=e.get(d,n);if(b!==y)s[p]++;else{if(p===g-1){if(t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,d]);c+=s[0]+s[1],Xt.arraycopy(s,2,s,0,p-1),s[p-1]=0,s[p]=0,p--}else p++;s[p]=1,y=!y}}return p===g-1&&t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return 1/0;var c=a/o;n*=c;for(var f=0,d=0;d<i;d++){var p=e[d],g=r[d]*c,y=p>g?p-g:g-p;if(y>n)return 1/0;f+=y}return f/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),dJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vc=(function(){function t(e,r){if(r.length===0)throw new Le;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Xt.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=dJ(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(p){r={error:p}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}for(var c=this.coefficients[0],f=this.coefficients.length,d=1;d<f;d++)c=this.field.add(this.field.multiply(e,c),this.coefficients[d]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;Xt.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=this.field.add(r[s-o],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Le("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=0;s<n;s++)for(var c=r[s],f=0;f<a;f++)o[s+f]=this.field.add(o[s+f],this.field.multiply(c,i[f]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Le;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new Ze,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t})(),hJ=(function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Le;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new xk;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),pJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gJ=(function(t){pJ(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var a=1,o=0;o<r;o++)i.expTable[o]=a,a=a*n%r;for(var o=0;o<r-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Vc(i,new Int32Array([0])),i.one=new Vc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Le;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Vc(this,i)},e.PDF417_GF=new e(gt.NUMBER_OF_CODEWORDS,3),e})(hJ),vJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mJ=(function(){function t(){this.field=gJ.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,a,o=new Vc(this.field,e),s=new Int32Array(r),c=!1,f=r;f>0;f--){var d=o.evaluateAt(this.field.exp(f));s[r-f]=d,d!==0&&(c=!0)}if(!c)return 0;var p=this.field.getOne();if(n!=null)try{for(var g=vJ(n),y=g.next();!y.done;y=g.next()){var b=y.value,w=this.field.exp(e.length-1-b),E=new Vc(this.field,new Int32Array([this.field.subtract(0,w),1]));p=p.multiply(E)}}catch(N){i={error:N}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}for(var S=new Vc(this.field,s),I=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),S,r),O=I[0],D=I[1],k=this.findErrorLocations(O),B=this.findErrorMagnitudes(D,O,k),f=0;f<k.length;f++){var R=e.length-1-this.field.log(k[f]);if(R<0)throw pn.getChecksumInstance();e[R]=this.field.subtract(e[R],B[f])}return k.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=e,o=r,s=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var f=a,d=s;if(a=o,s=c,a.isZero())throw pn.getChecksumInstance();o=f;for(var p=this.field.getZero(),g=a.getCoefficient(a.getDegree()),y=this.field.inverse(g);o.getDegree()>=a.getDegree()&&!o.isZero();){var b=o.getDegree()-a.getDegree(),w=this.field.multiply(o.getCoefficient(o.getDegree()),y);p=p.add(this.field.buildMonomial(b,w)),o=o.subtract(a.multiplyByMonomial(b,w))}c=p.multiply(s).subtract(d).negative()}var E=c.getCoefficient(0);if(E===0)throw pn.getChecksumInstance();var S=this.field.inverse(E),I=c.multiply(S),O=o.multiply(S);return[I,O]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,a=1;a<this.field.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==r)throw pn.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new Vc(this.field,a),c=n.length,f=new Int32Array(c),o=0;o<c;o++){var d=this.field.inverse(n[o]),p=this.field.subtract(0,e.evaluateAt(d)),g=this.field.inverse(s.evaluateAt(d));f[o]=this.field.multiply(p,g)}return f},t})(),lw=(function(){function t(e,r,n,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,a)}return t.prototype.constructor_1=function(e,r,n,i,a){var o=r==null||n==null,s=i==null||a==null;if(o&&s)throw new se;o?(r=new Oe(0,i.getY()),n=new Oe(0,a.getY())):s&&(i=new Oe(e.getWidth()-1,r.getY()),a=new Oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,f=Math.trunc(c.getY()-e);f<0&&(f=0);var d=new Oe(c.getX(),f);n?i=d:o=d}if(r>0){var p=n?this.bottomLeft:this.bottomRight,g=Math.trunc(p.getY()+r);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);var y=new Oe(p.getX(),g);n?a=y:s=y}return new t(this.image,i,a,o,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),yJ=(function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),MA=(function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(o,s,c,f,d,p){if(o==="%%")return"%";if(r[++n]!==void 0){o=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,y;switch(p){case"s":y=r[n];break;case"c":y=r[n][0];break;case"f":y=parseFloat(r[n]).toFixed(o);break;case"p":y=parseFloat(r[n]).toPrecision(o);break;case"e":y=parseFloat(r[n]).toExponential(o);break;case"x":y=parseInt(r[n]).toString(g||16);break;case"d":y=parseFloat(parseInt(r[n],g||10).toPrecision(o)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(g);for(var b=parseInt(c),w=c&&c[0]+""=="0"?"0":" ";y.length<b;)y=s!==void 0?y+w:w+y;return y}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t})(),xJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tk=(function(){function t(e){this.boundingBox=new lw(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new MA,i=0;try{for(var a=xJ(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),bJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_J=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Vh=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,a=function(p,g){var y={getKey:function(){return p},getValue:function(){return g}};y.getValue()>n?(n=y.getValue(),i=[],i.push(y.getKey())):y.getValue()===n&&i.push(y.getKey())};try{for(var o=bJ(this.values.entries()),s=o.next();!s.done;s=o.next()){var c=_J(s.value,2),f=c[0],d=c[1];a(f,d)}}catch(p){e={error:p}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return gt.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),wJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),V2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L6=(function(t){wJ(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=V2(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=-1,d=1,p=0,g=s;g<c;g++)if(n[g]!=null){var y=n[g],b=y.getRowNumber()-f;if(b===0)p++;else if(b===1)d=Math.max(d,p),p=1,f=y.getRowNumber();else if(b<0||y.getRowNumber()>=r.getRowCount()||b>g)n[g]=null;else{var w=void 0;d>2?w=(d-2)*b:w=b;for(var E=w>=g,S=1;S<=w&&!E;S++)E=n[g-S]!=null;E?n[g]=null:(f=y.getRowNumber(),p=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=V2(this.getCodewords()),s=o.next();!s.done;s=o.next()){var c=s.value;if(c!=null){var f=c.getRowNumber();if(f>=a.length)continue;a[f]++}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),f=-1,d=o;d<s;d++)if(c[d]!=null){var p=c[d];p.setRowNumberAsRowIndicatorColumn();var g=p.getRowNumber()-f;g===0||(g===1?f=p.getRowNumber():p.getRowNumber()>=r.getRowCount()?c[d]=null:f=p.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),a=new Vh,o=new Vh,s=new Vh,c=new Vh;try{for(var f=V2(i),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null){p.setRowNumberAsRowIndicatorColumn();var g=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:o.setValue(g*3+1);break;case 1:c.setValue(g/3),s.setValue(g%3);break;case 2:a.setValue(g+1);break}}}}catch(w){r={error:w}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<gt.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>gt.MAX_ROWS_IN_BARCODE)return null;var b=new yJ(a.getValue()[0],o.getValue()[0],s.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,b),b},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(r[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:o+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(Tk),EJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AJ=(function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=gt.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=n[r],s=this.detectionResultColumns[e-1].getCodewords(),c=s;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var f=new Array(14);f[2]=s[r],f[3]=c[r],r>0&&(f[0]=n[r-1],f[4]=s[r-1],f[5]=c[r-1]),r>1&&(f[8]=n[r-2],f[10]=s[r-2],f[11]=c[r-2]),r<n.length-1&&(f[1]=n[r+1],f[6]=s[r+1],f[7]=c[r+1]),r<n.length-2&&(f[9]=n[r+2],f[12]=s[r+2],f[13]=c[r+2]);try{for(var d=EJ(f),p=d.next();!p.done;p=d.next()){var g=p.value;if(t.adjustRowNumber(o,g))return}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new MA,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t})(),SJ=(function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),CJ=(function(){function t(){}return t.initialize=function(){for(var e=0;e<gt.SYMBOL_TABLE.length;e++)for(var r=gt.SYMBOL_TABLE[e],n=r&1,i=0;i<gt.BARS_IN_MODULE;i++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(gt.BARS_IN_MODULE)),t.RATIOS_TABLE[e][gt.BARS_IN_MODULE-i-1]=Math.fround(a/gt.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=xt.sum(e),n=new Int32Array(gt.BARS_IN_MODULE),i=0,a=0,o=0;o<gt.MODULES_IN_CODEWORD;o++){var s=r/(2*gt.MODULES_IN_CODEWORD)+o*r/gt.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return gt.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=xt.sum(e),n=new Array(gt.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var a=rw.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var c=0,f=t.RATIOS_TABLE[s],d=0;d<gt.BARS_IN_MODULE;d++){var p=Math.fround(f[d]-n[d]);if(c+=Math.fround(p*p),c>=a)break}c<a&&(a=c,o=gt.SYMBOL_TABLE[s])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(gt.SYMBOL_TABLE.length).map(function(e){return new Array(gt.BARS_IN_MODULE)}),t})(),TJ=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),B6=(function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t})(),IJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),OJ=(function(t){IJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(xi),RJ=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new OJ;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new OA;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),PJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),DJ=(function(t){PJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(xi),NJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),MJ=(function(t){NJ(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Le("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new DJ;i=et.MAX_VALUE}this.buf=en.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new OA;this.ensureCapacity(this.count+i),Xt.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return en.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e})(RJ),Ht;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ht||(Ht={}));function Ik(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Zg;function vl(t){if(typeof Zg>"u"&&(Zg=Ik()),Zg===null)throw new Error("BigInt is not supported!");return Zg(t)}function kJ(){var t=[];t[0]=vl(1);var e=vl(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var jJ=(function(){function t(){}return t.decode=function(e,r){var n=new Ze(""),i=Jr.ISO8859_1;n.enableDecoding(i);for(var a=1,o=e[a++],s=new TJ;a<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(o,e,i,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:Jr.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new xe;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)o=e[a++];else throw xe.getFormatInstance()}if(n.length()===0)throw xe.getFormatInstance();var c=new Nm(null,n.toString(),null,r);return c.setOther(s),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw xe.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)i[a]=e[r];n.setSegmentIndex(et.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Ze;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ze;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var f=new Ze;r=t.textCompaction(e,r+1,f),n.setSender(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new Ze;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var p=new Ze;r=t.numericCompaction(e,r+1,p),n.setSegmentCount(et.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var g=new Ze;r=t.numericCompaction(e,r+1,g),n.setTimestamp(B6.parseLong(g.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var y=new Ze;r=t.numericCompaction(e,r+1,y),n.setChecksum(et.parseInt(y.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var b=new Ze;r=t.numericCompaction(e,r+1,b),n.setFileSize(B6.parseLong(b.toString()));break;default:throw xe.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw xe.getFormatInstance()}if(s!==-1){var w=r-s;n.isLastSegment()&&w--,n.setOptionalData(en.copyOfRange(e,s,s+w))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),o=0,s=!1;r<e[0]&&!s;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],a[o]=c,o++;break}}return t.decodeTextCompaction(i,a,o,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var a=Ht.ALPHA,o=Ht.ALPHA,s=0;s<n;){var c=e[s],f="";switch(a){case Ht.ALPHA:if(c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case t.LL:a=Ht.LOWER;break;case t.ML:a=Ht.MIXED;break;case t.PS:o=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.LOWER:if(c<26)f=String.fromCharCode(97+c);else switch(c){case 26:f=" ";break;case t.AS:o=a,a=Ht.ALPHA_SHIFT;break;case t.ML:a=Ht.MIXED;break;case t.PS:o=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.MIXED:if(c<t.PL)f=t.MIXED_CHARS[c];else switch(c){case t.PL:a=Ht.PUNCT;break;case 26:f=" ";break;case t.LL:a=Ht.LOWER;break;case t.AL:a=Ht.ALPHA;break;case t.PS:o=a,a=Ht.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.PUNCT:if(c<t.PAL)f=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=Ht.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.ALPHA_SHIFT:if(a=o,c<26)f=String.fromCharCode(65+c);else switch(c){case 26:f=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break;case Ht.PUNCT_SHIFT:if(a=o,c<t.PAL)f=t.PUNCT_CHARS[c];else switch(c){case t.PAL:a=Ht.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Ht.ALPHA;break}break}f!==""&&i.append(f),s++}},t.byteCompaction=function(e,r,n,i,a){var o=new MJ,s=0,c=0,f=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),p=r[i++];i<r[0]&&!f;)switch(d[s++]=p,c=900*c+p,p=r[i++],p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,f=!0;break;default:if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(vl(c)>>vl(8*(5-g))));c=0,s=0}break}i===r[0]&&p<t.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=p);for(var y=0;y<s;y++)o.write(d[y]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!f;){var b=r[i++];if(b<t.TEXT_COMPACTION_MODE_LATCH)s++,c=900*c+b;else switch(b){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,f=!0;break}if(s%5===0&&s>0){for(var g=0;g<6;++g)o.write(Number(vl(c)>>vl(8*(5-g))));c=0,s=0}}break}return a.append(va.decode(o.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,a=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(t.decodeBase900toBase10(o,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=vl(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*vl(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new xe;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Ik()?kJ():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),Ah=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LJ=(function(){function t(){}return t.decode=function(e,r,n,i,a,o,s){for(var c=new lw(e,r,n,i,a),f=null,d=null,p,g=!0;;g=!1){if(r!=null&&(f=t.getRowIndicatorColumn(e,c,r,!0,o,s)),i!=null&&(d=t.getRowIndicatorColumn(e,c,i,!1,o,s)),p=t.merge(f,d),p==null)throw se.getNotFoundInstance();var y=p.getBoundingBox();if(g&&y!=null&&(y.getMinY()<c.getMinY()||y.getMaxY()>c.getMaxY()))c=y;else break}p.setBoundingBox(c);var b=p.getBarcodeColumnCount()+1;p.setDetectionResultColumn(0,f),p.setDetectionResultColumn(b,d);for(var w=f!=null,E=1;E<=b;E++){var S=w?E:b-E;if(p.getDetectionResultColumn(S)===void 0){var I=void 0;S===0||S===b?I=new L6(c,S===0):I=new Tk(c),p.setDetectionResultColumn(S,I);for(var O=-1,D=O,k=c.getMinY();k<=c.getMaxY();k++){if(O=t.getStartColumn(p,S,k,w),O<0||O>c.getMaxX()){if(D===-1)continue;O=D}var B=t.detectCodeword(e,c.getMinX(),c.getMaxX(),w,O,k,o,s);B!=null&&(I.setCodeword(k,B),D=O,o=Math.min(o,B.getWidth()),s=Math.max(s,B.getWidth()))}}}return t.createDecoderResult(p)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=lw.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new AJ(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),o=0;try{for(var s=Ah(i),c=s.next();!c.done;c=s.next()){var f=c.value;if(o+=a-f,f>0)break}}catch(y){r={error:y}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),p=0;o>0&&d[p]==null;p++)o--;for(var g=0,p=i.length-1;p>=0&&(g+=a-i[p],!(i[p]>0));p--);for(var p=d.length-1;g>0&&d[p]==null;p--)g--;return e.getBoundingBox().addMissingRows(o,g,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var a=Ah(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,a,o){for(var s=new L6(r,i),c=0;c<2;c++)for(var f=c===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),p=Math.trunc(Math.trunc(n.getY()));p<=r.getMaxY()&&p>=r.getMinY();p+=f){var g=t.detectCodeword(e,0,e.getWidth(),i,d,p,a,o);g!=null&&(s.setCodeword(p,g),i?d=g.getStartX():d=g.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>gt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var c=0;c<e.getBarcodeColumnCount();c++){var f=r[s][c+1].getValue(),d=s*e.getBarcodeColumnCount()+c;f.length===0?n.push(d):f.length===1?i[d]=f[0]:(o.push(d),a.push(f))}for(var p=new Array(a.length),g=0;g<p.length;g++)p[g]=a[g];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,gt.toIntArray(n),gt.toIntArray(o),p)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var c=0;c<o.length;c++)r[i[c]]=a[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(d){var f=d instanceof pn;if(!f)throw d}if(o.length===0)throw pn.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw pn.getChecksumInstance()}throw pn.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var c=0;c<o[s].length;c++)o[s][c]=new Vh;var f=0;try{for(var d=Ah(e.getDetectionResultColumns()),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)try{for(var y=(i=void 0,Ah(g.getCodewords())),b=y.next();!b.done;b=y.next()){var w=b.value;if(w!=null){var E=w.getRowNumber();if(E>=0){if(E>=o.length)continue;o[E][f].setValue(w.getValue())}}}}catch(S){i={error:S}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}f++}}catch(S){r={error:S}}finally{try{p&&!p.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var a,o,s=i?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-s)&&(c=e.getDetectionResultColumn(r-s).getCodeword(n)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return i?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(c=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),c!=null)return i?c.getEndX():c.getStartX();for(var f=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var d=(a=void 0,Ah(e.getDetectionResultColumn(r).getCodewords())),p=d.next();!p.done;p=d.next()){var g=p.value;if(g!=null)return(i?g.getEndX():g.getStartX())+s*f*(g.getEndX()-g.getStartX())}}catch(y){a={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}f++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,a,o,s,c){a=t.adjustCodewordStartColumn(e,r,n,i,a,o);var f=t.getModuleBitCount(e,r,n,i,a,o);if(f==null)return null;var d,p=xt.sum(f);if(i)d=a+p;else{for(var g=0;g<f.length/2;g++){var y=f[g];f[g]=f[f.length-1-g],f[f.length-1-g]=y}d=a,a=d-p}if(!t.checkCodewordSkew(p,s,c))return null;var b=CJ.getDecodedValue(f),w=gt.getCodeword(b);return w===-1?null:new SJ(a,d,t.getCodewordBucketNumber(b),w)},t.getModuleBitCount=function(e,r,n,i,a,o){for(var s=a,c=new Int32Array(8),f=0,d=i?1:-1,p=i;(i?s<n:s>=r)&&f<c.length;)e.get(s,o)===p?(c[f]++,s+=d):(f++,p=!p);return f===c.length||s===(i?n:r)&&f===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,a,o){for(var s=a,c=i?-1:1,f=0;f<2;f++){for(;(i?s>=r:s<n)&&i===e.get(s,o);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=c}c=-c,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw xe.getFormatInstance();var i=1<<r+1,a=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var o=jJ.decode(e,""+r);return o.setErrorsCorrected(a),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw pn.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw xe.getFormatInstance();var n=e[0];if(n>e.length)throw xe.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw xe.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new MA,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new mJ,t})(),BJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cw=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw se.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof xe||n instanceof pn?se.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,a,o=new Array,s=fJ.detectMultiple(e,r,n);try{for(var c=BJ(s.getPoints()),f=c.next();!f.done;f=c.next()){var d=f.value,p=LJ.decode(s.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),g=new Wn(p.getText(),p.getRawBytes(),void 0,d,je.PDF_417);g.putMetadata(Dn.ERROR_CORRECTION_LEVEL,p.getECLevel());var y=p.getOther();y!=null&&g.putMetadata(Dn.PDF417_EXTRA_METADATA,y),o.push(g)}}catch(b){i={error:b}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(b){return b})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?et.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*gt.MODULES_IN_CODEWORD/gt.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),UJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),U6=(function(t){UJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(xi),z6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zJ=(function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(sr.TRY_HARDER)!==void 0,n=e==null?null:e.get(sr.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(o){return o===je.UPC_A||o===je.UPC_E||o===je.EAN_13||o===je.EAN_8||o===je.CODABAR||o===je.CODE_39||o===je.CODE_93||o===je.CODE_128||o===je.ITF||o===je.RSS_14||o===je.RSS_EXPANDED});a&&!r&&i.push(new Fh(e)),n.includes(je.QR_CODE)&&i.push(new sw),n.includes(je.DATA_MATRIX)&&i.push(new ow),n.includes(je.AZTEC)&&i.push(new iw),n.includes(je.PDF_417)&&i.push(new cw),a&&r&&i.push(new Fh(e))}i.length===0&&(r||i.push(new Fh(e)),i.push(new sw),i.push(new ow),i.push(new iw),i.push(new cw),r&&i.push(new Fh(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=z6(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new U6("No readers where selected, nothing can be read.");try{for(var i=z6(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof U6)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new se("No MultiFormat Readers were able to detect the code.")},t})(),FJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),VJ=(function(t){FJ(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,a=new zJ;return a.setHints(r),i=t.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(ad),HJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){HJ(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new cw,r)||this}return e})(ad);var $J=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){$J(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new sw,r)||this}return e})(ad);var uw;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(uw||(uw={}));const Jg=uw;var Ok=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Pl(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,a=r.length;a<=e;a++){var o=n.multiply(new Pl(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Le("No error correction bytes");var n=e.length-r;if(n<=0)throw new Le("No data bytes provided");var i=this.buildGenerator(r),a=new Int32Array(n);Xt.arraycopy(e,0,a,0,n);var o=new Pl(this.field,a);o=o.multiplyByMonomial(r,1);for(var s=o.divide(i)[1],c=s.getCoefficients(),f=r-c.length,d=0;d<f;d++)e[n+d]=0;Xt.arraycopy(c,0,e,n+f,c.length)},t})(),Hh=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=n[o],c=0;c<i-1;c++){var f=s[c];f===s[c+1]&&f===n[o+1][c]&&f===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var c=n[o];s+6<i&&c[s]===1&&c[s+1]===0&&c[s+2]===1&&c[s+3]===1&&c[s+4]===1&&c[s+5]===0&&c[s+6]===1&&(t.isWhiteHorizontal(c,s-4,s)||t.isWhiteHorizontal(c,s+7,s+11))&&r++,o+6<a&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(t.isWhiteVertical(n,s,o-4,o)||t.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=n[o],c=0;c<i;c++)s[c]===1&&r++;var f=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-f)*10/f);return d*t.N4},t.getDataMaskBit=function(e,r,n){var i,a;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,i=(a&1)+a%3;break;case 6:a=n*r,i=(a&1)+a%3&1;break;case 7:a=n*r,i=a%3+(n+r&1)&1;break;default:throw new Le("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var c=0,f=-1,d=0;d<a;d++){var p=r?o[s][d]:o[d][s];p===f?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,f=p)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),qJ=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GJ=(function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=qJ(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;en.fill(o,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],o=r.bytes[n],s=0,c=this.width;s<c;++s)if(a[s]!==o[s])return!1;return!0},t.prototype.toString=function(){for(var e=new Ze,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),fw=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Ze;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),WJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Jt=(function(t){WJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(xi),F6=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,i,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new gn;t.makeTypeInfoBits(e,r,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),c=t.TYPE_INFO_COORDINATES[a],f=c[0],d=c[1];if(n.setBoolean(f,d,s),a<8){var p=n.getWidth()-a-1,g=8;n.setBoolean(p,g,s)}else{var p=8,g=n.getHeight()-7+(a-8);n.setBoolean(p,g,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new gn;t.makeVersionInfoBits(e,n);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var s=n.get(i);i--,r.setBoolean(a,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,a,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,a=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var c=0;c<2;++c){var f=o-c;if(t.isEmpty(n.get(f,s))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,r!==255&&Hh.getDataMaskBit(r,f,s)&&(d=!d),n.setBoolean(f,s,d)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new Jt("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-et.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Le("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!fw.isValidMaskPattern(r))throw new Jt("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(a,10);var o=new gn;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Jt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Jt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Jt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new Jt;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new Jt;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var c=0;c!==o;c++){var f=i[c];f>=0&&t.isEmpty(r.get(f,s))&&t.embedPositionAdjustmentPattern(f-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),KJ=(function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),V6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Hh.applyMaskPenaltyRule1(e)+Hh.applyMaskPenaltyRule2(e)+Hh.applyMaskPenaltyRule3(e)+Hh.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(Jg.CHARACTER_SET)!==void 0;a&&(i=n.get(Jg.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new gn;if(o===er.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Jr.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,s)}this.appendModeInfo(o,s);var f=new gn;this.appendBytes(e,o,f,i);var d;if(n!==null&&n.get(Jg.QR_VERSION)!==void 0){var p=Number.parseInt(n.get(Jg.QR_VERSION).toString(),10);d=Qc.getVersionForNumber(p);var g=this.calculateBitsNeeded(o,s,f,d);if(!this.willFit(g,d,r))throw new Jt("Data too big for requested version")}else d=this.recommendVersion(r,o,s,f);var y=new gn;y.appendBitArray(s);var b=o===er.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(b,d,o,y),y.appendBitArray(f);var w=d.getECBlocksForLevel(r),E=d.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(E,y);var S=this.interleaveWithECBytes(y,d.getTotalCodewords(),E,w.getNumBlocks()),I=new fw;I.setECLevel(r),I.setMode(o),I.setVersion(d);var O=d.getDimensionForVersion(),D=new GJ(O,O),k=this.chooseMaskPattern(S,r,d,D);return I.setMaskPattern(k),F6.buildMatrix(S,r,d,k,D),I.setMatrix(D),I},t.recommendVersion=function(e,r,n,i){var a=this.calculateBitsNeeded(r,n,i,Qc.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,i,o);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Jr.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return er.KANJI;for(var n=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return er.BYTE}return i?er.ALPHANUMERIC:n?er.NUMERIC:er.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=va.encode(e,Jr.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=r[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<fw.NUM_MASK_PATTERNS;s++){F6.buildMatrix(e,r,n,s,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=s)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=Qc.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new Jt("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),o=a.getTotalECCodewords(),s=i-o,c=(e+7)/8;return s>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Jt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var i=a;i<8;i++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),i=0;i<o;++i)r.appendBits((i&1)===0?236:17,8);if(r.getSize()!==n)throw new Jt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,a,o){if(i>=n)throw new Jt("Block ID too large");var s=e%n,c=n-s,f=Math.floor(e/n),d=f+1,p=Math.floor(r/n),g=p+1,y=f-p,b=d-g;if(y!==b)throw new Jt("EC bytes mismatch");if(n!==c+s)throw new Jt("RS blocks mismatch");if(e!==(p+y)*c+(g+b)*s)throw new Jt("Total bytes mismatch");i<c?(a[0]=p,o[0]=y):(a[0]=g,o[0]=b)},t.interleaveWithECBytes=function(e,r,n,i){var a,o,s,c;if(e.getSizeInBytes()!==n)throw new Jt("Number of bits and data bytes does not match");for(var f=0,d=0,p=0,g=new Array,y=0;y<i;++y){var b=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,y,b,w);var E=b[0],S=new Uint8Array(E);e.toBytes(8*f,S,0,E);var I=t.generateECBytes(S,w[0]);g.push(new KJ(S,I)),d=Math.max(d,E),p=Math.max(p,I.length),f+=b[0]}if(n!==f)throw new Jt("Data bytes does not match offset");for(var O=new gn,y=0;y<d;++y)try{for(var D=(a=void 0,V6(g)),k=D.next();!k.done;k=D.next()){var B=k.value,S=B.getDataBytes();y<S.length&&O.appendBits(S[y],8)}}catch(U){a={error:U}}finally{try{k&&!k.done&&(o=D.return)&&o.call(D)}finally{if(a)throw a.error}}for(var y=0;y<p;++y)try{for(var R=(s=void 0,V6(g)),N=R.next();!N.done;N=R.next()){var B=N.value,I=B.getErrorCorrectionBytes();y<I.length&&O.appendBits(I[y],8)}}catch(U){s={error:U}}finally{try{N&&!N.done&&(c=R.return)&&c.call(R)}finally{if(s)throw s.error}}if(r!==O.getSizeInBytes())throw new Jt("Interleaving error: "+r+" and "+O.getSizeInBytes()+" differ.");return O},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),a=0;a<n;a++)i[a]=e[a]&255;new Ok(vi.QR_CODE_FIELD_256).encode(i,r);for(var o=new Uint8Array(r),a=0;a<r;a++)o[a]=i[n+a];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new Jt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,r,n,i){switch(r){case er.NUMERIC:t.appendNumericBytes(e,n);break;case er.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case er.BYTE:t.append8BitBytes(e,n,i);break;case er.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Jt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getDigit(e.charAt(i));if(i+2<n){var o=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<n){var o=t.getDigit(e.charAt(i+1));r.appendBits(a*10+o,7),i+=2}else r.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Jt;if(i+1<n){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Jt;r.appendBits(a*45+o,11),i+=2}else r.appendBits(a,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=va.encode(e,n)}catch(c){throw new Jt(c)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=va.encode(e,Jr.SJIS)}catch(p){throw new Jt(p)}for(var i=n.length,a=0;a<i;a+=2){var o=n[a]&255,s=n[a+1]&255,c=o<<8&4294967295|s,f=-1;if(c>=33088&&c<=40956?f=c-33088:c>=57408&&c<=60351&&(f=c-49472),f===-1)throw new Jt("Invalid byte sequence");var d=(f>>8)*192+(f&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(er.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Jr.UTF8.getName(),t})();var XJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){XJ(e,t);function e(r,n,i,a,o,s,c,f){var d=t.call(this,s,c)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=i,d.left=a,d.top=o,a+s>n||o+c>i)throw new Le("Crop rectangle does not fit within image data.");return f&&d.reverseHorizontal(s,c),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Le("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Xt.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Xt.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<n;s++){var c=s*r;Xt.arraycopy(this.yuvData,o,a,c,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var c=s*r,f=0;f<r;f++){var d=a[o+f*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+f]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<n;a++,o+=this.dataWidth)for(var s=o+r/2,c=o,f=o+r-1;c<s;c++,f--){var d=i[c];i[c]=i[f],i[f]=d}},e.prototype.invert=function(){return new RA(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Dm);var YJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){YJ(e,t);function e(r,n,i,a,o,s,c){var f=t.call(this,n,i)||this;if(f.dataWidth=a,f.dataHeight=o,f.left=s,f.top=c,r.BYTES_PER_ELEMENT===4){for(var d=n*i,p=new Uint8ClampedArray(d),g=0;g<d;g++){var y=r[g],b=y>>16&255,w=y>>7&510,E=y&255;p[g]=(b+w+E)/4&255}f.luminances=p}else f.luminances=r;if(a===void 0&&(f.dataWidth=n),o===void 0&&(f.dataHeight=i),s===void 0&&(f.left=0),c===void 0&&(f.top=0),f.left+n>f.dataWidth||f.top+i>f.dataHeight)throw new Le("Crop rectangle does not fit within image data.");return f}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Le("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Xt.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Xt.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<n;s++){var c=s*r;Xt.arraycopy(this.luminances,o,a,c,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new RA(this)},e})(Dm);var QJ=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ZJ=(function(t){QJ(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e})(Jr),JJ=(function(){function t(){}return t.ISO_8859_1=Jr.ISO8859_1,t})(),dw,eee=301,tee=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=eee);return{LOG:t,ALOG:e}};dw=tee([],[]),dw.LOG;dw.ALOG;var H6;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(H6||(H6={}));var $6=129,Rk=230,ree=231,nee=235,iee=236,aee=237,oee=238,see=239,lee=240,H2=254,cee=254,q6="[)>05",G6="[)>06",W6="",kt=0,Tn=1,ei=2,Yr=3,fn=4,Bn=5,uee=(function(){function t(){}return t.prototype.getEncodingMode=function(){return kt},t.prototype.encode=function(e){var r=ja.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=ja.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Bn:e.writeCodeword(ree),e.signalEncoderChange(Bn);return;case Tn:e.writeCodeword(Rk),e.signalEncoderChange(Tn);return;case Yr:e.writeCodeword(oee),e.signalEncoderChange(Yr);break;case ei:e.writeCodeword(see),e.signalEncoderChange(ei);break;case fn:e.writeCodeword(lee),e.signalEncoderChange(fn);break;default:throw new Error("Illegal mode: "+i)}else ja.isExtendedASCII(n)?(e.writeCodeword(nee),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(ja.isDigit(e)&&ja.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t})(),fee=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Bn},t.prototype.encode=function(e){var r=new Ze;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=ja.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(kt);break}}var a=r.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var c=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||c)if(a<=249)r.setCharAt(0,ht.getCharAt(a));else if(a<=1555)r.setCharAt(0,ht.getCharAt(Math.floor(a/250)+249)),r.insert(1,ht.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var f=0,n=r.length();f<n;f++)e.writeCodeword(this.randomize255State(r.charAt(f).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t})(),kA=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Tn},t.prototype.encodeMaximal=function(e){for(var r=new Ze,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(i=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),c=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(c);var f=e.getSymbolInfo().getDataCapacity()-c,d=Math.floor(r.length()%3);(d===2&&f!==2||d===1&&(n>3||f!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(Rk),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Ze;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var c=new Ze;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,c,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,c,i);break}var f=r.length();if(f%3===0){var d=ja.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(kt);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var a=r.length(),o=r.toString().substring(0,a-i);r.setLengthToZero(),r.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(H2)}else if(o===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(H2),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(H2)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(kt)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,a=new Ze;return a.append(n),a.append(i),a.toString()},t})(),dee=(function(){function t(){}return t.prototype.getEncodingMode=function(){return fn},t.prototype.encode=function(e){for(var r=new Ze;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var o=ja.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(kt);break}}}r.append(ht.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),c=!e.hasMoreCharacters(),f=c&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(f=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}f?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(kt)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(ht.getCharAt(e-64)):ja.illegalCharacter(ht.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(a<<6)+o,c=s>>16&255,f=s>>8&255,d=s&255,p=new Ze;return p.append(c),r>=2&&p.append(f),r>=3&&p.append(d),p.toString()},t})(),hee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},St=(function(){function t(e,r,n,i,a,o,s,c){s===void 0&&(s=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=c}return t.lookup=function(e,r,n,i,a){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=pee(vee),f=c.next();!f.done;f=c.next()){var d=f.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(p){o={error:p}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),gee=(function(t){hee(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e})(St),vee=[new St(!1,3,5,8,8,1),new St(!1,5,7,10,10,1),new St(!0,5,7,16,6,1),new St(!1,8,10,12,12,1),new St(!0,10,11,14,6,2),new St(!1,12,12,14,14,1),new St(!0,16,14,24,10,1),new St(!1,18,14,16,16,1),new St(!1,22,18,18,18,1),new St(!0,22,18,16,10,2),new St(!1,30,20,20,20,1),new St(!0,32,24,16,14,2),new St(!1,36,24,22,22,1),new St(!1,44,28,24,24,1),new St(!0,49,28,22,14,2),new St(!1,62,36,14,14,4),new St(!1,86,42,16,16,4),new St(!1,114,48,18,18,4),new St(!1,144,56,20,20,4),new St(!1,174,68,22,22,4),new St(!1,204,84,24,24,4,102,42),new St(!1,280,112,14,14,16,140,56),new St(!1,368,144,16,16,16,92,36),new St(!1,456,192,18,18,16,114,48),new St(!1,576,224,20,20,16,144,56),new St(!1,696,272,22,22,16,174,68),new St(!1,816,336,24,24,16,136,56),new St(!1,1050,408,18,18,36,175,68),new St(!1,1304,496,20,20,36,163,62),new gee],mee=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new Ze,i=0,a=r.length;i<a;i++){var o=String.fromCharCode(r[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new Ze,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=St.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),yee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xee=(function(t){yee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Yr},e.prototype.encode=function(r){for(var n=new Ze;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var o=ja.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(kt);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):ja.illegalCharacter(ht.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(cee),r.getNewEncoding()<0&&r.signalEncoderChange(kt)},e})(kA),bee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_ee=(function(t){bee(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ei},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e})(kA),ja=(function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=$6+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new kA,s=[new uee,o,new _ee,new xee,new dee,new fee],c=new mee(e);c.setSymbolShape(r),c.setSizeConstraints(n,i),e.startsWith(q6)&&e.endsWith(W6)?(c.writeCodeword(iee),c.setSkipAtEnd(2),c.pos+=q6.length):e.startsWith(G6)&&e.endsWith(W6)&&(c.writeCodeword(aee),c.setSkipAtEnd(2),c.pos+=G6.length);var f=kt;for(a&&(o.encodeMaximal(c),f=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)s[f].encode(c),c.getNewEncoding()>=0&&(f=c.getNewEncoding(),c.resetEncoderSignal());var d=c.getCodewordCount();c.updateSymbolInfo();var p=c.getSymbolInfo().getDataCapacity();d<p&&f!==kt&&f!==Bn&&f!==fn&&c.writeCodeword("þ");var g=c.getCodewords();for(g.length()<p&&g.append($6);g.length()<p;)g.append(this.randomize253State(g.length()+1));return c.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===Yr&&i===Yr){for(var a=Math.min(r+3,e.length),o=r;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return kt}else if(n===fn&&i===fn){for(var a=Math.min(r+4,e.length),o=r;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return kt}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===kt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(r+a===e.length){en.fill(o,0),en.fill(s,0);var c=this.findMinimums(i,s,et.MAX_VALUE,o),f=this.getMinimumCount(o);if(s[kt]===c)return kt;if(f===1){if(o[Bn]>0)return Bn;if(o[fn]>0)return fn;if(o[ei]>0)return ei;if(o[Yr]>0)return Yr}return Tn}var d=e.charCodeAt(r+a);if(a++,this.isDigit(d)?i[kt]+=.5:this.isExtendedASCII(d)?(i[kt]=Math.ceil(i[kt]),i[kt]+=2):(i[kt]=Math.ceil(i[kt]),i[kt]++),this.isNativeC40(d)?i[Tn]+=2/3:this.isExtendedASCII(d)?i[Tn]+=8/3:i[Tn]+=4/3,this.isNativeText(d)?i[ei]+=2/3:this.isExtendedASCII(d)?i[ei]+=8/3:i[ei]+=4/3,this.isNativeX12(d)?i[Yr]+=2/3:this.isExtendedASCII(d)?i[Yr]+=13/3:i[Yr]+=10/3,this.isNativeEDIFACT(d)?i[fn]+=3/4:this.isExtendedASCII(d)?i[fn]+=17/4:i[fn]+=13/4,this.isSpecialB256(d)?i[Bn]+=4:i[Bn]++,a>=4){if(en.fill(o,0),en.fill(s,0),this.findMinimums(i,s,et.MAX_VALUE,o),s[kt]<this.min(s[Bn],s[Tn],s[ei],s[Yr],s[fn]))return kt;if(s[Bn]<s[kt]||s[Bn]+1<this.min(s[Tn],s[ei],s[Yr],s[fn]))return Bn;if(s[fn]+1<this.min(s[Bn],s[Tn],s[ei],s[Yr],s[kt]))return fn;if(s[ei]+1<this.min(s[Bn],s[Tn],s[fn],s[Yr],s[kt]))return ei;if(s[Yr]+1<this.min(s[Bn],s[Tn],s[fn],s[ei],s[kt]))return Yr;if(s[Tn]+1<this.min(s[kt],s[Bn],s[fn],s[ei])){if(s[Tn]<s[Yr])return Tn;if(s[Tn]===s[Yr]){for(var p=r+a+1;p<e.length;){var g=e.charCodeAt(p);if(this.isX12TermSep(g))return Yr;if(!this.isNativeX12(g))break;p++}return Tn}}}}},t.min=function(e,r,n,i,a){var o=Math.min(e,Math.min(r,Math.min(n,i)));return a===void 0?o:Math.min(o,a)},t.findMinimums=function(e,r,n,i){for(var a=0;a<6;a++){var o=r[a]=Math.ceil(e[a]);n>o&&(n=o,en.fill(i,0)),n===o&&(i[a]=i[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=et.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t})(),$2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K6=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return va.encode(e,this.charset)!=null}catch{return!1}},t})(),wee=(function(){function t(e,r,n){var i,a,o,s,c,f;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(L){return new K6(ZJ.forName(L))}),this.encoders=[];var d=[];d.push(new K6(JJ.ISO_8859_1));for(var p=r!=null&&r.name.startsWith("UTF"),g=0;g<e.length;g++){var y=!1;try{for(var b=(i=void 0,$2(d)),w=b.next();!w.done;w=b.next()){var E=w.value,S=e.charAt(g),I=S.charCodeAt(0);if(I===n||E.canEncode(S)){y=!0;break}}}catch(L){i={error:L}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}if(!y)try{for(var O=(o=void 0,$2(this.ENCODERS)),D=O.next();!D.done;D=O.next()){var E=D.value;if(E.canEncode(e.charAt(g))){d.push(E),y=!0;break}}}catch(L){o={error:L}}finally{try{D&&!D.done&&(s=O.return)&&s.call(O)}finally{if(o)throw o.error}}y||(p=!0)}if(d.length===1&&!p)this.encoders=[d[0]];else{this.encoders=[];var k=0;try{for(var B=$2(d),R=B.next();!R.done;R=B.next()){var E=R.value;this.encoders[k++]=E}}catch(L){c={error:L}}finally{try{R&&!R.done&&(f=B.return)&&f.call(B)}finally{if(c)throw c.error}}}var N=-1;if(r!=null){for(var g=0;g<this.encoders.length;g++)if(this.encoders[g]!=null&&r.name===this.encoders[g].name){N=g;break}}this.priorityEncoderIndex=N}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return va.encode(ht.getCharAt(e),this.encoders[r].name)},t})(),Eee=3,Aee=(function(){function t(e,r,n){this.fnc1=n;var i=new wee(e,r,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Ze,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,a,o){var s=e.charAt(i).charCodeAt(0),c=0,f=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(c=r.getPriorityEncoderIndex(),f=c+1);for(var d=c;d<f;d++)(s===o||r.canEncode(s,d))&&this.addEdge(n,i+1,new X6(s,r,d,a,o))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,a=new X6[i+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var o=1;o<=i;o++){for(var s=0;s<r.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,r,a,o,a[o][s],n);for(var s=0;s<r.length();s++)a[o-1][s]=null}for(var c=-1,f=et.MAX_VALUE,s=0;s<r.length();s++)if(a[i][s]!=null){var d=a[i][s];d.cachedTotalSize<f&&(f=d.cachedTotalSize,c=s)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var p=[],g=a[i][c];g!=null;){if(g.isFNC1())p.unshift(1e3);else for(var y=r.encode(g.c,g.encoderIndex),o=y.length-1;o>=0;o--)p.unshift(y[o]&255);var b=g.previous===null?0:g.previous.encoderIndex;b!==g.encoderIndex&&p.unshift(256+r.getECIValue(g.encoderIndex)),g=g.previous}for(var w=[],o=0;o<w.length;o++)w[o]=p[o];return w},t})(),X6=(function(){function t(e,r,n,i,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(o+=Eee),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),See=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();var Y6;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(Y6||(Y6={}));(function(t){See(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Aee);var Cee=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),Q6=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t})(),Tee=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),Iee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),jA=(function(t){Iee(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+et.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e})(Tee),Oee=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ree=(function(t){Oee(e,t);function e(r,n,i){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(jA);function Pee(t,e,r){return new Ree(t,e,r)}function Sh(t,e,r){return new jA(t,e,r)}var Dee=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Dl=0,lv=1,da=2,Pk=3,go=4,Nee=new jA(null,0,0),q2=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Mee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function kee(t){var e,r;try{for(var n=Mee(t),i=n.next();!i.done;i=n.next()){var a=i.value;en.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[Dl][go]=0,t[lv][go]=0,t[lv][Dl]=28,t[Pk][go]=0,t[da][go]=0,t[da][Dl]=15,t}var Dk=kee(en.createInt32Array(6,6)),jee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lee=(function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=q2[this.mode][e];i=Sh(i,a&65535,a>>16),n+=a>>16}var o=e===da?4:5;return i=Sh(i,r,o),new t(i,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===da?4:5;return n=Sh(n,Dk[this.mode][e],i),n=Sh(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===go||this.mode===da){var a=q2[n][Dl];r=Sh(r,a&65535,a>>16),i+=a>>16,n=Dl}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=Pee(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(q2[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new gn;try{for(var s=jee(i),c=s.next();!c.done;c=s.next()){var f=c.value;f.appendTo(o,e)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return ht.format("%s bits=%d bytes=%d",Dee[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(Nee,Dl,0,0),t})();function Bee(t){var e=ht.getCharCode(" "),r=ht.getCharCode("."),n=ht.getCharCode(",");t[Dl][e]=1;for(var i=ht.getCharCode("Z"),a=ht.getCharCode("A"),o=a;o<=i;o++)t[Dl][o]=o-a+2;t[lv][e]=1;for(var s=ht.getCharCode("z"),c=ht.getCharCode("a"),o=c;o<=s;o++)t[lv][o]=o-c+2;t[da][e]=1;for(var f=ht.getCharCode("9"),d=ht.getCharCode("0"),o=d;o<=f;o++)t[da][o]=o-d+2;t[da][n]=12,t[da][r]=13;for(var p=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],g=0;g<p.length;g++)t[Pk][ht.getCharCode(p[g])]=g;for(var y=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],g=0;g<y.length;g++)ht.getCharCode(y[g])>0&&(t[go][ht.getCharCode(y[g])]=g);return t}var G2=Bee(en.createInt32Array(5,256)),e1=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uee=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=ht.getCharCode(" "),r=ht.getCharCode(`
`),n=Q6.singletonList(Lee.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ht.getCharCode("\r"):a=o===r?2:0;break;case ht.getCharCode("."):a=o===e?3:0;break;case ht.getCharCode(","):a=o===e?4:0;break;case ht.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var s=Q6.min(n,function(c,f){return c.getBitCount()-f.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,a=[];try{for(var o=e1(e),s=o.next();!s.done;s=o.next()){var c=s.value;this.updateStateForChar(c,r,a)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,a=G2[e.getMode()][i]>0,o=null,s=0;s<=go;s++){var c=G2[s][i];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!a||s===e.getMode()||s===da){var f=o.latchAndAppend(s,c);n.push(f)}if(!a&&Dk[e.getMode()][s]>=0){var d=o.shiftAndAppend(s,c);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||G2[e.getMode()][i]===0){var p=e.addBinaryShiftChar(r);n.push(p)}},t.updateStateListForPair=function(e,r,n){var i,a,o=[];try{for(var s=e1(e),c=s.next();!c.done;c=s.next()){var f=c.value;this.updateStateForPair(f,r,n,o)}}catch(d){i={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,i){var a=e.endBinaryShift(r);if(i.push(a.latchAndAppend(go,n)),e.getMode()!==go&&i.push(a.shiftAndAppend(go,n)),n===3||n===4){var o=a.latchAndAppend(da,16-n).latchAndAppend(da,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,a,o=[];try{for(var s=e1(e),c=s.next();!c.done;c=s.next()){var f=c.value,d=!0,p=function(E){if(E.isBetterThanOrEqualTo(f))return d=!1,"break";f.isBetterThanOrEqualTo(E)&&(o=o.filter(function(S){return S!==E}))};try{for(var g=(i=void 0,e1(o)),y=g.next();!y.done;y=g.next()){var b=y.value,w=p(b);if(w==="break")break}}catch(E){i={error:E}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}d&&o.push(f)}}catch(E){r={error:E}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t})(),zee=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new Uee(e).encode(),a=et.truncDivision(i.getSize()*r,100)+11,o=i.getSize()+a,s,c,f,d,p;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,c=Math.abs(n),c>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Le(ht.format("Illegal value %s for layers",n));f=t.totalBitsInLayer(c,s),d=t.WORD_SIZE[c];var g=f-f%d;if(p=t.stuffBits(i,d),p.getSize()+a>g)throw new Le("Data to large for user specified layer");if(s&&p.getSize()>d*64)throw new Le("Data to large for user specified layer")}else{d=0,p=null;for(var y=0;;y++){if(y>t.MAX_NB_BITS)throw new Le("Data too large for an Aztec code");if(s=y<=3,c=s?y+1:y,f=t.totalBitsInLayer(c,s),!(o>f)){(p==null||d!==t.WORD_SIZE[c])&&(d=t.WORD_SIZE[c],p=t.stuffBits(i,d));var g=f-f%d;if(!(s&&p.getSize()>d*64)&&p.getSize()+a<=g)break}}}var b=t.generateCheckWords(p,f,d),w=p.getSize()/d,E=t.generateModeMessage(s,c,w),S=(s?11:14)+c*4,I=new Int32Array(S),O;if(s){O=S;for(var y=0;y<I.length;y++)I[y]=y}else{O=S+1+2*et.truncDivision(et.truncDivision(S,2)-1,15);for(var D=et.truncDivision(S,2),k=et.truncDivision(O,2),y=0;y<D;y++){var B=y+et.truncDivision(y,15);I[D-y-1]=k-B-1,I[D+y]=k+B+1}}for(var R=new So(O),y=0,N=0;y<c;y++){for(var L=(c-y)*4+(s?9:12),U=0;U<L;U++)for(var j=U*2,V=0;V<2;V++)b.get(N+j+V)&&R.set(I[y*2+V],I[y*2+U]),b.get(N+L*2+j+V)&&R.set(I[y*2+U],I[S-1-y*2-V]),b.get(N+L*4+j+V)&&R.set(I[S-1-y*2-V],I[S-1-y*2-U]),b.get(N+L*6+j+V)&&R.set(I[S-1-y*2-U],I[y*2+V]);N+=L*8}if(t.drawModeMessage(R,s,O,E),s)t.drawBullsEye(R,et.truncDivision(O,2),5);else{t.drawBullsEye(R,et.truncDivision(O,2),7);for(var y=0,U=0;y<et.truncDivision(S,2)-1;y+=15,U+=16)for(var V=et.truncDivision(O,2)&1;V<O;V+=2)R.set(et.truncDivision(O,2)-U,V),R.set(et.truncDivision(O,2)+U,V),R.set(V,et.truncDivision(O,2)-U),R.set(V,et.truncDivision(O,2)+U)}var F=new Cee;return F.setCompact(s),F.setSize(O),F.setLayers(c),F.setCodeWords(w),F.setMatrix(R),F},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var a=r-i;a<=r+i;a++)e.set(a,r-i),e.set(a,r+i),e.set(r-i,a),e.set(r+i,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new gn;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var a=et.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+et.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var i,a,o=e.getSize()/n,s=new Ok(t.getGF(n)),c=et.truncDivision(r,n),f=t.bitsToWords(e,n,c);s.encode(f,c-o);var d=r%n,p=new gn;p.appendBits(0,d);try{for(var g=zee(Array.from(f)),y=g.next();!y.done;y=g.next()){var b=y.value;p.appendBits(b,n)}}catch(w){i={error:w}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}return p},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),a,o;for(a=0,o=e.getSize()/r;a<o;a++){for(var s=0,c=0;c<r;c++)s|=e.get(a*r+c)?1<<r-c-1:0;i[a]=s}return i},t.getGF=function(e){switch(e){case 4:return vi.AZTEC_PARAM;case 6:return vi.AZTEC_DATA_6;case 8:return vi.AZTEC_DATA_8;case 10:return vi.AZTEC_DATA_10;case 12:return vi.AZTEC_DATA_12;default:throw new Le("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new gn,i=e.getSize(),a=(1<<r)-2,o=0;o<i;o+=r){for(var s=0,c=0;c<r;c++)(o+c>=i||e.get(o+c))&&(s|=1<<r-1-c);(s&a)===a?(n.appendBits(s&a,r),o--):(s&a)===0?(n.appendBits(s|1,r),o--):n.appendBits(s,r)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const Nk="YOUR_RAKUTEN_APP_ID_HERE",Fee="b72c14dc75bcde18fb7d3628bf7e92b7";async function Vee(t){console.log(`[商品検索] JANコード: ${t}`);try{const e=await Hee(t);if(e)return console.log("[商品検索] 楽天市場APIで商品発見"),e}catch(e){console.warn("[商品検索] 楽天市場API失敗:",e)}try{const e=await $ee(t);if(e)return console.log("[商品検索] 楽天商品APIで商品発見"),e}catch(e){console.warn("[商品検索] 楽天商品API失敗:",e)}try{const e=await qee(t);if(e)return console.log("[商品検索] JAN Code Lookup APIで商品発見"),e}catch(e){console.warn("[商品検索] JAN Code Lookup API失敗:",e)}try{const e=await Gee(t);if(e)return console.log("[商品検索] Open Food Facts APIで商品発見"),e}catch(e){console.warn("[商品検索] Open Food Facts API失敗:",e)}return console.warn("[商品検索] すべてのAPIで商品が見つかりませんでした。モックデータを使用します。"),Wee(t)}async function Hee(t){const e=new URL("https://app.rakuten.co.jp/services/api/IchibaItem/Search/20220601");e.searchParams.set("applicationId",Nk),e.searchParams.set("keyword",t),e.searchParams.set("hits","1");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.Items||n.Items.length===0)return null;const i=n.Items[0].Item;return{barcode:t,name:i.itemName,price:i.itemPrice,manufacturer:i.shopName||"",imageUrl:i.mediumImageUrls?.[0]?.imageUrl||"",source:"rakuten_ichiba"}}async function $ee(t){const e=new URL("https://app.rakuten.co.jp/services/api/Product/Search/20170426");e.searchParams.set("applicationId",Nk),e.searchParams.set("keyword",t),e.searchParams.set("hits","1");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.Products||n.Products.length===0)return null;const i=n.Products[0].Product;return{barcode:t,name:i.productName,price:i.minPrice||0,manufacturer:i.makerName||"",imageUrl:i.mediumImageUrl||"",source:"rakuten_product"}}async function qee(t){const e=new URL("https://api.jancodelookup.com/");e.searchParams.set("appId",Fee),e.searchParams.set("query",t),e.searchParams.set("type","code");const r=await fetch(e.toString());if(!r.ok)return null;const n=await r.json();if(!n.product||n.product.length===0)return null;const i=n.product[0];return{barcode:t,name:i.itemName||"",price:0,manufacturer:i.makerName||i.brandName||"",imageUrl:i.itemImageUrl||"",source:"jancode_lookup"}}async function Gee(t){const e=`https://world.openfoodfacts.org/api/v0/product/${t}.json`,r=await fetch(e);if(!r.ok)return null;const n=await r.json();if(n.status!==1||!n.product)return null;const i=n.product;return{barcode:t,name:i.product_name||i.product_name_ja||"",calories:i.nutriments?.["energy-kcal_100g"],price:0,manufacturer:i.brands||"",imageUrl:i.image_url||"",source:"openfoodfacts"}}function Wee(t){const r={"4902102072453":{name:"明治おいしい牛乳 900ml",price:258,calories:67,manufacturer:"明治",imageUrl:""},"4901777313989":{name:"サントリー天然水 2L",price:138,calories:0,manufacturer:"サントリー",imageUrl:""},"4902430479318":{name:"ポカリスエット 500ml",price:148,calories:125,manufacturer:"大塚製薬",imageUrl:""}}[t];return r?{barcode:t,...r,source:"mock"}:{barcode:t,name:`商品 (${t})`,price:0,manufacturer:"不明",source:"mock"}}const Kee=({onProductFound:t,onClose:e})=>{const r=C.useRef(null),[n,i]=C.useState(null),[a,o]=C.useState(null),[s,c]=C.useState(!1),f=C.useRef(null);C.useEffect(()=>(d(),()=>{p()}),[]);const d=async()=>{try{i(null);const y=new VJ;f.current=y;const b=await y.listVideoInputDevices();if(b.length===0)throw new Error("カメラが見つかりません");const w=b.find(S=>{const I=S.label.toLowerCase();return I.includes("back")||I.includes("rear")||I.includes("environment")||I.includes("camera")&&I.includes("0")}),E=w?w.deviceId:b[b.length-1].deviceId;console.log("使用するカメラ:",w?w.label:b[b.length-1].label),y.decodeFromVideoDevice(E,r.current,async(S,I)=>{if(S&&!s){const O=S.getText();if(O===a)return;o(O),c(!0);try{const D=await Vee(O);D?(t(D),p()):(i(`商品情報が見つかりませんでした: ${O}`),c(!1),setTimeout(()=>{i(null),o(null)},3e3))}catch(D){console.error("商品情報取得エラー:",D),i("商品情報の取得に失敗しました"),c(!1),setTimeout(()=>{i(null),o(null)},3e3)}}I&&!(I instanceof se)&&console.error("スキャンエラー:",I)})}catch(y){console.error("カメラ起動エラー:",y),i(y instanceof Error?y.message:"カメラの起動に失敗しました")}},p=()=>{f.current&&(f.current.reset(),f.current=null)},g=()=>{p(),e()};return m.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",zIndex:9999,display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{padding:"16px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h2",{style:{margin:0,fontSize:"1.2rem",fontWeight:600},children:"バーコードスキャン"}),m.jsx("button",{onClick:g,style:{background:"transparent",border:"none",color:"#fff",fontSize:"24px",cursor:"pointer",padding:"4px"},children:"✕"})]}),m.jsxs("div",{style:{flex:1,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[m.jsx("video",{ref:r,style:{width:"100%",height:"100%",objectFit:"cover"}}),m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"300px",height:"150px",border:"2px solid #22c55e",borderRadius:"8px",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)"}}),s&&m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.8)",color:"#fff",padding:"20px 32px",borderRadius:"12px",fontSize:"1rem",fontWeight:600},children:"商品情報を取得中..."}),n&&m.jsx("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(239, 68, 68, 0.95)",color:"#fff",padding:"12px 24px",borderRadius:"8px",fontSize:"0.9rem",maxWidth:"90%",textAlign:"center"},children:n})]}),m.jsx("div",{style:{padding:"16px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",textAlign:"center"},children:m.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#999"},children:"バーコードを枠内に合わせてください"})})]})},Xee=({product:t,onAdded:e,onNavigateToStock:r})=>{const{addIntake:n}=Po(),{addStock:i}=No(),[a,o]=C.useState(""),[s,c]=C.useState(t.price?.toString()||""),[f,d]=C.useState("7"),p=()=>{if(!a){alert("カロリーを入力してください");return}if(!s){alert("金額を入力してください");return}n({name:t.name,calories:Number(a),price:Number(s)}),alert("食事記録に追加しました！"),e()},g=()=>{if(!f){alert("賞味期限までの日数を入力してください");return}i({name:t.name,quantity:1,daysRemaining:Number(f),price:s?Number(s):void 0}),r?(e(),setTimeout(()=>{r()},100)):(alert("在庫管理に追加しました！"),e())};return m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Jv,{size:24,color:"#10b981"}),"商品情報を取得しました"]}),m.jsxs("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"12px",marginBottom:"20px"},children:[m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"商品名"}),m.jsx("div",{style:{fontWeight:600,fontSize:"1.05rem"},children:t.name})]}),t.manufacturer&&m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"メーカー"}),m.jsx("div",{style:{fontWeight:500},children:t.manufacturer})]}),m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"バーコード"}),m.jsx("div",{style:{fontFamily:"monospace",color:"#666"},children:t.barcode})]}),t.price&&m.jsxs("div",{children:[m.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"4px"},children:"価格（参考）"}),m.jsxs("div",{style:{fontWeight:600,color:"var(--primary)"},children:["¥",t.price.toLocaleString()]})]}),m.jsxs("div",{style:{marginTop:"12px",padding:"8px 12px",background:t.source==="rakuten_ichiba"||t.source==="rakuten_product"?"#bf0000":t.source==="jancode_lookup"?"#3b82f6":"#10b981",color:"#fff",borderRadius:"6px",fontSize:"0.75rem",fontWeight:500,display:"inline-block"},children:[t.source==="rakuten_ichiba"&&"楽天市場",t.source==="rakuten_product"&&"楽天商品検索",t.source==="jancode_lookup"&&"JAN Code Lookup",t.source==="openfoodfacts"&&"Open Food Facts",t.source==="mock"&&"モックデータ"]})]}),m.jsxs("div",{style:{marginBottom:"24px"},children:[m.jsxs("h4",{style:{marginBottom:"12px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx(lE,{size:18}),"食事記録に追加"]}),m.jsx("label",{children:"カロリー (kcal)"}),m.jsx("input",{type:"number",value:a,onChange:y=>o(y.target.value),placeholder:"例: 200"}),m.jsx("label",{children:"金額 (円)"}),m.jsx("input",{type:"number",value:s,onChange:y=>c(y.target.value),placeholder:"例: 150"}),m.jsx("button",{className:"submit",onClick:p,style:{background:"#3b82f6"},children:"食事記録に追加"})]}),m.jsxs("div",{children:[m.jsxs("h4",{style:{marginBottom:"12px",fontSize:"1rem",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx(If,{size:18}),"在庫管理に追加"]}),m.jsx("label",{children:"賞味期限までの日数"}),m.jsx("input",{type:"number",value:f,onChange:y=>d(y.target.value),placeholder:"例: 7"}),m.jsx("button",{className:"submit",onClick:g,style:{background:"#10b981"},children:r?"在庫管理に追加して画面移動":"在庫管理に追加"})]}),m.jsx("button",{onClick:e,style:{marginTop:"16px",width:"100%",padding:"12px",background:"transparent",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"#666"},children:"キャンセル"})]})},Yee=({onReceiptScanned:t,onClose:e})=>{const r=C.useRef(null),n=C.useRef(null),i=C.useRef(null),[a,o]=C.useState(!1),[s,c]=C.useState(null),[f,d]=C.useState(null),p=async()=>{try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});r.current&&(r.current.srcObject=w,d(w))}catch(w){console.error("カメラアクセスエラー:",w),c("カメラにアクセスできません。ファイル選択をお試しください。")}};Hn.useEffect(()=>(p(),()=>{f&&f.getTracks().forEach(w=>w.stop())}),[]);const g=async()=>{if(!(!r.current||!n.current)){o(!0),c(null);try{const w=r.current,E=n.current,S=E.getContext("2d");if(!S)throw new Error("Canvas context が取得できません");E.width=w.videoWidth,E.height=w.videoHeight,S.drawImage(w,0,0);const I=await new Promise((k,B)=>{E.toBlob(R=>{R?k(R):B(new Error("Blob変換に失敗しました"))},"image/jpeg",.95)}),O=new File([I],"receipt.jpg",{type:"image/jpeg"}),D=await v6(O);f&&f.getTracks().forEach(k=>k.stop()),t(D)}catch(w){console.error("OCRエラー:",w),c(w.message||"レシートの読み取りに失敗しました")}finally{o(!1)}}},y=async w=>{const E=w.target.files?.[0];if(E){o(!0),c(null);try{const S=await v6(E);f&&f.getTracks().forEach(I=>I.stop()),t(S)}catch(S){console.error("OCRエラー:",S),c(S.message||"レシートの読み取りに失敗しました")}finally{o(!1)}}},b=()=>{f&&f.getTracks().forEach(w=>w.stop()),e()};return m.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"#000",zIndex:1e3,display:"flex",flexDirection:"column"},children:[m.jsxs("div",{style:{background:"rgba(0,0,0,0.8)",padding:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("h3",{style:{color:"white",margin:0},children:"レシートをスキャン"}),m.jsx("button",{onClick:b,style:{background:"transparent",border:"none",color:"white",cursor:"pointer",padding:"8px"},disabled:a,children:m.jsx(fs,{size:24})})]}),m.jsxs("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:[m.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}),m.jsx("canvas",{ref:n,style:{display:"none"}}),m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"60%",border:"2px dashed rgba(255, 255, 255, 0.8)",borderRadius:"8px",pointerEvents:"none"},children:m.jsx("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.7)",color:"white",padding:"8px 16px",borderRadius:"4px",fontSize:"14px",whiteSpace:"nowrap"},children:"レシートを枠内に収めてください"})}),s&&m.jsx("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"#ef4444",color:"white",padding:"12px 20px",borderRadius:"8px",maxWidth:"80%",textAlign:"center"},children:s})]}),m.jsxs("div",{style:{background:"rgba(0,0,0,0.8)",padding:"20px",display:"flex",justifyContent:"center",gap:"16px"},children:[m.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:y,style:{display:"none"}}),m.jsxs("button",{onClick:()=>i.current?.click(),disabled:a,style:{background:"#6366f1",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px",opacity:a?.5:1},children:[m.jsx($z,{size:20}),"ファイル選択"]}),m.jsx("button",{onClick:g,disabled:a,style:{background:"#10b981",color:"white",border:"none",padding:"16px 32px",borderRadius:"50%",cursor:"pointer",fontSize:"18px",fontWeight:"bold",opacity:a?.5:1,width:"80px",height:"80px",display:"flex",alignItems:"center",justifyContent:"center"},children:a?"...":m.jsx(rp,{size:32})})]})]})},Qee=({result:t,onClose:e})=>{const{addExpense:r}=Do(),[n,i]=C.useState(t.items),[a,o]=C.useState(null),[s,c]=C.useState(""),[f,d]=C.useState(""),p=n.reduce((O,D)=>O+D.price*(D.quantity||1),0),g=O=>{const D=n[O];o(O),c(D.name),d(D.price.toString())},y=()=>{if(a===null)return;const O=parseInt(f,10);if(isNaN(O)||O<=0){alert("正しい金額を入力してください");return}const D=[...n];D[a]={...D[a],name:s.trim(),price:O},i(D),o(null),c(""),d("")},b=()=>{o(null),c(""),d("")},w=O=>{if(window.confirm("この商品を削除しますか？")){const D=n.filter((k,B)=>B!==O);i(D)}},E=()=>{const O=window.prompt("商品名を入力してください");if(!O||!O.trim())return;const D=window.prompt("金額を入力してください");if(!D)return;const k=parseInt(D,10);if(isNaN(k)||k<=0){alert("正しい金額を入力してください");return}i([...n,{name:O.trim(),price:k,quantity:1}])},S=()=>{if(n.length===0){alert("商品が1つもありません");return}if(!window.confirm(`${n.length}個の商品を家計簿に登録しますか？
合計金額: ¥${p.toLocaleString()}`))return;const O=new Date().toISOString();n.forEach(D=>{const k=D.quantity||1;for(let B=0;B<k;B++)r({category:"food",amount:D.price,memo:D.name,date:t.date||O})}),alert("家計簿に登録しました！"),e()},I=O=>new Intl.NumberFormat("ja-JP").format(O);return m.jsxs("div",{className:"card",children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px",margin:0},children:[m.jsx(uD,{size:20}),"レシート内容"]}),m.jsxs("button",{onClick:E,style:{background:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"4px"},children:[m.jsx(k1,{size:18}),"追加"]})]}),m.jsxs("div",{style:{background:"var(--background)",padding:"12px",borderRadius:"8px",marginBottom:"16px",fontSize:"14px"},children:[t.storeName&&m.jsxs("div",{style:{marginBottom:"4px"},children:[m.jsx("strong",{children:"店舗:"})," ",t.storeName]}),t.date&&m.jsxs("div",{children:[m.jsx("strong",{children:"日付:"})," ",t.date]})]}),n.length===0?m.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"商品が検出されませんでした。「追加」ボタンから手動で追加してください。"}):m.jsx("div",{style:{marginBottom:"16px"},children:n.map((O,D)=>m.jsx("div",{style:{padding:"12px",borderBottom:D<n.length-1?"1px solid var(--border)":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:a===D?m.jsxs("div",{style:{flex:1,display:"flex",gap:"8px",alignItems:"center"},children:[m.jsx("input",{value:s,onChange:k=>c(k.target.value),placeholder:"商品名",style:{flex:1,padding:"6px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"14px"}}),m.jsx("input",{value:f,onChange:k=>d(k.target.value),type:"number",placeholder:"金額",style:{width:"80px",padding:"6px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"14px"}}),m.jsx("button",{onClick:y,style:{background:"#10b981",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:m.jsx(sE,{size:16})}),m.jsx("button",{onClick:b,style:{background:"#6b7280",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"×"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:O.name}),O.quantity&&O.quantity>1&&m.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["数量: ",O.quantity,"個"]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[m.jsxs("span",{style:{fontSize:"16px",fontWeight:"bold",color:"var(--danger)"},children:["¥",I(O.price*(O.quantity||1))]}),m.jsx("button",{onClick:()=>g(D),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",color:"var(--primary)"},children:m.jsx(vD,{size:18})}),m.jsx("button",{onClick:()=>w(D),style:{background:"transparent",border:"none",cursor:"pointer",padding:"4px",color:"#ef4444"},children:m.jsx(Yf,{size:18})})]})]})},D))}),m.jsxs("div",{style:{background:"var(--background)",padding:"16px",borderRadius:"8px",marginBottom:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:"合計"}),m.jsxs("span",{style:{fontSize:"24px",fontWeight:"bold",color:"var(--danger)"},children:["¥",I(p)]})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[m.jsx("button",{onClick:e,style:{background:"var(--border)",color:"var(--text)",border:"none",padding:"12px",borderRadius:"8px",cursor:"pointer",fontWeight:500},children:"キャンセル"}),m.jsx("button",{onClick:S,className:"submit",disabled:n.length===0,style:{opacity:n.length===0?.5:1},children:"家計簿に登録"})]}),m.jsxs("details",{style:{marginTop:"16px"},children:[m.jsx("summary",{style:{cursor:"pointer",fontSize:"12px",color:"var(--text-secondary)"},children:"OCR生テキストを表示"}),m.jsx("pre",{style:{marginTop:"8px",padding:"12px",background:"var(--background)",borderRadius:"4px",fontSize:"11px",overflow:"auto",maxHeight:"200px",whiteSpace:"pre-wrap"},children:t.rawText})]})]})},Zee=({onNavigateToStock:t})=>{const[e,r]=C.useState("select"),[n,i]=C.useState(!1),[a,o]=C.useState(null),[s,c]=C.useState(null),f=()=>{r("barcode"),i(!0),o(null)},d=()=>{r("receipt"),i(!0),c(null)},p=E=>{o(E),i(!1)},g=E=>{c(E),i(!1)},y=()=>{o(null),r("select")},b=()=>{c(null),r("select")},w=()=>{r("select"),i(!1),o(null),c(null)};return m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"スキャン"}),e==="select"&&!n&&!a&&!s&&m.jsx(m.Fragment,{children:m.jsxs("div",{className:"card",children:[m.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(rp,{size:20}),"スキャンモードを選択"]}),m.jsx("p",{style:{color:"#666",marginBottom:"20px",lineHeight:"1.6"},children:"バーコードまたはレシートをスキャンできます"}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[m.jsxs("button",{onClick:f,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"24px 16px",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",fontWeight:500,fontSize:"16px"},children:[m.jsx(Lz,{size:48}),m.jsx("span",{children:"バーコード"}),m.jsx("span",{style:{fontSize:"12px",opacity:.9},children:"JANコード"})]}),m.jsxs("button",{onClick:d,style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",border:"none",padding:"24px 16px",borderRadius:"12px",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",fontWeight:500,fontSize:"16px"},children:[m.jsx(uD,{size:48}),m.jsx("span",{children:"レシート"}),m.jsx("span",{style:{fontSize:"12px",opacity:.9},children:"OCR読み取り"})]})]})]})}),e==="barcode"&&n&&m.jsx(Kee,{onProductFound:p,onClose:w}),e==="barcode"&&a&&m.jsx(Xee,{product:a,onAdded:y,onNavigateToStock:t}),e==="receipt"&&n&&m.jsx(Yee,{onReceiptScanned:g,onClose:w}),e==="receipt"&&s&&m.jsx(Qee,{result:s,onClose:b})]})};function Z6(t,e,r){return t.filter(n=>{const i=new Date(n.date);return i.getFullYear()===e&&i.getMonth()+1===r})}function J6(t,e,r,n){const i=Z6(r,t,e),a=Z6(n,t,e),o=i.reduce((d,p)=>d+p.calories,0),s=i.reduce((d,p)=>d+(p.price||0),0),c=a.reduce((d,p)=>d+p.amount,0),f={};return a.forEach(d=>{f[d.category]=(f[d.category]||0)+d.amount}),{year:t,month:e,intakes:{count:i.length,totalCalories:o,avgCalories:i.length>0?o/i.length:0,totalPrice:s},expenses:{count:a.length,total:c,byCategory:f}}}function Jee(t,e,r,n){const i=J6(t,e,r,n);let a=t,o=e-1;o===0&&(o=12,a-=1);const s=J6(a,o,r,n),c=(f,d)=>d===0?f>0?100:0:(f-d)/d*100;return{current:i,previous:s,changes:{intakesCount:c(i.intakes.count,s.intakes.count),totalCalories:c(i.intakes.totalCalories,s.intakes.totalCalories),avgCalories:c(i.intakes.avgCalories,s.intakes.avgCalories),totalExpenses:c(i.expenses.total,s.expenses.total)}}}function ete(t){const{current:e,previous:r,changes:n}=t;return`以下のユーザーの月次健康・家計データを分析し、3〜5つの具体的な改善提案をしてください。

【今月のデータ（${e.year}年${e.month}月）】
- 食事記録: ${e.intakes.count}回
- 総カロリー: ${e.intakes.totalCalories.toLocaleString()}kcal
- 平均カロリー: ${Math.round(e.intakes.avgCalories)}kcal/食
- 食費: ¥${e.intakes.totalPrice.toLocaleString()}
- 総支出: ¥${e.expenses.total.toLocaleString()}

【先月のデータ（${r.year}年${r.month}月）】
- 食事記録: ${r.intakes.count}回
- 総カロリー: ${r.intakes.totalCalories.toLocaleString()}kcal
- 平均カロリー: ${Math.round(r.intakes.avgCalories)}kcal/食
- 総支出: ¥${r.expenses.total.toLocaleString()}

【先月比の変化】
- 食事記録回数: ${n.intakesCount>0?"+":""}${n.intakesCount.toFixed(1)}%
- 総カロリー: ${n.totalCalories>0?"+":""}${n.totalCalories.toFixed(1)}%
- 平均カロリー: ${n.avgCalories>0?"+":""}${n.avgCalories.toFixed(1)}%
- 総支出: ${n.totalExpenses>0?"+":""}${n.totalExpenses.toFixed(1)}%

【お願い】
1. データの傾向を簡潔に分析してください
2. 健康面での改善提案を2〜3点
3. 家計面での改善提案を1〜2点
4. 具体的で実行可能なアドバイスをお願いします
5. 日本語で、親しみやすくわかりやすい表現で回答してください`}function tte(){const{intakes:t}=Po(),{expenses:e}=Do(),r=new Date,[n,i]=C.useState(r.getFullYear()),[a,o]=C.useState(r.getMonth()+1),[s,c]=C.useState(null),[f,d]=C.useState(""),[p,g]=C.useState(!1);C.useEffect(()=>{const D=Jee(n,a,t,e);c(D)},[n,a,t,e]);const y=async()=>{if(s){g(!0);try{const D=ete(s),k=await IY(D);d(k)}catch(D){console.error("AI提案生成エラー:",D),alert("AI提案の生成に失敗しました")}finally{g(!1)}}},b=()=>{a===1?(i(n-1),o(12)):o(a-1),d("")},w=()=>{a===12?(i(n+1),o(1)):o(a+1),d("")},E=D=>{if(D===0)return m.jsx("span",{className:"change-neutral",children:"±0%"});const k=D>0?m.jsx(oE,{}):m.jsx(Mz,{}),B=D>0?"change-up":"change-down";return m.jsxs("span",{className:`change ${B}`,children:[k," ",D>0?"+":"",D.toFixed(1),"%"]})};if(!s)return m.jsx("div",{className:"card",children:"データを読み込み中..."});const{current:S,previous:I,changes:O}=s;return m.jsx("div",{className:"monthly-report",children:m.jsxs("div",{className:"card",children:[m.jsxs("div",{className:"report-header",children:[m.jsx("h3",{children:"📊 月次レポート"}),m.jsxs("div",{className:"month-selector",children:[m.jsx("button",{className:"month-nav-btn",onClick:b,children:"◀"}),m.jsxs("span",{className:"current-month",children:[n,"年",a,"月"]}),m.jsx("button",{className:"month-nav-btn",onClick:w,children:"▶"})]})]}),m.jsxs("div",{className:"report-section",children:[m.jsx("h4",{children:"今月の記録"}),m.jsxs("div",{className:"stats-grid",children:[m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"食事記録"}),m.jsxs("div",{className:"stat-value",children:[S.intakes.count,"回"]}),E(O.intakesCount)]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"平均カロリー"}),m.jsxs("div",{className:"stat-value",children:[Math.round(S.intakes.avgCalories),"kcal"]}),E(O.avgCalories)]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"総カロリー"}),m.jsxs("div",{className:"stat-value",children:[S.intakes.totalCalories.toLocaleString(),"kcal"]}),E(O.totalCalories)]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("div",{className:"stat-label",children:"総支出"}),m.jsxs("div",{className:"stat-value",children:["¥",S.expenses.total.toLocaleString()]}),E(O.totalExpenses)]})]})]}),m.jsxs("div",{className:"report-section",children:[m.jsxs("h4",{children:["先月（",I.year,"年",I.month,"月）との比較"]}),m.jsxs("div",{className:"comparison-grid",children:[m.jsxs("div",{className:"comparison-item",children:[m.jsx("div",{className:"comparison-label",children:"食事記録"}),m.jsxs("div",{className:"comparison-values",children:[m.jsxs("span",{className:"prev-value",children:[I.intakes.count,"回"]}),m.jsx(b2,{}),m.jsxs("span",{className:"curr-value",children:[S.intakes.count,"回"]})]})]}),m.jsxs("div",{className:"comparison-item",children:[m.jsx("div",{className:"comparison-label",children:"平均カロリー"}),m.jsxs("div",{className:"comparison-values",children:[m.jsxs("span",{className:"prev-value",children:[Math.round(I.intakes.avgCalories),"kcal"]}),m.jsx(b2,{}),m.jsxs("span",{className:"curr-value",children:[Math.round(S.intakes.avgCalories),"kcal"]})]})]}),m.jsxs("div",{className:"comparison-item",children:[m.jsx("div",{className:"comparison-label",children:"総支出"}),m.jsxs("div",{className:"comparison-values",children:[m.jsxs("span",{className:"prev-value",children:["¥",I.expenses.total.toLocaleString()]}),m.jsx(b2,{}),m.jsxs("span",{className:"curr-value",children:["¥",S.expenses.total.toLocaleString()]})]})]})]})]}),m.jsxs("div",{className:"report-section",children:[m.jsxs("h4",{children:[m.jsx(j1,{size:20,style:{marginRight:"8px"}}),"AI改善提案"]}),f?m.jsxs("div",{className:"ai-suggestions",children:[m.jsx("div",{className:"suggestions-content",children:f}),m.jsx("button",{className:"submit",onClick:y,disabled:p,style:{marginTop:"12px"},children:"再生成"})]}):m.jsx("button",{className:"submit",onClick:y,disabled:p||S.intakes.count===0,style:{width:"100%"},children:p?"提案を生成中...":"AI改善提案を生成"}),S.intakes.count===0&&m.jsx("p",{className:"no-data-message",children:"データがありません。食事記録を追加してください。"})]})]})})}function Mk(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Mk(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function bt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Mk(t))&&(n&&(n+=" "),n+=e);return n}var W2={},K2={},e8;function rte(){return e8||(e8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(K2)),K2}var X2={},t8;function kk(){return t8||(t8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(X2)),X2}var Y2={},r8;function LA(){return r8||(r8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}t.toKey=e})(Y2)),Y2}var Q2={},Z2={},n8;function nte(){return n8||(n8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(Z2)),Z2}var i8;function BA(){return i8||(i8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nte(),r=LA();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],o=i.length;if(o===0)return a;let s=0,c="",f="",d=!1;for(i.charCodeAt(0)===46&&(a.push(""),s++);s<o;){const p=i[s];f?p==="\\"&&s+1<o?(s++,c+=i[s]):p===f?f="":c+=p:d?p==='"'||p==="'"?f=p:p==="]"?(d=!1,a.push(c),c=""):c+=p:p==="["?(d=!0,c&&(a.push(c),c="")):p==="."?c&&(a.push(c),c=""):c+=p,s++}return c&&a.push(c),a}t.toPath=n})(Q2)),Q2}var a8;function UA(){return a8||(a8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rte(),r=kk(),n=LA(),i=BA();function a(s,c,f){if(s==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const d=s[c];return d===void 0?r.isDeepKey(c)?a(s,i.toPath(c),f):f:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=s[c];return d===void 0?f:d}default:{if(Array.isArray(c))return o(s,c,f);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const d=s[c];return d===void 0?f:d}}}function o(s,c,f){if(c.length===0)return f;let d=s;for(let p=0;p<c.length;p++){if(d==null||e.isUnsafeProperty(c[p]))return f;d=d[c[p]]}return d===void 0?f:d}t.get=a})(W2)),W2}var J2,o8;function ite(){return o8||(o8=1,J2=UA().get),J2}var ate=ite();const lu=Io(ate);var eb={exports:{}},Vt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s8;function ote(){if(s8)return Vt;s8=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.view_transition"),y=Symbol.for("react.client.reference");function b(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case t:switch(w=w.type,w){case r:case i:case n:case c:case f:case g:return w;default:switch(w=w&&w.$$typeof,w){case o:case s:case p:case d:return w;case a:return w;default:return E}}case e:return E}}}return Vt.ContextConsumer=a,Vt.ContextProvider=o,Vt.Element=t,Vt.ForwardRef=s,Vt.Fragment=r,Vt.Lazy=p,Vt.Memo=d,Vt.Portal=e,Vt.Profiler=i,Vt.StrictMode=n,Vt.Suspense=c,Vt.SuspenseList=f,Vt.isContextConsumer=function(w){return b(w)===a},Vt.isContextProvider=function(w){return b(w)===o},Vt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},Vt.isForwardRef=function(w){return b(w)===s},Vt.isFragment=function(w){return b(w)===r},Vt.isLazy=function(w){return b(w)===p},Vt.isMemo=function(w){return b(w)===d},Vt.isPortal=function(w){return b(w)===e},Vt.isProfiler=function(w){return b(w)===i},Vt.isStrictMode=function(w){return b(w)===n},Vt.isSuspense=function(w){return b(w)===c},Vt.isSuspenseList=function(w){return b(w)===f},Vt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===i||w===n||w===c||w===f||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===d||w.$$typeof===o||w.$$typeof===a||w.$$typeof===s||w.$$typeof===y||w.getModuleId!==void 0)},Vt.typeOf=b,Vt}var l8;function ste(){return l8||(l8=1,eb.exports=ote()),eb.exports}var lte=ste(),vn=t=>t===0?0:t>0?1:-1,Vi=t=>typeof t=="number"&&t!=+t,Hc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ne=t=>(typeof t=="number"||t instanceof Number)&&!Vi(t),Co=t=>Ne(t)||typeof t=="string",cte=0,pp=t=>{var e=++cte;return"".concat(t||"").concat(e)},qn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(e)&&typeof e!="string")return n;var a;if(Hc(e)){if(r==null)return n;var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return Vi(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},jk=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function vr(t,e,r){return Ne(t)&&Ne(e)?t+r*(e-t):e}function Lk(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):lu(n,e))===r)}var cr=t=>t===null||typeof t>"u",$p=t=>cr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),ute=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function zA(t){if(typeof t!="string")return!1;var e=ute;return e.includes(t)}var fte=["viewBox","children"],c8=["points","pathLength"],tb={svg:fte,polygon:c8,polyline:c8},FA=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(C.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{zA(i)&&(n[i]=(a=>r[i](r,a)))}),n},dte=(t,e,r)=>n=>(t(e,r,n),null),qp=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(i=>{var a=t[i];zA(i)&&typeof a=="function"&&(n||(n={}),n[i]=dte(a,e,r))}),n},hte=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Bk(t){if(typeof t!="string")return!1;var e=hte;return e.includes(t)}function Mo(t){var e=Object.entries(t).filter(r=>{var[n]=r;return Bk(n)});return Object.fromEntries(e)}var u8=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",f8=null,rb=null,Uk=t=>{if(t===f8&&Array.isArray(rb))return rb;var e=[];return C.Children.forEach(t,r=>{cr(r)||(lte.isFragment(r)?e=e.concat(Uk(r.props.children)):e.push(r))}),rb=e,f8=t,e};function VA(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(i=>u8(i)):n=[u8(e)],Uk(t).forEach(i=>{var a=lu(i,"type.displayName")||lu(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}var zk=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,pte=(t,e,r,n)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var a=(i=n&&tb?.[n])!==null&&i!==void 0?i:[],o=e.startsWith("data-"),s=typeof t!="function"&&(!!n&&a.includes(e)||Bk(e)),c=!!r&&zA(e);return o||s||c},dr=(t,e,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{var o;pte((o=n)===null||o===void 0?void 0:o[a],a,e,r)&&(i[a]=n[a])}),i},gte=["children","width","height","viewBox","className","style","title","desc"];function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hw.apply(null,arguments)}function vte(t,e){if(t==null)return{};var r,n,i=mte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function mte(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var HA=C.forwardRef((t,e)=>{var{children:r,width:n,height:i,viewBox:a,className:o,style:s,title:c,desc:f}=t,d=vte(t,gte),p=a||{width:n,height:i,x:0,y:0},g=bt("recharts-surface",o);return C.createElement("svg",hw({},dr(d,!0,"svg"),{className:g,width:n,height:i,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),C.createElement("title",null,c),C.createElement("desc",null,f),r)}),yte=["children","className"];function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pw.apply(null,arguments)}function xte(t,e){if(t==null)return{};var r,n,i=bte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function bte(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Mn=C.forwardRef((t,e)=>{var{children:r,className:n}=t,i=xte(t,yte),a=bt("recharts-layer",n);return C.createElement("g",pw({className:a},dr(i,!0),{ref:e}),r)}),Fk=aD(),Vk=C.createContext(null),_te=()=>C.useContext(Vk);function Wt(t){return function(){return t}}const Hk=Math.cos,cv=Math.sin,$a=Math.sqrt,uv=Math.PI,km=2*uv,gw=Math.PI,vw=2*gw,Lc=1e-6,wte=vw-Lc;function $k(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Ete(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return $k;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Ate{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?$k:Ete(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,o){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,c=n-e,f=i-r,d=o-e,p=s-r,g=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(g>Lc)if(!(Math.abs(p*c-f*d)>Lc)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let y=n-o,b=i-s,w=c*c+f*f,E=y*y+b*b,S=Math.sqrt(w),I=Math.sqrt(g),O=a*Math.tan((gw-Math.acos((w+g-E)/(2*S*I)))/2),D=O/I,k=O/S;Math.abs(D-1)>Lc&&this._append`L${e+D*d},${r+D*p}`,this._append`A${a},${a},0,0,${+(p*y>d*b)},${this._x1=e+k*c},${this._y1=r+k*f}`}}arc(e,r,n,i,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),c=n*Math.sin(i),f=e+s,d=r+c,p=1^o,g=o?i-a:a-i;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Lc||Math.abs(this._y1-d)>Lc)&&this._append`L${f},${d}`,n&&(g<0&&(g=g%vw+vw),g>wte?this._append`A${n},${n},0,1,${p},${e-s},${r-c}A${n},${n},0,1,${p},${this._x1=f},${this._y1=d}`:g>Lc&&this._append`A${n},${n},0,${+(g>=gw)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function $A(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Ate(e)}function qA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qk(t){this._context=t}qk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function jm(t){return new qk(t)}function Gk(t){return t[0]}function Wk(t){return t[1]}function Kk(t,e){var r=Wt(!0),n=null,i=jm,a=null,o=$A(s);t=typeof t=="function"?t:t===void 0?Gk:Wt(t),e=typeof e=="function"?e:e===void 0?Wk:Wt(e);function s(c){var f,d=(c=qA(c)).length,p,g=!1,y;for(n==null&&(a=i(y=o())),f=0;f<=d;++f)!(f<d&&r(p=c[f],f,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(p,f,c),+e(p,f,c));if(y)return a=null,y+""||null}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Wt(+c),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Wt(+c),s):e},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Wt(!!c),s):r},s.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),s):i},s.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),s):n},s}function t1(t,e,r){var n=null,i=Wt(!0),a=null,o=jm,s=null,c=$A(f);t=typeof t=="function"?t:t===void 0?Gk:Wt(+t),e=typeof e=="function"?e:Wt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Wk:Wt(+r);function f(p){var g,y,b,w=(p=qA(p)).length,E,S=!1,I,O=new Array(w),D=new Array(w);for(a==null&&(s=o(I=c())),g=0;g<=w;++g){if(!(g<w&&i(E=p[g],g,p))===S)if(S=!S)y=g,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=g-1;b>=y;--b)s.point(O[b],D[b]);s.lineEnd(),s.areaEnd()}S&&(O[g]=+t(E,g,p),D[g]=+e(E,g,p),s.point(n?+n(E,g,p):O[g],r?+r(E,g,p):D[g]))}if(I)return s=null,I+""||null}function d(){return Kk().defined(i).curve(o).context(a)}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),n=null,f):t},f.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Wt(+p),f):t},f.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Wt(+p),f):n},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),r=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Wt(+p),f):e},f.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Wt(+p),f):r},f.lineX0=f.lineY0=function(){return d().x(t).y(e)},f.lineY1=function(){return d().x(t).y(r)},f.lineX1=function(){return d().x(n).y(e)},f.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Wt(!!p),f):i},f.curve=function(p){return arguments.length?(o=p,a!=null&&(s=o(a)),f):o},f.context=function(p){return arguments.length?(p==null?a=s=null:s=o(a=p),f):a},f}class Xk{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Ste(t){return new Xk(t,!0)}function Cte(t){return new Xk(t,!1)}const GA={draw(t,e){const r=$a(e/uv);t.moveTo(r,0),t.arc(0,0,r,0,km)}},Tte={draw(t,e){const r=$a(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Yk=$a(1/3),Ite=Yk*2,Ote={draw(t,e){const r=$a(e/Ite),n=r*Yk;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Rte={draw(t,e){const r=$a(e),n=-r/2;t.rect(n,n,r,r)}},Pte=.8908130915292852,Qk=cv(uv/10)/cv(7*uv/10),Dte=cv(km/10)*Qk,Nte=-Hk(km/10)*Qk,Mte={draw(t,e){const r=$a(e*Pte),n=Dte*r,i=Nte*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const o=km*a/5,s=Hk(o),c=cv(o);t.lineTo(c*r,-s*r),t.lineTo(s*n-c*i,c*n+s*i)}t.closePath()}},nb=$a(3),kte={draw(t,e){const r=-$a(e/(nb*3));t.moveTo(0,r*2),t.lineTo(-nb*r,-r),t.lineTo(nb*r,-r),t.closePath()}},aa=-.5,oa=$a(3)/2,mw=1/$a(12),jte=(mw/2+1)*3,Lte={draw(t,e){const r=$a(e/jte),n=r/2,i=r*mw,a=n,o=r*mw+r,s=-a,c=o;t.moveTo(n,i),t.lineTo(a,o),t.lineTo(s,c),t.lineTo(aa*n-oa*i,oa*n+aa*i),t.lineTo(aa*a-oa*o,oa*a+aa*o),t.lineTo(aa*s-oa*c,oa*s+aa*c),t.lineTo(aa*n+oa*i,aa*i-oa*n),t.lineTo(aa*a+oa*o,aa*o-oa*a),t.lineTo(aa*s+oa*c,aa*c-oa*s),t.closePath()}};function Bte(t,e){let r=null,n=$A(i);t=typeof t=="function"?t:Wt(t||GA),e=typeof e=="function"?e:Wt(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Wt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Wt(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function fv(){}function dv(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Zk(t){this._context=t}Zk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ute(t){return new Zk(t)}function Jk(t){this._context=t}Jk.prototype={areaStart:fv,areaEnd:fv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:dv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zte(t){return new Jk(t)}function e9(t){this._context=t}e9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Fte(t){return new e9(t)}function t9(t){this._context=t}t9.prototype={areaStart:fv,areaEnd:fv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Vte(t){return new t9(t)}function d8(t){return t<0?-1:1}function h8(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(d8(a)+d8(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function p8(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function ib(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-n)/3;t._context.bezierCurveTo(n+s,i+s*e,a-s,o-s*r,a,o)}function hv(t){this._context=t}hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ib(this,this._t0,p8(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ib(this,p8(this,r=h8(this,t,e)),r);break;default:ib(this,this._t0,r=h8(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function r9(t){this._context=new n9(t)}(r9.prototype=Object.create(hv.prototype)).point=function(t,e){hv.prototype.point.call(this,e,t)};function n9(t){this._context=t}n9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function Hte(t){return new hv(t)}function $te(t){return new r9(t)}function i9(t){this._context=t}i9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=g8(t),i=g8(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function g8(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function qte(t){return new i9(t)}function Lm(t,e){this._context=t,this._t=e}Lm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Gte(t){return new Lm(t,.5)}function Wte(t){return new Lm(t,0)}function Kte(t){return new Lm(t,1)}function Uf(t,e){if((o=t.length)>1)for(var r=1,n,i,a=t[e[0]],o,s=a.length;r<o;++r)for(i=a,a=t[e[r]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function yw(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Xte(t,e){return t[e]}function Yte(t){const e=[];return e.key=t,e}function Qte(){var t=Wt([]),e=yw,r=Uf,n=Xte;function i(a){var o=Array.from(t.apply(this,arguments),Yte),s,c=o.length,f=-1,d;for(const p of a)for(s=0,++f;s<c;++s)(o[s][f]=[0,+n(p,o[s].key,f,a)]).data=p;for(s=0,d=qA(e(o));s<c;++s)o[d[s]].index=s;return r(o,d),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Wt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Wt(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?yw:typeof a=="function"?a:Wt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??Uf,i):r},i}function Zte(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}Uf(t,e)}}function Jte(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var o=0,s=0;o<i;++o)s+=t[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}Uf(t,e)}}function ere(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var s=0,c=0,f=0;s<o;++s){for(var d=t[e[s]],p=d[n][1]||0,g=d[n-1][1]||0,y=(p-g)/2,b=0;b<s;++b){var w=t[e[b]],E=w[n][1]||0,S=w[n-1][1]||0;y+=E-S}c+=p,f+=y*p}i[n-1][1]+=i[n-1][0]=r,c&&(r-=f/c)}i[n-1][1]+=i[n-1][0]=r,Uf(t,e)}}var tre=["type","size","sizeType"];function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xw.apply(null,arguments)}function v8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function m8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v8(Object(r),!0).forEach(function(n){rre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rre(t,e,r){return(e=nre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nre(t){var e=ire(t,"string");return typeof e=="symbol"?e:e+""}function ire(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function are(t,e){if(t==null)return{};var r,n,i=ore(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function ore(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var a9={symbolCircle:GA,symbolCross:Tte,symbolDiamond:Ote,symbolSquare:Rte,symbolStar:Mte,symbolTriangle:kte,symbolWye:Lte},sre=Math.PI/180,lre=t=>{var e="symbol".concat($p(t));return a9[e]||GA},cre=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*sre;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},ure=(t,e)=>{a9["symbol".concat($p(t))]=e},WA=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,i=are(t,tre),a=m8(m8({},i),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var s=()=>{var g=lre(o),y=Bte().type(g).size(cre(r,n,o));return y()},{className:c,cx:f,cy:d}=a,p=dr(a,!0);return f===+f&&d===+d&&r===+r?C.createElement("path",xw({},p,{className:bt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(d,")"),d:s()})):null};WA.registerSymbol=ure;function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bw.apply(null,arguments)}function y8(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fre(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y8(Object(r),!0).forEach(function(n){KA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y8(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KA(t,e,r){return(e=dre(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dre(t){var e=hre(t,"string");return typeof e=="symbol"?e:e+""}function hre(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sa=32;class XA extends C.PureComponent{renderIcon(e,r){var{inactiveColor:n}=this.props,i=sa/2,a=sa/6,o=sa/3,s=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline")return C.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:sa,y2:i,className:"recharts-legend-icon"});if(c==="line")return C.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(sa,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return C.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(sa/8,"h").concat(sa,"v").concat(sa*3/4,"h").concat(-sa,"z"),className:"recharts-legend-icon"});if(C.isValidElement(e.legendIcon)){var f=fre({},e);return delete f.legendIcon,C.cloneElement(e.legendIcon,f)}return C.createElement(WA,{fill:s,cx:i,cy:i,size:sa,sizeType:"diameter",type:c})}renderItems(){var{payload:e,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:o}=this.props,s={x:0,y:0,width:sa,height:sa},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,p)=>{var g=d.formatter||i,y=bt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:d.inactive});if(d.type==="none")return null;var b=d.inactive?a:d.color,w=g?g(d.value,d,p):d.value;return C.createElement("li",bw({className:y,style:c,key:"legend-item-".concat(p)},qp(this.props,d,p)),C.createElement(HA,{width:r,height:r,viewBox:s,style:f,"aria-label":"".concat(w," legend icon")},this.renderIcon(d,o)),C.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},w))})}render(){var{payload:e,layout:r,align:n}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return C.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}KA(XA,"displayName","Legend");KA(XA,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var ab={},ob={},x8;function pre(){return x8||(x8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const i=new Map;for(let a=0;a<r.length;a++){const o=r[a],s=n(o);i.has(s)||i.set(s,o)}return Array.from(i.values())}t.uniqBy=e})(ob)),ob}var sb={},b8;function o9(){return b8||(b8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(sb)),sb}var lb={},cb={},ub={},_8;function gre(){return _8||(_8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(ub)),ub}var w8;function YA(){return w8||(w8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gre();function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(cb)),cb}var fb={},E8;function vre(){return E8||(E8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(fb)),fb}var A8;function mre(){return A8||(A8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YA(),r=vre();function n(i){return r.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=n})(lb)),lb}var db={},hb={},S8;function yre(){return S8||(S8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UA();function r(n){return function(i){return e.get(i,n)}}t.property=r})(hb)),hb}var pb={},gb={},vb={},mb={},C8;function s9(){return C8||(C8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(mb)),mb}var yb={},T8;function l9(){return T8||(T8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(yb)),yb}var xb={},I8;function c9(){return I8||(I8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(xb)),xb}var O8;function xre(){return O8||(O8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QA(),r=s9(),n=l9(),i=c9();function a(p,g,y){return typeof y!="function"?e.isMatch(p,g):o(p,g,function b(w,E,S,I,O,D){const k=y(w,E,S,I,O,D);return k!==void 0?!!k:o(w,E,b,D)},new Map)}function o(p,g,y,b){if(g===p)return!0;switch(typeof g){case"object":return s(p,g,y,b);case"function":return Object.keys(g).length>0?o(p,{...g},y,b):i.eq(p,g);default:return r.isObject(p)?typeof g=="string"?g==="":!0:i.eq(p,g)}}function s(p,g,y,b){if(g==null)return!0;if(Array.isArray(g))return f(p,g,y,b);if(g instanceof Map)return c(p,g,y,b);if(g instanceof Set)return d(p,g,y,b);const w=Object.keys(g);if(p==null)return w.length===0;if(w.length===0)return!0;if(b&&b.has(g))return b.get(g)===p;b&&b.set(g,p);try{for(let E=0;E<w.length;E++){const S=w[E];if(!n.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!y(p[S],g[S],S,p,g,b))return!1}return!0}finally{b&&b.delete(g)}}function c(p,g,y,b){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[w,E]of g.entries()){const S=p.get(w);if(y(S,E,w,p,g,b)===!1)return!1}return!0}function f(p,g,y,b){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const w=new Set;for(let E=0;E<g.length;E++){const S=g[E];let I=!1;for(let O=0;O<p.length;O++){if(w.has(O))continue;const D=p[O];let k=!1;if(y(D,S,E,p,g,b)&&(k=!0),k){w.add(O),I=!0;break}}if(!I)return!1}return!0}function d(p,g,y,b){return g.size===0?!0:p instanceof Set?f([...p],[...g],y,b):!1}t.isMatchWith=a,t.isSetMatch=d})(vb)),vb}var R8;function QA(){return R8||(R8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xre();function r(n,i){return e.isMatchWith(n,i,()=>{})}t.isMatch=r})(gb)),gb}var bb={},_b={},wb={},P8;function bre(){return P8||(P8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(wb)),wb}var Eb={},D8;function u9(){return D8||(D8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(Eb)),Eb}var Ab={},N8;function f9(){return N8||(N8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",s="[object Date]",c="[object Map]",f="[object Set]",d="[object Array]",p="[object Function]",g="[object ArrayBuffer]",y="[object Object]",b="[object Error]",w="[object DataView]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",I="[object Uint16Array]",O="[object Uint32Array]",D="[object BigUint64Array]",k="[object Int8Array]",B="[object Int16Array]",R="[object Int32Array]",N="[object BigInt64Array]",L="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=d,t.bigInt64ArrayTag=N,t.bigUint64ArrayTag=D,t.booleanTag=i,t.dataViewTag=w,t.dateTag=s,t.errorTag=b,t.float32ArrayTag=L,t.float64ArrayTag=U,t.functionTag=p,t.int16ArrayTag=B,t.int32ArrayTag=R,t.int8ArrayTag=k,t.mapTag=c,t.numberTag=n,t.objectTag=y,t.regexpTag=e,t.setTag=f,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=I,t.uint32ArrayTag=O,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=S})(Ab)),Ab}var Sb={},M8;function _re(){return M8||(M8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(Sb)),Sb}var k8;function d9(){return k8||(k8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bre(),r=u9(),n=f9(),i=l9(),a=_re();function o(d,p){return s(d,void 0,d,new Map,p)}function s(d,p,g,y=new Map,b=void 0){const w=b?.(d,p,g,y);if(w!==void 0)return w;if(i.isPrimitive(d))return d;if(y.has(d))return y.get(d);if(Array.isArray(d)){const E=new Array(d.length);y.set(d,E);for(let S=0;S<d.length;S++)E[S]=s(d[S],S,g,y,b);return Object.hasOwn(d,"index")&&(E.index=d.index),Object.hasOwn(d,"input")&&(E.input=d.input),E}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const E=new RegExp(d.source,d.flags);return E.lastIndex=d.lastIndex,E}if(d instanceof Map){const E=new Map;y.set(d,E);for(const[S,I]of d)E.set(S,s(I,S,g,y,b));return E}if(d instanceof Set){const E=new Set;y.set(d,E);for(const S of d)E.add(s(S,void 0,g,y,b));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const E=new(Object.getPrototypeOf(d)).constructor(d.length);y.set(d,E);for(let S=0;S<d.length;S++)E[S]=s(d[S],S,g,y,b);return E}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const E=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return y.set(d,E),c(E,d,g,y,b),E}if(typeof File<"u"&&d instanceof File){const E=new File([d],d.name,{type:d.type});return y.set(d,E),c(E,d,g,y,b),E}if(typeof Blob<"u"&&d instanceof Blob){const E=new Blob([d],{type:d.type});return y.set(d,E),c(E,d,g,y,b),E}if(d instanceof Error){const E=new d.constructor;return y.set(d,E),E.message=d.message,E.name=d.name,E.stack=d.stack,E.cause=d.cause,c(E,d,g,y,b),E}if(d instanceof Boolean){const E=new Boolean(d.valueOf());return y.set(d,E),c(E,d,g,y,b),E}if(d instanceof Number){const E=new Number(d.valueOf());return y.set(d,E),c(E,d,g,y,b),E}if(d instanceof String){const E=new String(d.valueOf());return y.set(d,E),c(E,d,g,y,b),E}if(typeof d=="object"&&f(d)){const E=Object.create(Object.getPrototypeOf(d));return y.set(d,E),c(E,d,g,y,b),E}return d}function c(d,p,g=d,y,b){const w=[...Object.keys(p),...e.getSymbols(p)];for(let E=0;E<w.length;E++){const S=w[E],I=Object.getOwnPropertyDescriptor(d,S);(I==null||I.writable)&&(d[S]=s(p[S],S,g,y,b))}}function f(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=s,t.copyProperties=c})(_b)),_b}var j8;function wre(){return j8||(j8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=d9();function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(bb)),bb}var L8;function Ere(){return L8||(L8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QA(),r=wre();function n(i){return i=r.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=n})(pb)),pb}var Cb={},Tb={},Ib={},B8;function Are(){return B8||(B8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=d9(),r=f9();function n(i,a){return e.cloneDeepWith(i,(o,s,c,f)=>{const d=a?.(o,s,c,f);if(d!==void 0)return d;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new i.constructor(i?.valueOf());return e.copyProperties(p,i),p}case r.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=n})(Ib)),Ib}var U8;function Sre(){return U8||(U8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Are();function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Tb)),Tb}var Ob={},Rb={},z8;function h9(){return z8||(z8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(Rb)),Rb}var Pb={},F8;function Cre(){return F8||(F8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=u9();function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Pb)),Pb}var V8;function Tre(){return V8||(V8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kk(),r=h9(),n=Cre(),i=BA();function a(o,s){let c;if(Array.isArray(s)?c=s:typeof s=="string"&&e.isDeepKey(s)&&o?.[s]==null?c=i.toPath(s):c=[s],c.length===0)return!1;let f=o;for(let d=0;d<c.length;d++){const p=c[d];if((f==null||!Object.hasOwn(f,p))&&!((Array.isArray(f)||n.isArguments(f))&&r.isIndex(p)&&p<f.length))return!1;f=f[p]}return!0}t.has=a})(Ob)),Ob}var H8;function Ire(){return H8||(H8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=QA(),r=LA(),n=Sre(),i=UA(),a=Tre();function o(s,c){switch(typeof s){case"object":{Object.is(s?.valueOf(),-0)&&(s="-0");break}case"number":{s=r.toKey(s);break}}return c=n.cloneDeep(c),function(f){const d=i.get(f,s);return d===void 0?a.has(f,s):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(Cb)),Cb}var $8;function Ore(){return $8||($8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o9(),r=yre(),n=Ere(),i=Ire();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=a})(db)),db}var q8;function Rre(){return q8||(q8=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pre(),r=o9(),n=mre(),i=Ore();function a(o,s=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(s)):[]}t.uniqBy=a})(ab)),ab}var Db,G8;function Pre(){return G8||(G8=1,Db=Rre().uniqBy),Db}var Dre=Pre();const W8=Io(Dre);function p9(t,e,r){return e===!0?W8(t,r):typeof e=="function"?W8(t,e):t}var Nb={exports:{}},Mb={},kb={exports:{}},jb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K8;function Nre(){if(K8)return jb;K8=1;var t=Xf();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function s(p,g){var y=g(),b=n({inst:{value:y,getSnapshot:g}}),w=b[0].inst,E=b[1];return a(function(){w.value=y,w.getSnapshot=g,c(w)&&E({inst:w})},[p,y,g]),i(function(){return c(w)&&E({inst:w}),p(function(){c(w)&&E({inst:w})})},[p]),o(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!r(p,y)}catch{return!0}}function f(p,g){return g()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:s;return jb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,jb}var X8;function Mre(){return X8||(X8=1,kb.exports=Nre()),kb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y8;function kre(){if(Y8)return Mb;Y8=1;var t=Xf(),e=Mre();function r(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,s=t.useMemo,c=t.useDebugValue;return Mb.useSyncExternalStoreWithSelector=function(f,d,p,g,y){var b=a(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=s(function(){function S(B){if(!I){if(I=!0,O=B,B=g(B),y!==void 0&&w.hasValue){var R=w.value;if(y(R,B))return D=R}return D=B}if(R=D,n(O,B))return R;var N=g(B);return y!==void 0&&y(R,N)?(O=B,R):(O=B,D=N)}var I=!1,O,D,k=p===void 0?null:p;return[function(){return S(d())},k===null?void 0:function(){return S(k())}]},[d,p,g,y]);var E=i(f,b[0],b[1]);return o(function(){w.hasValue=!0,w.value=E},[E]),c(E),E},Mb}var Q8;function jre(){return Q8||(Q8=1,Nb.exports=kre()),Nb.exports}var Lre=jre(),ZA=C.createContext(null),Bre=t=>t,hr=()=>{var t=C.useContext(ZA);return t?t.store.dispatch:Bre},P1=()=>{},Ure=()=>P1,zre=(t,e)=>t===e;function Re(t){var e=C.useContext(ZA);return Lre.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Ure,e?e.store.getState:P1,e?e.store.getState:P1,e?t:P1,zre)}function Fre(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Vre(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Hre(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var Z8=t=>Array.isArray(t)?t:[t];function $re(t){const e=Array.isArray(t[0])?t[0]:t;return Hre(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function qre(t,e){const r=[],{length:n}=t;for(let i=0;i<n;i++)r.push(t[i].apply(null,e));return r}var Gre=class{constructor(t){this.value=t}deref(){return this.value}},Wre=typeof WeakRef<"u"?WeakRef:Gre,Kre=0,J8=1;function r1(){return{s:Kre,v:void 0,o:null,p:null}}function g9(t,e={}){let r=r1();const{resultEqualityCheck:n}=e;let i,a=0;function o(){let s=r;const{length:c}=arguments;for(let p=0,g=c;p<g;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let b=s.o;b===null&&(s.o=b=new WeakMap);const w=b.get(y);w===void 0?(s=r1(),b.set(y,s)):s=w}else{let b=s.p;b===null&&(s.p=b=new Map);const w=b.get(y);w===void 0?(s=r1(),b.set(y,s)):s=w}}const f=s;let d;if(s.s===J8)d=s.v;else if(d=t.apply(null,arguments),a++,n){const p=i?.deref?.()??i;p!=null&&n(p,d)&&(d=p,a!==0&&a--),i=typeof d=="object"&&d!==null||typeof d=="function"?new Wre(d):d}return f.s=J8,f.v=d,d}return o.clearCache=()=>{r=r1(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function Xre(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...i)=>{let a=0,o=0,s,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),Fre(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const d={...r,...c},{memoize:p,memoizeOptions:g=[],argsMemoize:y=g9,argsMemoizeOptions:b=[]}=d,w=Z8(g),E=Z8(b),S=$re(i),I=p(function(){return a++,f.apply(null,arguments)},...w),O=y(function(){o++;const k=qre(S,arguments);return s=I.apply(null,k),s},...E);return Object.assign(O,{resultFunc:f,memoizedResultFunc:I,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(n,{withTypes:()=>n}),n}var ne=Xre(g9),Yre=Object.assign((t,e=ne)=>{Vre(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(a=>t[a]);return e(n,(...a)=>a.reduce((o,s,c)=>(o[r[c]]=s,o),{}))},{withTypes:()=>Yre}),Lb={},Bb={},Ub={},eR;function Qre(){return eR||(eR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const o=e(n),s=e(i);if(o===s&&o===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?s-o:o-s}return 0};t.compareValues=r})(Ub)),Ub}var zb={},Fb={},tR;function v9(){return tR||(tR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(Fb)),Fb}var rR;function Zre(){return rR||(rR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v9(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=i})(zb)),zb}var nR;function Jre(){return nR||(nR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qre(),r=Zre(),n=BA();function i(a,o,s,c){if(a==null)return[];s=c?void 0:s,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(y=>String(y));const f=(y,b)=>{let w=y;for(let E=0;E<b.length&&w!=null;++E)w=w[b[E]];return w},d=(y,b)=>b==null||y==null?b:typeof y=="object"&&"key"in y?Object.hasOwn(b,y.key)?b[y.key]:f(b,y.path):typeof y=="function"?y(b):Array.isArray(y)?f(b,y):typeof b=="object"?b[y]:b,p=o.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||r.isKey(y)?y:{key:y,path:n.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(b=>d(b,y))})).slice().sort((y,b)=>{for(let w=0;w<p.length;w++){const E=e.compareValues(y.criteria[w],b.criteria[w],s[w]);if(E!==0)return E}return 0}).map(y=>y.original)}t.orderBy=i})(Bb)),Bb}var Vb={},iR;function ene(){return iR||(iR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const i=[],a=Math.floor(n),o=(s,c)=>{for(let f=0;f<s.length;f++){const d=s[f];Array.isArray(d)&&c<a?o(d,c+1):i.push(d)}};return o(r,0),i}t.flatten=e})(Vb)),Vb}var Hb={},aR;function m9(){return aR||(aR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=h9(),r=YA(),n=s9(),i=c9();function a(o,s,c){return n.isObject(c)&&(typeof s=="number"&&r.isArrayLike(c)&&e.isIndex(s)&&s<c.length||typeof s=="string"&&s in c)?i.eq(c[s],o):!1}t.isIterateeCall=a})(Hb)),Hb}var oR;function tne(){return oR||(oR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jre(),r=ene(),n=m9();function i(a,...o){const s=o.length;return s>1&&n.isIterateeCall(a,o[0],o[1])?o=[]:s>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,r.flatten(o),["asc"])}t.sortBy=i})(Lb)),Lb}var $b,sR;function rne(){return sR||(sR=1,$b=tne().sortBy),$b}var nne=rne();const Bm=Io(nne);var y9=t=>t.legend.settings,ine=t=>t.legend.size,ane=t=>t.legend.payload,one=ne([ane,y9],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?Bm(n,r):n});function sne(){return Re(one)}var n1=1;function x9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=C.useState({height:0,left:0,top:0,width:0}),n=C.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>n1||Math.abs(o.left-e.left)>n1||Math.abs(o.top-e.top)>n1||Math.abs(o.width-e.width)>n1)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function In(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var lne=typeof Symbol=="function"&&Symbol.observable||"@@observable",lR=lne,qb=()=>Math.random().toString(36).substring(7).split("").join("."),cne={INIT:`@@redux/INIT${qb()}`,REPLACE:`@@redux/REPLACE${qb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${qb()}`},pv=cne;function JA(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function b9(t,e,r){if(typeof t!="function")throw new Error(In(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(In(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(In(1));return r(b9)(t,e)}let n=t,i=e,a=new Map,o=a,s=0,c=!1;function f(){o===a&&(o=new Map,a.forEach((E,S)=>{o.set(S,E)}))}function d(){if(c)throw new Error(In(3));return i}function p(E){if(typeof E!="function")throw new Error(In(4));if(c)throw new Error(In(5));let S=!0;f();const I=s++;return o.set(I,E),function(){if(S){if(c)throw new Error(In(6));S=!1,f(),o.delete(I),a=null}}}function g(E){if(!JA(E))throw new Error(In(7));if(typeof E.type>"u")throw new Error(In(8));if(typeof E.type!="string")throw new Error(In(17));if(c)throw new Error(In(9));try{c=!0,i=n(i,E)}finally{c=!1}return(a=o).forEach(I=>{I()}),E}function y(E){if(typeof E!="function")throw new Error(In(10));n=E,g({type:pv.REPLACE})}function b(){const E=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(In(11));function I(){const D=S;D.next&&D.next(d())}return I(),{unsubscribe:E(I)}},[lR](){return this}}}return g({type:pv.INIT}),{dispatch:g,subscribe:p,getState:d,replaceReducer:y,[lR]:b}}function une(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:pv.INIT})>"u")throw new Error(In(12));if(typeof r(void 0,{type:pv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(In(13))})}function _9(t){const e=Object.keys(t),r={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let i;try{une(r)}catch(a){i=a}return function(o={},s){if(i)throw i;let c=!1;const f={};for(let d=0;d<n.length;d++){const p=n[d],g=r[p],y=o[p],b=g(y,s);if(typeof b>"u")throw s&&s.type,new Error(In(14));f[p]=b,c=c||b!==y}return c=c||n.length!==Object.keys(o).length,c?f:o}}function gv(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function fne(...t){return e=>(r,n)=>{const i=e(r,n);let a=()=>{throw new Error(In(15))};const o={getState:i.getState,dispatch:(c,...f)=>a(c,...f)},s=t.map(c=>c(o));return a=gv(...s)(i.dispatch),{...i,dispatch:a}}}function w9(t){return JA(t)&&"type"in t&&typeof t.type=="string"}var E9=Symbol.for("immer-nothing"),cR=Symbol.for("immer-draftable"),Hi=Symbol.for("immer-state");function La(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var zf=Object.getPrototypeOf;function cu(t){return!!t&&!!t[Hi]}function ys(t){return t?A9(t)||Array.isArray(t)||!!t[cR]||!!t.constructor?.[cR]||Gp(t)||zm(t):!1}var dne=Object.prototype.constructor.toString();function A9(t){if(!t||typeof t!="object")return!1;const e=zf(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===dne}function vv(t,e){Um(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Um(t){const e=t[Hi];return e?e.type_:Array.isArray(t)?1:Gp(t)?2:zm(t)?3:0}function _w(t,e){return Um(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function S9(t,e,r){const n=Um(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function hne(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Gp(t){return t instanceof Map}function zm(t){return t instanceof Set}function Bc(t){return t.copy_||t.base_}function ww(t,e){if(Gp(t))return new Map(t);if(zm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=A9(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Hi];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],s=n[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(zf(t),n)}else{const n=zf(t);if(n!==null&&r)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function eS(t,e=!1){return Fm(t)||cu(t)||!ys(t)||(Um(t)>1&&Object.defineProperties(t,{set:{value:i1},add:{value:i1},clear:{value:i1},delete:{value:i1}}),Object.freeze(t),e&&Object.values(t).forEach(r=>eS(r,!0))),t}function i1(){La(2)}function Fm(t){return Object.isFrozen(t)}var pne={};function uu(t){const e=pne[t];return e||La(0,t),e}var gp;function C9(){return gp}function gne(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function uR(t,e){e&&(uu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Ew(t){Aw(t),t.drafts_.forEach(vne),t.drafts_=null}function Aw(t){t===gp&&(gp=t.parent_)}function fR(t){return gp=gne(gp,t)}function vne(t){const e=t[Hi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function dR(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Hi].modified_&&(Ew(e),La(4)),ys(t)&&(t=mv(e,t),e.parent_||yv(e,t)),e.patches_&&uu("Patches").generateReplacementPatches_(r[Hi].base_,t,e.patches_,e.inversePatches_)):t=mv(e,r,[]),Ew(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==E9?t:void 0}function mv(t,e,r){if(Fm(e))return e;const n=e[Hi];if(!n)return vv(e,(i,a)=>hR(t,n,e,i,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return yv(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),vv(a,(s,c)=>hR(t,n,i,s,c,r,o)),yv(t,i,!1),r&&t.patches_&&uu("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function hR(t,e,r,n,i,a,o){if(cu(i)){const s=a&&e&&e.type_!==3&&!_w(e.assigned_,n)?a.concat(n):void 0,c=mv(t,i,s);if(S9(r,n,c),cu(c))t.canAutoFreeze_=!1;else return}else o&&r.add(i);if(ys(i)&&!Fm(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;mv(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Gp(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&yv(t,i)}}function yv(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eS(e,r)}function mne(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:C9(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=tS;r&&(i=[n],a=vp);const{revoke:o,proxy:s}=Proxy.revocable(i,a);return n.draft_=s,n.revoke_=o,s}var tS={get(t,e){if(e===Hi)return t;const r=Bc(t);if(!_w(r,e))return yne(t,r,e);const n=r[e];return t.finalized_||!ys(n)?n:n===Gb(t.base_,e)?(Wb(t),t.copy_[e]=Cw(n,t)):n},has(t,e){return e in Bc(t)},ownKeys(t){return Reflect.ownKeys(Bc(t))},set(t,e,r){const n=T9(Bc(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const i=Gb(Bc(t),e),a=i?.[Hi];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(hne(r,i)&&(r!==void 0||_w(t.base_,e)))return!0;Wb(t),Sw(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Gb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Wb(t),Sw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Bc(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){La(11)},getPrototypeOf(t){return zf(t.base_)},setPrototypeOf(){La(12)}},vp={};vv(tS,(t,e)=>{vp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});vp.deleteProperty=function(t,e){return vp.set.call(this,t,e,void 0)};vp.set=function(t,e,r){return tS.set.call(this,t[0],e,r,t[0])};function Gb(t,e){const r=t[Hi];return(r?Bc(r):t)[e]}function yne(t,e,r){const n=T9(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function T9(t,e){if(!(e in t))return;let r=zf(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=zf(r)}}function Sw(t){t.modified_||(t.modified_=!0,t.parent_&&Sw(t.parent_))}function Wb(t){t.copy_||(t.copy_=ww(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var xne=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const o=this;return function(c=a,...f){return o.produce(c,d=>r.call(this,d,...f))}}typeof r!="function"&&La(6),n!==void 0&&typeof n!="function"&&La(7);let i;if(ys(e)){const a=fR(this),o=Cw(e,void 0);let s=!0;try{i=r(o),s=!1}finally{s?Ew(a):Aw(a)}return uR(a,n),dR(i,a)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===E9&&(i=void 0),this.autoFreeze_&&eS(i,!0),n){const a=[],o=[];uu("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else La(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...s)=>this.produceWithPatches(o,c=>e(c,...s));let n,i;return[this.produce(e,r,(o,s)=>{n=o,i=s}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ys(t)||La(8),cu(t)&&(t=cs(t));const e=fR(this),r=Cw(t,void 0);return r[Hi].isManual_=!0,Aw(e),r}finishDraft(t,e){const r=t&&t[Hi];(!r||!r.isManual_)&&La(9);const{scope_:n}=r;return uR(n,e),dR(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));const n=uu("Patches").applyPatches_;return cu(t)?n(t,e):this.produce(t,i=>n(i,e))}};function Cw(t,e){const r=Gp(t)?uu("MapSet").proxyMap_(t,e):zm(t)?uu("MapSet").proxySet_(t,e):mne(t,e);return(e?e.scope_:C9()).drafts_.push(r),r}function cs(t){return cu(t)||La(10,t),I9(t)}function I9(t){if(!ys(t)||Fm(t))return t;const e=t[Hi];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=ww(t,e.scope_.immer_.useStrictShallowCopy_)}else r=ww(t,!0);return vv(r,(n,i)=>{S9(r,n,I9(i))}),e&&(e.finalized_=!1),r}var bne=new xne,O9=bne.produce;function R9(t){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,t):i(a)}var _ne=R9(),wne=R9,Ene=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?gv:gv.apply(null,arguments)};function ya(t,e){function r(...n){if(e){let i=e(...n);if(!i)throw new Error(Bi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>w9(n)&&n.type===t,r}var P9=class $h extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,$h.prototype)}static get[Symbol.species](){return $h}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new $h(...e[0].concat(this)):new $h(...e.concat(this))}};function pR(t){return ys(t)?O9(t,()=>{}):t}function a1(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function Ane(t){return typeof t=="boolean"}var Sne=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new P9;return r&&(Ane(r)?o.push(_ne):o.push(wne(r.extraArgument))),o},Cne="RTK_autoBatch",gR=t=>e=>{setTimeout(e,t)},Tne=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let i=!0,a=!1,o=!1;const s=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gR(10):t.type==="callback"?t.queueNotification:gR(t.timeout),f=()=>{o=!1,a&&(a=!1,s.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const p=()=>i&&d(),g=n.subscribe(p);return s.add(d),()=>{g(),s.delete(d)}},dispatch(d){try{return i=!d?.meta?.[Cne],a=!i,a&&(o||(o=!0,c(f))),n.dispatch(d)}finally{i=!0}}})},Ine=t=>function(r){const{autoBatch:n=!0}=r??{};let i=new P9(t);return n&&i.push(Tne(typeof n=="object"?n:void 0)),i};function One(t){const e=Sne(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let s;if(typeof r=="function")s=r;else if(JA(r))s=_9(r);else throw new Error(Bi(1));let c;typeof n=="function"?c=n(e):c=e();let f=gv;i&&(f=Ene({trace:!1,...typeof i=="object"&&i}));const d=fne(...c),p=Ine(d);let g=typeof o=="function"?o(p):p();const y=f(...g);return b9(s,a,y)}function D9(t){const e={},r=[];let n;const i={addCase(a,o){const s=typeof a=="string"?a:a.type;if(!s)throw new Error(Bi(28));if(s in e)throw new Error(Bi(29));return e[s]=o,i},addAsyncThunk(a,o){return o.pending&&(e[a.pending.type]=o.pending),o.rejected&&(e[a.rejected.type]=o.rejected),o.fulfilled&&(e[a.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return r.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,r,n]}function Rne(t){return typeof t=="function"}function Pne(t,e){let[r,n,i]=D9(e),a;if(Rne(t))a=()=>pR(t());else{const s=pR(t);a=()=>s}function o(s=a(),c){let f=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return f.filter(d=>!!d).length===0&&(f=[i]),f.reduce((d,p)=>{if(p)if(cu(d)){const y=p(d,c);return y===void 0?d:y}else{if(ys(d))return O9(d,g=>p(g,c));{const g=p(d,c);if(g===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return d},s)}return o.getInitialState=a,o}var Dne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Nne=(t=21)=>{let e="",r=t;for(;r--;)e+=Dne[Math.random()*64|0];return e},Mne=Symbol.for("rtk-slice-createasyncthunk");function kne(t,e){return`${t}/${e}`}function jne({creators:t}={}){const e=t?.asyncThunk?.[Mne];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(Bi(11));const o=(typeof n.reducers=="function"?n.reducers(Bne()):n.reducers)||{},s=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,D){const k=typeof O=="string"?O:O.type;if(!k)throw new Error(Bi(12));if(k in c.sliceCaseReducersByType)throw new Error(Bi(13));return c.sliceCaseReducersByType[k]=D,f},addMatcher(O,D){return c.sliceMatchers.push({matcher:O,reducer:D}),f},exposeAction(O,D){return c.actionCreators[O]=D,f},exposeCaseReducer(O,D){return c.sliceCaseReducersByName[O]=D,f}};s.forEach(O=>{const D=o[O],k={reducerName:O,type:kne(i,O),createNotation:typeof n.reducers=="function"};zne(D)?Vne(k,D,f,e):Une(k,D,f)});function d(){const[O={},D=[],k=void 0]=typeof n.extraReducers=="function"?D9(n.extraReducers):[n.extraReducers],B={...O,...c.sliceCaseReducersByType};return Pne(n.initialState,R=>{for(let N in B)R.addCase(N,B[N]);for(let N of c.sliceMatchers)R.addMatcher(N.matcher,N.reducer);for(let N of D)R.addMatcher(N.matcher,N.reducer);k&&R.addDefaultCase(k)})}const p=O=>O,g=new Map,y=new WeakMap;let b;function w(O,D){return b||(b=d()),b(O,D)}function E(){return b||(b=d()),b.getInitialState()}function S(O,D=!1){function k(R){let N=R[O];return typeof N>"u"&&D&&(N=a1(y,k,E)),N}function B(R=p){const N=a1(g,D,()=>new WeakMap);return a1(N,R,()=>{const L={};for(const[U,j]of Object.entries(n.selectors??{}))L[U]=Lne(j,R,()=>a1(y,R,E),D);return L})}return{reducerPath:O,getSelectors:B,get selectors(){return B(k)},selectSlice:k}}const I={name:i,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:E,...S(a),injectInto(O,{reducerPath:D,...k}={}){const B=D??a;return O.inject({reducerPath:B,reducer:w},k),{...I,...S(B,!0)}}};return I}}function Lne(t,e,r,n){function i(a,...o){let s=e(a);return typeof s>"u"&&n&&(s=r()),t(s,...o)}return i.unwrapped=t,i}var qi=jne();function Bne(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Une({type:t,reducerName:e,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&!Fne(n))throw new Error(Bi(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?ya(t,o):ya(t))}function zne(t){return t._reducerDefinitionType==="asyncThunk"}function Fne(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Vne({type:t,reducerName:e},r,n,i){if(!i)throw new Error(Bi(18));const{payloadCreator:a,fulfilled:o,pending:s,rejected:c,settled:f,options:d}=r,p=i(t,a,d);n.exposeAction(e,p),o&&n.addCase(p.fulfilled,o),s&&n.addCase(p.pending,s),c&&n.addCase(p.rejected,c),f&&n.addMatcher(p.settled,f),n.exposeCaseReducer(e,{fulfilled:o||o1,pending:s||o1,rejected:c||o1,settled:f||o1})}function o1(){}var Hne="task",N9="listener",M9="completed",rS="cancelled",$ne=`task-${rS}`,qne=`task-${M9}`,Tw=`${N9}-${rS}`,Gne=`${N9}-${M9}`,Vm=class{constructor(t){this.code=t,this.message=`${Hne} ${rS} (reason: ${t})`}name="TaskAbortError";message},nS=(t,e)=>{if(typeof t!="function")throw new TypeError(Bi(32))},xv=()=>{},k9=(t,e=xv)=>(t.catch(e),t),j9=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Zc=(t,e)=>{const r=t.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Jc=t=>{if(t.aborted){const{reason:e}=t;throw new Vm(e)}};function L9(t,e){let r=xv;return new Promise((n,i)=>{const a=()=>i(new Vm(t.reason));if(t.aborted){a();return}r=j9(t,a),e.finally(()=>r()).then(n,i)}).finally(()=>{r=xv})}var Wne=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof Vm?"cancelled":"rejected",error:r}}finally{e?.()}},bv=t=>e=>k9(L9(t,e).then(r=>(Jc(t),r))),B9=t=>{const e=bv(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Cf}=Object,vR={},Hm="listenerMiddleware",Kne=(t,e)=>{const r=n=>j9(t,()=>Zc(n,t.reason));return(n,i)=>{nS(n);const a=new AbortController;r(a);const o=Wne(async()=>{Jc(t),Jc(a.signal);const s=await n({pause:bv(a.signal),delay:B9(a.signal),signal:a.signal});return Jc(a.signal),s},()=>Zc(a,qne));return i?.autoJoin&&e.push(o.catch(xv)),{result:bv(t)(o),cancel(){Zc(a,$ne)}}}},Xne=(t,e)=>{const r=async(n,i)=>{Jc(e);let a=()=>{};const s=[new Promise((c,f)=>{let d=t({predicate:n,effect:(p,g)=>{g.unsubscribe(),c([p,g.getState(),g.getOriginalState()])}});a=()=>{d(),f()}})];i!=null&&s.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await L9(e,Promise.race(s));return Jc(e),c}finally{a()}};return(n,i)=>k9(r(n,i))},U9=t=>{let{type:e,actionCreator:r,matcher:n,predicate:i,effect:a}=t;if(e)i=ya(e).match;else if(r)e=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(Bi(21));return nS(a),{predicate:i,type:e,effect:a}},z9=Cf(t=>{const{type:e,predicate:r,effect:n}=U9(t);return{id:Nne(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Bi(22))}}},{withTypes:()=>z9}),mR=(t,e)=>{const{type:r,effect:n,predicate:i}=U9(e);return Array.from(t.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},Iw=t=>{t.pending.forEach(e=>{Zc(e,Tw)})},Yne=t=>()=>{t.forEach(Iw),t.clear()},yR=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},F9=Cf(ya(`${Hm}/add`),{withTypes:()=>F9}),Qne=ya(`${Hm}/removeAll`),V9=Cf(ya(`${Hm}/remove`),{withTypes:()=>V9}),Zne=(...t)=>{console.error(`${Hm}/error`,...t)},Wp=(t={})=>{const e=new Map,{extra:r,onError:n=Zne}=t;nS(n);const i=d=>(d.unsubscribe=()=>e.delete(d.id),e.set(d.id,d),p=>{d.unsubscribe(),p?.cancelActive&&Iw(d)}),a=d=>{const p=mR(e,d)??z9(d);return i(p)};Cf(a,{withTypes:()=>a});const o=d=>{const p=mR(e,d);return p&&(p.unsubscribe(),d.cancelActive&&Iw(p)),!!p};Cf(o,{withTypes:()=>o});const s=async(d,p,g,y)=>{const b=new AbortController,w=Xne(a,b.signal),E=[];try{d.pending.add(b),await Promise.resolve(d.effect(p,Cf({},g,{getOriginalState:y,condition:(S,I)=>w(S,I).then(Boolean),take:w,delay:B9(b.signal),pause:bv(b.signal),extra:r,signal:b.signal,fork:Kne(b.signal,E),unsubscribe:d.unsubscribe,subscribe:()=>{e.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((S,I,O)=>{S!==b&&(Zc(S,Tw),O.delete(S))})},cancel:()=>{Zc(b,Tw),d.pending.delete(b)},throwIfCancelled:()=>{Jc(b.signal)}})))}catch(S){S instanceof Vm||yR(n,S,{raisedBy:"effect"})}finally{await Promise.all(E),Zc(b,Gne),d.pending.delete(b)}},c=Yne(e);return{middleware:d=>p=>g=>{if(!w9(g))return p(g);if(F9.match(g))return a(g.payload);if(Qne.match(g)){c();return}if(V9.match(g))return o(g.payload);let y=d.getState();const b=()=>{if(y===vR)throw new Error(Bi(23));return y};let w;try{if(w=p(g),e.size>0){const E=d.getState(),S=Array.from(e.values());for(const I of S){let O=!1;try{O=I.predicate(g,E,y)}catch(D){O=!1,yR(n,D,{raisedBy:"predicate"})}O&&s(I,g,d,b)}}}finally{y=vR}return w},startListening:a,stopListening:o,clearListeners:c}};function Bi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Jne={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},H9=qi({name:"chartLayout",initialState:Jne,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,i,a;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:eie,setLayout:tie,setChartSize:rie,setScale:nie}=H9.actions,iie=H9.reducer;function xR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xR(Object(r),!0).forEach(function(n){aie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aie(t,e,r){return(e=oie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oie(t){var e=sie(t,"string");return typeof e=="symbol"?e:e+""}function sie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _v=Math.PI/180,lie=t=>t*180/Math.PI,Hr=(t,e,r,n)=>({x:t+Math.cos(-_v*n)*r,y:e+Math.sin(-_v*n)*r}),$9=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},cie=(t,e)=>{var{x:r,y:n}=t,{x:i,y:a}=e;return Math.sqrt((r-i)**2+(n-a)**2)},uie=(t,e)=>{var{x:r,y:n}=t,{cx:i,cy:a}=e,o=cie({x:r,y:n},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var s=(r-i)/o,c=Math.acos(s);return n>a&&(c=2*Math.PI-c),{radius:o,angle:lie(c),angleInRadian:c}},fie=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:e-a*360,endAngle:r-a*360}},die=(t,e)=>{var{startAngle:r,endAngle:n}=e,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return t+o*360},hie=(t,e)=>{var{x:r,y:n}=t,{radius:i,angle:a}=uie({x:r,y:n},e),{innerRadius:o,outerRadius:s}=e;if(i<o||i>s||i===0)return null;var{startAngle:c,endAngle:f}=fie(e),d=a,p;if(c<=f){for(;d>f;)d-=360;for(;d<c;)d+=360;p=d>=c&&d<=f}else{for(;d>c;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=c}return p?bR(bR({},e),{},{radius:i,angle:die(d,e)}):null};function q9(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function _R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ua(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_R(Object(r),!0).forEach(function(n){pie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_R(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pie(t,e,r){return(e=gie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gie(t){var e=vie(t,"string");return typeof e=="symbol"?e:e+""}function vie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yt(t,e,r){return cr(t)||cr(e)?r:Co(e)?lu(t,e,r):typeof e=="function"?e(t):r}var mie=(t,e,r,n,i)=>{var a,o=-1,s=(a=e?.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<s;c++){var f=c>0?r[c-1].coordinate:r[s-1].coordinate,d=r[c].coordinate,p=c>=s-1?r[0].coordinate:r[c+1].coordinate,g=void 0;if(vn(d-f)!==vn(p-d)){var y=[];if(vn(p-d)===vn(i[1]-i[0])){g=p;var b=d+i[1]-i[0];y[0]=Math.min(b,(b+f)/2),y[1]=Math.max(b,(b+f)/2)}else{g=f;var w=p+i[1]-i[0];y[0]=Math.min(d,(w+d)/2),y[1]=Math.max(d,(w+d)/2)}var E=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(t>E[0]&&t<=E[1]||t>=y[0]&&t<=y[1]){({index:o}=r[c]);break}}else{var S=Math.min(f,p),I=Math.max(f,p);if(t>(S+d)/2&&t<=(I+d)/2){({index:o}=r[c]);break}}}else if(e){for(var O=0;O<s;O++)if(O===0&&t<=(e[O].coordinate+e[O+1].coordinate)/2||O>0&&O<s-1&&t>(e[O].coordinate+e[O-1].coordinate)/2&&t<=(e[O].coordinate+e[O+1].coordinate)/2||O===s-1&&t>(e[O].coordinate+e[O-1].coordinate)/2){({index:o}=e[O]);break}}return o},yie=(t,e,r)=>{if(e&&r){var{width:n,height:i}=r,{align:a,verticalAlign:o,layout:s}=e;if((s==="vertical"||s==="horizontal"&&o==="middle")&&a!=="center"&&Ne(t[a]))return ua(ua({},t),{},{[a]:t[a]+(n||0)});if((s==="horizontal"||s==="vertical"&&a==="center")&&o!=="middle"&&Ne(t[o]))return ua(ua({},t),{},{[o]:t[o]+(i||0)})}return t},Zl=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",G9=(t,e,r,n)=>{if(n)return t.map(s=>s.coordinate);var i,a,o=t.map(s=>(s.coordinate===e&&(i=!0),s.coordinate===r&&(a=!0),s.coordinate));return i||o.push(e),a||o.push(r),o},W9=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:i,range:a,scale:o,realScaleType:s,isCategorical:c,categoricalDomain:f,tickCount:d,ticks:p,niceTicks:g,axisType:y}=t;if(!o)return null;var b=s==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=i==="category"&&o.bandwidth?o.bandwidth()/b:0;if(w=y==="angleAxis"&&a&&a.length>=2?vn(a[0]-a[1])*2*w:w,p||g){var E=(p||g||[]).map((S,I)=>{var O=n?n.indexOf(S):S;return{coordinate:o(O)+w,value:S,offset:w,index:I}});return E.filter(S=>!Vi(S.coordinate))}return c&&f?f.map((S,I)=>({coordinate:o(S)+w,value:S,index:I,offset:w})):o.ticks&&d!=null?o.ticks(d).map((S,I)=>({coordinate:o(S)+w,value:S,offset:w,index:I})):o.domain().map((S,I)=>({coordinate:o(S)+w,value:n?n[S]:S,index:I,offset:w}))},wR=1e-4,xie=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),i=Math.min(n[0],n[1])-wR,a=Math.max(n[0],n[1])+wR,o=t(e[0]),s=t(e[r-1]);(o<i||o>a||s<i||s>a)&&t.domain([e[0],e[r-1]])}},bie=(t,e)=>{if(!e||e.length!==2||!Ne(e[0])||!Ne(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ne(t[0])||t[0]<r)&&(i[0]=r),(!Ne(t[1])||t[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},_ie=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0,o=0;o<e;++o){var s=Vi(t[o][r][1])?t[o][r][0]:t[o][r][1];s>=0?(t[o][r][0]=i,t[o][r][1]=i+s,i=t[o][r][1]):(t[o][r][0]=a,t[o][r][1]=a+s,a=t[o][r][1])}},wie=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var i=0,a=0;a<e;++a){var o=Vi(t[a][r][1])?t[a][r][0]:t[a][r][1];o>=0?(t[a][r][0]=i,t[a][r][1]=i+o,i=t[a][r][1]):(t[a][r][0]=0,t[a][r][1]=0)}},Eie={sign:_ie,expand:Zte,none:Uf,silhouette:Jte,wiggle:ere,positive:wie},Aie=(t,e,r)=>{var n=Eie[r],i=Qte().keys(e).value((a,o)=>+Yt(a,o,0)).order(yw).offset(n);return i(t)};function Sie(t){return t==null?void 0:String(t)}function ER(t){var{axis:e,ticks:r,bandSize:n,entry:i,index:a,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!cr(i[e.dataKey])){var s=Lk(r,"value",i[e.dataKey]);if(s)return s.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Yt(i,cr(o)?e.dataKey:o);return cr(c)?null:e.scale(c)}var AR=t=>{var{axis:e,ticks:r,offset:n,bandSize:i,entry:a,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var s=Yt(a,e.dataKey,e.scale.domain()[o]);return cr(s)?null:e.scale(s)-i/2+n},Cie=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Tie=t=>{var e=t.flat(2).filter(Ne);return[Math.min(...e),Math.max(...e)]},Iie=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Oie=(t,e,r)=>{if(t!=null)return Iie(Object.keys(t).reduce((n,i)=>{var a=t[i],{stackedData:o}=a,s=o.reduce((c,f)=>{var d=q9(f,e,r),p=Tie(d);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]))},SR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mp=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var i=Bm(e,d=>d.coordinate),a=1/0,o=1,s=i.length;o<s;o++){var c=i[o],f=i[o-1];a=Math.min((c.coordinate||0)-(f.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function TR(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:i,name:a}=t;return ua(ua({},e),{},{dataKey:r,payload:n,value:i,name:a})}function od(t,e){if(t)return String(t);if(typeof e=="string")return e}function Rie(t,e,r,n,i){if(r==="horizontal"||r==="vertical"){var a=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return a?{x:t,y:e}:null}return n?hie({x:t,y:e},n):null}var Pie=(t,e,r,n)=>{var i=e.find(f=>f&&f.index===r);if(i){if(t==="horizontal")return{x:i.coordinate,y:n.y};if(t==="vertical")return{x:n.x,y:i.coordinate};if(t==="centric"){var a=i.coordinate,{radius:o}=n;return ua(ua(ua({},n),Hr(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var s=i.coordinate,{angle:c}=n;return ua(ua(ua({},n),Hr(n.cx,n.cy,s,c)),{},{angle:c,radius:s})}return{x:0,y:0}},Die=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Ss=t=>t.layout.width,Cs=t=>t.layout.height,Nie=t=>t.layout.scale,K9=t=>t.layout.margin,$m=ne(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),qm=ne(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),X9="data-recharts-item-index",Y9="data-recharts-item-data-key",Kp=60;function IR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function s1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(r),!0).forEach(function(n){Mie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mie(t,e,r){return(e=kie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kie(t){var e=jie(t,"string");return typeof e=="symbol"?e:e+""}function jie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lie=t=>t.brush.height;function Bie(t){var e=qm(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Kp;return r+i}return r},0)}function Uie(t){var e=qm(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Kp;return r+i}return r},0)}function zie(t){var e=$m(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Fie(t){var e=$m(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var nn=ne([Ss,Cs,K9,Lie,Bie,Uie,zie,Fie,y9,ine],(t,e,r,n,i,a,o,s,c,f)=>{var d={left:(r.left||0)+i,right:(r.right||0)+a},p={top:(r.top||0)+o,bottom:(r.bottom||0)+s},g=s1(s1({},p),d),y=g.bottom;g.bottom+=n,g=yie(g,c,f);var b=t-g.left-g.right,w=e-g.top-g.bottom;return s1(s1({brushBottom:y},g),{},{width:Math.max(b,0),height:Math.max(w,0)})}),Vie=ne(nn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),iS=ne(Ss,Cs,(t,e)=>({x:0,y:0,width:t,height:e})),Hie=C.createContext(null),bi=()=>C.useContext(Hie)!=null,Gm=t=>t.brush,Wm=ne([Gm,nn,K9],(t,e,r)=>({height:t.height,x:Ne(t.x)?t.x:e.left,y:Ne(t.y)?t.y:e.top+e.height+e.brushBottom-(r?.bottom||0),width:Ne(t.width)?t.width:e.width})),aS=()=>{var t,e=bi(),r=Re(Vie),n=Re(Wm),i=(t=Re(Gm))===null||t===void 0?void 0:t.padding;return!e||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},$ie={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Q9=()=>{var t;return(t=Re(nn))!==null&&t!==void 0?t:$ie},oS=()=>Re(Ss),sS=()=>Re(Cs),qie=()=>Re(t=>t.layout.margin),pt=t=>t.layout.layoutType,Km=()=>Re(pt),Gie={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Z9=qi({name:"legend",initialState:Gie,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var r=cs(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)}}}),{setLegendSize:OR,setLegendSettings:Wie,addLegendPayload:J9,removeLegendPayload:e7}=Z9.actions,Kie=Z9.reducer,Xie=["contextPayload"];function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ow.apply(null,arguments)}function RR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ff(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RR(Object(r),!0).forEach(function(n){lS(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lS(t,e,r){return(e=Yie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yie(t){var e=Qie(t,"string");return typeof e=="symbol"?e:e+""}function Qie(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zie(t,e){if(t==null)return{};var r,n,i=Jie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Jie(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function eae(t){return t.value}function tae(t){var{contextPayload:e}=t,r=Zie(t,Xie),n=p9(e,t.payloadUniqBy,eae),i=Ff(Ff({},r),{},{payload:n});return C.isValidElement(t.content)?C.cloneElement(t.content,i):typeof t.content=="function"?C.createElement(t.content,i):C.createElement(XA,i)}function rae(t,e,r,n,i,a){var{layout:o,align:s,verticalAlign:c}=e,f,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(s==="center"&&o==="vertical"?f={left:((n||0)-a.width)/2}:f=s==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((i||0)-a.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Ff(Ff({},f),d)}function nae(t){var e=hr();return C.useEffect(()=>{e(Wie(t))},[e,t]),null}function iae(t){var e=hr();return C.useEffect(()=>(e(OR(t)),()=>{e(OR({width:0,height:0}))}),[e,t]),null}function aae(t){var e=sne(),r=_te(),n=qie(),{width:i,height:a,wrapperStyle:o,portal:s}=t,[c,f]=x9([e]),d=oS(),p=sS();if(d==null||p==null)return null;var g=d-(n.left||0)-(n.right||0),y=Xm.getWidthOrHeight(t.layout,a,i,g),b=s?o:Ff(Ff({position:"absolute",width:y?.width||i||"auto",height:y?.height||a||"auto"},rae(o,t,n,d,p,c)),o),w=s??r;if(w==null)return null;var E=C.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:f},C.createElement(nae,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),C.createElement(iae,{width:c.width,height:c.height}),C.createElement(tae,Ow({},t,y,{margin:n,chartWidth:d,chartHeight:p,contextPayload:e})));return Fk.createPortal(E,w)}class Xm extends C.PureComponent{static getWidthOrHeight(e,r,n,i){return e==="vertical"&&Ne(r)?{height:r}:e==="horizontal"?{width:n||i}:null}render(){return C.createElement(aae,this.props)}}lS(Xm,"displayName","Legend");lS(Xm,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Rw(){return Rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rw.apply(null,arguments)}function PR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Kb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PR(Object(r),!0).forEach(function(n){oae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oae(t,e,r){return(e=sae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sae(t){var e=lae(t,"string");return typeof e=="symbol"?e:e+""}function lae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cae(t){return Array.isArray(t)&&Co(t[0])&&Co(t[1])?t.join(" ~ "):t}var uae=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:o,itemSorter:s,wrapperClassName:c,labelClassName:f,label:d,labelFormatter:p,accessibilityLayer:g=!1}=t,y=()=>{if(a&&a.length){var k={padding:0,margin:0},B=(s?Bm(a,s):a).map((R,N)=>{if(R.type==="none")return null;var L=R.formatter||o||cae,{value:U,name:j}=R,V=U,F=j;if(L){var he=L(U,j,R,N,a);if(Array.isArray(he))[V,F]=he;else if(he!=null)V=he;else return null}var we=Kb({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return C.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:we},Co(F)?C.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Co(F)?C.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,C.createElement("span",{className:"recharts-tooltip-item-value"},V),C.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return C.createElement("ul",{className:"recharts-tooltip-item-list",style:k},B)}return null},b=Kb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=Kb({margin:0},i),E=!cr(d),S=E?d:"",I=bt("recharts-default-tooltip",c),O=bt("recharts-tooltip-label",f);E&&p&&a!==void 0&&a!==null&&(S=p(d,a));var D=g?{role:"status","aria-live":"assertive"}:{};return C.createElement("div",Rw({className:I,style:b},D),C.createElement("p",{className:O,style:w},C.isValidElement(S)?S:"".concat(S)),y())},Ch="recharts-tooltip-wrapper",fae={visibility:"hidden"};function dae(t){var{coordinate:e,translateX:r,translateY:n}=t;return bt(Ch,{["".concat(Ch,"-right")]:Ne(r)&&e&&Ne(e.x)&&r>=e.x,["".concat(Ch,"-left")]:Ne(r)&&e&&Ne(e.x)&&r<e.x,["".concat(Ch,"-bottom")]:Ne(n)&&e&&Ne(e.y)&&n>=e.y,["".concat(Ch,"-top")]:Ne(n)&&e&&Ne(e.y)&&n<e.y})}function DR(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:s,viewBox:c,viewBoxDimension:f}=t;if(a&&Ne(a[n]))return a[n];var d=r[n]-s-(i>0?i:0),p=r[n]+i;if(e[n])return o[n]?d:p;var g=c[n];if(g==null)return 0;if(o[n]){var y=d,b=g;return y<b?Math.max(p,g):Math.max(d,g)}if(f==null)return 0;var w=p+s,E=g+f;return w>E?Math.max(d,g):Math.max(p,g)}function hae(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function pae(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:s,viewBox:c}=t,f,d,p;return o.height>0&&o.width>0&&r?(d=DR({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),p=DR({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),f=hae({translateX:d,translateY:p,useTranslate3d:s})):f=fae,{cssProperties:f,cssClasses:dae({translateX:d,translateY:p,coordinate:r})}}function NR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function l1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NR(Object(r),!0).forEach(function(n){Pw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pw(t,e,r){return(e=gae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gae(t){var e=vae(t,"string");return typeof e=="symbol"?e:e+""}function vae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mae extends C.PureComponent{constructor(){super(...arguments),Pw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Pw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:o,hasPayload:s,isAnimationActive:c,offset:f,position:d,reverseDirection:p,useTranslate3d:g,viewBox:y,wrapperStyle:b,lastBoundingBox:w,innerRef:E,hasPortalFromProps:S}=this.props,{cssClasses:I,cssProperties:O}=pae({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:f,position:d,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:y}),D=S?{}:l1(l1({transition:c&&e?"transform ".concat(n,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),k=l1(l1({},D),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},b);return C.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:I,style:k,ref:E},a)}}var yae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Jl={devToolsEnabled:!1,isSsr:yae()},t7=()=>Re(t=>t.rootProps.accessibilityLayer);function $i(t){return Number.isFinite(t)}function Vf(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dw.apply(null,arguments)}function MR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(r),!0).forEach(function(n){xae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xae(t,e,r){return(e=bae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bae(t){var e=_ae(t,"string");return typeof e=="symbol"?e:e+""}function _ae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jR={curveBasisClosed:zte,curveBasisOpen:Fte,curveBasis:Ute,curveBumpX:Ste,curveBumpY:Cte,curveLinearClosed:Vte,curveLinear:jm,curveMonotoneX:Hte,curveMonotoneY:$te,curveNatural:qte,curveStep:Gte,curveStepAfter:Kte,curveStepBefore:Wte},c1=t=>$i(t.x)&&$i(t.y),Th=t=>t.x,Ih=t=>t.y,wae=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat($p(t));return(r==="curveMonotone"||r==="curveBump")&&e?jR["".concat(r).concat(e==="vertical"?"Y":"X")]:jR[r]||jm},Eae=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=t,o=wae(e,i),s=a?r.filter(c1):r,c;if(Array.isArray(n)){var f=a?n.filter(p=>c1(p)):n,d=s.map((p,g)=>kR(kR({},p),{},{base:f[g]}));return i==="vertical"?c=t1().y(Ih).x1(Th).x0(p=>p.base.x):c=t1().x(Th).y1(Ih).y0(p=>p.base.y),c.defined(c1).curve(o),c(d)}return i==="vertical"&&Ne(n)?c=t1().y(Ih).x1(Th).x0(n):Ne(n)?c=t1().x(Th).y1(Ih).y0(n):c=Kk().x(Th).y(Ih),c.defined(c1).curve(o),c(s)},cS=t=>{var{className:e,points:r,path:n,pathRef:i}=t;if((!r||!r.length)&&!n)return null;var a=r&&r.length?Eae(t):n;return C.createElement("path",Dw({},Mo(t),FA(t),{className:bt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},Aae=["x","y","top","left","width","height","className"];function Nw(){return Nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nw.apply(null,arguments)}function LR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(r),!0).forEach(function(n){Cae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cae(t,e,r){return(e=Tae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tae(t){var e=Iae(t,"string");return typeof e=="symbol"?e:e+""}function Iae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oae(t,e){if(t==null)return{};var r,n,i=Rae(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Rae(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Pae=(t,e,r,n,i,a)=>"M".concat(t,",").concat(i,"v").concat(n,"M").concat(a,",").concat(e,"h").concat(r),Dae=t=>{var{x:e=0,y:r=0,top:n=0,left:i=0,width:a=0,height:o=0,className:s}=t,c=Oae(t,Aae),f=Sae({x:e,y:r,top:n,left:i,width:a,height:o},c);return!Ne(e)||!Ne(r)||!Ne(a)||!Ne(o)||!Ne(n)||!Ne(i)?null:C.createElement("path",Nw({},dr(f,!0),{className:bt("recharts-cross",s),d:Pae(e,r,a,o,n,i)}))};function Nae(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function BR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Mae(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BR(Object(r),!0).forEach(function(n){kae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kae(t,e,r){return(e=jae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jae(t){var e=Lae(t,"string");return typeof e=="symbol"?e:e+""}function Lae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kn(t,e){var r=Mae({},t),n=e,i=Object.keys(e),a=i.reduce((o,s)=>(o[s]===void 0&&n[s]!==void 0&&(o[s]=n[s]),o),r);return a}function Bae(){}function UR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UR(Object(r),!0).forEach(function(n){Uae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uae(t,e,r){return(e=zae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zae(t){var e=Fae(t,"string");return typeof e=="symbol"?e:e+""}function Fae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),r7=(t,e,r)=>t.map(n=>"".concat(Vae(n)," ").concat(e,"ms ").concat(r)).join(","),Hae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(i=>n.includes(i))),yp=(t,e)=>Object.keys(e).reduce((r,n)=>zR(zR({},r),{},{[n]:t(n,e[n])}),{});function FR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Rn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(r),!0).forEach(function(n){$ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $ae(t,e,r){return(e=qae(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qae(t){var e=Gae(t,"string");return typeof e=="symbol"?e:e+""}function Gae(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wv=(t,e,r)=>t+(e-t)*r,Mw=t=>{var{from:e,to:r}=t;return e!==r},n7=(t,e,r)=>{var n=yp((i,a)=>{if(Mw(a)){var[o,s]=t(a.from,a.to,a.velocity);return Rn(Rn({},a),{},{from:o,velocity:s})}return a},e);return r<1?yp((i,a)=>Mw(a)?Rn(Rn({},a),{},{velocity:wv(a.velocity,n[i].velocity,r),from:wv(a.from,n[i].from,r)}):a,e):n7(t,n,r-1)};function Wae(t,e,r,n,i,a){var o,s=n.reduce((g,y)=>Rn(Rn({},g),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),c=()=>yp((g,y)=>y.from,s),f=()=>!Object.values(s).filter(Mw).length,d=null,p=g=>{o||(o=g);var y=g-o,b=y/r.dt;s=n7(r,s,b),i(Rn(Rn(Rn({},t),e),c())),o=g,f()||(d=a.setTimeout(p))};return()=>(d=a.setTimeout(p),()=>{d()})}function Kae(t,e,r,n,i,a,o){var s=null,c=i.reduce((p,g)=>Rn(Rn({},p),{},{[g]:[t[g],e[g]]}),{}),f,d=p=>{f||(f=p);var g=(p-f)/n,y=yp((w,E)=>wv(...E,r(g)),c);if(a(Rn(Rn(Rn({},t),e),y)),g<1)s=o.setTimeout(d);else{var b=yp((w,E)=>wv(...E,r(1)),c);a(Rn(Rn(Rn({},t),e),b))}};return()=>(s=o.setTimeout(d),()=>{s()})}const Xae=(t,e,r,n,i,a)=>{var o=Hae(t,e);return r.isStepper===!0?Wae(t,e,r,o,i,a):Kae(t,e,r,n,o,i,a)};var Ev=1e-4,i7=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],a7=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),VR=(t,e)=>r=>{var n=i7(t,e);return a7(n,r)},Yae=(t,e)=>r=>{var n=i7(t,e),i=[...n.map((a,o)=>a*o).slice(1),0];return a7(i,r)},HR=function(){for(var e,r,n,i,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];if(o.length===1)switch(o[0]){case"linear":[e,n,r,i]=[0,0,1,1];break;case"ease":[e,n,r,i]=[.25,.1,.25,1];break;case"ease-in":[e,n,r,i]=[.42,0,1,1];break;case"ease-out":[e,n,r,i]=[.42,0,.58,1];break;case"ease-in-out":[e,n,r,i]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,n,r,i]=c[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else o.length===4&&([e,n,r,i]=o);var f=VR(e,r),d=VR(n,i),p=Yae(e,r),g=b=>b>1?1:b<0?0:b,y=b=>{for(var w=b>1?1:b,E=w,S=0;S<8;++S){var I=f(E)-w,O=p(E);if(Math.abs(I-w)<Ev||O<Ev)return d(E);E=g(E-I/O)}return d(E)};return y.isStepper=!1,y},Qae=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=e,a=(o,s,c)=>{var f=-(o-s)*r,d=c*n,p=c+(f-d)*i/1e3,g=c*i/1e3+o;return Math.abs(g-s)<Ev&&Math.abs(p)<Ev?[s,0]:[g,p]};return a.isStepper=!0,a.dt=i,a},Zae=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HR(t);case"spring":return Qae();default:if(t.split("(")[0]==="cubic-bezier")return HR(t)}return typeof t=="function"?t:null};function Jae(t){var e,r=()=>null,n=!1,i=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,[c,...f]=s;if(typeof c=="number"){i=t.setTimeout(a.bind(null,f),c);return}a(c),i=t.setTimeout(a.bind(null,f));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,i&&(i(),i=null),a(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class eoe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function toe(){return Jae(new eoe)}var roe=C.createContext(toe);function noe(t,e){var r=C.useContext(roe);return C.useMemo(()=>e??r(t),[t,e,r])}var ioe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$R={t:0},Xb={t:1};function Xp(t){var e=kn(t,ioe),{isActive:r,canBegin:n,duration:i,easing:a,begin:o,onAnimationEnd:s,onAnimationStart:c,children:f}=e,d=noe(e.animationId,e.animationManager),[p,g]=C.useState(r?$R:Xb),y=C.useRef(null);return C.useEffect(()=>{r||g(Xb)},[r]),C.useEffect(()=>{if(!r||!n)return Bae;var b=Xae($R,Xb,Zae(a),i,g,d.getTimeoutController()),w=()=>{y.current=b()};return d.start([c,o,w,i,s]),()=>{d.stop(),y.current&&y.current(),s()}},[r,n,i,a,o,c,s,d]),f(p.t)}function Yp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=C.useRef(pp(e)),n=C.useRef(t);return n.current!==t&&(r.current=pp(e),n.current=t),r.current}function qR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(r),!0).forEach(function(n){aoe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aoe(t,e,r){return(e=ooe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ooe(t){var e=soe(t,"string");return typeof e=="symbol"?e:e+""}function soe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Av(){return Av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Av.apply(null,arguments)}var WR=(t,e,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,s=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,f;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],p=0,g=4;p<g;p++)d[p]=i[p]>a?a:i[p];f="M".concat(t,",").concat(e+o*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+s*d[0],",").concat(e)),f+="L ".concat(t+r-s*d[1],",").concat(e),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(e+o*d[1])),f+="L ".concat(t+r,",").concat(e+n-o*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-s*d[2],",").concat(e+n)),f+="L ".concat(t+s*d[3],",").concat(e+n),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+n-o*d[3])),f+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);f="M ".concat(t,",").concat(e+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+s*y,",").concat(e,`
            L `).concat(t+r-s*y,",").concat(e,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+r,",").concat(e+o*y,`
            L `).concat(t+r,",").concat(e+n-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+r-s*y,",").concat(e+n,`
            L `).concat(t+s*y,",").concat(e+n,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t,",").concat(e+n-o*y," Z")}else f="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return f},loe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},o7=t=>{var e=kn(t,loe),r=C.useRef(null),[n,i]=C.useState(-1);C.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var he=r.current.getTotalLength();he&&i(he)}catch{}},[]);var{x:a,y:o,width:s,height:c,radius:f,className:d}=e,{animationEasing:p,animationDuration:g,animationBegin:y,isAnimationActive:b,isUpdateAnimationActive:w}=e,E=C.useRef(s),S=C.useRef(c),I=C.useRef(a),O=C.useRef(o),D=C.useMemo(()=>({x:a,y:o,width:s,height:c,radius:f}),[a,o,s,c,f]),k=Yp(D,"rectangle-");if(a!==+a||o!==+o||s!==+s||c!==+c||s===0||c===0)return null;var B=bt("recharts-rectangle",d);if(!w)return C.createElement("path",Av({},dr(e,!0),{className:B,d:WR(a,o,s,c,f)}));var R=E.current,N=S.current,L=I.current,U=O.current,j="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),F=r7(["strokeDasharray"],g,typeof p=="string"?p:void 0);return C.createElement(Xp,{animationId:k,key:k,canBegin:n>0,duration:g,easing:p,isActive:w,begin:y},he=>{var we=vr(R,s,he),Y=vr(N,c,he),ie=vr(L,a,he),K=vr(U,o,he);r.current&&(E.current=we,S.current=Y,I.current=ie,O.current=K);var ge;return b?he>0?ge={transition:F,strokeDasharray:V}:ge={strokeDasharray:j}:ge={strokeDasharray:V},C.createElement("path",Av({},dr(e,!0),{className:B,d:WR(ie,K,we,Y,f),ref:r,style:GR(GR({},ge),e.style)}))})};function s7(t){var{cx:e,cy:r,radius:n,startAngle:i,endAngle:a}=t,o=Hr(e,r,n,i),s=Hr(e,r,n,a);return{points:[o,s],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kw.apply(null,arguments)}var coe=(t,e)=>{var r=vn(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},u1=t=>{var{cx:e,cy:r,radius:n,angle:i,sign:a,isExternal:o,cornerRadius:s,cornerIsExternal:c}=t,f=s*(o?1:-1)+n,d=Math.asin(s/f)/_v,p=c?i:i+a*d,g=Hr(e,r,f,p),y=Hr(e,r,n,p),b=c?i-a*d:i,w=Hr(e,r,f*Math.cos(d*_v),b);return{center:g,circleTangency:y,lineTangency:w,theta:d}},l7=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:o}=t,s=coe(a,o),c=a+s,f=Hr(e,r,i,a),d=Hr(e,r,i,c),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var g=Hr(e,r,n,a),y=Hr(e,r,n,c);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else p+="L ".concat(e,",").concat(r," Z");return p},uoe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:s,startAngle:c,endAngle:f}=t,d=vn(f-c),{circleTangency:p,lineTangency:g,theta:y}=u1({cx:e,cy:r,radius:i,angle:c,sign:d,cornerRadius:a,cornerIsExternal:s}),{circleTangency:b,lineTangency:w,theta:E}=u1({cx:e,cy:r,radius:i,angle:f,sign:-d,cornerRadius:a,cornerIsExternal:s}),S=s?Math.abs(c-f):Math.abs(c-f)-y-E;if(S<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):l7({cx:e,cy:r,innerRadius:n,outerRadius:i,startAngle:c,endAngle:f});var I="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:O,lineTangency:D,theta:k}=u1({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),{circleTangency:B,lineTangency:R,theta:N}=u1({cx:e,cy:r,radius:n,angle:f,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),L=s?Math.abs(c-f):Math.abs(c-f)-k-N;if(L<0&&a===0)return"".concat(I,"L").concat(e,",").concat(r,"Z");I+="L".concat(R.x,",").concat(R.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(d>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(D.x,",").concat(D.y,"Z")}else I+="L".concat(e,",").concat(r,"Z");return I},foe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},c7=t=>{var e=kn(t,foe),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:c,startAngle:f,endAngle:d,className:p}=e;if(a<i||f===d)return null;var g=bt("recharts-sector",p),y=a-i,b=qn(o,y,0,!0),w;return b>0&&Math.abs(f-d)<360?w=uoe({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(b,y/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:f,endAngle:d}):w=l7({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:f,endAngle:d}),C.createElement("path",kw({},dr(e,!0),{className:g,d:w}))};function doe(t,e,r){var n,i,a,o;if(t==="horizontal")n=e.x,a=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:s,cy:c,innerRadius:f,outerRadius:d,angle:p}=e,g=Hr(s,c,f,p),y=Hr(s,c,d,p);n=g.x,i=g.y,a=y.x,o=y.y}else return s7(e);return[{x:n,y:i},{x:a,y:o}]}var Yb={},Qb={},Zb={},KR;function hoe(){return KR||(KR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v9();function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Zb)),Zb}var XR;function poe(){return XR||(XR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hoe();function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Qb)),Qb}var YR;function goe(){return YR||(YR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m9(),r=poe();function n(i,a,o){o&&typeof o!="number"&&e.isIterateeCall(i,a,o)&&(a=o=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),o=o===void 0?i<a?1:-1:r.toFinite(o);const s=Math.max(Math.ceil((a-i)/(o||1)),0),c=new Array(s);for(let f=0;f<s;f++)c[f]=i,i+=o;return c}t.range=n})(Yb)),Yb}var Jb,QR;function voe(){return QR||(QR=1,Jb=goe().range),Jb}var moe=voe();const u7=Io(moe);function Nl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function yoe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uS(t){let e,r,n;t.length!==2?(e=Nl,r=(s,c)=>Nl(t(s),c),n=(s,c)=>t(s)-c):(e=t===Nl||t===yoe?t:xoe,r=t,n=t);function i(s,c,f=0,d=s.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;r(s[p],c)<0?f=p+1:d=p}while(f<d)}return f}function a(s,c,f=0,d=s.length){if(f<d){if(e(c,c)!==0)return d;do{const p=f+d>>>1;r(s[p],c)<=0?f=p+1:d=p}while(f<d)}return f}function o(s,c,f=0,d=s.length){const p=i(s,c,f,d-1);return p>f&&n(s[p-1],c)>-n(s[p],c)?p-1:p}return{left:i,center:o,right:a}}function xoe(){return 0}function f7(t){return t===null?NaN:+t}function*boe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const _oe=uS(Nl),Qp=_oe.right;uS(f7).center;class ZR extends Map{constructor(e,r=Aoe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(JR(this,e))}has(e){return super.has(JR(this,e))}set(e,r){return super.set(woe(this,e),r)}delete(e){return super.delete(Eoe(this,e))}}function JR({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function woe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Eoe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Aoe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Soe(t=Nl){if(t===Nl)return d7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function d7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Coe=Math.sqrt(50),Toe=Math.sqrt(10),Ioe=Math.sqrt(2);function Sv(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=Coe?10:a>=Toe?5:a>=Ioe?2:1;let s,c,f;return i<0?(f=Math.pow(10,-i)/o,s=Math.round(t*f),c=Math.round(e*f),s/f<t&&++s,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*o,s=Math.round(t/f),c=Math.round(e/f),s*f<t&&++s,c*f>e&&--c),c<s&&.5<=r&&r<2?Sv(t,e,r*2):[s,c,f]}function jw(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?Sv(e,t,r):Sv(t,e,r);if(!(a>=i))return[];const s=a-i+1,c=new Array(s);if(n)if(o<0)for(let f=0;f<s;++f)c[f]=(a-f)/-o;else for(let f=0;f<s;++f)c[f]=(a-f)*o;else if(o<0)for(let f=0;f<s;++f)c[f]=(i+f)/-o;else for(let f=0;f<s;++f)c[f]=(i+f)*o;return c}function Lw(t,e,r){return e=+e,t=+t,r=+r,Sv(t,e,r)[2]}function Bw(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?Lw(e,t,r):Lw(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function eP(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function tP(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function h7(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?d7:Soe(i);n>r;){if(n-r>600){const c=n-r+1,f=e-r+1,d=Math.log(c),p=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*p*(c-p)/c)*(f-c/2<0?-1:1),y=Math.max(r,Math.floor(e-f*p/c+g)),b=Math.min(n,Math.floor(e+(c-f)*p/c+g));h7(t,e,y,b,i)}const a=t[e];let o=r,s=n;for(Oh(t,r,e),i(t[n],a)>0&&Oh(t,r,n);o<s;){for(Oh(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[r],a)===0?Oh(t,r,s):(++s,Oh(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function Oh(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Ooe(t,e,r){if(t=Float64Array.from(boe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return tP(t);if(e>=1)return eP(t);var n,i=(n-1)*e,a=Math.floor(i),o=eP(h7(t,a).subarray(0,a+1)),s=tP(t.subarray(a+1));return o+(s-o)*(i-a)}}function Roe(t,e,r=f7){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),s=+r(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Poe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function ba(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ts(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Uw=Symbol("implicit");function fS(){var t=new ZR,e=[],r=[],n=Uw;function i(a){let o=t.get(a);if(o===void 0){if(n!==Uw)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new ZR;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return fS(e,r).unknown(n)},ba.apply(i,arguments),i}function dS(){var t=fS().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,o,s=!1,c=0,f=0,d=.5;delete t.unknown;function p(){var g=e().length,y=i<n,b=y?i:n,w=y?n:i;a=(w-b)/Math.max(1,g-c+f*2),s&&(a=Math.floor(a)),b+=(w-b-a*(g-c))*d,o=a*(1-c),s&&(b=Math.round(b),o=Math.round(o));var E=Poe(g).map(function(S){return b+a*S});return r(y?E.reverse():E)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([n,i]=g,n=+n,i=+i,p()):[n,i]},t.rangeRound=function(g){return[n,i]=g,n=+n,i=+i,s=!0,p()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(g){return arguments.length?(s=!!g,p()):s},t.padding=function(g){return arguments.length?(c=Math.min(1,f=+g),p()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),p()):c},t.paddingOuter=function(g){return arguments.length?(f=+g,p()):f},t.align=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),p()):d},t.copy=function(){return dS(e(),[n,i]).round(s).paddingInner(c).paddingOuter(f).align(d)},ba.apply(p(),arguments)}function p7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return p7(e())},t}function Doe(){return p7(dS.apply(null,arguments).paddingInner(1))}function hS(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function g7(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Zp(){}var xp=.7,Cv=1/xp,Tf="\\s*([+-]?\\d+)\\s*",bp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Noe=/^#([0-9a-f]{3,8})$/,Moe=new RegExp(`^rgb\\(${Tf},${Tf},${Tf}\\)$`),koe=new RegExp(`^rgb\\(${wo},${wo},${wo}\\)$`),joe=new RegExp(`^rgba\\(${Tf},${Tf},${Tf},${bp}\\)$`),Loe=new RegExp(`^rgba\\(${wo},${wo},${wo},${bp}\\)$`),Boe=new RegExp(`^hsl\\(${bp},${wo},${wo}\\)$`),Uoe=new RegExp(`^hsla\\(${bp},${wo},${wo},${bp}\\)$`),rP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hS(Zp,_p,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nP,formatHex:nP,formatHex8:zoe,formatHsl:Foe,formatRgb:iP,toString:iP});function nP(){return this.rgb().formatHex()}function zoe(){return this.rgb().formatHex8()}function Foe(){return v7(this).formatHsl()}function iP(){return this.rgb().formatRgb()}function _p(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Noe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?aP(e):r===3?new mi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?f1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?f1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Moe.exec(t))?new mi(e[1],e[2],e[3],1):(e=koe.exec(t))?new mi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=joe.exec(t))?f1(e[1],e[2],e[3],e[4]):(e=Loe.exec(t))?f1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Boe.exec(t))?lP(e[1],e[2]/100,e[3]/100,1):(e=Uoe.exec(t))?lP(e[1],e[2]/100,e[3]/100,e[4]):rP.hasOwnProperty(t)?aP(rP[t]):t==="transparent"?new mi(NaN,NaN,NaN,0):null}function aP(t){return new mi(t>>16&255,t>>8&255,t&255,1)}function f1(t,e,r,n){return n<=0&&(t=e=r=NaN),new mi(t,e,r,n)}function Voe(t){return t instanceof Zp||(t=_p(t)),t?(t=t.rgb(),new mi(t.r,t.g,t.b,t.opacity)):new mi}function zw(t,e,r,n){return arguments.length===1?Voe(t):new mi(t,e,r,n??1)}function mi(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}hS(mi,zw,g7(Zp,{brighter(t){return t=t==null?Cv:Math.pow(Cv,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xp:Math.pow(xp,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mi(eu(this.r),eu(this.g),eu(this.b),Tv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oP,formatHex:oP,formatHex8:Hoe,formatRgb:sP,toString:sP}));function oP(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}`}function Hoe(){return`#${$c(this.r)}${$c(this.g)}${$c(this.b)}${$c((isNaN(this.opacity)?1:this.opacity)*255)}`}function sP(){const t=Tv(this.opacity);return`${t===1?"rgb(":"rgba("}${eu(this.r)}, ${eu(this.g)}, ${eu(this.b)}${t===1?")":`, ${t})`}`}function Tv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function eu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $c(t){return t=eu(t),(t<16?"0":"")+t.toString(16)}function lP(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ba(t,e,r,n)}function v7(t){if(t instanceof Ba)return new Ba(t.h,t.s,t.l,t.opacity);if(t instanceof Zp||(t=_p(t)),!t)return new Ba;if(t instanceof Ba)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,c=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Ba(o,s,c,t.opacity)}function $oe(t,e,r,n){return arguments.length===1?v7(t):new Ba(t,e,r,n??1)}function Ba(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}hS(Ba,$oe,g7(Zp,{brighter(t){return t=t==null?Cv:Math.pow(Cv,t),new Ba(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xp:Math.pow(xp,t),new Ba(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new mi(e_(t>=240?t-240:t+120,i,n),e_(t,i,n),e_(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Ba(cP(this.h),d1(this.s),d1(this.l),Tv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Tv(this.opacity);return`${t===1?"hsl(":"hsla("}${cP(this.h)}, ${d1(this.s)*100}%, ${d1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cP(t){return t=(t||0)%360,t<0?t+360:t}function d1(t){return Math.max(0,Math.min(1,t||0))}function e_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const pS=t=>()=>t;function qoe(t,e){return function(r){return t+r*e}}function Goe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Woe(t){return(t=+t)==1?m7:function(e,r){return r-e?Goe(e,r,t):pS(isNaN(e)?r:e)}}function m7(t,e){var r=e-t;return r?qoe(t,r):pS(isNaN(t)?e:t)}const uP=(function t(e){var r=Woe(e);function n(i,a){var o=r((i=zw(i)).r,(a=zw(a)).r),s=r(i.g,a.g),c=r(i.b,a.b),f=m7(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=s(d),i.b=c(d),i.opacity=f(d),i+""}}return n.gamma=t,n})(1);function Koe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Xoe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Yoe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=sd(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function Qoe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Iv(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Zoe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=sd(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Fw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,t_=new RegExp(Fw.source,"g");function Joe(t){return function(){return t}}function ese(t){return function(e){return t(e)+""}}function tse(t,e){var r=Fw.lastIndex=t_.lastIndex=0,n,i,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(n=Fw.exec(t))&&(i=t_.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Iv(n,i)})),r=t_.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?ese(c[0].x):Joe(e):(e=c.length,function(f){for(var d=0,p;d<e;++d)s[(p=c[d]).i]=p.x(f);return s.join("")})}function sd(t,e){var r=typeof e,n;return e==null||r==="boolean"?pS(e):(r==="number"?Iv:r==="string"?(n=_p(e))?(e=n,uP):tse:e instanceof _p?uP:e instanceof Date?Qoe:Xoe(e)?Koe:Array.isArray(e)?Yoe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Zoe:Iv)(t,e)}function gS(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function rse(t,e){e===void 0&&(e=t,t=sd);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[s](o-s)}}function nse(t){return function(){return t}}function Ov(t){return+t}var fP=[0,1];function ii(t){return t}function Vw(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:nse(isNaN(e)?NaN:.5)}function ise(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function ase(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=Vw(i,n),a=r(o,a)):(n=Vw(n,i),a=r(a,o)),function(s){return a(n(s))}}function ose(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=Vw(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(s){var c=Qp(t,s,1,n)-1;return a[c](i[c](s))}}function Jp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ym(){var t=fP,e=fP,r=sd,n,i,a,o=ii,s,c,f;function d(){var g=Math.min(t.length,e.length);return o!==ii&&(o=ise(t[0],t[g-1])),s=g>2?ose:ase,c=f=null,p}function p(g){return g==null||isNaN(g=+g)?a:(c||(c=s(t.map(n),e,r)))(n(o(g)))}return p.invert=function(g){return o(i((f||(f=s(e,t.map(n),Iv)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,Ov),d()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),d()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),r=gS,d()},p.clamp=function(g){return arguments.length?(o=g?!0:ii,d()):o!==ii},p.interpolate=function(g){return arguments.length?(r=g,d()):r},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,y){return n=g,i=y,d()}}function vS(){return Ym()(ii,ii)}function sse(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rv(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Hf(t){return t=Rv(Math.abs(t)),t?t[1]:NaN}function lse(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>n&&(s=Math.max(1,n-c)),a.push(r.substring(i-=s,i+s)),!((c+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function cse(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var use=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wp(t){if(!(e=use.exec(t)))throw new Error("invalid format: "+t);var e;return new mS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}wp.prototype=mS.prototype;function mS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}mS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fse(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var y7;function dse(t,e){var r=Rv(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(y7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Rv(t,Math.max(0,e+a-1))[0]}function dP(t,e){var r=Rv(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const hP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:sse,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>dP(t*100,e),r:dP,s:dse,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pP(t){return t}var gP=Array.prototype.map,vP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function hse(t){var e=t.grouping===void 0||t.thousands===void 0?pP:lse(gP.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?pP:cse(gP.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(p){p=wp(p);var g=p.fill,y=p.align,b=p.sign,w=p.symbol,E=p.zero,S=p.width,I=p.comma,O=p.precision,D=p.trim,k=p.type;k==="n"?(I=!0,k="g"):hP[k]||(O===void 0&&(O=12),D=!0,k="g"),(E||g==="0"&&y==="=")&&(E=!0,g="0",y="=");var B=w==="$"?r:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",R=w==="$"?n:/[%p]/.test(k)?o:"",N=hP[k],L=/[defgprs%]/.test(k);O=O===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function U(j){var V=B,F=R,he,we,Y;if(k==="c")F=N(j)+F,j="";else{j=+j;var ie=j<0||1/j<0;if(j=isNaN(j)?c:N(Math.abs(j),O),D&&(j=fse(j)),ie&&+j==0&&b!=="+"&&(ie=!1),V=(ie?b==="("?b:s:b==="-"||b==="("?"":b)+V,F=(k==="s"?vP[8+y7/3]:"")+F+(ie&&b==="("?")":""),L){for(he=-1,we=j.length;++he<we;)if(Y=j.charCodeAt(he),48>Y||Y>57){F=(Y===46?i+j.slice(he+1):j.slice(he))+F,j=j.slice(0,he);break}}}I&&!E&&(j=e(j,1/0));var K=V.length+j.length+F.length,ge=K<S?new Array(S-K+1).join(g):"";switch(I&&E&&(j=e(ge+j,ge.length?S-F.length:1/0),ge=""),y){case"<":j=V+j+F+ge;break;case"=":j=V+ge+j+F;break;case"^":j=ge.slice(0,K=ge.length>>1)+V+j+F+ge.slice(K);break;default:j=ge+V+j+F;break}return a(j)}return U.toString=function(){return p+""},U}function d(p,g){var y=f((p=wp(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Hf(g)/3)))*3,w=Math.pow(10,-b),E=vP[8+b/3];return function(S){return y(w*S)+E}}return{format:f,formatPrefix:d}}var h1,yS,x7;pse({thousands:",",grouping:[3],currency:["$",""]});function pse(t){return h1=hse(t),yS=h1.format,x7=h1.formatPrefix,h1}function gse(t){return Math.max(0,-Hf(Math.abs(t)))}function vse(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hf(e)/3)))*3-Hf(Math.abs(t)))}function mse(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hf(e)-Hf(t))+1}function b7(t,e,r,n){var i=Bw(t,e,r),a;switch(n=wp(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=vse(i,o))&&(n.precision=a),x7(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=mse(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=gse(i))&&(n.precision=a-(n.type==="%")*2);break}}return yS(n)}function ec(t){var e=t.domain;return t.ticks=function(r){var n=e();return jw(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return b7(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],s=n[a],c,f,d=10;for(s<o&&(f=o,o=s,s=f,f=i,i=a,a=f);d-- >0;){if(f=Lw(o,s,r),f===c)return n[i]=o,n[a]=s,e(n);if(f>0)o=Math.floor(o/f)*f,s=Math.ceil(s/f)*f;else if(f<0)o=Math.ceil(o*f)/f,s=Math.floor(s*f)/f;else break;c=f}return t},t}function _7(){var t=vS();return t.copy=function(){return Jp(t,_7())},ba.apply(t,arguments),ec(t)}function w7(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Ov),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return w7(t).unknown(e)},t=arguments.length?Array.from(t,Ov):[0,1],ec(r)}function E7(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function mP(t){return Math.log(t)}function yP(t){return Math.exp(t)}function yse(t){return-Math.log(-t)}function xse(t){return-Math.exp(-t)}function bse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function _se(t){return t===10?bse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function wse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function xP(t){return(e,r)=>-t(-e,r)}function xS(t){const e=t(mP,yP),r=e.domain;let n=10,i,a;function o(){return i=wse(n),a=_se(n),r()[0]<0?(i=xP(i),a=xP(a),t(yse,xse)):t(mP,yP),e}return e.base=function(s){return arguments.length?(n=+s,o()):n},e.domain=function(s){return arguments.length?(r(s),o()):r()},e.ticks=s=>{const c=r();let f=c[0],d=c[c.length-1];const p=d<f;p&&([f,d]=[d,f]);let g=i(f),y=i(d),b,w;const E=s==null?10:+s;let S=[];if(!(n%1)&&y-g<E){if(g=Math.floor(g),y=Math.ceil(y),f>0){for(;g<=y;++g)for(b=1;b<n;++b)if(w=g<0?b/a(-g):b*a(g),!(w<f)){if(w>d)break;S.push(w)}}else for(;g<=y;++g)for(b=n-1;b>=1;--b)if(w=g>0?b/a(-g):b*a(g),!(w<f)){if(w>d)break;S.push(w)}S.length*2<E&&(S=jw(f,d,E))}else S=jw(g,y,Math.min(y-g,E)).map(a);return p?S.reverse():S},e.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=wp(c)).precision==null&&(c.trim=!0),c=yS(c)),s===1/0)return c;const f=Math.max(1,n*s/e.ticks().length);return d=>{let p=d/a(Math.round(i(d)));return p*n<n-.5&&(p*=n),p<=f?c(d):""}},e.nice=()=>r(E7(r(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function A7(){const t=xS(Ym()).domain([1,10]);return t.copy=()=>Jp(t,A7()).base(t.base()),ba.apply(t,arguments),t}function bP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _P(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function bS(t){var e=1,r=t(bP(e),_P(e));return r.constant=function(n){return arguments.length?t(bP(e=+n),_P(e)):e},ec(r)}function S7(){var t=bS(Ym());return t.copy=function(){return Jp(t,S7()).constant(t.constant())},ba.apply(t,arguments)}function wP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ese(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Ase(t){return t<0?-t*t:t*t}function _S(t){var e=t(ii,ii),r=1;function n(){return r===1?t(ii,ii):r===.5?t(Ese,Ase):t(wP(r),wP(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ec(e)}function wS(){var t=_S(Ym());return t.copy=function(){return Jp(t,wS()).exponent(t.exponent())},ba.apply(t,arguments),t}function Sse(){return wS.apply(null,arguments).exponent(.5)}function EP(t){return Math.sign(t)*t*t}function Cse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function C7(){var t=vS(),e=[0,1],r=!1,n;function i(a){var o=Cse(t(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return t.invert(EP(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Ov)).map(EP)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return C7(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},ba.apply(i,arguments),ec(i)}function T7(){var t=[],e=[],r=[],n;function i(){var o=0,s=Math.max(1,e.length);for(r=new Array(s-1);++o<s;)r[o-1]=Roe(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?n:e[Qp(r,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:t[0],s<r.length?r[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Nl),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return T7().domain(t).range(e).unknown(n)},ba.apply(a,arguments)}function I7(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[Qp(n,c,0,r)]:a}function s(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,s()):[t,e]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,s()):i.slice()},o.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,n[0]]:f>=r?[n[r-1],e]:[n[f-1],n[f]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return I7().domain([t,e]).range(i).unknown(a)},ba.apply(ec(o),arguments)}function O7(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[Qp(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return O7().domain(t).range(e).unknown(r)},ba.apply(i,arguments)}const r_=new Date,n_=new Date;function an(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const c=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return c;let f;do c.push(f=new Date(+a)),e(a,s),t(a);while(f<a&&a<o);return c},i.filter=a=>an(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(r_.setTime(+a),n_.setTime(+o),t(r_),t(n_),Math.floor(r(r_,n_))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Pv=an(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Pv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?an(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Pv);Pv.range;const as=1e3,ha=as*60,os=ha*60,xs=os*24,ES=xs*7,AP=xs*30,i_=xs*365,qc=an(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*as)},(t,e)=>(e-t)/as,t=>t.getUTCSeconds());qc.range;const AS=an(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*as)},(t,e)=>{t.setTime(+t+e*ha)},(t,e)=>(e-t)/ha,t=>t.getMinutes());AS.range;const SS=an(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ha)},(t,e)=>(e-t)/ha,t=>t.getUTCMinutes());SS.range;const CS=an(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*as-t.getMinutes()*ha)},(t,e)=>{t.setTime(+t+e*os)},(t,e)=>(e-t)/os,t=>t.getHours());CS.range;const TS=an(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*os)},(t,e)=>(e-t)/os,t=>t.getUTCHours());TS.range;const e0=an(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ha)/xs,t=>t.getDate()-1);e0.range;const Qm=an(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xs,t=>t.getUTCDate()-1);Qm.range;const R7=an(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xs,t=>Math.floor(t/xs));R7.range;function xu(t){return an(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ha)/ES)}const Zm=xu(0),Dv=xu(1),Tse=xu(2),Ise=xu(3),$f=xu(4),Ose=xu(5),Rse=xu(6);Zm.range;Dv.range;Tse.range;Ise.range;$f.range;Ose.range;Rse.range;function bu(t){return an(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/ES)}const Jm=bu(0),Nv=bu(1),Pse=bu(2),Dse=bu(3),qf=bu(4),Nse=bu(5),Mse=bu(6);Jm.range;Nv.range;Pse.range;Dse.range;qf.range;Nse.range;Mse.range;const IS=an(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());IS.range;const OS=an(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());OS.range;const bs=an(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:an(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});bs.range;const _s=an(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());_s.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:an(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});_s.range;function P7(t,e,r,n,i,a){const o=[[qc,1,as],[qc,5,5*as],[qc,15,15*as],[qc,30,30*as],[a,1,ha],[a,5,5*ha],[a,15,15*ha],[a,30,30*ha],[i,1,os],[i,3,3*os],[i,6,6*os],[i,12,12*os],[n,1,xs],[n,2,2*xs],[r,1,ES],[e,1,AP],[e,3,3*AP],[t,1,i_]];function s(f,d,p){const g=d<f;g&&([f,d]=[d,f]);const y=p&&typeof p.range=="function"?p:c(f,d,p),b=y?y.range(f,+d+1):[];return g?b.reverse():b}function c(f,d,p){const g=Math.abs(d-f)/p,y=uS(([,,E])=>E).right(o,g);if(y===o.length)return t.every(Bw(f/i_,d/i_,p));if(y===0)return Pv.every(Math.max(Bw(f,d,p),1));const[b,w]=o[g/o[y-1][2]<o[y][2]/g?y-1:y];return b.every(w)}return[s,c]}const[kse,jse]=P7(_s,OS,Jm,R7,TS,SS),[Lse,Bse]=P7(bs,IS,Zm,e0,CS,AS);function a_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function o_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rh(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Use(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,f=Ph(i),d=Dh(i),p=Ph(a),g=Dh(a),y=Ph(o),b=Dh(o),w=Ph(s),E=Dh(s),S=Ph(c),I=Dh(c),O={a:ie,A:K,b:ge,B:Ie,c:null,d:RP,e:RP,f:lle,g:yle,G:ble,H:ale,I:ole,j:sle,L:D7,m:cle,M:ule,p:G,q:Z,Q:NP,s:MP,S:fle,u:dle,U:hle,V:ple,w:gle,W:vle,x:null,X:null,y:mle,Y:xle,Z:_le,"%":DP},D={a:be,A:Ae,b:De,B:We,c:null,d:PP,e:PP,f:Sle,g:kle,G:Lle,H:wle,I:Ele,j:Ale,L:M7,m:Cle,M:Tle,p:at,q:br,Q:NP,s:MP,S:Ile,u:Ole,U:Rle,V:Ple,w:Dle,W:Nle,x:null,X:null,y:Mle,Y:jle,Z:Ble,"%":DP},k={a:U,A:j,b:V,B:F,c:he,d:IP,e:IP,f:tle,g:TP,G:CP,H:OP,I:OP,j:Qse,L:ele,m:Yse,M:Zse,p:L,q:Xse,Q:nle,s:ile,S:Jse,u:$se,U:qse,V:Gse,w:Hse,W:Wse,x:we,X:Y,y:TP,Y:CP,Z:Kse,"%":rle};O.x=B(r,O),O.X=B(n,O),O.c=B(e,O),D.x=B(r,D),D.X=B(n,D),D.c=B(e,D);function B(me,$e){return function(Qe){var pe=[],_r=-1,tt=0,Gr=me.length,wr,_i,Ps;for(Qe instanceof Date||(Qe=new Date(+Qe));++_r<Gr;)me.charCodeAt(_r)===37&&(pe.push(me.slice(tt,_r)),(_i=SP[wr=me.charAt(++_r)])!=null?wr=me.charAt(++_r):_i=wr==="e"?" ":"0",(Ps=$e[wr])&&(wr=Ps(Qe,_i)),pe.push(wr),tt=_r+1);return pe.push(me.slice(tt,_r)),pe.join("")}}function R(me,$e){return function(Qe){var pe=Rh(1900,void 0,1),_r=N(pe,me,Qe+="",0),tt,Gr;if(_r!=Qe.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if($e&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(tt=o_(Rh(pe.y,0,1)),Gr=tt.getUTCDay(),tt=Gr>4||Gr===0?Nv.ceil(tt):Nv(tt),tt=Qm.offset(tt,(pe.V-1)*7),pe.y=tt.getUTCFullYear(),pe.m=tt.getUTCMonth(),pe.d=tt.getUTCDate()+(pe.w+6)%7):(tt=a_(Rh(pe.y,0,1)),Gr=tt.getDay(),tt=Gr>4||Gr===0?Dv.ceil(tt):Dv(tt),tt=e0.offset(tt,(pe.V-1)*7),pe.y=tt.getFullYear(),pe.m=tt.getMonth(),pe.d=tt.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),Gr="Z"in pe?o_(Rh(pe.y,0,1)).getUTCDay():a_(Rh(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(Gr+5)%7:pe.w+pe.U*7-(Gr+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,o_(pe)):a_(pe)}}function N(me,$e,Qe,pe){for(var _r=0,tt=$e.length,Gr=Qe.length,wr,_i;_r<tt;){if(pe>=Gr)return-1;if(wr=$e.charCodeAt(_r++),wr===37){if(wr=$e.charAt(_r++),_i=k[wr in SP?$e.charAt(_r++):wr],!_i||(pe=_i(me,Qe,pe))<0)return-1}else if(wr!=Qe.charCodeAt(pe++))return-1}return pe}function L(me,$e,Qe){var pe=f.exec($e.slice(Qe));return pe?(me.p=d.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function U(me,$e,Qe){var pe=y.exec($e.slice(Qe));return pe?(me.w=b.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function j(me,$e,Qe){var pe=p.exec($e.slice(Qe));return pe?(me.w=g.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function V(me,$e,Qe){var pe=S.exec($e.slice(Qe));return pe?(me.m=I.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function F(me,$e,Qe){var pe=w.exec($e.slice(Qe));return pe?(me.m=E.get(pe[0].toLowerCase()),Qe+pe[0].length):-1}function he(me,$e,Qe){return N(me,e,$e,Qe)}function we(me,$e,Qe){return N(me,r,$e,Qe)}function Y(me,$e,Qe){return N(me,n,$e,Qe)}function ie(me){return o[me.getDay()]}function K(me){return a[me.getDay()]}function ge(me){return c[me.getMonth()]}function Ie(me){return s[me.getMonth()]}function G(me){return i[+(me.getHours()>=12)]}function Z(me){return 1+~~(me.getMonth()/3)}function be(me){return o[me.getUTCDay()]}function Ae(me){return a[me.getUTCDay()]}function De(me){return c[me.getUTCMonth()]}function We(me){return s[me.getUTCMonth()]}function at(me){return i[+(me.getUTCHours()>=12)]}function br(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var $e=B(me+="",O);return $e.toString=function(){return me},$e},parse:function(me){var $e=R(me+="",!1);return $e.toString=function(){return me},$e},utcFormat:function(me){var $e=B(me+="",D);return $e.toString=function(){return me},$e},utcParse:function(me){var $e=R(me+="",!0);return $e.toString=function(){return me},$e}}}var SP={"-":"",_:" ",0:"0"},mn=/^\s*\d+/,zse=/^%/,Fse=/[\\^$*+?|[\]().{}]/g;function _t(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function Vse(t){return t.replace(Fse,"\\$&")}function Ph(t){return new RegExp("^(?:"+t.map(Vse).join("|")+")","i")}function Dh(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Hse(t,e,r){var n=mn.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function $se(t,e,r){var n=mn.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function qse(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Gse(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Wse(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function CP(t,e,r){var n=mn.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function TP(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Kse(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Xse(t,e,r){var n=mn.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Yse(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function IP(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Qse(t,e,r){var n=mn.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function OP(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Zse(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Jse(t,e,r){var n=mn.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function ele(t,e,r){var n=mn.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function tle(t,e,r){var n=mn.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function rle(t,e,r){var n=zse.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function nle(t,e,r){var n=mn.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function ile(t,e,r){var n=mn.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function RP(t,e){return _t(t.getDate(),e,2)}function ale(t,e){return _t(t.getHours(),e,2)}function ole(t,e){return _t(t.getHours()%12||12,e,2)}function sle(t,e){return _t(1+e0.count(bs(t),t),e,3)}function D7(t,e){return _t(t.getMilliseconds(),e,3)}function lle(t,e){return D7(t,e)+"000"}function cle(t,e){return _t(t.getMonth()+1,e,2)}function ule(t,e){return _t(t.getMinutes(),e,2)}function fle(t,e){return _t(t.getSeconds(),e,2)}function dle(t){var e=t.getDay();return e===0?7:e}function hle(t,e){return _t(Zm.count(bs(t)-1,t),e,2)}function N7(t){var e=t.getDay();return e>=4||e===0?$f(t):$f.ceil(t)}function ple(t,e){return t=N7(t),_t($f.count(bs(t),t)+(bs(t).getDay()===4),e,2)}function gle(t){return t.getDay()}function vle(t,e){return _t(Dv.count(bs(t)-1,t),e,2)}function mle(t,e){return _t(t.getFullYear()%100,e,2)}function yle(t,e){return t=N7(t),_t(t.getFullYear()%100,e,2)}function xle(t,e){return _t(t.getFullYear()%1e4,e,4)}function ble(t,e){var r=t.getDay();return t=r>=4||r===0?$f(t):$f.ceil(t),_t(t.getFullYear()%1e4,e,4)}function _le(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_t(e/60|0,"0",2)+_t(e%60,"0",2)}function PP(t,e){return _t(t.getUTCDate(),e,2)}function wle(t,e){return _t(t.getUTCHours(),e,2)}function Ele(t,e){return _t(t.getUTCHours()%12||12,e,2)}function Ale(t,e){return _t(1+Qm.count(_s(t),t),e,3)}function M7(t,e){return _t(t.getUTCMilliseconds(),e,3)}function Sle(t,e){return M7(t,e)+"000"}function Cle(t,e){return _t(t.getUTCMonth()+1,e,2)}function Tle(t,e){return _t(t.getUTCMinutes(),e,2)}function Ile(t,e){return _t(t.getUTCSeconds(),e,2)}function Ole(t){var e=t.getUTCDay();return e===0?7:e}function Rle(t,e){return _t(Jm.count(_s(t)-1,t),e,2)}function k7(t){var e=t.getUTCDay();return e>=4||e===0?qf(t):qf.ceil(t)}function Ple(t,e){return t=k7(t),_t(qf.count(_s(t),t)+(_s(t).getUTCDay()===4),e,2)}function Dle(t){return t.getUTCDay()}function Nle(t,e){return _t(Nv.count(_s(t)-1,t),e,2)}function Mle(t,e){return _t(t.getUTCFullYear()%100,e,2)}function kle(t,e){return t=k7(t),_t(t.getUTCFullYear()%100,e,2)}function jle(t,e){return _t(t.getUTCFullYear()%1e4,e,4)}function Lle(t,e){var r=t.getUTCDay();return t=r>=4||r===0?qf(t):qf.ceil(t),_t(t.getUTCFullYear()%1e4,e,4)}function Ble(){return"+0000"}function DP(){return"%"}function NP(t){return+t}function MP(t){return Math.floor(+t/1e3)}var df,j7,L7;Ule({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ule(t){return df=Use(t),j7=df.format,df.parse,L7=df.utcFormat,df.utcParse,df}function zle(t){return new Date(t)}function Fle(t){return t instanceof Date?+t:+new Date(+t)}function RS(t,e,r,n,i,a,o,s,c,f){var d=vS(),p=d.invert,g=d.domain,y=f(".%L"),b=f(":%S"),w=f("%I:%M"),E=f("%I %p"),S=f("%a %d"),I=f("%b %d"),O=f("%B"),D=f("%Y");function k(B){return(c(B)<B?y:s(B)<B?b:o(B)<B?w:a(B)<B?E:n(B)<B?i(B)<B?S:I:r(B)<B?O:D)(B)}return d.invert=function(B){return new Date(p(B))},d.domain=function(B){return arguments.length?g(Array.from(B,Fle)):g().map(zle)},d.ticks=function(B){var R=g();return t(R[0],R[R.length-1],B??10)},d.tickFormat=function(B,R){return R==null?k:f(R)},d.nice=function(B){var R=g();return(!B||typeof B.range!="function")&&(B=e(R[0],R[R.length-1],B??10)),B?g(E7(R,B)):d},d.copy=function(){return Jp(d,RS(t,e,r,n,i,a,o,s,c,f))},d}function Vle(){return ba.apply(RS(Lse,Bse,bs,IS,Zm,e0,CS,AS,qc,j7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hle(){return ba.apply(RS(kse,jse,_s,OS,Jm,Qm,TS,SS,qc,L7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ey(){var t=0,e=1,r,n,i,a,o=ii,s=!1,c;function f(p){return p==null||isNaN(p=+p)?c:o(i===0?.5:(p=(a(p)-r)*i,s?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e]=p,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),f):[t,e]},f.clamp=function(p){return arguments.length?(s=!!p,f):s},f.interpolator=function(p){return arguments.length?(o=p,f):o};function d(p){return function(g){var y,b;return arguments.length?([y,b]=g,o=p(y,b),f):[o(0),o(1)]}}return f.range=d(sd),f.rangeRound=d(gS),f.unknown=function(p){return arguments.length?(c=p,f):c},function(p){return a=p,r=p(t),n=p(e),i=r===n?0:1/(n-r),f}}function tc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function B7(){var t=ec(ey()(ii));return t.copy=function(){return tc(t,B7())},Ts.apply(t,arguments)}function U7(){var t=xS(ey()).domain([1,10]);return t.copy=function(){return tc(t,U7()).base(t.base())},Ts.apply(t,arguments)}function z7(){var t=bS(ey());return t.copy=function(){return tc(t,z7()).constant(t.constant())},Ts.apply(t,arguments)}function PS(){var t=_S(ey());return t.copy=function(){return tc(t,PS()).exponent(t.exponent())},Ts.apply(t,arguments)}function $le(){return PS.apply(null,arguments).exponent(.5)}function F7(){var t=[],e=ii;function r(n){if(n!=null&&!isNaN(n=+n))return e((Qp(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Nl),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Ooe(t,a/n))},r.copy=function(){return F7(e).domain(t)},Ts.apply(r,arguments)}function ty(){var t=0,e=.5,r=1,n=1,i,a,o,s,c,f=ii,d,p=!1,g;function y(w){return isNaN(w=+w)?g:(w=.5+((w=+d(w))-a)*(n*w<n*a?s:c),f(p?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([t,e,r]=w,i=d(t=+t),a=d(e=+e),o=d(r=+r),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),n=a<i?-1:1,y):[t,e,r]},y.clamp=function(w){return arguments.length?(p=!!w,y):p},y.interpolator=function(w){return arguments.length?(f=w,y):f};function b(w){return function(E){var S,I,O;return arguments.length?([S,I,O]=E,f=rse(w,[S,I,O]),y):[f(0),f(.5),f(1)]}}return y.range=b(sd),y.rangeRound=b(gS),y.unknown=function(w){return arguments.length?(g=w,y):g},function(w){return d=w,i=w(t),a=w(e),o=w(r),s=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),n=a<i?-1:1,y}}function V7(){var t=ec(ty()(ii));return t.copy=function(){return tc(t,V7())},Ts.apply(t,arguments)}function H7(){var t=xS(ty()).domain([.1,1,10]);return t.copy=function(){return tc(t,H7()).base(t.base())},Ts.apply(t,arguments)}function $7(){var t=bS(ty());return t.copy=function(){return tc(t,$7()).constant(t.constant())},Ts.apply(t,arguments)}function DS(){var t=_S(ty());return t.copy=function(){return tc(t,DS()).exponent(t.exponent())},Ts.apply(t,arguments)}function qle(){return DS.apply(null,arguments).exponent(.5)}const qh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dS,scaleDiverging:V7,scaleDivergingLog:H7,scaleDivergingPow:DS,scaleDivergingSqrt:qle,scaleDivergingSymlog:$7,scaleIdentity:w7,scaleImplicit:Uw,scaleLinear:_7,scaleLog:A7,scaleOrdinal:fS,scalePoint:Doe,scalePow:wS,scaleQuantile:T7,scaleQuantize:I7,scaleRadial:C7,scaleSequential:B7,scaleSequentialLog:U7,scaleSequentialPow:PS,scaleSequentialQuantile:F7,scaleSequentialSqrt:$le,scaleSequentialSymlog:z7,scaleSqrt:Sse,scaleSymlog:S7,scaleThreshold:O7,scaleTime:Vle,scaleUtc:Hle,tickFormat:b7},Symbol.toStringTag,{value:"Module"}));var rc=t=>t.chartData,NS=ne([rc],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),ry=(t,e,r,n)=>n?NS(t):rc(t);function Gf(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if($i(e)&&$i(r))return!0}return!1}function kP(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Gle(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,i,a;if($i(r))i=r;else if(typeof r=="function")return;if($i(n))a=n;else if(typeof n=="function")return;var o=[i,a];if(Gf(o))return o}}function Wle(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(Gf(n))return kP(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,o,s;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Ne(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&SR.test(i)){var c=SR.exec(i);if(c==null||e==null)o=void 0;else{var f=+c[1];o=e[0]-f}}else o=e?.[0];if(a==="auto")e!=null&&(s=Math.max(...e));else if(Ne(a))s=a;else if(typeof a=="function")try{e!=null&&(s=a(e?.[1]))}catch{}else if(typeof a=="string"&&CR.test(a)){var d=CR.exec(a);if(d==null||e==null)s=void 0;else{var p=+d[1];s=e[1]+p}}else s=e?.[1];var g=[o,s];if(Gf(g))return e==null?g:kP(g,e,r)}}}var ld=1e9,Kle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},kS,lr=!0,xa="[DecimalError] ",tu=xa+"Invalid argument: ",MS=xa+"Exponent out of range: ",cd=Math.floor,Uc=Math.pow,Xle=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ki,hn=1e7,tr=7,q7=9007199254740991,Mv=cd(q7/tr),Ce={};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ce.comparedTo=Ce.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*tr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(t){return us(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.idiv=function(t){var e=this,r=e.constructor;return qt(us(e,new r(t),0,1),r.precision)};Ce.equals=Ce.eq=function(t){return!this.cmp(t)};Ce.exponent=function(){return qr(this)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){return this.cmp(t)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(ki))throw Error(xa+"NaN");if(r.s<1)throw Error(xa+(r.s?"NaN":"-Infinity"));return r.eq(ki)?new n(0):(lr=!1,e=us(Ep(r,a),Ep(t,a),a),lr=!0,qt(e,i))};Ce.minus=Ce.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?K7(e,t):G7(e,(t.s=-t.s,t))};Ce.modulo=Ce.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(xa+"NaN");return r.s?(lr=!1,e=us(r,t,0,1).times(t),lr=!0,r.minus(e)):qt(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return W7(this)};Ce.naturalLogarithm=Ce.ln=function(){return Ep(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ce.plus=Ce.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?G7(e,t):K7(e,(t.s=-t.s,t))};Ce.precision=Ce.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(tu+t);if(e=qr(i)+1,n=i.d.length-1,r=n*tr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Ce.squareRoot=Ce.sqrt=function(){var t,e,r,n,i,a,o,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(xa+"NaN")}for(t=qr(s),lr=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=vo(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=cd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(i.toString()),r=c.precision,i=o=r+3;;)if(a=n,n=a.plus(us(s,a,o+2)).times(.5),vo(a.d).slice(0,o)===(e=vo(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(qt(a,r+1,0),a.times(a).eq(s)){n=a;break}}else if(e!="9999")break;o+=4}return lr=!0,qt(n,r)};Ce.times=Ce.mul=function(t){var e,r,n,i,a,o,s,c,f,d=this,p=d.constructor,g=d.d,y=(t=new p(t)).d;if(!d.s||!t.s)return new p(0);for(t.s*=d.s,r=d.e+t.e,c=g.length,f=y.length,c<f&&(a=g,g=y,y=a,o=c,c=f,f=o),a=[],o=c+f,n=o;n--;)a.push(0);for(n=f;--n>=0;){for(e=0,i=c+n;i>n;)s=a[i]+y[n]*g[i-n-1]+e,a[i--]=s%hn|0,e=s/hn|0;a[i]=(a[i]+e)%hn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,lr?qt(t,p.precision):t};Ce.toDecimalPlaces=Ce.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(To(t,0,ld),e===void 0?e=n.rounding:To(e,0,8),qt(r,t+qr(r)+1,e))};Ce.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=fu(n,!0):(To(t,0,ld),e===void 0?e=i.rounding:To(e,0,8),n=qt(new i(n),t+1,e),r=fu(n,!0,t+1)),r};Ce.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?fu(i):(To(t,0,ld),e===void 0?e=a.rounding:To(e,0,8),n=qt(new a(i),t+qr(i)+1,e),r=fu(n.abs(),!1,t+qr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var t=this,e=t.constructor;return qt(new e(t),qr(t)+1,e.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(t){var e,r,n,i,a,o,s=this,c=s.constructor,f=12,d=+(t=new c(t));if(!t.s)return new c(ki);if(s=new c(s),!s.s){if(t.s<1)throw Error(xa+"Infinity");return s}if(s.eq(ki))return s;if(n=c.precision,t.eq(ki))return qt(s,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=s.s,o){if((r=d<0?-d:d)<=q7){for(i=new c(ki),e=Math.ceil(n/tr+4),lr=!1;r%2&&(i=i.times(s),LP(i.d,e)),r=cd(r/2),r!==0;)s=s.times(s),LP(s.d,e);return lr=!0,t.s<0?new c(ki).div(i):qt(i,n)}}else if(a<0)throw Error(xa+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,s.s=1,lr=!1,i=t.times(Ep(s,n+f)),lr=!0,i=W7(i),i.s=a,i};Ce.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=qr(i),n=fu(i,r<=a.toExpNeg||r>=a.toExpPos)):(To(t,1,ld),e===void 0?e=a.rounding:To(e,0,8),i=qt(new a(i),t,e),r=qr(i),n=fu(i,t<=r||r<=a.toExpNeg,t)),n};Ce.toSignificantDigits=Ce.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(To(t,1,ld),e===void 0?e=n.rounding:To(e,0,8)),qt(new n(r),t,e)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=qr(t),r=t.constructor;return fu(t,e<=r.toExpNeg||e>=r.toExpPos)};function G7(t,e){var r,n,i,a,o,s,c,f,d=t.constructor,p=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),lr?qt(e,p):e;if(c=t.d,f=e.d,o=t.e,i=e.e,c=c.slice(),a=o-i,a){for(a<0?(n=c,a=-a,s=f.length):(n=f,i=o,s=c.length),o=Math.ceil(p/tr),s=o>s?o+1:s+1,a>s&&(a=s,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(s=c.length,a=f.length,s-a<0&&(a=s,n=f,f=c,c=n),r=0;a;)r=(c[--a]=c[a]+f[a]+r)/hn|0,c[a]%=hn;for(r&&(c.unshift(r),++i),s=c.length;c[--s]==0;)c.pop();return e.d=c,e.e=i,lr?qt(e,p):e}function To(t,e,r){if(t!==~~t||t<e||t>r)throw Error(tu+t)}function vo(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=tr-n.length,r&&(a+=ml(r)),a+=n;o=t[e],n=o+"",r=tr-n.length,r&&(a+=ml(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var us=(function(){function t(n,i){var a,o=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+o,n[s]=a%hn|0,o=a/hn|0;return o&&n.unshift(o),n}function e(n,i,a,o){var s,c;if(a!=o)c=a>o?1:-1;else for(s=c=0;s<a;s++)if(n[s]!=i[s]){c=n[s]>i[s]?1:-1;break}return c}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*hn+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var s,c,f,d,p,g,y,b,w,E,S,I,O,D,k,B,R,N,L=n.constructor,U=n.s==i.s?1:-1,j=n.d,V=i.d;if(!n.s)return new L(n);if(!i.s)throw Error(xa+"Division by zero");for(c=n.e-i.e,R=V.length,k=j.length,y=new L(U),b=y.d=[],f=0;V[f]==(j[f]||0);)++f;if(V[f]>(j[f]||0)&&--c,a==null?I=a=L.precision:o?I=a+(qr(n)-qr(i))+1:I=a,I<0)return new L(0);if(I=I/tr+2|0,f=0,R==1)for(d=0,V=V[0],I++;(f<k||d)&&I--;f++)O=d*hn+(j[f]||0),b[f]=O/V|0,d=O%V|0;else{for(d=hn/(V[0]+1)|0,d>1&&(V=t(V,d),j=t(j,d),R=V.length,k=j.length),D=R,w=j.slice(0,R),E=w.length;E<R;)w[E++]=0;N=V.slice(),N.unshift(0),B=V[0],V[1]>=hn/2&&++B;do d=0,s=e(V,w,R,E),s<0?(S=w[0],R!=E&&(S=S*hn+(w[1]||0)),d=S/B|0,d>1?(d>=hn&&(d=hn-1),p=t(V,d),g=p.length,E=w.length,s=e(p,w,g,E),s==1&&(d--,r(p,R<g?N:V,g))):(d==0&&(s=d=1),p=V.slice()),g=p.length,g<E&&p.unshift(0),r(w,p,E),s==-1&&(E=w.length,s=e(V,w,R,E),s<1&&(d++,r(w,R<E?N:V,E))),E=w.length):s===0&&(d++,w=[0]),b[f++]=d,s&&w[0]?w[E++]=j[D]||0:(w=[j[D]],E=1);while((D++<k||w[0]!==void 0)&&I--)}return b[0]||b.shift(),y.e=c,qt(y,o?a+qr(y)+1:a)}})();function W7(t,e){var r,n,i,a,o,s,c=0,f=0,d=t.constructor,p=d.precision;if(qr(t)>16)throw Error(MS+qr(t));if(!t.s)return new d(ki);for(lr=!1,s=p,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),f+=5;for(n=Math.log(Uc(2,f))/Math.LN10*2+5|0,s+=n,r=i=a=new d(ki),d.precision=s;;){if(i=qt(i.times(t),s),r=r.times(++c),o=a.plus(us(i,r,s)),vo(o.d).slice(0,s)===vo(a.d).slice(0,s)){for(;f--;)a=qt(a.times(a),s);return d.precision=p,e==null?(lr=!0,qt(a,p)):a}a=o}}function qr(t){for(var e=t.e*tr,r=t.d[0];r>=10;r/=10)e++;return e}function s_(t,e,r){if(e>t.LN10.sd())throw lr=!0,r&&(t.precision=r),Error(xa+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function ml(t){for(var e="";t--;)e+="0";return e}function Ep(t,e){var r,n,i,a,o,s,c,f,d,p=1,g=10,y=t,b=y.d,w=y.constructor,E=w.precision;if(y.s<1)throw Error(xa+(y.s?"NaN":"-Infinity"));if(y.eq(ki))return new w(0);if(e==null?(lr=!1,f=E):f=e,y.eq(10))return e==null&&(lr=!0),s_(w,f);if(f+=g,w.precision=f,r=vo(b),n=r.charAt(0),a=qr(y),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)y=y.times(t),r=vo(y.d),n=r.charAt(0),p++;a=qr(y),n>1?(y=new w("0."+r),a++):y=new w(n+"."+r.slice(1))}else return c=s_(w,f+2,E).times(a+""),y=Ep(new w(n+"."+r.slice(1)),f-g).plus(c),w.precision=E,e==null?(lr=!0,qt(y,E)):y;for(s=o=y=us(y.minus(ki),y.plus(ki),f),d=qt(y.times(y),f),i=3;;){if(o=qt(o.times(d),f),c=s.plus(us(o,new w(i),f)),vo(c.d).slice(0,f)===vo(s.d).slice(0,f))return s=s.times(2),a!==0&&(s=s.plus(s_(w,f+2,E).times(a+""))),s=us(s,new w(p),f),w.precision=E,e==null?(lr=!0,qt(s,E)):s;s=c,i+=2}}function jP(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=cd(r/tr),t.d=[],n=(r+1)%tr,r<0&&(n+=tr),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=tr;n<i;)t.d.push(+e.slice(n,n+=tr));e=e.slice(n),n=tr-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),lr&&(t.e>Mv||t.e<-Mv))throw Error(MS+r)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,r){var n,i,a,o,s,c,f,d,p=t.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=tr,i=e,f=p[d=0];else{if(d=Math.ceil((n+1)/tr),a=p.length,d>=a)return t;for(f=a=p[d],o=1;a>=10;a/=10)o++;n%=tr,i=n-tr+o}if(r!==void 0&&(a=Uc(10,o-i-1),s=f/a%10|0,c=e<0||p[d+1]!==void 0||f%a,c=r<4?(s||c)&&(r==0||r==(t.s<0?3:2)):s>5||s==5&&(r==4||c||r==6&&(n>0?i>0?f/Uc(10,o-i):0:p[d-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return c?(a=qr(t),p.length=1,e=e-a-1,p[0]=Uc(10,(tr-e%tr)%tr),t.e=cd(-e/tr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=d,a=1,d--):(p.length=d+1,a=Uc(10,tr-n),p[d]=i>0?(f/Uc(10,o-i)%Uc(10,i)|0)*a:0),c)for(;;)if(d==0){(p[0]+=a)==hn&&(p[0]=1,++t.e);break}else{if(p[d]+=a,p[d]!=hn)break;p[d--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(lr&&(t.e>Mv||t.e<-Mv))throw Error(MS+qr(t));return t}function K7(t,e){var r,n,i,a,o,s,c,f,d,p,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),lr?qt(e,y):e;if(c=t.d,p=e.d,n=e.e,f=t.e,c=c.slice(),o=f-n,o){for(d=o<0,d?(r=c,o=-o,s=p.length):(r=p,n=f,s=c.length),i=Math.max(Math.ceil(y/tr),s)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,s=p.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(c[i]!=p[i]){d=c[i]<p[i];break}o=0}for(d&&(r=c,c=p,p=r,e.s=-e.s),s=c.length,i=p.length-s;i>0;--i)c[s++]=0;for(i=p.length;i>o;){if(c[--i]<p[i]){for(a=i;a&&c[--a]===0;)c[a]=hn-1;--c[a],c[i]+=hn}c[i]-=p[i]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,lr?qt(e,y):e):new g(0)}function fu(t,e,r){var n,i=qr(t),a=vo(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+ml(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+ml(-i-1)+a,r&&(n=r-o)>0&&(a+=ml(n))):i>=o?(a+=ml(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+ml(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=ml(n))),t.s<0?"-"+a:a}function LP(t,e){if(t.length>e)return t.length=e,!0}function X7(t){var e,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(tu+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return jP(o,a.toString())}else if(typeof a!="string")throw Error(tu+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Xle.test(a))jP(o,a);else throw Error(tu+a)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=X7,i.config=i.set=Yle,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function Yle(t){if(!t||typeof t!="object")throw Error(xa+"Object expected");var e,r,n,i=["precision",1,ld,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(cd(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(tu+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(tu+r+": "+n);return this}var kS=X7(Kle);ki=new kS(1);const jt=kS;var Qle=t=>t,Y7={},Q7=t=>t===Y7,BP=t=>function e(){return arguments.length===0||arguments.length===1&&Q7(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Z7=(t,e)=>t===1?e:BP(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(o=>o!==Y7).length;return a>=t?e(...n):Z7(t-a,BP(function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];var f=n.map(d=>Q7(d)?s.shift():d);return e(...f,...s)}))}),ny=t=>Z7(t.length,t),Hw=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},Zle=ny((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),Jle=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Qle;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((s,c)=>c(s),a(...arguments))}},$w=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),J7=t=>{var e=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e&&i.every((o,s)=>{var c;return o===((c=e)===null||c===void 0?void 0:c[s])})||(e=i,r=t(...i)),r}};function ej(t){var e;return t===0?e=1:e=Math.floor(new jt(t).abs().log(10).toNumber())+1,e}function tj(t,e,r){for(var n=new jt(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}ny((t,e,r)=>{var n=+t,i=+e;return n+r*(i-n)});ny((t,e,r)=>{var n=e-+t;return n=n||1/0,(r-t)/n});ny((t,e,r)=>{var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});var rj=t=>{var[e,r]=t,[n,i]=[e,r];return e>r&&([n,i]=[r,e]),[n,i]},nj=(t,e,r)=>{if(t.lte(0))return new jt(0);var n=ej(t.toNumber()),i=new jt(10).pow(n),a=t.div(i),o=n!==1?.05:.1,s=new jt(Math.ceil(a.div(o).toNumber())).add(r).mul(o),c=s.mul(i);return e?new jt(c.toNumber()):new jt(Math.ceil(c.toNumber()))},ece=(t,e,r)=>{var n=new jt(1),i=new jt(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new jt(10).pow(ej(t)-1),i=new jt(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new jt(Math.floor(t)))}else t===0?i=new jt(Math.floor((e-1)/2)):r||(i=new jt(Math.floor(t)));var o=Math.floor((e-1)/2),s=Jle(Zle(c=>i.add(new jt(c-o).mul(n)).toNumber()),Hw);return s(0,e)},ij=function(e,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new jt(0),tickMin:new jt(0),tickMax:new jt(0)};var o=nj(new jt(r).sub(e).div(n-1),i,a),s;e<=0&&r>=0?s=new jt(0):(s=new jt(e).add(r).div(2),s=s.sub(new jt(s).mod(o)));var c=Math.ceil(s.sub(e).div(o).toNumber()),f=Math.ceil(new jt(r).sub(s).div(o).toNumber()),d=c+f+1;return d>n?ij(e,r,n,i,a+1):(d<n&&(f=r>0?f+(n-d):f,c=r>0?c:c+(n-d)),{step:o,tickMin:s.sub(new jt(c).mul(o)),tickMax:s.add(new jt(f).mul(o))})};function tce(t){var[e,r]=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[o,s]=rj([e,r]);if(o===-1/0||s===1/0){var c=s===1/0?[o,...Hw(0,n-1).map(()=>1/0)]:[...Hw(0,n-1).map(()=>-1/0),s];return e>r?$w(c):c}if(o===s)return ece(o,n,i);var{step:f,tickMin:d,tickMax:p}=ij(o,s,a,i,0),g=tj(d,p.add(new jt(.1).mul(f)),f);return e>r?$w(g):g}function rce(t,e){var[r,n]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=rj([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var s=Math.max(e,2),c=nj(new jt(o).sub(a).div(s-1),i,0),f=[...tj(new jt(a),new jt(o),c),o];return i===!1&&(f=f.map(d=>Math.round(d))),r>n?$w(f):f}var nce=J7(tce),ice=J7(rce),aj=t=>t.rootProps.maxBarSize,ace=t=>t.rootProps.barGap,oj=t=>t.rootProps.barCategoryGap,oce=t=>t.rootProps.barSize,t0=t=>t.rootProps.stackOffset,jS=t=>t.options.chartName,LS=t=>t.rootProps.syncId,sj=t=>t.rootProps.syncMethod,BS=t=>t.options.eventEmitter,ts={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ni={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},iy=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},sce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ts.angleAxisId,includeHidden:!1,name:void 0,reversed:ts.reversed,scale:ts.scale,tick:ts.tick,tickCount:void 0,ticks:void 0,type:ts.type,unit:void 0},lce={allowDataOverflow:Ni.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ni.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ni.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ni.scale,tick:Ni.tick,tickCount:Ni.tickCount,ticks:void 0,type:Ni.type,unit:void 0},cce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:ts.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ts.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ts.scale,tick:ts.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},uce={allowDataOverflow:Ni.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ni.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ni.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ni.scale,tick:Ni.tick,tickCount:Ni.tickCount,ticks:void 0,type:"category",unit:void 0},US=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?cce:sce,zS=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?uce:lce,ay=t=>t.polarOptions,FS=ne([Ss,Cs,nn],$9),lj=ne([ay,FS],(t,e)=>{if(t!=null)return qn(t.innerRadius,e,0)}),cj=ne([ay,FS],(t,e)=>{if(t!=null)return qn(t.outerRadius,e,e*.8)}),fce=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},uj=ne([ay],fce);ne([US,uj],iy);var fj=ne([FS,lj,cj],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});ne([zS,fj],iy);var dj=ne([pt,ay,lj,cj,Ss,Cs],(t,e,r,n,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:s,startAngle:c,endAngle:f}=e;return{cx:qn(o,i,i/2),cy:qn(s,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:f,clockWise:!1}}}),ur=(t,e)=>e,r0=(t,e,r)=>r;function VS(t){return t?.id}var on=t=>{var e=pt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},ud=t=>t.tooltip.settings.axisId,yn=t=>{var e=on(t),r=ud(t);return n0(t,e,r)},hj=ne([yn],t=>t?.dataKey);function pj(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=r,o=new Map;return t.forEach(s=>{var c,f=(c=s.data)!==null&&c!==void 0?c:n;if(!(f==null||f.length===0)){var d=VS(s);f.forEach((p,g)=>{var y=a==null||i?g:String(Yt(p,a,null)),b=Yt(p,s.dataKey,0),w;o.has(y)?w=o.get(y):w={},Object.assign(w,{[d]:b}),o.set(y,w)})}}),Array.from(o.values())}function oy(t){return t.stackId!=null&&t.dataKey!=null}function UP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UP(Object(r),!0).forEach(function(n){dce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dce(t,e,r){return(e=hce(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hce(t){var e=pce(t,"string");return typeof e=="symbol"?e:e+""}function pce(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qw=[0,"auto"],Pi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},gj=(t,e)=>t.cartesianAxis.xAxis[e],Is=(t,e)=>{var r=gj(t,e);return r??Pi},Di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kp},vj=(t,e)=>t.cartesianAxis.yAxis[e],Os=(t,e)=>{var r=vj(t,e);return r??Di},gce={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},HS=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??gce},Or=(t,e,r)=>{switch(e){case"xAxis":return Is(t,r);case"yAxis":return Os(t,r);case"zAxis":return HS(t,r);case"angleAxis":return US(t,r);case"radiusAxis":return zS(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},vce=(t,e,r)=>{switch(e){case"xAxis":return Is(t,r);case"yAxis":return Os(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},n0=(t,e,r)=>{switch(e){case"xAxis":return Is(t,r);case"yAxis":return Os(t,r);case"angleAxis":return US(t,r);case"radiusAxis":return zS(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},mj=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function $S(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var sy=t=>t.graphicalItems.cartesianItems,mce=ne([ur,r0],$S),qS=(t,e,r)=>t.filter(r).filter(n=>e?.includeHidden===!0?!0:!n.hide),i0=ne([sy,Or,mce],qS),yj=ne([i0],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(oy)),xj=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),bj=ne([i0],xj),GS=t=>t.map(e=>e.data).filter(Boolean).flat(1),yce=ne([i0],GS),WS=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=e;return t.length>0?t:r.slice(n,i+1)},KS=ne([yce,ry],WS),XS=(t,e,r)=>e?.dataKey!=null?t.map(n=>({value:Yt(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(i=>({value:Yt(i,n)}))):t.map(n=>({value:n})),ly=ne([KS,Or,i0],XS);function _j(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function _u(t){return t.filter(e=>Co(e)||e instanceof Date).map(Number).filter(e=>Vi(e)===!1)}function xce(t,e,r){return!r||typeof e!="number"||Vi(e)?[]:r.length?_u(r.flatMap(n=>{var i=Yt(t,n.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!$i(a)||!$i(o)))return[e-a,e+o]})):[]}var bce=ne([yj,ry,yn],pj),wj=(t,e,r)=>{var n={},i=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),n);return Object.fromEntries(Object.entries(i).map(a=>{var[o,s]=a,c=s.map(VS);return[o,{stackedData:Aie(t,c,r),graphicalItems:s}]}))},Gw=ne([bce,yj,t0],wj),Ej=(t,e,r)=>{var{dataStartIndex:n,dataEndIndex:i}=e;if(r!=="zAxis"){var a=Oie(t,n,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},_ce=ne([Gw,rc,ur],Ej),Aj=(t,e,r,n,i)=>r.length>0?t.flatMap(a=>r.flatMap(o=>{var s,c,f=(s=n[o.id])===null||s===void 0?void 0:s.filter(p=>_j(i,p)),d=Yt(a,(c=e.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:xce(a,d,f)}})).filter(Boolean):e?.dataKey!=null?t.map(a=>({value:Yt(a,e.dataKey),errorDomain:[]})):t.map(a=>({value:a,errorDomain:[]})),cy=t=>t.errorBars,Sj=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>_j(r,n));ne([bj,cy,ur],Sj);var wce=ne([KS,Or,bj,cy,ur],Aj);function Ece(t){var{value:e}=t;if(Co(e)||e instanceof Date)return e}var zP=t=>{var e=t.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=_u(e);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Ace=(t,e,r)=>{var n=t.map(Ece).filter(i=>i!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&jk(n))?u7(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},YS=t=>{var e;if(t==null||!("domain"in t))return qw;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=_u(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:qw},jv=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),s=Math.max(...a);return[o,s]}},Cj=t=>t.referenceElements.dots,fd=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),Sce=ne([Cj,ur,r0],fd),Tj=t=>t.referenceElements.areas,Cce=ne([Tj,ur,r0],fd),Ij=t=>t.referenceElements.lines,Tce=ne([Ij,ur,r0],fd),Oj=(t,e)=>{var r=_u(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Ice=ne(Sce,ur,Oj),Rj=(t,e)=>{var r=_u(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Oce=ne([Cce,ur],Rj),Pj=(t,e)=>{var r=_u(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Rce=ne(Tce,ur,Pj),Pce=ne(Ice,Rce,Oce,(t,e,r)=>jv(t,r,e)),Dj=ne([Or],YS),QS=(t,e,r,n,i,a,o)=>{var s=Gle(e,t.allowDataOverflow);if(s!=null)return s;var c=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",f=c?jv(r,i,zP(n)):jv(i,zP(n));return Wle(e,f,t.allowDataOverflow)},Dce=ne([Or,Dj,_ce,wce,Pce,pt,ur],QS),Nce=[0,1],ZS=(t,e,r,n,i,a,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:s,type:c}=t,f=Zl(e,a);return f&&s==null?u7(0,r.length):c==="category"?Ace(n,t,f):i==="expand"?Nce:o}},JS=ne([Or,pt,KS,ly,t0,ur,Dce],ZS),Nj=(t,e,r,n,i)=>{if(t!=null){var{scale:a,type:o}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var s="scale".concat($p(a));return s in qh?s:"point"}}},dd=ne([Or,pt,mj,jS,ur],Nj);function Mce(t){if(t!=null){if(t in qh)return qh[t]();var e="scale".concat($p(t));if(e in qh)return qh[e]()}}function eC(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var i=Mce(e);if(i!=null){var a=i.domain(r).range(n);return xie(a),a}}}var tC=(t,e,r)=>{var n=YS(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Gf(t))return nce(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Gf(t))return ice(t,e.tickCount,e.allowDecimals)}},rC=ne([JS,n0,dd],tC),nC=(t,e,r,n)=>{if(n!=="angleAxis"&&t?.type==="number"&&Gf(e)&&Array.isArray(r)&&r.length>0){var i=e[0],a=r[0],o=e[1],s=r[r.length-1];return[Math.min(i,a),Math.max(o,s)]}return e},kce=ne([Or,JS,rC,ur],nC),jce=ne(ly,Or,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(_u(t.map(s=>s.value))).sort((s,c)=>s-c);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var o=n[a+1]-n[a];r=Math.min(r,o)}return r/i}}),Mj=ne(jce,pt,oj,nn,(t,e,r,n)=>n,(t,e,r,n,i)=>{if(!$i(t))return 0;var a=e==="vertical"?n.height:n.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var o=qn(r,t*a),s=t*a/2;return s-o-(s-o)/a*o}return 0}),Lce=(t,e)=>{var r=Is(t,e);return r==null||typeof r.padding!="string"?0:Mj(t,"xAxis",e,r.padding)},Bce=(t,e)=>{var r=Os(t,e);return r==null||typeof r.padding!="string"?0:Mj(t,"yAxis",e,r.padding)},Uce=ne(Is,Lce,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((r=i.left)!==null&&r!==void 0?r:0)+e,right:((n=i.right)!==null&&n!==void 0?n:0)+e}}),zce=ne(Os,Bce,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((r=i.top)!==null&&r!==void 0?r:0)+e,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+e}}),Fce=ne([nn,Uce,Wm,Gm,(t,e,r)=>r],(t,e,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),Vce=ne([nn,pt,zce,Wm,Gm,(t,e,r)=>r],(t,e,r,n,i,a)=>{var{padding:o}=i;return a?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),a0=(t,e,r,n)=>{var i;switch(e){case"xAxis":return Fce(t,r,n);case"yAxis":return Vce(t,r,n);case"zAxis":return(i=HS(t,r))===null||i===void 0?void 0:i.range;case"angleAxis":return uj(t);case"radiusAxis":return fj(t,r);default:return}},kj=ne([Or,a0],iy),hd=ne([Or,dd,kce,kj],eC);ne([i0,cy,ur],Sj);function jj(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var uy=(t,e)=>e,fy=(t,e,r)=>r,Hce=ne($m,uy,fy,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(jj)),$ce=ne(qm,uy,fy,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(jj)),Lj=(t,e)=>({width:t.width,height:e.height}),qce=(t,e)=>{var r=typeof e.width=="number"?e.width:Kp;return{width:r,height:t.height}},Bj=ne(nn,Is,Lj),Gce=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Wce=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},Kce=ne(Cs,nn,Hce,uy,fy,(t,e,r,n,i)=>{var a={},o;return r.forEach(s=>{var c=Lj(e,s);o==null&&(o=Gce(e,n,t));var f=n==="top"&&!i||n==="bottom"&&i;a[s.id]=o-Number(f)*c.height,o+=(f?-1:1)*c.height}),a}),Xce=ne(Ss,nn,$ce,uy,fy,(t,e,r,n,i)=>{var a={},o;return r.forEach(s=>{var c=qce(e,s);o==null&&(o=Wce(e,n,t));var f=n==="left"&&!i||n==="right"&&i;a[s.id]=o-Number(f)*c.width,o+=(f?-1:1)*c.width}),a}),Yce=(t,e)=>{var r=Is(t,e);if(r!=null)return Kce(t,r.orientation,r.mirror)},Qce=ne([nn,Is,Yce,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Zce=(t,e)=>{var r=Os(t,e);if(r!=null)return Xce(t,r.orientation,r.mirror)},Jce=ne([nn,Os,Zce,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var i=r?.[n];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Uj=ne(nn,Os,(t,e)=>{var r=typeof e.width=="number"?e.width:Kp;return{width:r,height:t.height}}),FP=(t,e,r)=>{switch(e){case"xAxis":return Bj(t,r).width;case"yAxis":return Uj(t,r).height;default:return}},zj=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=r,s=Zl(t,n),c=e.map(f=>f.value);if(o&&s&&a==="category"&&i&&jk(c))return c}},iC=ne([pt,ly,Or,ur],zj),Fj=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,o=Zl(t,n);if(o&&(i==="number"||a!=="auto"))return e.map(s=>s.value)}},aC=ne([pt,ly,n0,ur],Fj),VP=ne([pt,vce,dd,hd,iC,aC,a0,rC,ur],(t,e,r,n,i,a,o,s,c)=>{if(e==null)return null;var f=Zl(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:f,niceTicks:s,range:o,realScaleType:r,scale:n}}),eue=(t,e,r,n,i,a,o,s,c)=>{if(!(e==null||n==null)){var f=Zl(t,c),{type:d,ticks:p,tickCount:g}=e,y=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=d==="category"&&n.bandwidth?n.bandwidth()/y:0;b=c==="angleAxis"&&a!=null&&a.length>=2?vn(a[0]-a[1])*2*b:b;var w=p||i;if(w){var E=w.map((S,I)=>{var O=o?o.indexOf(S):S;return{index:I,coordinate:n(O)+b,value:S,offset:b}});return E.filter(S=>!Vi(S.coordinate))}return f&&s?s.map((S,I)=>({coordinate:n(S)+b,value:S,index:I,offset:b})):n.ticks?n.ticks(g).map(S=>({coordinate:n(S)+b,value:S,offset:b})):n.domain().map((S,I)=>({coordinate:n(S)+b,value:o?o[S]:S,index:I,offset:b}))}},Vj=ne([pt,n0,dd,hd,rC,a0,iC,aC,ur],eue),tue=(t,e,r,n,i,a,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var s=Zl(t,o),{tickCount:c}=e,f=0;return f=o==="angleAxis"&&n?.length>=2?vn(n[0]-n[1])*2*f:f,s&&a?a.map((d,p)=>({coordinate:r(d)+f,value:d,index:p,offset:f})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+f,value:d,offset:f})):r.domain().map((d,p)=>({coordinate:r(d)+f,value:i?i[d]:d,index:p,offset:f}))}},Vl=ne([pt,n0,hd,a0,iC,aC,ur],tue),Hl=ne(Or,hd,(t,e)=>{if(!(t==null||e==null))return kv(kv({},t),{},{scale:e})}),rue=ne([Or,dd,JS,kj],eC);ne((t,e,r)=>HS(t,r),rue,(t,e)=>{if(!(t==null||e==null))return kv(kv({},t),{},{scale:e})});var nue=ne([pt,$m,qm],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Hj=t=>t.options.defaultTooltipEventType,$j=t=>t.options.validateTooltipEventTypes;function qj(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function oC(t,e){var r=Hj(t),n=$j(t);return qj(e,r,n)}function iue(t){return Re(e=>oC(e,t))}var Gj=(t,e)=>{var r,n=Number(e);if(!(Vi(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},aue=t=>t.tooltip.settings,El={active:!1,index:null,dataKey:void 0,coordinate:void 0},oue={itemInteraction:{click:El,hover:El},axisInteraction:{click:El,hover:El},keyboardInteraction:El,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Wj=qi({name:"tooltip",initialState:oue,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var r=cs(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:sue,removeTooltipEntrySettings:lue,setTooltipSettingsState:cue,setActiveMouseOverItemIndex:Kj,mouseLeaveItem:uue,mouseLeaveChart:Xj,setActiveClickItemIndex:fue,setMouseOverAxisIndex:Yj,setMouseClickAxisIndex:due,setSyncInteraction:Ww,setKeyboardInteraction:Kw}=Wj.actions,hue=Wj.reducer;function HP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function p1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(r),!0).forEach(function(n){pue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pue(t,e,r){return(e=gue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gue(t){var e=vue(t,"string");return typeof e=="symbol"?e:e+""}function vue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mue(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function yue(t){return t.index!=null}var Qj=(t,e,r,n)=>{if(e==null)return El;var i=mue(t,e,r);if(i==null)return El;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(yue(i)){if(a)return p1(p1({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return p1(p1({},El),{},{coordinate:i.coordinate})},sC=(t,e)=>{var r=t?.index;if(r==null)return null;var n=Number(r);if(!$i(n))return r;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(n,a)))},Zj=(t,e,r,n,i,a,o,s)=>{if(!(a==null||s==null)){var c=o[0],f=c==null?void 0:s(c.positions,a);if(f!=null)return f;var d=i?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},Jj=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},o0=t=>t.options.tooltipPayloadSearcher,pd=t=>t.tooltip;function $P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(r),!0).forEach(function(n){xue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$P(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xue(t,e,r){return(e=bue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bue(t){var e=_ue(t,"string");return typeof e=="symbol"?e:e+""}function _ue(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wue(t,e){return t??e}var eL=(t,e,r,n,i,a,o)=>{if(!(e==null||a==null)){var{chartData:s,computedData:c,dataStartIndex:f,dataEndIndex:d}=r,p=[];return t.reduce((g,y)=>{var b,{dataDefinedOnItem:w,settings:E}=y,S=wue(w,s),I=Array.isArray(S)?q9(S,f,d):S,O=(b=E?.dataKey)!==null&&b!==void 0?b:n,D=E?.nameKey,k;if(n&&Array.isArray(I)&&!Array.isArray(I[0])&&o==="axis"?k=Lk(I,n,i):k=a(I,e,c,D),Array.isArray(k))k.forEach(R=>{var N=qP(qP({},E),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});g.push(TR({tooltipEntrySettings:N,dataKey:R.dataKey,payload:R.payload,value:Yt(R.payload,R.dataKey),name:R.name}))});else{var B;g.push(TR({tooltipEntrySettings:E,dataKey:O,payload:k,value:Yt(k,O),name:(B=Yt(k,D))!==null&&B!==void 0?B:E?.name}))}return g},p)}},lC=ne([yn,pt,mj,jS,on],Nj),Eue=ne([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Aue=ne([on,ud],$S),s0=ne([Eue,yn,Aue],qS),Sue=ne([s0],t=>t.filter(oy)),Cue=ne([s0],GS),gd=ne([Cue,rc],WS),Tue=ne([Sue,rc,yn],pj),cC=ne([gd,yn,s0],XS),Iue=ne([yn],YS),Oue=ne([s0],t=>t.filter(oy)),Rue=ne([Tue,Oue,t0],wj),Pue=ne([Rue,rc,on],Ej),Due=ne([s0],xj),Nue=ne([gd,yn,Due,cy,on],Aj),Mue=ne([Cj,on,ud],fd),kue=ne([Mue,on],Oj),jue=ne([Tj,on,ud],fd),Lue=ne([jue,on],Rj),Bue=ne([Ij,on,ud],fd),Uue=ne([Bue,on],Pj),zue=ne([kue,Uue,Lue],jv),Fue=ne([yn,Iue,Pue,Nue,zue,pt,on],QS),tL=ne([yn,pt,gd,cC,t0,on,Fue],ZS),Vue=ne([tL,yn,lC],tC),Hue=ne([yn,tL,Vue,on],nC),rL=t=>{var e=on(t),r=ud(t),n=!1;return a0(t,e,r,n)},nL=ne([yn,rL],iy),iL=ne([yn,lC,Hue,nL],eC),$ue=ne([pt,cC,yn,on],zj),que=ne([pt,cC,yn,on],Fj),Gue=(t,e,r,n,i,a,o,s)=>{if(e){var{type:c}=e,f=Zl(t,s);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return p=s==="angleAxis"&&i!=null&&i?.length>=2?vn(i[0]-i[1])*2*p:p,f&&o?o.map((g,y)=>({coordinate:n(g)+p,value:g,index:y,offset:p})):n.domain().map((g,y)=>({coordinate:n(g)+p,value:a?a[g]:g,index:y,offset:p}))}}},Rs=ne([pt,yn,lC,iL,rL,$ue,que,on],Gue),uC=ne([Hj,$j,aue],(t,e,r)=>qj(r.shared,t,e)),aL=t=>t.tooltip.settings.trigger,fC=t=>t.tooltip.settings.defaultIndex,dy=ne([pd,uC,aL,fC],Qj),$l=ne([dy,gd],sC),oL=ne([Rs,$l],Gj),sL=ne([dy],t=>{if(t)return t.dataKey}),lL=ne([pd,uC,aL,fC],Jj),Wue=ne([Ss,Cs,pt,nn,Rs,fC,lL,o0],Zj),Kue=ne([dy,Wue],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Xue=ne([dy],t=>t.active),Yue=ne([lL,$l,rc,hj,oL,o0,uC],eL),Que=ne([Yue],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function GP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(r),!0).forEach(function(n){Zue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zue(t,e,r){return(e=Jue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jue(t){var e=efe(t,"string");return typeof e=="symbol"?e:e+""}function efe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tfe=()=>Re(yn),rfe=()=>{var t=tfe(),e=Re(Rs),r=Re(iL);return mp(WP(WP({},t),{},{scale:r}),e)},nfe=()=>Re(jS),dC=(t,e)=>e,cL=(t,e,r)=>r,hC=(t,e,r,n)=>n,ife=ne(Rs,t=>Bm(t,e=>e.coordinate)),pC=ne([pd,dC,cL,hC],Qj),uL=ne([pC,gd],sC),afe=(t,e,r)=>{if(e!=null){var n=pd(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},fL=ne([pd,dC,cL,hC],Jj),Lv=ne([Ss,Cs,pt,nn,Rs,hC,fL,o0],Zj),ofe=ne([pC,Lv],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),dL=ne(Rs,uL,Gj),sfe=ne([fL,uL,rc,hj,dL,o0,dC],eL),lfe=ne([pC],t=>({isActive:t.active,activeIndex:t.index})),cfe=(t,e,r,n,i,a,o,s)=>{if(!(!t||!e||!n||!i||!a)){var c=Rie(t.chartX,t.chartY,e,r,s);if(c){var f=Die(c,e),d=mie(f,o,a,n,i),p=Pie(e,a,d,c);return{activeIndex:String(d),activeCoordinate:p}}}};function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xw.apply(null,arguments)}function KP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function g1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(r),!0).forEach(function(n){ufe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ufe(t,e,r){return(e=ffe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ffe(t){var e=dfe(t,"string");return typeof e=="symbol"?e:e+""}function dfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hfe(t){var{coordinate:e,payload:r,index:n,offset:i,tooltipAxisBandSize:a,layout:o,cursor:s,tooltipEventType:c,chartName:f}=t,d=e,p=r,g=n;if(!s||!d||f!=="ScatterChart"&&c!=="axis")return null;var y,b;if(f==="ScatterChart")y=d,b=Dae;else if(f==="BarChart")y=Nae(o,d,i,a),b=o7;else if(o==="radial"){var{cx:w,cy:E,radius:S,startAngle:I,endAngle:O}=s7(d);y={cx:w,cy:E,startAngle:I,endAngle:O,innerRadius:S,outerRadius:S},b=c7}else y={points:doe(o,d,i)},b=cS;var D=typeof s=="object"&&"className"in s?s.className:void 0,k=g1(g1(g1(g1({stroke:"#ccc",pointerEvents:"none"},i),y),dr(s,!1)),{},{payload:p,payloadIndex:g,className:bt("recharts-tooltip-cursor",D)});return C.isValidElement(s)?C.cloneElement(s,k):C.createElement(b,k)}function pfe(t){var e=rfe(),r=Q9(),n=Km(),i=nfe();return C.createElement(hfe,Xw({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:r,layout:n,tooltipAxisBandSize:e,chartName:i}))}var hL=C.createContext(null),gfe=()=>C.useContext(hL),l_={exports:{}},XP;function vfe(){return XP||(XP=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,f,d){this.fn=c,this.context=f,this.once=d||!1}function a(c,f,d,p,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new i(d,p||c,g),b=r?r+f:f;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],y]:c._events[b].push(y):(c._events[b]=y,c._eventsCount++),c}function o(c,f){--c._eventsCount===0?c._events=new n:delete c._events[f]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var f=[],d,p;if(this._eventsCount===0)return f;for(p in d=this._events)e.call(d,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},s.prototype.listeners=function(f){var d=r?r+f:f,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,y=p.length,b=new Array(y);g<y;g++)b[g]=p[g].fn;return b},s.prototype.listenerCount=function(f){var d=r?r+f:f,p=this._events[d];return p?p.fn?1:p.length:0},s.prototype.emit=function(f,d,p,g,y,b){var w=r?r+f:f;if(!this._events[w])return!1;var E=this._events[w],S=arguments.length,I,O;if(E.fn){switch(E.once&&this.removeListener(f,E.fn,void 0,!0),S){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,d),!0;case 3:return E.fn.call(E.context,d,p),!0;case 4:return E.fn.call(E.context,d,p,g),!0;case 5:return E.fn.call(E.context,d,p,g,y),!0;case 6:return E.fn.call(E.context,d,p,g,y,b),!0}for(O=1,I=new Array(S-1);O<S;O++)I[O-1]=arguments[O];E.fn.apply(E.context,I)}else{var D=E.length,k;for(O=0;O<D;O++)switch(E[O].once&&this.removeListener(f,E[O].fn,void 0,!0),S){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,d);break;case 3:E[O].fn.call(E[O].context,d,p);break;case 4:E[O].fn.call(E[O].context,d,p,g);break;default:if(!I)for(k=1,I=new Array(S-1);k<S;k++)I[k-1]=arguments[k];E[O].fn.apply(E[O].context,I)}}return!0},s.prototype.on=function(f,d,p){return a(this,f,d,p,!1)},s.prototype.once=function(f,d,p){return a(this,f,d,p,!0)},s.prototype.removeListener=function(f,d,p,g){var y=r?r+f:f;if(!this._events[y])return this;if(!d)return o(this,y),this;var b=this._events[y];if(b.fn)b.fn===d&&(!g||b.once)&&(!p||b.context===p)&&o(this,y);else{for(var w=0,E=[],S=b.length;w<S;w++)(b[w].fn!==d||g&&!b[w].once||p&&b[w].context!==p)&&E.push(b[w]);E.length?this._events[y]=E.length===1?E[0]:E:o(this,y)}return this},s.prototype.removeAllListeners=function(f){var d;return f?(d=r?r+f:f,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(l_)),l_.exports}var mfe=vfe();const yfe=Io(mfe);var Ap=new yfe,Yw="recharts.syncEvent.tooltip",YP="recharts.syncEvent.brush";function gC(t,e){if(e){var r=Number.parseInt(e,10);if(!Vi(r))return t?.[r]}}var xfe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},pL=qi({name:"options",initialState:xfe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),bfe=pL.reducer,{createEventEmitter:_fe}=pL.actions;function wfe(t){return t.tooltip.syncInteraction}var Efe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},gL=qi({name:"chartData",initialState:Efe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:QP,setDataStartEndIndexes:Afe,setComputedData:Eme}=gL.actions,Sfe=gL.reducer,Cfe=["x","y"];function ZP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Mc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(r),!0).forEach(function(n){Tfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tfe(t,e,r){return(e=Ife(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ife(t){var e=Ofe(t,"string");return typeof e=="symbol"?e:e+""}function Ofe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rfe(t,e){if(t==null)return{};var r,n,i=Pfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Pfe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var vL=()=>{};function Dfe(){var t=Re(LS),e=Re(BS),r=hr(),n=Re(sj),i=Re(Rs),a=Km(),o=aS(),s=Re(c=>c.rootProps.className);C.useEffect(()=>{if(t==null)return vL;var c=(f,d,p)=>{if(e!==p&&t===f){if(n==="index"){var g;if(o&&d!==null&&d!==void 0&&(g=d.payload)!==null&&g!==void 0&&g.coordinate){var y=d.payload.coordinate,{x:b,y:w}=y,E=Rfe(y,Cfe),S=Mc(Mc(Mc({},E),typeof b=="number"&&{x:Math.max(o.x,Math.min(b,o.x+o.width))}),typeof w=="number"&&{y:Math.max(o.y,Math.min(w,o.y+o.height))}),I=Mc(Mc({},d),{},{payload:Mc(Mc({},d.payload),{},{coordinate:S})});r(I)}else r(d);return}if(i!=null){var O;if(typeof n=="function"){var D={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},k=n(i,D);O=i[k]}else n==="value"&&(O=i.find(F=>String(F.value)===d.payload.label));var{coordinate:B}=d.payload;if(O==null||d.payload.active===!1||B==null||o==null){r(Ww({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:R,y:N}=B,L=Math.min(R,o.x+o.width),U=Math.min(N,o.y+o.height),j={x:a==="horizontal"?O.coordinate:L,y:a==="horizontal"?U:O.coordinate},V=Ww({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(O.index),label:d.payload.label});r(V)}}};return Ap.on(Yw,c),()=>{Ap.off(Yw,c)}},[s,r,e,t,n,i,a,o])}function Nfe(){var t=Re(LS),e=Re(BS),r=hr();C.useEffect(()=>{if(t==null)return vL;var n=(i,a,o)=>{e!==o&&t===i&&r(Afe(a))};return Ap.on(YP,n),()=>{Ap.off(YP,n)}},[r,e,t])}function Mfe(){var t=hr();C.useEffect(()=>{t(_fe())},[t]),Dfe(),Nfe()}function kfe(t,e,r,n,i,a){var o=Re(g=>afe(g,t,e)),s=Re(BS),c=Re(LS),f=Re(sj),d=Re(wfe),p=d?.active;C.useEffect(()=>{if(!p&&c!=null&&s!=null){var g=Ww({active:a,coordinate:r,dataKey:o,index:i,label:typeof n=="number"?String(n):n});Ap.emit(Yw,c,g,s)}},[p,r,o,i,n,s,c,f,a])}function JP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function e5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(r),!0).forEach(function(n){jfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jfe(t,e,r){return(e=Lfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lfe(t){var e=Bfe(t,"string");return typeof e=="symbol"?e:e+""}function Bfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ufe(t){return t.dataKey}function zfe(t,e){return C.isValidElement(t)?C.cloneElement(t,e):typeof t=="function"?C.createElement(t,e):C.createElement(uae,e)}var t5=[],Ffe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Jl.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function hy(t){var e=kn(t,Ffe),{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,content:o,filterNull:s,isAnimationActive:c,offset:f,payloadUniqBy:d,position:p,reverseDirection:g,useTranslate3d:y,wrapperStyle:b,cursor:w,shared:E,trigger:S,defaultIndex:I,portal:O,axisId:D}=e,k=hr(),B=typeof I=="number"?String(I):I;C.useEffect(()=>{k(cue({shared:E,trigger:S,axisId:D,active:r,defaultIndex:B}))},[k,E,S,D,r,B]);var R=aS(),N=t7(),L=iue(E),{activeIndex:U,isActive:j}=Re(De=>lfe(De,L,S,B)),V=Re(De=>sfe(De,L,S,B)),F=Re(De=>dL(De,L,S,B)),he=Re(De=>ofe(De,L,S,B)),we=V,Y=gfe(),ie=r??j,[K,ge]=x9([we,ie]),Ie=L==="axis"?F:void 0;kfe(L,S,he,Ie,U,ie);var G=O??Y;if(G==null)return null;var Z=we??t5;ie||(Z=t5),s&&Z.length&&(Z=p9(we.filter(De=>De.value!=null&&(De.hide!==!0||e.includeHidden)),d,Ufe));var be=Z.length>0,Ae=C.createElement(mae,{allowEscapeViewBox:n,animationDuration:i,animationEasing:a,isAnimationActive:c,active:ie,coordinate:he,hasPayload:be,offset:f,position:p,reverseDirection:g,useTranslate3d:y,viewBox:R,wrapperStyle:b,lastBoundingBox:K,innerRef:ge,hasPortalFromProps:!!O},zfe(o,e5(e5({},e),{},{payload:Z,label:Ie,active:ie,coordinate:he,accessibilityLayer:N})));return C.createElement(C.Fragment,null,Fk.createPortal(Ae,G),ie&&C.createElement(pfe,{cursor:w,tooltipEventType:L,coordinate:he,payload:we,index:U}))}var c_={},u_={},f_={},r5;function Vfe(){return r5||(r5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:i,edges:a}={}){let o,s=null;const c=a!=null&&a.includes("leading"),f=a==null||a.includes("trailing"),d=()=>{s!==null&&(r.apply(o,s),o=void 0,s=null)},p=()=>{f&&d(),w()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,p()},n)},b=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{b(),o=void 0,s=null},E=()=>{d()},S=function(...I){if(i?.aborted)return;o=this,s=I;const O=g==null;y(),c&&O&&d()};return S.schedule=y,S.cancel=w,S.flush=E,i?.addEventListener("abort",w,{once:!0}),S}t.debounce=e})(f_)),f_}var n5;function Hfe(){return n5||(n5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vfe();function r(n,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:s=!0,maxWait:c}=a,f=Array(2);o&&(f[0]="leading"),s&&(f[1]="trailing");let d,p=null;const g=e.debounce(function(...w){d=n.apply(this,w),p=null},i,{edges:f}),y=function(...w){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(d=n.apply(this,w),p=Date.now(),g.cancel(),g.schedule(),d):(g.apply(this,w),d)},b=()=>(g.flush(),d);return y.cancel=g.cancel,y.flush=b,y}t.debounce=r})(u_)),u_}var i5;function $fe(){return i5||(i5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hfe();function r(n,i=0,a={}){const{leading:o=!0,trailing:s=!0}=a;return e.debounce(n,i,{leading:o,maxWait:i,trailing:s})}t.throttle=r})(c_)),c_}var d_,a5;function qfe(){return a5||(a5=1,d_=$fe().throttle),d_}var Gfe=qfe();const Wfe=Io(Gfe);var ep=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function o5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function h_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?o5(Object(r),!0).forEach(function(n){Kfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kfe(t,e,r){return(e=Xfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xfe(t){var e=Yfe(t,"string");return typeof e=="symbol"?e:e+""}function Yfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var py=C.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:o=0,minHeight:s,maxHeight:c,children:f,debounce:d=0,id:p,className:g,onResize:y,style:b={}}=t,w=C.useRef(null),E=C.useRef();E.current=y,C.useImperativeHandle(e,()=>w.current);var[S,I]=C.useState({containerWidth:n.width,containerHeight:n.height}),O=C.useCallback((k,B)=>{I(R=>{var N=Math.round(k),L=Math.round(B);return R.containerWidth===N&&R.containerHeight===L?R:{containerWidth:N,containerHeight:L}})},[]);C.useEffect(()=>{var k=L=>{var U,{width:j,height:V}=L[0].contentRect;O(j,V),(U=E.current)===null||U===void 0||U.call(E,j,V)};d>0&&(k=Wfe(k,d,{trailing:!0,leading:!1}));var B=new ResizeObserver(k),{width:R,height:N}=w.current.getBoundingClientRect();return O(R,N),B.observe(w.current),()=>{B.disconnect()}},[O,d]);var D=C.useMemo(()=>{var{containerWidth:k,containerHeight:B}=S;if(k<0||B<0)return null;ep(Hc(i)||Hc(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),ep(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=Hc(i)?k:i,N=Hc(a)?B:a;return r&&r>0&&(R?N=R/r:N&&(R=N*r),c&&N>c&&(N=c)),ep(R>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,N,i,a,o,s,r),C.Children.map(f,L=>C.cloneElement(L,{width:R,height:N,style:h_({width:R,height:N},L.props.style)}))},[r,f,a,c,s,o,S,i]);return C.createElement("div",{id:p?"".concat(p):void 0,className:bt("recharts-responsive-container",g),style:h_(h_({},b),{},{width:i,height:a,minWidth:o,minHeight:s,maxHeight:c}),ref:w},C.createElement("div",{style:{width:0,height:0,overflow:"visible"}},D))}),vd=t=>null;vd.displayName="Cell";function Qfe(t,e,r){return(e=Zfe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zfe(t){var e=Jfe(t,"string");return typeof e=="symbol"?e:e+""}function Jfe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ede{constructor(e){Qfe(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function s5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tde(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(r),!0).forEach(function(n){rde(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rde(t,e,r){return(e=nde(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nde(t){var e=ide(t,"string");return typeof e=="symbol"?e:e+""}function ide(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ade={cacheSize:2e3,enableCache:!0},mL=tde({},ade),l5=new ede(mL.cacheSize),ode={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},c5="recharts_measurement_span";function sde(t,e){var r=e.fontSize||"",n=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",o=e.letterSpacing||"",s=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(s)}var u5=(t,e)=>{try{var r=document.getElementById(c5);r||(r=document.createElement("span"),r.setAttribute("id",c5),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,ode,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},tp=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Jl.isSsr)return{width:0,height:0};if(!mL.enableCache)return u5(e,r);var n=sde(e,r),i=l5.get(n);if(i)return i;var a=u5(e,r);return l5.set(n,a),a},f5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lde=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cde=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,yL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ude=Object.keys(yL),xf="NaN";function fde(t,e){return t*yL[e]}class hi{static parse(e){var r,[,n,i]=(r=cde.exec(e))!==null&&r!==void 0?r:[];return new hi(parseFloat(n),i??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,Vi(e)&&(this.unit=""),r!==""&&!lde.test(r)&&(this.num=NaN,this.unit=""),ude.includes(r)&&(this.num=fde(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new hi(NaN,""):new hi(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new hi(NaN,""):new hi(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new hi(NaN,""):new hi(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new hi(NaN,""):new hi(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Vi(this.num)}}function xL(t){if(t.includes(xf))return xf;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,i,a]=(r=f5.exec(e))!==null&&r!==void 0?r:[],o=hi.parse(n??""),s=hi.parse(a??""),c=i==="*"?o.multiply(s):o.divide(s);if(c.isNaN())return xf;e=e.replace(f5,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,d,p,g]=(f=d5.exec(e))!==null&&f!==void 0?f:[],y=hi.parse(d??""),b=hi.parse(g??""),w=p==="+"?y.add(b):y.subtract(b);if(w.isNaN())return xf;e=e.replace(d5,w.toString())}return e}var h5=/\(([^()]*)\)/;function dde(t){for(var e=t,r;(r=h5.exec(e))!=null;){var[,n]=r;e=e.replace(h5,xL(n))}return e}function hde(t){var e=t.replace(/\s+/g,"");return e=dde(e),e=xL(e),e}function pde(t){try{return hde(t)}catch{return xf}}function p_(t){var e=pde(t.slice(5,-1));return e===xf?"":e}var gde=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],vde=["dx","dy","angle","className","breakAll"];function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qw.apply(null,arguments)}function p5(t,e){if(t==null)return{};var r,n,i=mde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function mde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var bL=/[ \f\n\r\t\v\u2028\u2029]+/,_L=t=>{var{children:e,breakAll:r,style:n}=t;try{var i=[];cr(e)||(r?i=e.toString().split(""):i=e.toString().split(bL));var a=i.map(s=>({word:s,width:tp(s,n).width})),o=r?0:tp(" ",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},yde=(t,e,r,n,i)=>{var{maxLines:a,children:o,style:s,breakAll:c}=t,f=Ne(a),d=o,p=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.reduce((V,F)=>{var{word:he,width:we}=F,Y=V[V.length-1];if(Y&&(n==null||i||Y.width+we+r<Number(n)))Y.words.push(he),Y.width+=we+r;else{var ie={words:[he],width:we};V.push(ie)}return V},[])},g=p(e),y=U=>U.reduce((j,V)=>j.width>V.width?j:V);if(!f||i)return g;var b=g.length>a||y(g).width>Number(n);if(!b)return g;for(var w="…",E=U=>{var j=d.slice(0,U),V=_L({breakAll:c,style:s,children:j+w}).wordsWithComputedWidth,F=p(V),he=F.length>a||y(F).width>Number(n);return[he,F]},S=0,I=d.length-1,O=0,D;S<=I&&O<=d.length-1;){var k=Math.floor((S+I)/2),B=k-1,[R,N]=E(B),[L]=E(k);if(!R&&!L&&(S=k+1),R&&L&&(I=k-1),!R&&L){D=N;break}O++}return D||g},g5=t=>{var e=cr(t)?[]:t.toString().split(bL);return[{words:e}]},xde=t=>{var{width:e,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:o}=t;if((e||r)&&!Jl.isSsr){var s,c,f=_L({breakAll:a,children:n,style:i});if(f){var{wordsWithComputedWidth:d,spaceWidth:p}=f;s=d,c=p}else return g5(n);return yde({breakAll:a,children:n,maxLines:o,style:i},s,c,e,r)}return g5(n)},v5="#808080",gy=C.forwardRef((t,e)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:s="start",verticalAnchor:c="end",fill:f=v5}=t,d=p5(t,gde),p=C.useMemo(()=>xde({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:g,dy:y,angle:b,className:w,breakAll:E}=d,S=p5(d,vde);if(!Co(r)||!Co(n)||p.length===0)return null;var I=r+(Ne(g)?g:0),O=n+(Ne(y)?y:0),D;switch(c){case"start":D=p_("calc(".concat(a,")"));break;case"middle":D=p_("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:D=p_("calc(".concat(p.length-1," * -").concat(i,")"));break}var k=[];if(o){var B=p[0].width,{width:R}=d;k.push("scale(".concat(Ne(R)?R/B:1,")"))}return b&&k.push("rotate(".concat(b,", ").concat(I,", ").concat(O,")")),k.length&&(S.transform=k.join(" ")),C.createElement("text",Qw({},dr(S,!0),{ref:e,x:I,y:O,className:bt("recharts-text",w),textAnchor:s,fill:f.includes("url")?v5:f}),p.map((N,L)=>{var U=N.words.join(E?"":" ");return C.createElement("tspan",{x:I,dy:L===0?D:i,key:"".concat(U,"-").concat(L)},U)}))});gy.displayName="Text";var bde=["labelRef"];function _de(t,e){if(t==null)return{};var r,n,i=wde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function m5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Tr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m5(Object(r),!0).forEach(function(n){Ede(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ede(t,e,r){return(e=Ade(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ade(t){var e=Sde(t,"string");return typeof e=="symbol"?e:e+""}function Sde(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rs(){return rs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rs.apply(null,arguments)}var wL=C.createContext(null),Cde=t=>{var{x:e,y:r,width:n,height:i,children:a}=t,o=C.useMemo(()=>({x:e,y:r,width:n,height:i}),[e,r,n,i]);return C.createElement(wL.Provider,{value:o},a)},EL=()=>{var t=C.useContext(wL),e=aS();return t||e},Tde=C.createContext(null),Ide=()=>{var t=C.useContext(Tde),e=Re(dj);return t||e},Ode=t=>{var{value:e,formatter:r}=t,n=cr(t.children)?e:t.children;return typeof r=="function"?r(n):n},vC=t=>t!=null&&typeof t=="function",Rde=(t,e)=>{var r=vn(e-t),n=Math.min(Math.abs(e-t),360);return r*n},Pde=(t,e,r,n,i)=>{var{offset:a,className:o}=t,{cx:s,cy:c,innerRadius:f,outerRadius:d,startAngle:p,endAngle:g,clockWise:y}=i,b=(f+d)/2,w=Rde(p,g),E=w>=0?1:-1,S,I;switch(e){case"insideStart":S=p+E*a,I=y;break;case"insideEnd":S=g-E*a,I=!y;break;case"end":S=g+E*a,I=y;break;default:throw new Error("Unsupported position ".concat(e))}I=w<=0?I:!I;var O=Hr(s,c,b,S),D=Hr(s,c,b,S+(I?1:-1)*359),k="M".concat(O.x,",").concat(O.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(I?0:1,`,
    `).concat(D.x,",").concat(D.y),B=cr(t.id)?pp("recharts-radial-line-"):t.id;return C.createElement("text",rs({},n,{dominantBaseline:"central",className:bt("recharts-radial-bar-label",o)}),C.createElement("defs",null,C.createElement("path",{id:B,d:k})),C.createElement("textPath",{xlinkHref:"#".concat(B)},r))},Dde=(t,e,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:s,endAngle:c}=t,f=(s+c)/2;if(r==="outside"){var{x:d,y:p}=Hr(n,i,o+e,f);return{x:d,y:p,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+o)/2,{x:y,y:b}=Hr(n,i,g,f);return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},AL=t=>"cx"in t&&Ne(t.cx),Nde=(t,e)=>{var{parentViewBox:r,offset:n,position:i}=t,a;r!=null&&!AL(r)&&(a=r);var{x:o,y:s,width:c,height:f}=e,d=f>=0?1:-1,p=d*n,g=d>0?"end":"start",y=d>0?"start":"end",b=c>=0?1:-1,w=b*n,E=b>0?"end":"start",S=b>0?"start":"end";if(i==="top"){var I={x:o+c/2,y:s-d*n,textAnchor:"middle",verticalAnchor:g};return Tr(Tr({},I),a?{height:Math.max(s-a.y,0),width:c}:{})}if(i==="bottom"){var O={x:o+c/2,y:s+f+p,textAnchor:"middle",verticalAnchor:y};return Tr(Tr({},O),a?{height:Math.max(a.y+a.height-(s+f),0),width:c}:{})}if(i==="left"){var D={x:o-w,y:s+f/2,textAnchor:E,verticalAnchor:"middle"};return Tr(Tr({},D),a?{width:Math.max(D.x-a.x,0),height:f}:{})}if(i==="right"){var k={x:o+c+w,y:s+f/2,textAnchor:S,verticalAnchor:"middle"};return Tr(Tr({},k),a?{width:Math.max(a.x+a.width-k.x,0),height:f}:{})}var B=a?{width:c,height:f}:{};return i==="insideLeft"?Tr({x:o+w,y:s+f/2,textAnchor:S,verticalAnchor:"middle"},B):i==="insideRight"?Tr({x:o+c-w,y:s+f/2,textAnchor:E,verticalAnchor:"middle"},B):i==="insideTop"?Tr({x:o+c/2,y:s+p,textAnchor:"middle",verticalAnchor:y},B):i==="insideBottom"?Tr({x:o+c/2,y:s+f-p,textAnchor:"middle",verticalAnchor:g},B):i==="insideTopLeft"?Tr({x:o+w,y:s+p,textAnchor:S,verticalAnchor:y},B):i==="insideTopRight"?Tr({x:o+c-w,y:s+p,textAnchor:E,verticalAnchor:y},B):i==="insideBottomLeft"?Tr({x:o+w,y:s+f-p,textAnchor:S,verticalAnchor:g},B):i==="insideBottomRight"?Tr({x:o+c-w,y:s+f-p,textAnchor:E,verticalAnchor:g},B):i&&typeof i=="object"&&(Ne(i.x)||Hc(i.x))&&(Ne(i.y)||Hc(i.y))?Tr({x:o+qn(i.x,c),y:s+qn(i.y,f),textAnchor:"end",verticalAnchor:"end"},B):Tr({x:o+c/2,y:s+f/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Mde={offset:5};function yl(t){var e=kn(t,Mde),{viewBox:r,position:n,value:i,children:a,content:o,className:s="",textBreakAll:c,labelRef:f}=e,d=Ide(),p=EL(),g=n==="center"?p:d??p,y=r||g;if(!y||cr(i)&&cr(a)&&!C.isValidElement(o)&&typeof o!="function")return null;var b=Tr(Tr({},e),{},{viewBox:y});if(C.isValidElement(o)){var{labelRef:w}=b,E=_de(b,bde);return C.cloneElement(o,E)}var S;if(typeof o=="function"){if(S=C.createElement(o,b),C.isValidElement(S))return S}else S=Ode(e);var I=AL(y),O=dr(e,!0);if(I&&(n==="insideStart"||n==="insideEnd"||n==="end"))return Pde(e,n,S,O,y);var D=I?Dde(y,e.offset,e.position):Nde(e,y);return C.createElement(gy,rs({ref:f,className:bt("recharts-label",s)},O,D,{breakAll:c}),S)}yl.displayName="Label";var kde=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?C.createElement(yl,rs({key:"label-implicit"},n)):Co(t)?C.createElement(yl,rs({key:"label-implicit",value:t},n)):C.isValidElement(t)?t.type===yl?C.cloneElement(t,Tr({key:"label-implicit"},n)):C.createElement(yl,rs({key:"label-implicit",content:t},n)):vC(t)?C.createElement(yl,rs({key:"label-implicit",content:t},n)):t&&typeof t=="object"?C.createElement(yl,rs({},t,{key:"label-implicit"},n)):null};function jde(t){var{label:e}=t,r=EL();return kde(e,r)||null}var g_={},v_={},y5;function Lde(){return y5||(y5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(v_)),v_}var m_={},x5;function Bde(){return x5||(x5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(m_)),m_}var b5;function Ude(){return b5||(b5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lde(),r=Bde(),n=YA();function i(a){if(n.isArrayLike(a))return e.last(r.toArray(a))}t.last=i})(g_)),g_}var y_,_5;function zde(){return _5||(_5=1,y_=Ude().last),y_}var Fde=zde();const Vde=Io(Fde);var Hde=["valueAccessor"],$de=["dataKey","clockWise","id","textBreakAll"];function Bv(){return Bv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bv.apply(null,arguments)}function w5(t,e){if(t==null)return{};var r,n,i=qde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function qde(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Gde=t=>Array.isArray(t.value)?Vde(t.value):t.value,SL=C.createContext(void 0),CL=SL.Provider,TL=C.createContext(void 0),Wde=TL.Provider;function Kde(){return C.useContext(SL)}function Xde(){return C.useContext(TL)}function D1(t){var{valueAccessor:e=Gde}=t,r=w5(t,Hde),{dataKey:n,clockWise:i,id:a,textBreakAll:o}=r,s=w5(r,$de),c=Kde(),f=Xde(),d=c||f;return!d||!d.length?null:C.createElement(Mn,{className:"recharts-label-list"},d.map((p,g)=>{var y,b=cr(n)?e(p,g):Yt(p&&p.payload,n),w=cr(a)?{}:{id:"".concat(a,"-").concat(g)};return C.createElement(yl,Bv({},dr(p,!0),s,w,{fill:(y=r.fill)!==null&&y!==void 0?y:p.fill,parentViewBox:p.parentViewBox,value:b,textBreakAll:o,viewBox:p.viewBox,key:"label-".concat(g),index:g}))}))}D1.displayName="LabelList";function mC(t){var{label:e}=t;return e?e===!0?C.createElement(D1,{key:"labelList-implicit"}):C.isValidElement(e)||vC(e)?C.createElement(D1,{key:"labelList-implicit",content:e}):typeof e=="object"?C.createElement(D1,Bv({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zw.apply(null,arguments)}var IL=t=>{var{cx:e,cy:r,r:n,className:i}=t,a=bt("recharts-dot",i);return e===+e&&r===+r&&n===+n?C.createElement("circle",Zw({},Mo(t),FA(t),{className:a,cx:e,cy:r,r:n})):null},OL=t=>t.graphicalItems.polarItems,Yde=ne([ur,r0],$S),yC=ne([OL,Or,Yde],qS),Qde=ne([yC],GS),xC=ne([Qde,NS],WS),Zde=ne([xC,Or,yC],XS),Jde=ne([xC,Or,yC],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(i=>{var a,o=Yt(n,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(n=>({value:Yt(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]}))),E5=()=>{},ehe=ne([Or,Dj,E5,Jde,E5,pt,ur],QS),RL=ne([Or,pt,xC,Zde,t0,ur,ehe],ZS),the=ne([RL,Or,dd],tC);ne([Or,RL,the,ur],nC);var rhe={radiusAxis:{},angleAxis:{}},PL=qi({name:"polarAxis",initialState:rhe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Ame,removeRadiusAxis:Sme,addAngleAxis:Cme,removeAngleAxis:Tme}=PL.actions,nhe=PL.reducer;function A5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function S5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(r),!0).forEach(function(n){ihe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ihe(t,e,r){return(e=ahe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ahe(t){var e=ohe(t,"string");return typeof e=="symbol"?e:e+""}function ohe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var she=(t,e)=>e,bC=ne([OL,she],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),lhe=[],_C=(t,e,r)=>r?.length===0?lhe:r,DL=ne([NS,bC,_C],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var i;if(e?.data!=null&&e.data.length>0?i=e.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(a=>S5(S5({},e.presentationProps),a.props))),i!=null)return i}}),che=ne([DL,bC,_C],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,i)=>{var a,o=Yt(n,e.nameKey,e.name),s;return r!=null&&(a=r[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?s=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?s=n.fill:s=e.fill,{value:od(o,e.dataKey),color:s,payload:n,type:e.legendType}})}),uhe=ne([DL,bC,_C,nn],(t,e,r,n)=>{if(!(e==null||t==null))return spe({offset:n,pieSettings:e,displayedData:t,cells:r})}),x_={},C5;function fhe(){return C5||(C5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(x_)),x_}var b_,T5;function dhe(){return T5||(T5=1,b_=fhe().isPlainObject),b_}var hhe=dhe();const phe=Io(hhe);function I5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function O5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(r),!0).forEach(function(n){ghe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ghe(t,e,r){return(e=vhe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vhe(t){var e=mhe(t,"string");return typeof e=="symbol"?e:e+""}function mhe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uv(){return Uv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uv.apply(null,arguments)}var R5=(t,e,r,n,i)=>{var a=r-n,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+r,",").concat(e),o+="L ".concat(t+r-a/2,",").concat(e+i),o+="L ".concat(t+r-a/2-n,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},yhe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xhe=t=>{var e=kn(t,yhe),{x:r,y:n,upperWidth:i,lowerWidth:a,height:o,className:s}=e,{animationEasing:c,animationDuration:f,animationBegin:d,isUpdateAnimationActive:p}=e,g=C.useRef(),[y,b]=C.useState(-1),w=C.useRef(i),E=C.useRef(a),S=C.useRef(o),I=C.useRef(r),O=C.useRef(n),D=Yp(t,"trapezoid-");if(C.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var he=g.current.getTotalLength();he&&b(he)}catch{}},[]),r!==+r||n!==+n||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var k=bt("recharts-trapezoid",s);if(!p)return C.createElement("g",null,C.createElement("path",Uv({},dr(e,!0),{className:k,d:R5(r,n,i,a,o)})));var B=w.current,R=E.current,N=S.current,L=I.current,U=O.current,j="0px ".concat(y===-1?1:y,"px"),V="".concat(y,"px 0px"),F=r7(["strokeDasharray"],f,c);return C.createElement(Xp,{animationId:D,key:D,canBegin:y>0,duration:f,easing:c,isActive:p,begin:d},he=>{var we=vr(B,i,he),Y=vr(R,a,he),ie=vr(N,o,he),K=vr(L,r,he),ge=vr(U,n,he);g.current&&(w.current=we,E.current=Y,S.current=ie,I.current=K,O.current=ge);var Ie=he>0?{transition:F,strokeDasharray:V}:{strokeDasharray:j};return C.createElement("path",Uv({},dr(e,!0),{className:k,d:R5(K,ge,we,Y,ie),ref:g,style:O5(O5({},Ie),e.style)}))})},bhe=["option","shapeType","propTransformer","activeClassName","isActive"];function _he(t,e){if(t==null)return{};var r,n,i=whe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function whe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function P5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(r),!0).forEach(function(n){Ehe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ehe(t,e,r){return(e=Ahe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ahe(t){var e=She(t,"string");return typeof e=="symbol"?e:e+""}function She(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Che(t,e){return zv(zv({},e),t)}function The(t,e){return t==="symbols"}function D5(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return C.createElement(o7,r);case"trapezoid":return C.createElement(xhe,r);case"sector":return C.createElement(c7,r);case"symbols":if(The(e))return C.createElement(WA,r);break;default:return null}}function Ihe(t){return C.isValidElement(t)?t.props:t}function NL(t){var{option:e,shapeType:r,propTransformer:n=Che,activeClassName:i="recharts-active-shape",isActive:a}=t,o=_he(t,bhe),s;if(C.isValidElement(e))s=C.cloneElement(e,zv(zv({},o),Ihe(e)));else if(typeof e=="function")s=e(o);else if(phe(e)&&typeof e!="boolean"){var c=n(e,o);s=C.createElement(D5,{shapeType:r,elementProps:c})}else{var f=o;s=C.createElement(D5,{shapeType:r,elementProps:f})}return a?C.createElement(Mn,{className:i},s):s}var wC=(t,e)=>{var r=hr();return(n,i)=>a=>{t?.(n,i,a),r(Kj({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}},EC=t=>{var e=hr();return(r,n)=>i=>{t?.(r,n,i),e(uue())}},AC=(t,e)=>{var r=hr();return(n,i)=>a=>{t?.(n,i,a),r(fue({activeIndex:String(i),activeDataKey:e,activeCoordinate:n.tooltipPosition}))}};function SC(t){var{fn:e,args:r}=t,n=hr(),i=bi();return C.useEffect(()=>{if(!i){var a=e(r);return n(sue(a)),()=>{n(lue(a))}}},[e,r,n,i]),null}var ML=()=>{};function kL(t){var{legendPayload:e}=t,r=hr(),n=bi();return C.useEffect(()=>n?ML:(r(J9(e)),()=>{r(e7(e))}),[r,n,e]),null}function Ohe(t){var{legendPayload:e}=t,r=hr(),n=Re(pt);return C.useEffect(()=>n!=="centric"&&n!=="radial"?ML:(r(J9(e)),()=>{r(e7(e))}),[r,n,e]),null}var __,Rhe=()=>{var[t]=C.useState(()=>pp("uid-"));return t},Phe=(__=nz.useId)!==null&&__!==void 0?__:Rhe;function Dhe(t,e){var r=Phe();return e||(t?"".concat(t,"-").concat(r):r)}var Nhe=C.createContext(void 0),CC=t=>{var{id:e,type:r,children:n}=t,i=Dhe("recharts-".concat(r),e);return C.createElement(Nhe.Provider,{value:i},n(i))},Mhe={cartesianItems:[],polarItems:[]},jL=qi({name:"graphicalItems",initialState:Mhe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:r,next:n}=e.payload,i=cs(t).cartesianItems.indexOf(r);i>-1&&(t.cartesianItems[i]=n)},removeCartesianGraphicalItem(t,e){var r=cs(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var r=cs(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:khe,replaceCartesianGraphicalItem:jhe,removeCartesianGraphicalItem:Lhe,addPolarGraphicalItem:Bhe,removePolarGraphicalItem:Uhe}=jL.actions,zhe=jL.reducer;function LL(t){var e=hr(),r=C.useRef(null);return C.useEffect(()=>{r.current===null?e(khe(t)):r.current!==t&&e(jhe({prev:r.current,next:t})),r.current=t},[e,t]),C.useEffect(()=>()=>{r.current&&(e(Lhe(r.current)),r.current=null)},[e]),null}function Fhe(t){var e=hr();return C.useEffect(()=>(e(Bhe(t)),()=>{e(Uhe(t))}),[e,t]),null}var Vhe=["onMouseEnter","onClick","onMouseLeave"],Hhe=["id"],$he=["id"];function TC(t,e){if(t==null)return{};var r,n,i=qhe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function qhe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function N5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(r),!0).forEach(function(n){Ghe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ghe(t,e,r){return(e=Whe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Whe(t){var e=Khe(t,"string");return typeof e=="symbol"?e:e+""}function Khe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ql.apply(null,arguments)}function Xhe(t){var e=C.useMemo(()=>VA(t.children,vd),[t.children]),r=Re(n=>che(n,t.id,e));return r==null?null:C.createElement(Ohe,{legendPayload:r})}function Yhe(t){var{dataKey:e,nameKey:r,sectors:n,stroke:i,strokeWidth:a,fill:o,name:s,hide:c,tooltipType:f}=t;return{dataDefinedOnItem:n.map(d=>d.tooltipPayload),positions:n.map(d=>d.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:o,dataKey:e,nameKey:r,name:od(s,e),hide:c,type:f,color:o,unit:""}}}var Qhe=(t,e)=>t>e?"start":t<e?"end":"middle",Zhe=(t,e,r)=>qn(typeof e=="function"?e(t):e,r,r*.8),Jhe=(t,e,r)=>{var{top:n,left:i,width:a,height:o}=e,s=$9(a,o),c=i+qn(t.cx,a,a/2),f=n+qn(t.cy,o,o/2),d=qn(t.innerRadius,s,0),p=Zhe(r,t.outerRadius,s),g=t.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:c,cy:f,innerRadius:d,outerRadius:p,maxRadius:g}},epe=(t,e)=>{var r=vn(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function tpe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var rpe=(t,e)=>{if(C.isValidElement(t))return C.cloneElement(t,e);if(typeof t=="function")return t(e);var r=bt("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return C.createElement(cS,ql({},e,{type:"linear",className:r}))},npe=(t,e,r)=>{if(C.isValidElement(t))return C.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),C.isValidElement(n)))return n;var i=bt("recharts-pie-label-text",tpe(t));return C.createElement(gy,ql({},e,{alignmentBaseline:"middle",className:i}),n)};function ipe(t){var{sectors:e,props:r,showLabels:n}=t,{label:i,labelLine:a,dataKey:o}=r;if(!n||!i||!e)return null;var s=Mo(r),c=dr(i,!1),f=dr(a,!1),d=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,p=e.map((g,y)=>{var b=(g.startAngle+g.endAngle)/2,w=Hr(g.cx,g.cy,g.outerRadius+d,b),E=or(or(or(or({},s),g),{},{stroke:"none"},c),{},{index:y,textAnchor:Qhe(w.x,g.cx)},w),S=or(or(or(or({},s),g),{},{fill:"none",stroke:g.fill},f),{},{index:y,points:[Hr(g.cx,g.cy,g.outerRadius,b),w],key:"line"});return C.createElement(Mn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},a&&rpe(a,S),npe(i,E,Yt(g,o)))});return C.createElement(Mn,{className:"recharts-pie-labels"},p)}function ape(t){var{sectors:e,props:r,showLabels:n}=t,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?C.createElement(mC,{label:i}):C.createElement(ipe,{sectors:e,props:r,showLabels:n})}function ope(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:i}=t,a=Re($l),{onMouseEnter:o,onClick:s,onMouseLeave:c}=i,f=TC(i,Vhe),d=wC(o,i.dataKey),p=EC(c),g=AC(s,i.dataKey);return e==null||e.length===0?null:C.createElement(C.Fragment,null,e.map((y,b)=>{if(y?.startAngle===0&&y?.endAngle===0&&e.length!==1)return null;var w=r&&String(b)===a,E=a?n:null,S=w?r:E,I=or(or({},y),{},{stroke:y.stroke,tabIndex:-1,[X9]:b,[Y9]:i.dataKey});return C.createElement(Mn,ql({tabIndex:-1,className:"recharts-pie-sector"},qp(f,y,b),{onMouseEnter:d(y,b),onMouseLeave:p(y,b),onClick:g(y,b),key:"sector-".concat(y?.startAngle,"-").concat(y?.endAngle,"-").concat(y.midAngle,"-").concat(b)}),C.createElement(NL,ql({option:S,isActive:w,shapeType:"sector"},I)))}))}function spe(t){var e,{pieSettings:r,displayedData:n,cells:i,offset:a}=t,{cornerRadius:o,startAngle:s,endAngle:c,dataKey:f,nameKey:d,tooltipType:p}=r,g=Math.abs(r.minAngle),y=epe(s,c),b=Math.abs(y),w=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,E=n.filter(B=>Yt(B,f,0)!==0).length,S=(b>=360?E:E-1)*w,I=b-E*g-S,O=n.reduce((B,R)=>{var N=Yt(R,f,0);return B+(Ne(N)?N:0)},0),D;if(O>0){var k;D=n.map((B,R)=>{var N=Yt(B,f,0),L=Yt(B,d,R),U=Jhe(r,a,B),j=(Ne(N)?N:0)/O,V,F=or(or({},B),i&&i[R]&&i[R].props);R?V=k.endAngle+vn(y)*w*(N!==0?1:0):V=s;var he=V+vn(y)*((N!==0?g:0)+j*I),we=(V+he)/2,Y=(U.innerRadius+U.outerRadius)/2,ie=[{name:L,value:N,payload:F,dataKey:f,type:p}],K=Hr(U.cx,U.cy,Y,we);return k=or(or(or(or({},r.presentationProps),{},{percent:j,cornerRadius:o,name:L,tooltipPayload:ie,midAngle:we,middleRadius:Y,tooltipPosition:K},F),U),{},{value:N,startAngle:V,endAngle:he,payload:F,paddingAngle:vn(y)*w}),k})}return D}function lpe(t){var{showLabels:e,sectors:r,children:n}=t,i=C.useMemo(()=>!e||!r?[]:r.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[r,e]);return C.createElement(Wde,{value:e?i:void 0},n)}function cpe(t){var{props:e,previousSectorsRef:r}=t,{sectors:n,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:s,activeShape:c,inactiveShape:f,onAnimationStart:d,onAnimationEnd:p}=e,g=Yp(e,"recharts-pie-"),y=r.current,[b,w]=C.useState(!1),E=C.useCallback(()=>{typeof p=="function"&&p(),w(!1)},[p]),S=C.useCallback(()=>{typeof d=="function"&&d(),w(!0)},[d]);return C.createElement(lpe,{showLabels:!b,sectors:n},C.createElement(Xp,{animationId:g,begin:a,duration:o,isActive:i,easing:s,onAnimationStart:S,onAnimationEnd:E,key:g},I=>{var O=[],D=n&&n[0],k=D?.startAngle;return n?.forEach((B,R)=>{var N=y&&y[R],L=R>0?lu(B,"paddingAngle",0):0;if(N){var U=vr(N.endAngle-N.startAngle,B.endAngle-B.startAngle,I),j=or(or({},B),{},{startAngle:k+L,endAngle:k+U+L});O.push(j),k=j.endAngle}else{var{endAngle:V,startAngle:F}=B,he=vr(0,V-F,I),we=or(or({},B),{},{startAngle:k+L,endAngle:k+he+L});O.push(we),k=we.endAngle}}),r.current=O,C.createElement(Mn,null,C.createElement(ope,{sectors:O,activeShape:c,inactiveShape:f,allOtherPieProps:e}))}),C.createElement(ape,{showLabels:!b,sectors:n,props:e}),e.children)}var upe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Jl.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function fpe(t){var{id:e}=t,r=TC(t,Hhe),{hide:n,className:i,rootTabIndex:a}=t,o=C.useMemo(()=>VA(t.children,vd),[t.children]),s=Re(d=>uhe(d,e,o)),c=C.useRef(null),f=bt("recharts-pie",i);return n||s==null?(c.current=null,C.createElement(Mn,{tabIndex:a,className:f})):C.createElement(C.Fragment,null,C.createElement(SC,{fn:Yhe,args:or(or({},t),{},{sectors:s})}),C.createElement(Mn,{tabIndex:a,className:f},C.createElement(cpe,{props:or(or({},r),{},{sectors:s}),previousSectorsRef:c})))}function IC(t){var e=kn(t,upe),{id:r}=e,n=TC(e,$he),i=Mo(n);return C.createElement(CC,{id:r,type:"pie"},a=>C.createElement(C.Fragment,null,C.createElement(Fhe,{type:"pie",id:a,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),C.createElement(Xhe,ql({},n,{id:a})),C.createElement(fpe,ql({},n,{id:a}))))}IC.displayName="Pie";function M5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function k5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M5(Object(r),!0).forEach(function(n){dpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dpe(t,e,r){return(e=hpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hpe(t){var e=ppe(t,"string");return typeof e=="symbol"?e:e+""}function ppe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gpe={xAxis:{},yAxis:{},zAxis:{}},BL=qi({name:"cartesianAxis",initialState:gpe,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload;t.yAxis[r]&&(t.yAxis[r]=k5(k5({},t.yAxis[r]),{},{width:n}))}}}),{addXAxis:vpe,removeXAxis:mpe,addYAxis:ype,removeYAxis:xpe,addZAxis:Ime,removeZAxis:Ome,updateYAxisWidth:bpe}=BL.actions,_pe=BL.reducer,wpe=ne([nn],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Epe=ne([wpe,Ss,Cs],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),OC=()=>Re(Epe),Ape=()=>Re(Que);function j5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function L5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(r),!0).forEach(function(n){Spe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Spe(t,e,r){return(e=Cpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cpe(t){var e=Tpe(t,"string");return typeof e=="symbol"?e:e+""}function Tpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ipe=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:i,dataKey:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o=L5(L5({index:r,dataKey:a,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},dr(i,!1)),FA(i)),s;return C.isValidElement(i)?s=C.cloneElement(i,o):typeof i=="function"?s=i(o):s=C.createElement(IL,o),C.createElement(Mn,{className:"recharts-active-dot"},s)};function Ope(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:i}=t,a=Re($l),o=Ape();if(e==null||o==null)return null;var s=e.find(c=>o.includes(c.payload));return cr(s)?null:Ipe({point:s,childIndex:Number(a),mainColor:r,dataKey:i,activeDot:n})}var Rpe="Invariant failed";function Ppe(t,e){throw new Error(Rpe)}var Dpe=["x","y"];function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jw.apply(null,arguments)}function B5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(r),!0).forEach(function(n){Npe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Npe(t,e,r){return(e=Mpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mpe(t){var e=kpe(t,"string");return typeof e=="symbol"?e:e+""}function kpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jpe(t,e){if(t==null)return{};var r,n,i=Lpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Lpe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Bpe(t,e){var{x:r,y:n}=t,i=jpe(t,Dpe),a="".concat(r),o=parseInt(a,10),s="".concat(n),c=parseInt(s,10),f="".concat(e.height||i.height),d=parseInt(f,10),p="".concat(e.width||i.width),g=parseInt(p,10);return Nh(Nh(Nh(Nh(Nh({},e),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:g,name:e.name,radius:e.radius})}function RC(t){return C.createElement(NL,Jw({shapeType:"rectangle",propTransformer:Bpe,activeClassName:"recharts-active-bar"},t))}var Upe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(Ne(e))return e;var a=Ne(n)||cr(n);return a?e(n,i):(a||Ppe(),r)}},zpe={},UL=qi({name:"errorBars",initialState:zpe,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:i}=e.payload;t[r]&&(t[r]=t[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:Rme,replaceErrorBar:Pme,removeErrorBar:Dme}=UL.actions,Fpe=UL.reducer,Vpe=["children"];function Hpe(t,e){if(t==null)return{};var r,n,i=$pe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function $pe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var qpe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Gpe=C.createContext(qpe);function zL(t){var{children:e}=t,r=Hpe(t,Vpe);return C.createElement(Gpe.Provider,{value:r},e)}function PC(t,e){var r,n,i=Re(f=>Is(f,t)),a=Re(f=>Os(f,e)),o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:Pi.allowDataOverflow,s=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Di.allowDataOverflow,c=o||s;return{needClip:c,needClipX:o,needClipY:s}}function FL(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,i=OC(),{needClipX:a,needClipY:o,needClip:s}=PC(e,r);if(!s)return null;var{x:c,y:f,width:d,height:p}=i;return C.createElement("clipPath",{id:"clipPath-".concat(n)},C.createElement("rect",{x:a?c:c-d/2,y:o?f:f-p/2,width:a?d:d*2,height:o?p:p*2}))}var Wpe=["onMouseEnter","onMouseLeave","onClick"],Kpe=["value","background","tooltipPosition"],Xpe=["id"],Ype=["onMouseEnter","onClick","onMouseLeave"];function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gl.apply(null,arguments)}function U5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(r),!0).forEach(function(n){Qpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qpe(t,e,r){return(e=Zpe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zpe(t){var e=Jpe(t,"string");return typeof e=="symbol"?e:e+""}function Jpe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fv(t,e){if(t==null)return{};var r,n,i=e0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function e0e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var t0e=t=>{var{dataKey:e,name:r,fill:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:od(r,e),payload:t}]};function r0e(t){var{dataKey:e,stroke:r,strokeWidth:n,fill:i,name:a,hide:o,unit:s}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:e,nameKey:void 0,name:od(a,e),hide:o,type:t.tooltipType,color:t.fill,unit:s}}}function n0e(t){var e=Re($l),{data:r,dataKey:n,background:i,allOtherBarProps:a}=t,{onMouseEnter:o,onMouseLeave:s,onClick:c}=a,f=Fv(a,Wpe),d=wC(o,n),p=EC(s),g=AC(c,n);if(!i||r==null)return null;var y=dr(i,!1);return C.createElement(C.Fragment,null,r.map((b,w)=>{var{value:E,background:S,tooltipPosition:I}=b,O=Fv(b,Kpe);if(!S)return null;var D=d(b,w),k=p(b,w),B=g(b,w),R=ti(ti(ti(ti(ti({option:i,isActive:String(w)===e},O),{},{fill:"#eee"},S),y),qp(f,b,w)),{},{onMouseEnter:D,onMouseLeave:k,onClick:B,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return C.createElement(RC,Gl({key:"background-bar-".concat(R.index)},R))}))}function i0e(t){var{showLabels:e,children:r,rects:n}=t,i=n?.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return ti(ti({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return C.createElement(CL,{value:e?i:void 0},r)}function a0e(t){var{shape:e,activeBar:r,baseProps:n,entry:i,index:a,dataKey:o}=t,s=Re($l),c=Re(sL),f=r&&String(a)===s&&(c==null||o===c),d=f?r:e;return C.createElement(RC,Gl({},n,i,{isActive:f,option:d,index:a,dataKey:o}))}function o0e(t){var{shape:e,baseProps:r,entry:n,index:i,dataKey:a}=t;return C.createElement(RC,Gl({},r,n,{isActive:!1,option:e,index:i,dataKey:a}))}function s0e(t){var{data:e,props:r}=t,n=Mo(r),{id:i}=n,a=Fv(n,Xpe),{shape:o,dataKey:s,activeBar:c}=r,{onMouseEnter:f,onClick:d,onMouseLeave:p}=r,g=Fv(r,Ype),y=wC(f,s),b=EC(p),w=AC(d,s);return e?C.createElement(C.Fragment,null,e.map((E,S)=>C.createElement(Mn,Gl({className:"recharts-bar-rectangle"},qp(g,E,S),{onMouseEnter:y(E,S),onMouseLeave:b(E,S),onClick:w(E,S),key:"rectangle-".concat(E?.x,"-").concat(E?.y,"-").concat(E?.value,"-").concat(S)}),c?C.createElement(a0e,{shape:o,activeBar:c,baseProps:a,entry:E,index:S,dataKey:s}):C.createElement(o0e,{shape:o,baseProps:a,entry:E,index:S,dataKey:s})))):null}function l0e(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:s,animationEasing:c,onAnimationEnd:f,onAnimationStart:d}=e,p=r.current,g=Yp(e,"recharts-bar-"),[y,b]=C.useState(!1),w=!y,E=C.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),S=C.useCallback(()=>{typeof d=="function"&&d(),b(!0)},[d]);return C.createElement(i0e,{showLabels:w,rects:n},C.createElement(Xp,{animationId:g,begin:o,duration:s,isActive:a,easing:c,onAnimationEnd:E,onAnimationStart:S,key:g},I=>{var O=I===1?n:n?.map((D,k)=>{var B=p&&p[k];if(B)return ti(ti({},D),{},{x:vr(B.x,D.x,I),y:vr(B.y,D.y,I),width:vr(B.width,D.width,I),height:vr(B.height,D.height,I)});if(i==="horizontal"){var R=vr(0,D.height,I);return ti(ti({},D),{},{y:D.y+D.height-R,height:R})}var N=vr(0,D.width,I);return ti(ti({},D),{},{width:N})});return I>0&&(r.current=O??null),O==null?null:C.createElement(Mn,null,C.createElement(s0e,{props:e,data:O}))}),C.createElement(mC,{label:e.label}),e.children)}function c0e(t){var e=C.useRef(null);return C.createElement(l0e,{previousRectanglesRef:e,props:t})}var VL=0,u0e=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Yt(t,e)}};class f0e extends C.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:o,needClip:s,background:c,id:f}=this.props;if(e||r==null)return null;var d=bt("recharts-bar",i),p=f;return C.createElement(Mn,{className:d,id:f},s&&C.createElement("defs",null,C.createElement(FL,{clipPathId:p,xAxisId:a,yAxisId:o})),C.createElement(Mn,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(p,")"):void 0},C.createElement(n0e,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),C.createElement(c0e,this.props)))}}var d0e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Jl.isSsr,legendType:"rect",minPointSize:VL,xAxisId:0,yAxisId:0};function h0e(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:s,animationDuration:c,animationEasing:f,isAnimationActive:d}=t,{needClip:p}=PC(e,r),g=Km(),y=bi(),b=VA(t.children,vd),w=Re(I=>F0e(I,e,r,y,t.id,b));if(g!=="vertical"&&g!=="horizontal")return null;var E,S=w?.[0];return S==null||S.height==null||S.width==null?E=0:E=g==="vertical"?S.height/2:S.width/2,C.createElement(zL,{xAxisId:e,yAxisId:r,data:w,dataPointFormatter:u0e,errorBarOffset:E},C.createElement(f0e,Gl({},t,{layout:g,needClip:p,data:w,xAxisId:e,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:o,animationBegin:s,animationDuration:c,animationEasing:f,isAnimationActive:d})))}function p0e(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:o,yAxis:s,xAxisTicks:c,yAxisTicks:f,stackedData:d,displayedData:p,offset:g,cells:y,parentViewBox:b}=t,w=e==="horizontal"?s:o,E=d?w.scale.domain():null,S=Cie({numericAxis:w});return p.map((I,O)=>{var D,k,B,R,N,L;d?D=bie(d[O],E):(D=Yt(I,r),Array.isArray(D)||(D=[S,D]));var U=Upe(n,VL)(D[1],O);if(e==="horizontal"){var j,[V,F]=[s.scale(D[0]),s.scale(D[1])];k=AR({axis:o,ticks:c,bandSize:a,offset:i.offset,entry:I,index:O}),B=(j=F??V)!==null&&j!==void 0?j:void 0,R=i.size;var he=V-F;if(N=Vi(he)?0:he,L={x:k,y:g.top,width:R,height:g.height},Math.abs(U)>0&&Math.abs(N)<Math.abs(U)){var we=vn(N||U)*(Math.abs(U)-Math.abs(N));B-=we,N+=we}}else{var[Y,ie]=[o.scale(D[0]),o.scale(D[1])];if(k=Y,B=AR({axis:s,ticks:f,bandSize:a,offset:i.offset,entry:I,index:O}),R=ie-Y,N=i.size,L={x:g.left,y:B,width:g.width,height:N},Math.abs(U)>0&&Math.abs(R)<Math.abs(U)){var K=vn(R||U)*(Math.abs(U)-Math.abs(R));R+=K}}if(k==null||B==null||R==null||N==null)return null;var ge=ti(ti({},I),{},{x:k,y:B,width:R,height:N,value:d?D:D[1],payload:I,background:L,tooltipPosition:{x:k+R/2,y:B+N/2},parentViewBox:b},y&&y[O]&&y[O].props);return ge}).filter(Boolean)}function g0e(t){var e=kn(t,d0e),r=bi();return C.createElement(CC,{id:e.id,type:"bar"},n=>C.createElement(C.Fragment,null,C.createElement(kL,{legendPayload:t0e(e)}),C.createElement(SC,{fn:r0e,args:e}),C.createElement(LL,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Sie(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),C.createElement(h0e,Gl({},e,{id:n}))))}var HL=C.memo(g0e);HL.displayName="Bar";function z5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function v1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(r),!0).forEach(function(n){v0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function v0e(t,e,r){return(e=m0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m0e(t){var e=y0e(t,"string");return typeof e=="symbol"?e:e+""}function y0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x0e=(t,e)=>e,b0e=(t,e,r)=>r,_0e=(t,e,r,n)=>n,w0e=(t,e,r,n,i)=>i,l0=ne([sy,w0e],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),E0e=ne([l0],t=>t?.maxBarSize),A0e=(t,e,r,n,i,a)=>a,F5=(t,e,r)=>{var n=r??t;if(!cr(n))return qn(n,e,0)},S0e=ne([pt,sy,x0e,b0e,_0e],(t,e,r,n,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),C0e=(t,e,r,n)=>{var i=pt(t);return i==="horizontal"?Gw(t,"yAxis",r,n):Gw(t,"xAxis",e,n)},T0e=(t,e,r)=>{var n=pt(t);return n==="horizontal"?FP(t,"xAxis",e):FP(t,"yAxis",r)},I0e=(t,e,r)=>{var n={},i=t.filter(oy),a=t.filter(f=>f.stackId==null),o=i.reduce((f,d)=>(f[d.stackId]||(f[d.stackId]=[]),f[d.stackId].push(d),f),n),s=Object.entries(o).map(f=>{var[d,p]=f,g=p.map(b=>b.dataKey),y=F5(e,r,p[0].barSize);return{stackId:d,dataKeys:g,barSize:y}}),c=a.map(f=>{var d=[f.dataKey].filter(g=>g!=null),p=F5(e,r,f.barSize);return{stackId:void 0,dataKeys:d,barSize:p}});return[...s,...c]},O0e=ne([S0e,oce,T0e],I0e),R0e=(t,e,r,n,i)=>{var a,o,s=l0(t,e,r,n,i);if(s!=null){var c=pt(t),f=aj(t),{maxBarSize:d}=s,p=cr(d)?f:d,g,y;return c==="horizontal"?(g=Hl(t,"xAxis",e,n),y=Vl(t,"xAxis",e,n)):(g=Hl(t,"yAxis",r,n),y=Vl(t,"yAxis",r,n)),(a=(o=mp(g,y,!0))!==null&&o!==void 0?o:p)!==null&&a!==void 0?a:0}},$L=(t,e,r,n)=>{var i=pt(t),a,o;return i==="horizontal"?(a=Hl(t,"xAxis",e,n),o=Vl(t,"xAxis",e,n)):(a=Hl(t,"yAxis",r,n),o=Vl(t,"yAxis",r,n)),mp(a,o)};function P0e(t,e,r,n,i){var a=n.length;if(!(a<1)){var o=qn(t,r,0,!0),s,c=[];if($i(n[0].barSize)){var f=!1,d=r/a,p=n.reduce((S,I)=>S+(I.barSize||0),0);p+=(a-1)*o,p>=r&&(p-=(a-1)*o,o=0),p>=r&&d>0&&(f=!0,d*=.9,p=a*d);var g=(r-p)/2>>0,y={offset:g-o,size:0};s=n.reduce((S,I)=>{var O,D={stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:y.offset+y.size+o,size:f?d:(O=I.barSize)!==null&&O!==void 0?O:0}},k=[...S,D];return y=k[k.length-1].position,k},c)}else{var b=qn(e,r,0,!0);r-2*b-(a-1)*o<=0&&(o=0);var w=(r-2*b-(a-1)*o)/a;w>1&&(w>>=0);var E=$i(i)?Math.min(w,i):w;s=n.reduce((S,I,O)=>[...S,{stackId:I.stackId,dataKeys:I.dataKeys,position:{offset:b+(w+o)*O+(w-E)/2,size:E}}],c)}return s}}var D0e=(t,e,r,n,i,a,o)=>{var s=cr(o)?e:o,c=P0e(r,n,i!==a?i:a,t,s);return i!==a&&c!=null&&(c=c.map(f=>v1(v1({},f),{},{position:v1(v1({},f.position),{},{offset:f.position.offset-i/2})}))),c},N0e=ne([O0e,aj,ace,oj,R0e,$L,E0e],D0e),M0e=(t,e,r,n)=>Hl(t,"xAxis",e,n),k0e=(t,e,r,n)=>Hl(t,"yAxis",r,n),j0e=(t,e,r,n)=>Vl(t,"xAxis",e,n),L0e=(t,e,r,n)=>Vl(t,"yAxis",r,n),B0e=ne([N0e,l0],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),U0e=(t,e)=>{var r=VS(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var i=t[n];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===r)}}}},z0e=ne([C0e,l0],U0e),F0e=ne([nn,iS,M0e,k0e,j0e,L0e,B0e,pt,ry,$L,z0e,l0,A0e],(t,e,r,n,i,a,o,s,c,f,d,p,g)=>{var{chartData:y,dataStartIndex:b,dataEndIndex:w}=c;if(!(p==null||o==null||e==null||s!=="horizontal"&&s!=="vertical"||r==null||n==null||i==null||a==null||f==null)){var{data:E}=p,S;if(E!=null&&E.length>0?S=E:S=y?.slice(b,w+1),S!=null)return p0e({layout:s,barSettings:p,pos:o,parentViewBox:e,bandSize:f,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:d,displayedData:S,offset:t,cells:g})}}),qL=t=>{var{chartData:e}=t,r=hr(),n=bi();return C.useEffect(()=>n?()=>{}:(r(QP(e)),()=>{r(QP(void 0))}),[e,r,n]),null},V5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},GL=qi({name:"brush",initialState:V5,reducers:{setBrushSettings(t,e){return e.payload==null?V5:e.payload}}}),{setBrushSettings:Nme}=GL.actions,V0e=GL.reducer;function H0e(t,e,r){return(e=$0e(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $0e(t){var e=q0e(t,"string");return typeof e=="symbol"?e:e+""}function q0e(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class DC{static create(e){return new DC(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}H0e(DC,"EPS",1e-4);function G0e(t){return(t%180+180)%180}var W0e=function(e){var{width:r,height:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=G0e(i),o=a*Math.PI/180,s=Math.atan(n/r),c=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},K0e={dots:[],areas:[],lines:[]},WL=qi({name:"referenceElements",initialState:K0e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=cs(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=cs(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=cs(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Mme,removeDot:kme,addArea:jme,removeArea:Lme,addLine:Bme,removeLine:Ume}=WL.actions,X0e=WL.reducer,Y0e=C.createContext(void 0),Q0e=t=>{var{children:e}=t,[r]=C.useState("".concat(pp("recharts"),"-clip")),n=OC();if(n==null)return null;var{x:i,y:a,width:o,height:s}=n;return C.createElement(Y0e.Provider,{value:r},C.createElement("defs",null,C.createElement("clipPath",{id:r},C.createElement("rect",{x:i,y:a,height:s,width:o}))),e)};function Wf(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function KL(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function Z0e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return W0e(n,r)}function J0e(t,e,r){var n=r==="width",{x:i,y:a,width:o,height:s}=t;return e===1?{start:n?i:a,end:n?i+o:a+s}:{start:n?i+o:a+s,end:n?i:a}}function Vv(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function ege(t,e){return KL(t,e+1)}function tge(t,e,r,n,i){for(var a=(n||[]).slice(),{start:o,end:s}=e,c=0,f=1,d=o,p=function(){var b=n?.[c];if(b===void 0)return{v:KL(n,f)};var w=c,E,S=()=>(E===void 0&&(E=r(b,w)),E),I=b.coordinate,O=c===0||Vv(t,I,S,d,s);O||(c=0,d=o,f+=1),O&&(d=I+t*(S()/2+i),c+=f)},g;f<=a.length;)if(g=p(),g)return g.v;return[]}function H5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H5(Object(r),!0).forEach(function(n){rge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rge(t,e,r){return(e=nge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nge(t){var e=ige(t,"string");return typeof e=="symbol"?e:e+""}function ige(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function age(t,e,r,n,i){for(var a=(n||[]).slice(),o=a.length,{start:s}=e,{end:c}=e,f=function(g){var y=a[g],b,w=()=>(b===void 0&&(b=r(y,g)),b);if(g===o-1){var E=t*(y.coordinate+t*w()/2-c);a[g]=y=Un(Un({},y),{},{tickCoord:E>0?y.coordinate-E*t:y.coordinate})}else a[g]=y=Un(Un({},y),{},{tickCoord:y.coordinate});var S=Vv(t,y.tickCoord,w,s,c);S&&(c=y.tickCoord-t*(w()/2+i),a[g]=Un(Un({},y),{},{isShow:!0}))},d=o-1;d>=0;d--)f(d);return a}function oge(t,e,r,n,i,a){var o=(n||[]).slice(),s=o.length,{start:c,end:f}=e;if(a){var d=n[s-1],p=r(d,s-1),g=t*(d.coordinate+t*p/2-f);o[s-1]=d=Un(Un({},d),{},{tickCoord:g>0?d.coordinate-g*t:d.coordinate});var y=Vv(t,d.tickCoord,()=>p,c,f);y&&(f=d.tickCoord-t*(p/2+i),o[s-1]=Un(Un({},d),{},{isShow:!0}))}for(var b=a?s-1:s,w=function(I){var O=o[I],D,k=()=>(D===void 0&&(D=r(O,I)),D);if(I===0){var B=t*(O.coordinate-t*k()/2-c);o[I]=O=Un(Un({},O),{},{tickCoord:B<0?O.coordinate-B*t:O.coordinate})}else o[I]=O=Un(Un({},O),{},{tickCoord:O.coordinate});var R=Vv(t,O.tickCoord,k,c,f);R&&(c=O.tickCoord+t*(k()/2+i),o[I]=Un(Un({},O),{},{isShow:!0}))},E=0;E<b;E++)w(E);return o}function NC(t,e,r){var{tick:n,ticks:i,viewBox:a,minTickGap:o,orientation:s,interval:c,tickFormatter:f,unit:d,angle:p}=t;if(!i||!i.length||!n)return[];if(Ne(c)||Jl.isSsr){var g;return(g=ege(i,Ne(c)?c:0))!==null&&g!==void 0?g:[]}var y=[],b=s==="top"||s==="bottom"?"width":"height",w=d&&b==="width"?tp(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},E=(O,D)=>{var k=typeof f=="function"?f(O.value,D):O.value;return b==="width"?Z0e(tp(k,{fontSize:e,letterSpacing:r}),w,p):tp(k,{fontSize:e,letterSpacing:r})[b]},S=i.length>=2?vn(i[1].coordinate-i[0].coordinate):1,I=J0e(a,S,b);return c==="equidistantPreserveStart"?tge(S,I,E,i,o):(c==="preserveStart"||c==="preserveStartEnd"?y=oge(S,I,E,i,o,c==="preserveStartEnd"):y=age(S,I,E,i,o),y.filter(O=>O.isShow))}var sge=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=t,o=0;if(e){e.forEach(d=>{if(d){var p=d.getBoundingClientRect();p.width>o&&(o=p.width)}});var s=r?r.getBoundingClientRect().width:0,c=i+a,f=o+c+s+(r?n:0);return Math.round(f)}return 0},lge=["axisLine","width","height","className","hide","ticks"],cge=["viewBox"],uge=["viewBox"];function eE(t,e){if(t==null)return{};var r,n,i=fge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function fge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},du.apply(null,arguments)}function $5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$5(Object(r),!0).forEach(function(n){dge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dge(t,e,r){return(e=hge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hge(t){var e=pge(t,"string");return typeof e=="symbol"?e:e+""}function pge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MC={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function gge(t){var{x:e,y:r,width:n,height:i,orientation:a,mirror:o,axisLine:s,otherSvgProps:c}=t;if(!s)return null;var f=Zr(Zr(Zr({},c),dr(s,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!o||a==="bottom"&&o);f=Zr(Zr({},f),{},{x1:e,y1:r+d*i,x2:e+n,y2:r+d*i})}else{var p=+(a==="left"&&!o||a==="right"&&o);f=Zr(Zr({},f),{},{x1:e+p*n,y1:r,x2:e+p*n,y2:r+i})}return C.createElement("line",du({},f,{className:bt("recharts-cartesian-axis-line",lu(s,"className"))}))}function vge(t,e,r,n,i,a,o,s,c){var f,d,p,g,y,b,w=s?-1:1,E=t.tickSize||o,S=Ne(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":f=d=t.coordinate,g=r+ +!s*i,p=g-w*E,b=p-w*c,y=S;break;case"left":p=g=t.coordinate,d=e+ +!s*n,f=d-w*E,y=f-w*c,b=S;break;case"right":p=g=t.coordinate,d=e+ +s*n,f=d+w*E,y=f+w*c,b=S;break;default:f=d=t.coordinate,g=r+ +s*i,p=g+w*E,b=p+w*c,y=S;break}return{line:{x1:f,y1:p,x2:d,y2:g},tick:{x:y,y:b}}}function mge(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function yge(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function xge(t){var{option:e,tickProps:r,value:n}=t,i,a=bt(r.className,"recharts-cartesian-axis-tick-value");if(C.isValidElement(e))i=C.cloneElement(e,Zr(Zr({},r),{},{className:a}));else if(typeof e=="function")i=e(Zr(Zr({},r),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=bt(o,e?.className)),i=C.createElement(gy,du({},r,{className:o}),n)}return i}function bge(t){var{ticks:e=[],tick:r,tickLine:n,stroke:i,tickFormatter:a,unit:o,padding:s,tickTextProps:c,orientation:f,mirror:d,x:p,y:g,width:y,height:b,tickSize:w,tickMargin:E,fontSize:S,letterSpacing:I,getTicksConfig:O,events:D}=t,k=NC(Zr(Zr({},O),{},{ticks:e}),S,I),B=mge(f,d),R=yge(f,d),N=Mo(O),L=dr(r,!1),U=Zr(Zr({},N),{},{fill:"none"},dr(n,!1)),j=k.map((V,F)=>{var{line:he,tick:we}=vge(V,p,g,y,b,f,w,d,E),Y=Zr(Zr(Zr(Zr({textAnchor:B,verticalAnchor:R},N),{},{stroke:"none",fill:i},L),we),{},{index:F,payload:V,visibleTicksCount:k.length,tickFormatter:a,padding:s},c);return C.createElement(Mn,du({className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},qp(D,V,F)),n&&C.createElement("line",du({},U,he,{className:bt("recharts-cartesian-axis-tick-line",lu(n,"className"))})),r&&C.createElement(xge,{option:r,tickProps:Y,value:"".concat(typeof a=="function"?a(V.value,F):V.value).concat(o||"")}))});return j.length>0?C.createElement("g",{className:"recharts-cartesian-axis-ticks"},j):null}var _ge=C.forwardRef((t,e)=>{var{axisLine:r,width:n,height:i,className:a,hide:o,ticks:s}=t,c=eE(t,lge),[f,d]=C.useState(""),[p,g]=C.useState(""),y=C.useRef([]);C.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var w;return sge({ticks:y.current,label:(w=t.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var b=C.useCallback(w=>{if(w){var E=w.getElementsByClassName("recharts-cartesian-axis-tick-value");y.current=Array.from(E);var S=E[0];if(S){var I=window.getComputedStyle(S),O=I.fontSize,D=I.letterSpacing;(O!==f||D!==p)&&(d(O),g(D))}}},[f,p]);return o||n!=null&&n<=0||i!=null&&i<=0?null:C.createElement(Mn,{className:bt("recharts-cartesian-axis",a),ref:b},C.createElement(gge,{x:t.x,y:t.y,width:n,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Mo(t)}),C.createElement(bge,{ticks:s,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:f,letterSpacing:p,getTicksConfig:t,events:c}),C.createElement(Cde,{x:t.x,y:t.y,width:t.width,height:t.height},C.createElement(jde,{label:t.label}),t.children))}),wge=C.memo(_ge,(t,e)=>{var{viewBox:r}=t,n=eE(t,cge),{viewBox:i}=e,a=eE(e,uge);return Wf(r,i)&&Wf(n,a)}),kC=C.forwardRef((t,e)=>{var r=kn(t,MC);return C.createElement(wge,du({},r,{ref:e}))});kC.displayName="CartesianAxis";var Ege=["x1","y1","x2","y2","key"],Age=["offset"],Sge=["xAxisId","yAxisId"],Cge=["xAxisId","yAxisId"];function q5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q5(Object(r),!0).forEach(function(n){Tge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tge(t,e,r){return(e=Ige(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ige(t){var e=Oge(t,"string");return typeof e=="symbol"?e:e+""}function Oge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gc.apply(null,arguments)}function Hv(t,e){if(t==null)return{};var r,n,i=Rge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Rge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Pge=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:o,ry:s}=t;return C.createElement("rect",{x:n,y:i,ry:s,width:a,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function XL(t,e){var r;if(C.isValidElement(t))r=C.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var{x1:n,y1:i,x2:a,y2:o,key:s}=e,c=Hv(e,Ege),f=Mo(c),{offset:d}=f,p=Hv(f,Age);r=C.createElement("line",Gc({},p,{x1:n,y1:i,x2:a,y2:o,fill:"none",key:s}))}return r}function Dge(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,s=Hv(t,Sge),c=i.map((f,d)=>{var p=Vn(Vn({},s),{},{x1:e,y1:f,x2:e+r,y2:f,key:"line-".concat(d),index:d});return XL(n,p)});return C.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Nge(t){var{y:e,height:r,vertical:n=!0,verticalPoints:i}=t;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,s=Hv(t,Cge),c=i.map((f,d)=>{var p=Vn(Vn({},s),{},{x1:f,y1:e,x2:f,y2:e+r,key:"line-".concat(d),index:d});return XL(n,p)});return C.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Mge(t){var{horizontalFill:e,fillOpacity:r,x:n,y:i,width:a,height:o,horizontalPoints:s,horizontal:c=!0}=t;if(!c||!e||!e.length)return null;var f=s.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==f[0]&&f.unshift(0);var d=f.map((p,g)=>{var y=!f[g+1],b=y?i+o-p:f[g+1]-p;if(b<=0)return null;var w=g%e.length;return C.createElement("rect",{key:"react-".concat(g),y:p,x:n,height:b,width:a,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function kge(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:o,height:s,verticalPoints:c}=t;if(!e||!r||!r.length)return null;var f=c.map(p=>Math.round(p+i-i)).sort((p,g)=>p-g);i!==f[0]&&f.unshift(0);var d=f.map((p,g)=>{var y=!f[g+1],b=y?i+o-p:f[g+1]-p;if(b<=0)return null;var w=g%r.length;return C.createElement("rect",{key:"react-".concat(g),x:p,y:a,width:b,height:s,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return C.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var jge=(t,e)=>{var{xAxis:r,width:n,height:i,offset:a}=t;return G9(NC(Vn(Vn(Vn({},MC),r),{},{ticks:W9(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,e)},Lge=(t,e)=>{var{yAxis:r,width:n,height:i,offset:a}=t;return G9(NC(Vn(Vn(Vn({},MC),r),{},{ticks:W9(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,e)},Bge={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function jC(t){var e=oS(),r=sS(),n=Q9(),i=Vn(Vn({},kn(t,Bge)),{},{x:Ne(t.x)?t.x:n.left,y:Ne(t.y)?t.y:n.top,width:Ne(t.width)?t.width:n.width,height:Ne(t.height)?t.height:n.height}),{xAxisId:a,yAxisId:o,x:s,y:c,width:f,height:d,syncWithTicks:p,horizontalValues:g,verticalValues:y}=i,b=bi(),w=Re(L=>VP(L,"xAxis",a,b)),E=Re(L=>VP(L,"yAxis",o,b));if(!Ne(f)||f<=0||!Ne(d)||d<=0||!Ne(s)||s!==+s||!Ne(c)||c!==+c)return null;var S=i.verticalCoordinatesGenerator||jge,I=i.horizontalCoordinatesGenerator||Lge,{horizontalPoints:O,verticalPoints:D}=i;if((!O||!O.length)&&typeof I=="function"){var k=g&&g.length,B=I({yAxis:E?Vn(Vn({},E),{},{ticks:k?g:E.ticks}):void 0,width:e,height:r,offset:n},k?!0:p);ep(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(O=B)}if((!D||!D.length)&&typeof S=="function"){var R=y&&y.length,N=S({xAxis:w?Vn(Vn({},w),{},{ticks:R?y:w.ticks}):void 0,width:e,height:r,offset:n},R?!0:p);ep(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(D=N)}return C.createElement("g",{className:"recharts-cartesian-grid"},C.createElement(Pge,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),C.createElement(Mge,Gc({},i,{horizontalPoints:O})),C.createElement(kge,Gc({},i,{verticalPoints:D})),C.createElement(Dge,Gc({},i,{offset:n,horizontalPoints:O,xAxis:w,yAxis:E})),C.createElement(Nge,Gc({},i,{offset:n,verticalPoints:D,xAxis:w,yAxis:E})))}jC.displayName="CartesianGrid";var YL=(t,e,r,n)=>Hl(t,"xAxis",e,n),QL=(t,e,r,n)=>Vl(t,"xAxis",e,n),ZL=(t,e,r,n)=>Hl(t,"yAxis",r,n),JL=(t,e,r,n)=>Vl(t,"yAxis",r,n),Uge=ne([pt,YL,ZL,QL,JL],(t,e,r,n,i)=>Zl(t,"xAxis")?mp(e,n,!1):mp(r,i,!1)),zge=(t,e,r,n,i)=>i;function Fge(t){return t.type==="line"}var Vge=ne([sy,zge],(t,e)=>t.filter(Fge).find(r=>r.id===e)),Hge=ne([pt,YL,ZL,QL,JL,Vge,Uge,ry],(t,e,r,n,i,a,o,s)=>{var{chartData:c,dataStartIndex:f,dataEndIndex:d}=s;if(!(a==null||e==null||r==null||n==null||i==null||n.length===0||i.length===0||o==null)){var{dataKey:p,data:g}=a,y;if(g!=null&&g.length>0?y=g:y=c?.slice(f,d+1),y!=null)return f1e({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:o,displayedData:y})}}),$ge=["id"],qge=["type","layout","connectNulls","needClip"],Gge=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function G5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Mi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G5(Object(r),!0).forEach(function(n){Wge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wge(t,e,r){return(e=Kge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kge(t){var e=Xge(t,"string");return typeof e=="symbol"?e:e+""}function Xge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LC(t,e){if(t==null)return{};var r,n,i=Yge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Yge(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hu.apply(null,arguments)}var Qge=t=>{var{dataKey:e,name:r,stroke:n,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:n,value:od(r,e),payload:t}]};function Zge(t){var{dataKey:e,data:r,stroke:n,strokeWidth:i,fill:a,name:o,hide:s,unit:c}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:od(o,e),hide:s,type:t.tooltipType,color:t.stroke,unit:c}}}var eB=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Jge(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],i=0;i<e;++i)n=[...n,...r];return n}var e1e=(t,e,r)=>{var n=r.reduce((p,g)=>p+g);if(!n)return eB(e,t);for(var i=Math.floor(t/n),a=t%n,o=e-t,s=[],c=0,f=0;c<r.length;f+=r[c],++c)if(f+r[c]>a){s=[...r.slice(0,c),a-f];break}var d=s.length%2===0?[0,o]:[o];return[...Jge(r,i),...s,...d].map(p=>"".concat(p,"px")).join(", ")};function t1e(t,e){var r;if(C.isValidElement(t))r=C.cloneElement(t,e);else if(typeof t=="function")r=t(e);else{var n=bt("recharts-line-dot",typeof t!="boolean"?t.className:"");r=C.createElement(IL,hu({},e,{className:n}))}return r}function r1e(t,e){return t==null?!1:e?!0:t.length===1}function n1e(t){var{clipPathId:e,points:r,props:n}=t,{dot:i,dataKey:a,needClip:o}=n;if(!r1e(r,i))return null;var{id:s}=n,c=LC(n,$ge),f=zk(i),d=Mo(c),p=dr(i,!0),g=r.map((b,w)=>{var E=Mi(Mi(Mi({key:"dot-".concat(w),r:3},d),p),{},{index:w,cx:b.x,cy:b.y,dataKey:a,value:b.value,payload:b.payload,points:r});return t1e(i,E)}),y={clipPath:o?"url(#clipPath-".concat(f?"":"dots-").concat(e,")"):void 0};return C.createElement(Mn,hu({className:"recharts-line-dots",key:"dots"},y),g)}function i1e(t){var{showLabels:e,children:r,points:n}=t,i=C.useMemo(()=>n?.map(a=>{var o={x:a.x,y:a.y,width:0,height:0};return Mi(Mi({},o),{},{value:a.value,payload:a.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[n]);return C.createElement(CL,{value:e?i:null},r)}function W5(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:i,props:a}=t,{type:o,layout:s,connectNulls:c,needClip:f}=a,d=LC(a,qge),p=Mi(Mi({},dr(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:f?"url(#clipPath-".concat(e,")"):void 0,points:n,type:o,layout:s,connectNulls:c,strokeDasharray:i??a.strokeDasharray});return C.createElement(C.Fragment,null,n?.length>1&&C.createElement(cS,hu({},p,{pathRef:r})),C.createElement(n1e,{points:n,clipPathId:e,props:a}))}function a1e(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function o1e(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:o,strokeDasharray:s,isAnimationActive:c,animationBegin:f,animationDuration:d,animationEasing:p,animateNewValues:g,width:y,height:b,onAnimationEnd:w,onAnimationStart:E}=r,S=i.current,I=Yp(r,"recharts-line-"),[O,D]=C.useState(!1),k=!O,B=C.useCallback(()=>{typeof w=="function"&&w(),D(!1)},[w]),R=C.useCallback(()=>{typeof E=="function"&&E(),D(!0)},[E]),N=a1e(n.current),L=a.current;return C.createElement(i1e,{points:o,showLabels:k},r.children,C.createElement(Xp,{animationId:I,begin:f,duration:d,isActive:c,easing:p,onAnimationEnd:B,onAnimationStart:R,key:I},U=>{var j=vr(L,N+L,U),V=Math.min(j,N),F;if(c)if(s){var he="".concat(s).split(/[,\s]+/gim).map(ie=>parseFloat(ie));F=e1e(V,N,he)}else F=eB(N,V);else F=s==null?void 0:String(s);if(S){var we=S.length/o.length,Y=U===1?o:o.map((ie,K)=>{var ge=Math.floor(K*we);if(S[ge]){var Ie=S[ge];return Mi(Mi({},ie),{},{x:vr(Ie.x,ie.x,U),y:vr(Ie.y,ie.y,U)})}return g?Mi(Mi({},ie),{},{x:vr(y*2,ie.x,U),y:vr(b/2,ie.y,U)}):Mi(Mi({},ie),{},{x:ie.x,y:ie.y})});return i.current=Y,C.createElement(W5,{props:r,points:Y,clipPathId:e,pathRef:n,strokeDasharray:F})}return U>0&&N>0&&(i.current=o,a.current=V),C.createElement(W5,{props:r,points:o,clipPathId:e,pathRef:n,strokeDasharray:F})}),C.createElement(mC,{label:r.label}))}function s1e(t){var{clipPathId:e,props:r}=t,n=C.useRef(null),i=C.useRef(0),a=C.useRef(null);return C.createElement(o1e,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var l1e=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:Yt(t.payload,e)});class c1e extends C.Component{render(){var e,{hide:r,dot:n,points:i,className:a,xAxisId:o,yAxisId:s,top:c,left:f,width:d,height:p,id:g,needClip:y}=this.props;if(r)return null;var b=bt("recharts-line",a),w=g,{r:E=3,strokeWidth:S=2}=(e=dr(n,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},I=zk(n),O=E*2+S;return C.createElement(C.Fragment,null,C.createElement(Mn,{className:b},y&&C.createElement("defs",null,C.createElement(FL,{clipPathId:w,xAxisId:o,yAxisId:s}),!I&&C.createElement("clipPath",{id:"clipPath-dots-".concat(w)},C.createElement("rect",{x:f-O/2,y:c-O/2,width:d+O,height:p+O}))),C.createElement(zL,{xAxisId:o,yAxisId:s,data:i,dataPointFormatter:l1e,errorBarOffset:0},C.createElement(s1e,{props:this.props,clipPathId:w}))),C.createElement(Ope,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var tB={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Jl.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function u1e(t){var e=kn(t,tB),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:s,dot:c,hide:f,isAnimationActive:d,label:p,legendType:g,xAxisId:y,yAxisId:b,id:w}=e,E=LC(e,Gge),{needClip:S}=PC(y,b),I=OC(),O=Km(),D=bi(),k=Re(U=>Hge(U,y,b,D,w));if(O!=="horizontal"&&O!=="vertical"||k==null||I==null)return null;var{height:B,width:R,x:N,y:L}=I;return C.createElement(c1e,hu({},E,{id:w,connectNulls:s,dot:c,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,isAnimationActive:d,hide:f,label:p,legendType:g,xAxisId:y,yAxisId:b,points:k,layout:O,height:B,width:R,left:N,top:L,needClip:S}))}function f1e(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:o,bandSize:s,displayedData:c}=t;return c.map((f,d)=>{var p=Yt(f,o);if(e==="horizontal"){var g=ER({axis:r,ticks:i,bandSize:s,entry:f,index:d}),y=cr(p)?null:n.scale(p);return{x:g,y,value:p,payload:f}}var b=cr(p)?null:r.scale(p),w=ER({axis:n,ticks:a,bandSize:s,entry:f,index:d});return b==null||w==null?null:{x:b,y:w,value:p,payload:f}}).filter(Boolean)}function d1e(t){var e=kn(t,tB),r=bi();return C.createElement(CC,{id:e.id,type:"line"},n=>C.createElement(C.Fragment,null,C.createElement(kL,{legendPayload:Qge(e)}),C.createElement(SC,{fn:Zge,args:e}),C.createElement(LL,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),C.createElement(u1e,hu({},e,{id:n}))))}var rB=C.memo(d1e);rB.displayName="Line";var h1e=["dangerouslySetInnerHTML","ticks"],p1e=["id"],g1e=["domain"],v1e=["domain"];function tE(){return tE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tE.apply(null,arguments)}function $v(t,e){if(t==null)return{};var r,n,i=m1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function m1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function y1e(t){var e=hr();return C.useEffect(()=>(e(vpe(t)),()=>{e(mpe(t))}),[t,e]),null}var x1e=t=>{var{xAxisId:e,className:r}=t,n=Re(iS),i=bi(),a="xAxis",o=Re(E=>hd(E,a,e,i)),s=Re(E=>Vj(E,a,e,i)),c=Re(E=>Bj(E,e)),f=Re(E=>Qce(E,e)),d=Re(E=>gj(E,e));if(c==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:p,ticks:g}=t,y=$v(t,h1e),{id:b}=d,w=$v(d,p1e);return C.createElement(kC,tE({},y,w,{scale:o,x:f.x,y:f.y,width:c.width,height:c.height,className:bt("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:s}))},b1e={allowDataOverflow:Pi.allowDataOverflow,allowDecimals:Pi.allowDecimals,allowDuplicatedCategory:Pi.allowDuplicatedCategory,height:Pi.height,hide:!1,mirror:Pi.mirror,orientation:Pi.orientation,padding:Pi.padding,reversed:Pi.reversed,scale:Pi.scale,tickCount:Pi.tickCount,type:Pi.type,xAxisId:0},_1e=t=>{var e,r,n,i,a,o=kn(t,b1e);return C.createElement(C.Fragment,null,C.createElement(y1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),C.createElement(x1e,o))},w1e=(t,e)=>{var{domain:r}=t,n=$v(t,g1e),{domain:i}=e,a=$v(e,v1e);return Wf(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:Wf({domain:r},{domain:i}):!1},BC=C.memo(_1e,w1e);BC.displayName="XAxis";var E1e=["dangerouslySetInnerHTML","ticks"],A1e=["id"],S1e=["domain"],C1e=["domain"];function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rE.apply(null,arguments)}function qv(t,e){if(t==null)return{};var r,n,i=T1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function T1e(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function I1e(t){var e=hr();return C.useEffect(()=>(e(ype(t)),()=>{e(xpe(t))}),[t,e]),null}var O1e=t=>{var{yAxisId:e,className:r,width:n,label:i}=t,a=C.useRef(null),o=C.useRef(null),s=Re(iS),c=bi(),f=hr(),d="yAxis",p=Re(k=>hd(k,d,e,c)),g=Re(k=>Uj(k,e)),y=Re(k=>Jce(k,e)),b=Re(k=>Vj(k,d,e,c)),w=Re(k=>vj(k,e));if(C.useLayoutEffect(()=>{if(!(n!=="auto"||!g||vC(i)||C.isValidElement(i)||w==null)){var k=a.current;if(k){var B=k.getCalculatedWidth();Math.round(g.width)!==Math.round(B)&&f(bpe({id:e,width:B}))}}},[b,g,f,i,e,n,w]),g==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:E,ticks:S}=t,I=qv(t,E1e),{id:O}=w,D=qv(w,A1e);return C.createElement(kC,rE({},I,D,{ref:a,labelRef:o,scale:p,x:y.x,y:y.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:bt("recharts-".concat(d," ").concat(d),r),viewBox:s,ticks:b}))},R1e={allowDataOverflow:Di.allowDataOverflow,allowDecimals:Di.allowDecimals,allowDuplicatedCategory:Di.allowDuplicatedCategory,hide:!1,mirror:Di.mirror,orientation:Di.orientation,padding:Di.padding,reversed:Di.reversed,scale:Di.scale,tickCount:Di.tickCount,type:Di.type,width:Di.width,yAxisId:0},P1e=t=>{var e,r,n,i,a,o=kn(t,R1e);return C.createElement(C.Fragment,null,C.createElement(I1e,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),C.createElement(O1e,o))},D1e=(t,e)=>{var{domain:r}=t,n=qv(t,S1e),{domain:i}=e,a=qv(e,C1e);return Wf(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(i)&&i.length===2?r[0]===i[0]&&r[1]===i[1]:Wf({domain:r},{domain:i}):!1},UC=C.memo(P1e,D1e);UC.displayName="YAxis";var w_={exports:{}},E_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K5;function N1e(){if(K5)return E_;K5=1;var t=Xf();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:e,n=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,s=t.useDebugValue;return E_.useSyncExternalStoreWithSelector=function(c,f,d,p,g){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=o(function(){function E(k){if(!S){if(S=!0,I=k,k=p(k),g!==void 0&&b.hasValue){var B=b.value;if(g(B,k))return O=B}return O=k}if(B=O,r(I,k))return B;var R=p(k);return g!==void 0&&g(B,R)?(I=k,B):(I=k,O=R)}var S=!1,I,O,D=d===void 0?null:d;return[function(){return E(f())},D===null?void 0:function(){return E(D())}]},[f,d,p,g]);var w=n(c,y[0],y[1]);return a(function(){b.hasValue=!0,b.value=w},[w]),s(w),w},E_}var X5;function M1e(){return X5||(X5=1,w_.exports=N1e()),w_.exports}M1e();function k1e(t){t()}function j1e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){k1e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=e={callback:r,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Y5={notify(){},get:()=>[]};function L1e(t,e){let r,n=Y5,i=0,a=!1;function o(w){d();const E=n.subscribe(w);let S=!1;return()=>{S||(S=!0,E(),p())}}function s(){n.notify()}function c(){b.onStateChange&&b.onStateChange()}function f(){return a}function d(){i++,r||(r=t.subscribe(c),n=j1e())}function p(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=Y5)}function g(){a||(a=!0,d())}function y(){a&&(a=!1,p())}const b={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:f,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>n};return b}var B1e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U1e=B1e(),z1e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",F1e=z1e(),V1e=()=>U1e||F1e?C.useLayoutEffect:C.useEffect,H1e=V1e(),$1e=Symbol.for("react-redux-context"),q1e=typeof globalThis<"u"?globalThis:{};function G1e(){if(!C.createContext)return{};const t=q1e[$1e]??=new Map;let e=t.get(C.createContext);return e||(e=C.createContext(null),t.set(C.createContext,e)),e}var W1e=G1e();function K1e(t){const{children:e,context:r,serverState:n,store:i}=t,a=C.useMemo(()=>{const c=L1e(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),o=C.useMemo(()=>i.getState(),[i]);H1e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const s=r||W1e;return C.createElement(s.Provider,{value:a},e)}var X1e=K1e,Y1e=(t,e)=>e,zC=ne([Y1e,pt,dj,on,nL,Rs,ife,nn],cfe),FC=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},nB=ya("mouseClick"),iB=Wp();iB.startListening({actionCreator:nB,effect:(t,e)=>{var r=t.payload,n=zC(e.getState(),FC(r));n?.activeIndex!=null&&e.dispatch(due({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var nE=ya("mouseMove"),aB=Wp();aB.startListening({actionCreator:nE,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=oC(n,n.tooltip.settings.shared),a=zC(n,FC(r));i==="axis"&&(a?.activeIndex!=null?e.dispatch(Yj({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(Xj()))}});var Q5={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},oB=qi({name:"rootProps",initialState:Q5,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:Q5.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),Q1e=oB.reducer,{updateOptions:Z1e}=oB.actions,sB=qi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:J1e}=sB.actions,eve=sB.reducer,lB=ya("keyDown"),cB=ya("focus"),VC=Wp();VC.startListening({actionCreator:lB,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(sC(i,gd(r))),s=Rs(r);if(a==="Enter"){var c=Lv(r,"axis","hover",String(i.index));e.dispatch(Kw({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=nue(r),d=f==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,g=o+p*d;if(!(s==null||g>=s.length||g<0)){var y=Lv(r,"axis","hover",String(g));e.dispatch(Kw({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}});VC.startListening({actionCreator:cB,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",o=Lv(r,"axis","hover",String(a));e.dispatch(Kw({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var la=ya("externalEvent"),uB=Wp();uB.startListening({actionCreator:la,effect:(t,e)=>{if(t.payload.handler!=null){var r=e.getState(),n={activeCoordinate:Kue(r),activeDataKey:sL(r),activeIndex:$l(r),activeLabel:oL(r),activeTooltipIndex:$l(r),isTooltipActive:Xue(r)};t.payload.handler(n,t.payload.reactEvent)}}});var tve=ne([pd],t=>t.tooltipItemPayloads),rve=ne([tve,o0,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var i=t.find(s=>s.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var o=e(a,r);return o}}}),fB=ya("touchMove"),dB=Wp();dB.startListening({actionCreator:fB,effect:(t,e)=>{var r=t.payload,n=e.getState(),i=oC(n,n.tooltip.settings.shared);if(i==="axis"){var a=zC(n,FC({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&e.dispatch(Yj({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,s=r.touches[0],c=document.elementFromPoint(s.clientX,s.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(X9),d=(o=c.getAttribute(Y9))!==null&&o!==void 0?o:void 0,p=rve(e.getState(),f,d);e.dispatch(Kj({activeDataKey:d,activeIndex:f,activeCoordinate:p}))}}});var nve=_9({brush:V0e,cartesianAxis:_pe,chartData:Sfe,errorBars:Fpe,graphicalItems:zhe,layout:iie,legend:Kie,options:bfe,polarAxis:nhe,polarOptions:eve,referenceElements:X0e,rootProps:Q1e,tooltip:hue}),ive=function(e){return One({reducer:nve,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([iB.middleware,aB.middleware,VC.middleware,uB.middleware,dB.middleware]),devTools:Jl.devToolsEnabled})};function hB(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,i=bi(),a=C.useRef(null);if(i)return r;a.current==null&&(a.current=ive(e));var o=ZA;return C.createElement(X1e,{context:o,store:a.current},r)}function pB(t){var{layout:e,width:r,height:n,margin:i}=t,a=hr(),o=bi();return C.useEffect(()=>{o||(a(tie(e)),a(rie({width:r,height:n})),a(eie(i)))},[a,o,e,r,n,i]),null}function gB(t){var e=hr();return C.useEffect(()=>{e(Z1e(t))},[e,t]),null}var ave=["children"];function ove(t,e){if(t==null)return{};var r,n,i=sve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function sve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Gv(){return Gv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gv.apply(null,arguments)}var lve={width:"100%",height:"100%"},cve=C.forwardRef((t,e)=>{var r=oS(),n=sS(),i=t7();if(!Vf(r)||!Vf(n))return null;var{children:a,otherAttributes:o,title:s,desc:c}=t,f,d;return typeof o.tabIndex=="number"?f=o.tabIndex:f=i?0:void 0,typeof o.role=="string"?d=o.role:d=i?"application":void 0,C.createElement(HA,Gv({},o,{title:s,desc:c,role:d,tabIndex:f,width:r,height:n,style:lve,ref:e}),a)}),uve=t=>{var{children:e}=t,r=Re(Wm);if(!r)return null;var{width:n,height:i,y:a,x:o}=r;return C.createElement(HA,{width:n,height:i,x:o,y:a},e)},Z5=C.forwardRef((t,e)=>{var{children:r}=t,n=ove(t,ave),i=bi();return i?C.createElement(uve,null,r):C.createElement(cve,Gv({ref:e},n),r)});function fve(){var t=hr(),[e,r]=C.useState(null),n=Re(Nie);return C.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;$i(a)&&a!==n&&t(nie(a))}},[e,t,n]),r}function J5(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dve(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J5(Object(r),!0).forEach(function(n){hve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J5(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hve(t,e,r){return(e=pve(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pve(t){var e=gve(t,"string");return typeof e=="symbol"?e:e+""}function gve(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vve=C.forwardRef((t,e)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:o,onDoubleClick:s,onMouseDown:c,onMouseEnter:f,onMouseLeave:d,onMouseMove:p,onMouseUp:g,onTouchEnd:y,onTouchMove:b,onTouchStart:w,style:E,width:S}=t,I=hr(),[O,D]=C.useState(null),[k,B]=C.useState(null);Mfe();var R=fve(),N=C.useCallback(Z=>{R(Z),typeof e=="function"&&e(Z),D(Z),B(Z)},[R,e,D,B]),L=C.useCallback(Z=>{I(nB(Z)),I(la({handler:a,reactEvent:Z}))},[I,a]),U=C.useCallback(Z=>{I(nE(Z)),I(la({handler:f,reactEvent:Z}))},[I,f]),j=C.useCallback(Z=>{I(Xj()),I(la({handler:d,reactEvent:Z}))},[I,d]),V=C.useCallback(Z=>{I(nE(Z)),I(la({handler:p,reactEvent:Z}))},[I,p]),F=C.useCallback(()=>{I(cB())},[I]),he=C.useCallback(Z=>{I(lB(Z.key))},[I]),we=C.useCallback(Z=>{I(la({handler:o,reactEvent:Z}))},[I,o]),Y=C.useCallback(Z=>{I(la({handler:s,reactEvent:Z}))},[I,s]),ie=C.useCallback(Z=>{I(la({handler:c,reactEvent:Z}))},[I,c]),K=C.useCallback(Z=>{I(la({handler:g,reactEvent:Z}))},[I,g]),ge=C.useCallback(Z=>{I(la({handler:w,reactEvent:Z}))},[I,w]),Ie=C.useCallback(Z=>{I(fB(Z)),I(la({handler:b,reactEvent:Z}))},[I,b]),G=C.useCallback(Z=>{I(la({handler:y,reactEvent:Z}))},[I,y]);return C.createElement(hL.Provider,{value:O},C.createElement(Vk.Provider,{value:k},C.createElement("div",{className:bt("recharts-wrapper",n),style:dve({position:"relative",cursor:"default",width:S,height:i},E),onClick:L,onContextMenu:we,onDoubleClick:Y,onFocus:F,onKeyDown:he,onMouseDown:ie,onMouseEnter:U,onMouseLeave:j,onMouseMove:V,onMouseUp:K,onTouchEnd:G,onTouchMove:Ie,onTouchStart:ge,ref:N},r)))}),mve=["children","className","width","height","style","compact","title","desc"];function yve(t,e){if(t==null)return{};var r,n,i=xve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function xve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var vB=C.forwardRef((t,e)=>{var{children:r,className:n,width:i,height:a,style:o,compact:s,title:c,desc:f}=t,d=yve(t,mve),p=Mo(d);return s?C.createElement(Z5,{otherAttributes:p,title:c,desc:f},r):C.createElement(vve,{className:n,style:o,width:i,height:a,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},C.createElement(Z5,{otherAttributes:p,title:c,desc:f,ref:e},C.createElement(Q0e,null,r)))}),bve=["width","height"];function iE(){return iE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iE.apply(null,arguments)}function _ve(t,e){if(t==null)return{};var r,n,i=wve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function wve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Eve={top:5,right:5,bottom:5,left:5},Ave={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Eve,reverseStackOrder:!1,syncMethod:"index"},mB=C.forwardRef(function(e,r){var n,i=kn(e.categoricalChartProps,Ave),{width:a,height:o}=i,s=_ve(i,bve);if(!Vf(a)||!Vf(o))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,categoricalChartProps:g}=e,y={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,eventEmitter:void 0};return C.createElement(hB,{preloadedState:{options:y},reduxStoreName:(n=g.id)!==null&&n!==void 0?n:c},C.createElement(qL,{chartData:g.data}),C.createElement(pB,{width:a,height:o,layout:i.layout,margin:i.margin}),C.createElement(gB,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(vB,iE({},s,{width:a,height:o,ref:r})))}),Sve=["axis"],Cve=C.forwardRef((t,e)=>C.createElement(mB,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Sve,tooltipPayloadSearcher:gC,categoricalChartProps:t,ref:e})),Tve=["axis","item"],Ive=C.forwardRef((t,e)=>C.createElement(mB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Tve,tooltipPayloadSearcher:gC,categoricalChartProps:t,ref:e}));function Ove(t){var e=hr();return C.useEffect(()=>{e(J1e(t))},[e,t]),null}var Rve=["width","height","layout"];function aE(){return aE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aE.apply(null,arguments)}function Pve(t,e){if(t==null)return{};var r,n,i=Dve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Dve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Nve={top:5,right:5,bottom:5,left:5},Mve={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Nve,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},kve=C.forwardRef(function(e,r){var n,i=kn(e.categoricalChartProps,Mve),{width:a,height:o,layout:s}=i,c=Pve(i,Rve);if(!Vf(a)||!Vf(o))return null;var{chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g}=e,y={chartName:f,defaultTooltipEventType:d,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,eventEmitter:void 0};return C.createElement(hB,{preloadedState:{options:y},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:f},C.createElement(qL,{chartData:i.data}),C.createElement(pB,{width:a,height:o,layout:s,margin:i.margin}),C.createElement(gB,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),C.createElement(Ove,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),C.createElement(vB,aE({width:a,height:o},c,{ref:r})))}),jve=["item"],Lve={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},yB=C.forwardRef((t,e)=>{var r=kn(t,Lve);return C.createElement(kve,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:jve,tooltipPayloadSearcher:gC,categoricalChartProps:r,ref:e})});const Bve=()=>{const{intakes:t}=Po(),e=C.useMemo(()=>{const n=new Date,i=[];for(let a=6;a>=0;a--){const o=new Date(n);o.setDate(o.getDate()-a);const s=o.toISOString().split("T")[0],f=t.filter(d=>d.date.startsWith(s)).reduce((d,p)=>d+p.calories,0);i.push({date:`${o.getMonth()+1}/${o.getDate()}`,calories:f})}return i},[t]),r=e.some(n=>n.calories>0);return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"📈 週間カロリー推移"}),r?m.jsx(py,{width:"100%",height:250,children:m.jsxs(Cve,{data:e,margin:{top:10,right:10,left:-20,bottom:5},children:[m.jsx(jC,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),m.jsx(BC,{dataKey:"date",tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx(UC,{tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx(hy,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"},labelStyle:{fontWeight:600,marginBottom:"4px"}}),m.jsx(rB,{type:"monotone",dataKey:"calories",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4},activeDot:{r:6},name:"カロリー (kcal)"})]})}):m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、カロリーの推移が表示されます"})]})]})},Uve=()=>{const{expenses:t}=Do(),e=C.useMemo(()=>{const n=new Date,i=[];for(let a=5;a>=0;a--){const o=new Date(n.getFullYear(),n.getMonth()-a,1),s=o.getFullYear(),c=o.getMonth()+1,d=t.filter(p=>{const g=new Date(p.date);return g.getFullYear()===s&&g.getMonth()+1===c}).reduce((p,g)=>p+g.amount,0);i.push({month:`${c}月`,amount:d})}return i},[t]),r=e.some(n=>n.amount>0);return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"💰 月間支出推移"}),r?m.jsx(py,{width:"100%",height:250,children:m.jsxs(Ive,{data:e,margin:{top:10,right:10,left:-20,bottom:5},children:[m.jsx(jC,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),m.jsx(BC,{dataKey:"month",tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx(UC,{tick:{fontSize:12},stroke:"#9ca3af"}),m.jsx(hy,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"},labelStyle:{fontWeight:600,marginBottom:"4px"},formatter:n=>`¥${n.toLocaleString()}`}),m.jsx(HL,{dataKey:"amount",fill:"#22c55e",radius:[4,4,0,0],name:"支出額"})]})}):m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、支出の推移が表示されます"})]})]})},zve=()=>{const{intakes:t}=Po(),e=C.useMemo(()=>{const r=new Map;return t.forEach(i=>{const a=r.get(i.name)||0;r.set(i.name,a+1)}),Array.from(r.entries()).sort((i,a)=>a[1]-i[1]).slice(0,5).map(([i,a],o)=>({rank:o+1,name:i,count:a}))},[t]);return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"🏆 よく買う商品 TOP5"}),e.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"食事記録を追加すると、よく買う商品が表示されます"})]}):m.jsx("div",{style:{marginTop:"16px"},children:e.map(r=>m.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"12px 0",borderBottom:r.rank<e.length?"1px solid var(--border)":"none"},children:[m.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:r.rank===1?"linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)":r.rank===2?"linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%)":r.rank===3?"linear-gradient(135deg, #cd7f32 0%, #daa06d 100%)":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"1.1rem",color:r.rank<=3?"#fff":"#666",marginRight:"16px",flexShrink:0},children:r.rank}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"0.95rem",marginBottom:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r.name}),m.jsxs("div",{style:{fontSize:"0.85rem",color:"#666"},children:["購入回数: ",r.count,"回"]})]})]},r.rank))})]})},m1=["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6","#ec4899"],Fve=()=>{const{intakes:t}=Po(),e=C.useMemo(()=>{const i=new Map;return t.forEach(o=>{const s=o.manufacturer||"その他",c=i.get(s)||0;i.set(s,c+o.price)}),Array.from(i.entries()).sort((o,s)=>s[1]-o[1]).slice(0,6).map(([o,s])=>({name:o,value:s}))},[t]),r=e.reduce((i,a)=>i+a.value,0),n=r>0;return m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"🏭 メーカー別支出分析"}),n?m.jsxs(m.Fragment,{children:[m.jsx(py,{width:"100%",height:250,children:m.jsxs(yB,{children:[m.jsx(IC,{data:e,cx:"50%",cy:"50%",labelLine:!1,label:i=>`${i.name} ${((i.percent||0)*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:e.map((i,a)=>m.jsx(vd,{fill:m1[a%m1.length]},`cell-${a}`))}),m.jsx(hy,{formatter:i=>`¥${i.toLocaleString()}`,contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"8px 12px"}})]})}),m.jsx("div",{style:{marginTop:"16px"},children:e.map((i,a)=>m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0",borderBottom:a<e.length-1?"1px solid var(--border)":"none"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"2px",background:m1[a%m1.length],flexShrink:0}}),m.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:i.name})]}),m.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:600,color:"var(--primary)"},children:["¥",i.value.toLocaleString()]})]},i.name))}),m.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"var(--background)",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsx("span",{style:{fontWeight:600},children:"合計"}),m.jsxs("span",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--primary)"},children:["¥",r.toLocaleString()]})]})]}):m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[m.jsx("p",{children:"データがありません"}),m.jsx("p",{style:{fontSize:"0.85rem",marginTop:"8px"},children:"メーカー情報付きの食事記録を追加すると、分析が表示されます"})]})]})},Vve=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"📊 レポート"}),m.jsx(tte,{}),m.jsx(Bve,{}),m.jsx(Uve,{}),m.jsx(zve,{}),m.jsx(Fve,{})]}),xB=({selectedYear:t,selectedMonth:e,selectedDate:r,onSelectDate:n,onMonthChange:i,mode:a="month"})=>{const[o,s]=C.useState(t),[c,f]=C.useState(e),d=new Date(o,c,0).getDate(),p=new Date(o,c-1,1).getDay(),g=()=>{let D=c-1,k=o;D<1&&(D=12,k-=1),f(D),s(k),i&&i(k,D)},y=()=>{let D=c+1,k=o;D>12&&(D=1,k+=1),f(D),s(k),i&&i(k,D)},b=D=>{if(a==="date"&&n){const k=new Date(o,c-1,D);n(k)}},w=()=>{a==="month"&&i&&i(o,c)},E=D=>{const k=new Date;return k.getFullYear()===o&&k.getMonth()+1===c&&k.getDate()===D},S=D=>r?r.getFullYear()===o&&r.getMonth()+1===c&&r.getDate()===D:!1,I=[];for(let D=0;D<p;D++)I.push(null);for(let D=1;D<=d;D++)I.push(D);const O=["日","月","火","水","木","金","土"];return m.jsxs("div",{style:{background:"var(--card)",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[m.jsx("button",{onClick:g,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:m.jsx(mD,{size:24})}),m.jsxs("div",{onClick:w,style:{fontSize:"18px",fontWeight:"bold",cursor:a==="month"?"pointer":"default",padding:a==="month"?"8px 16px":"0",borderRadius:"8px",transition:"background 0.2s",background:a==="month"&&o===t&&c===e?"var(--primary)":"transparent",color:a==="month"&&o===t&&c===e?"white":"var(--text)"},children:[o,"年 ",c,"月"]}),m.jsx("button",{onClick:y,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"50%",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:m.jsx(cE,{size:24})})]}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px",marginBottom:"10px"},children:O.map((D,k)=>m.jsx("div",{style:{textAlign:"center",fontSize:"12px",fontWeight:"bold",color:k===0?"#ef4444":k===6?"#3b82f6":"var(--text-secondary)"},children:D},k))}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"8px"},children:I.map((D,k)=>{if(D===null)return m.jsx("div",{},`empty-${k}`);const B=E(D),R=S(D),N=k%7;return m.jsx("button",{onClick:()=>b(D),disabled:a==="month",style:{aspectRatio:"1",display:"flex",alignItems:"center",justifyContent:"center",border:B?"2px solid var(--primary)":"none",borderRadius:"8px",background:R?"var(--primary)":B?"var(--background)":"transparent",color:R?"white":N===0?"#ef4444":N===6?"#3b82f6":"var(--text)",fontSize:"14px",fontWeight:R||B?"bold":"normal",cursor:a==="date"?"pointer":"default",transition:"all 0.2s"},onMouseEnter:L=>{a==="date"&&!R&&(L.currentTarget.style.background="var(--background)")},onMouseLeave:L=>{a==="date"&&!R&&(L.currentTarget.style.background="transparent")},children:D},D)})}),a==="date"&&m.jsx("div",{style:{marginTop:"15px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:r?`選択: ${r.getFullYear()}/${r.getMonth()+1}/${r.getDate()}`:"日付を選択してください"})]})},Hve=({isOpen:t,selectedDate:e,onClose:r,onConfirm:n})=>{const[i,a]=Hn.useState(e);if(Hn.useEffect(()=>{a(e)},[e,t]),!t)return null;const o=()=>{n(i),r()};return m.jsx("div",{className:"modal-backdrop",onClick:r,style:{animation:"fadeIn 0.2s ease"},children:m.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),style:{maxWidth:"400px",animation:"slideUp 0.3s ease"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border)"},children:[m.jsx("h3",{style:{margin:0},children:"日付を選択"}),m.jsx("button",{onClick:r,style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:"5px",display:"flex",alignItems:"center"},children:m.jsx(fs,{size:24})})]}),m.jsx(xB,{selectedYear:i.getFullYear(),selectedMonth:i.getMonth()+1,selectedDate:i,onSelectDate:a,mode:"date"}),m.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:r,style:{flex:1,padding:"12px",background:"var(--background)",color:"var(--text)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"キャンセル"}),m.jsxs("button",{onClick:o,className:"submit",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"5px"},children:[m.jsx(qz,{size:20}),"決定"]})]})]})})},$ve=()=>{const{addExpense:t}=Do(),[e,r]=C.useState("food"),[n,i]=C.useState(""),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(new Date),[p,g]=C.useState(!1),y=[{value:"food",label:"食費"},{value:"transport",label:"交通費"},{value:"utilities",label:"光熱費"},{value:"entertainment",label:"娯楽"},{value:"health",label:"医療"},{value:"other",label:"その他"}],b=()=>{if(!a||Number(a)<=0){alert("正しい金額を入力してください");return}if(e==="other"&&!n.trim()){alert("カスタムカテゴリ名を入力してください");return}t({category:e,customCategory:e==="other"?n.trim():void 0,amount:Number(a),memo:s||void 0,date:f.toISOString()}),o(""),c(""),i(""),alert("支出を記録しました！")},w=E=>`${E.getFullYear()}年${E.getMonth()+1}月${E.getDate()}日`;return m.jsxs("div",{className:"card",children:[m.jsx("label",{children:"日付"}),m.jsxs("button",{onClick:()=>g(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[m.jsx("span",{children:w(f)}),m.jsx(Sp,{size:20,color:"var(--primary)"})]}),m.jsx("label",{children:"カテゴリ"}),m.jsx("select",{value:e,onChange:E=>r(E.target.value),children:y.map(E=>m.jsx("option",{value:E.value,children:E.label},E.value))}),e==="other"&&m.jsxs(m.Fragment,{children:[m.jsx("label",{children:"カスタムカテゴリ名"}),m.jsx("input",{value:n,onChange:E=>i(E.target.value),placeholder:"例: 趣味、ペット、書籍"})]}),m.jsx("label",{children:"金額(円)"}),m.jsx("input",{type:"number",value:a,onChange:E=>o(E.target.value),placeholder:"1000",min:"0"}),m.jsx("label",{children:"メモ（任意）"}),m.jsx("input",{value:s,onChange:E=>c(E.target.value),placeholder:"例: 昼食"}),m.jsxs("button",{className:"submit",onClick:b,children:[m.jsx(k1,{size:20}),"記録する"]}),m.jsx(Hve,{isOpen:p,selectedDate:f,onClose:()=>g(!1),onConfirm:d})]})},HC=({isOpen:t,selectedYear:e,selectedMonth:r,onClose:n,onConfirm:i})=>{if(!t)return null;const a=(o,s)=>{i(o,s),n()};return m.jsx("div",{className:"modal-backdrop",onClick:n,style:{animation:"fadeIn 0.2s ease"},children:m.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),style:{maxWidth:"400px",animation:"slideUp 0.3s ease"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border)"},children:[m.jsx("h3",{style:{margin:0},children:"月を選択"}),m.jsx("button",{onClick:n,style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-secondary)",padding:"5px",display:"flex",alignItems:"center"},children:m.jsx(fs,{size:24})})]}),m.jsx(xB,{selectedYear:e,selectedMonth:r,onMonthChange:a,mode:"month"}),m.jsx("div",{style:{marginTop:"15px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:"年月をタップして選択してください"})]})})},qve=()=>{const{getTotalByMonth:t}=Do(),{settings:e}=av(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,s]=C.useState(!1),c=e.monthlyBudget??3e4,f=t(r,i),d=f/c*100,p=c-f,g=E=>new Intl.NumberFormat("ja-JP").format(E),b=d>=100?{color:"#ef4444",icon:m.jsx(hD,{size:24}),message:"予算超過"}:d>=80?{color:"#f59e0b",icon:m.jsx(oE,{size:24}),message:"予算残りわずか"}:{color:"#10b981",icon:m.jsx(Jv,{size:24}),message:"順調"},w=(E,S)=>{n(E),a(S)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{style:{marginBottom:"15px"},children:"月次予算"}),m.jsxs("button",{onClick:()=>s(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[m.jsxs("span",{children:[r,"年 ",i,"月"]}),m.jsx(Sp,{size:20,color:"var(--primary)"})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"15px",background:"var(--background)",borderRadius:"8px",marginBottom:"20px"},children:[m.jsx("div",{style:{color:b.color},children:b.icon}),m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:"bold",color:b.color},children:b.message}),m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginTop:"4px"},children:p>=0?`残り ¥${g(p)}`:`超過 ¥${g(Math.abs(p))}`})]}),m.jsx("div",{style:{textAlign:"right"},children:m.jsxs("div",{style:{fontSize:"20px",fontWeight:"bold",color:b.color},children:[d.toFixed(1),"%"]})})]}),m.jsxs("div",{style:{background:"var(--background)",borderRadius:"8px",overflow:"hidden",height:"40px",position:"relative",marginBottom:"15px"},children:[m.jsx("div",{style:{background:`linear-gradient(90deg, ${b.color}, ${b.color}dd)`,height:"100%",width:`${Math.min(d,100)}%`,transition:"width 0.3s ease"}}),m.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontWeight:"bold",color:d>50?"white":"var(--text)",fontSize:"14px"},children:["¥",g(f)," / ¥",g(c)]})]}),m.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[m.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"5px"},children:"支出"}),m.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--danger)"},children:["¥",g(f)]})]}),m.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"5px"},children:"予算"}),m.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--primary)"},children:["¥",g(c)]})]})]}),m.jsx(HC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>s(!1),onConfirm:w})]})},gl=["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#6366f1"],eD=["#ec4899","#14b8a6","#f97316","#a855f7","#06b6d4","#84cc16","#f43f5e","#0ea5e9","#eab308","#22c55e","#d946ef","#64748b"],bB=t=>{if(!t)return gl[5];let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;const r=Math.abs(e)%eD.length;return eD[r]},_B=t=>({food:gl[0],transport:gl[1],utilities:gl[2],entertainment:gl[3],health:gl[4],other:gl[5]})[t]||gl[5],Gve=()=>{const{getTotalByCategory:t,getExpensesByMonth:e}=Do(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,s]=C.useState(!1),c=[{value:"food",label:"食費"},{value:"transport",label:"交通費"},{value:"utilities",label:"光熱費"},{value:"entertainment",label:"娯楽"},{value:"health",label:"医療"}],f=e(r,i),d=C.useMemo(()=>{const b=new Map;return c.forEach(w=>{const E=t(w.value,r,i);E>0&&b.set(w.value,{name:w.label,value:E,color:_B(w.value)})}),f.forEach(w=>{if(w.category==="other"&&w.customCategory){const E=`custom_${w.customCategory}`,S=b.get(E);S?S.value+=w.amount:b.set(E,{name:w.customCategory,value:w.amount,color:bB(w.customCategory)})}}),Array.from(b.values())},[r,i,f,t]),p=d.reduce((b,w)=>b+w.value,0),g=b=>new Intl.NumberFormat("ja-JP").format(b),y=(b,w)=>{n(b),a(w)};return m.jsxs("div",{className:"card",children:[m.jsx("h3",{style:{marginBottom:"15px"},children:"カテゴリ別集計"}),m.jsxs("button",{onClick:()=>s(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},children:[m.jsxs("span",{children:[r,"年 ",i,"月"]}),m.jsx(Sp,{size:20,color:"var(--primary)"})]}),f.length===0?m.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"この月の支出データがありません"}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{background:"var(--background)",padding:"15px",borderRadius:"8px",marginBottom:"20px",textAlign:"center"},children:[m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"5px"},children:"合計支出"}),m.jsxs("div",{style:{fontSize:"28px",fontWeight:"bold",color:"var(--danger)"},children:["¥",g(p)]})]}),d.length>0&&m.jsxs(m.Fragment,{children:[m.jsx(py,{width:"100%",height:250,children:m.jsxs(yB,{children:[m.jsx(IC,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:b=>`${b.name}: ¥${g(b.value)}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:d.map((b,w)=>m.jsx(vd,{fill:b.color},`cell-${w}`))}),m.jsx(hy,{formatter:b=>`¥${g(b)}`,contentStyle:{background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px"}}),m.jsx(Xm,{})]})}),m.jsx("div",{style:{marginTop:"20px"},children:d.map((b,w)=>{const E=(b.value/p*100).toFixed(1);return m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0",borderBottom:w<d.length-1?"1px solid var(--border)":"none"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"4px",background:b.color}}),m.jsx("span",{children:b.name})]}),m.jsxs("div",{style:{textAlign:"right"},children:[m.jsxs("div",{style:{fontWeight:"bold"},children:["¥",g(b.value)]}),m.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:[E,"%"]})]})]},w)})})]})]}),m.jsx(HC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>s(!1),onConfirm:y})]})},Wve=()=>{const{deleteExpense:t,getExpensesByMonth:e}=Do(),[r,n]=C.useState(new Date().getFullYear()),[i,a]=C.useState(new Date().getMonth()+1),[o,s]=C.useState(!1),c=e(r,i),f={food:"食費",transport:"交通費",utilities:"光熱費",entertainment:"娯楽",health:"医療",other:"その他"},d=E=>E.category==="other"&&E.customCategory?E.customCategory:f[E.category],p=E=>E.category==="other"&&E.customCategory?bB(E.customCategory):_B(E.category),g=E=>{window.confirm("この支出を削除しますか？")&&t(E)},y=E=>{const S=new Date(E);return`${S.getMonth()+1}/${S.getDate()}`},b=E=>new Intl.NumberFormat("ja-JP").format(E),w=(E,S)=>{n(E),a(S)};return m.jsxs("div",{className:"card",children:[m.jsxs("button",{onClick:()=>s(!0),style:{width:"100%",padding:"12px",background:"var(--background)",color:"var(--text)",border:"2px solid var(--border)",borderRadius:"8px",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[m.jsxs("span",{children:[r,"年 ",i,"月"]}),m.jsx(Sp,{size:20,color:"var(--primary)"})]}),c.length===0?m.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"20px"},children:"この月の支出はまだありません"}):m.jsx("div",{className:"list",children:c.sort((E,S)=>new Date(S.date).getTime()-new Date(E.date).getTime()).map(E=>m.jsxs("div",{className:"list-item",children:[m.jsxs("div",{style:{flex:1},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[m.jsx("span",{style:{background:p(E),color:"white",padding:"2px 8px",borderRadius:"4px",fontSize:"12px"},children:d(E)}),m.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:y(E.date)})]}),E.memo&&m.jsx("div",{style:{color:"var(--text)",fontSize:"14px",marginTop:"4px"},children:E.memo})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsxs("span",{style:{fontSize:"18px",fontWeight:"bold",color:"var(--danger)"},children:["¥",b(E.amount)]}),m.jsx("button",{className:"delete",onClick:()=>g(E.id),style:{padding:"8px"},children:m.jsx(Yf,{size:20})})]})]},E.id))}),m.jsx(HC,{isOpen:o,selectedYear:r,selectedMonth:i,onClose:()=>s(!1),onConfirm:w})]})},Kve=()=>m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"家計簿"}),m.jsx(qve,{}),m.jsx($ve,{}),m.jsx(Gve,{}),m.jsx("h3",{children:"支出履歴"}),m.jsx(Wve,{})]}),Xve={streak:"🔥 連続記録",milestone:"📊 マイルストーン",goal:"🎯 目標達成",feature:"✨ 機能活用"};function Yve(){const{badges:t,isUnlocked:e,getUnlockedCount:r,getTotalCount:n}=wA(),i=["streak","milestone","goal","feature"],a=o=>ov.filter(s=>s.category===o);return m.jsxs("div",{className:"badge-list",children:[m.jsxs("div",{className:"badge-summary",children:[m.jsxs("h3",{children:["バッジコレクション"," ",m.jsxs("span",{className:"badge-count",children:[r()," / ",n()]})]}),m.jsx("div",{className:"progress-bar",children:m.jsx("div",{className:"progress-fill",style:{width:`${r()/n()*100}%`}})})]}),i.map(o=>{const s=a(o);return m.jsxs("div",{className:"badge-category",children:[m.jsx("h4",{className:"category-title",children:Xve[o]}),m.jsx("div",{className:"badge-grid",children:s.map(c=>{const f=e(c.id),d=t.find(p=>p.id===c.id);return m.jsxs("div",{className:`badge-item ${f?"unlocked":"locked"}`,children:[m.jsx("div",{className:"badge-icon",children:f?c.icon:"🔒"}),m.jsxs("div",{className:"badge-info",children:[m.jsx("div",{className:"badge-name",children:c.name}),m.jsx("div",{className:"badge-description",children:c.description}),!f&&m.jsx("div",{className:"badge-requirement",children:c.requirement}),f&&d?.unlockedAt&&m.jsx("div",{className:"badge-unlocked-date",children:new Date(d.unlockedAt).toLocaleDateString("ja-JP")})]})]},c.id)})})]},o)})]})}function Qve(){return m.jsxs("section",{className:"screen active",children:[m.jsx("h2",{children:"🏆 アチーブメント"}),m.jsx("div",{className:"card",children:m.jsx(Yve,{})})]})}const Zve=({images:t,initialIndex:e=0,onClose:r})=>{const[n,i]=C.useState(e),a=()=>{i(c=>c>0?c-1:t.length-1)},o=()=>{i(c=>c<t.length-1?c+1:0)},s=c=>{c.target===c.currentTarget&&r()};return m.jsxs("div",{onClick:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.2s ease-out"},children:[m.jsx("button",{onClick:r,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:m.jsx(fs,{size:28})}),t.length>1&&m.jsxs("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:600,zIndex:1e4},children:[n+1," / ",t.length]}),t.length>1&&m.jsx("button",{onClick:a,style:{position:"absolute",left:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"52px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:m.jsx(mD,{size:32})}),t.length>1&&m.jsx("button",{onClick:o,style:{position:"absolute",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"50%",width:"52px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",transition:"background 0.2s",zIndex:1e4},onMouseEnter:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.2)"},onMouseLeave:c=>{c.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:m.jsx(cE,{size:32})}),m.jsx("img",{src:t[n],alt:`画像 ${n+1}`,style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",animation:"slideUp 0.3s ease-out"},onClick:c=>c.stopPropagation()})]})},Wv=({post:t,onPostClick:e,onUserClick:r,onQuoteRepost:n,showPinButton:i=!1,onPinToggle:a})=>{const{user:o}=As(),[s,c]=C.useState(!1),[f,d]=C.useState(!1),[p,g]=C.useState(!1),[y,b]=C.useState(t.likes),[w,E]=C.useState(t.repostCount),[S,I]=C.useState(!1),[O,D]=C.useState(!1),[k,B]=C.useState(0),[R,N]=C.useState(null),[L,U]=C.useState(!1);C.useEffect(()=>{(async()=>{if(o)try{const ge=await mk(t.id,o.uid),Ie=await qY(t.id,o.uid),G=await KY(t.id,o.uid);c(ge),d(Ie),g(G);const Z=await Fi(o.uid);N(Z)}catch(ge){console.error("ステータス確認エラー:",ge)}})()},[t.id,o]);const j=async K=>{if(K.stopPropagation(),!(!o||S||!R))try{I(!0),s?(await vk(t.id,o.uid),c(!1),b(Math.max(0,y-1))):(await gk(t.id,o.uid,R.displayName,R.avatarUrl),c(!0),b(y+1))}catch(ge){console.error("いいね操作エラー:",ge),alert("いいね操作に失敗しました")}finally{I(!1)}},V=K=>{K.stopPropagation(),e(t.id)},F=async K=>{if(K.stopPropagation(),!(!o||S||!R))try{I(!0),p?(await WY(t.id,o.uid),g(!1),E(Math.max(0,w-1))):(await GY(t.id,o.uid,R.displayName,R.avatarUrl),g(!0),E(w+1))}catch(ge){console.error("リポスト操作エラー:",ge),alert("リポスト操作に失敗しました")}finally{I(!1)}},he=async K=>{if(K.stopPropagation(),!(!o||S))try{I(!0),f?(await $Y(t.id,o.uid),d(!1)):(await HY(t.id,o.uid),d(!0))}catch(ge){console.error("ブックマーク操作エラー:",ge),alert("ブックマーク操作に失敗しました")}finally{I(!1)}},we=K=>{K.stopPropagation(),navigator.share?navigator.share({title:"投稿を共有",text:t.content}).catch(ge=>console.log("Share cancelled:",ge)):alert("この投稿をシェアしました！")},Y=K=>{K.stopPropagation(),n&&n(t.id)},ie=async K=>{if(K.stopPropagation(),!!o)try{I(!0),t.isPinned?(await JY(o.uid,t.id),alert("ピン留めを解除しました")):(await ZY(o.uid,t.id),alert("投稿をピン留めしました")),U(!1),a&&a()}catch(ge){console.error("ピン留め操作エラー:",ge),alert("ピン留め操作に失敗しました")}finally{I(!1)}};return m.jsxs("div",{className:"post-card",onClick:()=>e(t.id),style:{background:"var(--card)",borderRadius:"12px",padding:"16px",marginBottom:"12px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:K=>{K.currentTarget.style.transform="translateY(-2px)",K.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:K=>{K.currentTarget.style.transform="translateY(0)",K.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[t.isPinned&&m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"var(--primary)",fontSize:"13px",fontWeight:600,marginBottom:"12px"},children:[m.jsx(wI,{size:16}),m.jsx("span",{children:"ピン留めされた投稿"})]}),m.jsxs("div",{onClick:K=>{r&&(K.stopPropagation(),r(t.authorId))},style:{display:"flex",alignItems:"center",marginBottom:"12px",cursor:r?"pointer":"default",padding:"4px",marginLeft:"-4px",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:K=>{r&&(K.currentTarget.style.background="rgba(0, 0, 0, 0.05)")},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:[m.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:t.authorAvatar?`url(${t.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",marginRight:"12px",flexShrink:0}}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"15px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.authorName}),m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px"},children:Jh(t.createdAt)})]}),i&&m.jsxs("div",{style:{marginLeft:"auto",position:"relative"},children:[m.jsx("button",{onClick:K=>{K.stopPropagation(),U(!L)},style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="var(--border)"},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:m.jsx(Gz,{size:20})}),L&&m.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"4px",background:"var(--card)",border:"1px solid var(--border)",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",minWidth:"180px",zIndex:10},children:m.jsxs("button",{onClick:ie,disabled:S,style:{width:"100%",padding:"12px 16px",background:"none",border:"none",cursor:S?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",color:"var(--text)",fontSize:"14px",fontWeight:500,transition:"background 0.2s",opacity:S?.6:1},onMouseEnter:K=>{S||(K.currentTarget.style.background="var(--border)")},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:[m.jsx(wI,{size:18}),m.jsx("span",{children:t.isPinned?"ピン留めを解除":"プロフィールにピン留め"})]})})]})]}),t.replyToUserName&&m.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px",marginBottom:"8px"},children:[m.jsx("span",{style:{marginRight:"4px"},children:"💬"}),m.jsxs("span",{children:[t.replyToUserName,"さんへの返信"]})]}),m.jsx("div",{style:{color:"var(--text)",fontSize:"15px",lineHeight:"1.5",marginBottom:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.content.split(/(@[a-zA-Z0-9_]+)/g).map((K,ge)=>K.match(/^@[a-zA-Z0-9_]+$/)?m.jsx("span",{onClick:async Ie=>{Ie.stopPropagation();const G=K.substring(1);console.log("Mention clicked:",G);const Z=await lY(G);Z&&r?r(Z):console.warn("User not found:",G)},style:{color:"var(--primary)",cursor:"pointer",fontWeight:600},children:K},ge):K)}),t.recipeData&&m.jsxs("div",{style:{marginBottom:"12px",padding:"16px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",borderRadius:"12px",border:"2px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"20px"},children:"👨‍🍳"}),m.jsx("div",{style:{fontWeight:700,fontSize:"16px",color:"var(--text)"},children:t.recipeData.title}),m.jsx("div",{style:{marginLeft:"auto",padding:"4px 12px",background:"var(--primary)",color:"white",borderRadius:"12px",fontSize:"12px",fontWeight:600},children:t.recipeData.difficulty==="easy"?"簡単":t.recipeData.difficulty==="medium"?"普通":"難しい"})]}),m.jsx("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"12px"},children:t.recipeData.description}),m.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"13px",color:"var(--text-secondary)",marginBottom:"12px"},children:[m.jsxs("span",{children:["🍽️ ",t.recipeData.servings,"人分"]}),m.jsxs("span",{children:["⏱️ ",t.recipeData.preparationTime+t.recipeData.cookingTime,"分"]})]}),t.recipeData.ingredients&&t.recipeData.ingredients.length>0&&m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)",marginBottom:"8px"},children:"📝 材料"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"var(--text)",lineHeight:"1.8"},children:t.recipeData.ingredients.map((K,ge)=>m.jsx("li",{children:K},ge))})]}),t.recipeData.instructions&&t.recipeData.instructions.length>0&&m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)",marginBottom:"8px"},children:"👨‍🍳 作り方"}),m.jsx("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"13px",color:"var(--text)",lineHeight:"1.8"},children:t.recipeData.instructions.map((K,ge)=>m.jsx("li",{style:{marginBottom:"4px"},children:K},ge))})]})]}),t.quotedPost&&m.jsxs("div",{onClick:K=>{K.stopPropagation(),e(t.quotedPost.id)},style:{marginBottom:"12px",padding:"12px",background:"var(--background)",borderRadius:"12px",border:"1px solid var(--border)",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="var(--border)"},onMouseLeave:K=>{K.currentTarget.style.background="var(--background)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[m.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",background:t.quotedPost.authorAvatar?`url(${t.quotedPost.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsx("div",{style:{fontWeight:600,fontSize:"13px",color:"var(--text)"},children:t.quotedPost.authorName}),m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:Jh(t.quotedPost.createdAt)})]}),m.jsx("div",{style:{fontSize:"14px",color:"var(--text)",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",marginBottom:t.quotedPost.recipeData?"8px":"0"},children:t.quotedPost.content}),t.quotedPost.recipeData&&m.jsxs("div",{style:{marginBottom:"8px",padding:"8px",background:"rgba(22, 163, 74, 0.05)",borderRadius:"8px",border:"1px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"4px"},children:[m.jsx("span",{style:{fontSize:"14px"},children:"👨‍🍳"}),m.jsx("span",{style:{fontWeight:600,fontSize:"13px",color:"var(--text)"},children:t.quotedPost.recipeData.title})]}),m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:t.quotedPost.recipeData.description})]}),t.quotedPost.images&&t.quotedPost.images.length>0&&m.jsx("div",{style:{marginTop:"8px",width:"100%",paddingBottom:"40%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)"},children:m.jsx("img",{src:t.quotedPost.images[0],alt:"引用元画像",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})})]}),t.images&&t.images.length>0&&m.jsx("div",{style:{display:"grid",gridTemplateColumns:t.images.length===1?"1fr":(t.images.length===2,"repeat(2, 1fr)"),gap:"8px",marginBottom:"16px"},children:t.images.map((K,ge)=>m.jsx("div",{onClick:Ie=>{Ie.stopPropagation(),B(ge),D(!0)},style:{width:"100%",paddingBottom:t.images.length===1?"56.25%":"100%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)",cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:Ie=>{Ie.currentTarget.style.opacity="0.9"},onMouseLeave:Ie=>{Ie.currentTarget.style.opacity="1"},children:m.jsx("img",{src:K,alt:`投稿画像 ${ge+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},ge))}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",paddingTop:"12px",borderTop:"1px solid var(--border)"},children:[m.jsxs("button",{onClick:j,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:s?"#e91e63":"var(--text-secondary)",transition:"background 0.2s, color 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(233, 30, 99, 0.1)"},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:[s?m.jsx(cD,{size:20}):m.jsx(lD,{size:20}),m.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:Sf(y)})]}),m.jsxs("button",{onClick:V,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(33, 150, 243, 0.1)",K.currentTarget.style.color="#2196f3"},onMouseLeave:K=>{K.currentTarget.style.background="none",K.currentTarget.style.color="var(--text-secondary)"},children:[m.jsx(pD,{size:20}),m.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:Sf(t.commentCount)})]}),m.jsxs("button",{onClick:F,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:p?"#4caf50":"var(--text-secondary)",transition:"background 0.2s, color 0.2s",opacity:S?.6:1},onMouseEnter:K=>{K.currentTarget.style.background="rgba(76, 175, 80, 0.1)",p||(K.currentTarget.style.color="#4caf50")},onMouseLeave:K=>{K.currentTarget.style.background="none",p||(K.currentTarget.style.color="var(--text-secondary)")},children:[m.jsx(kz,{size:20}),m.jsx("span",{style:{fontSize:"14px",fontWeight:500},children:Sf(w)})]}),n&&m.jsx("button",{onClick:Y,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s, color 0.2s"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(76, 175, 80, 0.1)",K.currentTarget.style.color="#4caf50"},onMouseLeave:K=>{K.currentTarget.style.background="none",K.currentTarget.style.color="var(--text-secondary)"},children:m.jsx(Vz,{size:20})}),m.jsx("button",{onClick:he,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:f?"#ff9800":"var(--text-secondary)",transition:"background 0.2s, color 0.2s",opacity:S?.6:1},onMouseEnter:K=>{K.currentTarget.style.background="rgba(255, 152, 0, 0.1)",f||(K.currentTarget.style.color="#ff9800")},onMouseLeave:K=>{K.currentTarget.style.background="none",f||(K.currentTarget.style.color="var(--text-secondary)")},children:f?m.jsx(Sz,{size:20}):m.jsx(Az,{size:20})}),m.jsx("button",{onClick:we,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"4px 8px",borderRadius:"8px",color:"var(--text-secondary)",transition:"background 0.2s",marginLeft:"auto"},onMouseEnter:K=>{K.currentTarget.style.background="rgba(158, 158, 158, 0.1)"},onMouseLeave:K=>{K.currentTarget.style.background="none"},children:m.jsx(bD,{size:20})})]}),O&&t.images&&t.images.length>0&&m.jsx(Zve,{images:t.images,initialIndex:k,onClose:()=>D(!1)})]})},Wc=()=>m.jsxs("div",{style:{padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)"},children:[m.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--border)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{width:"120px",height:"16px",background:"var(--border)",borderRadius:"4px",marginBottom:"8px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"80px",height:"12px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{width:"100%",height:"12px",background:"var(--border)",borderRadius:"4px",marginBottom:"8px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"80%",height:"12px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}})]}),m.jsx("div",{style:{display:"flex",gap:"16px",marginTop:"12px"},children:[1,2,3,4].map(t=>m.jsx("div",{style:{width:"60px",height:"16px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}},t))}),m.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.5;
          }
        }
      `})]}),Jve=({onPostClick:t,onUserClick:e})=>{const{user:r}=As(),[n,i]=C.useState([]),[a,o]=C.useState(!0),[s,c]=C.useState(""),[f,d]=C.useState(!1),[p,g]=C.useState(void 0),[y,b]=C.useState("all"),w=async(O=y)=>{o(!0),c("");try{if(O==="following"&&r){console.log("📡 Fetching following posts...");const D=await XY(r.uid,20);console.log(`✅ Fetched ${D.length} following posts`),i(D)}else{console.log("📡 Fetching timeline posts...");const D=await UY(20);console.log(`✅ Fetched ${D.length} posts`),i(D)}}catch(D){console.error("❌ 投稿の取得に失敗しました:",D),console.error("Error details:",D.message,D.code),c(D.message||"タイムラインの取得に失敗しました")}finally{o(!1)}};C.useEffect(()=>{w(y)},[y,r]);const E=()=>{w()},S=O=>{g(O),d(!0)},I=()=>{d(!1),g(void 0)};return m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[m.jsx("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text)",margin:0},children:"タイムライン"}),m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("button",{onClick:()=>w(),disabled:a,style:{background:"none",border:"none",cursor:a?"not-allowed":"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:O=>{a||(O.currentTarget.style.background="var(--border)")},onMouseLeave:O=>{O.currentTarget.style.background="none"},children:m.jsx(Wz,{size:24})}),m.jsx("button",{onClick:()=>d(!0),style:{background:"linear-gradient(135deg, var(--primary), #81c784)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",boxShadow:"0 2px 8px rgba(76, 175, 80, 0.3)",transition:"transform 0.2s"},onMouseEnter:O=>{O.currentTarget.style.transform="scale(1.05)"},onMouseLeave:O=>{O.currentTarget.style.transform="scale(1)"},children:m.jsx(k1,{size:24})})]})]}),m.jsxs("div",{style:{display:"flex",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:"69px",zIndex:9},children:[m.jsx("button",{onClick:()=>b("all"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:y==="all"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:y==="all"?600:400,color:y==="all"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"すべて"}),m.jsx("button",{onClick:()=>b("following"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:y==="following"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:y==="following"?600:400,color:y==="following"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"フォロー中"})]}),m.jsx("div",{style:{padding:"16px"},children:s?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",background:"#ffebee",borderRadius:"12px",margin:"20px 0"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),m.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#c62828",marginBottom:"8px"},children:"タイムラインの取得に失敗しました"}),m.jsx("div",{style:{fontSize:"14px",color:"#d32f2f",marginBottom:"16px"},children:s}),m.jsx("button",{onClick:()=>w(),style:{padding:"10px 20px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"再試行"})]}):a?m.jsxs("div",{children:[m.jsx(Wc,{}),m.jsx(Wc,{}),m.jsx(Wc,{})]}):n.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:y==="following"?"👥":"📝"}),m.jsx("div",{style:{fontSize:"18px",fontWeight:600,marginBottom:"8px"},children:y==="following"?"フォロー中のユーザーの投稿がありません":"まだ投稿がありません"}),m.jsx("div",{style:{fontSize:"14px",marginBottom:"24px"},children:"最初の投稿をしてみましょう！"}),m.jsxs("button",{onClick:()=>d(!0),style:{padding:"12px 24px",background:"linear-gradient(135deg, var(--primary), #81c784)",color:"white",border:"none",borderRadius:"12px",fontSize:"15px",fontWeight:600,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",transition:"transform 0.2s"},onMouseEnter:O=>{O.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:O=>{O.currentTarget.style.transform="translateY(0)"},children:[m.jsx(k1,{size:20}),"投稿を作成"]})]}):m.jsx("div",{children:n.map(O=>m.jsx(Wv,{post:O,onPostClick:t,onUserClick:e,onQuoteRepost:S},O.id))})}),f&&m.jsx(yk,{onClose:I,onPostCreated:E,quotedPostId:p})]})},eme=({postId:t,onBack:e,onPostDeleted:r,onUserClick:n})=>{const{user:i}=As(),[a,o]=C.useState(null),[s,c]=C.useState([]),[f,d]=C.useState(!0),[p,g]=C.useState(!1),[y,b]=C.useState(0),[w,E]=C.useState(""),[S,I]=C.useState(!1),[O,D]=C.useState(null);C.useEffect(()=>{(async()=>{d(!0);try{const j=await Va(t);if(j){if(o(j),b(j.likes),i){const F=await mk(t,i.uid);g(F);const he=await Fi(i.uid);D(he)}const V=await L2(t);c(V)}else alert("投稿が見つかりません"),e()}catch(j){console.error("投稿の取得に失敗しました:",j),alert("投稿の取得に失敗しました"),e()}finally{d(!1)}})()},[t,e,i]);const k=async()=>{if(!(!i||!O))try{p?(await vk(t,i.uid),g(!1),b(Math.max(0,y-1))):(await gk(t,i.uid,O.displayName,O.avatarUrl),g(!0),b(y+1))}catch(U){console.error("いいね操作エラー:",U),alert("いいね操作に失敗しました")}},B=async()=>{if(!(!i||!a||!w.trim()||!O))try{I(!0),await FY(t,i.uid,O.displayName,w.trim(),O.avatarUrl);const U=await L2(t);c(U),E("")}catch(U){console.error("コメント追加エラー:",U),alert("コメントの追加に失敗しました")}finally{I(!1)}},R=async U=>{if(!(!i||!confirm("このコメントを削除しますか？")))try{await VY(t,U,i.uid);const j=await L2(t);c(j)}catch(j){console.error("コメント削除エラー:",j),alert("コメントの削除に失敗しました")}},N=async()=>{if(!(!i||!a)&&confirm("この投稿を削除しますか？"))try{await zY(t,i.uid),alert("投稿を削除しました"),r()}catch(U){console.error("投稿の削除に失敗しました:",U),alert("投稿の削除に失敗しました")}};if(f)return m.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),m.jsx("div",{children:"投稿を読み込んでいます..."})]});if(!a)return null;const L=i&&a.authorId===i.uid;return m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[m.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text)",transition:"background 0.2s"},onMouseEnter:U=>{U.currentTarget.style.background="var(--border)"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:m.jsx(Cp,{size:24})}),m.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:"投稿"}),L&&m.jsx("button",{onClick:N,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#f44336",transition:"background 0.2s"},onMouseEnter:U=>{U.currentTarget.style.background="#ffebee"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:m.jsx(Yf,{size:24})})]}),m.jsxs("div",{style:{padding:"20px"},children:[m.jsxs("div",{onClick:()=>n(a.authorId),style:{display:"flex",alignItems:"center",marginBottom:"16px",cursor:"pointer",padding:"8px",marginLeft:"-8px",borderRadius:"8px",transition:"background 0.2s"},onMouseEnter:U=>{U.currentTarget.style.background="var(--border)"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:[m.jsx("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:a.authorAvatar?`url(${a.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",marginRight:"12px",flexShrink:0}}),m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"16px"},children:a.authorName}),m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:Jh(a.createdAt)})]})]}),m.jsx("div",{style:{color:"var(--text)",fontSize:"16px",lineHeight:"1.6",marginBottom:"20px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:a.content}),a.recipeData&&m.jsxs("div",{style:{marginBottom:"20px",padding:"20px",background:"linear-gradient(135deg, rgba(22, 163, 74, 0.05), rgba(129, 199, 132, 0.05))",borderRadius:"12px",border:"2px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"16px"},children:[m.jsx("div",{style:{fontSize:"24px"},children:"👨‍🍳"}),m.jsx("div",{style:{fontWeight:700,fontSize:"18px",color:"var(--text)"},children:a.recipeData.title}),m.jsx("div",{style:{marginLeft:"auto",padding:"6px 16px",background:"var(--primary)",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:600},children:a.recipeData.difficulty==="easy"?"簡単":a.recipeData.difficulty==="medium"?"普通":"難しい"})]}),m.jsx("div",{style:{fontSize:"15px",color:"var(--text-secondary)",marginBottom:"12px"},children:a.recipeData.description}),m.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"14px",color:"var(--text-secondary)",marginBottom:"16px"},children:[m.jsxs("span",{children:["🍽️ ",a.recipeData.servings,"人分"]}),m.jsxs("span",{children:["⏱️ ",a.recipeData.preparationTime+a.recipeData.cookingTime,"分"]})]}),a.recipeData.ingredients&&a.recipeData.ingredients.length>0&&m.jsxs("div",{style:{marginBottom:"16px"},children:[m.jsx("div",{style:{fontWeight:600,fontSize:"15px",color:"var(--text)",marginBottom:"10px"},children:"📝 材料"}),m.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"var(--text)",lineHeight:"2"},children:a.recipeData.ingredients.map((U,j)=>m.jsx("li",{children:U},j))})]}),a.recipeData.instructions&&a.recipeData.instructions.length>0&&m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,fontSize:"15px",color:"var(--text)",marginBottom:"10px"},children:"👨‍🍳 作り方"}),m.jsx("ol",{style:{margin:0,paddingLeft:"20px",fontSize:"14px",color:"var(--text)",lineHeight:"2"},children:a.recipeData.instructions.map((U,j)=>m.jsx("li",{style:{marginBottom:"8px"},children:U},j))})]})]}),a.quotedPost&&m.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"var(--background)",borderRadius:"12px",border:"1px solid var(--border)"},children:[m.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"12px"},children:"引用元の投稿:"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:a.quotedPost.authorAvatar?`url(${a.quotedPost.authorAvatar}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:a.quotedPost.authorName}),m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:Jh(a.quotedPost.createdAt)})]})]}),m.jsx("div",{style:{fontSize:"15px",color:"var(--text)",lineHeight:"1.5",marginBottom:a.quotedPost.recipeData||a.quotedPost.images&&a.quotedPost.images.length>0?"12px":"0"},children:a.quotedPost.content}),a.quotedPost.recipeData&&m.jsxs("div",{style:{marginBottom:"12px",padding:"12px",background:"rgba(22, 163, 74, 0.05)",borderRadius:"8px",border:"1px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[m.jsx("span",{style:{fontSize:"16px"},children:"👨‍🍳"}),m.jsx("span",{style:{fontWeight:600,fontSize:"14px",color:"var(--text)"},children:a.quotedPost.recipeData.title})]}),m.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:a.quotedPost.recipeData.description})]}),a.quotedPost.images&&a.quotedPost.images.length>0&&m.jsx("div",{style:{width:"100%",paddingBottom:"56.25%",position:"relative",borderRadius:"8px",overflow:"hidden",background:"var(--border)"},children:m.jsx("img",{src:a.quotedPost.images[0],alt:"引用元画像",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})})]}),a.images&&a.images.length>0&&m.jsx("div",{style:{display:"grid",gridTemplateColumns:a.images.length===1?"1fr":(a.images.length===2,"repeat(2, 1fr)"),gap:"12px",marginBottom:"24px"},children:a.images.map((U,j)=>m.jsx("div",{style:{width:"100%",paddingBottom:a.images.length===1?"56.25%":"100%",position:"relative",borderRadius:"12px",overflow:"hidden",background:"var(--border)"},children:m.jsx("img",{src:U,alt:`投稿画像 ${j+1}`,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})},j))}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"32px",padding:"16px 0",borderTop:"1px solid var(--border)",borderBottom:"1px solid var(--border)"},children:[m.jsxs("button",{onClick:k,style:{background:"none",border:"none",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",padding:"8px 12px",borderRadius:"12px",color:p?"#e91e63":"var(--text-secondary)",transition:"background 0.2s",fontSize:"16px"},onMouseEnter:U=>{U.currentTarget.style.background="rgba(233, 30, 99, 0.1)"},onMouseLeave:U=>{U.currentTarget.style.background="none"},children:[p?m.jsx(cD,{size:24}):m.jsx(lD,{size:24}),m.jsx("span",{style:{fontWeight:600},children:y})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"var(--text-secondary)",fontSize:"16px"},children:[m.jsx(pD,{size:24}),m.jsx("span",{style:{fontWeight:600},children:a.commentCount})]})]}),m.jsxs("div",{style:{marginTop:"24px"},children:[i&&m.jsx("div",{style:{marginBottom:"24px"},children:m.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-end",padding:"12px",background:"var(--card)",borderRadius:"12px",border:"1px solid var(--border)"},children:[m.jsx("textarea",{value:w,onChange:U=>E(U.target.value),placeholder:"コメントを入力...",style:{flex:1,padding:"12px",border:"1px solid var(--border)",borderRadius:"8px",background:"var(--background)",color:"var(--text)",fontFamily:"inherit",fontSize:"14px",resize:"vertical",minHeight:"44px",maxHeight:"120px",outline:"none"},onFocus:U=>{U.currentTarget.style.borderColor="var(--primary)"},onBlur:U=>{U.currentTarget.style.borderColor="var(--border)"}}),m.jsx("button",{onClick:B,disabled:S||!w.trim(),style:{background:w.trim()?"var(--primary)":"var(--border)",border:"none",color:w.trim()?"white":"var(--text-secondary)",padding:"12px 16px",borderRadius:"8px",cursor:w.trim()&&!S?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:m.jsx(Bz,{size:20})})]})}),m.jsx("div",{style:{marginTop:"20px"},children:s.length>0?m.jsxs("div",{children:[m.jsxs("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:"var(--text)"},children:["コメント (",s.length,")"]}),s.map(U=>m.jsxs("div",{style:{padding:"12px",background:"var(--background)",borderRadius:"8px",marginBottom:"12px",borderLeft:"2px solid var(--primary)"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"14px"},children:U.userName}),m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px"},children:Jh(U.createdAt)})]}),i&&i.uid===U.userId&&m.jsx("button",{onClick:()=>R(U.id),style:{background:"none",border:"none",color:"#f44336",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",transition:"background 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="#ffebee"},onMouseLeave:j=>{j.currentTarget.style.background="none"},children:"削除"})]}),m.jsx("div",{style:{color:"var(--text)",fontSize:"14px",lineHeight:"1.5",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:U.content})]},U.id))]}):m.jsx("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)",background:"var(--background)",borderRadius:"12px"},children:m.jsx("div",{style:{fontSize:"14px"},children:"コメントはまだありません"})})})]})]})]})},tme=({userId:t,onClose:e,onUserClick:r})=>{const{user:n}=As(),[i,a]=C.useState([]),[o,s]=C.useState(!0),[c,f]=C.useState(null);C.useEffect(()=>{(async()=>{s(!0);try{const y=await cY(t);a(y)}catch(y){console.error("Failed to fetch followers:",y)}finally{s(!1)}})()},[t]);const d=async(g,y,b)=>{if(n){f(g);try{const w=await Fi(n.uid);if(!w)return;await AA(n.uid,w.displayName,w.avatarUrl,g,y),a(E=>E.map((S,I)=>I===b?{...S,isFollowing:!0}:S))}catch(w){console.error("Follow failed:",w)}finally{f(null)}}},p=async(g,y)=>{if(n){f(g);try{await SA(n.uid,g),a(b=>b.map((w,E)=>E===y?{...w,isFollowing:!1}:w))}catch(b){console.error("Unfollow failed:",b)}finally{f(null)}}};return m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",animation:"fadeIn 0.2s ease-out"},onClick:e,children:m.jsxs("div",{style:{background:"var(--card)",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",animation:"slideUp 0.3s ease-out"},onClick:g=>g.stopPropagation(),children:[m.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:"フォロワー"}),m.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:g=>{g.currentTarget.style.background="var(--border)"},onMouseLeave:g=>{g.currentTarget.style.background="none"},children:m.jsx(fs,{size:24})})]}),m.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:o?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),m.jsx("div",{children:"読み込み中..."})]}):i.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"👥"}),m.jsx("div",{children:"フォロワーはまだいません"})]}):m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map((g,y)=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",transition:"background 0.2s",cursor:"pointer"},onMouseEnter:b=>{b.currentTarget.style.background="var(--border)"},onMouseLeave:b=>{b.currentTarget.style.background="transparent"},onClick:()=>{r(g.uid),e()},children:[m.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:g.avatarUrl?`url(${g.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",flexShrink:0}}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)"},children:g.displayName}),m.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["@",g.username]}),g.bio&&m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.bio})]}),n&&n.uid!==g.uid&&m.jsx("button",{onClick:b=>{b.stopPropagation(),g.isFollowing?p(g.uid,y):d(g.uid,g.displayName,y)},disabled:c===g.uid,style:{padding:"6px 16px",background:g.isFollowing?"var(--card)":"var(--primary)",border:g.isFollowing?"2px solid var(--border)":"none",borderRadius:"20px",color:g.isFollowing?"var(--text)":"white",fontSize:"13px",fontWeight:600,cursor:c===g.uid?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:c===g.uid?.6:1,transition:"all 0.2s",flexShrink:0},children:g.isFollowing?m.jsxs(m.Fragment,{children:[m.jsx(fE,{size:14}),"フォロー中"]}):m.jsxs(m.Fragment,{children:[m.jsx(uE,{size:14}),"フォロー"]})})]},g.uid))})})]})})},rme=({userId:t,onClose:e,onUserClick:r})=>{const{user:n}=As(),[i,a]=C.useState([]),[o,s]=C.useState(!0),[c,f]=C.useState(null);C.useEffect(()=>{(async()=>{s(!0);try{const y=await dk(t);a(y)}catch(y){console.error("Failed to fetch following:",y)}finally{s(!1)}})()},[t]);const d=async(g,y,b)=>{if(n){f(g);try{const w=await Fi(n.uid);if(!w)return;await AA(n.uid,w.displayName,w.avatarUrl,g,y),a(E=>E.map((S,I)=>I===b?{...S,isFollowing:!0}:S))}catch(w){console.error("Follow failed:",w)}finally{f(null)}}},p=async(g,y)=>{if(n){f(g);try{await SA(n.uid,g),a(b=>b.map((w,E)=>E===y?{...w,isFollowing:!1}:w))}catch(b){console.error("Unfollow failed:",b)}finally{f(null)}}};return m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",animation:"fadeIn 0.2s ease-out"},onClick:e,children:m.jsxs("div",{style:{background:"var(--card)",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",animation:"slideUp 0.3s ease-out"},onClick:g=>g.stopPropagation(),children:[m.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:"フォロー中"}),m.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-secondary)",transition:"background 0.2s"},onMouseEnter:g=>{g.currentTarget.style.background="var(--border)"},onMouseLeave:g=>{g.currentTarget.style.background="none"},children:m.jsx(fs,{size:24})})]}),m.jsx("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:o?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),m.jsx("div",{children:"読み込み中..."})]}):i.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"👥"}),m.jsx("div",{children:"まだ誰もフォローしていません"})]}):m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:i.map((g,y)=>m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"12px",transition:"background 0.2s",cursor:"pointer"},onMouseEnter:b=>{b.currentTarget.style.background="var(--border)"},onMouseLeave:b=>{b.currentTarget.style.background="transparent"},onClick:()=>{r(g.uid),e()},children:[m.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:g.avatarUrl?`url(${g.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",flexShrink:0}}),m.jsxs("div",{style:{flex:1,minWidth:0},children:[m.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"var(--text)"},children:g.displayName}),m.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:["@",g.username]}),g.bio&&m.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.bio})]}),g&&g.uid!==g.uid&&m.jsx("button",{onClick:b=>{b.stopPropagation(),g.isFollowing?p(g.uid,y):d(g.uid,g.displayName,y)},disabled:c===g.uid,style:{padding:"6px 16px",background:g.isFollowing?"var(--card)":"var(--primary)",border:g.isFollowing?"2px solid var(--border)":"none",borderRadius:"20px",color:g.isFollowing?"var(--text)":"white",fontSize:"13px",fontWeight:600,cursor:c===g.uid?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:c===g.uid?.6:1,transition:"all 0.2s",flexShrink:0},children:g.isFollowing?m.jsxs(m.Fragment,{children:[m.jsx(fE,{size:14}),"フォロー中"]}):m.jsxs(m.Fragment,{children:[m.jsx(uE,{size:14}),"フォロー"]})})]},g.uid))})})]})})},nme=({userId:t,onBack:e,onPostClick:r})=>{const{user:n}=As(),[i,a]=C.useState(null),[o,s]=C.useState([]),[c,f]=C.useState(null),[d,p]=C.useState(!0),[g,y]=C.useState(!1),[b,w]=C.useState(null),[E,S]=C.useState(!1),[I,O]=C.useState(!1),[D,k]=C.useState(!1),[B,R]=C.useState("posts"),N=n&&n.uid===t;C.useEffect(()=>{(async()=>{p(!0),w(null);try{const V=await Fi(t);if(!V){w("プロフィールが見つかりません");return}if(a(V),n&&n.uid!==t){const F=await CA(n.uid,t);S(F)}}catch(V){console.error("[UserProfileScreen] プロフィールの取得に失敗しました:",V),w(V instanceof Error?V.message:"プロフィールの取得に失敗しました")}finally{p(!1)}})()},[t,n]),C.useEffect(()=>{(async()=>{if(i){y(!0);try{console.log(`[UserProfileScreen] Fetching ${B} posts for user: ${t}`);let V=[];switch(B){case"posts":if(V=await pk(t,20),i.pinnedPostId)try{const F=await Va(i.pinnedPostId);f(F),V=V.filter(he=>he.id!==i.pinnedPostId)}catch(F){console.error("[UserProfileScreen] ピン留め投稿の取得に失敗:",F),f(null)}else f(null);break;case"media":V=await YY(t,20),f(null);break;case"likes":V=await QY(t,20),f(null);break;case"replies":V=await eQ(t,20),f(null);break}console.log(`[UserProfileScreen] Received ${V.length} ${B} posts`),s(V)}catch(V){console.error(`[UserProfileScreen] ${B}投稿の取得に失敗しました:`,V)}finally{y(!1)}}})()},[t,B,i]);const L=async()=>{if(!n||!i)return;const j=E,V={...i};S(!E),a({...i,stats:{...i.stats,followerCount:E?i.stats.followerCount-1:i.stats.followerCount+1}});try{j?(console.log(`[UserProfile] Unfollowing: ${n.uid} X ${t}`),await SA(n.uid,t)):(console.log(`[UserProfile] Following: ${n.uid} → ${t}`),await AA(n.uid,n.displayName||"Anonymous",n.photoURL||void 0,t,i.displayName)),console.log("✅ [UserProfile] Follow operation completed successfully")}catch(F){console.error("❌ [UserProfile] Follow operation failed:",F),console.error("❌ [UserProfile] Error details:",F.message,F.code),S(j),a(V);const he=F.message||F.code||"不明なエラー";alert(`フォロー操作に失敗しました。

エラー: ${he}

もう一度お試しください。`)}},U=async()=>{try{const j=await Fi(t);j&&a(j)}catch(j){console.error("[UserProfileScreen] プロフィールの再取得に失敗:",j)}};return d?m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)"},children:[m.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"var(--border)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"120px",height:"18px",background:"var(--border)",borderRadius:"4px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"24px"}})]}),m.jsx("div",{style:{width:"100%",height:"150px",background:"var(--border)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsxs("div",{style:{padding:"0 20px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",marginTop:"-40px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"var(--border)",border:"4px solid var(--card)",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"100px",height:"32px",background:"var(--border)",borderRadius:"20px",animation:"pulse 1.5s ease-in-out infinite"}})]}),m.jsx("div",{style:{width:"150px",height:"20px",background:"var(--border)",borderRadius:"4px",marginBottom:"8px",animation:"pulse 1.5s ease-in-out infinite"}}),m.jsx("div",{style:{width:"100px",height:"14px",background:"var(--border)",borderRadius:"4px",marginBottom:"16px",animation:"pulse 1.5s ease-in-out infinite"}})]}),m.jsxs("div",{style:{marginTop:"20px"},children:[m.jsx(Wc,{}),m.jsx(Wc,{})]}),m.jsx("style",{children:`
          @keyframes pulse {
            0%, 100% {
              opacity: 1;
            }
            50% {
              opacity: 0.5;
            }
          }
        `})]}):b||!i?m.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),m.jsx("div",{style:{fontSize:"16px",color:"var(--text)",marginBottom:"16px"},children:b||"プロフィールが見つかりません"}),m.jsx("button",{onClick:e,style:{padding:"10px 20px",background:"var(--primary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:600},children:"戻る"})]}):m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:[m.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text)",transition:"background 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="var(--border)"},onMouseLeave:j=>{j.currentTarget.style.background="none"},children:m.jsx(Cp,{size:24})}),m.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text)",margin:0},children:i.displayName}),m.jsx("div",{style:{width:"40px"}})," "]}),m.jsx("div",{style:{width:"100%",height:"150px",background:i.coverUrl?`url(${i.coverUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsxs("div",{style:{padding:"0 20px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",marginTop:"-40px",marginBottom:"12px"},children:[m.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:i.avatarUrl?`url(${i.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)",border:"4px solid var(--card)"}}),N?m.jsxs("div",{style:{padding:"8px 16px",background:"var(--card)",border:"2px solid var(--border)",borderRadius:"20px",color:"var(--text-secondary)",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px"},children:[m.jsx(vD,{size:14}),"設定画面から編集できます"]}):m.jsx("button",{onClick:L,style:{padding:"8px 16px",background:E?"var(--card)":"var(--primary)",border:E?"2px solid var(--border)":"none",borderRadius:"20px",color:E?"var(--text)":"white",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:E?m.jsxs(m.Fragment,{children:[m.jsx(fE,{size:16}),"フォロー中"]}):m.jsxs(m.Fragment,{children:[m.jsx(uE,{size:16}),"フォロー"]})})]}),m.jsxs("div",{style:{marginBottom:"12px"},children:[m.jsx("div",{style:{fontSize:"20px",fontWeight:700,color:"var(--text)",marginBottom:"4px"},children:i.displayName}),m.jsxs("div",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:["@",i.username]})]}),i.bio&&m.jsx("div",{style:{fontSize:"14px",color:"var(--text)",lineHeight:"1.5",marginBottom:"12px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:i.bio}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginBottom:"12px"},children:[i.websiteUrl&&m.jsxs("a",{href:i.websiteUrl,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"var(--primary)",textDecoration:"none"},children:[m.jsx(gD,{size:16}),i.websiteUrl.replace(/^https?:\/\//,"")]}),m.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"14px",color:"var(--text-secondary)"},children:[m.jsx(Sp,{size:16}),kY(i.createdAt)]})]}),m.jsxs("div",{style:{display:"flex",gap:"16px",padding:"16px 0",borderBottom:"1px solid var(--border)"},children:[m.jsxs("div",{children:[m.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:Sf(i.stats.postCount)}),m.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"投稿"})]}),m.jsxs("div",{onClick:()=>O(!0),style:{cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="var(--border)"},onMouseLeave:j=>{j.currentTarget.style.background="transparent"},children:[m.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:Sf(i.stats.followerCount)}),m.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"フォロワー"})]}),m.jsxs("div",{onClick:()=>k(!0),style:{cursor:"pointer",padding:"4px",borderRadius:"4px",transition:"background 0.2s"},onMouseEnter:j=>{j.currentTarget.style.background="var(--border)"},onMouseLeave:j=>{j.currentTarget.style.background="transparent"},children:[m.jsx("span",{style:{fontWeight:700,color:"var(--text)",marginRight:"4px"},children:Sf(i.stats.followingCount)}),m.jsx("span",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:"フォロー中"})]})]})]}),m.jsxs("div",{style:{display:"flex",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:"69px",zIndex:9},children:[m.jsx("button",{onClick:()=>R("posts"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:B==="posts"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:B==="posts"?600:400,color:B==="posts"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"投稿"}),m.jsx("button",{onClick:()=>R("replies"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:B==="replies"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:B==="replies"?600:400,color:B==="replies"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"返信"}),m.jsx("button",{onClick:()=>R("media"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:B==="media"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:B==="media"?600:400,color:B==="media"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"メディア"}),m.jsx("button",{onClick:()=>R("likes"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:B==="likes"?"3px solid var(--primary)":"3px solid transparent",cursor:"pointer",fontSize:"15px",fontWeight:B==="likes"?600:400,color:B==="likes"?"var(--primary)":"var(--text-secondary)",transition:"all 0.2s"},children:"いいね"})]}),m.jsx("div",{style:{marginTop:"0"},children:g?m.jsxs("div",{children:[m.jsx(Wc,{}),m.jsx(Wc,{})]}):o.length===0?m.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:B==="media"?"📷":B==="likes"?"❤️":B==="replies"?"💬":"📝"}),m.jsxs("div",{style:{fontSize:"16px"},children:[B==="posts"&&(N?"まだ投稿がありません":"このユーザーはまだ投稿していません"),B==="replies"&&(N?"返信はまだありません":"このユーザーはまだ返信していません"),B==="media"&&(N?"画像付き投稿はまだありません":"このユーザーはまだ画像を投稿していません"),B==="likes"&&(N?"まだいいねした投稿がありません":"このユーザーのいいねは非公開です")]})]}):m.jsxs("div",{children:[B==="posts"&&c&&m.jsx(Wv,{post:c,onPostClick:r,onUserClick:j=>{console.log("User clicked:",j,"Current userId:",t)},showPinButton:!!N,onPinToggle:U},c.id),o.map(j=>m.jsx(Wv,{post:j,onPostClick:r,onUserClick:V=>{console.log("User clicked:",V,"Current userId:",t)},showPinButton:!!N&&B==="posts",onPinToggle:U},j.id))]})}),I&&m.jsx(tme,{userId:t,onClose:()=>O(!1),onUserClick:j=>{console.log("Navigate to user:",j)}}),D&&m.jsx(rme,{userId:t,onClose:()=>k(!1),onUserClick:j=>{console.log("Navigate to user:",j)}})]})},ime=async(t,e=20)=>{try{if(!t.trim())return[];const r=Ve(ve,"users"),n=[],i=Ct(r,Vr("username",">=",t.toLowerCase()),Vr("username","<=",t.toLowerCase()+""),Ao(e)),a=await vt(i);for(const c of a.docs){const f=await vt(Ve(c.ref,"profile"));if(!f.empty){const d=f.docs[0].data();n.push(d)}}const o=Ct(r,Vr("displayName",">=",t),Vr("displayName","<=",t+""),Ao(e)),s=await vt(o);for(const c of s.docs){const f=await vt(Ve(c.ref,"profile"));if(!f.empty){const d=f.docs[0].data();n.find(p=>p.uid===d.uid)||n.push(d)}}return n.slice(0,e)}catch(r){return console.error("ユーザー検索エラー:",r),[]}},ame=async(t,e=20)=>{try{if(!t.trim())return[];const r=Ve(ve,"posts"),n=Ct(r,Vr("visibility","==","public"),$r("createdAt","desc"),Ao(100)),i=await vt(n),a=[];return i.forEach(o=>{const s=o.data(),c={id:o.id,content:s.content,images:s.images||[],authorId:s.authorId,authorName:s.authorName,authorAvatar:s.authorAvatar||"",likes:s.likes||0,commentCount:s.commentCount||0,repostCount:s.repostCount||0,hashtags:s.hashtags||[],visibility:s.visibility,createdAt:s.createdAt?.toDate?.()?.toISOString()||s.createdAt,updatedAt:s.updatedAt?.toDate?.()?.toISOString()||s.updatedAt},f=t.toLowerCase();(c.content.toLowerCase().includes(f)||c.authorName.toLowerCase().includes(f))&&a.push(c)}),a.slice(0,e)}catch(r){return console.error("投稿検索エラー:",r),[]}},tD=async(t,e=20)=>{try{if(!t.trim())return[];const r=t.startsWith("#")?t.slice(1):t,n=Ve(ve,"posts"),i=Ct(n,Vr("visibility","==","public"),Vr("hashtags","array-contains",r),$r("createdAt","desc"),Ao(e)),a=await vt(i),o=[];return a.forEach(s=>{const c=s.data();o.push({id:s.id,content:c.content,images:c.images||[],authorId:c.authorId,authorName:c.authorName,authorAvatar:c.authorAvatar||"",likes:c.likes||0,commentCount:c.commentCount||0,repostCount:c.repostCount||0,hashtags:c.hashtags||[],visibility:c.visibility,createdAt:c.createdAt?.toDate?.()?.toISOString()||c.createdAt,updatedAt:c.updatedAt?.toDate?.()?.toISOString()||c.updatedAt})}),o}catch(r){return console.error("ハッシュタグ検索エラー:",r),[]}},ome=t=>{const e=["の","に","は","を","た","が","で","て","と","し","れ","さ","ある","いる","も","する","から","な","こと","として","い","や","れる","など","なっ","ない","この","ため","その","あっ","よう","また","もの","という","あり","まで","られ","なる","へ","か","だ","これ","によって","により","おり","より","による","ず","なり","られる","において","ば","なかっ","なく","しかし","について","せ","だっ","その後","できる","それ","う","ので","なお","のみ","でき","き","つ","における","および","いう","さらに","でも","ら","たり","その他","に関する","たち","ます","ん","なら","に対して","特に","せる","及び","これら","とき","では","にて","ほか","ながら","うち","そして","とも","として","のか","のに","ほど","ものの","という","ところ","による","もん","です","ました","でした","ある","いる","する","なる","くる","やる","いく","できる","なら","だろ","でしょ","です","ます","ません","ましょ","なり","たい","たら","なくて","なけれ"];let r=t.replace(/https?:\/\/[^\s]+/g,"");r=r.replace(/@[a-zA-Z0-9_]+/g,""),r=r.replace(/#[^\s]+/g,""),r=r.replace(/[!-/:-@[-`{-~、。！？「」『』（）]/g," ");const n=r.split(/\s+/).filter(c=>c.length>0),i=[],a=/[ぁ-んァ-ヶー一-龠々]+/g,o=r.match(a);o&&o.forEach(c=>{c.length>=2&&(e.includes(c)||i.push(c))});const s=n.filter(c=>c.match(/^[a-zA-Z0-9]+$/)&&c.length>=3);return[...i,...s]},sme=async(t=10)=>{try{const e=Ve(ve,"posts"),r=Ct(e,Vr("visibility","==","public"),$r("createdAt","desc"),Ao(200)),n=await vt(r),i={};return n.forEach(o=>{const s=o.data();(s.hashtags||[]).forEach(p=>{i[`#${p}`]=(i[`#${p}`]||0)+2});const f=s.content||"";ome(f).forEach(p=>{i[p]=(i[p]||0)+1})}),Object.entries(i).map(([o,s])=>({tag:o,count:s})).sort((o,s)=>s.count-o.count).slice(0,t)}catch(e){return console.error("トレンドキーワード取得エラー:",e),[]}},lme=({onPostClick:t,onUserClick:e})=>{const[r,n]=C.useState(""),[i,a]=C.useState("all"),[o,s]=C.useState([]),[c,f]=C.useState([]),[d,p]=C.useState([]),[g,y]=C.useState(!1);C.useEffect(()=>{(async()=>{const S=await sme(10);p(S)})()},[]);const b=async()=>{if(r.trim()){y(!0);try{if(r.startsWith("#")){const E=await tD(r,20);f(E),s([]),a("hashtags")}else{const[E,S]=await Promise.all([ime(r,10),ame(r,20)]);s(E),f(S),a("all")}}catch(E){console.error("検索エラー:",E)}finally{y(!1)}}},w=async E=>{n(`#${E}`),y(!0);try{const S=await tD(E,20);f(S),s([]),a("hashtags")}catch(S){console.error("ハッシュタグ検索エラー:",S)}finally{y(!1)}};return m.jsxs("div",{style:{paddingBottom:"80px"},children:[m.jsx("div",{style:{padding:"16px 20px",background:"var(--card)",borderBottom:"1px solid var(--border)",position:"sticky",top:0,zIndex:10},children:m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",background:"var(--background)",padding:"12px 16px",borderRadius:"24px",border:"1px solid var(--border)"},children:[m.jsx(fD,{size:24,style:{color:"var(--text-secondary)"}}),m.jsx("input",{type:"text",placeholder:"ユーザー、投稿、#ハッシュタグを検索",value:r,onChange:E=>n(E.target.value),onKeyDown:E=>{E.key==="Enter"&&b()},style:{flex:1,border:"none",background:"none",outline:"none",color:"var(--text)",fontSize:"15px",fontFamily:"inherit"}}),m.jsx("button",{onClick:b,style:{background:"var(--primary)",color:"white",border:"none",borderRadius:"16px",padding:"6px 16px",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:E=>{E.currentTarget.style.opacity="0.9"},onMouseLeave:E=>{E.currentTarget.style.opacity="1"},children:"検索"})]})}),r&&m.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--card)"},children:["all","users","posts","hashtags"].map(E=>m.jsxs("button",{onClick:()=>a(E),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:i===E?"2px solid var(--primary)":"2px solid transparent",color:i===E?"var(--primary)":"var(--text-secondary)",fontWeight:i===E?600:400,cursor:"pointer",transition:"all 0.2s",fontSize:"15px"},children:[E==="all"&&"すべて",E==="users"&&"ユーザー",E==="posts"&&"投稿",E==="hashtags"&&"ハッシュタグ"]},E))}),g&&m.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid var(--border)",borderTop:"4px solid var(--primary)",borderRadius:"50%",margin:"0 auto 16px",animation:"spin 1s linear infinite"}}),m.jsx("div",{children:"検索中..."})]}),!g&&r&&m.jsxs("div",{style:{padding:"20px"},children:[(i==="all"||i==="users")&&o.length>0&&m.jsxs("div",{style:{marginBottom:"32px"},children:[m.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Of,{size:24}),"ユーザー (",o.length,")"]}),o.map(E=>m.jsxs("div",{onClick:()=>e(E.uid),style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"var(--card)",borderRadius:"12px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:S=>{S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:S=>{S.currentTarget.style.transform="translateY(0)",S.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"50%",background:E.avatarUrl?`url(${E.avatarUrl}) center/cover`:"linear-gradient(135deg, var(--primary), #81c784)"}}),m.jsxs("div",{style:{flex:1},children:[m.jsx("div",{style:{fontWeight:600,color:"var(--text)",fontSize:"15px"},children:E.displayName}),m.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:["@",E.username]}),E.bio&&m.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"13px",marginTop:"4px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:E.bio})]})]},E.uid))]}),(i==="all"||i==="posts"||i==="hashtags")&&c.length>0&&m.jsxs("div",{children:[m.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(Ez,{size:24}),"投稿 (",c.length,")"]}),c.map(E=>m.jsx(Wv,{post:E,onPostClick:t,onUserClick:e},E.id))]}),o.length===0&&c.length===0&&m.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)"},children:[m.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"検索結果が見つかりません"}),m.jsx("div",{style:{fontSize:"14px"},children:"別のキーワードで試してみてください"})]})]}),!r&&!g&&m.jsxs("div",{style:{padding:"20px"},children:[m.jsxs("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text)",display:"flex",alignItems:"center",gap:"8px"},children:[m.jsx(oE,{size:24}),"トレンド"]}),d.map((E,S)=>m.jsxs("div",{onClick:()=>w(E.tag),style:{padding:"16px",background:"var(--card)",borderRadius:"12px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseEnter:I=>{I.currentTarget.style.transform="translateY(-2px)",I.currentTarget.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.15)"},onMouseLeave:I=>{I.currentTarget.style.transform="translateY(0)",I.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[m.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginBottom:"4px"},children:[S+1,"位・トレンド"]}),m.jsxs("div",{style:{fontSize:"16px",fontWeight:600,color:"var(--text)",marginBottom:"4px"},children:["#",E.tag]}),m.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[E.count,"件の投稿"]})]},E.tag))]})]})},cme=()=>{const[t,e]=C.useState("timeline"),[r,n]=C.useState("main"),[i,a]=C.useState(null),[o,s]=C.useState(null),c=g=>{a(g),n("post-detail")},f=g=>{s(g),n("profile")},d=()=>{n("main"),a(null),s(null)},p=()=>{n("main"),a(null)};return r==="profile"&&o?m.jsx(nme,{userId:o,onBack:d,onPostClick:c}):r==="post-detail"&&i?m.jsx(eme,{postId:i,onBack:d,onPostDeleted:p,onUserClick:f}):m.jsxs("div",{children:[m.jsxs("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",background:"var(--card)",position:"sticky",top:0,zIndex:10},children:[m.jsxs("button",{onClick:()=>e("timeline"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="timeline"?"2px solid var(--primary)":"2px solid transparent",color:t==="timeline"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="timeline"?600:400},children:[m.jsx(Oz,{size:20}),"タイムライン"]}),m.jsxs("button",{onClick:()=>e("search"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="search"?"2px solid var(--primary)":"2px solid transparent",color:t==="search"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="search"?600:400},children:[m.jsx(fD,{size:20}),"検索"]}),m.jsxs("button",{onClick:()=>e("notifications"),style:{flex:1,padding:"16px",background:"none",border:"none",borderBottom:t==="notifications"?"2px solid var(--primary)":"2px solid transparent",color:t==="notifications"?"var(--primary)":"var(--text-secondary)",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"15px",fontWeight:t==="notifications"?600:400},children:[m.jsx(EI,{size:20}),"通知"]})]}),t==="timeline"&&m.jsx(Jve,{onPostClick:c,onUserClick:f}),t==="search"&&m.jsx(lme,{onPostClick:c,onUserClick:f}),t==="notifications"&&m.jsxs("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-secondary)"},children:[m.jsx(EI,{size:48,style:{marginBottom:"16px",opacity:.5}}),m.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"通知機能"}),m.jsx("div",{style:{fontSize:"14px"},children:"Phase 6で実装予定"})]})]})},ume=()=>{const[t,e]=C.useState("home"),r=i=>({home:"健康家計アプリ",meals:"食事記録",barcode:"バーコードスキャン",report:"レポート",social:"ソーシャル",settings:"設定",stock:"在庫管理",shopping:"買い物リスト",recipe:"AIレシピ",expense:"家計簿",badges:"アチーブメント"})[i],n=()=>{switch(t){case"home":return m.jsx(d6,{onNavigate:e});case"meals":return m.jsx(eY,{});case"barcode":return m.jsx(Zee,{onNavigateToStock:()=>e("stock")});case"report":return m.jsx(Vve,{});case"social":return m.jsx(cme,{});case"settings":return m.jsx(pY,{});case"stock":return m.jsx(yY,{});case"shopping":return m.jsx(CY,{});case"recipe":return m.jsx(tQ,{});case"expense":return m.jsx(Kve,{});case"badges":return m.jsx(Qve,{});default:return m.jsx(d6,{onNavigate:e})}};return m.jsxs(m.Fragment,{children:[m.jsx(fz,{title:r(t)}),m.jsx("main",{children:n()}),m.jsx(Yz,{currentScreen:t,onNavigate:e})]})};function fme(t){return Ee({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}const dme="modulepreload",hme=function(t){return"/life-pwa-react/"+t},rD={},Kf=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var o=f;document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");i=f(r.map(d=>{if(d=hme(d),d in rD)return;rD[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":dme,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((b,w)=>{y.addEventListener("load",b),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return i.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Kv=()=>Math.floor(1e5+Math.random()*9e5).toString(),Xv=async(t,e)=>{const r=Ue(Ve(ve,"verificationCodes"),t),n=new Date;n.setMinutes(n.getMinutes()+10),await Xl(r,{code:e,email:t,expiresAt:n.toISOString(),createdAt:new Date().toISOString()})},wB=async(t,e)=>{try{const r=Ue(Ve(ve,"verificationCodes"),t),n=await Ro(r);if(!n.exists())return{valid:!1,error:"確認コードが見つかりません。再送信してください。"};const i=n.data();return new Date(i.expiresAt)<new Date?(await Ui(r),{valid:!1,error:"確認コードの有効期限が切れています。再送信してください。"}):i.code!==e?{valid:!1,error:"確認コードが正しくありません。"}:(await Ui(r),{valid:!0})}catch(r){return console.error("Code verification error:",r),{valid:!1,error:"確認に失敗しました。もう一度お試しください。"}}},nD=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Kf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>dA);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Kf(async()=>{const{default:c}=await Promise.resolve().then(()=>_A);return{default:c}},void 0),a=r(i),s=await n(a,"sendVerificationEmail")({email:t,code:e});console.log(`✅ Verification email sent to ${t}`,s)}catch(r){throw console.error("Failed to send email via Cloud Functions:",r),console.log(`
====================================
🥗💰 健康家計アプリ - メール確認コード
====================================

こんにちは！

健康家計アプリへのご登録ありがとうございます。

以下の確認コードを入力して、メールアドレスの確認を完了してください：

確認コード: ${e}

※ このコードは10分間有効です。
※ このメールに心当たりがない場合は、無視していただいて構いません。

━━━━━━━━━━━━━━━━━━━━━━━━
健康家計アプリについて
━━━━━━━━━━━━━━━━━━━━━━━━

AIが健康をサポートする生活管理アプリです。

主な機能：
✓ 食事記録とカロリー管理
✓ AIレシピ生成
✓ 家計簿機能
✓ 在庫管理
✓ バーコードスキャン
✓ レシートOCR（自動読み取り）

━━━━━━━━━━━━━━━━━━━━━━━━

© 2025 健康家計アプリ
https://haradakouta.github.io/life-pwa-react/

====================================
    `),alert(`【開発モード】Cloud Function未設定です。
確認コードをコンソールに表示しました:

確認コード: ${e}

このコードを入力してください。`),new Error("メール送信に失敗しました。コンソールで確認コードを確認してください。")}},iD=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Kf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>dA);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Kf(async()=>{const{default:c}=await Promise.resolve().then(()=>_A);return{default:c}},void 0),a=r(i),s=await n(a,"sendPasswordResetEmail")({email:t,code:e});console.log(`✅ Password reset email sent to ${t}`,s)}catch(r){console.error("Failed to send password reset email via Cloud Functions:",r),console.log(`
====================================
🥗💰 健康家計アプリ - パスワードリセット
====================================

こんにちは！

パスワードのリセットをリクエストいただきありがとうございます。

以下の確認コードを入力して、パスワードのリセットを完了してください：

確認コード: ${e}

※ このコードは10分間有効です。
※ このメールに心当たりがない場合は、無視していただいて構いません。

━━━━━━━━━━━━━━━━━━━━━━━━

© 2025 健康家計アプリ
https://haradakouta.github.io/life-pwa-react/

====================================
    `),alert(`【開発モード】Cloud Function未設定です。
確認コードをコンソールに表示しました:

確認コード: ${e}

このコードを入力してください。`)}},pme=async(t,e)=>{try{const{getFunctions:r,httpsCallable:n}=await Kf(async()=>{const{getFunctions:c,httpsCallable:f}=await Promise.resolve().then(()=>dA);return{getFunctions:c,httpsCallable:f}},void 0),{default:i}=await Kf(async()=>{const{default:c}=await Promise.resolve().then(()=>_A);return{default:c}},void 0),a=r(i),s=await n(a,"resetPassword")({email:t,newPassword:e});return console.log(`✅ Password reset successful for ${t}`,s),{success:!0}}catch(r){return console.error("Failed to reset password via Cloud Functions:",r),{success:!1,error:r.message||"パスワードのリセットに失敗しました"}}},gme=({onBack:t})=>{const[e,r]=C.useState("email"),[n,i]=C.useState(""),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(""),[y,b]=C.useState(!1),[w,E]=C.useState(""),S=async k=>{k.preventDefault(),E(""),b(!0);try{const B=Kv();await Xv(n,B),await nD(n,B),console.log("✅ 確認コードを送信しました:",n),r("code")}catch(B){console.error("Email send error:",B),E(B.message||"確認コードの送信に失敗しました")}finally{b(!1)}},I=async k=>{k.preventDefault(),E(""),b(!0);try{const B=await wB(n,a);if(!B.valid){E(B.error||"確認コードが正しくありません"),b(!1);return}console.log("✅ 確認コードが正しいです"),r("profile")}catch(B){E(B.message||"確認に失敗しました")}finally{b(!1)}},O=async k=>{if(k.preventDefault(),E(""),f!==p){E("パスワードが一致しません");return}if(f.length<6){E("パスワードは6文字以上で入力してください");return}if(!s.trim()){E("ユーザー名を入力してください");return}b(!0);try{const R=(await YG(Je,n,f)).user;await DM(R,{displayName:s}),console.log("🔄 認証トークンをリフレッシュ中..."),await R.getIdToken(!0),await new Promise(j=>setTimeout(j,2e3));let N=!1,L=0;const U=3;for(;!N&&L<U;)try{console.log(`📝 プロフィール作成試行 ${L+1}/${U}...`),await EA(R.uid,n,s),N=!0,console.log("✅ アカウント作成完了:",R.uid)}catch(j){if(L++,console.error(`❌ プロフィール作成失敗（試行 ${L}/${U}）:`,j),L<U){const V=1e3*Math.pow(2,L);console.log(`⏳ ${V}ms 待機してリトライします...`),await new Promise(F=>setTimeout(F,V)),await R.getIdToken(!0)}else console.error("❌ プロフィール作成に失敗しました（最大リトライ回数超過）"),alert(`注意: プロフィール作成に失敗しました。設定画面からプロフィールを作成してください。

エラー: `+(j.message||j.code||"不明なエラー"))}t()}catch(B){console.error("Registration error:",B);let R="アカウント作成に失敗しました";B.code==="auth/email-already-in-use"?R="このメールアドレスは既に使用されています":B.code==="auth/invalid-email"?R="メールアドレスの形式が正しくありません":B.code==="auth/weak-password"&&(R="パスワードが弱すぎます（6文字以上推奨）"),E(R)}finally{b(!1)}},D=async()=>{b(!0),E("");try{const k=Kv();await Xv(n,k),await nD(n,k),alert("確認コードを再送信しました！")}catch{E("再送信に失敗しました")}finally{b(!1)}};return m.jsxs("div",{className:"register-flow",children:[m.jsxs("div",{className:"progress-bar",children:[m.jsx("div",{className:`progress-step ${e==="email"?"active":["code","profile"].includes(e)?"completed":""}`,children:"1"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${e==="code"?"active":e==="profile"?"completed":""}`,children:"2"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${e==="profile"?"active":""}`,children:"3"})]}),e==="email"&&m.jsxs("form",{onSubmit:S,className:"step-form",children:[m.jsxs("button",{type:"button",onClick:t,className:"back-button-small",children:[m.jsx(Cp,{})," 戻る"]}),m.jsxs("h2",{children:[m.jsx(tm,{})," メールアドレスを入力"]}),m.jsx("p",{className:"step-description",children:"確認コードを送信します"}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"email",value:n,onChange:k=>i(k.target.value),placeholder:"email@example.com",required:!0,autoFocus:!0})}),w&&m.jsx("div",{className:"error-message",children:w}),m.jsx("button",{type:"submit",className:"submit-button",disabled:y,children:y?"送信中...":"確認コードを送信"})]}),e==="code"&&m.jsxs("form",{onSubmit:I,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(dD,{})," 確認コードを入力"]}),m.jsxs("p",{className:"step-description",children:[m.jsx("strong",{children:n})," 宛に送信された6桁のコードを入力してください"]}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"text",value:a,onChange:k=>o(k.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"code-input",required:!0,autoFocus:!0})}),w&&m.jsx("div",{className:"error-message",children:w}),m.jsx("button",{type:"submit",className:"submit-button",disabled:y||a.length!==6,children:y?"確認中...":"確認"}),m.jsx("button",{type:"button",onClick:D,className:"link-button",disabled:y,children:"コードを再送信"})]}),e==="profile"&&m.jsxs("form",{onSubmit:O,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(Of,{})," アカウント情報を設定"]}),m.jsx("p",{className:"step-description",children:"ユーザー名とパスワードを設定してください"}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Of,{})," ユーザー名"]}),m.jsx("input",{type:"text",value:s,onChange:k=>c(k.target.value),placeholder:"山田太郎",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Sl,{})," パスワード"]}),m.jsx("input",{type:"password",value:f,onChange:k=>d(k.target.value),placeholder:"6文字以上",minLength:6,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Sl,{})," パスワード（確認）"]}),m.jsx("input",{type:"password",value:p,onChange:k=>g(k.target.value),placeholder:"もう一度入力",minLength:6,required:!0})]}),w&&m.jsx("div",{className:"error-message",children:w}),m.jsx("button",{type:"submit",className:"submit-button",disabled:y,children:y?"アカウント作成中...":"登録完了"})]}),m.jsx("style",{children:`
        .register-flow {
          width: 100%;
        }

        .progress-bar {
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 40px;
        }

        .progress-step {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: var(--border);
          color: var(--text-secondary);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          transition: all 0.3s;
        }

        .progress-step.active {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transform: scale(1.1);
        }

        .progress-step.completed {
          background: var(--primary);
          color: white;
        }

        .progress-line {
          width: 60px;
          height: 2px;
          background: var(--border);
        }

        .step-form {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .back-button-small {
          align-self: flex-start;
          padding: 8px 16px;
          background: var(--background);
          border: 1px solid var(--border);
          border-radius: 6px;
          color: var(--text);
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button-small:hover {
          background: var(--border);
        }

        .step-form h2 {
          color: var(--text);
          font-size: 24px;
          margin: 0;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .step-form h2 svg {
          color: var(--primary);
        }

        .step-description {
          color: var(--text-secondary);
          margin: -8px 0 0 0;
          line-height: 1.5;
        }

        .step-description strong {
          color: var(--primary);
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .code-input {
          font-size: 32px !important;
          text-align: center;
          letter-spacing: 8px;
          font-weight: 600;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .submit-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transition: all 0.3s;
        }

        .submit-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .submit-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 8px;
          text-decoration: underline;
        }

        .link-button:hover:not(:disabled) {
          opacity: 0.8;
        }

        .link-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})},vme=({onBack:t,onSuccess:e})=>{const[r,n]=C.useState("email"),[i,a]=C.useState(""),[o,s]=C.useState(""),[c,f]=C.useState(""),[d,p]=C.useState(""),[g,y]=C.useState(!1),[b,w]=C.useState(""),E=async D=>{D.preventDefault(),w(""),y(!0);try{const k=Kv();await Xv(i,k),await iD(i,k),console.log("✅ パスワードリセット用の確認コードを送信しました:",i),n("code")}catch(k){console.error("Email send error:",k),w(k.message||"確認コードの送信に失敗しました")}finally{y(!1)}},S=async D=>{D.preventDefault(),w(""),y(!0);try{const k=await wB(i,o);if(!k.valid){w(k.error||"確認コードが正しくありません"),y(!1);return}console.log("✅ 確認コードが正しいです"),n("password")}catch(k){w(k.message||"確認に失敗しました")}finally{y(!1)}},I=async D=>{if(D.preventDefault(),w(""),c!==d){w("パスワードが一致しません");return}if(c.length<6){w("パスワードは6文字以上で入力してください");return}y(!0);try{const k=await pme(i,c);if(!k.success){w(k.error||"パスワードの更新に失敗しました"),y(!1);return}console.log("✅ パスワードのリセットが完了しました"),alert("パスワードのリセットが完了しました！新しいパスワードでログインしてください。"),e()}catch(k){console.error("Password reset error:",k),w(k.message||"パスワードの更新に失敗しました")}finally{y(!1)}},O=async()=>{y(!0),w("");try{const D=Kv();await Xv(i,D),await iD(i,D),alert("確認コードを再送信しました！")}catch{w("再送信に失敗しました")}finally{y(!1)}};return m.jsxs("div",{className:"password-reset-flow",children:[m.jsxs("div",{className:"progress-bar",children:[m.jsx("div",{className:`progress-step ${r==="email"?"active":["code","password"].includes(r)?"completed":""}`,children:"1"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${r==="code"?"active":r==="password"?"completed":""}`,children:"2"}),m.jsx("div",{className:"progress-line"}),m.jsx("div",{className:`progress-step ${r==="password"?"active":""}`,children:"3"})]}),r==="email"&&m.jsxs("form",{onSubmit:E,className:"step-form",children:[m.jsxs("button",{type:"button",onClick:t,className:"back-button-small",children:[m.jsx(Cp,{})," 戻る"]}),m.jsxs("h2",{children:[m.jsx(tm,{})," メールアドレスを入力"]}),m.jsx("p",{className:"step-description",children:"パスワードリセット用の確認コードを送信します"}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"email",value:i,onChange:D=>a(D.target.value),placeholder:"email@example.com",required:!0,autoFocus:!0})}),b&&m.jsx("div",{className:"error-message",children:b}),m.jsx("button",{type:"submit",className:"submit-button",disabled:g,children:g?"送信中...":"確認コードを送信"})]}),r==="code"&&m.jsxs("form",{onSubmit:S,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(dD,{})," 確認コードを入力"]}),m.jsxs("p",{className:"step-description",children:[m.jsx("strong",{children:i})," 宛に送信された6桁のコードを入力してください"]}),m.jsx("div",{className:"form-group",children:m.jsx("input",{type:"text",value:o,onChange:D=>s(D.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",maxLength:6,className:"code-input",required:!0,autoFocus:!0})}),b&&m.jsx("div",{className:"error-message",children:b}),m.jsx("button",{type:"submit",className:"submit-button",disabled:g||o.length!==6,children:g?"確認中...":"確認"}),m.jsx("button",{type:"button",onClick:O,className:"link-button",disabled:g,children:"コードを再送信"})]}),r==="password"&&m.jsxs("form",{onSubmit:I,className:"step-form",children:[m.jsxs("h2",{children:[m.jsx(Sl,{})," 新しいパスワードを設定"]}),m.jsx("p",{className:"step-description",children:"新しいパスワードを入力してください"}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Sl,{})," 新しいパスワード"]}),m.jsx("input",{type:"password",value:c,onChange:D=>f(D.target.value),placeholder:"6文字以上",minLength:6,required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Sl,{})," パスワード（確認）"]}),m.jsx("input",{type:"password",value:d,onChange:D=>p(D.target.value),placeholder:"もう一度入力",minLength:6,required:!0})]}),b&&m.jsx("div",{className:"error-message",children:b}),m.jsx("button",{type:"submit",className:"submit-button",disabled:g,children:g?"更新中...":"パスワードを更新"})]}),m.jsx("style",{children:`
        .password-reset-flow {
          width: 100%;
        }

        .progress-bar {
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 40px;
        }

        .progress-step {
          width: 40px;
          height: 40px;
          border-radius: 50%;
          background: var(--border);
          color: var(--text-secondary);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 600;
          transition: all 0.3s;
        }

        .progress-step.active {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transform: scale(1.1);
        }

        .progress-step.completed {
          background: var(--primary);
          color: white;
        }

        .progress-line {
          width: 60px;
          height: 2px;
          background: var(--border);
        }

        .step-form {
          display: flex;
          flex-direction: column;
          gap: 24px;
        }

        .back-button-small {
          align-self: flex-start;
          padding: 8px 16px;
          background: var(--background);
          border: 1px solid var(--border);
          border-radius: 6px;
          color: var(--text);
          font-size: 14px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          transition: all 0.3s;
        }

        .back-button-small:hover {
          background: var(--border);
        }

        .step-form h2 {
          color: var(--text);
          font-size: 24px;
          margin: 0;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .step-form h2 svg {
          color: var(--primary);
        }

        .step-description {
          color: var(--text-secondary);
          margin: -8px 0 0 0;
          line-height: 1.5;
        }

        .step-description strong {
          color: var(--primary);
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--card);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .code-input {
          font-size: 32px !important;
          text-align: center;
          letter-spacing: 8px;
          font-weight: 600;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .submit-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
          transition: all 0.3s;
        }

        .submit-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .submit-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 8px;
          text-decoration: underline;
        }

        .link-button:hover:not(:disabled) {
          opacity: 0.8;
        }

        .link-button:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})},mme=({onLoginSuccess:t})=>{const[e,r]=C.useState(!1),[n,i]=C.useState(!1),[a,o]=C.useState(""),[s,c]=C.useState(""),[f,d]=C.useState(""),[p,g]=C.useState(!1),y=async w=>{w.preventDefault(),d(""),g(!0);try{const E=await tY(a,s);E.error?d(E.error):t()}catch(E){d(E.message||"認証エラーが発生しました")}finally{g(!1)}},b=async()=>{d(""),g(!0);try{const w=await rY();w.error?d(w.error):t()}catch(w){d(w.message||"認証エラーが発生しました")}finally{g(!1)}};return e?m.jsxs("div",{className:"login-screen",children:[m.jsxs("div",{className:"login-container",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("h1",{children:"🥗💰 健康家計アプリ"}),m.jsx("p",{children:"新規登録"})]}),m.jsx(gme,{onBack:()=>r(!1)})]}),m.jsx("style",{children:`
          .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 20px;
          }

          .login-container {
            background: var(--card);
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          }

          .login-header {
            text-align: center;
            margin-bottom: 32px;
          }

          .login-header h1 {
            color: var(--text);
            font-size: 28px;
            margin: 0 0 8px 0;
          }

          .login-header p {
            color: var(--text-secondary);
            font-size: 14px;
            margin: 0;
          }
        `})]}):n?m.jsxs("div",{className:"login-screen",children:[m.jsxs("div",{className:"login-container",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("h1",{children:"🥗💰 健康家計アプリ"}),m.jsx("p",{children:"パスワードリセット"})]}),m.jsx(vme,{onBack:()=>i(!1),onSuccess:()=>i(!1)})]}),m.jsx("style",{children:`
          .login-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 20px;
          }

          .login-container {
            background: var(--card);
            border-radius: 16px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
          }

          .login-header {
            text-align: center;
            margin-bottom: 32px;
          }

          .login-header h1 {
            color: var(--text);
            font-size: 28px;
            margin: 0 0 8px 0;
          }

          .login-header p {
            color: var(--text-secondary);
            font-size: 14px;
            margin: 0;
          }
        `})]}):m.jsxs("div",{className:"login-screen",children:[m.jsxs("div",{className:"login-container",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("h1",{children:"🥗💰 健康家計アプリ"}),m.jsx("p",{children:"AIが健康をサポートする生活管理アプリ"})]}),m.jsxs("form",{onSubmit:y,className:"login-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(tm,{})," メールアドレス"]}),m.jsx("input",{type:"email",value:a,onChange:w=>o(w.target.value),placeholder:"email@example.com",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsxs("label",{children:[m.jsx(Sl,{})," パスワード"]}),m.jsx("input",{type:"password",value:s,onChange:w=>c(w.target.value),placeholder:"6文字以上",minLength:6,required:!0})]}),f&&m.jsx("div",{className:"error-message",children:f}),m.jsx("button",{type:"submit",className:"login-button",disabled:p,children:p?"処理中...":m.jsxs(m.Fragment,{children:[m.jsx(Pz,{})," ログイン"]})}),m.jsx("button",{type:"button",onClick:()=>i(!0),className:"forgot-password-button",children:"パスワードをお忘れですか？"}),m.jsx("button",{type:"button",onClick:()=>r(!0),className:"register-link-button",children:"アカウントをお持ちでない方はこちら"})]}),m.jsx("div",{className:"divider",children:m.jsx("span",{children:"または"})}),m.jsxs("button",{onClick:b,className:"google-login-button",disabled:p,children:[m.jsx(fme,{})," Googleでログイン"]}),m.jsx("div",{className:"login-footer",children:m.jsxs("p",{children:["※ Firebase Authenticationを使用した安全な認証です",m.jsx("br",{}),"データはFirestoreに安全に保存されます"]})})]}),m.jsx("style",{children:`
        .login-screen {
          min-height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
          padding: 20px;
        }

        .login-container {
          background: var(--card);
          border-radius: 16px;
          padding: 40px;
          max-width: 450px;
          width: 100%;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .login-header {
          text-align: center;
          margin-bottom: 32px;
        }

        .login-header h1 {
          color: var(--text);
          font-size: 28px;
          margin: 0 0 8px 0;
        }

        .login-header p {
          color: var(--text-secondary);
          font-size: 14px;
          margin: 0;
        }

        .forgot-password-button,
        .register-link-button {
          background: none;
          border: none;
          color: var(--primary);
          font-size: 14px;
          cursor: pointer;
          padding: 12px;
          text-decoration: underline;
          transition: opacity 0.3s;
        }

        .forgot-password-button:hover,
        .register-link-button:hover {
          opacity: 0.8;
        }

        .login-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .form-group label {
          color: var(--text);
          font-size: 14px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .form-group label svg {
          color: var(--primary);
        }

        .form-group input {
          padding: 12px 16px;
          border: 2px solid var(--border);
          border-radius: 8px;
          font-size: 16px;
          background: var(--background);
          color: var(--text);
          transition: all 0.3s;
        }

        .form-group input:focus {
          outline: none;
          border-color: var(--primary);
          box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .info-message {
          padding: 12px;
          background: #e8f5e9;
          color: #2e7d32;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 6px;
        }

        body.dark-mode .info-message {
          background: #1b5e20;
          color: #a5d6a7;
        }

        .error-message {
          padding: 12px;
          background: #ffebee;
          color: #c62828;
          border-radius: 8px;
          font-size: 14px;
          text-align: center;
        }

        body.dark-mode .error-message {
          background: #b71c1c;
          color: #ffcdd2;
        }

        .login-button,
        .google-login-button {
          padding: 14px 24px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
        }

        .login-button {
          background: linear-gradient(135deg, var(--primary) 0%, #43a047 100%);
          color: white;
        }

        .login-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }

        .login-button:active:not(:disabled) {
          transform: translateY(0);
        }

        .login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .google-login-button {
          background: white;
          color: #555;
          border: 2px solid #ddd;
        }

        .google-login-button:hover:not(:disabled) {
          background: #f5f5f5;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .google-login-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .divider {
          text-align: center;
          margin: 24px 0;
          position: relative;
        }

        .divider::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 1px;
          background: var(--border);
        }

        .divider span {
          background: var(--card);
          padding: 0 16px;
          color: var(--text-secondary);
          font-size: 14px;
          position: relative;
          z-index: 1;
        }

        .login-footer {
          margin-top: 24px;
          text-align: center;
        }

        .login-footer p {
          color: var(--text-secondary);
          font-size: 12px;
          line-height: 1.6;
          margin: 0;
        }

        @media (max-width: 480px) {
          .login-container {
            padding: 24px;
          }

          .login-header h1 {
            font-size: 24px;
          }
        }
      `})]})};function yme(){const{newBadges:t,clearNewBadges:e}=wA(),[r,n]=C.useState(0),[i,a]=C.useState(!1);if(C.useEffect(()=>{t.length>0&&(n(0),a(!0))},[t]),!i||t.length===0)return null;const o=t[r],s=XX(o);if(!s)return null;const c=()=>{r<t.length-1?n(r+1):f()},f=()=>{a(!1),e(),n(0)};return m.jsx("div",{className:"badge-modal-overlay-fullscreen",children:m.jsx("div",{className:"badge-modal-fullscreen",children:m.jsxs("div",{className:"badge-modal-content-fullscreen",children:[m.jsx("div",{className:"badge-glow"}),m.jsx("div",{className:"badge-celebration-large",children:"🎉"}),m.jsx("div",{className:"badge-icon-huge",children:s.icon}),m.jsxs("h2",{className:"badge-title-huge",children:[m.jsx(Jv,{size:48,style:{color:"#10b981",marginRight:"12px"}}),"バッジ獲得！"]}),m.jsx("h3",{className:"badge-name-huge",children:s.name}),m.jsx("p",{className:"badge-description-large",children:s.description}),t.length>1&&m.jsxs("div",{className:"badge-progress-large",children:[r+1," / ",t.length]}),m.jsx("div",{className:"badge-buttons-large",children:r<t.length-1?m.jsx("button",{className:"badge-btn-large badge-btn-next",onClick:c,children:"次へ"}):m.jsx("button",{className:"badge-btn-large badge-btn-ok",onClick:f,children:"OK"})})]})})})}function xme(t){if(t.length===0)return 0;const e=[...new Set(t.map(i=>i.split("T")[0]))].sort().reverse();let r=0;const n=new Date;n.setHours(0,0,0,0);for(let i=0;i<e.length;i++){const a=new Date(e[i]);a.setHours(0,0,0,0);const o=new Date(n);if(o.setDate(o.getDate()-i),o.setHours(0,0,0,0),a.getTime()===o.getTime())r++;else break}return r}function bme(){const{settings:t}=av(),{user:e,loading:r}=As(),[n,i]=C.useState(!1),a=Po(),o=Do(),s=No(),c=yu(),f=Vp(),d=av(),p=wA();return C.useEffect(()=>{document.body.classList.toggle("dark-mode",t.darkMode)},[t.darkMode]),C.useEffect(()=>{if(!e)return;const{intakes:g}=a,{expenses:y}=o,{stocks:b}=s,{recipeHistory:w}=f,E=0,S=xme(g.map(j=>j.date)),I=g.reduce((j,V)=>j+V.calories,0),O=new Date,D=O.getDate();let k=O.getMonth(),B=O.getFullYear();k===0?(k=11,B-=1):k-=1;const N=y.filter(j=>{const V=new Date(j.date);return V.getMonth()===k&&V.getFullYear()===B}).reduce((j,V)=>j+V.amount,0),L=D===1&&N<=t.monthlyBudget&&N>0,U={intakesCount:g.length,expensesCount:y.length,stocksCount:b.length,consecutiveDays:S,totalCalories:I,budgetAchieved:L,recipesGenerated:w.length,barcodesScanned:E};p.checkAndUnlockBadges(U)},[a.intakes.length,o.expenses.length,s.stocks.length,f.recipeHistory.length]),C.useEffect(()=>((async()=>{if(!e){a.unsubscribeFromFirestore();return}i(!0);try{if(console.log("Syncing data for user:",e.uid),console.log("📝 Checking user profile..."),await Fi(e.uid))console.log("✅ プロフィールが存在します");else{console.log("⚠️ プロフィールが存在しません。自動作成します...");try{await EA(e.uid,e.email||"",e.displayName||`User${e.uid.slice(0,8)}`),console.log("✅ プロフィールを作成しました")}catch(b){console.error("❌ プロフィール作成に失敗しました:",b)}}await Promise.all([a.syncWithFirestore(),o.syncWithFirestore(),s.syncWithFirestore(),c.syncWithFirestore(),f.syncWithFirestore(),d.syncWithFirestore()]),console.log("Sync completed for user:",e.uid),console.log("Starting realtime sync..."),a.subscribeToFirestore(),console.log("Realtime sync started")}catch(y){console.error("Failed to sync stores with Firestore:",y)}finally{i(!1)}})(),()=>{e&&a.unsubscribeFromFirestore()}),[e?.uid]),r||n?m.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%)"},children:m.jsx("div",{style:{color:"white",fontSize:"24px",textAlign:"center"},children:r?"ロード中...":"データを同期中..."})}):e?m.jsxs(m.Fragment,{children:[m.jsx(ume,{}),m.jsx(yme,{})]}):m.jsx(mme,{onLoginSuccess:()=>{}})}uz.createRoot(document.getElementById("root")).render(m.jsx(Hn.StrictMode,{children:m.jsx(bme,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/life-pwa-react/sw.js").then(t=>{console.log("[SW] Registered:",t.scope),t.addEventListener("updatefound",()=>{const e=t.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW] New version available"),confirm("新しいバージョンが利用可能です。更新しますか？")&&(e.postMessage({type:"SKIP_WAITING"}),window.location.reload()))})})}).catch(t=>{console.error("[SW] Registration failed:",t)})});
