:root{--background: #f7f8fa;--text: #333;--text-secondary: #666;--card: #fff;--primary: #3b82f6;--primary-dark: #2563eb;--border: #e5e7eb}body.dark-mode{--background: #000;--text: #f5f5f7;--text-secondary: #999;--card: #1c1c1e;--primary: #60a5fa;--primary-dark: #3b82f6;--border: #2c2c2e}*{box-sizing:border-box;margin:0;padding:0}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Yu Gothic,YuGothic,Hiragino Sans,sans-serif;background:#f7f8fa;color:#333;font-size:14px;line-height:1.5;padding-bottom:env(safe-area-inset-bottom)}header{background:linear-gradient(135deg,var(--primary) 0%,#60a5fa 100%);color:#fff;text-align:center;padding:14px 16px;font-weight:600;font-size:16px;border-bottom:none;position:sticky;top:0;z-index:100;box-shadow:0 2px 8px #3b82f633}main{padding:0 0 70px;max-width:100%}section{display:none}section.active{display:block}.summary-box{background:#fff;padding:16px;border-bottom:1px solid #e5e7eb}.summary-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.summary-label{font-size:13px;color:#666}.summary-value{font-size:18px;font-weight:600;color:#333}.summary-value.positive{color:#3b82f6}.list-section{background:#fff;margin-top:8px}.list-header{padding:12px 16px;font-size:12px;color:#666;background:#f7f8fa;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.list-item{display:flex;align-items:center;padding:14px 16px;border-bottom:1px solid #f1f3f5;gap:12px;transition:background-color .2s ease;cursor:pointer}.list-item:hover{background-color:#3b82f60d}.list-item:last-child{border-bottom:none}.list-icon{font-size:20px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#f1f3f5;border-radius:8px;flex-shrink:0}.list-content{flex:1;min-width:0}.list-title{font-size:14px;font-weight:500;color:#333;margin-bottom:2px}.list-subtitle{font-size:12px;color:#999}.list-value{font-size:15px;font-weight:600;color:#333;white-space:nowrap}.list-value.expense{color:#ef4444}.list-value.income{color:#3b82f6}.delete-btn{background:transparent;border:none;color:#999;font-size:18px;cursor:pointer;padding:4px 8px;margin:0;width:auto;transition:color .2s}.delete-btn:hover{color:#ef4444}.empty-state{text-align:center;padding:40px 20px;color:#999}.empty-icon{font-size:48px;margin-bottom:12px;opacity:.5}.empty-text{font-size:14px}#bottomNav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;justify-content:space-around;align-items:center;padding:8px 0 calc(8px + env(safe-area-inset-bottom));border-top:1px solid #e5e7eb;z-index:100}.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;padding:6px;background:transparent;border:none;cursor:pointer;color:#999;transition:color .2s;font-size:11px}.nav-item.active{color:#3b82f6}.nav-item svg{stroke:currentColor}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#0000;display:none;align-items:flex-end;z-index:9999;transition:background-color .3s ease}.modal.active{display:flex;background:#00000080;animation:fadeIn .3s ease}.modal-content{background:var(--card);border-radius:16px 16px 0 0;width:100%;max-height:80vh;overflow-y:auto;padding:20px;animation:slideUp .3s cubic-bezier(.4,0,.2,1);box-shadow:0 -4px 16px #0000001a}@keyframes slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-title{font-size:18px;font-weight:600}.modal-close{background:transparent;border:none;font-size:28px;color:#999;cursor:pointer;padding:0;margin:0;width:auto;line-height:1}.form-group{margin-bottom:16px}.form-label{display:block;font-size:13px;color:#666;margin-bottom:6px;font-weight:500}input,select,textarea{width:100%;padding:12px;border:2px solid var(--border);border-radius:8px;font-size:15px;background:var(--card);color:var(--text);font-family:inherit;transition:all .2s ease}input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #3b82f61a;transform:translateY(-1px)}button.btn-primary{width:100%;padding:14px;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;margin-top:8px;transition:all .2s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 4px #3b82f633}button.btn-primary:hover{background:var(--primary-dark);box-shadow:0 4px 12px #3b82f64d;transform:translateY(-1px)}button.btn-primary:active{background:var(--primary-dark);transform:translateY(0);box-shadow:0 2px 4px #3b82f633}button.btn-secondary{width:100%;padding:14px;background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:8px;font-size:15px;font-weight:500;cursor:pointer;margin-top:8px;transition:all .2s cubic-bezier(.4,0,.2,1)}button.btn-secondary:hover{background:var(--background);border-color:var(--primary);color:var(--primary);transform:translateY(-1px)}button.btn-secondary:active{transform:translateY(0)}.card{background:var(--card);padding:16px;margin:8px 0;border-radius:12px;box-shadow:0 2px 8px #00000014;transition:all .3s cubic-bezier(.4,0,.2,1)}.card:hover{box-shadow:0 4px 16px #0000001f;transform:translateY(-2px)}.card-title{font-size:14px;font-weight:600;margin-bottom:12px;color:var(--text)}body.dark-mode{background:#000;color:#f5f5f7}body.dark-mode header{background:linear-gradient(135deg,#1e40af 0%,var(--primary) 100%);color:#f5f5f7;box-shadow:0 2px 8px #0000004d}body.dark-mode .summary-box{background:#1c1c1e;border-bottom-color:#2c2c2e}body.dark-mode .summary-value{color:#f5f5f7}body.dark-mode .list-section{background:#1c1c1e}body.dark-mode .list-header{background:#000;color:#999}body.dark-mode .list-item{border-bottom-color:#2c2c2e}body.dark-mode .list-icon{background:#2c2c2e}body.dark-mode .list-title,body.dark-mode .list-value{color:#f5f5f7}body.dark-mode #bottomNav{background:#1c1c1e;border-top-color:#2c2c2e}body.dark-mode .nav-item.active{color:#60a5fa}body.dark-mode .modal-content{background:#1c1c1e}body.dark-mode .modal-title{color:#f5f5f7}body.dark-mode input,body.dark-mode select,body.dark-mode textarea{background:#2c2c2e;border-color:#3a3a3c;color:#f5f5f7}body.dark-mode .card{background:var(--card);box-shadow:0 2px 8px #0000004d}body.dark-mode .card:hover{box-shadow:0 4px 16px #00000080}.hidden{display:none!important}.text-center{text-align:center}.submit{width:100%;padding:14px;background:var(--primary);color:#fff;border:none;border-radius:8px;font-size:15px;font-weight:600;cursor:pointer;margin:8px 0;transition:all .2s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 4px #3b82f633}.submit:hover{background:var(--primary-dark);box-shadow:0 4px 12px #3b82f64d;transform:translateY(-1px)}.submit:active{background:var(--primary-dark);transform:translateY(0);box-shadow:0 2px 4px #3b82f633}.submit{display:flex;align-items:center;justify-content:center}h2{font-size:20px;font-weight:600;padding:16px;background:#fff;border-bottom:1px solid #e5e7eb}h3{font-size:15px;font-weight:600;margin-bottom:12px}body.dark-mode h2{background:#1c1c1e;color:#f5f5f7;border-bottom-color:#2c2c2e}body.dark-mode h3{color:#f5f5f7}.function-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:16px}.function-card{aspect-ratio:1;background:#fff;border:none;border-radius:16px;padding:16px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:all .15s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #00000014;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.function-card:before{content:"";position:absolute;inset:0;background:var(--card-color, #3b82f6);opacity:.1;transition:all .15s cubic-bezier(.4,0,.2,1)}.function-card:active{transform:scale(.92);box-shadow:0 1px 4px #0000001f}.function-card:active:before{opacity:.3}.function-card:active .function-icon{transform:scale(.95)}.function-card:active .function-label{transform:scale(.98)}.function-icon{font-size:32px;position:relative;z-index:1}.function-label{font-size:13px;font-weight:600;color:#333;position:relative;z-index:1;text-align:center}body.dark-mode .function-card{background:#1c1c1e;box-shadow:0 2px 8px #0000004d}body.dark-mode .function-label{color:#f5f5f7}.toggle-switch{position:relative;display:inline-block;width:48px;height:24px}.toggle-switch input{opacity:0;width:0;height:0}.toggle-slider{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.3s;border-radius:24px}.toggle-slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.3s;border-radius:50%}.toggle-switch input:checked+.toggle-slider{background-color:var(--primary)}.toggle-switch input:checked+.toggle-slider:before{transform:translate(24px)}body.dark-mode .toggle-slider{background-color:#555}.setting-item{display:flex;align-items:center;justify-content:space-between;padding:16px 0;gap:12px}.setting-item-left{display:flex;align-items:center;gap:12px;flex:1}.setting-icon{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;background:var(--background);color:var(--primary)}.setting-label{font-size:15px;font-weight:500;color:var(--text)}@media (min-width: 768px){main{max-width:600px;margin:0 auto}}@keyframes slideDown{0%{transform:translate(-50%,-20px);opacity:0}to{transform:translate(-50%);opacity:1}}.notification-settings,.setting-section{width:100%}.setting-header{margin-bottom:20px}.setting-header h3{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;color:var(--text);margin-bottom:8px}.setting-description{font-size:13px;color:var(--text-secondary);margin:0}.notification-warning{background:linear-gradient(135deg,#fef3c7,#fde68a);padding:12px;border-radius:8px;margin-top:12px;border-left:4px solid #f59e0b}.notification-warning p{margin:0;font-size:13px;color:#92400e}.meal-notifications{margin-top:20px;display:flex;flex-direction:column;gap:16px}.meal-notification-item{background:var(--background);padding:16px;border-radius:12px;border:1px solid var(--border);transition:all .2s ease}.meal-notification-item:hover{border-color:var(--primary);box-shadow:0 2px 8px #3b82f61a}.meal-header{display:flex;justify-content:space-between;align-items:center}.meal-info{display:flex;align-items:center;gap:12px}.meal-icon{font-size:24px}.meal-name{font-size:15px;font-weight:600;color:var(--text)}.time-input-wrapper{margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}.time-input{width:100%;padding:10px 12px;font-size:16px;border:2px solid var(--border);border-radius:8px;background:var(--card);color:var(--text);transition:all .2s ease;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.time-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #3b82f61a}body.dark-mode .notification-warning{background:linear-gradient(135deg,#78350f,#92400e);border-left-color:#f59e0b}body.dark-mode .notification-warning p{color:#fde68a}.badge-list{width:100%}.badge-summary{margin-bottom:24px;text-align:center}.badge-summary h3{font-size:20px;font-weight:600;color:var(--text);margin-bottom:12px}.badge-count{color:var(--primary);font-weight:700}.progress-bar{width:100%;height:12px;background:var(--border);border-radius:6px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,var(--primary) 0%,#60a5fa 100%);transition:width .5s ease}.badge-category{margin-bottom:32px}.category-title{font-size:16px;font-weight:600;color:var(--text);margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid var(--border)}.badge-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:12px}.badge-item{display:flex;gap:12px;padding:16px;background:var(--card);border:2px solid var(--border);border-radius:12px;transition:all .3s ease}.badge-item.unlocked{border-color:var(--primary);box-shadow:0 4px 12px #3b82f626}.badge-item.locked{opacity:.5}.badge-item:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3b82f633}.badge-icon{font-size:48px;flex-shrink:0}.badge-info{flex:1}.badge-name{font-size:15px;font-weight:600;color:var(--text);margin-bottom:4px}.badge-description{font-size:13px;color:var(--text-secondary);margin-bottom:4px}.badge-requirement{font-size:12px;color:var(--primary);font-weight:500}.badge-unlocked-date{font-size:11px;color:var(--text-secondary);margin-top:4px}.badge-modal-overlay-fullscreen{position:fixed;inset:0;background:#000000f2;display:flex;align-items:center;justify-content:center;z-index:10000;animation:fadeIn .3s ease;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.badge-modal-fullscreen{width:100%;height:100%;display:flex;align-items:center;justify-content:center;padding:20px}.badge-modal-content-fullscreen{position:relative;text-align:center;animation:zoomIn .5s cubic-bezier(.175,.885,.32,1.275);max-width:600px;width:100%}.badge-glow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:400px;height:400px;background:radial-gradient(circle,#3b82f666,#3b82f600 70%);animation:pulse 2s infinite;pointer-events:none}.badge-celebration-large{font-size:120px;margin-bottom:24px;animation:bounce 1s ease infinite;filter:drop-shadow(0 0 30px rgba(255,215,0,.8))}.badge-icon-huge{font-size:200px;margin-bottom:32px;animation:scaleIn .6s ease,float 3s ease-in-out infinite;filter:drop-shadow(0 0 40px rgba(255,255,255,.5))}.badge-title-huge{font-size:48px;font-weight:900;background:linear-gradient(135deg,#fbbf24,#f59e0b,#fbbf24);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:24px;display:flex;align-items:center;justify-content:center;animation:shimmer 2s infinite;text-shadow:0 0 30px rgba(251,191,36,.5)}.badge-name-huge{font-size:36px;font-weight:700;color:#fff;margin-bottom:16px;text-shadow:0 4px 20px rgba(0,0,0,.8)}.badge-description-large{font-size:20px;color:#d1d5db;margin-bottom:40px;line-height:1.6;text-shadow:0 2px 10px rgba(0,0,0,.8)}.badge-progress-large{font-size:18px;color:#9ca3af;margin-bottom:32px}.badge-buttons-large{display:flex;gap:16px;justify-content:center}.badge-btn-large{padding:20px 60px;font-size:24px;font-weight:700;border:none;border-radius:16px;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:2px;box-shadow:0 8px 24px #0006}.badge-btn-ok{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.badge-btn-ok:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 32px #10b98180}.badge-btn-next{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.badge-btn-next:hover{transform:translateY(-4px) scale(1.05);box-shadow:0 12px 32px #3b82f680}@media (max-width: 768px){.badge-celebration-large{font-size:80px}.badge-icon-huge{font-size:150px}.badge-title-huge{font-size:32px}.badge-title-huge svg{width:32px;height:32px}.badge-name-huge{font-size:28px}.badge-description-large{font-size:16px;padding:0 20px}.badge-btn-large{padding:16px 40px;font-size:18px}.badge-glow{width:300px;height:300px}}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes scaleIn{0%{transform:scale(0);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}@keyframes pulse{0%,to{transform:scale(1);opacity:.8}50%{transform:scale(1.1);opacity:1}}@keyframes zoomIn{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes shimmer{0%{background-position:-100% 0}to{background-position:200% 0}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.monthly-report{width:100%}.report-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.report-header h3{font-size:20px;font-weight:600;color:var(--text)}.month-selector{display:flex;align-items:center;gap:12px}.month-nav-btn{background:var(--background);border:2px solid var(--border);border-radius:8px;padding:6px 12px;color:var(--text);font-size:16px;cursor:pointer;transition:all .2s ease}.month-nav-btn:hover{background:var(--primary);color:#fff;border-color:var(--primary)}.current-month{font-size:16px;font-weight:600;color:var(--text);min-width:100px;text-align:center}.report-section{margin-bottom:32px}.report-section h4{font-size:16px;font-weight:600;color:var(--text);margin-bottom:16px;display:flex;align-items:center}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px}.stat-item{background:var(--background);padding:16px;border-radius:12px;border:2px solid var(--border);text-align:center}.stat-label{font-size:12px;color:var(--text-secondary);margin-bottom:8px}.stat-value{font-size:24px;font-weight:700;color:var(--text);margin-bottom:4px}.change{display:inline-flex;align-items:center;gap:4px;font-size:13px;font-weight:600;padding:2px 8px;border-radius:4px}.change-up{color:#ef4444;background:#ef44441a}.change-down{color:#10b981;background:#10b9811a}.change-neutral{color:var(--text-secondary)}.comparison-grid{display:flex;flex-direction:column;gap:12px}.comparison-item{background:var(--background);padding:12px;border-radius:8px;border:1px solid var(--border)}.comparison-label{font-size:13px;color:var(--text-secondary);margin-bottom:8px}.comparison-values{display:flex;align-items:center;justify-content:space-between;gap:8px}.prev-value{font-size:14px;color:var(--text-secondary);flex:1;text-align:right}.curr-value{font-size:16px;font-weight:600;color:var(--primary);flex:1;text-align:left}.ai-suggestions{background:linear-gradient(135deg,#ede9fe,#ddd6fe);padding:16px;border-radius:12px;border-left:4px solid #8b5cf6}.suggestions-content{font-size:14px;line-height:1.8;color:#1f2937;white-space:pre-wrap}.no-data-message{font-size:13px;color:var(--text-secondary);text-align:center;padding:12px;margin-top:8px}body.dark-mode .ai-suggestions{background:linear-gradient(135deg,#3730a3,#4c1d95);border-left-color:#a78bfa}body.dark-mode .suggestions-content{color:#e9d5ff}
